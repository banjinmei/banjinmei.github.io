<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Azure OpenAI ç”Ÿæˆè‡ªç„¶è¯­è¨€è§£å†³æ–¹æ¡ˆ</title>
      <link href="/2024/06/04/Azure-openai/"/>
      <url>/2024/06/04/Azure-openai/</url>
      
        <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>Azure OpenAI ä¸ºå¼€å‘äººå‘˜æä¾›äº†ä¸€ä¸ªå¹³å°ï¼Œç”¨äºåœ¨ Python å’Œ C# SDK ä»¥åŠ REST API çš„å¸®åŠ©ä¸‹å‘å…¶åº”ç”¨ç¨‹åºæ·»åŠ äººå·¥æ™ºèƒ½åŠŸèƒ½ã€‚ è¯¥å¹³å°æä¾›äº†å„ç§ AI æ¨¡å‹ï¼Œæ¯ä¸ªæ¨¡å‹éƒ½ä¸“ç”¨äºä¸åŒçš„ä»»åŠ¡ï¼Œè¿™äº›ä»»åŠ¡å¯é€šè¿‡ Azure OpenAI æœåŠ¡è¿›è¡Œéƒ¨ç½²ã€‚</p><p>æœ¬æ¨¡å—æŒ‡å¯¼ä½ äº†è§£å¦‚ä½•å°† Azure OpenAI æ„å»ºåˆ°è‡ªå·±çš„åº”ç”¨ç¨‹åºä¸­ï¼Œä¸ºä½ æä¾›ä¸€ä¸ªä½¿ç”¨ç”Ÿæˆå¼ AI å¼€å‘è§£å†³æ–¹æ¡ˆçš„èµ·ç‚¹ã€‚</p><h2 id="å°†-Azure-OpenAI-é›†æˆåˆ°åº”ç”¨ä¸­"><a href="#å°†-Azure-OpenAI-é›†æˆåˆ°åº”ç”¨ä¸­" class="headerlink" title="å°† Azure OpenAI é›†æˆåˆ°åº”ç”¨ä¸­"></a>å°† Azure OpenAI é›†æˆåˆ°åº”ç”¨ä¸­</h2><p>Azure OpenAI æä¾› C# å’Œ Python SDK ä»¥åŠ REST APIï¼Œå¼€å‘äººå‘˜å¯ä»¥ç”¨æ¥å‘å…¶åº”ç”¨ç¨‹åºæ·»åŠ  AI åŠŸèƒ½ã€‚ Azure OpenAI ä¸­çš„ç”Ÿæˆå¼ AI åŠŸèƒ½é€šè¿‡æ¨¡å‹æä¾›ã€‚ Azure OpenAI æœåŠ¡ä¸­å¯ç”¨çš„æ¨¡å‹å±äºä¸åŒçš„ç³»åˆ—ï¼Œæ¯ä¸ªç³»åˆ—éƒ½æœ‰è‡ªå·±çš„é‡ç‚¹ã€‚ è‹¥è¦ä½¿ç”¨è¿™äº›æ¨¡å‹ä¹‹ä¸€ï¼Œéœ€è¦é€šè¿‡ Azure OpenAI æœåŠ¡è¿›è¡Œéƒ¨ç½²ã€‚</p><p>é‡è¦</p><p>Azure OpenAI å·²å‘å¸ƒï¼Œä½†æ”¯æŒè´Ÿè´£ä»»åœ°ä½¿ç”¨è¯¥æœåŠ¡çš„è®¿é—®æƒé™æœ‰é™ã€‚ ç”¨æˆ·éœ€è¦å…ˆ<a href="https://learn.microsoft.com/zh-cn/azure/cognitive-services/openai/overview#how-do-i-get-access-to-azure-openai?azure-portal=true">ç”³è¯·è®¿é—®æƒé™</a>å¹¶è·å¾—æ‰¹å‡†ï¼Œç„¶åæ‰èƒ½åˆ›å»º Azure OpenAI èµ„æºã€‚</p><h2 id="åˆ›å»º-Azure-OpenAI-èµ„æº"><a href="#åˆ›å»º-Azure-OpenAI-èµ„æº" class="headerlink" title="åˆ›å»º Azure OpenAI èµ„æº"></a>åˆ›å»º Azure OpenAI èµ„æº</h2><p>å¯ä»¥é€šè¿‡ Azure å‘½ä»¤è¡Œæ¥å£ (CLI) å’Œ Azure é—¨æˆ·éƒ¨ç½² Azure OpenAI èµ„æºã€‚ é€šè¿‡ Azure é—¨æˆ·åˆ›å»º Azure OpenAI èµ„æºç±»ä¼¼äºéƒ¨ç½²å•ä¸ª Azure AI æœåŠ¡èµ„æºï¼Œå¹¶ä¸”æ˜¯ Azure AI æœåŠ¡çš„ä¸€éƒ¨åˆ†ã€‚</p><ol><li>å¯¼èˆªåˆ° <a href="https://portal.azure.com/?azure-portal=true">Azure é—¨æˆ·</a></li><li>æœç´¢ Azure OpenAIï¼Œå°†å…¶é€‰ä¸­ï¼Œç„¶åå•å‡»â€œåˆ›å»ºâ€</li><li>ä¸ºç©ºå­—æ®µè¾“å…¥é€‚å½“çš„å€¼ï¼Œç„¶ååˆ›å»ºèµ„æºã€‚</li></ol><p>ç›®å‰ Azure OpenAI å¯èƒ½éƒ¨ç½²çš„åŒºåŸŸæœ‰é™ã€‚ é€‰æ‹©è·ç¦»æ‰€åœ¨ç‰©ç†ä½ç½®æœ€è¿‘çš„åŒºåŸŸã€‚</p><p>åˆ›å»ºèµ„æºåï¼Œä½ å°†è·å¾—å¯åœ¨åº”ç”¨ä¸­ä½¿ç”¨çš„å¯†é’¥å’Œç»ˆç»“ç‚¹ã€‚</p><h2 id="é€‰æ‹©å’Œéƒ¨ç½²æ¨¡å‹"><a href="#é€‰æ‹©å’Œéƒ¨ç½²æ¨¡å‹" class="headerlink" title="é€‰æ‹©å’Œéƒ¨ç½²æ¨¡å‹"></a>é€‰æ‹©å’Œéƒ¨ç½²æ¨¡å‹</h2><p>æ¯ä¸ªæ¨¡å‹ç³»åˆ—æ“…é•¿ä¸åŒçš„ä»»åŠ¡ï¼Œå¹¶ä¸”æ¯ä¸ªç³»åˆ—ä¸­æ¨¡å‹å…·æœ‰ä¸åŒçš„åŠŸèƒ½ã€‚ æ¨¡å‹ç³»åˆ—åˆ†ä¸ºä¸‰ä¸ªä¸»è¦ç³»åˆ—ï¼š</p><ul><li><strong>ç”Ÿæˆå¼é¢„è®­ç»ƒè½¬æ¢å™¨ (GPT)</strong> - èƒ½å¤Ÿç†è§£å’Œç”Ÿæˆè‡ªç„¶è¯­è¨€å’ŒæŸäº›ä»£ç çš„æ¨¡å‹ã€‚ è¿™äº›æ¨¡å‹æœ€é€‚åˆå¸¸è§„ä»»åŠ¡ã€å¯¹è¯å’ŒèŠå¤©æ ¼å¼ã€‚</li><li><strong>ä»£ç </strong>ï¼ˆ<code>gpt-3</code> åŠæ›´æ—©ç‰ˆæœ¬ï¼‰ - ä»£ç æ¨¡å‹åŸºäº GPT æ¨¡å‹æ„å»ºï¼Œå¹¶é€šè¿‡æ•°ç™¾ä¸‡è¡Œä»£ç è¿›è¡Œè®­ç»ƒã€‚ è¿™äº›æ¨¡å‹å¯ä»¥ç†è§£å’Œç”Ÿæˆä»£ç ï¼ŒåŒ…æ‹¬è§£é‡Šæ³¨é‡Šæˆ–è‡ªç„¶è¯­è¨€ä»¥ç”Ÿæˆä»£ç ã€‚ <code>gpt-35-turbo</code> å’Œæ›´é«˜ç‰ˆæœ¬çš„æ¨¡å‹åŒ…å«æ­¤ä»£ç åŠŸèƒ½ï¼Œè€Œæ— éœ€å•ç‹¬çš„ä»£ç æ¨¡å‹ã€‚</li><li>åµŒå…¥ - è¿™äº›æ¨¡å‹å¯ä»¥ç†è§£å’Œä½¿ç”¨åµŒå…¥ï¼Œè¿™æ˜¯æœºå™¨å­¦ä¹ æ¨¡å‹å’Œç®—æ³•å¯ä»¥ä½¿ç”¨çš„ç‰¹æ®Šæ•°æ®æ ¼å¼ã€‚</li></ul><p>æœ¬æ¨¡å—é‡ç‚¹ä»‹ç»å¸¸è§„ GPT æ¨¡å‹ï¼Œå…¶ä»–æ¨¡å—å°†ä»‹ç»å…¶ä»–æ¨¡å‹ã€‚</p><p>å¯¹äºè¾ƒæ—§çš„æ¨¡å‹ï¼Œæ¨¡å‹ç³»åˆ—å’ŒåŠŸèƒ½ä¼šåœ¨åŸºç¡€æ¨¡å‹çš„åç§°ä¸­æœ‰æ‰€ä½“ç°ï¼šå¦‚ <code>text-davinci-003</code>ï¼Œè¯¥åç§°æŒ‡å®šå®ƒæ˜¯ä¸€ä¸ªæ–‡æœ¬æ¨¡å‹ï¼Œå…·æœ‰ <code>davinci</code> çº§åˆ«çš„åŠŸèƒ½ï¼Œå¹¶å¸¦æœ‰æ ‡è¯†ç¬¦ <code>3</code>ã€‚ æœ‰å…³æ¨¡å‹ã€åŠŸèƒ½çº§åˆ«å’Œå‘½åçº¦å®šçš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… <a href="https://learn.microsoft.com/zh-cn/azure/ai-services/openai/concepts/models?azure-portal=true">Azure OpenAI æ¨¡å‹æ–‡æ¡£</a>é¡µã€‚</p><p>è¾ƒæ–°çš„æ¨¡å‹ä¼šæŒ‡å®šç¬¬å‡ ä»£ <code>gpt</code>ï¼Œä»¥åŠå®ƒä»¬æ˜¯å¦ä¸º <code>turbo</code> ç‰ˆæœ¬ï¼Œä¾‹å¦‚ <code>gpt-35-turbo</code> è¡¨ç¤º GPT 3.5 Turbo æ¨¡å‹ã€‚</p><p>è‹¥è¦éƒ¨ç½²æ¨¡å‹ä¾›ä½ ä½¿ç”¨ï¼Œè¯·å¯¼èˆªåˆ° <a href="https://oai.azure.com/?azure-portal=true">Azure OpenAI Studio</a> å¹¶è½¬åˆ°â€œéƒ¨ç½²â€é¡µã€‚ æœ¬æ¨¡å—åé¢çš„å®éªŒå®¤è¯¦ç»†ä»‹ç»äº†å¦‚ä½•æ‰§è¡Œæ­¤æ“ä½œã€‚</p><h2 id="å·²éƒ¨ç½²æ¨¡å‹çš„èº«ä»½éªŒè¯å’Œè§„èŒƒ"><a href="#å·²éƒ¨ç½²æ¨¡å‹çš„èº«ä»½éªŒè¯å’Œè§„èŒƒ" class="headerlink" title="å·²éƒ¨ç½²æ¨¡å‹çš„èº«ä»½éªŒè¯å’Œè§„èŒƒ"></a>å·²éƒ¨ç½²æ¨¡å‹çš„èº«ä»½éªŒè¯å’Œè§„èŒƒ</h2><p>åœ¨ Azure OpenAI ä¸­éƒ¨ç½²æ¨¡å‹æ—¶ï¼Œé€‰æ‹©ä¸€ä¸ªéƒ¨ç½²åç§°æ¥æŒ‡å®šå®ƒã€‚ é…ç½®åº”ç”¨æ—¶ï¼Œéœ€è¦æŒ‡å®šèµ„æºç»ˆç»“ç‚¹ã€å¯†é’¥å’Œéƒ¨ç½²åç§°ï¼Œä»¥æŒ‡å®šè¦å‘å…¶å‘é€è¯·æ±‚çš„éƒ¨ç½²æ¨¡å‹ã€‚ è¿™ä½¿ä½ èƒ½å¤Ÿåœ¨åŒä¸€èµ„æºä¸­éƒ¨ç½²å„ç§æ¨¡å‹ï¼Œå¹¶æ ¹æ®ä»»åŠ¡å‘ç›¸åº”çš„æ¨¡å‹å‘å‡ºè¯·æ±‚ã€‚</p><h2 id="æç¤ºè®¾è®¡"><a href="#æç¤ºè®¾è®¡" class="headerlink" title="æç¤ºè®¾è®¡"></a>æç¤ºè®¾è®¡</h2><p>è¾“å…¥æç¤ºçš„å†™å…¥æ–¹å¼åœ¨ AI æ¨¡å‹çš„å“åº”æ–¹å¼ä¸­èµ·ç€å¾ˆå¤§çš„ä½œç”¨ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœå‡ºç°ç®€å•è¯·æ±‚ï¼ˆå¦‚â€œä»€ä¹ˆæ˜¯ Azure OpenAIâ€ï¼‰çš„æç¤ºï¼Œé€šå¸¸ä¼šè·å¾—ç±»ä¼¼äºä½¿ç”¨æœç´¢å¼•æ“çš„é€šç”¨ç­”æ¡ˆã€‚</p><p>ä½†æ˜¯ï¼Œå¦‚æœåœ¨ä½ çš„ç­”å¤ä¸­æä¾›æœ‰å…³æ‰€éœ€å†…å®¹çš„è¯¦ç»†ä¿¡æ¯ï¼Œåˆ™ä¼šè·å¾—æ›´å…·ä½“çš„ç­”æ¡ˆã€‚ ä¾‹å¦‚ï¼Œå‡å®šå‡ºç°ä»¥ä¸‹æç¤ºï¼š</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Classify the following news headline into 1 of the following categories: Business, Tech, Politics, Sport, Entertainment</span><br><span class="line"></span><br><span class="line">Headline 1: Donna Steffensen Is Cooking Up a New Kind of Perfection. The Internetâ€™s most beloved cooking guru has a buzzy new book and a fresh new perspective</span><br><span class="line">Category: Entertainment</span><br><span class="line"></span><br><span class="line">Headline 2: Major Retailer Announces Plans to Close Over 100 Stores</span><br><span class="line">Category:</span><br></pre></td></tr></table></figure><p>ä½ å¯èƒ½ä¼šåœ¨æ ‡é¢˜ä¸‹çœ‹åˆ°â€œç±»åˆ«:â€ï¼Œå…¶ä¸­å¡«å†™äº†â€œä¸šåŠ¡â€ã€‚</p><p>å¯ä»¥åœ¨ Azure OpenAI Studio Playground ä¸­çš„â€œç¤ºä¾‹â€ä¸‹æ‹‰åˆ—è¡¨ä¸­æ‰¾åˆ°ä¸æ­¤ç±»ä¼¼çš„å‡ ä¸ªç¤ºä¾‹ã€‚ å°½å¯èƒ½è¯¦ç»†æè¿°æ¥è‡ªæ¨¡å‹çš„å“åº”ä¸­æ‰€éœ€çš„å†…å®¹ï¼Œä½ å¯èƒ½ä¼šæƒŠè®¶äºå®ƒæ˜¯å¤šä¹ˆæœ‰è§åœ°ï¼</p><p>æ³¨æ„</p><p>æ— æ³•å¤§èƒ†åœ°å‡è®¾æ¥è‡ª AI æ¨¡å‹çš„ç­”æ¡ˆæ˜¯äº‹å®æˆ–æ­£ç¡®ã€‚ è´Ÿè´£å¼€å‘å’Œéƒ¨ç½² AI ç³»ç»Ÿçš„å›¢é˜Ÿæˆ–ä¸ªäººåº”åŠªåŠ›è¯†åˆ«ã€è¡¡é‡å’Œå‡è½»å±å®³ã€‚ ä½ æœ‰è´£ä»»éªŒè¯æ¥è‡ª AI æ¨¡å‹çš„ä»»ä½•å“åº”ï¼Œå¹¶è´Ÿè´£ä»»åœ°ä½¿ç”¨ AIã€‚ æœ‰å…³å¦‚ä½•è´Ÿè´£ä»»åœ°ä½¿ç”¨ Azure OpenAI æ¨¡å‹çš„è¿›ä¸€æ­¥æŒ‡å—ï¼Œè¯·æŸ¥çœ‹ <a href="https://learn.microsoft.com/zh-cn/legal/cognitive-services/openai/transparency-note?azure-portal=true">Microsoft å…³äº Azure OpenAI çš„é€æ˜åº¦è¯´æ˜</a>ã€‚</p><p>å¯åœ¨<a href="https://learn.microsoft.com/zh-cn/azure/cognitive-services/openai/concepts/prompt-engineering?azure-portal=true">æç¤ºå·¥ç¨‹</a>æ–‡æ¡£é¡µä¸­æ‰¾åˆ°æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚</p><h2 id="å¯ç”¨çš„ç»ˆç»“ç‚¹"><a href="#å¯ç”¨çš„ç»ˆç»“ç‚¹" class="headerlink" title="å¯ç”¨çš„ç»ˆç»“ç‚¹"></a>å¯ç”¨çš„ç»ˆç»“ç‚¹</h2><p>å¯ä»¥é€šè¿‡ REST API æˆ–å½“å‰å¯ç”¨äº Python å’Œ C# çš„ SDK è®¿é—® Azure OpenAIã€‚ å¯ç”¨äºä¸å·²éƒ¨ç½²æ¨¡å‹äº¤äº’çš„ç»ˆç»“ç‚¹çš„ä½¿ç”¨æ–¹å¼ä¸åŒï¼Œå¹¶ä¸”æŸäº›ç»ˆç»“ç‚¹åªèƒ½ä½¿ç”¨æŸäº›æ¨¡å‹ã€‚ å¯ç”¨çš„ç»ˆç»“ç‚¹åŒ…æ‹¬ï¼š</p><ul><li><strong>å®Œæˆ</strong> - æ¨¡å‹æ¥å—ä¸€ä¸ªè¾“å…¥æç¤ºï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ªé¢„æµ‹çš„å®Œæˆã€‚ ä½ å°†åœ¨ studio ä¸­çœ‹åˆ°æ­¤æ“åœºï¼Œä½†åœ¨æœ¬æ¨¡å—ä¸­ä¸ä¼šæ·±å…¥è®¨è®ºã€‚</li><li><strong>ChatCompletion</strong> - æ¨¡å‹æ¥å—èŠå¤©å¯¹è¯å½¢å¼çš„è¾“å…¥ï¼ˆå…¶ä¸­è§’è‰²ä½¿ç”¨ä»–ä»¬å‘é€çš„æ¶ˆæ¯æŒ‡å®šï¼‰ï¼Œç„¶åç”Ÿæˆä¸‹ä¸€ä¸ªèŠå¤©å®Œæˆã€‚</li><li><strong>åµŒå…¥</strong> - æ¨¡å‹æ¥å—è¾“å…¥å¹¶è¿”å›è¯¥è¾“å…¥çš„çŸ¢é‡è¡¨ç¤ºå½¢å¼ã€‚</li></ul><p>ä¾‹å¦‚ï¼Œ<code>ChatCompletion</code> çš„è¾“å…¥æ˜¯æ¯æ¡æ¶ˆæ¯éƒ½æœ‰æ˜ç¡®å®šä¹‰è§’è‰²çš„ä¼šè¯ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant, teaching people about AI.&quot;&#125;,</span><br><span class="line">&#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Does Azure OpenAI support multiple languages?&quot;&#125;,</span><br><span class="line">&#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;Yes, Azure OpenAI supports several languages, and can translate between them.&quot;&#125;,</span><br><span class="line">&#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Do other Azure AI Services support translation too?&quot;&#125;</span><br></pre></td></tr></table></figure><p>å½“ä½ ä¸º AI æ¨¡å‹æä¾›ä¸€ä¸ªçœŸå®çš„å¯¹è¯æ—¶ï¼Œå®ƒå¯ä»¥ç”Ÿæˆå…·æœ‰æ›´å‡†ç¡®çš„è¯­æ°”ã€æªè¾å’Œä¸Šä¸‹æ–‡çš„æ›´å¥½å“åº”ã€‚ <code>ChatCompletion</code> ç»ˆç»“ç‚¹é€šè¿‡å‘é€ä¸ä¸‹ä¸€ä¸ªç”¨æˆ·æ¶ˆæ¯çš„èŠå¤©å†å²è®°å½•ï¼Œä½¿ ChatGPT æ¨¡å‹èƒ½å¤Ÿè¿›è¡Œæ›´çœŸå®çš„å¯¹è¯ã€‚</p><p><code>ChatCompletion</code> è¿˜æ”¯æŒéèŠå¤©åœºæ™¯ï¼Œä¾‹å¦‚æ‘˜è¦æˆ–å®ä½“æå–ã€‚ å¯é€šè¿‡æä¾›ç®€çŸ­å¯¹è¯ã€æŒ‡å®šç³»ç»Ÿä¿¡æ¯å’Œæ‰€éœ€å†…å®¹ï¼Œå¹¶è®©ç”¨æˆ·è¾“å…¥ä¿¡æ¯æ¥å®ç°æ­¤æ“ä½œã€‚ ä¾‹å¦‚ï¼Œå¦‚æœè¦ç”Ÿæˆå·¥ä½œæè¿°ï¼Œè¯·å‘ <code>ChatCompletion</code> æä¾›ç±»ä¼¼äºä»¥ä¸‹å¯¹è¯è¾“å…¥çš„å†…å®¹ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are an assistant designed to write intriguing job descriptions. &quot;&#125;,</span><br><span class="line">&#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Write a job description for the following job title: &#x27;Business Intelligence Analyst&#x27;. It should include responsibilities, required qualifications, and highlight benefits like time off and flexible hours.&quot;&#125;</span><br></pre></td></tr></table></figure><p>æ³¨æ„</p><p><code>Completion</code> é€‚ç”¨äºæ‰€æœ‰ <code>gpt-3</code> ç”Ÿæˆæ¨¡å‹ï¼Œè€Œ <code>ChatCompletion</code> æ˜¯ <code>gpt-4</code> æ¨¡å‹å”¯ä¸€æ”¯æŒçš„é€‰é¡¹ï¼Œå¹¶ä¸”æ˜¯ä½¿ç”¨ <code>gpt-35-turbo</code> æ¨¡å‹æ—¶çš„é¦–é€‰ç»ˆç»“ç‚¹ã€‚ æœ¬æ¨¡å—ä¸­çš„å®éªŒå°† <code>gpt-35-turbo</code> ä¸ <code>ChatCompletion</code> ç»ˆç»“ç‚¹ç»“åˆä½¿ç”¨ã€‚</p><h2 id="ä½¿ç”¨-Azure-OpenAI-REST-API"><a href="#ä½¿ç”¨-Azure-OpenAI-REST-API" class="headerlink" title="ä½¿ç”¨ Azure OpenAI REST API"></a>ä½¿ç”¨ Azure OpenAI REST API</h2><p>Azure OpenAI æä¾›äº†ä¸€ä¸ª REST API ç”¨äºäº¤äº’å’Œç”Ÿæˆå“åº”ï¼Œå¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨å®ƒå°† AI åŠŸèƒ½æ·»åŠ åˆ°å…¶åº”ç”¨ç¨‹åºã€‚ æœ¬å•å…ƒä»‹ç» API çš„ç¤ºä¾‹ç”¨æ³•ã€è¾“å…¥å’Œè¾“å‡ºã€‚</p><p>æ³¨æ„</p><p>åœ¨ä¸ API äº¤äº’ä¹‹å‰ï¼Œå¿…é¡»åœ¨ Azure é—¨æˆ·ä¸­åˆ›å»º Azure OpenAI èµ„æºï¼Œåœ¨è¯¥èµ„æºä¸­éƒ¨ç½²æ¨¡å‹ï¼Œå¹¶æ£€ç´¢ç»ˆç»“ç‚¹å’Œå¯†é’¥ã€‚ è¯·æŸ¥çœ‹ <a href="https://learn.microsoft.com/zh-cn/training/modules/get-started-openai/">Azure OpenAI æœåŠ¡å…¥é—¨</a>ï¼Œäº†è§£å¦‚ä½•æ‰§è¡Œæ­¤æ“ä½œã€‚</p><p>æ¯æ¬¡è°ƒç”¨ REST API æ—¶ï¼Œéƒ½éœ€è¦ Azure OpenAI èµ„æºçš„ç»ˆç»“ç‚¹å’Œå¯†é’¥ï¼Œä»¥åŠä¸ºéƒ¨ç½²çš„æ¨¡å‹æä¾›çš„åç§°ã€‚ åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œä½¿ç”¨ä»¥ä¸‹å ä½ç¬¦ï¼š</p><table><thead><tr><th>å ä½ç¬¦åç§°</th><th>å€¼</th></tr></thead><tbody><tr><td><code>YOUR_ENDPOINT_NAME</code></td><td>æ­¤åŸºæœ¬ç»ˆç»“ç‚¹ä½äº Azure é—¨æˆ·çš„â€œå¯†é’¥å’Œç»ˆç»“ç‚¹â€éƒ¨åˆ†ã€‚ å®ƒæ˜¯èµ„æºçš„åŸºæœ¬ç»ˆç»“ç‚¹ï¼Œä¾‹å¦‚ <code>https://sample.openai.azure.com/</code>ã€‚</td></tr><tr><td><code>YOUR_API_KEY</code></td><td>å¯†é’¥ä½äº Azure é—¨æˆ·çš„â€œå¯†é’¥å’Œç»ˆç»“ç‚¹â€éƒ¨åˆ†ã€‚ å¯ä»¥åœ¨èµ„æºä¸­ä½¿ç”¨ä»»ä¸€å¯†é’¥ã€‚</td></tr><tr><td><code>YOUR_DEPLOYMENT_NAME</code></td><td>æ­¤éƒ¨ç½²åç§°æ˜¯åœ¨ Azure OpenAI Studio ä¸­éƒ¨ç½²æ¨¡å‹æ—¶æä¾›çš„åç§°ã€‚</td></tr></tbody></table><h2 id="èŠå¤©å®Œæˆ"><a href="#èŠå¤©å®Œæˆ" class="headerlink" title="èŠå¤©å®Œæˆ"></a>èŠå¤©å®Œæˆ</h2><p>åœ¨ Azure OpenAI èµ„æºä¸­éƒ¨ç½²æ¨¡å‹åï¼Œå¯ä»¥ä½¿ç”¨ <code>POST</code> è¯·æ±‚å‘æœåŠ¡å‘é€æç¤ºã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">curl https://YOUR_ENDPOINT_NAME.openai.azure.com/openai/deployments/YOUR_DEPLOYMENT_NAME/chat/completions?api-version=2023-03-15-preview \</span><br><span class="line">  -H &quot;Content-Type: application/json&quot; \</span><br><span class="line">  -H &quot;api-key: YOUR_API_KEY&quot; \</span><br><span class="line">  -d &#x27;&#123;&quot;messages&quot;:[&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant, teaching people about AI.&quot;&#125;,</span><br><span class="line">&#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Does Azure OpenAI support multiple languages?&quot;&#125;,</span><br><span class="line">&#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;Yes, Azure OpenAI supports several languages, and can translate between them.&quot;&#125;,</span><br><span class="line">&#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Do other Azure AI Services support translation too?&quot;&#125;]&#125;&#x27;</span><br></pre></td></tr></table></figure><p>æ¥è‡ª API çš„å“åº”å°†ç±»ä¼¼äºä»¥ä¸‹ JSONï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;id&quot;: &quot;chatcmpl-6v7mkQj980V1yBec6ETrKPRqFjNw9&quot;,</span><br><span class="line">    &quot;object&quot;: &quot;chat.completion&quot;,</span><br><span class="line">    &quot;created&quot;: 1679001781,</span><br><span class="line">    &quot;model&quot;: &quot;gpt-35-turbo&quot;,</span><br><span class="line">    &quot;usage&quot;: &#123;</span><br><span class="line">        &quot;prompt_tokens&quot;: 95,</span><br><span class="line">        &quot;completion_tokens&quot;: 84,</span><br><span class="line">        &quot;total_tokens&quot;: 179</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;choices&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;message&quot;:</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;role&quot;: &quot;assistant&quot;,</span><br><span class="line">                    &quot;content&quot;: &quot;Yes, other Azure AI Services also support translation. Azure AI Services offer translation between multiple languages for text, documents, or custom translation through Azure AI Services Translator.&quot;</span><br><span class="line">                &#125;,</span><br><span class="line">            &quot;finish_reason&quot;: &quot;stop&quot;,</span><br><span class="line">            &quot;index&quot;: 0</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>REST ç»ˆç»“ç‚¹å…è®¸æŒ‡å®šå…¶ä»–å¯é€‰è¾“å…¥å‚æ•°ï¼Œå¦‚ <code>temperature</code> å’Œ <code>max_tokens</code> ç­‰ã€‚ å¦‚æœè¦åœ¨è¯·æ±‚ä¸­åŒ…å«ä»»ä½•è¿™äº›å‚æ•°ï¼Œè¯·æ ¹æ®è¯·æ±‚å°†å®ƒä»¬æ·»åŠ åˆ°è¾“å…¥æ•°æ®ä¸­ã€‚</p><h2 id="åµŒå…¥"><a href="#åµŒå…¥" class="headerlink" title="åµŒå…¥"></a>åµŒå…¥</h2><p>åµŒå…¥å¯¹æœºå™¨å­¦ä¹ æ¨¡å‹è½»æ¾ä½¿ç”¨çš„ç‰¹å®šæ ¼å¼å¾ˆæœ‰å¸®åŠ©ã€‚ è‹¥è¦ä»è¾“å…¥æ–‡æœ¬ç”ŸæˆåµŒå…¥ï¼Œè¯·å‘ <code>embeddings</code> ç»ˆç»“ç‚¹å‘å‡º <code>POST</code> è¯·æ±‚ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl https://YOUR_ENDPOINT_NAME.openai.azure.com/openai/deployments/YOUR_DEPLOYMENT_NAME/embeddings?api-version=2022-12-01 \</span><br><span class="line">  -H &quot;Content-Type: application/json&quot; \</span><br><span class="line">  -H &quot;api-key: YOUR_API_KEY&quot; \</span><br><span class="line">  -d &quot;&#123;\&quot;input\&quot;: \&quot;The food was delicious and the waiter...\&quot;&#125;&quot;</span><br></pre></td></tr></table></figure><p>ç”ŸæˆåµŒå…¥æ—¶ï¼Œè¯·ç¡®ä¿åœ¨ Azure OpenAI ä¸­ä½¿ç”¨ç”¨äºåµŒå…¥çš„æ¨¡å‹ã€‚ è¿™äº›æ¨¡å‹ä»¥ <code>text-embedding</code> æˆ– <code>text-similarity</code> å¼€å¤´ï¼Œå…·ä½“å–å†³äºä½ è¦æŸ¥æ‰¾çš„åŠŸèƒ½ã€‚</p><p>æ¥è‡ª API çš„å“åº”å°†ç±»ä¼¼äºä»¥ä¸‹ JSONï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;object&quot;: &quot;list&quot;,</span><br><span class="line">  &quot;data&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;object&quot;: &quot;embedding&quot;,</span><br><span class="line">      &quot;embedding&quot;: [</span><br><span class="line">        0.0172990688066482523,</span><br><span class="line">        -0.0291879814639389515,</span><br><span class="line">        ....</span><br><span class="line">        0.0134544348834753042,</span><br><span class="line">      ],</span><br><span class="line">      &quot;index&quot;: 0</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  &quot;model&quot;: &quot;text-embedding-ada:002&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨-Azure-OpenAI-SDK"><a href="#ä½¿ç”¨-Azure-OpenAI-SDK" class="headerlink" title="ä½¿ç”¨ Azure OpenAI SDK"></a>ä½¿ç”¨ Azure OpenAI SDK</h2><p>é™¤äº†ä¸Šä¸€å•å…ƒä¸­ä»‹ç»çš„ REST API å¤–ï¼Œç”¨æˆ·è¿˜å¯ä»¥é€šè¿‡ C# å’Œ Python SDK è®¿é—® Azure OpenAI æ¨¡å‹ã€‚ é€šè¿‡ REST å’Œè¿™äº› SDK æä¾›ç›¸åŒçš„åŠŸèƒ½ã€‚</p><p>æ³¨æ„</p><p>åœ¨ä½¿ç”¨ä»»ä¸€ SDK ä¸ API äº¤äº’ä¹‹å‰ï¼Œå¿…é¡»åœ¨ Azure é—¨æˆ·ä¸­åˆ›å»º Azure OpenAI èµ„æºï¼Œåœ¨è¯¥èµ„æºä¸­éƒ¨ç½²æ¨¡å‹ï¼Œå¹¶æ£€ç´¢ç»ˆç»“ç‚¹å’Œå¯†é’¥ã€‚ è¯·æŸ¥çœ‹ <a href="https://learn.microsoft.com/zh-cn/training/modules/get-started-openai/">Azure OpenAI æœåŠ¡å…¥é—¨</a>ï¼Œäº†è§£å¦‚ä½•æ‰§è¡Œæ­¤æ“ä½œã€‚</p><p>å¯¹äºæœ¬å•å…ƒä¸­ä»‹ç»çš„ SDKï¼Œéœ€è¦ Azure OpenAI èµ„æºçš„ç»ˆç»“ç‚¹å’Œå¯†é’¥ï¼Œä»¥åŠä¸ºéƒ¨ç½²çš„æ¨¡å‹æä¾›çš„åç§°ã€‚ åœ¨ä»¥ä¸‹ä»£ç ç‰‡æ®µä¸­ï¼Œä½¿ç”¨ä»¥ä¸‹å ä½ç¬¦ï¼š</p><table><thead><tr><th>å ä½ç¬¦åç§°</th><th>å€¼</th></tr></thead><tbody><tr><td><code>YOUR_ENDPOINT_NAME</code></td><td>æ­¤åŸºæœ¬ç»ˆç»“ç‚¹ä½äº Azure é—¨æˆ·çš„â€œå¯†é’¥å’Œç»ˆç»“ç‚¹â€éƒ¨åˆ†ã€‚ å®ƒæ˜¯èµ„æºçš„åŸºæœ¬ç»ˆç»“ç‚¹ï¼Œä¾‹å¦‚ <code>https://sample.openai.azure.com/</code>ã€‚</td></tr><tr><td><code>YOUR_API_KEY</code></td><td>å¯†é’¥ä½äº Azure é—¨æˆ·çš„â€œå¯†é’¥å’Œç»ˆç»“ç‚¹â€éƒ¨åˆ†ã€‚ å¯ä»¥åœ¨èµ„æºä¸­ä½¿ç”¨ä»»ä¸€å¯†é’¥ã€‚</td></tr><tr><td><code>YOUR_DEPLOYMENT_NAME</code></td><td>æ­¤éƒ¨ç½²åç§°æ˜¯åœ¨ Azure OpenAI Studio ä¸­éƒ¨ç½²æ¨¡å‹æ—¶æä¾›çš„åç§°ã€‚</td></tr></tbody></table><h2 id="å®‰è£…åº“"><a href="#å®‰è£…åº“" class="headerlink" title="å®‰è£…åº“"></a>å®‰è£…åº“</h2><p>é¦–å…ˆï¼Œå®‰è£…é¦–é€‰è¯­è¨€çš„å®¢æˆ·ç«¯åº“ã€‚ C# SDK æ˜¯ REST API çš„ .NET é€‚åº”ï¼Œä¸“ä¸º Azure OpenAI è€Œæ„å»ºï¼Œä½†å®ƒå¯ç”¨äºè¿æ¥åˆ° Azure OpenAI èµ„æºæˆ–é Azure OpenAI ç»ˆç»“ç‚¹ã€‚ Python SDK ç”± OpenAI ç”Ÿæˆå’Œç»´æŠ¤ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dotnet add package Azure.AI.OpenAI --prerelease</span><br></pre></td></tr></table></figure><h2 id="é…ç½®åº”ç”¨ä»¥è®¿é—®-Azure-OpenAI-èµ„æº"><a href="#é…ç½®åº”ç”¨ä»¥è®¿é—®-Azure-OpenAI-èµ„æº" class="headerlink" title="é…ç½®åº”ç”¨ä»¥è®¿é—® Azure OpenAI èµ„æº"></a>é…ç½®åº”ç”¨ä»¥è®¿é—® Azure OpenAI èµ„æº</h2><p>æ¯ç§è¯­è¨€çš„é…ç½®ç•¥æœ‰ä¸åŒï¼Œä½†ä¸¤ç§è¯­è¨€éƒ½éœ€è¦è®¾ç½®ç›¸åŒçš„å‚æ•°ã€‚ å¿…éœ€çš„å‚æ•°æ˜¯ <code>endpoint</code>ã€<code>key</code> å’Œéƒ¨ç½²çš„åç§°ï¼Œå½“å‘æ¨¡å‹å‘é€æç¤ºæ—¶ï¼Œéƒ¨ç½²çš„åç§°è¢«ç§°ä¸º <code>engine</code>ã€‚</p><p>å°†åº“æ·»åŠ åˆ°åº”ç”¨ï¼Œå¹¶ä¸ºå®¢æˆ·ç«¯è®¾ç½®æ‰€éœ€çš„å‚æ•°ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// Add OpenAI library</span><br><span class="line">using Azure.AI.OpenAI;</span><br><span class="line"></span><br><span class="line">// Define parameters and initialize the client</span><br><span class="line">string endpoint = &quot;&lt;YOUR_ENDPOINT_NAME&gt;&quot;;</span><br><span class="line">string key = &quot;&lt;YOUR_API_KEY&gt;&quot;;</span><br><span class="line">string deploymentName = &quot;&lt;YOUR_DEPLOYMENT_NAME&gt;&quot;; </span><br><span class="line"></span><br><span class="line">OpenAIClient client = new OpenAIClient(new Uri(endpoint), new AzureKeyCredential(key));</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Add OpenAI library</span></span><br><span class="line"><span class="keyword">from</span> openai <span class="keyword">import</span> AzureOpenAI</span><br><span class="line"></span><br><span class="line">deployment_name = <span class="string">&#x27;&lt;YOUR_DEPLOYMENT_NAME&gt;&#x27;</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># Initialize the Azure OpenAI client</span></span><br><span class="line">client = AzureOpenAI(</span><br><span class="line">        azure_endpoint = <span class="string">&#x27;&lt;YOUR_ENDPOINT_NAME&gt;&#x27;</span>, </span><br><span class="line">        api_key=<span class="string">&#x27;&lt;YOUR_API_KEY&gt;&#x27;</span>,  </span><br><span class="line">        api_version=<span class="string">&quot;20xx-xx-xx&quot;</span> <span class="comment">#  Target version of the API, such as 2024-02-15-preview</span></span><br><span class="line">        )</span><br></pre></td></tr></table></figure><h2 id="è°ƒç”¨-Azure-OpenAI-èµ„æº"><a href="#è°ƒç”¨-Azure-OpenAI-èµ„æº" class="headerlink" title="è°ƒç”¨ Azure OpenAI èµ„æº"></a>è°ƒç”¨ Azure OpenAI èµ„æº</h2><p>é…ç½®ä¸ Azure OpenAI çš„è¿æ¥åï¼Œå°†æç¤ºå‘é€ç»™æ¨¡å‹ã€‚</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// Build completion options object</span><br><span class="line">ChatCompletionsOptions chatCompletionsOptions = new ChatCompletionsOptions()</span><br><span class="line">&#123;</span><br><span class="line">    Messages =</span><br><span class="line">    &#123;</span><br><span class="line">        new ChatRequestSystemMessage(&quot;You are a helpful AI bot.&quot;),</span><br><span class="line">        new ChatRequestUserMessage(&quot;What is Azure OpenAI?&quot;),</span><br><span class="line">    &#125;,</span><br><span class="line">    DeploymentName = deploymentName</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// Send request to Azure OpenAI model</span><br><span class="line">ChatCompletions response = client.GetChatCompletions(chatCompletionsOptions);</span><br><span class="line"></span><br><span class="line">// Print the response</span><br><span class="line">string completion = response.Choices[0].Message.Content;</span><br><span class="line">Console.WriteLine(&quot;Response: &quot; + completion + &quot;\n&quot;);</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">response = client.chat.completions.create(</span><br><span class="line">    model=deployment_name,</span><br><span class="line">    messages=[</span><br><span class="line">        &#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;system&quot;</span>, <span class="string">&quot;content&quot;</span>: <span class="string">&quot;You are a helpful assistant.&quot;</span>&#125;,</span><br><span class="line">        &#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>, <span class="string">&quot;content&quot;</span>: <span class="string">&quot;What is Azure OpenAI?&quot;</span>&#125;</span><br><span class="line">    ]</span><br><span class="line">)</span><br><span class="line">generated_text = response.choices[<span class="number">0</span>].message.content</span><br><span class="line"></span><br><span class="line"><span class="comment"># Print the response</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Response: &quot;</span> + generated_text + <span class="string">&quot;\n&quot;</span>)</span><br></pre></td></tr></table></figure><p>å“åº”å¯¹è±¡åŒ…å«å¤šä¸ªå€¼ï¼Œä¾‹å¦‚ <code>total_tokens</code> å’Œ <code>finish_reason</code>ã€‚ å“åº”å¯¹è±¡çš„å®Œæˆç±»ä¼¼äºä»¥ä¸‹å®Œæˆï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;Azure OpenAI is a cloud-based artificial intelligence (AI) service that offers a range of tools and services for developing and deploying AI applications. Azure OpenAI provides a variety of services for training and deploying machine learning models, including a managed service for training and deploying deep learning models, a managed service for deploying machine learning models, and a managed service for managing and deploying machine learning models.&quot;</span><br></pre></td></tr></table></figure><p>åœ¨ C# å’Œ Python ä¸­ï¼Œè°ƒç”¨å¯ä»¥åŒ…å«å¯é€‰å‚æ•°ï¼Œå…¶ä¸­åŒ…æ‹¬ <code>temperature</code> å’Œ <code>max_tokens</code>ã€‚ æœ¬æ¨¡å—çš„å®éªŒå®¤ä¸­åŒ…å«äº†ä½¿ç”¨è¿™äº›å‚æ•°çš„ç¤ºä¾‹ã€‚</p><p>å‘ Azure OpenAI èµ„æºå‘å‡ºè¯·æ±‚éœ€è¦å“ªäº›èµ„æºå€¼ï¼Ÿ å¯†é’¥ã€ç»ˆç»“ç‚¹å’Œéƒ¨ç½²åç§°<br>å“ªä¸‰ä¸ªç»ˆç»“ç‚¹å¯ç”¨äºä¸å·²éƒ¨ç½²çš„ Azure OpenAI æ¨¡å‹äº¤äº’ï¼Ÿ<br>Completionã€ChatCompletion å’Œ Embeddings<br>å“ªä¸€ä¸ªæ˜¯ Azure OpenAI ä¸­ä¸ºä¼šè¯çš„ä¸‹ä¸€ä¸ª Completion å»ºæ¨¡çš„æœ€ä½³å¯ç”¨ç»ˆç»“ç‚¹ï¼Ÿ<br>ChatCompletion</p><p>æ¥è‡ª</p><p><a href="https://learn.microsoft.com/zh-cn/collections/e6kjarx0q38?WT.mc_id=cloudskillschallenge_0bc0dea3-e83b-44f1-99a1-f91a1c041817">https://learn.microsoft.com/zh-cn/collections/e6kjarx0q38?WT.mc_id=cloudskillschallenge_0bc0dea3-e83b-44f1-99a1-f91a1c041817</a></p><!-- https://learn.microsoft.com/zh-cn/training/modules/get-started-openai/1-introduction -->]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> .NET </tag>
            
            <tag> Azure </tag>
            
            <tag> OpenAI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>golang base</title>
      <link href="/2024/06/04/golang-base/"/>
      <url>/2024/06/04/golang-base/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>HarmonyOS Tabs Component</title>
      <link href="/2024/06/01/HarmonyOS-Tabs-Component/"/>
      <url>/2024/06/01/HarmonyOS-Tabs-Component/</url>
      
        <content type="html"><![CDATA[<h1 id="ğŸ”®Tabs"><a href="#ğŸ”®Tabs" class="headerlink" title="ğŸ”®Tabs"></a>ğŸ”®Tabs</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Tabs</span>()&#123;</span><br><span class="line"><span class="title class_">TabContent</span>()&#123;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>example</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Tabs</span>(&#123;<span class="attr">barPosition</span>:<span class="title class_">BarPosition</span>.<span class="property">End</span>&#125;)&#123;</span><br><span class="line">    <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">ilist</span>,<span class="function">(<span class="params">item,index</span>)=&gt;</span>&#123;</span><br><span class="line">      <span class="title class_">TabContent</span>()&#123;</span><br><span class="line">        <span class="title class_">Column</span>( )&#123;</span><br><span class="line">          <span class="title class_">Text</span>(item.<span class="property">title</span>)</span><br><span class="line">            .<span class="title function_">fontSize</span>(<span class="string">&#x27;18fp&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#FFFFFF&#x27;</span>)</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">tabBar</span>(<span class="variable language_">this</span>.<span class="title function_">tabTile</span>(index,item.<span class="property">title</span>,item.<span class="property">url1</span>,item.<span class="property">url2</span>))</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line">   &#125;</span><br><span class="line">  .<span class="title function_">vertical</span>(<span class="literal">false</span>)</span><br><span class="line">  .<span class="title function_">scrollable</span>(<span class="literal">true</span>)<span class="comment">//huadong</span></span><br><span class="line">  .<span class="title function_">animationDuration</span>(<span class="number">400</span>)</span><br><span class="line">  .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">  .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#fffff1&#x27;</span>)</span><br><span class="line">  <span class="comment">//.height(&#x27;100vp&#x27;)</span></span><br><span class="line">  .<span class="title function_">onChange</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">     <span class="variable language_">this</span>.<span class="property">curIndex</span> = value;</span><br><span class="line">  &#125;)</span><br><span class="line">  </span><br></pre></td></tr></table></figure><h1 id="ğŸ®ï¸tab-data"><a href="#ğŸ®ï¸tab-data" class="headerlink" title="ğŸ®ï¸tab data"></a>ğŸ®ï¸tab data</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">interface  <span class="title class_">INav</span>&#123;</span><br><span class="line">  <span class="attr">title</span>:string;</span><br><span class="line">  <span class="attr">url1</span>:<span class="title class_">Resource</span>;</span><br><span class="line">  url2 :<span class="title class_">Resource</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">  @<span class="title class_">State</span> <span class="attr">ilist</span>:<span class="title class_">INav</span>[]=[&#123;</span><br><span class="line">    <span class="attr">title</span>:<span class="string">&#x27;index&#x27;</span>,</span><br><span class="line">    <span class="attr">url1</span>:$r(<span class="string">&#x27;app.media.icon&#x27;</span>),</span><br><span class="line">    <span class="attr">url2</span>:$r(<span class="string">&#x27;app.media.icon2&#x27;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>:<span class="string">&#x27;hot&#x27;</span>,</span><br><span class="line">      <span class="attr">url1</span>:$r(<span class="string">&#x27;app.media.icon&#x27;</span>),</span><br><span class="line">      <span class="attr">url2</span>:$r(<span class="string">&#x27;app.media.icon2&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">title</span>:<span class="string">&#x27;my&#x27;</span>,</span><br><span class="line">      <span class="attr">url1</span>:$r(<span class="string">&#x27;app.media.icon&#x27;</span>),</span><br><span class="line">      <span class="attr">url2</span>:$r(<span class="string">&#x27;app.media.icon2&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  ];</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>barPosition:BarPosition.End åº•éƒ¨</p><p>barPosition:BarPosition.Start é¡¶éƒ¨</p><h1 id="ğŸª…Component-swpier"><a href="#ğŸª…Component-swpier" class="headerlink" title="ğŸª…Component  swpier"></a>ğŸª…Component  swpier</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">@<span class="title class_">Component</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>  struct swiper1&#123;</span><br><span class="line"></span><br><span class="line">  public <span class="attr">ilist</span>:<span class="title class_">Array</span>&lt;<span class="title class_">Resource</span>&gt; =[</span><br><span class="line">    $r(<span class="string">&#x27;app.media.22222&#x27;</span>),</span><br><span class="line">    $r(<span class="string">&#x27;app.media.11111&#x27;</span>),</span><br><span class="line">    $r(<span class="string">&#x27;app.media.22222&#x27;</span>)</span><br><span class="line">  ]</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">    <span class="title class_">Column</span>()&#123;</span><br><span class="line">      <span class="title class_">Swiper</span>()&#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">ilist</span>,<span class="function">(<span class="params">item,index</span>)=&gt;</span>&#123;</span><br><span class="line">          <span class="title class_">Image</span>(item).<span class="title function_">width</span>(<span class="string">&#x27;98%&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;160vp&#x27;</span>)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">autoPlay</span>(<span class="literal">true</span>)</span><br><span class="line">      .<span class="title function_">interval</span>(<span class="number">3000</span>)</span><br><span class="line">      .<span class="title function_">duration</span>(<span class="number">400</span>)</span><br><span class="line">      .<span class="title function_">indicator</span>(<span class="literal">true</span>)</span><br><span class="line">      .<span class="title function_">itemSpace</span>(<span class="number">5</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>add imgâ€¦</p><p>index import</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">swipert</span>()</span><br><span class="line">   .<span class="title function_">height</span>(<span class="string">&#x27;80%&#x27;</span>)</span><br><span class="line">   .<span class="title function_">margin</span>(<span class="string">&#x27;10vp&#x27;</span>)</span><br></pre></td></tr></table></figure><h1 id="ğŸ°Component-nav-Grid"><a href="#ğŸ°Component-nav-Grid" class="headerlink" title="ğŸ°Component nav Grid"></a>ğŸ°Component nav Grid</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">interface inavit</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">title</span>:string,</span><br><span class="line">  <span class="attr">img</span>:<span class="title class_">Resource</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@<span class="title class_">Component</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>  struct homenav&#123;</span><br><span class="line"></span><br><span class="line">  public <span class="attr">ilist</span>:<span class="title class_">Array</span>&lt;inavit&gt; =[</span><br><span class="line">  &#123;<span class="attr">title</span>:<span class="string">&#x27;w&#x27;</span>,<span class="attr">img</span>: $r(<span class="string">&#x27;app.media.110&#x27;</span>)&#125;,</span><br><span class="line">&#123;<span class="attr">title</span>:<span class="string">&#x27;z&#x27;</span>,<span class="attr">img</span>: $r(<span class="string">&#x27;app.media.111&#x27;</span>)&#125;,</span><br><span class="line">&#123;<span class="attr">title</span>:<span class="string">&#x27;r&#x27;</span>,<span class="attr">img</span>: $r(<span class="string">&#x27;app.media.120&#x27;</span>)&#125;,</span><br><span class="line">&#123;<span class="attr">title</span>:<span class="string">&#x27;y&#x27;</span>,<span class="attr">img</span>: $r(<span class="string">&#x27;app.media.129&#x27;</span>)&#125;,</span><br><span class="line">&#123;<span class="attr">title</span>:<span class="string">&#x27;j&#x27;</span>,<span class="attr">img</span>: $r(<span class="string">&#x27;app.media.140&#x27;</span>)&#125;,</span><br><span class="line">&#123;<span class="attr">title</span>:<span class="string">&#x27;y&#x27;</span>,<span class="attr">img</span>: $r(<span class="string">&#x27;app.media.150&#x27;</span>)&#125;,</span><br><span class="line">&#123;<span class="attr">title</span>:<span class="string">&#x27;c&#x27;</span>,<span class="attr">img</span>:  $r(<span class="string">&#x27;app.media.163&#x27;</span>)&#125;,</span><br><span class="line"> &#123;<span class="attr">title</span>:<span class="string">&#x27;j&#x27;</span>,<span class="attr">img</span>: $r(<span class="string">&#x27;app.media.173&#x27;</span>)&#125;</span><br><span class="line">  ]</span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">    <span class="title class_">Column</span>()&#123;</span><br><span class="line">      <span class="title class_">Grid</span>()&#123;</span><br><span class="line"></span><br><span class="line">          <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">ilist</span>,<span class="function">(<span class="params">item:inavit,index:number</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="title class_">GridItem</span>()&#123;</span><br><span class="line">              <span class="title class_">Column</span>(&#123;<span class="attr">space</span>:<span class="number">5</span>&#125;)&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                <span class="title class_">Image</span>(item.<span class="property">img</span>).<span class="title function_">width</span>(<span class="string">&#x27;50vp&#x27;</span>).<span class="title function_">height</span>(<span class="string">&#x27;50vp&#x27;</span>)</span><br><span class="line">                <span class="title class_">Text</span>(item.<span class="property">title</span>).<span class="title function_">fontSize</span>(<span class="string">&#x27;18fp&#x27;</span>)</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">      .<span class="title function_">columnsTemplate</span>(<span class="string">&#x27;1fr 1fr 1fr 1fr&#x27;</span>)</span><br><span class="line">      .<span class="title function_">rowsGap</span>(<span class="string">&#x27;10&#x27;</span>)</span><br><span class="line">      .<span class="title function_">margin</span>(<span class="string">&#x27;10&#x27;</span>)</span><br><span class="line">      <span class="comment">//.backgroundColor()</span></span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>index import</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">homenav1</span>()</span><br><span class="line">  .<span class="title function_">height</span>(<span class="string">&#x27;60%&#x27;</span>)</span><br></pre></td></tr></table></figure><h1 id="ğŸ•¹ï¸Component-List"><a href="#ğŸ•¹ï¸Component-List" class="headerlink" title="ğŸ•¹ï¸Component List"></a>ğŸ•¹ï¸Component List</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">@<span class="title class_">Component</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>  struct homelist&#123;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>)&#123;</span><br><span class="line"></span><br><span class="line">    <span class="title class_">Column</span>()&#123;</span><br><span class="line">      <span class="title class_">List</span>()</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="title class_">ListItem</span>()&#123;</span><br><span class="line"></span><br><span class="line">          <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.666&#x27;</span>))</span><br><span class="line">            .<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">Cover</span>)</span><br><span class="line">            .<span class="title function_">aspectRatio</span>(<span class="number">2.7</span>)</span><br><span class="line">            .<span class="title function_">margin</span>(<span class="string">&#x27;10vp&#x27;</span>)</span><br><span class="line">         &#125;</span><br><span class="line">        <span class="title class_">ListItem</span>()&#123;</span><br><span class="line"></span><br><span class="line">          <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.777&#x27;</span>))</span><br><span class="line">            .<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">Cover</span>)</span><br><span class="line">            .<span class="title function_">aspectRatio</span>(<span class="number">2.7</span>)</span><br><span class="line">            .<span class="title function_">margin</span>(<span class="string">&#x27;10vp&#x27;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// Text(&#x27;hhhh&#x27;)</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Err<br>does not meet UI component syntax.<br>ç»„ä»¶å£°æ˜é”™è¯¯</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Azure OpenAI æœåŠ¡å¼€å‘ç”Ÿæˆå¼ AI è§£å†³æ–¹æ¡ˆ</title>
      <link href="/2024/06/01/Azure-AI/"/>
      <url>/2024/06/01/Azure-AI/</url>
      
        <content type="html"><![CDATA[<h1 id="å¼€å§‹ä½¿ç”¨-Azure-OpenAI-æœåŠ¡"><a href="#å¼€å§‹ä½¿ç”¨-Azure-OpenAI-æœåŠ¡" class="headerlink" title="å¼€å§‹ä½¿ç”¨ Azure OpenAI æœåŠ¡"></a>å¼€å§‹ä½¿ç”¨ Azure OpenAI æœåŠ¡</h1><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>å‡è®¾ä½ æƒ³è¦ç”Ÿæˆä¸€ä¸ªæ±‡æ€»æ–‡æœ¬å’Œå»ºè®®ä»£ç çš„æ”¯æŒåº”ç”¨ç¨‹åºã€‚ è‹¥è¦ç”Ÿæˆæ­¤åº”ç”¨ï¼Œéœ€è¦åˆ©ç”¨ ChatGPT ä¸­æ˜¾ç¤ºçš„åŠŸèƒ½ï¼ŒChatGPT æ˜¯ OpenAI ç ”ç©¶å…¬å¸æ„å»ºçš„èŠå¤©æœºå™¨äººï¼Œå®ƒæ¥å—ç”¨æˆ·çš„è‡ªç„¶è¯­è¨€è¾“å…¥ï¼Œå¹¶è¿”å›æœºå™¨åˆ›å»ºçš„ç±»äººå“åº”ã€‚</p><p>ç”Ÿæˆå¼ AI æ¨¡å‹æ”¯æŒ ChatGPT åŸºäºè‡ªç„¶è¯­è¨€æç¤ºç”Ÿæˆæ–°å†…å®¹ï¼ˆå¦‚æ–‡æœ¬ã€ä»£ç å’Œå›¾åƒï¼‰çš„èƒ½åŠ›ã€‚ è®¸å¤šç”Ÿæˆ AI æ¨¡å‹æ˜¯<a href="https://learn.microsoft.com/zh-cn/dotnet/machine-learning/deep-learning-overview?azure-portal=true">æ·±åº¦å­¦ä¹ ç®—æ³•</a>çš„å­é›†ã€‚ è¿™äº›ç®—æ³•æ”¯æŒè§†è§‰ã€è¯­éŸ³ã€è¯­è¨€ã€å†³ç­–ã€æœç´¢ç­‰å„ç§å·¥ä½œè´Ÿè½½ã€‚</p><p>Azure OpenAI æœåŠ¡å°†è¿™äº›ç”Ÿæˆå¼ AI æ¨¡å‹å¼•å…¥ Azure å¹³å°ï¼Œä½¿ä½ èƒ½å¤Ÿå¼€å‘åŠŸèƒ½å¼ºå¤§çš„ AI è§£å†³æ–¹æ¡ˆï¼Œè¿™äº›è§£å†³æ–¹æ¡ˆå—ç›Šäº Azure äº‘å¹³å°æä¾›çš„å…¶ä»–æœåŠ¡çš„å®‰å…¨æ€§ã€å¯ä¼¸ç¼©æ€§å’Œé›†æˆã€‚ è¿™äº›æ¨¡å‹å¯ç”¨äºé€šè¿‡ REST APIã€å„ç§ SDK å’Œ Studio æ¥å£ç”Ÿæˆåº”ç”¨ç¨‹åºã€‚ æœ¬æ¨¡å—å°†æŒ‡å¯¼ä½ å®Œæˆ Azure OpenAI Studio ä½“éªŒï¼Œä¸ºä½ ä½¿ç”¨ç”Ÿæˆå¼ AI è¿›ä¸€æ­¥å¼€å‘è§£å†³æ–¹æ¡ˆå¥ å®šäº†åŸºç¡€ã€‚</p><h2 id="è®¿é—®-Azure-OpenAI-æœåŠ¡"><a href="#è®¿é—®-Azure-OpenAI-æœåŠ¡" class="headerlink" title="è®¿é—® Azure OpenAI æœåŠ¡"></a>è®¿é—® Azure OpenAI æœåŠ¡</h2><p>ä½¿ç”¨ Azure OpenAI æ„å»ºç”Ÿæˆå‹ AI è§£å†³æ–¹æ¡ˆçš„ç¬¬ä¸€æ­¥æ˜¯åœ¨ Azure è®¢é˜…ä¸­é¢„é… Azure OpenAI èµ„æºã€‚ Azure OpenAI æœåŠ¡ç›®å‰å¤„äºå—é™è®¿é—®çŠ¶æ€ã€‚ ç”¨æˆ·éœ€è¦åœ¨ <a href="https://aka.ms/oai/access?azure-portal=true">https://aka.ms/oai/access</a> ä¸Šç”³è¯·æœåŠ¡è®¿é—®æƒé™ã€‚</p><p>æ³¨æ„</p><p>Azure OpenAI æœåŠ¡å·²å‘å¸ƒï¼Œä½†æ”¯æŒä»¥åˆä¹é“å¾·çš„æ–¹å¼ä½¿ç”¨è¯¥æœåŠ¡çš„è®¿é—®æƒé™æœ‰é™ã€‚ å¯ä»¥åœ¨<a href="https://learn.microsoft.com/zh-cn/legal/cognitive-services/openai/transparency-note?azure-portal=true">æ­¤å¤„</a>é˜…è¯» Azure OpenAI æœåŠ¡çš„ Microsoft é€æ˜åº¦è¯´æ˜ã€‚</p><p>æœ‰æƒè®¿é—® Azure OpenAI æœåŠ¡åï¼Œå¯ä»¥é€šè¿‡åœ¨ <a href="https://portal.azure.com/?azure-portal=true">Azure é—¨æˆ·</a>ä¸­åˆ›å»ºèµ„æºæˆ–ä½¿ç”¨ Azure å‘½ä»¤è¡Œæ¥å£ (CLI) å¼€å§‹ã€‚</p><h2 id="åœ¨-Azure-é—¨æˆ·ä¸­åˆ›å»º-Azure-OpenAI-æœåŠ¡èµ„æº"><a href="#åœ¨-Azure-é—¨æˆ·ä¸­åˆ›å»º-Azure-OpenAI-æœåŠ¡èµ„æº" class="headerlink" title="åœ¨ Azure é—¨æˆ·ä¸­åˆ›å»º Azure OpenAI æœåŠ¡èµ„æº"></a>åœ¨ Azure é—¨æˆ·ä¸­åˆ›å»º Azure OpenAI æœåŠ¡èµ„æº</h2><p>åˆ›å»º Azure OpenAI æœåŠ¡èµ„æºæ—¶ï¼Œéœ€è¦æä¾›è®¢é˜…åç§°ã€èµ„æºç»„åç§°ã€åŒºåŸŸã€å”¯ä¸€å®ä¾‹åç§°ï¼Œå¹¶é€‰æ‹©å®šä»·å±‚ã€‚ <img src="https://learn.microsoft.com/zh-cn/training/wwl-data-ai/get-started-openai/media/create-azure-openai-portal.png" alt="Screenshot of the Azure portal&#39;s page to create an Azure OpenAI Service resource."></p><h2 id="åœ¨-Azure-CLI-ä¸­åˆ›å»º-Azure-OpenAI-æœåŠ¡èµ„æº"><a href="#åœ¨-Azure-CLI-ä¸­åˆ›å»º-Azure-OpenAI-æœåŠ¡èµ„æº" class="headerlink" title="åœ¨ Azure CLI ä¸­åˆ›å»º Azure OpenAI æœåŠ¡èµ„æº"></a>åœ¨ Azure CLI ä¸­åˆ›å»º Azure OpenAI æœåŠ¡èµ„æº</h2><p>è‹¥è¦ä» CLI åˆ›å»º Azure OpenAI æœåŠ¡èµ„æºï¼Œè¯·å‚é˜…æ­¤ç¤ºä¾‹ï¼Œå¹¶å°†ä»¥ä¸‹å˜é‡æ›¿æ¢ä¸ºè‡ªå·±çš„å˜é‡ï¼š</p><ul><li>MyOpenAIResourceï¼šæ›¿æ¢ä¸ºèµ„æºçš„å”¯ä¸€åç§°</li><li>OAIResourceGroupï¼šæ›¿æ¢ä¸ºèµ„æºç»„åç§°</li><li>eastusï¼šæ›¿æ¢ä¸ºè¦éƒ¨ç½²èµ„æºçš„åŒºåŸŸ</li><li>subscriptionIDï¼šæ›¿æ¢ä¸ºè®¢é˜… ID</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">az cognitiveservices account create \</span><br><span class="line">-n MyOpenAIResource \</span><br><span class="line">-g OAIResourceGroup \</span><br><span class="line">-l eastus \</span><br><span class="line">--kind OpenAI \</span><br><span class="line">--sku s0 \</span><br><span class="line">--subscription subscriptionID</span><br></pre></td></tr></table></figure><p>æ³¨æ„</p><p>å¯ä»¥é€šè¿‡ CLI å‘½ä»¤ <code>az account list-locations</code> æŸ¥æ‰¾å¯ç”¨äºæœåŠ¡çš„åŒºåŸŸã€‚ è‹¥è¦äº†è§£å¦‚ä½•é€šè¿‡ CLI ç™»å½•åˆ° Azure å¹¶åˆ›å»º Azure ç»„ï¼Œè¯·å‚é˜…<a href="https://learn.microsoft.com/zh-cn/azure/cognitive-services/openai/how-to/create-resource?pivots=cli#sign-in-to-the-cli?azure-portal=true">æ­¤å¤„çš„æ–‡æ¡£</a>ã€‚</p><h3 id="åŒºåŸŸå¯ç”¨æ€§"><a href="#åŒºåŸŸå¯ç”¨æ€§" class="headerlink" title="åŒºåŸŸå¯ç”¨æ€§"></a>åŒºåŸŸå¯ç”¨æ€§</h3><p>Azure OpenAI æœåŠ¡æä¾›äº†å¯¹å¤šç§ç±»å‹çš„æ¨¡å‹çš„è®¿é—®ã€‚ æŸäº›æ¨¡å‹ä»…åœ¨é€‰å®šåŒºåŸŸä¸­å¯ç”¨ã€‚ æœ‰å…³åŒºåŸŸå¯ç”¨æ€§ï¼Œè¯·å‚é˜… <a href="https://learn.microsoft.com/zh-cn/azure/cognitive-services/openai/concepts/models#model-summary-table-and-region-availability/?azure-portal=true">Azure OpenAI æ¨¡å‹å¯ç”¨æ€§æŒ‡å—</a>ã€‚ å¯ä»¥ä¸ºæ¯ä¸ªåŒºåŸŸåˆ›å»ºä¸¤ä¸ª Azure OpenAI èµ„æºã€‚</p><p>Azure OpenAI Studio æä¾›å¯¹æ¨¡å‹ç®¡ç†ã€éƒ¨ç½²ã€è¯•éªŒã€è‡ªå®šä¹‰å’Œå­¦ä¹ èµ„æºçš„è®¿é—®æƒé™ã€‚</p><p>åˆ›å»ºèµ„æºåï¼Œå¯ä»¥é€šè¿‡ Azure é—¨æˆ·è®¿é—® Azure OpenAI Studioï¼Œä¹Ÿå¯ä»¥åœ¨ <a href="https://oai.azure.com/?azure-portal=true">https://oai.azure.com</a> é€šè¿‡ä½¿ç”¨ Azure OpenAI èµ„æºå®ä¾‹ç™»å½•æ¥è®¿é—® Azure OpenAI Studioã€‚ åœ¨ç™»å½•å·¥ä½œæµä¸­ï¼Œé€‰æ‹©é€‚å½“çš„ç›®å½•ã€Azure è®¢é˜…å’Œ Azure OpenAI èµ„æºã€‚</p><p><img src="https://learn.microsoft.com/zh-cn/training/wwl-data-ai/get-started-openai/media/studio-portal.png" alt="Screenshot of the Azure OpenAI Studio portal which can be used to access several features."></p><p>é¦–æ¬¡æ‰“å¼€ Azure OpenAI Studio æ—¶ï¼Œå±å¹•é¡¶éƒ¨ä¼šæ˜¾ç¤ºä¸€ä¸ªâ€œè¡ŒåŠ¨å·å¬â€æŒ‰é’®ï¼Œç”¨äºéƒ¨ç½²ç¬¬ä¸€ä¸ªæ¨¡å‹ã€‚ é€‰æ‹©åˆ›å»ºæ–°éƒ¨ç½²çš„é€‰é¡¹ä¼šæ‰“å¼€â€œéƒ¨ç½²â€é¡µï¼Œä»ä¸­å¯ä»¥éƒ¨ç½²åŸºç¡€æ¨¡å‹å¹¶å¼€å§‹è¯•éªŒã€‚</p><p><img src="https://learn.microsoft.com/zh-cn/training/wwl-data-ai/get-started-openai/media/openai-portal-navigation.png" alt="Screenshot of the Azure OpenAI Studio portal menu of pages."></p><h2 id="æ¢ç´¢ç”Ÿæˆå¼-AI-æ¨¡å‹çš„ç±»å‹"><a href="#æ¢ç´¢ç”Ÿæˆå¼-AI-æ¨¡å‹çš„ç±»å‹" class="headerlink" title="æ¢ç´¢ç”Ÿæˆå¼ AI æ¨¡å‹çš„ç±»å‹"></a>æ¢ç´¢ç”Ÿæˆå¼ AI æ¨¡å‹çš„ç±»å‹</h2><p>è‹¥è¦å¼€å§‹ä½¿ç”¨ Azure OpenAI è¿›è¡Œç”Ÿæˆï¼Œéœ€è¦é€‰æ‹©ä¸€ä¸ªåŸºç¡€æ¨¡å‹å¹¶è¿›è¡Œéƒ¨ç½²ã€‚ Microsoft æä¾›åŸºç¡€æ¨¡å‹ä»¥åŠåˆ›å»ºè‡ªå®šä¹‰åŸºç¡€æ¨¡å‹çš„é€‰é¡¹ã€‚ æœ¬æ¨¡å—ä»‹ç»å½“å‰å¯ç”¨çš„åŸºç¡€æ¨¡å‹ã€‚</p><p>Azure OpenAI åŒ…æ‹¬å¤šç§ç±»å‹çš„æ¨¡å‹ï¼š</p><ul><li>GPT-4 æ¨¡å‹æ˜¯æœ€æ–°ä¸€ä»£çš„ç”Ÿæˆå¼é¢„è®­ç»ƒ (GPT) æ¨¡å‹ï¼Œå¯ä»¥æ ¹æ®è‡ªç„¶è¯­è¨€æç¤ºç”Ÿæˆè‡ªç„¶è¯­è¨€å’Œä»£ç è¡¥å…¨ã€‚</li><li>GPT 3.5 æ¨¡å‹å¯ä»¥æ ¹æ®è‡ªç„¶è¯­è¨€æç¤ºç”Ÿæˆè‡ªç„¶è¯­è¨€å’Œä»£ç è¡¥å…¨ã€‚ å…·ä½“è€Œè¨€ï¼ŒGPT-35-turbo æ¨¡å‹é’ˆå¯¹åŸºäºèŠå¤©çš„äº¤äº’è¿›è¡Œäº†ä¼˜åŒ–ï¼Œåœ¨å¤§å¤šæ•°ç”Ÿæˆå¼ AI æ–¹æ¡ˆä¸­éƒ½è¡¨ç°è‰¯å¥½ã€‚</li><li>åµŒå…¥æ¨¡å‹å°†æ–‡æœ¬è½¬æ¢ä¸ºæ•°å­—å‘é‡ï¼Œå¹¶ä¸”åœ¨è¯­è¨€åˆ†ææ–¹æ¡ˆï¼ˆä¾‹å¦‚æ¯”è¾ƒæ–‡æœ¬æºçš„ç›¸ä¼¼æ€§ï¼‰ä¸­éå¸¸æœ‰ç”¨ã€‚</li><li>DALL-E æ¨¡å‹ç”¨äºåŸºäºè‡ªç„¶è¯­è¨€æç¤ºç”Ÿæˆå›¾åƒã€‚ ç›®å‰ï¼ŒDALL-E æ¨¡å‹å¤„äºé¢„è§ˆé˜¶æ®µã€‚ DALL-E æ¨¡å‹æœªåœ¨ Azure OpenAI Studio ç•Œé¢ä¸­åˆ—å‡ºï¼Œå¹¶ä¸”ä¸éœ€è¦æ˜¾å¼éƒ¨ç½²ã€‚</li></ul><p>æ¨¡å‹å› é€Ÿåº¦ã€æˆæœ¬å’Œå®Œæˆç‰¹å®šä»»åŠ¡çš„å‡ºè‰²ç¨‹åº¦è€Œå¼‚ã€‚ å¯ä»¥è¯¦ç»†äº†è§£ <a href="https://learn.microsoft.com/zh-cn/azure/cognitive-services/openai/concepts/models">Azure OpenAI æœåŠ¡æ–‡æ¡£</a>ä¸­ä»‹ç»çš„å·®å¼‚å’Œæœ€æ–°æ¨¡å‹ã€‚</p><p>æ³¨æ„</p><p>å®šä»·ç”±ä»¤ç‰Œå’Œæ¨¡å‹ç±»å‹å†³å®šã€‚ åœ¨æ­¤å¤„è¯¦ç»†äº†è§£æœ€æ–°<a href="https://azure.microsoft.com/pricing/details/cognitive-services/openai-service/">å®šä»·</a>ã€‚</p><p>åœ¨ Azure OpenAI Studio ä¸­ï¼Œâ€œæ¨¡å‹â€é¡µåˆ—å‡ºäº†å¯ç”¨çš„åŸºç¡€æ¨¡å‹ï¼ˆDALL-E æ¨¡å‹é™¤å¤–ï¼‰ï¼Œå¹¶æä¾›äº†é€šè¿‡å¾®è°ƒåŸºæœ¬æ¨¡å‹æ¥åˆ›å»ºå…¶ä»–è‡ªå®šä¹‰æ¨¡å‹çš„é€‰é¡¹ã€‚ æ¨¡å‹çŠ¶æ€ä¸ºâ€œæˆåŠŸâ€æ„å‘³ç€å®ƒä»¬å·²æˆåŠŸè®­ç»ƒï¼Œå¹¶ä¸”å¯è¢«é€‰æ‹©ç”¨äºéƒ¨ç½²ã€‚</p><p><img src="https://learn.microsoft.com/zh-cn/training/wwl-data-ai/get-started-openai/media/studio-models.png" alt="Screenshot of the Azure OpenAI Studio portal&#39;s out-of-the-box generative AI models."></p><h2 id="éƒ¨ç½²ç”Ÿæˆå¼-AI-æ¨¡å‹"><a href="#éƒ¨ç½²ç”Ÿæˆå¼-AI-æ¨¡å‹" class="headerlink" title="éƒ¨ç½²ç”Ÿæˆå¼ AI æ¨¡å‹"></a>éƒ¨ç½²ç”Ÿæˆå¼ AI æ¨¡å‹</h2><p>é¦–å…ˆéœ€è¦éƒ¨ç½²ä¸€ä¸ªæ¨¡å‹ï¼Œä»¥ä¾¿è¿›è¡Œ API è°ƒç”¨ï¼Œä»è€Œæ¥æ”¶æç¤ºå®Œæˆã€‚ åˆ›å»ºæ–°éƒ¨ç½²æ—¶ï¼Œéœ€è¦æŒ‡å‡ºè¦éƒ¨ç½²çš„åŸºç¡€æ¨¡å‹ã€‚ å¯ä»¥åœ¨ä¸€ä¸ªæˆ–å¤šä¸ª Azure OpenAI èµ„æºä¸­å®ç°ä»»æ„æ•°é‡çš„éƒ¨ç½²ï¼Œåªè¦å®ƒä»¬çš„ TPM æ€»æ•°åœ¨é‚£ä¸ªåŒºåŸŸä¸­ä½äº 240Kã€‚ å¯é€šè¿‡å¤šç§æ–¹å¼éƒ¨ç½²åŸºç¡€æ¨¡å‹ã€‚</p><h2 id="ä½¿ç”¨-Azure-OpenAI-Studio-è¿›è¡Œéƒ¨ç½²"><a href="#ä½¿ç”¨-Azure-OpenAI-Studio-è¿›è¡Œéƒ¨ç½²" class="headerlink" title="ä½¿ç”¨ Azure OpenAI Studio è¿›è¡Œéƒ¨ç½²"></a>ä½¿ç”¨ Azure OpenAI Studio è¿›è¡Œéƒ¨ç½²</h2><p>åœ¨ Azure OpenAI Studio çš„â€œéƒ¨ç½²â€é¡µä¸­ï¼Œå¯ä»¥é€šè¿‡ä»èœå•ä¸­é€‰æ‹©æ¨¡å‹åç§°æ¥åˆ›å»ºæ–°éƒ¨ç½²ã€‚ å¯ç”¨çš„åŸºç¡€æ¨¡å‹æ¥è‡ªæ¨¡å‹é¡µä¸­çš„åˆ—è¡¨ã€‚</p><p><img src="https://learn.microsoft.com/zh-cn/training/wwl-data-ai/get-started-openai/media/studio-deployment.png" alt="Screenshot of the Azure OpenAI Studio portal&#39;s model deployment wizard."></p><p>åœ¨ Studio çš„â€œéƒ¨ç½²â€é¡µä¸­ï¼Œè¿˜å¯ä»¥æŸ¥çœ‹æ‰€æœ‰éƒ¨ç½²çš„ç›¸å…³ä¿¡æ¯ï¼ŒåŒ…æ‹¬éƒ¨ç½²åç§°ã€æ¨¡å‹åç§°ã€æ¨¡å‹ç‰ˆæœ¬ã€çŠ¶æ€ã€åˆ›å»ºæ—¥æœŸç­‰ã€‚</p><h2 id="ä½¿ç”¨-Azure-CLI-è¿›è¡Œéƒ¨ç½²"><a href="#ä½¿ç”¨-Azure-CLI-è¿›è¡Œéƒ¨ç½²" class="headerlink" title="ä½¿ç”¨ Azure CLI è¿›è¡Œéƒ¨ç½²"></a>ä½¿ç”¨ Azure CLI è¿›è¡Œéƒ¨ç½²</h2><p>è¿˜å¯ä»¥ä½¿ç”¨æ§åˆ¶å°éƒ¨ç½²æ¨¡å‹ã€‚ ä½¿ç”¨æ­¤ç¤ºä¾‹ï¼Œå°†ä»¥ä¸‹å˜é‡æ›¿æ¢ä¸ºè‡ªå·±çš„èµ„æºå€¼ï¼š</p><ul><li>OAIResourceGroupï¼šæ›¿æ¢ä¸ºèµ„æºç»„åç§°</li><li>MyOpenAIResourceï¼š<em>æ›¿æ¢ä¸ºèµ„æºåç§°</em></li><li>MyModelï¼šæ›¿æ¢ä¸ºæ¨¡å‹çš„å”¯ä¸€åç§°</li><li>gpt-35-turboï¼šæ›¿æ¢ä¸ºè¦éƒ¨ç½²çš„åŸºç¡€æ¨¡å‹</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">az cognitiveservices account deployment create \</span><br><span class="line">   -g OAIResourceGroup \</span><br><span class="line">   -n MyOpenAIResource \</span><br><span class="line">   --deployment-name MyModel \</span><br><span class="line">   --model-name gpt-35-turbo \</span><br><span class="line">   --model-version &quot;0301&quot;  \</span><br><span class="line">   --model-format OpenAI \</span><br><span class="line">   --sku-name &quot;Standard&quot; \</span><br><span class="line">   --sku-capacity 1</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨-REST-API-è¿›è¡Œéƒ¨ç½²"><a href="#ä½¿ç”¨-REST-API-è¿›è¡Œéƒ¨ç½²" class="headerlink" title="ä½¿ç”¨ REST API è¿›è¡Œéƒ¨ç½²"></a>ä½¿ç”¨ REST API è¿›è¡Œéƒ¨ç½²</h2><p>å¯ä»¥ä½¿ç”¨ REST API éƒ¨ç½²æ¨¡å‹ã€‚ åœ¨è¯·æ±‚æ­£æ–‡ä¸­ï¼ŒæŒ‡å®šè¦éƒ¨ç½²çš„åŸºç¡€æ¨¡å‹ã€‚ è¯·å‚é˜… <a href="https://learn.microsoft.com/zh-cn/azure/ai-services/openai/">Azure OpenAI æ–‡æ¡£</a>ä¸­çš„ç¤ºä¾‹ã€‚</p><h2 id="ä½¿ç”¨æç¤ºä»æ¨¡å‹å®Œæˆ"><a href="#ä½¿ç”¨æç¤ºä»æ¨¡å‹å®Œæˆ" class="headerlink" title="ä½¿ç”¨æç¤ºä»æ¨¡å‹å®Œæˆ"></a>ä½¿ç”¨æç¤ºä»æ¨¡å‹å®Œæˆ</h2><p>éƒ¨ç½²æ¨¡å‹åï¼Œå¯ä»¥æµ‹è¯•å…¶å®Œæˆæç¤ºçš„æ–¹å¼ã€‚ æç¤ºæ˜¯å‘é€åˆ°éƒ¨ç½²æ¨¡å‹çš„å®Œæˆç»ˆç»“ç‚¹çš„è¯·æ±‚çš„æ–‡æœ¬éƒ¨åˆ†ã€‚ å“åº”è¢«ç§°ä¸ºå®Œæˆï¼Œå¯ä»¥é‡‡ç”¨æ–‡æœ¬ã€ä»£ç çš„å½¢å¼æˆ–å…¶ä»–å½¢å¼ã€‚</p><h2 id="æç¤ºç±»å‹"><a href="#æç¤ºç±»å‹" class="headerlink" title="æç¤ºç±»å‹"></a>æç¤ºç±»å‹</h2><p>å¯ä»¥æ ¹æ®ä»»åŠ¡å°†æç¤ºåˆ†ç»„ä¸ºè¯·æ±‚ç±»å‹ã€‚</p><table><thead><tr><th>ä»»åŠ¡ç±»å‹</th><th>æç¤ºç¤ºä¾‹</th><th>å®Œæˆç¤ºä¾‹</th></tr></thead><tbody><tr><td>å¯¹å†…å®¹è¿›è¡Œåˆ†ç±»</td><td>Tweetï¼šæˆ‘å–œæ¬¢è¿™æ¬¡æ—…è¡Œã€‚</td><td></td></tr><tr><td>æƒ…ç»ª:</td><td>æ­£</td><td></td></tr><tr><td>ç”Ÿæˆæ–°å†…å®¹</td><td>åˆ—å‡ºæ—…è¡Œæ–¹å¼</td><td>1.éª‘è¡Œ</td></tr><tr><td>2. ä¹˜è½¦ â€¦</td><td></td><td></td></tr><tr><td>è¿›è¡Œå¯¹è¯</td><td>å‹å¥½çš„ AI åŠ©æ‰‹</td><td><a href="https://learn.microsoft.com/zh-cn/azure/cognitive-services/openai/how-to/completions#conversation?portal=true">è¯·å‚è§ç¤ºä¾‹</a></td></tr><tr><td>è½¬æ¢ï¼ˆè½¬æ¢å’Œç¬¦å·è½¬æ¢ï¼‰</td><td>è‹±è¯­ï¼šä½ å¥½</td><td></td></tr><tr><td>æ³•è¯­ï¼š</td><td>bonjour</td><td></td></tr><tr><td>æ±‡æ€»å†…å®¹</td><td>æä¾›å†…å®¹æ€»ç»“</td><td></td></tr><tr><td>{text}</td><td>æœºå™¨å­¦ä¹ çš„å†…å®¹å…±äº«æ–¹æ³•ã€‚</td><td></td></tr><tr><td>ä»ç¦»å¼€çš„ä½ç½®ç»§ç»­</td><td>ç§æ¤è¥¿çº¢æŸ¿çš„ä¸€ç§æ–¹æ³•</td><td>å°±æ˜¯æ’­ç§ç§å­ã€‚</td></tr><tr><td>æä¾›äº‹å®ç­”å¤</td><td>åœ°çƒæ‹¥æœ‰å¤šå°‘é¢—å«æ˜Ÿï¼Ÿ</td><td>ä¸€ç§</td></tr></tbody></table><h2 id="å®Œæˆè´¨é‡"><a href="#å®Œæˆè´¨é‡" class="headerlink" title="å®Œæˆè´¨é‡"></a>å®Œæˆè´¨é‡</h2><p>æœ‰å‡ ä¸ªå› ç´ ä¼šå½±å“ä»ç”Ÿæˆå¼ AI è§£å†³æ–¹æ¡ˆä¸­è·å¾—çš„å®Œæˆè´¨é‡ã€‚</p><ul><li>æç¤ºçš„å·¥ç¨‹å¤„ç†æ–¹å¼ã€‚ <a href="https://learn.microsoft.com/zh-cn/azure/cognitive-services/openai/concepts/prompt-engineering?portal=true">å•å‡»æ­¤å¤„è¯¦ç»†äº†è§£æç¤ºå·¥ç¨‹</a>ã€‚</li><li>æ¨¡å‹å‚æ•°ï¼ˆä¸‹æ–‡å°†ä»‹ç»ï¼‰</li><li>è®­ç»ƒæ¨¡å‹çš„æ•°æ®ï¼Œå¯ä»¥é€šè¿‡<a href="https://learn.microsoft.com/zh-cn/azure/cognitive-services/openai/how-to/fine-tuning?pivots=programming-language-studio?portal=true">è‡ªå®šä¹‰æ¨¡å‹å¾®è°ƒ</a>è¿›è¡Œè°ƒæ•´</li></ul><p>ä¸é€šè¿‡æç¤ºå·¥ç¨‹å’Œå‚æ•°è°ƒæ•´ç›¸æ¯”ï¼Œä½ å¯ä»¥é€šè¿‡è®­ç»ƒè‡ªå®šä¹‰æ¨¡å‹æ›´å¥½åœ°æ§åˆ¶è¿”å›çš„å®Œæˆã€‚</p><h2 id="å‘èµ·å‘¼å«"><a href="#å‘èµ·å‘¼å«" class="headerlink" title="å‘èµ·å‘¼å«"></a>å‘èµ·å‘¼å«</h2><p>å¯ä»¥é€šè¿‡ REST APIã€Pythonã€C# æˆ–ä» Studio å¼€å§‹è°ƒç”¨éƒ¨ç½²çš„æ¨¡å‹ã€‚ å¦‚æœéƒ¨ç½²çš„æ¨¡å‹å…·æœ‰ GPT-3.5 æˆ– GPT-4 æ¨¡å‹åº“ï¼Œè¯·ä½¿ç”¨<a href="https://learn.microsoft.com/zh-cn/azure/cognitive-services/openai/reference#chat-completions?azure-portal=true">èŠå¤©å®Œæˆæ–‡æ¡£</a>ï¼Œè¯¥æ–‡æ¡£å…·æœ‰ä¸å…¶ä»–åŸºç¡€æ¨¡å‹ä¸åŒçš„è¯·æ±‚ç»ˆç»“ç‚¹å’Œå˜é‡ã€‚</p><h2 id="åœ¨-Azure-OpenAI-Studio-çš„æ“åœºä¸­æµ‹è¯•æ¨¡å‹"><a href="#åœ¨-Azure-OpenAI-Studio-çš„æ“åœºä¸­æµ‹è¯•æ¨¡å‹" class="headerlink" title="åœ¨ Azure OpenAI Studio çš„æ“åœºä¸­æµ‹è¯•æ¨¡å‹"></a>åœ¨ Azure OpenAI Studio çš„æ“åœºä¸­æµ‹è¯•æ¨¡å‹</h2><p>æ“åœºæ˜¯ Azure OpenAI Studio ä¸­çš„æœ‰ç”¨æ¥å£ï¼Œå¯ç”¨äºè¯•éªŒéƒ¨ç½²çš„æ¨¡å‹ï¼Œè€Œæ— éœ€å¼€å‘è‡ªå·±çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºã€‚ Azure OpenAI Studio æä¾›äº†å…·æœ‰ä¸åŒå‚æ•°ä¼˜åŒ–é€‰é¡¹çš„å¤šä¸ªæ“åœºã€‚</p><h2 id="å®Œæˆæ“åœº"><a href="#å®Œæˆæ“åœº" class="headerlink" title="å®Œæˆæ“åœº"></a>å®Œæˆæ“åœº</h2><p>å®Œæˆæ“åœºå…è®¸ä½ é€šè¿‡æ–‡æœ¬è¾“å…¥æ–‡æœ¬è¾“å‡ºæ¥å£è°ƒç”¨éƒ¨ç½²çš„æ¨¡å‹ï¼Œå¹¶è°ƒæ•´å‚æ•°ã€‚ ä½ éœ€è¦åœ¨â€œéƒ¨ç½²â€ä¸‹é€‰æ‹©æ¨¡å‹çš„éƒ¨ç½²åç§°ã€‚ ï¼ˆå¯é€‰ï¼‰å¯ä»¥ä½¿ç”¨æä¾›çš„ç¤ºä¾‹å…¥é—¨ï¼Œç„¶åè¾“å…¥è‡ªå·±çš„æç¤ºã€‚</p><p><img src="https://learn.microsoft.com/zh-cn/training/wwl-data-ai/get-started-openai/media/azure-openai-completions-playground.png" alt="Screenshot of the Azure OpenAI Studio portal&#39;s completions playground."></p><h4 id="å®Œæˆæ“åœºå‚æ•°"><a href="#å®Œæˆæ“åœºå‚æ•°" class="headerlink" title="å®Œæˆæ“åœºå‚æ•°"></a>å®Œæˆæ“åœºå‚æ•°</h4><p>å¯ä»¥è°ƒæ•´è®¸å¤šå‚æ•°æ¥æ›´æ”¹æ¨¡å‹çš„æ€§èƒ½ï¼š</p><ul><li>æ¸©åº¦ï¼šæ§åˆ¶éšæœºæ€§ã€‚ é™ä½æ¸©åº¦æ„å‘³ç€æ¨¡å‹ä¼šäº§ç”Ÿæ›´å¤šé‡å¤æ€§å’Œç¡®å®šæ€§çš„å›å¤ã€‚ æé«˜æ¸©åº¦ä¼šå¯¼è‡´æ›´å¤šæ„å¤–æˆ–åˆ›é€ æ€§çš„å›å¤ã€‚ è¯·å°è¯•è°ƒæ•´æ¸©åº¦æˆ– Top P å€¼ï¼Œä½†ä¸è¦åŒæ—¶è°ƒæ•´ä¸¤è€…ã€‚</li><li>æœ€å¤§é•¿åº¦(æ ‡è®°æ•°)ï¼šå¯¹æ¯ä¸ªæ¨¡å‹å“åº”çš„æ ‡è®°æ•°è®¾ç½®é™åˆ¶ã€‚ è¯¥ API æ”¯æŒæœ€å¤š 4000 ä¸ªæ ‡è®°ï¼ŒåŒ…æ‹¬æç¤ºï¼ˆåŒ…æ‹¬ç³»ç»Ÿæ¶ˆæ¯ã€ç¤ºä¾‹ã€æ¶ˆæ¯å†å²è®°å½•ä»¥åŠç”¨æˆ·æŸ¥è¯¢ï¼‰å’Œæ¨¡å‹çš„å“åº”ã€‚ å¯¹äºå…¸å‹çš„è‹±æ–‡æ–‡æœ¬ï¼Œä¸€ä¸ªæ ‡è®°å¤§çº¦æ˜¯å››ä¸ªå­—ç¬¦ã€‚</li><li>åœæ­¢åºåˆ—ï¼šä½¿å“åº”åœæ­¢åœ¨æ‰€éœ€ç‚¹ï¼Œä¾‹å¦‚å¥å­æˆ–åˆ—è¡¨çš„æœ«å°¾ã€‚ æŒ‡å®šæœ€å¤šå››ä¸ªåºåˆ—ï¼Œæ¨¡å‹å°†åœæ­¢åœ¨å“åº”ä¸­ç”Ÿæˆæ›´å¤šæ ‡è®°ã€‚ è¿”å›çš„æ–‡æœ¬ä¸åŒ…å«åœæ­¢åºåˆ—ã€‚</li><li>æœ€é«˜æ¦‚ç‡(æœ€é«˜ P)ï¼šä¸æ¸©åº¦ç±»ä¼¼ï¼Œå®ƒæ§åˆ¶ç€éšæœºæ€§ï¼Œä½†ä½¿ç”¨ä¸åŒçš„æ–¹æ³•ã€‚ é™ä½ Top P å€¼ä¼šå°†æ¨¡å‹çš„æ ‡è®°é€‰æ‹©èŒƒå›´ç¼©å°åˆ°å¯èƒ½æ€§æ›´é«˜çš„æ ‡è®°ã€‚ å¢åŠ  Top P å€¼ä¼šä½¿æ¨¡å‹æ—¢é€‰æ‹©å¯èƒ½é«˜çš„æ ‡è®°åˆé€‰æ‹©å¯èƒ½æ€§ä½çš„æ ‡è®°ã€‚ è¯·å°è¯•è°ƒæ•´æ¸©åº¦æˆ– Top P å€¼ï¼Œä½†ä¸è¦åŒæ—¶è°ƒæ•´ä¸¤è€…ã€‚</li><li>é¢‘ç‡å¤„ç½šï¼šæ ¹æ®æ ‡è®°åœ¨æ–‡æœ¬ä¸­å‡ºç°çš„é¢‘ç‡ï¼ŒæŒ‰æ¯”ä¾‹é™ä½æ ‡è®°é‡å¤çš„å¯èƒ½æ€§ã€‚ è¿™ä¼šé™ä½åœ¨å“åº”ä¸­é‡å¤å®Œå…¨ç›¸åŒæ–‡æœ¬çš„å¯èƒ½æ€§ã€‚</li><li>å­˜åœ¨å¤„ç½šï¼šé™ä½åˆ°ç›®å‰ä¸ºæ­¢åœ¨æ–‡æœ¬ä¸­å‡ºç°çš„ä»»ä½•æ ‡è®°é‡å¤çš„å¯èƒ½æ€§ã€‚ è¿™ä¼šå¢åŠ åœ¨å“åº”ä¸­å¼•å…¥æ–°ä¸»é¢˜çš„å¯èƒ½æ€§ã€‚</li><li>å“åº”å‰æ–‡æœ¬ï¼šåœ¨ç”¨æˆ·è¾“å…¥ä¹‹åå’Œæ¨¡å‹å“åº”ä¹‹å‰æ’å…¥æ–‡æœ¬ã€‚ è¿™æœ‰åŠ©äºä¸ºå“åº”å‡†å¤‡æ¨¡å‹ã€‚</li><li>å“åº”åæ–‡æœ¬ï¼šåœ¨æ¨¡å‹ç”Ÿæˆçš„å“åº”ä¹‹åæ’å…¥æ–‡æœ¬ä»¥é¼“åŠ±è¿›ä¸€æ­¥çš„ç”¨æˆ·è¾“å…¥ï¼Œå°±åƒå¯¹è¯å»ºæ¨¡ä¸€æ ·ã€‚</li></ul><h2 id="èŠå¤©æ“åœº"><a href="#èŠå¤©æ“åœº" class="headerlink" title="èŠå¤©æ“åœº"></a>èŠå¤©æ“åœº</h2><p>èŠå¤©æ“åœºåŸºäºå¯¹è¯ä¼ å…¥æ¶ˆæ¯ä¼ å‡ºç•Œé¢ã€‚ å¯ä»¥ä½¿ç”¨ç³»ç»Ÿæ¶ˆæ¯åˆå§‹åŒ–ä¼šè¯ä»¥è®¾ç½®èŠå¤©ä¸Šä¸‹æ–‡ã€‚</p><p>åœ¨èŠå¤©æ“åœºä¸­ï¼Œå¯ä»¥æ·»åŠ å°‘æ ·æœ¬ç¤ºä¾‹ã€‚ â€œå°‘æ ·æœ¬â€ä¸€è¯æ˜¯æŒ‡æä¾›å‡ ä¸ªç¤ºä¾‹æ¥å¸®åŠ©æ¨¡å‹äº†è§£å®ƒéœ€è¦æ‰§è¡Œçš„æ“ä½œã€‚ å¯ä»¥å°†å…¶ä¸é›¶æ ·æœ¬ï¼ˆæŒ‡ä¸æä¾›ä»»ä½•ç¤ºä¾‹ï¼‰è¿›è¡Œå¯¹æ¯”ã€‚</p><p>åœ¨åŠ©æ‰‹è®¾ç½®ä¸­ï¼Œå¯ä»¥æä¾›ç”¨æˆ·è¾“å…¥å’ŒåŠ©æ‰‹å“åº”çš„å°‘æ ·æœ¬ç¤ºä¾‹ã€‚ åŠ©æ‰‹ä¼šå°è¯•ä»¥ä½ åœ¨ç³»ç»Ÿæ¶ˆæ¯ä¸­å®šä¹‰çš„è¯­æ°”ã€è§„åˆ™å’Œæ ¼å¼æ¥æ¨¡æ‹Ÿè¿™é‡ŒåŒ…å«çš„å“åº”ã€‚</p><p><img src="https://learn.microsoft.com/zh-cn/training/wwl-data-ai/get-started-openai/media/azure-openai-chat-playground.png" alt="Screenshot of the Azure OpenAI Studio portal&#39;s Chat playground."></p><h4 id="èŠå¤©æ“åœºå‚æ•°"><a href="#èŠå¤©æ“åœºå‚æ•°" class="headerlink" title="èŠå¤©æ“åœºå‚æ•°"></a>èŠå¤©æ“åœºå‚æ•°</h4><p>â€œå®Œæˆâ€æ“åœºç­‰â€œèŠå¤©â€æ“åœºè¿˜åŒ…æ‹¬æ¸©åº¦å‚æ•°ã€‚ â€œèŠå¤©â€æ“åœºè¿˜æ”¯æŒâ€œå®Œæˆâ€æ“åœºä¸­ä¸å¯ç”¨çš„å…¶ä»–å‚æ•°ã€‚ å…¶ä¸­åŒ…æ‹¬ï¼š</p><ul><li>æœ€å¤§å“åº”ï¼šå¯¹æ¯ä¸ªæ¨¡å‹å“åº”çš„æ ‡è®°æ•°è®¾ç½®é™åˆ¶ã€‚ è¯¥ API æ”¯æŒæœ€å¤š 4000 ä¸ªæ ‡è®°ï¼ŒåŒ…æ‹¬æç¤ºï¼ˆåŒ…æ‹¬ç³»ç»Ÿæ¶ˆæ¯ã€ç¤ºä¾‹ã€æ¶ˆæ¯å†å²è®°å½•ä»¥åŠç”¨æˆ·æŸ¥è¯¢ï¼‰å’Œæ¨¡å‹çš„å“åº”ã€‚ å¯¹äºå…¸å‹çš„è‹±æ–‡æ–‡æœ¬ï¼Œä¸€ä¸ªæ ‡è®°å¤§çº¦æ˜¯å››ä¸ªå­—ç¬¦ã€‚</li><li>æœ€é«˜ Pï¼šä¸æ¸©åº¦ç±»ä¼¼ï¼Œå®ƒæ§åˆ¶ç€éšæœºæ€§ï¼Œä½†ä½¿ç”¨ä¸åŒçš„æ–¹æ³•ã€‚ é™ä½ Top P å€¼ä¼šå°†æ¨¡å‹çš„æ ‡è®°é€‰æ‹©èŒƒå›´ç¼©å°åˆ°å¯èƒ½æ€§æ›´é«˜çš„æ ‡è®°ã€‚ å¢åŠ  Top P å€¼ä¼šä½¿æ¨¡å‹æ—¢é€‰æ‹©å¯èƒ½é«˜çš„æ ‡è®°åˆé€‰æ‹©å¯èƒ½æ€§ä½çš„æ ‡è®°ã€‚ è¯·å°è¯•è°ƒæ•´æ¸©åº¦æˆ– Top P å€¼ï¼Œä½†ä¸è¦åŒæ—¶è°ƒæ•´ä¸¤è€…ã€‚</li><li>åŒ…å«çš„è¿‡å»æ¶ˆæ¯æ•°ï¼šé€‰æ‹©è¦åŒ…å«åœ¨æ¯ä¸ªæ–° API è¯·æ±‚ä¸­çš„è¿‡å»æ¶ˆæ¯æ•°ã€‚ åŒ…å«è¿‡å»çš„æ¶ˆæ¯æœ‰åŠ©äºä¸ºæ–°ç”¨æˆ·æŸ¥è¯¢æä¾›æ¨¡å‹ä¸Šä¸‹æ–‡ã€‚ å°†æ­¤æ•°å­—è®¾ç½®ä¸º 10 å°†åŒ…å« 5 ä¸ªç”¨æˆ·æŸ¥è¯¢å’Œ 5 ä¸ªç³»ç»Ÿå“åº”ã€‚</li></ul><p>å¯ä»¥åœ¨èŠå¤©æ“åœºä¸­æŸ¥çœ‹â€œå½“å‰æ ‡è®°è®¡æ•°â€ã€‚ ç”±äº API è°ƒç”¨æŒ‰æ ‡è®°å®šä»·ï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®æœ€å¤§å“åº”æ ‡è®°é™åˆ¶ï¼Œå› æ­¤éœ€è¦ç•™æ„å½“å‰æ ‡è®°è®¡æ•°ï¼Œä»¥ç¡®ä¿å¯¹è¯ä¸ä¼šè¶…è¿‡æœ€å¤§å“åº”æ ‡è®°è®¡æ•°ã€‚</p><h2 id="ç»ƒä¹ -å¼€å§‹ä½¿ç”¨-Azure-OpenAI-æœåŠ¡"><a href="#ç»ƒä¹ -å¼€å§‹ä½¿ç”¨-Azure-OpenAI-æœåŠ¡" class="headerlink" title="ç»ƒä¹  - å¼€å§‹ä½¿ç”¨ Azure OpenAI æœåŠ¡"></a>ç»ƒä¹  - å¼€å§‹ä½¿ç”¨ Azure OpenAI æœåŠ¡</h2><p>å·²å®Œæˆ</p><p>ç°åœ¨ï¼Œä½ æœ‰æœºä¼šåœ¨ Azure OpenAI Studio ä¸­éƒ¨ç½²å’Œç®¡ç†æ¨¡å‹ã€‚ åœ¨æœ¬ç»ƒä¹ ä¸­ï¼Œä½ å°†éƒ¨ç½² Azure OpenAI åŸºç¡€æ¨¡å‹ï¼Œå¹¶åœ¨å®Œæˆå’ŒèŠå¤©æ“åœºä¸­æµ‹è¯•å®ƒä»¬ã€‚ ä½ å°†æœ‰æœºä¼šäº†è§£æç¤ºå’Œå‚æ•°å¯¹æ–‡æœ¬å’Œä»£ç å®Œæˆçš„å½±å“ã€‚</p><p>æ³¨æ„</p><p>ä¸ºäº†å®Œæˆæ­¤å®éªŒå®¤ï¼Œä½ å°†éœ€è¦ä¸€ä¸ª <a href="https://azure.microsoft.com/free?azure-portal=true">Azure è®¢é˜…</a>ã€‚ è¿˜éœ€è¦æ³¨å†Œ <a href="https://learn.microsoft.com/zh-cn/legal/cognitive-services/openai/limited-access?azure-portal=true">Azure OpenAI è®¿é—®æƒé™</a>æ‰èƒ½å®Œæˆæ­¤å®éªŒå®¤ã€‚</p><p>è¦å®Œæˆæœ¬æ¨¡å—çš„ç»ƒä¹ ï¼Œè¯·å¯åŠ¨ VM å¹¶æŒ‰ç…§è¯´æ˜æ“ä½œã€‚</p><p>æ³¨æ„</p><p>è‹¥è¦å®Œæˆæ­¤ç»ƒä¹ ï¼Œä½ å°†éœ€è¦ Microsoft Azure è®¢é˜…ã€‚ å¦‚æœä½ è¿˜æ²¡æœ‰è¯¥è®¢é˜…ï¼Œå¯ä»¥<a href="https://azure.microsoft.com/?azure-portal=true">æ³¨å†Œä¸€ä¸ª</a>ã€‚</p><p>å¦‚æœéœ€è¦ä¸ºæ­¤ç»ƒä¹ è®¾ç½®è®¡ç®—æœºï¼Œå¯ä»¥ä½¿ç”¨æ­¤<a href="https://microsoftlearning.github.io/mslearn-ai-services/Instructions/setup.html?azure-portal=true">è®¾ç½®æŒ‡å—</a>ï¼Œç„¶åæŒ‰ç…§ä¸‹é¢é“¾æ¥çš„ç»ƒä¹ è¯´æ˜è¿›è¡Œæ“ä½œã€‚ è¯·æ³¨æ„ï¼Œè®¾ç½®æŒ‡å—é€‚ç”¨äºå¤šä¸ªå¼€å‘ç»ƒä¹ ï¼Œå…¶ä¸­å¯èƒ½åŒ…æ‹¬è¯¥ç‰¹å®šç»ƒä¹ ä¸éœ€è¦çš„è½¯ä»¶ã€‚ æ­¤å¤–ï¼Œç”±äºå¯èƒ½çš„æ“ä½œç³»ç»Ÿå’Œè®¾ç½®é…ç½®çš„èŒƒå›´å¤ªå¹¿ï¼Œå¦‚æœä½ é€‰æ‹©åœ¨è‡ªå·±çš„è®¡ç®—æœºä¸Šå®Œæˆæ­¤ç»ƒä¹ ï¼Œæˆ‘ä»¬å°†æ— æ³•æä¾›æ”¯æŒã€‚</p><p>è¦åœ¨è‡ªå·±çš„è®¡ç®—æœºä¸ŠæŒ‰ç…§è¿™äº›è¯´æ˜è¿›è¡Œæ“ä½œï¼Œå¯ä»¥æŒ‰ç…§<a href="https://aka.ms/mslearn-get-started-azure-openai?azure-portal=true">æ­¤å¤„çš„ç»ƒä¹ è¯´æ˜</a>è¿›è¡Œæ“ä½œã€‚</p><p>æç¤º</p><p>å®Œæˆç»ƒä¹ åï¼Œå¦‚æœä½ å·²å®Œæˆå¯¹ Azure AI æœåŠ¡çš„å­¦ä¹ ï¼Œè¯·åˆ é™¤åœ¨ç»ƒä¹ æœŸé—´åˆ›å»ºçš„ Azure èµ„æºã€‚</p><!--æ¬¢è¿åŒå­¦ä»¬åŠ å…¥å¾®è½¯äºšæ´²AIå¥¥å¾·èµ›æŠ€æœ¯å®æˆ˜è¥AI å¥¥å¾·èµ›æŠ€æœ¯å®æˆ˜è¥å…±è®¾æœ‰ä¸¤ä¸ªçº§åˆ«çš„æŒ‘æˆ˜ã€‚å…¶ä¸­ç¬¬ä¸€çº§çš„ä¸»è¦å†…å®¹æ˜¯å­¦ä¹  Azure AI æœåŠ¡é’ˆå¯¹å„ç§æƒ…å†µåˆ›å»ºå’Œéƒ¨ç½²äººå·¥æ™ºèƒ½çš„è§£å†³æ–¹æ¡ˆï¼Œä¾‹å¦‚ç”Ÿæˆå¼äººå·¥æ™ºèƒ½ã€æ™ºèƒ½æ–‡æ¡£å’Œè‡ªç„¶è¯­è¨€å¤„ç†ã€‚è€Œåœ¨ç¬¬äºŒçº§ä¸­ï¼Œå¯¹ç¬¬ä¸€çº§å­¦åˆ°çš„äººå·¥æ™ºèƒ½æŠ€èƒ½è¿›è¡Œå®æˆ˜ä¸åº”ç”¨ã€‚éœ€è¦åœ¨äº¤äº’å¼å®éªŒå®¤ä¸­å®Œæˆä¸€ç³»åˆ—ä»»åŠ¡ï¼Œå¦‚æœé€šè¿‡çº¿ä¸Šå³æ—¶è¯„ä¼°èµ¢å¾—ç¬¬äºŒçº§çš„è®¤è¯ã€‚1. æ´»åŠ¨é“¾æ¥ï¼šhttps://www.microsoft.com/zh-cn/AIOdyssey/2. æ´»åŠ¨æ—¶é—´ï¼šå³æ—¥èµ·è‡³ 6 æœˆ 25 æ—¥3. æ´»åŠ¨å¥–åŠ±ï¼šå‚è€ƒä¸‹æ–¹å®éªŒæ‰‹å†Œ å®Œæˆç¬¬ä¸€çº§è·å¾— 50 å…ƒäº¬ä¸œå¡ï¼Œå®Œæˆç¬¬ä¸€çº§+ç¬¬äºŒçº§ä»»åŠ¡è·å– 300 å…ƒäº¬ä¸œå¡ï¼Œç¤¼å“å…ˆåˆ°å…ˆå¾—ã€‚æœŸå¾…æ‚¨çš„å‚ä¸~4. ç¤¼å“å‘æ”¾æ–¹æ³•ï¼šå·¥ä½œäººå‘˜ä¼šæ¯å‘¨äº”ä¸‹ç­ä¹‹å‰å‘æ”¾ä¸Šå‘¨å®ŒæˆåŒå­¦çš„å¥–å“5. å…‘æ¢è§„åˆ™ï¼š    ï¼ˆ1ï¼‰å®Œæˆé˜¶æ®µæ´»åŠ¨å¹¶å‡­å€Ÿæˆªå›¾å³å¯å‚ä¸å…‘å¥–ï¼Œæ¯å®Œæˆä¸€é˜¶æ®µæ´»åŠ¨ä»»åŠ¡ï¼Œå¥–å“è‡ªåŠ¨å‡çº§ã€‚    ï¼ˆ2ï¼‰é™¤é˜¶æ®µå¥–å“å¤–ï¼Œæ¯ä»½å…¥é€‰ä½œå“çš„å‚èµ›è€…(â€œè·å¥–è€…â€)å°†é¢å¤–è·å¾—ä»·å€¼ 50 ç¾å…ƒçš„ç”µå­ç¤¼åˆ¸ã€‚    ï¼ˆ3ï¼‰åŒä¸€äººä»…å¯å‚ä¸ä¸€æ¬¡å…‘å¥–æ´»åŠ¨ï¼Œé˜¶æ®µå¥–å“ä¸å¯ç´¯è®¡ã€‚(é‡å¤æ‰‹æœºå·ã€å¾®ä¿¡å·ã€IP åœ°å€ç­‰å‡ä½œä¸ºè¡¡é‡æ‰‹æ®µ)6. å®éªŒæ‰‹å†Œï¼ˆè¯¦ç»†æŒ‡å¯¼-æä¸å®šé—®é¢˜å‘ç¾¤é‡Œæˆ–@åŠ©æ•™-äºæ˜æµ©ï¼‰å¾®è½¯å¥¥å¾·èµ›AIç¬¬ä¸€çº§å®éªŒæ‰‹å†Œï¼šç¬¬ä¸€çº§æŒ‘æˆ˜è¾ƒä¸ºç®€å•ï¼Œå¼€å§‹åæŒ‰æ‰‹å†Œæµç¨‹ ä»…éœ€ç›´æ¥ç‚¹å‡»ä¸‹ä¸€æ­¥ ç›´åˆ°æµè§ˆå®Œæ‰€æœ‰å­¦ä¹ é¡µé¢ï¼Œå³å¯å®ŒæˆæŒ‘æˆ˜ï¼ˆé¢„è®¡éœ€è¦20minï¼‰ç¬¬ä¸€çº§å®éªŒæ‰‹å†Œé“¾æ¥ï¼šhttps://img-operation.csdnimg.cn/csdn/silkroad/img/1716976239594.htmlç¬¬äºŒçº§å®éªŒæ‰‹å†Œé¢„è®¡è¿‘ä¸¤å¤©ä¸Šçº¿7. å®ŒæˆæŒ‘æˆ˜å æŒ‰ç…§å®éªŒæ‰‹å†Œæœ«å°¾ä¸­çš„<å®Œæˆææ–™æäº¤æ–¹æ³•> å°†ææ–™ç§èŠç»™@å®Œæˆè¯æ˜å‘æˆ‘Â æ›´å¤šå­¦ä¹ èµ„æ–™æŒ‘æˆ˜è¯·å‚è€ƒç¾¤å…¬å‘Šæ›´å¤šæ´»åŠ¨è¯¦æƒ…äº†è§£ï¼šhttps://marketing.csdn.net/p/2d2c9cdae1e94adbafc50f19ba182027ä½¿ç”¨ Azure OpenAI æœåŠ¡å¼€å‘ç”Ÿæˆå¼ AI è§£å†³æ–¹æ¡ˆå±•ç¤ºä½ ä½¿ç”¨ Azure OpenAI æœåŠ¡å¼€å‘ç”Ÿæˆå¼ AI è§£å†³æ–¹æ¡ˆçš„èƒ½åŠ›ã€‚ åœ¨ https://learn.microsoft.com/en-us/credentials/applied-skills/develop-generative-ai-solutions-with-azure-openai-service/#applied-skill-take-the-assessment ä¸Šè¿›è¡Œåº”ç”¨æŠ€èƒ½è¯„ä¼°å¤ªæ£’äº†ï¼ ä½ å·²æ³¨å†Œå‚åŠ  ä½¿ç”¨ Azure OpenAI æœåŠ¡å¼€å‘ç”Ÿæˆå¼ AI è§£å†³æ–¹æ¡ˆã€‚--https://dotnet.microsoft.com/zh-cn/apps/machinelearning-ai  xxhttps://www.microsoft.com/zh-cn/AIOdyssey/https://learn.microsoft.com/zh-cn/collections/e6kjarx0q38?WT.mc_id=cloudskillschallenge_0bc0dea3-e83b-44f1-99a1-f91a1c041817https://learn.microsoft.com/zh-cn/training/modules/get-started-openai/?WT.mc_id=cloudskillschallenge_0bc0dea3-e83b-44f1-99a1-f91a1c041817https://learn.microsoft.com/zh-cn/training/modules/explore-azure-openai/-->]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> .NET </tag>
            
            <tag> Azure </tag>
            
            <tag> OpenAI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>.NET AddWatermark</title>
      <link href="/2024/06/01/NET-AddWatermark/"/>
      <url>/2024/06/01/NET-AddWatermark/</url>
      
        <content type="html"><![CDATA[<h1 id="controller"><a href="#controller" class="headerlink" title="controller"></a>controller</h1><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[<span class="meta">HttpPost</span>]</span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">async</span> Task&lt;IActionResult&gt; <span class="title">AddWatermark</span>(<span class="params">IFormFile file, <span class="built_in">string</span> watermarkText, <span class="built_in">string</span> color, <span class="built_in">int</span> transparency</span>)</span></span><br><span class="line">      &#123;</span><br><span class="line">          <span class="keyword">if</span> (file != <span class="literal">null</span> &amp;&amp; file.Length &gt; <span class="number">0</span>)</span><br><span class="line">          &#123;</span><br><span class="line">              <span class="comment">// å°†ä¸Šä¼ çš„æ–‡ä»¶ä¿å­˜åˆ°æœåŠ¡å™¨</span></span><br><span class="line">              <span class="keyword">var</span> uploads = Path.Combine(_environment.WebRootPath, <span class="string">&quot;uploads&quot;</span>);</span><br><span class="line">              <span class="keyword">if</span> (!Directory.Exists(uploads))</span><br><span class="line">              &#123;</span><br><span class="line">                  Directory.CreateDirectory(uploads);</span><br><span class="line">              &#125;</span><br><span class="line"></span><br><span class="line">              <span class="keyword">var</span> filePath = Path.Combine(uploads, file.FileName);</span><br><span class="line">              <span class="keyword">using</span> (<span class="keyword">var</span> fileStream = <span class="keyword">new</span> FileStream(filePath, FileMode.Create))</span><br><span class="line">              &#123;</span><br><span class="line">                  <span class="keyword">await</span> file.CopyToAsync(fileStream);</span><br><span class="line">              &#125;</span><br><span class="line"></span><br><span class="line">              <span class="comment">// æ·»åŠ æ°´å°</span></span><br><span class="line">              <span class="keyword">using</span> (Image image = Image.FromFile(filePath))</span><br><span class="line">              <span class="keyword">using</span> (Graphics g = Graphics.FromImage(image))</span><br><span class="line">              &#123;</span><br><span class="line">                  <span class="comment">// è®¾ç½®æ°´å°æ–‡æœ¬çš„å­—ä½“å’Œé¢œè‰²</span></span><br><span class="line">                  Font font = <span class="keyword">new</span> Font(<span class="string">&quot;Arial&quot;</span>, <span class="number">20</span>);</span><br><span class="line">                  Color colorValue = ColorTranslator.FromHtml(color);</span><br><span class="line">                  SolidBrush brush = <span class="keyword">new</span> SolidBrush(Color.FromArgb(transparency, colorValue.R, colorValue.G, colorValue.B));</span><br><span class="line"></span><br><span class="line">                  <span class="comment">// è®¡ç®—æ°´å°ä½ç½®</span></span><br><span class="line">                  <span class="built_in">int</span> x = <span class="number">10</span>;</span><br><span class="line">                  <span class="built_in">int</span> y = image.Height - <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line">                  <span class="comment">// ç»˜åˆ¶æ°´å°</span></span><br><span class="line">                  g.DrawString(watermarkText, font, brush, <span class="keyword">new</span> PointF(x, y));</span><br><span class="line">                  </span><br><span class="line">                  <span class="comment">// ä¿å­˜å¸¦æ°´å°çš„å›¾ç‰‡</span></span><br><span class="line">                  <span class="keyword">var</span> newFileName = <span class="string">&quot;watermarked_&quot;</span> + file.FileName;</span><br><span class="line">                  <span class="keyword">var</span> newFilePath = Path.Combine(uploads, newFileName);</span><br><span class="line">                  image.Save(newFilePath, ImageFormat.Jpeg);</span><br><span class="line"></span><br><span class="line">                  <span class="comment">// è¿”å›å¸¦æ°´å°çš„å›¾ç‰‡è·¯å¾„</span></span><br><span class="line">                  ViewBag.ImagePath = <span class="string">&quot;/uploads/&quot;</span> + newFileName;</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          <span class="keyword">return</span> View(<span class="string">&quot;Index&quot;</span>);</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><h1 id="views"><a href="#views" class="headerlink" title="views"></a>views</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">@&#123;</span><br><span class="line">    ViewBag.Title = &quot;Home Page&quot;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>å›¾ç‰‡åŠ æ°´å°<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/Home/AddWatermark&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;file&quot;</span>&gt;</span>é€‰æ‹©å›¾ç‰‡ï¼š<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span> <span class="attr">id</span>=<span class="string">&quot;file&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;watermarkText&quot;</span>&gt;</span>æ°´å°æ–‡å­—ï¼š<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;watermarkText&quot;</span> <span class="attr">id</span>=<span class="string">&quot;watermarkText&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;color&quot;</span>&gt;</span>æ°´å°é¢œè‰²ï¼š<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;color&quot;</span> <span class="attr">name</span>=<span class="string">&quot;color&quot;</span> <span class="attr">id</span>=<span class="string">&quot;color&quot;</span> <span class="attr">value</span>=<span class="string">&quot;#000000&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;transparency&quot;</span>&gt;</span>é€æ˜åº¦ï¼š<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;range&quot;</span> <span class="attr">name</span>=<span class="string">&quot;transparency&quot;</span> <span class="attr">id</span>=<span class="string">&quot;transparency&quot;</span> <span class="attr">min</span>=<span class="string">&quot;0&quot;</span> <span class="attr">max</span>=<span class="string">&quot;255&quot;</span> <span class="attr">value</span>=<span class="string">&quot;128&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>ä¸Šä¼ å¹¶æ·»åŠ æ°´å°<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">@if (ViewBag.ImagePath != null)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>å¸¦æ°´å°çš„å›¾ç‰‡ï¼š<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;@ViewBag.ImagePath&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Watermarked Image&quot;</span> /&gt;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="Uploads-folder"><a href="#Uploads-folder" class="headerlink" title="Uploads folder"></a>Uploads folder</h1><p>Uploads</p><h1 id="Position-TranslateTransform"><a href="#Position-TranslateTransform" class="headerlink" title="Position TranslateTransform"></a>Position TranslateTransform</h1><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">HttpPost</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">async</span> Task&lt;IActionResult&gt; <span class="title">AddWatermark</span>(<span class="params">IFormFile file, <span class="built_in">string</span> watermarkText, <span class="built_in">string</span> color, <span class="built_in">int</span> transparency, <span class="built_in">string</span> position, <span class="built_in">int</span> angle</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (file != <span class="literal">null</span> &amp;&amp; file.Length &gt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// å°†ä¸Šä¼ çš„æ–‡ä»¶ä¿å­˜åˆ°æœåŠ¡å™¨</span></span><br><span class="line">            <span class="keyword">var</span> uploads = Path.Combine(_environment.WebRootPath, <span class="string">&quot;uploads&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (!Directory.Exists(uploads))</span><br><span class="line">            &#123;</span><br><span class="line">                Directory.CreateDirectory(uploads);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> filePath = Path.Combine(uploads, file.FileName);</span><br><span class="line">            <span class="keyword">using</span> (<span class="keyword">var</span> fileStream = <span class="keyword">new</span> FileStream(filePath, FileMode.Create))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">await</span> file.CopyToAsync(fileStream);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ·»åŠ æ°´å°</span></span><br><span class="line">            <span class="keyword">using</span> (Image image = Image.FromFile(filePath))</span><br><span class="line">            <span class="keyword">using</span> (Graphics g = Graphics.FromImage(image))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// è®¾ç½®æ°´å°æ–‡æœ¬çš„å­—ä½“å’Œé¢œè‰²</span></span><br><span class="line">                Font font = <span class="keyword">new</span> Font(<span class="string">&quot;Arial&quot;</span>, <span class="number">20</span>);</span><br><span class="line">                Color colorValue = ColorTranslator.FromHtml(color);</span><br><span class="line">                SolidBrush brush = <span class="keyword">new</span> SolidBrush(Color.FromArgb(transparency, colorValue.R, colorValue.G, colorValue.B));</span><br><span class="line"></span><br><span class="line">                <span class="comment">// è®¡ç®—æ°´å°ä½ç½®</span></span><br><span class="line">                PointF point = CalculateWatermarkPosition(position, image, g, watermarkText, font);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// æ—‹è½¬æ°´å°</span></span><br><span class="line">                g.TranslateTransform(point.X, point.Y);</span><br><span class="line">                g.RotateTransform(angle);</span><br><span class="line">                g.DrawString(watermarkText, font, brush, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">                g.ResetTransform();</span><br><span class="line">                </span><br><span class="line">                <span class="comment">// ä¿å­˜å¸¦æ°´å°çš„å›¾ç‰‡</span></span><br><span class="line">                <span class="keyword">var</span> newFileName = <span class="string">&quot;watermarked_&quot;</span> + file.FileName;</span><br><span class="line">                <span class="keyword">var</span> newFilePath = Path.Combine(uploads, newFileName);</span><br><span class="line">                image.Save(newFilePath, ImageFormat.Jpeg);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// è¿”å›å¸¦æ°´å°çš„å›¾ç‰‡è·¯å¾„</span></span><br><span class="line">                ViewBag.ImagePath = <span class="string">&quot;/uploads/&quot;</span> + newFileName;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> View(<span class="string">&quot;Index&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> PointF <span class="title">CalculateWatermarkPosition</span>(<span class="params"><span class="built_in">string</span> position, Image image, Graphics g, <span class="built_in">string</span> text, Font font</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        SizeF textSize = g.MeasureString(text, font);</span><br><span class="line">        <span class="built_in">float</span> x = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">float</span> y = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">switch</span> (position.ToLower())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;topleft&quot;</span>:</span><br><span class="line">                x = <span class="number">10</span>;</span><br><span class="line">                y = <span class="number">10</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;topright&quot;</span>:</span><br><span class="line">                x = image.Width - textSize.Width - <span class="number">10</span>;</span><br><span class="line">                y = <span class="number">10</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;center&quot;</span>:</span><br><span class="line">                x = (image.Width - textSize.Width) / <span class="number">2</span>;</span><br><span class="line">                y = (image.Height - textSize.Height) / <span class="number">2</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;bottomleft&quot;</span>:</span><br><span class="line">                x = <span class="number">10</span>;</span><br><span class="line">                y = image.Height - textSize.Height - <span class="number">10</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;bottomright&quot;</span>:</span><br><span class="line">                x = image.Width - textSize.Width - <span class="number">10</span>;</span><br><span class="line">                y = image.Height - textSize.Height - <span class="number">10</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> PointF(x, y);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h1 id="change-view"><a href="#change-view" class="headerlink" title="change view"></a>change view</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;position&quot;</span>&gt;</span>æ°´å°ä½ç½®ï¼š<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;position&quot;</span> <span class="attr">id</span>=<span class="string">&quot;position&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;topleft&quot;</span>&gt;</span>å·¦ä¸Š<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;topright&quot;</span>&gt;</span>å³ä¸Š<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;center&quot;</span>&gt;</span>å±…ä¸­<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;bottomleft&quot;</span>&gt;</span>å·¦ä¸‹<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;bottomright&quot;</span>&gt;</span>å³ä¸‹<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;angle&quot;</span>&gt;</span>å€¾æ–œè§’åº¦ï¼š<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">name</span>=<span class="string">&quot;angle&quot;</span> <span class="attr">id</span>=<span class="string">&quot;angle&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="multiple"><a href="#multiple" class="headerlink" title="multiple"></a>multiple</h1><!--multiple å¤šä¸ª--><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[<span class="meta">HttpPost</span>]</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">async</span> Task&lt;IActionResult&gt; <span class="title">AddWatermarkMore</span>(<span class="params">List&lt;IFormFile&gt; files, <span class="built_in">string</span> watermarkText, <span class="built_in">string</span> color, <span class="built_in">int</span> transparency, <span class="built_in">string</span> position, <span class="built_in">int</span> angle</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> watermarkedPaths = <span class="keyword">new</span> List&lt;<span class="built_in">string</span>&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">foreach</span> (<span class="keyword">var</span> file <span class="keyword">in</span> files)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (file != <span class="literal">null</span> &amp;&amp; file.Length &gt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// å°†ä¸Šä¼ çš„æ–‡ä»¶ä¿å­˜åˆ°æœåŠ¡å™¨</span></span><br><span class="line">            <span class="keyword">var</span> uploads = Path.Combine(_environment.WebRootPath, <span class="string">&quot;uploads&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (!Directory.Exists(uploads))</span><br><span class="line">            &#123;</span><br><span class="line">                Directory.CreateDirectory(uploads);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// ç”ŸæˆåŸºäºæ—¶é—´æˆ³å’Œéšæœºæ•°çš„æ–‡ä»¶å</span></span><br><span class="line">            <span class="keyword">var</span> fileName = <span class="string">$&quot;<span class="subst">&#123;DateTime.Now:yyyyMMddHHmmss&#125;</span>_<span class="subst">&#123;Guid.NewGuid().ToString().Substring(<span class="number">0</span>, <span class="number">8</span>)&#125;</span><span class="subst">&#123;Path.GetExtension(file.FileName)&#125;</span>&quot;</span>;</span><br><span class="line">            <span class="keyword">var</span> filePath = Path.Combine(uploads, fileName);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">using</span> (<span class="keyword">var</span> fileStream = <span class="keyword">new</span> FileStream(filePath, FileMode.Create))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">await</span> file.CopyToAsync(fileStream);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ·»åŠ æ°´å°</span></span><br><span class="line">            <span class="keyword">using</span> (Image image = Image.FromFile(filePath))</span><br><span class="line">            <span class="keyword">using</span> (Graphics g = Graphics.FromImage(image))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// è®¾ç½®æ°´å°æ–‡æœ¬çš„å­—ä½“å’Œé¢œè‰²</span></span><br><span class="line">                Font font = <span class="keyword">new</span> Font(<span class="string">&quot;Arial&quot;</span>, <span class="number">20</span>);</span><br><span class="line">                Color colorValue = ColorTranslator.FromHtml(color);</span><br><span class="line">                SolidBrush brush = <span class="keyword">new</span> SolidBrush(Color.FromArgb(transparency, colorValue.R, colorValue.G, colorValue.B));</span><br><span class="line"></span><br><span class="line">                <span class="comment">// è®¡ç®—æ°´å°ä½ç½®</span></span><br><span class="line">                PointF point = CalculateWatermarkPosition(position, image, g, watermarkText, font);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// æ—‹è½¬æ°´å°</span></span><br><span class="line">                g.TranslateTransform(point.X, point.Y);</span><br><span class="line">                g.RotateTransform(angle);</span><br><span class="line">                g.DrawString(watermarkText, font, brush, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">                g.ResetTransform();</span><br><span class="line"></span><br><span class="line">                <span class="comment">// ä¿å­˜å¸¦æ°´å°çš„å›¾ç‰‡</span></span><br><span class="line">                <span class="keyword">var</span> newFileName = <span class="string">$&quot;watermarked_<span class="subst">&#123;fileName&#125;</span>&quot;</span>;</span><br><span class="line">                <span class="keyword">var</span> newFilePath = Path.Combine(uploads, newFileName);</span><br><span class="line">                image.Save(newFilePath, ImageFormat.Jpeg);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// æ·»åŠ æ°´å°è·¯å¾„åˆ°åˆ—è¡¨</span></span><br><span class="line">                watermarkedPaths.Add(<span class="string">&quot;/uploads/&quot;</span> + newFileName);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ViewBag.ImagePaths = watermarkedPaths;</span><br><span class="line">    <span class="keyword">return</span> View(<span class="string">&quot;Index&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="change-view-1"><a href="#change-view-1" class="headerlink" title="change view"></a>change view</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>å›¾ç‰‡åŠ æ°´å°<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/Home/AddWatermark&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;files&quot;</span>&gt;</span>é€‰æ‹©å›¾ç‰‡ï¼š<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;files&quot;</span> <span class="attr">id</span>=<span class="string">&quot;files&quot;</span> <span class="attr">multiple</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;watermarkText&quot;</span>&gt;</span>æ°´å°æ–‡å­—ï¼š<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;watermarkText&quot;</span> <span class="attr">id</span>=<span class="string">&quot;watermarkText&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;color&quot;</span>&gt;</span>æ°´å°é¢œè‰²ï¼š<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;color&quot;</span> <span class="attr">name</span>=<span class="string">&quot;color&quot;</span> <span class="attr">id</span>=<span class="string">&quot;color&quot;</span> <span class="attr">value</span>=<span class="string">&quot;#000000&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;transparency&quot;</span>&gt;</span>é€æ˜åº¦ï¼š<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;range&quot;</span> <span class="attr">name</span>=<span class="string">&quot;transparency&quot;</span> <span class="attr">id</span>=<span class="string">&quot;transparency&quot;</span> <span class="attr">min</span>=<span class="string">&quot;0&quot;</span> <span class="attr">max</span>=<span class="string">&quot;255&quot;</span> <span class="attr">value</span>=<span class="string">&quot;128&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;position&quot;</span>&gt;</span>æ°´å°ä½ç½®ï¼š<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;position&quot;</span> <span class="attr">id</span>=<span class="string">&quot;position&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;topleft&quot;</span>&gt;</span>å·¦ä¸Š<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;topright&quot;</span>&gt;</span>å³ä¸Š<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;center&quot;</span>&gt;</span>å±…ä¸­<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;bottomleft&quot;</span>&gt;</span>å·¦ä¸‹<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;bottomright&quot;</span>&gt;</span>å³ä¸‹<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;angle&quot;</span>&gt;</span>å€¾æ–œè§’åº¦ï¼š<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">name</span>=<span class="string">&quot;angle&quot;</span> <span class="attr">id</span>=<span class="string">&quot;angle&quot;</span> <span class="attr">value</span>=<span class="string">&quot;0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>ä¸Šä¼ å¹¶æ·»åŠ æ°´å°<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line">@if (ViewBag.ImagePaths != null)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>å¸¦æ°´å°çš„å›¾ç‰‡ï¼š<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    @foreach (var imagePath in ViewBag.ImagePaths)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;@imagePath&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;Watermarked Image&quot;</span> <span class="attr">style</span>=<span class="string">&quot;max-width: 100%; height: auto;&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> .NET </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>.NET Dockerhub</title>
      <link href="/2024/06/01/NET-Dockerhub/"/>
      <url>/2024/06/01/NET-Dockerhub/</url>
      
        <content type="html"><![CDATA[<h1 id="ğŸ“šDockerfile"><a href="#ğŸ“šDockerfile" class="headerlink" title="ğŸ“šDockerfile"></a>ğŸ“šDockerfile</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">FROM mcr.microsoft.com/dotnet/sdk:8.0 AS build</span><br><span class="line">WORKDIR /src</span><br><span class="line">COPY [<span class="string">&quot;MyMvcApp.csproj&quot;</span>, <span class="string">&quot;./&quot;</span>]</span><br><span class="line">RUN dotnet restore <span class="string">&quot;MyMvcApp.csproj&quot;</span></span><br><span class="line">COPY . .</span><br><span class="line">WORKDIR <span class="string">&quot;/src/&quot;</span></span><br><span class="line">RUN dotnet build <span class="string">&quot;MyMvcApp.csproj&quot;</span> -c Release -o /app/build</span><br><span class="line"></span><br><span class="line">FROM build AS publish</span><br><span class="line">RUN dotnet publish <span class="string">&quot;MyMvcApp.csproj&quot;</span> -c Release -o /app/publish</span><br><span class="line"></span><br><span class="line">FROM base AS final</span><br><span class="line">WORKDIR /app</span><br><span class="line">COPY --from=publish /app/publish .</span><br><span class="line">ENTRYPOINT [<span class="string">&quot;dotnet&quot;</span>, <span class="string">&quot;MyMvcApp.dll&quot;</span>]</span><br></pre></td></tr></table></figure><h1 id="âœï¸-Docker-é•œåƒ"><a href="#âœï¸-Docker-é•œåƒ" class="headerlink" title="âœï¸ Docker é•œåƒ"></a>âœï¸ Docker é•œåƒ</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t mymvcapp:latest .</span><br></pre></td></tr></table></figure><h1 id="ğŸ“åœ¨-Docker-Hub-ä¸Šåˆ›å»ºä»“åº“"><a href="#ğŸ“åœ¨-Docker-Hub-ä¸Šåˆ›å»ºä»“åº“" class="headerlink" title="ğŸ“åœ¨ Docker Hub ä¸Šåˆ›å»ºä»“åº“"></a>ğŸ“åœ¨ Docker Hub ä¸Šåˆ›å»ºä»“åº“</h1><p>ç™»å½• Docker Hub (<a href="https://hub.docker.com)./">https://hub.docker.com)ã€‚</a><br>ç‚¹å‡» â€œCreate Repositoryâ€ã€‚<br>è¾“å…¥ä»“åº“åç§°ï¼Œä¾‹å¦‚ mymvcappï¼Œç„¶åç‚¹å‡» â€œCreateâ€ã€‚</p><h1 id="ğŸ’»å°†-Docker-é•œåƒæ¨é€åˆ°-Docker-Hub"><a href="#ğŸ’»å°†-Docker-é•œåƒæ¨é€åˆ°-Docker-Hub" class="headerlink" title="ğŸ’»å°† Docker é•œåƒæ¨é€åˆ° Docker Hub"></a>ğŸ’»å°† Docker é•œåƒæ¨é€åˆ° Docker Hub</h1><p>é¦–å…ˆï¼Œç™»å½• Docker Hubï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker login</span><br></pre></td></tr></table></figure><h1 id="ğŸ“…æ ‡è®°é•œåƒ"><a href="#ğŸ“…æ ‡è®°é•œåƒ" class="headerlink" title="ğŸ“…æ ‡è®°é•œåƒ"></a>ğŸ“…æ ‡è®°é•œåƒ</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker tag mymvcapp:latest &lt;your-dockerhub-username&gt;/mymvcapp:latest</span><br></pre></td></tr></table></figure><h1 id="ğŸ“Šæ¨é€é•œåƒåˆ°-Docker-Hub"><a href="#ğŸ“Šæ¨é€é•œåƒåˆ°-Docker-Hub" class="headerlink" title="ğŸ“Šæ¨é€é•œåƒåˆ° Docker Hub"></a>ğŸ“Šæ¨é€é•œåƒåˆ° Docker Hub</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push &lt;your-dockerhub-username&gt;/mymvcapp:latest</span><br></pre></td></tr></table></figure><p><your-dockerhub-username> &#x3D; Docker Hub ç”¨æˆ·å</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 80:80 &lt;your-dockerhub-username&gt;/mymvcapp:latest</span><br></pre></td></tr></table></figure><h1 id="ğŸ“å®Œæ•´æµç¨‹å›é¡¾"><a href="#ğŸ“å®Œæ•´æµç¨‹å›é¡¾" class="headerlink" title="ğŸ“å®Œæ•´æµç¨‹å›é¡¾"></a>ğŸ“å®Œæ•´æµç¨‹å›é¡¾</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åˆ›å»º .NET 8 MVC åº”ç”¨ç¨‹åºã€‚</span></span><br><span class="line"><span class="comment">#åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º Dockerfileã€‚</span></span><br><span class="line"><span class="comment">#æ„å»º Docker é•œåƒï¼š</span></span><br><span class="line">docker build -t mymvcapp:latest .</span><br><span class="line"><span class="comment">#åœ¨ Docker Hub ä¸Šåˆ›å»ºä»“åº“ã€‚</span></span><br><span class="line"><span class="comment">#ç™»å½• Docker Hubï¼š</span></span><br><span class="line">docker login</span><br><span class="line"><span class="comment">#æ ‡è®°å¹¶æ¨é€ Docker é•œåƒåˆ° Docker Hubï¼š</span></span><br><span class="line">docker tag mymvcapp:latest &lt;your-dockerhub-username&gt;/mymvcapp:latest</span><br><span class="line">docker push &lt;your-dockerhub-username&gt;/mymvcapp:latest</span><br><span class="line"><span class="comment">#åœ¨æœ¬åœ°æˆ–æœåŠ¡å™¨ä¸Šè¿è¡Œ Docker é•œåƒï¼š</span></span><br><span class="line">docker run -d -p 80:80 &lt;your-dockerhub-username&gt;/mymvcapp:latest</span><br><span class="line"><span class="comment">#é€šè¿‡è¿™äº›æ­¥éª¤ï¼Œå°† .NET 8 MVC éƒ¨ç½²åˆ° Docker Hub å¹¶è¿è¡Œå®ƒ~~</span></span><br></pre></td></tr></table></figure><p>err denied requested access to the resource is denied</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">logout</span></span><br><span class="line">docker login</span><br></pre></td></tr></table></figure><p>err error response from deamon:get â€œ<a href="https://registry-1.docket.io/v2/%22:unauthorized:incorrect">https://registry-1.docket.io/v2/&quot;:unauthorized:incorrect</a> username or password<br>ç”¨æˆ·å¯†ç é”™è¯¯</p><p><a href="https://docs.docker.com/go/access-tokens">https://docs.docker.com/go/access-tokens</a><br><a href="https://docs.docker.com/security/for-developers/access-tokens/#create-an-access-token">https://docs.docker.com/security/for-developers/access-tokens/#create-an-access-token</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker login  -u qxxx</span><br><span class="line">dckr_pat_o0ZpPxxx</span><br><span class="line"></span><br><span class="line">docker tag mymvcapp:latest xx/mymvcapp:dev</span><br><span class="line">docker push  &lt;your-dockerhub-username&gt;/mymvcapp:dev</span><br></pre></td></tr></table></figure><p>æ¨é€æˆåŠŸåå¯ä»¥åœ¨hubä»“åº“æŸ¥çœ‹</p><p>è¿è¡Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 18081:8080 -p 18082:8081 --name mywebmvcapp mymvcapp:latest</span><br></pre></td></tr></table></figure><p>END</p><!--# ğŸ’¼é€šè¿‡VSæ‰“åŒ…å‘å¸ƒé¡¹ç›®å³é”®-å‘å¸ƒç”¨æˆ·åå¯†ç æ‰§è¡Œå‘å¸ƒæ¨é€æˆåŠŸåå¯ **docker run username/mymvcapp:latest** è¿è¡Œdocker desktop push![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/direct/1dc65cc259ee4815b1fb8d0e1ce472bb.png)docker curl -fsSL https://get.docker.com -o get-docker.sh sudo sh get-docker.shmysqldocker run -d --name mysql-container -e TZ=UTC -p 30306:3306 -e MYSQL_ROOT_PASSWORD=123123 mysql:8.0.36-debian119.23.182.163 8080docker run --name myadmin -d --link mysql-container:db -p 18083:80 phpmyadmin/phpmyadminsudo apt update è·å– Microsoft å¯†é’¥å’Œæºwget https://packages.microsoft.com/config/ubuntu/20.04/packages-microsoft-prod.deb -O packages-microsoft-prod.debsudo dpkg -i packages-microsoft-prod.deb#æ›´æ–°åŒ…ç´¢å¼•å¹¶å®‰è£… .NET SDKsudo apt-get updatesudo apt-get install -y dotnet-sdk-8.0copy dotnet run xxxdocker pushhttps://docs.docker.com/go/access-tokens https://docs.docker.com/security/for-developers/access-tokens/#create-an-access-tokendocker login  -u qxxxdckr_pat_o0ZpPxxxdocker tag mymvcapp:latest xx/mymvcapp:latestdocker push  <your-dockerhub-username>/mymvcapp:latestdocker run -d -p 18081:8080 -p 18082:8081 --name webapp q422073304/webmvc:devnot ok  docker rm -f webapp xxx docker imagesdocker login  -u q422073304docker run -d -p 18081:8080 -p 18082:8081 --name webapp1 q422073304/webmvcdckr_pat_FBv68qAtAPbH3gRqZgCuzoGxIiM docker rmi q422073304/webmvc:devdocker run -d -p 123:8080 -p 124:8081 -e DOTNET_USE_POLLING_FILE_WATCHER=1  -e ASPNETCORE_HTTP_PORTS=8080 -e DOTNET_RUNNING_IN_CONTAINER=true -e DOTNET_VERSION=8.0.5 -e ASPNET_VERSION=8.0.5  --name webaa q422073304/webmvcdocker run -d --name WebMvc_2 -e NUGET_PACKAGES=/.nuget/fallbackpackages2 -e NUGET_FALLBACK_PACKAGES=/.nuget/fallbackpackages;/.nuget/fallbackpackages2  -e ASPNETCORE_LOGGING__CONSOLE__DISABLECOLORS=true ASPNETCORE_ENVIRONMENT=Development -e DOTNET_USE_POLLING_FILE_WATCHER=1 -e APP_UID=1654 -e ASPNETCORE_HTTP_PORTS=8080 -e DOTNET_RUNNING_IN_CONTAINER=true -e DOTNET_VERSION=8.0.5 -e ASPNET_VERSION=8.0.5 -p 18081:8080  -p 18082:8081  q422073304/webmvc:latesthttps://www.cnblogs.com/hudean/p/18020909-->]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> .NET </tag>
            
            <tag> Dockerhub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>.NET Redis 10s Rate Limiter Sliding Window Algorithm</title>
      <link href="/2024/05/31/NET-Redis-RateLimiter/"/>
      <url>/2024/05/31/NET-Redis-RateLimiter/</url>
      
        <content type="html"><![CDATA[<p>åœ¨.NETä¸­ä½¿ç”¨Redisæ¥é™åˆ¶æ¥å£è¯·æ±‚é¢‘ç‡ï¼ˆæ¯10ç§’åªå…è®¸è¯·æ±‚ä¸€æ¬¡ï¼‰</p><p><strong>NuGet setup</strong><br>StackExchange.Redis </p><p><strong>å®ç°é€Ÿç‡é™åˆ¶é€»è¾‘</strong>ï¼š<br>åœ¨ä½ çš„æ§åˆ¶å™¨æˆ–æœåŠ¡å±‚ä¸­ï¼Œä½ éœ€è¦ç¼–å†™ä¸€ä¸ªæ–¹æ³•æ¥æ£€æŸ¥å¹¶æ›´æ–°Redisä¸­çš„é€Ÿç‡é™åˆ¶è®¡æ•°å™¨ã€‚<br><strong>è®¾ç½®Redisé”®</strong>ï¼š<br>ä¸ºæ¯ä¸ªç”¨æˆ·æˆ–æ¯ä¸ªIPåœ°å€ï¼ˆå–å†³äºä½ çš„éœ€æ±‚ï¼‰è®¾ç½®ä¸€ä¸ªå”¯ä¸€çš„é”®ã€‚è¿™ä¸ªé”®å°†ç”¨äºå­˜å‚¨æœ€åä¸€æ¬¡è¯·æ±‚çš„æ—¶é—´æˆ³å’Œ&#x2F;æˆ–è¯·æ±‚è®¡æ•°ã€‚<br><strong>æ£€æŸ¥æ—¶é—´æˆ³</strong>ï¼š<br>å½“è¯·æ±‚åˆ°è¾¾æ—¶ï¼Œä»Redisä¸­è·å–è¯¥é”®çš„å€¼ï¼ˆæ—¶é—´æˆ³ï¼‰ã€‚å¦‚æœé”®ä¸å­˜åœ¨æˆ–æ—¶é—´æˆ³è¶…è¿‡10ç§’ï¼Œåˆ™å…è®¸è¯·æ±‚å¹¶æ›´æ–°é”®çš„å€¼ï¼ˆè®¾ç½®ä¸ºå½“å‰æ—¶é—´æˆ³ï¼‰ã€‚<br><strong>å¤„ç†è¶…è¿‡é€Ÿç‡çš„è¯·æ±‚</strong>ï¼š<br>å¦‚æœæ—¶é—´æˆ³åœ¨10ç§’å†…ï¼Œåˆ™æ‹’ç»æˆ–é™åˆ¶è¯¥è¯·æ±‚ï¼ˆè¿”å›é™åˆ¶çŠ¶æ€ç ï¼‰ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> Lazy&lt;ConnectionMultiplexer&gt; LazyConnection = <span class="keyword">new</span> Lazy&lt;ConnectionMultiplexer&gt;(() =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// é…ç½®Redisè¿æ¥å­—ç¬¦ä¸² &quot;localhost,abortConnect=false&quot;  </span></span><br><span class="line">    <span class="keyword">return</span> ConnectionMultiplexer.Connect(<span class="string">&quot;localhost:6379&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> ConnectionMultiplexer Connection =&gt; LazyConnection.Value;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> IDatabase Db =&gt; Connection.GetDatabase();</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">async</span> Task&lt;ActionResult&gt; <span class="title">MyAction</span>()</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    IPAddress clientIpAddress = HttpContext.Connection.RemoteIpAddress;</span><br><span class="line">    <span class="built_in">string</span> ipAddress = clientIpAddress.ToString();</span><br><span class="line">    <span class="built_in">string</span> redisKey = <span class="string">$&quot;rate-limit:<span class="subst">&#123;ipAddress&#125;</span>&quot;</span>; <span class="comment">// æ„å»ºRedisé”®å  </span></span><br><span class="line">  </span><br><span class="line">    <span class="comment">// è·å–å½“å‰æ—¶é—´æˆ³ï¼ˆå¯ä»¥æ˜¯Unixæ—¶é—´æˆ³æˆ–ä»»ä½•ä½ é€‰æ‹©çš„æ ¼å¼ï¼‰  </span></span><br><span class="line">    <span class="built_in">long</span> currentTimestamp = DateTimeOffset.UtcNow.ToUnixTimeSeconds();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°è¯•ä»Redisè·å–æ—¶é—´æˆ³  </span></span><br><span class="line">    <span class="keyword">var</span> redisValue = <span class="keyword">await</span> Db.StringGetAsync(redisKey);</span><br><span class="line">    <span class="built_in">long</span> lastTimestamp = redisValue.HasValue ? (<span class="built_in">long</span>)redisValue : <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ£€æŸ¥æ˜¯å¦è¶…è¿‡10ç§’  </span></span><br><span class="line">    <span class="keyword">if</span> (currentTimestamp - lastTimestamp &gt;= <span class="number">10</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœè¶…è¿‡10ç§’ï¼Œåˆ™å…è®¸è¯·æ±‚å¹¶æ›´æ–°Redisé”®  </span></span><br><span class="line">        <span class="keyword">await</span> Db.StringSetAsync(redisKey, currentTimestamp, TimeSpan.FromSeconds(<span class="number">10</span>)); <span class="comment">// è®¾ç½®é”®çš„è¿‡æœŸæ—¶é—´ä¸º10ç§’  </span></span><br><span class="line">                                                                                     </span><br><span class="line">        <span class="keyword">return</span> Content(<span class="string">&quot;Request allowed.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœæœªè¶…è¿‡10ç§’ï¼Œåˆ™æ‹’ç»è¯·æ±‚  </span></span><br><span class="line">        HttpResponseMessage response = <span class="keyword">new</span> HttpResponseMessage(HttpStatusCode.TooManyRequests)</span><br><span class="line">        &#123;</span><br><span class="line">            ReasonPhrase = <span class="string">&quot;Too Many Requests&quot;</span>,</span><br><span class="line">            Content = <span class="keyword">new</span> StringContent(<span class="string">&quot;Rate limit exceeded. Please try again later.&quot;</span>)</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// å¤„ç†è¯·æ±‚</span></span><br><span class="line">        <span class="keyword">return</span> Content(<span class="string">&quot;Please try again later. &quot;</span>);<span class="comment">// throw new HttpResponseException(response); // æˆ–è€…è¿”å›è‡ªå®šä¹‰çš„ActionResult  </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>æ‰©å±•ä¸ºå‚æ•°</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MyAction(<span class="built_in">string</span> p)</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"><span class="built_in">string</span> redisKey = <span class="string">$&quot;rate-limit:<span class="subst">&#123;p&#125;</span>&quot;</span>;</span><br></pre></td></tr></table></figure><p>è¯·æ±‚<br>&#x2F;MyAction?p&#x3D;2<br>&#x2F;MyAction?p&#x3D;3</p><h1 id="æ»‘åŠ¨çª—å£ç®—æ³•"><a href="#æ»‘åŠ¨çª—å£ç®—æ³•" class="headerlink" title="æ»‘åŠ¨çª—å£ç®—æ³•"></a>æ»‘åŠ¨çª—å£ç®—æ³•</h1><p>æ»‘åŠ¨çª—å£ç®—æ³•ï¼ˆSliding Window Algorithmï¼‰æ˜¯ä¸€ç§ç”¨äºè§£å†³å­—ç¬¦ä¸²&#x2F;æ•°ç»„ é—®é¢˜çš„ç®—æ³•ï¼Œå®ƒé€šè¿‡ç»´æŠ¤ä¸€ä¸ªçª—å£ï¼ˆå³ä¸€ä¸ªè¿ç»­çš„å­ä¸²æˆ–å­æ•°ç»„ï¼‰ï¼Œå¹¶åœ¨å­—ç¬¦ä¸²æˆ–æ•°ç»„ä¸Šæ»‘åŠ¨è¿™ä¸ªçª—å£æ¥å¯»æ‰¾æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„å­ä¸²æˆ–å­æ•°ç»„ã€‚ä»¥ä¸‹æ˜¯æ»‘åŠ¨çª—å£ç®—æ³•çš„ä¸»è¦å†…å®¹å’Œç‰¹ç‚¹ï¼š</p><p><strong>ç»´æŠ¤çª—å£</strong>ï¼šé€šè¿‡ä¸¤ä¸ªæŒ‡é’ˆï¼ˆå·¦æŒ‡é’ˆå’Œå³æŒ‡é’ˆï¼‰æ¥å®šä¹‰çª—å£çš„è¾¹ç•Œã€‚<br><strong>ç§»åŠ¨çª—å£</strong>ï¼šé€šè¿‡ç§»åŠ¨å³æŒ‡é’ˆæ¥æ‰©å±•çª—å£ï¼ŒåŒæ—¶æ ¹æ®é—®é¢˜çš„è¦æ±‚è°ƒæ•´å·¦æŒ‡é’ˆæ¥ç¼©å°çª—å£ã€‚<br><strong>æ›´æ–°ä¿¡æ¯</strong>ï¼šåœ¨çª—å£æ»‘åŠ¨çš„è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®éœ€è¦æ›´æ–°ä¸€äº›æ•°æ®ç»“æ„ï¼ˆå¦‚å“ˆå¸Œè¡¨ï¼‰æ¥ä¿å­˜æ‰€éœ€çš„ä¿¡æ¯ã€‚</p><p><strong>å®ç°æ–¹æ³•</strong><br>æ­¥éª¤1.åˆå§‹åŒ–ï¼šå®šä¹‰å·¦æŒ‡é’ˆå’Œå³æŒ‡é’ˆï¼Œå¹¶åˆå§‹åŒ–å®ƒä»¬çš„ä½ç½®ã€‚<br>æ­¥éª¤2.æ‰©å±•çª—å£ï¼šå‘å³ç§»åŠ¨å³æŒ‡é’ˆï¼Œæ‰©å±•çª—å£ï¼ŒåŒæ—¶æ›´æ–°æ‰€éœ€çš„ä¿¡æ¯ï¼ˆå¦‚å­—ç¬¦é¢‘ç‡çš„å“ˆå¸Œè¡¨ï¼‰ã€‚<br>æ­¥éª¤3.æ£€æŸ¥æ¡ä»¶ï¼šå½“çª—å£æ»¡è¶³ç‰¹å®šæ¡ä»¶æ—¶ï¼Œå¼€å§‹æ”¶ç¼©çª—å£ã€‚<br>æ­¥éª¤4.æ”¶ç¼©çª—å£ï¼šå‘å³ç§»åŠ¨å·¦æŒ‡é’ˆï¼Œç¼©å°çª—å£ï¼ŒåŒæ—¶æ›´æ–°æ‰€éœ€çš„ä¿¡æ¯ã€‚<br>æ­¥éª¤5.æ›´æ–°æœ€ä¼˜è§£ï¼šåœ¨æ”¶ç¼©çª—å£çš„è¿‡ç¨‹ä¸­ï¼Œä¸æ–­æ›´æ–°æœ€ä¼˜è§£ï¼ˆå¦‚æœ€é•¿å­ä¸²ã€æœ€çŸ­å­ä¸²ç­‰ï¼‰ã€‚<br>é‡å¤æ­¥éª¤ï¼šé‡å¤æ­¥éª¤2åˆ°æ­¥éª¤5ï¼Œç›´åˆ°å³æŒ‡é’ˆåˆ°è¾¾å­—ç¬¦ä¸²æˆ–æ•°ç»„çš„æœ«å°¾ã€‚</p><p>åœ¨Redisä¸­ç»´æŠ¤ä¸€ä¸ªçª—å£å†…çš„è¯·æ±‚æ—¶é—´æˆ³åˆ—è¡¨ï¼Œè€Œä¸æ˜¯ä»…ä»…å­˜å‚¨æœ€åä¸€æ¬¡è¯·æ±‚çš„æ—¶é—´æˆ³ã€‚</p><p>æˆ‘ä»¬ä»Redisä¸­è·å–å­˜å‚¨çš„æ—¶é—´æˆ³åˆ—è¡¨ã€‚<br>ç§»é™¤è¶…è¿‡çª—å£å¤§å°çš„æ—¶é—´æˆ³ã€‚<br>æ£€æŸ¥å‰©ä½™çš„æ—¶é—´æˆ³æ•°æ˜¯å¦è¶…è¿‡äº†æœ€å¤§è¯·æ±‚æ•° MaxRequestsã€‚<br>å¦‚æœè¶…è¿‡ï¼Œåˆ™è¿”å›è¶…è¿‡çš„å“åº”ï¼›å¦åˆ™ï¼Œè®°å½•å½“å‰æ—¶é—´æˆ³å¹¶å…è®¸è¯·æ±‚ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">const</span> <span class="built_in">int</span> MaxRequests = <span class="number">5</span>; <span class="comment">// æœ€å¤§è¯·æ±‚æ•°</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">const</span> <span class="built_in">int</span> WindowSizeInSeconds = <span class="number">10</span>; <span class="comment">// çª—å£å¤§å°ï¼ˆç§’ï¼‰</span></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"></span><br><span class="line">         <span class="comment">// è·å–Redisä¸­å­˜å‚¨çš„æ—¶é—´æˆ³åˆ—è¡¨</span></span><br><span class="line">         <span class="keyword">var</span> redisValue = <span class="keyword">await</span> Db.ListRangeAsync(redisKey);</span><br><span class="line">         <span class="keyword">var</span> timestamps = redisValue.Select(<span class="keyword">value</span> =&gt; (<span class="built_in">long</span>)<span class="keyword">value</span>).ToList();</span><br><span class="line"></span><br><span class="line">         <span class="comment">// ç§»é™¤çª—å£ä¹‹å¤–çš„æ—¶é—´æˆ³</span></span><br><span class="line">         timestamps = timestamps.Where(timestamp =&gt; currentTimestamp - timestamp &lt;= WindowSizeInSeconds).ToList();</span><br><span class="line"></span><br><span class="line">         <span class="keyword">if</span> (timestamps.Count &gt;= MaxRequests)</span><br><span class="line">         &#123;</span><br><span class="line">             <span class="comment">// å¦‚æœè¯·æ±‚æ•°è¶…è¿‡é™åˆ¶ï¼Œåˆ™æ‹’ç»è¯·æ±‚</span></span><br><span class="line">             HttpResponseMessage response = <span class="keyword">new</span> HttpResponseMessage(HttpStatusCode.TooManyRequests)</span><br><span class="line">             &#123;</span><br><span class="line">                 ReasonPhrase = <span class="string">&quot;Too Many Requests&quot;</span>,</span><br><span class="line">                 Content = <span class="keyword">new</span> StringContent(<span class="string">&quot;Rate limit exceeded. Please try again later.&quot;</span>)</span><br><span class="line">             &#125;;</span><br><span class="line">             <span class="keyword">return</span> Content(<span class="string">&quot;Please try again later.&quot;</span>);</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">else</span></span><br><span class="line">         &#123;</span><br><span class="line">             <span class="comment">// å¦‚æœè¯·æ±‚æ•°æœªè¶…è¿‡é™åˆ¶ï¼Œåˆ™å…è®¸è¯·æ±‚å¹¶è®°å½•å½“å‰æ—¶é—´æˆ³</span></span><br><span class="line">             timestamps.Add(currentTimestamp);</span><br><span class="line">             <span class="keyword">await</span> Db.ListRightPushAsync(redisKey, timestamps.Select(timestamp =&gt; (RedisValue)timestamp).ToArray());</span><br><span class="line">             <span class="keyword">await</span> Db.KeyExpireAsync(redisKey, TimeSpan.FromSeconds(WindowSizeInSeconds)); <span class="comment">// è®¾ç½®é”®çš„è¿‡æœŸæ—¶é—´ä¸ºçª—å£å¤§å°</span></span><br><span class="line"></span><br><span class="line">             <span class="keyword">return</span> Content(<span class="string">&quot;Request allowed.&quot;</span>);</span><br><span class="line">         &#125;</span><br></pre></td></tr></table></figure><!--è®¡æ•°å™¨ å›ºå®šçª—å£ç®—æ³•ä»¤ç‰Œæ¡¶ç®—æ³•ï¼ˆToken Bucket Algorithmï¼‰æ¼æ¡¶ç®—æ³•ï¼ˆLeaky Bucket Algorithmï¼‰-->]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> .NET </tag>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>.NET RocketMQ</title>
      <link href="/2024/05/29/NET-RocketMQ/"/>
      <url>/2024/05/29/NET-RocketMQ/</url>
      
        <content type="html"><![CDATA[<p><strong>RocketMQ</strong> æ˜¯ä¸€æ¬¾ç”±é˜¿é‡Œå·´å·´é›†å›¢å¼€å‘å¹¶å¼€æºç»™Apacheè½¯ä»¶åŸºé‡‘ä¼šçš„åˆ†å¸ƒå¼æ¶ˆæ¯åŠæµå¤„ç†å¹³å°ã€‚ä»¥å…¶é«˜ååé‡ã€ä½å»¶è¿Ÿã€é«˜å¯ç”¨æ€§ç­‰ç‰¹ç‚¹è€Œå¹¿å—æ¬¢è¿ã€‚æ”¯æŒJavaï¼ŒC++, Python, Go, .NETç­‰ã€‚</p><p><strong>å¼‚æ­¥è§£è€¦</strong>ï¼šå¯ä»¥å®ç°ä¸Šæ¸¸å’Œä¸‹æ¸¸ä¸šåŠ¡ç³»ç»Ÿçš„æ¾è€¦åˆè®¾è®¡ï¼Œä½¿å¾—æœåŠ¡éƒ¨åˆ†èŠ‚ç‚¹å¼‚å¸¸ä¸ä¼šå½±å“åˆ°æ ¸å¿ƒäº¤æ˜“ç³»ç»Ÿçš„æ­£å¸¸è¿è½¬ã€‚åœ¨ç”µå•†ã€é‡‘èç­‰åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œè¿™ç§è§£è€¦è®¾è®¡å°¤ä¸ºé‡è¦ã€‚<br><strong>å‰Šå³°å¡«è°·</strong>ï¼šåœ¨å¦‚ç§’æ€ã€å¤§ä¿ƒç­‰å¤§å‹æ´»åŠ¨ä¸­ï¼Œç³»ç»Ÿä¼šé¢ä¸´å·¨å¤§çš„æµé‡å†²å‡»ã€‚RocketMQåˆ©ç”¨å…¶é«˜æ€§èƒ½çš„æ¶ˆæ¯å¤„ç†èƒ½åŠ›ï¼Œå¯ä»¥æœ‰æ•ˆåœ°åº”å¯¹è¿™ç§æµé‡å†²å‡»ï¼Œä¿è¯ç³»ç»Ÿçš„ç¨³å®šè¿è¡Œã€‚<br><strong>é¡ºåºæ¶ˆæ¯</strong>ï¼šæ”¯æŒé¡ºåºæ¶ˆæ¯ï¼ˆåˆ†åŒºæœ‰åºï¼‰ï¼Œå¯ä»¥ç¡®ä¿æ¶ˆæ¯çš„å…ˆè¿›å…ˆå‡ºã€‚è¿™åœ¨äº¤æ˜“ç³»ç»Ÿä¸­çš„è®¢å•åˆ›å»ºã€æ”¯ä»˜ã€é€€æ¬¾ç­‰æµç¨‹ä¸­å°¤ä¸ºé‡è¦ï¼Œå› ä¸ºè¿™äº›æµç¨‹å¯¹æ¶ˆæ¯çš„é¡ºåºæœ‰ä¸¥æ ¼è¦æ±‚ã€‚<br><strong>åˆ†å¸ƒå¼äº‹åŠ¡æ¶ˆæ¯</strong>ï¼šæ”¯æŒåˆ†å¸ƒå¼äº‹åŠ¡æ¶ˆæ¯ï¼Œå¯ä»¥ä¿è¯åˆ†å¸ƒå¼äº‹åŠ¡çš„å¼ºä¸€è‡´æ€§ã€‚è¿™åœ¨æ¶‰åŠå¤šä¸ªæœåŠ¡çš„åˆ†å¸ƒå¼ç³»ç»Ÿä¸­éå¸¸æœ‰ç”¨ï¼Œå¯ä»¥ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ã€‚</p><p><strong>RocketMQä¼˜ç‚¹</strong><br><strong>é«˜ååé‡å’Œä½å»¶è¿Ÿ</strong>ï¼šèƒ½å¤Ÿå¤„ç†å¤§è§„æ¨¡æ¶ˆæ¯æµï¼Œå¹¶æä¾›ä½å»¶è¿Ÿçš„æ¶ˆæ¯ä¼ é€’ã€‚è¿™ä½¿å¾—å®ƒéå¸¸é€‚åˆå¤„ç†é«˜å¹¶å‘çš„åº”ç”¨åœºæ™¯ï¼Œå¦‚ç”µå­å•†åŠ¡å’Œé‡‘èäº¤æ˜“ç³»ç»Ÿã€‚<br><strong>å¯é æ€§</strong>ï¼šå…·æœ‰é«˜åº¦å¯é çš„æ¶ˆæ¯ä¼ é€’æœºåˆ¶ã€‚å®ƒæ”¯æŒæ¶ˆæ¯æŒä¹…åŒ–å’Œå¤åˆ¶ï¼Œç¡®ä¿æ¶ˆæ¯ä¸ä¼šä¸¢å¤±ï¼Œå¹¶èƒ½å¤Ÿåœ¨æ•…éšœå‘ç”Ÿæ—¶è¿›è¡Œè‡ªåŠ¨æ¢å¤ã€‚<br><strong>åˆ†å¸ƒå¼æ‰©å±•</strong>ï¼šæ”¯æŒæ°´å¹³æ‰©å±•ï¼Œå¯ä»¥æ–¹ä¾¿åœ°æ·»åŠ æ–°çš„æ¶ˆæ¯ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¥åº”å¯¹è´Ÿè½½å¢åŠ çš„æƒ…å†µã€‚<br><strong>æ˜“äºéƒ¨ç½²</strong>ï¼šæä¾›å¼€ç®±å³ç”¨çš„éƒ¨ç½²æ–¹å¼ï¼Œéå¸¸é€‚åˆåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä½¿ç”¨ã€‚</p><!--RocketMQçš„ç¼ºç‚¹**ç¤¾åŒºç›¸å¯¹è¾ƒå°**ï¼šä¸ä¸€äº›å…¶ä»–æ¶ˆæ¯é˜Ÿåˆ—ç³»ç»Ÿç›¸æ¯”ï¼ŒRocketMQçš„ç¤¾åŒºè§„æ¨¡ç›¸å¯¹è¾ƒå°ã€‚è¿™å¯èƒ½å¯¼è‡´åœ¨é‡åˆ°é—®é¢˜æ—¶ï¼Œæ‰¾åˆ°ç›¸å…³çš„è§£å†³æ–¹æ¡ˆå’Œæ”¯æŒçš„éš¾åº¦è¾ƒå¤§ã€‚**å­¦ä¹ æ›²çº¿è¾ƒé™¡å³­**ï¼šç›¸å¯¹äºå…¶ä»–æ¶ˆæ¯ä¸­é—´ä»¶æ¥è¯´ï¼ŒRocketMQçš„éƒ¨ç½²å’Œé…ç½®ç›¸å¯¹å¤æ‚ï¼Œéœ€è¦ä¸€å®šçš„å­¦ä¹ æˆæœ¬ã€‚**æ–‡æ¡£å’Œèµ„æ–™ç›¸å¯¹è¾ƒå°‘**ï¼šRocketMQçš„æ–‡æ¡£å’Œèµ„æ–™ç›¸å¯¹è¾ƒå°‘ï¼Œéœ€è¦è‡ªè¡Œæ‘¸ç´¢å’Œæ¢ç´¢ã€‚**éƒ¨åˆ†åŠŸèƒ½éœ€è¦æ‰‹åŠ¨é…ç½®**ï¼šRocketMQçš„æŸäº›åŠŸèƒ½éœ€è¦æ‰‹åŠ¨é…ç½®ï¼Œä¸å¤ªå‹å¥½ã€‚--><p><strong>RocketMQæ¶æ„</strong><br><img src="https://img-blog.csdnimg.cn/direct/8ec71d1847f74dd99f16835e11966787.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"><br><strong>ç”Ÿäº§è€…ï¼ˆProducerï¼‰</strong><br>ç”¨äºäº§ç”Ÿæ¶ˆæ¯çš„è¿è¡Œå®ä½“ï¼Œé€šå¸¸é›†æˆåœ¨ä¸šåŠ¡ç³»ç»Ÿçš„ä¸Šæ¸¸ã€‚<br><strong>ä¸»é¢˜ï¼ˆTopicï¼‰</strong><br>æ¶ˆæ¯ä¼ è¾“å’Œå­˜å‚¨çš„åˆ†ç»„å®¹å™¨ï¼Œå†…éƒ¨ç”±å¤šä¸ªé˜Ÿåˆ—ç»„æˆã€‚<br><strong>é˜Ÿåˆ—ï¼ˆMessageQueueï¼‰</strong><br>æ¶ˆæ¯ä¼ è¾“å’Œå­˜å‚¨çš„å®é™…å•å…ƒå®¹å™¨ï¼Œç±»ä¼¼äºå…¶ä»–æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„åˆ†åŒºã€‚<br><strong>æ¶ˆæ¯ï¼ˆMessageï¼‰</strong><br>RocketMQ çš„æœ€å°ä¼ è¾“å•å…ƒï¼Œå…·å¤‡ä¸å¯å˜æ€§ã€‚<br><strong>æ¶ˆè´¹è€…åˆ†ç»„ï¼ˆConsumerGroupï¼‰</strong><br>å‘å¸ƒè®¢é˜…æ¨¡å‹ä¸­å®šä¹‰çš„ç‹¬ç«‹çš„æ¶ˆè´¹èº«ä»½åˆ†ç»„ï¼Œç”¨äºç»Ÿä¸€ç®¡ç†å¤šä¸ªæ¶ˆè´¹è€…ã€‚<br><strong>æ¶ˆè´¹è€…ï¼ˆConsumerï¼‰</strong><br>æ¶ˆè´¹æ¶ˆæ¯çš„è¿è¡Œå®ä½“ï¼Œé›†æˆåœ¨ä¸šåŠ¡ç³»ç»Ÿçš„ä¸‹æ¸¸ã€‚<br><strong>è®¢é˜…å…³ç³»ï¼ˆSubscriptionï¼‰</strong><br>å‘å¸ƒè®¢é˜…æ¨¡å‹ä¸­æ¶ˆæ¯è¿‡æ»¤ã€é‡è¯•ã€æ¶ˆè´¹è¿›åº¦çš„è§„åˆ™é…ç½®ã€‚</p><!--**Producer**   : æ¶ˆæ¯å‘å¸ƒçš„è§’è‰²ã€‚**Consumer**  : æ¶ˆæ¯æ¶ˆè´¹çš„è§’è‰²ã€‚**NameServer**  : è·¯ç”±æ³¨å†Œä¸­å¿ƒï¼Œç”¨äºBrokerçš„åŠ¨æ€æ³¨å†Œä¸å‘ç°ã€‚**BrokerServer**  : æ¶ˆæ¯æœåŠ¡å™¨ï¼Œè´Ÿè´£æ¶ˆæ¯çš„å­˜å‚¨ã€æŠ•é€’ã€æŸ¥è¯¢ä»¥åŠæœåŠ¡é«˜å¯ç”¨ä¿è¯ã€‚**BrokerServer**  çš„å­æ¨¡å—:**Remoting Module**  : è´Ÿè´£å¤„ç†æ¥è‡ªclientsç«¯çš„è¯·æ±‚ã€‚**Client Manager**  : è´Ÿè´£ç®¡ç†å®¢æˆ·ç«¯(Producer/Consumer)å’Œç»´æŠ¤Consumerçš„Topicè®¢é˜…ä¿¡æ¯ã€‚**Store Service**  : æä¾›æ–¹ä¾¿ç®€å•çš„APIæ¥å£å¤„ç†æ¶ˆæ¯å­˜å‚¨åˆ°ç‰©ç†ç¡¬ç›˜å’ŒæŸ¥è¯¢åŠŸèƒ½ã€‚**HA Service**  : é«˜å¯ç”¨æœåŠ¡ï¼Œæä¾›Master Broker å’Œ Slave Brokerä¹‹é—´çš„æ•°æ®åŒæ­¥åŠŸèƒ½ã€‚**Index Service**  : æ ¹æ®ç‰¹å®šçš„Message keyå¯¹æŠ•é€’åˆ°Brokerçš„æ¶ˆæ¯è¿›è¡Œç´¢å¼•æœåŠ¡ï¼Œä»¥æä¾›æ¶ˆæ¯çš„å¿«é€ŸæŸ¥è¯¢ã€‚--><h1 id="éƒ¨ç½²RocketMQï¼ˆdockerï¼‰"><a href="#éƒ¨ç½²RocketMQï¼ˆdockerï¼‰" class="headerlink" title="éƒ¨ç½²RocketMQï¼ˆdockerï¼‰"></a>éƒ¨ç½²RocketMQï¼ˆdockerï¼‰</h1><h2 id="å®‰è£…-Dockerï¼š"><a href="#å®‰è£…-Dockerï¼š" class="headerlink" title="å®‰è£… Dockerï¼š"></a>å®‰è£… Dockerï¼š</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#debian</span></span><br><span class="line"> curl -fsSL https://get.docker.com -o get-docker.sh</span><br><span class="line"> sudo sh get-docker.sh</span><br></pre></td></tr></table></figure><!--u curl -fsSL https://test.docker.com -o test-docker.sh sudo sh test-docker.sh--><h2 id="æ‹‰å–-RocketMQ-é•œåƒï¼š"><a href="#æ‹‰å–-RocketMQ-é•œåƒï¼š" class="headerlink" title="æ‹‰å– RocketMQ é•œåƒï¼š"></a>æ‹‰å– RocketMQ é•œåƒï¼š</h2><p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä» Docker Hub æ‹‰å–æœ€æ–°çš„ RocketMQ é•œåƒï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull apache/rocketmq:latest</span><br></pre></td></tr></table></figure><h2 id="å¯åŠ¨-RocketMQ-NameServerï¼š"><a href="#å¯åŠ¨-RocketMQ-NameServerï¼š" class="headerlink" title="å¯åŠ¨ RocketMQ NameServerï¼š"></a>å¯åŠ¨ RocketMQ NameServerï¼š</h2><p>RocketMQ çš„ NameServer æ˜¯è´Ÿè´£ç®¡ç†æ‰€æœ‰ Broker èŠ‚ç‚¹çš„ç›®å½•æœåŠ¡ã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨ NameServerï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name rmqnamesrv -p 9876:9876 apache/rocketmq:latest sh mqnamesrv</span><br><span class="line">```bash</span><br><span class="line"><span class="comment">## å¯åŠ¨ RocketMQ Brokerï¼š</span></span><br><span class="line">RocketMQ çš„ Broker è´Ÿè´£å­˜å‚¨æ¶ˆæ¯å¹¶å¤„ç†ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„è¯·æ±‚ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨ Brokerï¼š</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">docker run -d --name rmqbroker --<span class="built_in">link</span> rmqnamesrv:namesrv -e <span class="string">&quot;NAMESRV_ADDR=namesrv:9876&quot;</span>   -e <span class="string">&quot;BROKER_NAME=broker-a&quot;</span>    -e <span class="string">&quot;BROKER_ID=0&quot;</span>    -e <span class="string">&quot;AUTO_CREATE_TOPIC_ENABLE=true&quot;</span>    -e <span class="string">&quot;AUTO_CREATE_SUBSCRIPTION_GROUP=true&quot;</span>    -p 10911:10911 -p 10909:10909 apache/rocketmq:latest sh mqbroker</span><br></pre></td></tr></table></figure><p>éªŒè¯<br>æŸ¥çœ‹ NameServer æ—¥å¿—ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs -f rmqnamesrv</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹ Broker æ—¥å¿—ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs -f rmqbroker</span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨-RocketMQ-Consoleï¼š"><a href="#ä½¿ç”¨-RocketMQ-Consoleï¼š" class="headerlink" title="ä½¿ç”¨ RocketMQ Consoleï¼š"></a>ä½¿ç”¨ RocketMQ Consoleï¼š</h2><p>å¦‚æœéœ€è¦å¯è§†åŒ–ç®¡ç† RocketMQï¼Œå¯ä»¥è¿è¡Œ RocketMQ Consoleï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker pull styletang/rocketmq-console-ng</span><br><span class="line">docker run -d -p 8080:8080 --<span class="built_in">link</span> rmqnamesrv:namesrv -e <span class="string">&quot;JAVA_OPTS=-Drocketmq.namesrv.addr=namesrv:9876&quot;</span> styletang/rocketmq-console-ng</span><br></pre></td></tr></table></figure><p>æ€»ç»“</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‹‰å– RocketMQ é•œåƒ</span></span><br><span class="line">docker pull apache/rocketmq:latest</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨ NameServer</span></span><br><span class="line">docker run -d --name rmqnamesrv -p 9876:9876 apache/rocketmq:latest sh mqnamesrv</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨ Broker</span></span><br><span class="line">docker run -d --name rmqbroker --<span class="built_in">link</span> rmqnamesrv:namesrv -e <span class="string">&quot;NAMESRV_ADDR=namesrv:9876&quot;</span> -p 10911:10911 -p 10909:10909 apache/rocketmq:latest sh mqbroker</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨ RocketMQ Console</span></span><br><span class="line">docker pull styletang/rocketmq-console-ng</span><br><span class="line">docker run -d -p 8080:8080 --<span class="built_in">link</span> rmqnamesrv:namesrv -e <span class="string">&quot;JAVA_OPTS=-Drocketmq.namesrv.addr=namesrv:9876&quot;</span> styletang/rocketmq-console-ng</span><br></pre></td></tr></table></figure><hr><p>å¦‚æœæ˜¯å¤–ç½‘ç¯å¢ƒ<br>run Broker å¤–ç½‘IP</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p /usr/data/rocketMQ/data/broker/logs</span><br><span class="line"><span class="built_in">mkdir</span> -p /usr/data/rocketMQ/data/broker/store</span><br><span class="line"><span class="built_in">mkdir</span> -p /usr/data/rocketMQ/data/broker/conf/</span><br></pre></td></tr></table></figure><p>broket.conf</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">brokerClusterName = DefaultCluster</span><br><span class="line">brokerName = broker-a</span><br><span class="line">brokerId = 0</span><br><span class="line">deleteWhen = 04</span><br><span class="line">fileReservedTime = 48</span><br><span class="line">brokerRole = ASYNC_MASTER</span><br><span class="line">flushDiskType = ASYNC_FLUSH</span><br><span class="line">namesrvAddr = å¤–ç½‘ip:9876</span><br><span class="line">brokerIP1 = å¤–ç½‘ip</span><br><span class="line">autoCreateTopicEnable=<span class="literal">true</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 0.0.0.0:10911:10911 -p 0.0.0.0:10909:10909 -d -v /usr/data/rocketMQ/data/broker/logs:/root/logs -v /usr/data/rocketMQ/data/broker/store:/root/store -v /usr/data/rocketMQ/data/broker/conf/broker.conf:/opt/rocketmq/conf/broker.conf --name rmqbroker --<span class="built_in">link</span> rmqnamesrv:namesrv -e <span class="string">&quot;NAMESRV_ADDR=namesrv:9876&quot;</span> -e <span class="string">&quot;MAX_POSSIBLE_HEAP=200000000&quot;</span> -e <span class="string">&quot;autoCreateTopicEnable=true&quot;</span> rocketmqinc/rocketmq sh mqbroker -c /opt/rocketmq/conf/broker.conf</span><br></pre></td></tr></table></figure><h1 id="NET-RocketMQ"><a href="#NET-RocketMQ" class="headerlink" title=".NET RocketMQ"></a>.NET RocketMQ</h1><h2 id="NuGet-NewLife-RocketMQ"><a href="#NuGet-NewLife-RocketMQ" class="headerlink" title="NuGet NewLife.RocketMQ"></a>NuGet NewLife.RocketMQ</h2><h2 id="Producer"><a href="#Producer" class="headerlink" title="Producer"></a>Producer</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main</span></span><br><span class="line">  XTrace.UseConsole();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> producer = <span class="keyword">new</span> Producer</span><br><span class="line">  &#123;</span><br><span class="line">      NameServerAddress = <span class="string">&quot;x.x.x.x:9876&quot;</span>,</span><br><span class="line">      Topic = <span class="string">&quot;t0529&quot;</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span></span><br><span class="line">  &#123;</span><br><span class="line">      producer.Start();</span><br><span class="line"></span><br><span class="line">      <span class="comment">// å‘é€ä¸€æ¡æµ‹è¯•æ¶ˆæ¯ï¼Œä»¥ç¡®ä¿ Topic è¢«åˆ›å»º</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="keyword">var</span> str = <span class="string">&quot;mqm&quot;</span> + i;</span><br><span class="line">          <span class="comment">//var str = Rand.NextString(1337);</span></span><br><span class="line"></span><br><span class="line">          <span class="keyword">var</span> sr = producer.Publish(str, <span class="string">&quot;TagA&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">  &#123;</span><br><span class="line">      Console.WriteLine(<span class="string">$&quot;Exception: <span class="subst">&#123;ex.Message&#125;</span>&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">finally</span></span><br><span class="line">  &#123;</span><br><span class="line">      producer.Stop();</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h2 id="Consumer"><a href="#Consumer" class="headerlink" title="Consumer"></a>Consumer</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> consumer = <span class="keyword">new</span> Consumer</span><br><span class="line">&#123;</span><br><span class="line">    Topic = <span class="string">&quot;t0529&quot;</span>,</span><br><span class="line">    Group = <span class="string">&quot;test&quot;</span>,</span><br><span class="line">    NameServerAddress = <span class="string">&quot;x.x.x.x:9876&quot;</span>,</span><br><span class="line"></span><br><span class="line">    FromLastOffset = <span class="literal">false</span>,</span><br><span class="line">    <span class="comment">//SkipOverStoredMsgCount = 0,</span></span><br><span class="line">    <span class="comment">//BatchSize = 20,</span></span><br><span class="line"></span><br><span class="line">    Log = XTrace.Log,</span><br><span class="line">    ClientLog = XTrace.Log,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">consumer.OnConsume = OnConsume;</span><br><span class="line"></span><br><span class="line">consumer.Configure(MqSetting.Current);</span><br><span class="line">consumer.Start();</span><br><span class="line"></span><br><span class="line">_consumer = consumer;</span><br></pre></td></tr></table></figure><!-- https://www.cnblogs.com/binz/p/15252277.html aciå¯†ç --><!--d curl -fsSL https://get.docker.com -o get-docker.sh sudo sh get-docker.shu curl -fsSL https://test.docker.com -o test-docker.sh sudo sh test-docker.sherrdocker: Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon runsudo systemctl status dockerä¸åœ¨è¿è¡Œï¼Œå¯åŠ¨Dockerå®ˆæŠ¤è¿›ç¨‹ï¼šsudo systemctl start docker--><!--namesrvNameServermkdir -p /usr/data/rocketMQ/data/namesrv/logsmkdir -p /usr/data/rocketMQ/data/namesrv/storedocker run -p 0.0.0.0:9876:9876 -v /usr/data/rocketMQ/data/namesrv/logs:/root/logs -v /usr/data/rocketMQ/data/namesrv/store:/root/store --name mqnames -e â€œMAX_POSSIBLE_HEAP=100000000â€ -d docker.io/rocketmqinc/rocketmq sh mqnamesrvdocker run -p 0.0.0.0:9876:9876 -v /usr/data/rocketMQ/data/namesrv/logs:/root/logs -v /usr/data/rocketMQ/data/namesrv/store:/root/store --name mqnames -e "MAX_POSSIBLE_HEAP=100000000" -d rocketmqinc/rocketmqbrokerè¿è¡ŒBrokermkdir -p /usr/data/rocketMQ/data/broker/logsmkdir -p /usr/data/rocketMQ/data/broker/storemkdir -p /usr/data/rocketMQ/data/broker/conf/ /usr/data/rocketMQ/data/broker/conf #broker.confbrokerClusterName = DefaultClusterbrokerName = broker-abrokerId = 0deleteWhen = 04fileReservedTime = 48brokerRole = ASYNC_MASTERflushDiskType = ASYNC_FLUSHbrokerIP1 = xx.x.x.x docker run -p 0.0.0.0:10911:10911 -p 0.0.0.0:10909:10909 -d -v /usr/data/rocketMQ/data/broker/logs:/root/logs -v /usr/data/rocketMQ/data/broker/store:/root/store -v /usr/data/rocketMQ/data/broker/conf/broker.conf:/opt/rocketmq/conf/broker.conf --name mqbroker --link mqnames:namesrv -e "NAMESRV_ADDR=namesrv:9876" -e "MAX_POSSIBLE_HEAP=200000000" -e "autoCreateTopicEnable=true" rocketmqinc/rocketmq sh mqbroker -c /opt/rocketmq/conf/broker.confæ¥ä¸‹æ¥ï¼Œè¿è¡ŒBrokerã€‚ä½ éœ€è¦ä¸ºæ¯ä¸ªBrokeræŒ‡å®šä¸€ä¸ªå”¯ä¸€çš„Brokeråç§°ï¼ˆbrokerNameï¼‰ï¼Œå¹¶å†³å®šå®ƒæ˜¯å¦ä¸ºMasteræˆ–è€…Slaveï¼ŒåŒæ—¶æŒ‡å®šNameServerçš„åœ°å€ã€‚Bashdocker run -d --name rmqbroker -p 10911:10911 -p 10909:10909 \    -e "JAVA_OPTS=-Drocketmq.namesrv.addr=yourNameServerHost:9876 \          -Drocketmq.broker.ip=yourBrokerIP \          -Drocketmq.broker.cluster=myCluster \          -Drocketmq.broker.name=broker-a \          -Drocketmq.broker.role=MASTER" \    apacherocketmq/rocketmq:latest sh mqbrokerè¯·æ›¿æ¢yourNameServerHost:9876ä¸ºNameServerçš„å®é™…åœ°å€ï¼ˆå¦‚æœæ˜¯æœ¬åœ°éƒ¨ç½²ä¸”æŒ‰ç…§ä¸Šè¿°æ­¥éª¤ï¼Œåˆ™é€šå¸¸ä¸ºlocalhost:9876ï¼‰ï¼ŒyourBrokerIPä¸ºå½“å‰Brokeræ‰€åœ¨å®¹å™¨æˆ–ä¸»æœºçš„IPåœ°å€ï¼ŒmyClusterä¸ºè‡ªå®šä¹‰çš„é›†ç¾¤åç§°ï¼Œä»¥åŠæ ¹æ®å®é™…æƒ…å†µè®¾ç½®broker-aå’ŒMASTERæˆ–SLAVEã€‚![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/direct/c6630fab71ac4adaada393fb83aaa608.png)=>>>![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/direct/2cdb7a3af9734befbd379fba27289be7.png)ERRorg.apache.rocketmq.remoting.exception.RemotingConnectException: connection to ipè·¨åŸŸé—®é¢˜ .NETä¸­ä½¿ç”¨RocketMQRocketMQ.Clientdocker pull apacherocketmq/rocketmq:latestdocker run -d --name rmqbroker -p 10911:10911 -p 10909:10909 \ -e "JAVA_OPTS=-Drocketmq.namesrv.addr=yourNameServerHost:9876 \ -Drocketmq.broker.ip=yourBrokerIP \ -Drocketmq.broker.cluster=myCluster \ -Drocketmq.broker.name=broker-a \ -Drocketmq.broker.role=MASTER" \ apacherocketmq/rocketmq:latest sh mqbroker docker run -d -p 24527:24527 --name rmqserver  apache/rocketmq#docker run -d -p 24527:24527 --name rmqserver  foxiswho/rocketmqdocker run -d -p 9876:9876 --name rmqserver  foxiswho/rocketmq:server-4.5.1apacherocketmq/rocketmq-brokerä¸ºäº†å¯åŠ¨ä¸€ä¸ªDockerå®¹å™¨ï¼Œä½ éœ€è¦ä½¿ç”¨docker runå‘½ä»¤ï¼Œåè·Ÿä½ æƒ³è¦è¿è¡Œçš„é•œåƒåç§°ã€‚å¦‚æœä½ è¿˜æ²¡æœ‰é•œåƒï¼Œä½ å¯ä»¥ä½¿ç”¨docker pullå‘½ä»¤æ¥ä»Docker Hubæˆ–å…¶ä»–æ³¨å†Œä¸­å¿ƒæ‹‰å–å®ƒã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºæœ¬çš„ç¤ºä¾‹ï¼Œå®ƒå°†ä»Docker Hubæ‹‰å–ä¸€ä¸ªåä¸ºubuntuçš„å®˜æ–¹é•œåƒï¼Œå¹¶è¿è¡Œä¸€ä¸ªæ–°çš„å®¹å™¨ï¼šdocker pull ubuntudocker run -it ubuntu /bin/bashè§£é‡Šï¼šdocker pull ubuntuï¼šä»Docker Hubæ‹‰å–æœ€æ–°çš„Ubuntué•œåƒã€‚docker run -itï¼šè¿™å‘Šè¯‰Dockerè¿è¡Œä¸€ä¸ªæ–°å®¹å™¨ã€‚-iè¡¨ç¤ºäº¤äº’å¼æ“ä½œï¼Œ-tåˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯ã€‚ubuntuï¼šæŒ‡å®šè¦è¿è¡Œçš„é•œåƒåç§°ã€‚/bin/bashï¼šåœ¨å®¹å™¨å†…éƒ¨å¯åŠ¨Bash shellï¼Œå…è®¸ä½ ä¸å®¹å™¨äº¤äº’ã€‚å¦‚æœä½ æƒ³è¦åœ¨åå°è¿è¡Œå®¹å™¨ï¼Œå¯ä»¥ä½¿ç”¨-dæ ‡å¿—ï¼Œå¹¶ä¸”ä¸éœ€è¦ä¸€ä¸ªäº¤äº’å¼ç»ˆç«¯ï¼šdocker run -d ubuntuè¿™å°†åœ¨åå°å¯åŠ¨ä¸€ä¸ªUbuntuå®¹å™¨ï¼Œä¸ä¼šæä¾›ä¸€ä¸ªäº¤äº’å¼çš„shellã€‚RMQ  RocketMQubuntu docker curl -fsSL https://test.docker.com -o test-docker.sh sudo sh test-docker.shRocketMQ --><!---->]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> .NET </tag>
            
            <tag> RocketMQ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo githubio</title>
      <link href="/2024/05/28/hexo-githubio/"/>
      <url>/2024/05/28/hexo-githubio/</url>
      
        <content type="html"><![CDATA[<h1 id="hexoå®‰è£…"><a href="#hexoå®‰è£…" class="headerlink" title="hexoå®‰è£…"></a>hexoå®‰è£…</h1><p>npm install hexo-cli -g<br>hexo init blog<br>cd blog<br>npm install<br>hexo server</p><h1 id="keyé…ç½®"><a href="#keyé…ç½®" class="headerlink" title="keyé…ç½®"></a>keyé…ç½®</h1><p>ssh-keygen -t ed25519 -C â€œ<a href="mailto:&#x65;&#109;&#x61;&#105;&#108;&#64;&#101;&#x2e;&#99;&#111;&#x6d;">&#x65;&#109;&#x61;&#105;&#108;&#64;&#101;&#x2e;&#99;&#111;&#x6d;</a>â€œ<br>æ·»åŠ keyåˆ°github</p><p>err<br><a href="mailto:&#103;&#x69;&#116;&#64;&#x67;&#x69;&#x74;&#104;&#117;&#98;&#x2e;&#x63;&#111;&#109;">&#103;&#x69;&#116;&#64;&#x67;&#x69;&#x74;&#104;&#117;&#98;&#x2e;&#x63;&#111;&#109;</a>: Permission denied (publickey).<br>fatal: Could not read from remote repository.</p><h1 id="é…ç½®GitHubä»“åº“"><a href="#é…ç½®GitHubä»“åº“" class="headerlink" title="é…ç½®GitHubä»“åº“"></a>é…ç½®GitHubä»“åº“</h1><p>åœ¨GitHubä¸Šåˆ›å»ºä¸€ä¸ªæ–°çš„ä»“åº“ï¼Œå…¶åç§°åº”è¯¥æ˜¯ ç”¨æˆ·å.github.ioï¼Œå…¶ä¸­ç”¨æˆ·åæ˜¯ä½ çš„GitHubç”¨æˆ·åã€‚<br> git config â€“global user.email â€œ<a href="mailto:&#x78;&#120;&#64;&#113;&#x71;&#x2e;&#x63;&#111;&#x6d;">&#x78;&#120;&#64;&#113;&#x71;&#x2e;&#x63;&#111;&#x6d;</a>â€œ<br> git config â€“global user.name â€œuserâ€</p><h1 id="config-yml"><a href="#config-yml" class="headerlink" title="_config.yml"></a>_config.yml</h1><p>deploy:<br>  type: git<br>  repo: <repository url> # æ›¿æ¢ä¸ºä½ çš„GitHubä»“åº“url<br>  branch: master</p><h1 id="å®‰è£…hexo-deployer-gitæ’ä»¶ï¼š"><a href="#å®‰è£…hexo-deployer-gitæ’ä»¶ï¼š" class="headerlink" title="å®‰è£…hexo-deployer-gitæ’ä»¶ï¼š"></a>å®‰è£…hexo-deployer-gitæ’ä»¶ï¼š</h1><p>npm install hexo-deployer-git â€“save</p><h1 id="éƒ¨ç½²åˆ°GitHubï¼š"><a href="#éƒ¨ç½²åˆ°GitHubï¼š" class="headerlink" title="éƒ¨ç½²åˆ°GitHubï¼š"></a>éƒ¨ç½²åˆ°GitHubï¼š</h1><p>hexo clean<br>hexo g #hexo generate<br>hexo d #hexo deploy</p><!-- â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources/v2/20240528.jpg"> --><h1 id="å»ºç«‹ä»“åº“-testhtml"><a href="#å»ºç«‹ä»“åº“-testhtml" class="headerlink" title="å»ºç«‹ä»“åº“ testhtml"></a>å»ºç«‹ä»“åº“ testhtml</h1><p>Settings -&gt; pages</p><p><a href="https://xxx.github.io/testhtml/index.html">https://xxx.github.io/testhtml/index.html</a></p>   <!-- erræäº¤é—®é¢˜   (?) To push, remove secret from commit(s) or follow this URL to allow the secret.remote:        https://github.com/qfsysw/qfsysw.github.io/security/secret-scanning/unblock-secret/2hHiwZUqlhqb19DH43f0VUKQbY0remote:remote:remote:To https://github.com/qfsysw/qfsysw.github.io.git ! [remote rejected] HEAD -> master (push declined due to repository rule violations)error: failed to push some refs to 'https://github.com/qfsysw/qfsysw.github.io.git'remote =>>>> urlor settings ==> security_analysis ==> Secret scanning =>DISå®‰è£… hexo-generator-search$ npm install hexo-generator-search --saveé…ç½®åœ¨_config.ymlä¸­æ·»åŠ search:  path: search.xml  field: post   ç§ƒäº†ä¹Ÿå¼±äº†   -    name: github    icon: github    path: https://github.com/leedom92/hexo-theme-leedom    target: _blank  -    name: email    icon: envelope    path:   -    name: facebook    icon: facebooksquare    path:  -    name: twitter    icon: twitter    path:  -    name: wechat    icon: wechat    path:  -    name: weibo    icon: weibo    path:  -    # rsséœ€å®‰è£… hexo-generator-feed æ’ä»¶    # å…·ä½“å‚ç…§https://github.com/hexojs/hexo-generator-feed    name: rss    icon: rss    path: /atom.xml    target: _blank -->]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> github </tag>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HarmonyOS socket websocket</title>
      <link href="/2024/05/26/HarmonyOS-Socket/"/>
      <url>/2024/05/26/HarmonyOS-Socket/</url>
      
        <content type="html"><![CDATA[<h1 id="socket"><a href="#socket" class="headerlink" title="socket"></a>socket</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket <span class="keyword">from</span> <span class="string">&#x27;@ohos.net.socket&#x27;</span>;</span><br></pre></td></tr></table></figure><p>create</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> tcp = socket.<span class="title function_">constructTCPSocketInstance</span>();</span><br><span class="line"><span class="keyword">let</span> promise = tcp.<span class="title function_">connect</span>(&#123; <span class="attr">address</span>: &#123;<span class="attr">address</span>: <span class="string">&#x27;192.168.1.11&#x27;</span>, <span class="attr">port</span>: <span class="number">24524</span>, <span class="attr">family</span>: <span class="number">1</span>&#125; , <span class="attr">timeout</span>: <span class="number">6000</span>&#125;);</span><br><span class="line">promise.<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;connect success&#x27;</span>);</span><br><span class="line">  tcp.<span class="title function_">send</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>:<span class="string">&#x27;Hello, server!&#x27;</span></span><br><span class="line">  &#125;,<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;send fail&#x27;</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;send success&#x27;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;connect fail&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ERR<br>ç³»ç»Ÿè¯†åˆ«åˆ°æ–°çš„sdkè·¯å¾„ è¯·æ¸…é™¤æ¨¡æ‹Ÿå™¨æ•°æ®å<br>Sdk Path has been changed to xxx</p><p>1.åœ¨Local Emulatorçš„è®¾å¤‡åˆ—è¡¨çª—å£ï¼Œç‚¹å‡»â€œWipe User Dataâ€æ¸…é™¤æ¨¡æ‹Ÿå™¨æ•°æ®ï¼Œç„¶åé‡æ–°å¯åŠ¨æ¨¡æ‹Ÿå™¨ã€‚<br>2.é‡æ–°åˆ›å»ºä¸€ä¸ªæ¨¡æ‹Ÿå™¨ï¼Œç„¶åå¯åŠ¨æ–°å»ºçš„æ¨¡æ‹Ÿå™¨ã€‚</p><p>console.log  Log &#x3D;&gt; show only js log</p><p>ERR<br>201<br>module.json5<br>æ·»åŠ </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;requestPermissions&quot;</span>: [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;ohos.permission.INTERNET&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>ERR<br>connect fail<br>2301088</p><p>éœ€æ·»åŠ æœ¬æœºIP</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> bindAddress = &#123;</span><br><span class="line">    <span class="attr">address</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">    <span class="attr">port</span>: <span class="number">1234</span>,</span><br><span class="line">    <span class="attr">family</span>: <span class="number">1</span></span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure><p>node server</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> net = <span class="built_in">require</span>(<span class="string">&#x27;net&#x27;</span>);</span><br><span class="line"><span class="comment">//createServer</span></span><br><span class="line"><span class="keyword">const</span> server = net.<span class="title function_">createServer</span>(<span class="function">(<span class="params">socket</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;client con&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  socket.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`rs from client : <span class="subst">$&#123;data&#125;</span>`</span>);</span><br><span class="line">    socket.<span class="title function_">write</span>(<span class="string">`rs server : <span class="subst">$&#123;data&#125;</span>`</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  socket.<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;client end &#x27;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">24524</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;tcp run on 24524&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>run client</p><!--    // constructTCPSocketInstance    let tcp = socket.constructTCPSocketInstance();    //on    tcp.on('message', value => {      console.log("on message")      let buffer = value.message      let dataView = new DataView(buffer)      let str = ""      for (let i = 0; i < dataView.byteLength; ++i) {        str += String.fromCharCode(dataView.getUint8(i))      }      console.log("on connect received:" + str)      this.message  = str;    });    tcp.on('connect', () => {      console.log("on connect")    });    tcp.on('close', () => {      console.log("on close")    });    //    let bindAddress = {      address: 'localhost',      port: 1234,      family: 1    };    tcp.bind(bindAddress, err => {      if (err) {        console.log('bind fail'+err.code.toString());        return;      }      console.log('bind success');      // con      let connectAddress = {        address: '117.72.72.102',        port: 24524,        family: 1      };      tcp.connect({        address: connectAddress, timeout: 6000      }, err => {        if (err) {          console.log('connect fail'+err.code.toString());          return;        }        console.log('connect success');        // send        tcp.send({          data: 'Hello, server!'        }, err => {          if (err) {            console.log('send fail'+err.code.toString());            return;          }          console.log('send success');        })      });    });    // close    setTimeout(() => {      tcp.close((err) => {        console.log('close socket.')      });      tcp.off('message');      tcp.off('connect');      tcp.off('close');    }, 30 * 1000);--><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources/v2/hm01.jpg"></p><h1 id="webscoket"><a href="#webscoket" class="headerlink" title="webscoket"></a>webscoket</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> webSocket <span class="keyword">from</span> <span class="string">&#x27;@ohos.net.webSocket&#x27;</span>;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> ws = webSocket.<span class="title function_">createWebSocket</span>();</span><br><span class="line"><span class="keyword">let</span> url = <span class="string">&quot;ws://xxx:24524&quot;</span></span><br><span class="line">ws.<span class="title function_">connect</span>(url, <span class="function">(<span class="params">err, value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> promise = ws.<span class="title function_">send</span>(<span class="string">&quot;Hello, server!&quot;</span>);</span><br><span class="line">  promise.<span class="title function_">then</span>(<span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;send success&quot;</span>)</span><br><span class="line">  &#125;).<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;send fail, error:&quot;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(err))</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æƒé™<br>ohos.permission.INTERNET</p><p>websocketæ›´åŠ ç®€å•ä¸€ç‚¹~~</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources/v2/hm02.jpg"></p><!--æ–‡æ¡£[socket](https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V2/js-apis-socket-0000001477981433-V2#ZH-CN_TOPIC_0000001523808874__send-3)https://developer.huawei.com/consumer/cn/doc/harmonyos-references-V2/js-apis-websocket-0000001427902700-V2#ZH-CN_TOPIC_0000001574088709__send-1https://developer.huawei.com/consumer/cn/hmos/samples/?catalogVersion=V2-->]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Python helloworldï¼get/post mysql requests socket docker opencv flask fastapi debian ubuntu sparkai</title>
      <link href="/2024/05/26/Python-Base/"/>
      <url>/2024/05/26/Python-Base/</url>
      
        <content type="html"><![CDATA[<!--**python** helloworld >>> get/post mysql mail requests socket server web flask fastapi debian ubuntu sparkai--><h1 id="ğŸŒ setup"><a href="#ğŸŒ setup" class="headerlink" title="ğŸŒ setup"></a>ğŸŒ setup</h1><p>å®‰è£…<br><a href="http://www.python.org/">python.org</a></p><h1 id="ğŸ·helloworld"><a href="#ğŸ·helloworld" class="headerlink" title="ğŸ·helloworld"></a>ğŸ·helloworld</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;helloworld&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python test.py</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/direct/cd1496d36be24d75916d9e10cd4be735.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h2 id="var"><a href="#var" class="headerlink" title="var"></a>var</h2><p>å˜é‡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    company, date, *others = [<span class="string">&#x27;hi&#x27;</span>, <span class="string">&#x27;20240521&#x27;</span>, <span class="string">&#x27;000&#x27;</span>, <span class="string">&#x27;11111&#x27;</span>]</span><br><span class="line">    <span class="built_in">print</span>(company, date)</span><br><span class="line">    <span class="built_in">print</span>(others)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="random"><a href="#random" class="headerlink" title="random"></a>random</h2><p>éšæœº</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">i = <span class="number">0</span></span><br><span class="line">rand_list = []</span><br><span class="line"><span class="keyword">while</span> i &lt; <span class="number">4</span>:</span><br><span class="line">    rand_num = random.randint(<span class="number">0</span>, <span class="number">499</span>)</span><br><span class="line">    <span class="keyword">if</span> rand_num <span class="keyword">not</span> <span class="keyword">in</span> rand_list:</span><br><span class="line">        rand_list.append(rand_num)</span><br><span class="line">        i += <span class="number">1</span></span><br><span class="line">        </span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(rand_list)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="list"><a href="#list" class="headerlink" title="list"></a>list</h2><p>åˆ—è¡¨ å¯å˜</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªç©ºåˆ—è¡¨  </span></span><br><span class="line">my_list = []  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># å‘åˆ—è¡¨ä¸­æ·»åŠ å…ƒç´   </span></span><br><span class="line">my_list.append(<span class="number">1</span>)  </span><br><span class="line">my_list.append(<span class="number">2</span>)  </span><br><span class="line">my_list.append(<span class="number">3</span>)  </span><br><span class="line">  </span><br><span class="line"><span class="built_in">print</span>(my_list)  <span class="comment"># è¾“å‡º: [1, 2, 3]  </span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># ä¿®æ”¹åˆ—è¡¨ä¸­çš„å…ƒç´   </span></span><br><span class="line">my_list[<span class="number">1</span>] = <span class="string">&#x27;two&#x27;</span>  </span><br><span class="line"><span class="built_in">print</span>(my_list)  <span class="comment"># è¾“å‡º: [1, &#x27;two&#x27;, 3]  </span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># åˆ—è¡¨åˆ‡ç‰‡  </span></span><br><span class="line">sub_list = my_list[<span class="number">1</span>:<span class="number">3</span>]  </span><br><span class="line"><span class="built_in">print</span>(sub_list)  <span class="comment"># è¾“å‡º: [&#x27;two&#x27;, 3]  </span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># åˆ é™¤åˆ—è¡¨ä¸­çš„å…ƒç´   </span></span><br><span class="line"><span class="keyword">del</span> my_list[<span class="number">2</span>]  </span><br><span class="line"><span class="built_in">print</span>(my_list)  <span class="comment"># è¾“å‡º: [1, &#x27;two&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªåŒ…å«0åˆ°9çš„å¶æ•°åˆ—è¡¨  </span></span><br><span class="line">even_numbers = [i <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10</span>) <span class="keyword">if</span> i % <span class="number">2</span> == <span class="number">0</span>]  </span><br><span class="line"><span class="built_in">print</span>(even_numbers)  <span class="comment"># è¾“å‡º: [0, 2, 4, 6, 8]</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="tuple"><a href="#tuple" class="headerlink" title="tuple"></a>tuple</h2><p>å…ƒç»„ ä¸å¯å˜</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªå…ƒç»„  </span></span><br><span class="line">my_tuple = (<span class="number">1</span>, <span class="string">&#x27;two&#x27;</span>, <span class="number">3.0</span>)  </span><br><span class="line"><span class="built_in">print</span>(my_tuple)  <span class="comment"># è¾“å‡º: (1, &#x27;two&#x27;, 3.0)  </span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># å°è¯•ä¿®æ”¹å…ƒç»„ä¸­çš„å…ƒç´ ï¼ˆä¼šæŠ›å‡ºTypeErrorï¼‰  </span></span><br><span class="line"><span class="comment">## my_tuple[1] = &#x27;Two&#x27;  # è¿™è¡Œä»£ç ä¼šæŠ¥é”™ï¼Œå› ä¸ºå…ƒç»„æ˜¯ä¸å¯å˜çš„  </span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># å…ƒç»„åˆ‡ç‰‡ï¼ˆè™½ç„¶å…ƒç»„ä¸å¯å˜ï¼Œä½†ä½ å¯ä»¥è·å–å®ƒçš„åˆ‡ç‰‡ï¼‰  </span></span><br><span class="line">sub_tuple = my_tuple[<span class="number">1</span>:]  </span><br><span class="line"><span class="built_in">print</span>(sub_tuple)  <span class="comment"># è¾“å‡º: (&#x27;two&#x27;, 3.0)</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="if-else"><a href="#if-else" class="headerlink" title="if else"></a>if else</h2><p>åˆ¤æ–­</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">age =<span class="number">5</span></span><br><span class="line"><span class="keyword">if</span> age &gt;= <span class="number">6</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;teenager&#x27;</span>)</span><br><span class="line"><span class="keyword">elif</span> age &gt;= <span class="number">20</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;old&#x27;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;kid&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="calculator"><a href="#calculator" class="headerlink" title="calculator"></a>calculator</h2><p>è®¡ç®—å™¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">x, y</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;åŠ æ³•&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">subtract</span>(<span class="params">x, y</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;å‡æ³•&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> x - y</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">multiply</span>(<span class="params">x, y</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;ä¹˜æ³•&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> x * y</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">divide</span>(<span class="params">x, y</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;é™¤æ³•&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">if</span> y == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;é”™è¯¯ï¼šé™¤æ•°ä¸èƒ½ä¸º0&quot;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> x / y</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;é€‰æ‹©æ“ä½œï¼š&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;1.åŠ æ³•&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;2.å‡æ³•&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;3.ä¹˜æ³•&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;4.é™¤æ³•&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    choice = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥ä½ çš„é€‰æ‹©(1/2/3/4): &quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> choice <span class="keyword">in</span> (<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;2&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;4&#x27;</span>):</span><br><span class="line">        num1 = <span class="built_in">float</span>(<span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥ç¬¬ä¸€ä¸ªæ•°å­—: &quot;</span>))</span><br><span class="line">        num2 = <span class="built_in">float</span>(<span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥ç¬¬äºŒä¸ªæ•°å­—: &quot;</span>))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> choice == <span class="string">&#x27;1&#x27;</span>:</span><br><span class="line">            <span class="built_in">print</span>(num1, <span class="string">&quot;+&quot;</span>, num2, <span class="string">&quot;=&quot;</span>, add(num1, num2))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">elif</span> choice == <span class="string">&#x27;2&#x27;</span>:</span><br><span class="line">            <span class="built_in">print</span>(num1, <span class="string">&quot;-&quot;</span>, num2, <span class="string">&quot;=&quot;</span>, subtract(num1, num2))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">elif</span> choice == <span class="string">&#x27;3&#x27;</span>:</span><br><span class="line">            <span class="built_in">print</span>(num1, <span class="string">&quot;*&quot;</span>, num2, <span class="string">&quot;=&quot;</span>, multiply(num1, num2))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">elif</span> choice == <span class="string">&#x27;4&#x27;</span>:</span><br><span class="line">            result = divide(num1, num2)</span><br><span class="line">            <span class="built_in">print</span>(num1, <span class="string">&quot;/&quot;</span>, num2, <span class="string">&quot;=&quot;</span>, result)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æƒ³ç»§ç»­è®¡ç®—</span></span><br><span class="line">        next_calculation = <span class="built_in">input</span>(<span class="string">&quot;æƒ³è¦è¿›è¡Œä¸‹ä¸€æ¬¡è®¡ç®—å—ï¼Ÿ(yes/no): &quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> next_calculation.lower() != <span class="string">&#x27;yes&#x27;</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;éæ³•è¾“å…¥ï¼Œè¯·é‡æ–°è¾“å…¥&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><!--<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">    operate_type = <span class="built_in">input</span>(<span class="string">&#x27;è¯·é€‰æ‹©è¿ç®—ç±»å‹ï¼š1åŠ æ³•ï¼Œ2å‡æ³•ï¼Œ3ä¹˜æ³•ï¼Œ4é™¤æ³•ï¼š&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> <span class="built_in">int</span>(operate_type) <span class="keyword">not</span> <span class="keyword">in</span> (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;ç±»å‹é€‰æ‹©é”™è¯¯ï¼Œåªèƒ½ä¸º1-4&#x27;</span>)</span><br><span class="line">        operate_type = <span class="built_in">input</span>(<span class="string">&#x27;è¯·é‡æ–°é€‰æ‹©è¿ç®—ç±»å‹ï¼š1åŠ æ³•ï¼Œ2å‡æ³•ï¼Œ3ä¹˜æ³•ï¼Œ4é™¤æ³•ï¼š&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    number_one = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;è¯·è¾“å…¥ç¬¬ä¸€ä¸ªæ•°ï¼š&#x27;</span>))</span><br><span class="line"></span><br><span class="line">    number_two = <span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&#x27;è¯·è¾“å…¥ç¬¬äºŒä¸ªæ•°ï¼š&#x27;</span>))</span><br><span class="line">    <span class="keyword">if</span> operate_type == <span class="string">&#x27;1&#x27;</span>:</span><br><span class="line">  </span><br><span class="line">        result = number_one + number_two</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;åŠ æ³•è¿ç®—ï¼Œç»“æœæ˜¯ï¼š&#x27;</span> + <span class="built_in">str</span>(result))</span><br><span class="line">    <span class="keyword">elif</span> operate_type == <span class="string">&#x27;2&#x27;</span>:</span><br><span class="line">   </span><br><span class="line">        result = number_one - number_two</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;å‡æ³•è¿ç®—ï¼Œç»“æœæ˜¯ï¼š&#x27;</span> + <span class="built_in">str</span>(result))</span><br><span class="line">    <span class="keyword">elif</span> operate_type == <span class="string">&#x27;3&#x27;</span>:</span><br><span class="line">  </span><br><span class="line">        result = number_one * number_two</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;ä¹˜æ³•è¿ç®—ï¼Œç»“æœæ˜¯ï¼š&#x27;</span> + <span class="built_in">str</span>(result))</span><br><span class="line">    <span class="keyword">elif</span> operate_type == <span class="string">&#x27;4&#x27;</span>:</span><br><span class="line">      </span><br><span class="line">        <span class="keyword">if</span> number_two == <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;ç¬¬äºŒä¸ªæ•°å³é™¤æ•°ä¸èƒ½ä¸º0&#x27;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            result = number_one / number_two</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;é™¤æ³•è¿ç®—ï¼Œç»“æœæ˜¯ï¼š&#x27;</span> + <span class="built_in">str</span>(result))</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;ç®—æ³•ç±»å‹é”™è¯¯&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>â€“&gt;</p><h2 id="match"><a href="#match" class="headerlink" title="match"></a>match</h2><p>pyçš„switch </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">args = [<span class="string">&#x27;gcc&#x27;</span>, <span class="string">&#x27;hello.c&#x27;</span>, <span class="string">&#x27;world.c&#x27;</span>]</span><br><span class="line"><span class="comment"># args = [&#x27;clean&#x27;]</span></span><br><span class="line"><span class="comment">#args = [&#x27;12&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">match</span> args:</span><br><span class="line">    <span class="comment"># å¦‚æœä»…å‡ºç°gccï¼ŒæŠ¥é”™:</span></span><br><span class="line">    <span class="keyword">case</span> [<span class="string">&#x27;gcc&#x27;</span>]:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;gcc: missing source file(s).&#x27;</span>)</span><br><span class="line">    <span class="comment"># å‡ºç°gccï¼Œä¸”è‡³å°‘æŒ‡å®šäº†ä¸€ä¸ªæ–‡ä»¶:</span></span><br><span class="line">    <span class="keyword">case</span> [<span class="string">&#x27;gcc&#x27;</span>, file1, *files]:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;gcc compile: &#x27;</span> + file1 + <span class="string">&#x27;, &#x27;</span> + <span class="string">&#x27;, &#x27;</span>.join(files))</span><br><span class="line">    <span class="comment"># ä»…å‡ºç°clean:</span></span><br><span class="line">    <span class="keyword">case</span> [<span class="string">&#x27;clean&#x27;</span>]:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;clean&#x27;</span>)</span><br><span class="line">    <span class="keyword">case</span> _:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;invalid command.&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">age = <span class="number">19</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">match</span> age:</span><br><span class="line">    <span class="keyword">case</span> x <span class="keyword">if</span> x &lt; <span class="number">10</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;&lt; 10 years old: <span class="subst">&#123;x&#125;</span>&#x27;</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="number">10</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;10 years old.&#x27;</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="number">11</span> | <span class="number">12</span> | <span class="number">13</span> | <span class="number">14</span> | <span class="number">15</span> | <span class="number">16</span> | <span class="number">17</span> | <span class="number">18</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;11~18 years old.&#x27;</span>)</span><br><span class="line">    <span class="keyword">case</span> <span class="number">19</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;19 years old.&#x27;</span>)</span><br><span class="line">    <span class="keyword">case</span> _:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;not sure.&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="fro"><a href="#fro" class="headerlink" title="fro"></a>fro</h2><p>å¾ªç¯</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">names = [<span class="string">&#x27;a1&#x27;</span>, <span class="string">&#x27;b2&#x27;</span>, <span class="string">&#x27;c3&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> name <span class="keyword">in</span> names:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Hi &#x27;</span>+ name)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]:</span><br><span class="line">    <span class="built_in">sum</span> = <span class="built_in">sum</span> + x</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sum</span>)</span><br></pre></td></tr></table></figure><h2 id="function"><a href="#function" class="headerlink" title="function"></a>function</h2><p>å‡½æ•°</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">my_abs</span>(<span class="params">x</span>):</span><br><span class="line">    <span class="keyword">if</span> x &gt;= <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> x</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span> -x</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">my_fun</span>(<span class="params"> x,y </span>):</span><br><span class="line">    <span class="keyword">return</span> x,y</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(my_abs(<span class="number">11</span>))</span><br><span class="line"><span class="built_in">print</span>(my_abs(-<span class="number">11</span>))</span><br><span class="line"><span class="built_in">print</span>(my_fun(<span class="number">11</span>,<span class="number">22</span>))</span><br><span class="line">x1,y2 = my_fun(<span class="number">11</span>,<span class="number">22</span>)</span><br><span class="line"><span class="built_in">print</span>(x1)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">myfn</span>(<span class="params">numbers</span>):</span><br><span class="line">    <span class="built_in">sum</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> n <span class="keyword">in</span> numbers:</span><br><span class="line">        <span class="built_in">sum</span> = <span class="built_in">sum</span> + n  <span class="comment"># * n</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">sum</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(myfn([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>,<span class="number">10</span>]))</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="map"><a href="#map" class="headerlink" title="map"></a>map</h2><p>è¿­ä»£</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">f</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">return</span> n * <span class="number">2</span></span><br><span class="line"></span><br><span class="line">nums = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]</span><br><span class="line"></span><br><span class="line">r = <span class="built_in">map</span>(f, nums)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(r))</span><br></pre></td></tr></table></figure><p>ERR<br>IndentationError: unexpected indent<br>å­˜åœ¨ä¸æ­£ç¡®çš„ç¼©è¿›</p><h2 id="reduce"><a href="#reduce" class="headerlink" title="reduce"></a>reduce</h2><p>è¿­ä»£å‰ä¸¤ä¸ªå…ƒç´ é€šè¿‡å‡½æ•°å¤„ç†ï¼Œå¾—åˆ°çš„ç»“æœå†ä¸ç¬¬ä¸‰ä¸ªå…ƒç´ é€šè¿‡å‡½æ•°å¤„ç†ï¼Œä¾æ­¤ç±»æ¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> functools <span class="keyword">import</span> reduce</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">x, y</span>):</span><br><span class="line">    <span class="keyword">return</span> x + y</span><br><span class="line"></span><br><span class="line">numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line"></span><br><span class="line">sum_of_numbers = reduce(add, numbers)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(sum_of_numbers)  </span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h2><p>è¿‡æ»¤</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">is_odd</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">return</span> n % <span class="number">2</span> == <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">list</span>(<span class="built_in">filter</span>(is_odd, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">15</span>])))</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="sorted"><a href="#sorted" class="headerlink" title="sorted"></a>sorted</h2><p>æ’åº</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr = [<span class="number">33</span>,<span class="number">12</span>,-<span class="number">22</span>,<span class="number">1</span>,<span class="number">12</span>]</span><br><span class="line"><span class="built_in">print</span>(<span class="built_in">sorted</span>(arr))</span><br></pre></td></tr></table></figure><h2 id="lambda"><a href="#lambda" class="headerlink" title="lambda"></a>lambda</h2><p>åŒ¿å</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åŒ¿åå‡½æ•°</span></span><br><span class="line">square = <span class="keyword">lambda</span> x: x**<span class="number">2</span></span><br><span class="line">numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]</span><br><span class="line">squared_numbers = <span class="built_in">list</span>(<span class="built_in">map</span>(square, numbers))</span><br><span class="line"><span class="built_in">print</span>(squared_numbers)  </span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="module-class"><a href="#module-class" class="headerlink" title="module class"></a>module class</h2><p>æ¨¡å— ç±»</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#module</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">greet</span>(<span class="params">name</span>):</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Hello, <span class="subst">&#123;name&#125;</span>!&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">add_numbers</span>(<span class="params">a, b</span>):</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> a + b</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>:</span><br><span class="line">  </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, age</span>):</span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">introduce</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;My name is <span class="subst">&#123;self.name&#125;</span> and I am <span class="subst">&#123;self.age&#125;</span> years old.&quot;</span>)</span><br></pre></td></tr></table></figure><p>import</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> module</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">module.greet(<span class="string">&quot;m1&quot;</span>)</span><br><span class="line"></span><br><span class="line">result = module.add_numbers(<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line"></span><br><span class="line">person = module.Person(<span class="string">&quot;m2&quot;</span>, <span class="number">11</span>)</span><br><span class="line">person.introduce()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>pip install xx</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install FastAPI  </span><br><span class="line"><span class="comment">#pip3 install FastAPI  </span></span><br></pre></td></tr></table></figure><p>import </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI  </span><br><span class="line"><span class="comment">#...</span></span><br></pre></td></tr></table></figure><h2 id="extends-override"><a href="#extends-override" class="headerlink" title="extends override"></a>extends override</h2><p>ç»§æ‰¿ å¤šæ€</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.name = name</span><br><span class="line"><span class="comment">#extends</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span>  </span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span>(<span class="title class_ inherited__">Animal</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&#x27;<span class="subst">&#123;self.name&#125;</span> says wang!&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span>(<span class="title class_ inherited__">Animal</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">speak</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&#x27;<span class="subst">&#123;self.name&#125;</span> says miao!&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#override</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">animal_sound</span>(<span class="params">animal</span>):</span><br><span class="line">    <span class="built_in">print</span>(animal.speak())</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dog = Dog(<span class="string">&#x27;wangcai&#x27;</span>)</span><br><span class="line">cat = Cat(<span class="string">&#x27;afu&#x27;</span>)</span><br><span class="line"></span><br><span class="line">animal_sound(dog)  </span><br><span class="line">animal_sound(cat) </span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name</span>):</span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Swimmer</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">swim</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;<span class="subst">&#123;self.name&#125;</span> is swimming.&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Flyer</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">fly</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">f&quot;<span class="subst">&#123;self.name&#125;</span> is flying.&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Duck</span>(Animal, Swimmer, Flyer):</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">gaga = Duck(<span class="string">&quot;Gaga&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(gaga.swim())  </span><br><span class="line"><span class="built_in">print</span>(gaga.fly())   </span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Version"><a href="#Version" class="headerlink" title="Version"></a>Version</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="built_in">print</span>(sys.version)</span><br><span class="line"></span><br><span class="line">major_ver = sys.version_info.major</span><br><span class="line">minor_ver = sys.version_info.minor</span><br><span class="line">micro_ver = sys.version_info.micro</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;Python versionï¼š<span class="subst">&#123;major_ver&#125;</span>.<span class="subst">&#123;minor_ver&#125;</span>.<span class="subst">&#123;micro_ver&#125;</span>&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="ğŸ¶sql"><a href="#ğŸ¶sql" class="headerlink" title="ğŸ¶sql"></a>ğŸ¶sql</h1><h2 id="sqlite"><a href="#sqlite" class="headerlink" title="sqlite"></a>sqlite</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> sqlite3</span><br><span class="line">conn = sqlite3.connect(<span class="string">&#x27;test.db&#x27;</span>)</span><br><span class="line">c = conn.cursor()</span><br><span class="line">c.execute(<span class="string">&#x27;&#x27;&#x27;CREATE TABLE IF NOT EXISTS stocks</span></span><br><span class="line"><span class="string">             (date text, trans text, symbol text, qty real, price real)&#x27;&#x27;&#x27;</span>)</span><br><span class="line">c.execute(<span class="string">&quot;INSERT INTO stocks VALUES (&#x27;2024-04-25&#x27;,&#x27;BUY&#x27;,&#x27;P1&#x27;,100,150.00)&quot;</span>)</span><br><span class="line">conn.commit()</span><br><span class="line">c.execute(<span class="string">&quot;INSERT INTO stocks VALUES (?,?,?,?,?)&quot;</span>, (<span class="string">&#x27;2024-04-24&#x27;</span>,<span class="string">&#x27;SELL&#x27;</span>,<span class="string">&#x27;P2&#x27;</span>,<span class="number">50</span>,<span class="number">300.00</span>))</span><br><span class="line">c.execute(<span class="string">&quot;SELECT * FROM stocks WHERE symbol = &#x27;P1&#x27;&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(c.fetchone())  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;-----&quot;</span>)</span><br><span class="line"></span><br><span class="line">c.execute(<span class="string">&quot;SELECT * FROM stocks&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> c.fetchall():</span><br><span class="line">    <span class="built_in">print</span>(row)</span><br><span class="line"></span><br><span class="line">c.close()</span><br><span class="line">conn.close()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install mysql-connector-python</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> mysql.connector</span><br><span class="line"><span class="keyword">from</span> mysql.connector <span class="keyword">import</span> Error</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">connect_and_query</span>():</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># è¿æ¥åˆ° MySQL æ•°æ®åº“</span></span><br><span class="line">        connection = mysql.connector.connect(</span><br><span class="line">            port= <span class="string">&#x27;30306&#x27;</span>,</span><br><span class="line">            host=<span class="string">&#x27;localhost&#x27;</span>,          <span class="comment"># æ•°æ®åº“ä¸»æœºåœ°å€</span></span><br><span class="line">            user=<span class="string">&#x27;root&#x27;</span>,       <span class="comment"># æ•°æ®åº“ç”¨æˆ·å</span></span><br><span class="line">            password=<span class="string">&#x27;123123&#x27;</span>,   <span class="comment"># æ•°æ®åº“å¯†ç </span></span><br><span class="line">            database=<span class="string">&#x27;dbtest&#x27;</span>    <span class="comment"># æ•°æ®åº“åç§°</span></span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> connection.is_connected():</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Successfully connected to the database&quot;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># åˆ›å»ºä¸€ä¸ªæ¸¸æ ‡å¯¹è±¡</span></span><br><span class="line">            cursor = connection.cursor()</span><br><span class="line"></span><br><span class="line">            <span class="comment"># æ‰§è¡Œ SQL æŸ¥è¯¢</span></span><br><span class="line">            query = <span class="string">&quot;SELECT * FROM `tuser`&quot;</span> </span><br><span class="line">            cursor.execute(query)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># è·å–æŸ¥è¯¢ç»“æœ</span></span><br><span class="line">            results = cursor.fetchall()</span><br><span class="line"></span><br><span class="line">            <span class="comment"># éå†ç»“æœå¹¶æ‰“å°</span></span><br><span class="line">            <span class="keyword">for</span> row <span class="keyword">in</span> results:</span><br><span class="line">                <span class="built_in">print</span>(row)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span> Error <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Error: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        <span class="keyword">if</span> connection.is_connected():</span><br><span class="line">            cursor.close()</span><br><span class="line">            connection.close()</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;MySQL connection is closed&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    connect_and_query()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="ğŸ£await-async"><a href="#ğŸ£await-async" class="headerlink" title="ğŸ£await   async"></a>ğŸ£await   async</h1><p>å¼‚æ­¥</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">async_func1</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;start async_func1...&quot;</span>)</span><br><span class="line">    <span class="keyword">await</span> asyncio.sleep(<span class="number">2</span>)  <span class="comment">#sleep</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;async_func1 end&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">async_func2</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;start async_func2...&quot;</span>)</span><br><span class="line">    <span class="keyword">await</span> asyncio.sleep(<span class="number">3</span>)  </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;async_func2 end&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    task1 = asyncio.create_task(async_func1()) </span><br><span class="line">    task2 = asyncio.create_task(async_func2())  </span><br><span class="line">    </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;2tasks created...&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">await</span> task1 <span class="comment">#await</span></span><br><span class="line">    <span class="keyword">await</span> task2 </span><br><span class="line">    </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;tasks end&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">start_time = time.time()</span><br><span class="line">asyncio.run(main())</span><br><span class="line">end_time = time.time()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot; done : <span class="subst">&#123;end_time - start_time&#125;</span>s&quot;</span>)</span><br></pre></td></tr></table></figure><h1 id="ğŸµRequests"><a href="#ğŸµRequests" class="headerlink" title="ğŸµRequests"></a>ğŸµRequests</h1><h2 id="Web-Scraping"><a href="#Web-Scraping" class="headerlink" title="Web Scraping"></a>Web Scraping</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;https://www.python.org/&quot;</span></span><br><span class="line">response = requests.get(url)</span><br><span class="line">soup = BeautifulSoup(response.content, <span class="string">&#x27;html.parser&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(soup.title.text)</span><br></pre></td></tr></table></figure><h2 id="csdn"><a href="#csdn" class="headerlink" title="csdn"></a>csdn</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line">url = <span class="string">&#x27;https://www.csdn.net/&#x27;</span></span><br><span class="line">response = requests.get(url)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> response.status_code == <span class="number">200</span>:</span><br><span class="line">    soup = BeautifulSoup(response.text, <span class="string">&#x27;html.parser&#x27;</span>)</span><br><span class="line">    hot_topics = soup.find_all(<span class="string">&#x27;div&#x27;</span>, class_=<span class="string">&#x27;headswiper-item&#x27;</span>)</span><br><span class="line">     <span class="comment">#soup.select(&#x27;.hot-news .news-item&#x27;)   #soup.find_all(&#x27;div&#x27;, class_=&#x27;headswiper-item&#x27;)</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> topic <span class="keyword">in</span> hot_topics:</span><br><span class="line">        <span class="built_in">print</span>(topic.text)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Failed to retrieve &#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="tiobe"><a href="#tiobe" class="headerlink" title="tiobe"></a>tiobe</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_tiobe_rankings</span>():</span><br><span class="line">    url = <span class="string">&quot;https://www.tiobe.com/tiobe-index/&quot;</span></span><br><span class="line">    response = requests.get(url)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> response.status_code != <span class="number">200</span>:</span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">f&quot;Failed to load page <span class="subst">&#123;url&#125;</span>&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    soup = BeautifulSoup(response.content, <span class="string">&#x27;html.parser&#x27;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Find the table containing the rankings</span></span><br><span class="line">    table = soup.find(<span class="string">&#x27;table&#x27;</span>, &#123;<span class="string">&#x27;class&#x27;</span>: <span class="string">&#x27;table-top20&#x27;</span>&#125;)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> table:</span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">&quot;Failed to find the rankings table on the page&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Extracting data from the table</span></span><br><span class="line">    rankings = []</span><br><span class="line">    rows = table.find_all(<span class="string">&#x27;tr&#x27;</span>)[<span class="number">1</span>:]  <span class="comment"># Skip the header row</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> row <span class="keyword">in</span> rows:</span><br><span class="line">        cols = row.find_all(<span class="string">&#x27;td&#x27;</span>)</span><br><span class="line">        rank = cols[<span class="number">0</span>].text.strip()</span><br><span class="line">        language = cols[<span class="number">3</span>].text.strip()</span><br><span class="line">        ratings = cols[<span class="number">4</span>].text.strip()</span><br><span class="line">        change = cols[<span class="number">5</span>].text.strip()</span><br><span class="line">        rankings.append(&#123;</span><br><span class="line">            <span class="string">&#x27;Rank&#x27;</span>: rank,</span><br><span class="line">            <span class="string">&#x27;Language&#x27;</span>: language,</span><br><span class="line">            <span class="string">&#x27;Ratings&#x27;</span>: ratings,</span><br><span class="line">            <span class="string">&#x27;Change&#x27;</span>: change</span><br><span class="line">        &#125;)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> rankings</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    rankings = get_tiobe_rankings()</span><br><span class="line">    <span class="keyword">for</span> rank <span class="keyword">in</span> rankings:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Rank: <span class="subst">&#123;rank[<span class="string">&#x27;Rank&#x27;</span>]&#125;</span>, Language: <span class="subst">&#123;rank[<span class="string">&#x27;Language&#x27;</span>]&#125;</span>, Ratings: <span class="subst">&#123;rank[<span class="string">&#x27;Ratings&#x27;</span>]&#125;</span>, Change: <span class="subst">&#123;rank[<span class="string">&#x27;Change&#x27;</span>]&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><!--<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line">url = <span class="string">&#x27;https://www.tiobe.com/tiobe-index/&#x27;</span></span><br><span class="line">response = requests.get(url)</span><br><span class="line">soup = BeautifulSoup(response.text, <span class="string">&#x27;html.parser&#x27;</span>)</span><br><span class="line"></span><br><span class="line">table = soup.find(<span class="string">&#x27;table&#x27;</span>, <span class="built_in">id</span>=<span class="string">&#x27;top20&#x27;</span>)</span><br><span class="line">rows = table.find_all(<span class="string">&#x27;tr&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> row <span class="keyword">in</span> rows[<span class="number">1</span>:]:</span><br><span class="line">    columns = row.find_all(<span class="string">&#x27;td&#x27;</span>)</span><br><span class="line">    rank = columns[<span class="number">0</span>].text.strip()</span><br><span class="line">    language = columns[<span class="number">4</span>].text.strip()</span><br><span class="line">    ratings = columns[<span class="number">5</span>].text.strip()</span><br><span class="line">    change = columns[<span class="number">6</span>].text.strip()</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;Rank: <span class="subst">&#123;rank&#125;</span>, Language: <span class="subst">&#123;language&#125;</span>, Ratings: <span class="subst">&#123;ratings&#125;</span>, Change: <span class="subst">&#123;change&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_html_text</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        response = requests.get(url)</span><br><span class="line">        response.raise_for_status()</span><br><span class="line">        <span class="keyword">return</span> response.text</span><br><span class="line">    <span class="keyword">except</span> requests.RequestException <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Error during requests to <span class="subst">&#123;url&#125;</span> : <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">parse_programming_languages</span>(<span class="params">html</span>):</span><br><span class="line">    soup = BeautifulSoup(html, <span class="string">&#x27;html.parser&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    table = soup.find(<span class="string">&#x27;table&#x27;</span>, <span class="built_in">id</span>=<span class="string">&#x27;top20&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> table <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">for</span> row <span class="keyword">in</span> table.tbody.find_all(<span class="string">&#x27;tr&#x27;</span>):</span><br><span class="line">            cols = row.find_all(<span class="string">&#x27;td&#x27;</span>)</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">len</span>(cols) &gt;= <span class="number">3</span>:  <span class="comment"># æ£€æŸ¥æ˜¯å¦æœ‰è¶³å¤Ÿçš„åˆ—</span></span><br><span class="line">                rank = cols[<span class="number">0</span>].text.strip()</span><br><span class="line">                language = cols[<span class="number">4</span>].text.strip()  <span class="comment"># è¯­è¨€åç§°åœ¨ç¬¬5åˆ—</span></span><br><span class="line">                rating = cols[<span class="number">5</span>].text.strip()  <span class="comment"># æ’åç™¾åˆ†æ¯”åœ¨ç¬¬6åˆ—</span></span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;Rank: <span class="subst">&#123;rank&#125;</span>, Language: <span class="subst">&#123;language&#125;</span>, Rating: <span class="subst">&#123;rating&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;No table found with ID &#x27;top20&#x27;&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    url = <span class="string">&quot;https://www.tiobe.com/tiobe-index/&quot;</span></span><br><span class="line">    html_content = get_html_text(url)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> html_content:</span><br><span class="line">        parse_programming_languages(html_content)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>â€“&gt;</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install requests beautifulsoup4</span><br><span class="line"><span class="comment">#pip install BeautifulSoup4</span></span><br></pre></td></tr></table></figure><p>requestsåº“<br>å¦‚æœæ²¡æœ‰å®‰è£…ï¼Œå¯ä»¥ä½¿ç”¨pip install requestsæ¥å®‰è£…</p><p>ERR<br> Could not install packages due to an OSError: [WinError 2] ç³»ç»Ÿæ‰¾ä¸åˆ°æŒ‡å®šçš„æ–‡ä»¶ã€‚: â€˜C:\Python312\Scripts\no<br> #update<br> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">python -m pip install --upgrade pip</span><br><span class="line"><span class="comment">#cache </span></span><br><span class="line">pip cache purge</span><br></pre></td></tr></table></figure></p><h2 id="REST-APIs-get-post"><a href="#REST-APIs-get-post" class="headerlink" title="REST APIs get&#x2F;post"></a>REST APIs get&#x2F;post</h2><p>GET, POST</p><!--, PUT, and DELETE data--><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="comment"># get</span></span><br><span class="line">response = requests.get(<span class="string">&#x27;https://jsonplaceholder.typicode.com/posts/1&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(response.json())</span><br><span class="line"></span><br><span class="line"><span class="comment"># post</span></span><br><span class="line">data = &#123;<span class="string">&#x27;title&#x27;</span>: <span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;body&#x27;</span>: <span class="string">&#x27;bar&#x27;</span>, <span class="string">&#x27;userId&#x27;</span>: <span class="number">1</span>&#125;</span><br><span class="line">response = requests.post(<span class="string">&#x27;https://jsonplaceholder.typicode.com/posts&#x27;</span>, json=data)</span><br><span class="line"><span class="built_in">print</span>(response.json())</span><br></pre></td></tr></table></figure><h1 id="ğŸmail"><a href="#ğŸmail" class="headerlink" title="ğŸmail"></a>ğŸmail</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> smtplib  </span><br><span class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText  </span><br><span class="line"><span class="keyword">from</span> email.mime.multipart <span class="keyword">import</span> MIMEMultipart  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># è®¾ç½®é‚®ä»¶æœåŠ¡å™¨å’Œç«¯å£  </span></span><br><span class="line">smtp_server = <span class="string">&#x27;smtp.qq.com&#x27;</span> </span><br><span class="line">smtp_port = <span class="number">25</span>  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># è®¾ç½®å‘ä»¶äººå’Œæ”¶ä»¶äººä¿¡æ¯  </span></span><br><span class="line">sender_email = <span class="string">&#x27;42@qq.com&#x27;</span>  <span class="comment"># é‚®ç®±åœ°å€  </span></span><br><span class="line">sender_password = <span class="string">&#x27;lpoumq&#x27;</span>  <span class="comment"># å¯†ç   </span></span><br><span class="line">receiver_email = <span class="string">&#x27;76@qq.com&#x27;</span>  <span class="comment"># æ”¶ä»¶äººé‚®ç®±åœ°å€  </span></span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">msg = MIMEMultipart()  </span><br><span class="line">  </span><br><span class="line"> </span><br><span class="line">msg[<span class="string">&#x27;From&#x27;</span>] = sender_email  </span><br><span class="line">msg[<span class="string">&#x27;To&#x27;</span>] = receiver_email  </span><br><span class="line">msg[<span class="string">&#x27;Subject&#x27;</span>] = <span class="string">&#x27;Hello from Python&#x27;</span>  </span><br><span class="line">body = <span class="string">&#x27;This is a test email sent from Python. mmmmmmm &#x27;</span>  </span><br><span class="line">msg.attach(MIMEText(body, <span class="string">&#x27;plain&#x27;</span>))  </span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> smtplib.SMTP(smtp_server, smtp_port) <span class="keyword">as</span> server:  </span><br><span class="line"></span><br><span class="line">    server.starttls()  </span><br><span class="line">    server.login(sender_email, sender_password)  </span><br><span class="line">    <span class="comment"># å‘é€é‚®ä»¶  </span></span><br><span class="line">    server.sendmail(sender_email, receiver_email, msg.as_string())  </span><br><span class="line">  </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Email sent successfully!&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="ğŸ´socket"><a href="#ğŸ´socket" class="headerlink" title="ğŸ´socket"></a>ğŸ´socket</h1><p>client</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">connect_to_socket</span>(<span class="params">host, port</span>):  </span><br><span class="line">    <span class="comment"># åˆ›å»ºä¸€ä¸ªæ–°çš„socketå¯¹è±¡ï¼ŒæŒ‡å®šIPv4å’ŒTCP  </span></span><br><span class="line">    client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># è¿æ¥åˆ°æœåŠ¡å™¨  </span></span><br><span class="line">    <span class="keyword">try</span>:  </span><br><span class="line">        client_socket.connect((host, port))  </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;æˆåŠŸè¿æ¥åˆ° <span class="subst">&#123;host&#125;</span>:<span class="subst">&#123;port&#125;</span>&quot;</span>)  </span><br><span class="line">   </span><br><span class="line">        message = <span class="string">&quot;Hello, Server!&quot;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>)  </span><br><span class="line">        client_socket.sendall(message)  </span><br><span class="line">  </span><br><span class="line">        <span class="comment"># æ¥æ”¶æ•°æ®  </span></span><br><span class="line">        data = client_socket.recv(<span class="number">1024</span>)  </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;ä»æœåŠ¡å™¨æ¥æ”¶åˆ°çš„æ•°æ®: <span class="subst">&#123;data.decode(<span class="string">&#x27;utf-8&#x27;</span>)&#125;</span>&quot;</span>)  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> e:  </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;è¿æ¥å¤±è´¥: <span class="subst">&#123;e&#125;</span>&quot;</span>)  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">finally</span>:  </span><br><span class="line">        <span class="comment"># å…³é—­socketè¿æ¥  </span></span><br><span class="line">        client_socket.close()  </span><br><span class="line"></span><br><span class="line">connect_to_socket(<span class="string">&#x27;localhost&#x27;</span>, <span class="number">6001</span>)</span><br></pre></td></tr></table></figure><p>server</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> socket  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">start_server</span>(<span class="params">host, port</span>):  </span><br><span class="line"></span><br><span class="line">    server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># ç»‘å®šsocketåˆ°æŒ‡å®šçš„åœ°å€å’Œç«¯å£  </span></span><br><span class="line">    server_address = (host, port)  </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;æœåŠ¡å™¨å°†è¿è¡Œåœ¨ <span class="subst">&#123;host&#125;</span>:<span class="subst">&#123;port&#125;</span>&quot;</span>)  </span><br><span class="line">    server_socket.bind(server_address)  </span><br><span class="line">  </span><br><span class="line">    <span class="comment"># å¼€å§‹ç›‘å¬è¿æ¥  </span></span><br><span class="line">    server_socket.listen(<span class="number">1</span>)  </span><br><span class="line">  </span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:  </span><br><span class="line">    </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥...&quot;</span>)  </span><br><span class="line">        connection, client_address = server_socket.accept()  </span><br><span class="line">        <span class="keyword">try</span>:  </span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;å®¢æˆ·ç«¯ <span class="subst">&#123;client_address&#125;</span> å·²è¿æ¥&quot;</span>)  </span><br><span class="line">  </span><br><span class="line">            <span class="comment"># æ¥æ”¶æ•°æ®  </span></span><br><span class="line">            <span class="keyword">while</span> <span class="literal">True</span>:  </span><br><span class="line">                data = connection.recv(<span class="number">1024</span>)  </span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> data:  </span><br><span class="line">                    <span class="built_in">print</span>(<span class="string">&quot;å®¢æˆ·ç«¯å·²æ–­å¼€è¿æ¥&quot;</span>)  </span><br><span class="line">                    <span class="keyword">break</span>  </span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;ä» <span class="subst">&#123;client_address&#125;</span> æ¥æ”¶åˆ°çš„æ•°æ®: <span class="subst">&#123;data.decode(<span class="string">&#x27;utf-8&#x27;</span>)&#125;</span>&quot;</span>)  </span><br><span class="line">  </span><br><span class="line">                <span class="comment"># å‘é€ä¸€äº›æ•°æ®å›å®¢æˆ·ç«¯  </span></span><br><span class="line">                response = <span class="string">&quot;Hello from server!&quot;</span>.encode(<span class="string">&#x27;utf-8&#x27;</span>)  </span><br><span class="line">                connection.sendall(response)  </span><br><span class="line">  </span><br><span class="line">        <span class="keyword">except</span> ConnectionResetError:  </span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;å®¢æˆ·ç«¯å¼‚å¸¸æ–­å¼€è¿æ¥&quot;</span>)  </span><br><span class="line">  </span><br><span class="line">        <span class="keyword">finally</span>:  </span><br><span class="line">            <span class="comment"># æ¸…ç†è¿æ¥  </span></span><br><span class="line">            connection.close()  </span><br><span class="line">  </span><br><span class="line">start_server(<span class="string">&#x27;localhost&#x27;</span>, <span class="number">6002</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="ğŸdocker"><a href="#ğŸdocker" class="headerlink" title="ğŸdocker"></a>ğŸdocker</h1><h2 id="server"><a href="#server" class="headerlink" title="server"></a>server</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># testdk.py</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run_server</span>():</span><br><span class="line">    host = <span class="string">&#x27;0.0.0.0&#x27;</span>  <span class="comment"># ç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£</span></span><br><span class="line">    port = <span class="number">12345</span>     <span class="comment"># è‡ªå®šä¹‰ç«¯å£å·</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">with</span> socket.socket(socket.AF_INET, socket.SOCK_STREAM) <span class="keyword">as</span> s:</span><br><span class="line">        s.bind((host, port))</span><br><span class="line">        s.listen()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Server listening on <span class="subst">&#123;host&#125;</span>:<span class="subst">&#123;port&#125;</span>&quot;</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">            conn, addr = s.accept()</span><br><span class="line">            <span class="keyword">with</span> conn:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">f&quot;Connected by <span class="subst">&#123;addr&#125;</span>&quot;</span>)</span><br><span class="line">                data = conn.recv(<span class="number">1024</span>)</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> data:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                conn.sendall(data)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    run_server()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Dockerfile</span></span><br><span class="line">FROM python:3.8-slim-buster</span><br><span class="line"></span><br><span class="line">WORKDIR /app</span><br><span class="line"></span><br><span class="line">COPY requirements.txt ./</span><br><span class="line">RUN pip install --no-cache-dir -r requirements.txt</span><br><span class="line"></span><br><span class="line">COPY . .</span><br><span class="line"></span><br><span class="line">CMD [<span class="string">&quot;python&quot;</span>, <span class="string">&quot;./testdk.py&quot;</span>]</span><br></pre></td></tr></table></figure><h2 id="build"><a href="#build" class="headerlink" title="build"></a>build</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t my-python-socket-server .</span><br></pre></td></tr></table></figure><h2 id="run"><a href="#run" class="headerlink" title="run"></a>run</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 12345:12345 my-python-socket-server</span><br></pre></td></tr></table></figure><h2 id="client-test"><a href="#client-test" class="headerlink" title="client test"></a>client test</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># testdkclient2.py</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> socket.socket(socket.AF_INET, socket.SOCK_STREAM) <span class="keyword">as</span> s:</span><br><span class="line">    s.connect((<span class="string">&#x27;localhost&#x27;</span>, <span class="number">12345</span>))</span><br><span class="line">    s.sendall(<span class="string">b&#x27;Hello, Server!mmmm&#x27;</span>)</span><br><span class="line">    data = s.recv(<span class="number">1024</span>)</span><br><span class="line">    </span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Received&#x27;</span>, <span class="built_in">repr</span>(data))</span><br></pre></td></tr></table></figure><h1 id="ğŸ²Graphics"><a href="#ğŸ²Graphics" class="headerlink" title="ğŸ²Graphics"></a>ğŸ²Graphics</h1><h2 id="Turtle"><a href="#Turtle" class="headerlink" title="Turtle"></a>Turtle</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># å¯¼å…¥turtleåŒ…çš„æ‰€æœ‰å†…å®¹:</span></span><br><span class="line"><span class="keyword">from</span> turtle <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®ç¬”åˆ·å®½åº¦:</span></span><br><span class="line">width(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å‰è¿›:</span></span><br><span class="line">forward(<span class="number">100</span>)</span><br><span class="line"><span class="comment"># å³è½¬90åº¦:</span></span><br><span class="line">right(<span class="number">90</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¬”åˆ·é¢œè‰²:</span></span><br><span class="line">pencolor(<span class="string">&#x27;yellow&#x27;</span>)</span><br><span class="line">forward(<span class="number">150</span>)</span><br><span class="line">right(<span class="number">90</span>)</span><br><span class="line"></span><br><span class="line">pencolor(<span class="string">&#x27;red&#x27;</span>)</span><br><span class="line">forward(<span class="number">100</span>)</span><br><span class="line">right(<span class="number">90</span>)</span><br><span class="line"></span><br><span class="line">pencolor(<span class="string">&#x27;blue&#x27;</span>)</span><br><span class="line">forward(<span class="number">100</span>)</span><br><span class="line">right(<span class="number">90</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è°ƒç”¨done()ä½¿å¾—çª—å£ç­‰å¾…è¢«å…³é—­ï¼Œå¦åˆ™å°†ç«‹åˆ»å…³é—­çª—å£:</span></span><br><span class="line">done()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> turtle  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># åˆå§‹åŒ–turtle  </span></span><br><span class="line">window = turtle.Screen()  </span><br><span class="line">window.bgcolor(<span class="string">&quot;white&quot;</span>)  <span class="comment"># è®¾ç½®èƒŒæ™¯é¢œè‰²ä¸ºé»‘è‰²  </span></span><br><span class="line">love = turtle.Turtle()  </span><br><span class="line">love.speed(<span class="number">1</span>)  <span class="comment"># è®¾ç½®ç»˜å›¾é€Ÿåº¦ï¼Œ1æ˜¯æœ€æ…¢ï¼Œ0æ˜¯æœ€å¿«  </span></span><br><span class="line">love.color(<span class="string">&quot;red&quot;</span>, <span class="string">&quot;pink&quot;</span>)  <span class="comment"># è®¾ç½®ç”»ç¬”é¢œè‰²å’Œå¡«å……é¢œè‰²  </span></span><br><span class="line">love.begin_fill()  <span class="comment"># å¼€å§‹å¡«å……é¢œè‰²  </span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># ç»˜åˆ¶çˆ±å¿ƒçš„å·¦åŠéƒ¨åˆ†  </span></span><br><span class="line">love.left(<span class="number">140</span>)  </span><br><span class="line">love.forward(<span class="number">180</span>)  </span><br><span class="line">love.circle(-<span class="number">100</span>, <span class="number">200</span>)  <span class="comment"># ç»˜åˆ¶ä¸€ä¸ªåŠå¾„ä¸º100ï¼Œå¼§åº¦ä¸º200çš„åœ†ï¼ˆåœ†å¿ƒåœ¨å·¦ä¾§ï¼‰  </span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># ç»˜åˆ¶çˆ±å¿ƒçš„å³åŠéƒ¨åˆ†  </span></span><br><span class="line">love.left(<span class="number">120</span>)  </span><br><span class="line">love.circle(-<span class="number">100</span>, <span class="number">200</span>)  <span class="comment"># ç»˜åˆ¶ä¸€ä¸ªåŠå¾„ä¸º100ï¼Œå¼§åº¦ä¸º200çš„åœ†ï¼ˆåœ†å¿ƒåœ¨å³ä¾§ï¼‰  </span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># å›åˆ°èµ·ç‚¹å¹¶ç»“æŸå¡«å……  </span></span><br><span class="line">love.forward(<span class="number">180</span>)  </span><br><span class="line">love.end_fill()  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># éšè—turtleå›¾æ ‡  </span></span><br><span class="line">love.hideturtle()  </span><br><span class="line">  </span><br><span class="line"><span class="comment"># ç»“æŸç»˜åˆ¶ï¼Œç­‰å¾…ç”¨æˆ·å…³é—­çª—å£  </span></span><br><span class="line">turtle.done()</span><br></pre></td></tr></table></figure><h2 id="tkinter"><a href="#tkinter" class="headerlink" title="tkinter"></a>tkinter</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> tkinter <span class="keyword">as</span> tk  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">on_closing</span>():  </span><br><span class="line">    root.destroy()  <span class="comment"># å½“ç‚¹å‡»å…³é—­æŒ‰é’®æ—¶è°ƒç”¨  </span></span><br><span class="line">  </span><br><span class="line">root = tk.Tk()  </span><br><span class="line">root.protocol(<span class="string">&quot;WM_DELETE_WINDOW&quot;</span>, on_closing)  </span><br><span class="line">  </span><br><span class="line">label = tk.Label(root, text=<span class="string">&quot;Hello, Tkinter!&quot;</span>)  </span><br><span class="line">label.pack()  </span><br><span class="line">  </span><br><span class="line">root.mainloop()</span><br></pre></td></tr></table></figure><h2 id="ä¸‹ç­ï¼"><a href="#ä¸‹ç­ï¼" class="headerlink" title="ä¸‹ç­ï¼"></a>ä¸‹ç­ï¼</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tkinter <span class="keyword">as</span> tk</span><br><span class="line"><span class="keyword">from</span> tkinter <span class="keyword">import</span> messagebox</span><br><span class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime, timedelta</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">validate_time</span>(<span class="params">input_time</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;éªŒè¯è¾“å…¥çš„æ—¶é—´æ ¼å¼æ˜¯å¦æ­£ç¡®&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        time.strptime(input_time, <span class="string">&#x27;%H:%M:%S&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">    <span class="keyword">except</span> ValueError:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">start_countdown</span>():</span><br><span class="line">    input_time = entry.get()</span><br><span class="line">    <span class="keyword">if</span> validate_time(input_time):</span><br><span class="line">        target_time = datetime.strptime(input_time, <span class="string">&#x27;%H:%M:%S&#x27;</span>)</span><br><span class="line">        today = datetime.combine(datetime.today(), datetime.<span class="built_in">min</span>.time())</span><br><span class="line">        target_datetime = datetime.combine(today, target_time.time())</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> target_datetime &lt; datetime.now():</span><br><span class="line">            target_datetime += timedelta(days=<span class="number">1</span>)  </span><br><span class="line">        </span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">update_countdown</span>():</span><br><span class="line">            now = datetime.now()</span><br><span class="line">            remaining_time = target_datetime - now</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> remaining_time.total_seconds() &lt;= <span class="number">0</span>:</span><br><span class="line">                label.config(text=<span class="string">&quot;ä¸‹ç­!å¤´ä¹Ÿä¸å›&quot;</span>)</span><br><span class="line">                messagebox.showinfo(<span class="string">&quot;Timer&quot;</span>, <span class="string">&quot;ä¸‹ç­!å¤´ä¹Ÿä¸å›&quot;</span>)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                hours, remainder = <span class="built_in">divmod</span>(remaining_time.seconds, <span class="number">3600</span>)</span><br><span class="line">                minutes, seconds = <span class="built_in">divmod</span>(remainder, <span class="number">60</span>)</span><br><span class="line">                </span><br><span class="line">                label.config(text=<span class="string">f&quot;<span class="subst">&#123;hours:02d&#125;</span>:<span class="subst">&#123;minutes:02d&#125;</span>:<span class="subst">&#123;seconds:02d&#125;</span>&quot;</span>)</span><br><span class="line">                window.after(<span class="number">1000</span>, update_countdown)  <span class="comment"># timeout</span></span><br><span class="line">        </span><br><span class="line">        update_countdown()</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        messagebox.showerror(<span class="string">&quot;Error&quot;</span>, <span class="string">&quot;æ—¶é—´å¿…é¡»æ˜¯ HH:MM:SS.&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># window</span></span><br><span class="line">window = tk.Tk()</span><br><span class="line">window.title(<span class="string">&quot;ä¸‹ç­!å¤´ä¹Ÿä¸å›&quot;</span>)</span><br><span class="line">window.geometry(<span class="string">&quot;400x300&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Entry</span></span><br><span class="line">tk.Label(window, text=<span class="string">&quot;ä¸‹ç­æ—¶é—´ &gt; HH:MM:SS :&quot;</span>).pack()</span><br><span class="line">entry = tk.Entry(window)</span><br><span class="line">entry.pack()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Button</span></span><br><span class="line">start_button = tk.Button(window, text=<span class="string">&quot;å¼€å§‹æ‘¸é±¼ğŸŸ&quot;</span>, command=start_countdown)</span><br><span class="line">start_button.pack()</span><br><span class="line">start_button.pack(pady=<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">label = tk.Label(window, text=<span class="string">&quot;&quot;</span>, font=(<span class="string">&quot;Helvetica&quot;</span>, <span class="number">48</span>))</span><br><span class="line">label.pack(pady=<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line">window.mainloop()</span><br></pre></td></tr></table></figure><h1 id="ğŸ‡opencv"><a href="#ğŸ‡opencv" class="headerlink" title="ğŸ‡opencv"></a>ğŸ‡opencv</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install opencv-python</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="comment">#read</span></span><br><span class="line">image = cv2.imread(<span class="string">&#x27;e1.jpg&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> image <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Error: Image not found or unable to read.&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    cv2.imshow(<span class="string">&#x27;Image&#x27;</span>, image)</span><br><span class="line">    cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">    cv2.destroyAllWindows()</span><br><span class="line">    cv2.imwrite(<span class="string">&#x27;output.jpg&#x27;</span>, image)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åè‰²å¤„ç†</span></span><br><span class="line">   inverted_image = cv2.bitwise_not(image)</span><br></pre></td></tr></table></figure><h2 id="Pillow-PIL"><a href="#Pillow-PIL" class="headerlink" title="Pillow PIL"></a>Pillow PIL</h2><p>å›¾åƒå¤„ç†åº“</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install Pillow</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½å›¾ç‰‡</span></span><br><span class="line">image = Image.<span class="built_in">open</span>(<span class="string">&#x27;e1.jpg&#x27;</span>)</span><br><span class="line">image.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç¼©æ”¾åˆ°å®½åº¦ä¸º300ï¼Œé«˜åº¦ç­‰æ¯”ä¾‹ç¼©æ”¾</span></span><br><span class="line">image = Image.<span class="built_in">open</span>(<span class="string">&#x27;e1.jpg&#x27;</span>)</span><br><span class="line">image_resized = image.resize((<span class="number">300</span>, image.height * <span class="number">300</span> // image.width))</span><br><span class="line"><span class="comment"># save</span></span><br><span class="line">image_resized.save(<span class="string">&#x27;resized240525.jpg&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è½¬æ¢æˆPNGæ ¼å¼</span></span><br><span class="line">image = Image.<span class="built_in">open</span>(<span class="string">&#x27;e1.jpg&#x27;</span>)</span><br><span class="line">image.save(<span class="string">&#x27;png240525.png&#x27;</span>, <span class="built_in">format</span>=<span class="string">&#x27;PNG&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># è½¬æ¢æˆPNGæ ¼å¼</span></span><br><span class="line">image = Image.<span class="built_in">open</span>(<span class="string">&#x27;png240525.png&#x27;</span>)</span><br><span class="line">image.save(<span class="string">&#x27;j240525.jpg&#x27;</span>, <span class="built_in">format</span>=<span class="string">&#x27;jpeg&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è£å‰ªå›¾ç‰‡ï¼Œå‚æ•°æ˜¯å·¦ä¸Šè§’å’Œå³ä¸‹è§’çš„åæ ‡</span></span><br><span class="line">image = Image.<span class="built_in">open</span>(<span class="string">&#x27;e1.jpg&#x27;</span>)</span><br><span class="line">cropped_image = image.crop((<span class="number">100</span>, <span class="number">100</span>, <span class="number">400</span>, <span class="number">400</span>))</span><br><span class="line">cropped_image.show()</span><br><span class="line">cropped_image.save(<span class="string">&#x27;cropped_image240525.jpg&#x27;</span>)</span><br><span class="line"><span class="comment"># é¡ºæ—¶é’ˆæ—‹è½¬90åº¦</span></span><br><span class="line">image = Image.<span class="built_in">open</span>(<span class="string">&#x27;e1.jpg&#x27;</span>)</span><br><span class="line">rotated_image = image.rotate(<span class="number">90</span>)</span><br><span class="line">rotated_image.show()</span><br><span class="line">rotated_image.save(<span class="string">&#x27;rotated_image240525.jpg&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image, ImageFilter</span><br><span class="line"><span class="comment">#æ¨¡ç³Šæ»¤é•œ</span></span><br><span class="line">image = Image.<span class="built_in">open</span>(<span class="string">&#x27;e1.jpg&#x27;</span>)</span><br><span class="line">blurred_image = image.<span class="built_in">filter</span>(ImageFilter.BLUR)</span><br><span class="line">blurred_image.show()</span><br><span class="line">blurred_image.save(<span class="string">&#x27;blurred_image240525.jpg&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><!--åœ¨Pythonä¸­ä½¿ç”¨Mask R-CNNå’ŒFast R-CNNè¿›è¡Œå¯¹è±¡æ£€æµ‹å’Œå®ä¾‹åˆ†å‰²ï¼Œå¯ä»¥é€šè¿‡ä¸€äº›æµè¡Œçš„æ·±åº¦å­¦ä¹ æ¡†æ¶å’Œåº“æ¥å®ç°ï¼Œæ¯”å¦‚TensorFlowã€PyTorchä»¥åŠåŸºäºè¿™äº›æ¡†æ¶çš„é«˜çº§åº“å¦‚Matterportçš„Mask R-CNNåº“å’ŒFacebook AIçš„Detectron2ã€‚ä¸‹é¢æˆ‘å°†ç®€è¦ä»‹ç»å¦‚ä½•ä½¿ç”¨è¿™äº›å·¥å…·ä»¥ä¸­æ–‡ç¯å¢ƒä¸ºä¾‹è¿›è¡Œæ“ä½œã€‚--><h1 id="ğŸ¯PyTorch"><a href="#ğŸ¯PyTorch" class="headerlink" title="ğŸ¯PyTorch"></a>ğŸ¯PyTorch</h1><p>æœºå™¨å­¦ä¹ </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pip install torch torchvision</span><br><span class="line">pip install pillow</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torchvision.transforms <span class="keyword">as</span> transforms</span><br><span class="line"><span class="keyword">from</span> torchvision.models <span class="keyword">import</span> resnet50</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"></span><br><span class="line"><span class="comment"># ResNet50</span></span><br><span class="line">model = resnet50(pretrained=<span class="literal">True</span>)</span><br><span class="line">model.<span class="built_in">eval</span>()  <span class="comment">#eval</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># transform </span></span><br><span class="line">transform = transforms.Compose([</span><br><span class="line">    transforms.Resize(<span class="number">256</span>),</span><br><span class="line">    transforms.CenterCrop(<span class="number">224</span>),</span><br><span class="line">    transforms.ToTensor(),</span><br><span class="line">    transforms.Normalize(mean=[<span class="number">0.485</span>, <span class="number">0.456</span>, <span class="number">0.406</span>], std=[<span class="number">0.229</span>, <span class="number">0.224</span>, <span class="number">0.225</span>]),</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="comment"># PIL</span></span><br><span class="line">image_path = <span class="string">&#x27;e1.jpg&#x27;</span>  </span><br><span class="line">image = Image.<span class="built_in">open</span>(image_path)</span><br><span class="line"></span><br><span class="line"><span class="comment"># transform image</span></span><br><span class="line">image_tensor = transform(image)</span><br><span class="line">image_tensor = image_tensor.unsqueeze(<span class="number">0</span>)  <span class="comment"># æ·»åŠ batchç»´åº¦</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># tensor</span></span><br><span class="line">output = model(image_tensor)</span><br><span class="line"></span><br><span class="line"><span class="comment"># predictedclass </span></span><br><span class="line">_, pred = output.<span class="built_in">max</span>(<span class="number">1</span>)</span><br><span class="line">predicted_class = pred.item()</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Predicted class index:&quot;</span>, predicted_class)</span><br></pre></td></tr></table></figure><!-- å‡è®¾ä½ æœ‰ä¸€ä¸ªåŒ…å«ç±»åˆ«åç§°çš„åˆ—è¡¨ï¼ˆè¿™é‡Œç®€åŒ–å¤„ç†ï¼Œå®é™…åº”ç”¨ä¸­å¯èƒ½éœ€è¦ä¸‹è½½æˆ–è‡ªå·±åˆ›å»ºï¼‰ç”±äºæœ¬ç¤ºä¾‹æœªæä¾›å®é™…çš„ç±»åˆ«åç§°æ–‡ä»¶ï¼Œè¿™é‡Œä»…æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨é¢„æµ‹ç´¢å¼• åœ¨å®é™…åº”ç”¨ä¸­ï¼Œä½ å¯èƒ½éœ€è¦æ ¹æ®æ¨¡å‹å¯¹åº”çš„ç±»åˆ«ç´¢å¼•å»æŸ¥æ‰¾å…·ä½“çš„ç±»åˆ«åç§°ç¤ºä¾‹ä¸­çœç•¥è¿™ä¸€æ­¥ï¼Œç›´æ¥æ‰“å°é¢„æµ‹çš„ç´¢å¼•é¢„æµ‹ç´¢å¼•æ˜¯æŒ‡æ¨¡å‹åœ¨è¿›è¡Œåˆ†ç±»ä»»åŠ¡æ—¶ï¼Œå¯¹äºç»™å®šè¾“å…¥ï¼Œè¾“å‡ºçš„æ¦‚ç‡åˆ†å¸ƒä¸­æœ€å¤§æ¦‚ç‡æ‰€å¯¹åº”çš„ç±»åˆ«åºå·ã€‚åœ¨å¤šæ•°åˆ†ç±»é—®é¢˜ä¸­ï¼Œæ¨¡å‹çš„è¾“å‡ºä¼šç»è¿‡softmaxå‡½æ•°è½¬æ¢ä¸ºæ¦‚ç‡åˆ†å¸ƒï¼Œå…¶ä¸­æ¯ä¸ªå€¼ä»£è¡¨è¾“å…¥å±äºå„ä¸ªç±»åˆ«çš„æ¦‚ç‡ã€‚é¢„æµ‹ç´¢å¼•å°±æ˜¯è¿™ä¸ªæ¦‚ç‡åˆ†å¸ƒä¸­æœ€å¤§å€¼æ‰€å¯¹åº”çš„ç±»åˆ«åºå·ï¼Œä¹Ÿå°±æ˜¯æ¨¡å‹è®¤ä¸ºæœ€å¯èƒ½çš„ç±»åˆ«ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¯¹å›¾ç‰‡è¿›è¡Œäº†ä»¥ä¸‹å¤„ç†ï¼šåŠ è½½å›¾åƒï¼šä½¿ç”¨PILåº“è¯»å–äº†ä¸€ä¸ªå›¾åƒæ–‡ä»¶ã€‚PILæ˜¯ä¸€ä¸ªå¹¿æ³›ä½¿ç”¨çš„Pythonå›¾åƒå¤„ç†åº“ï¼Œæ”¯æŒå¤šç§å›¾åƒæ ¼å¼çš„è¯»å†™ã€‚å›¾åƒé¢„å¤„ç†ï¼šåº”ç”¨äº†ä¸€ç³»åˆ—è½¬æ¢æ¥å‡†å¤‡å›¾åƒä¾›æ¨¡å‹ä½¿ç”¨ã€‚è¿™äº›è½¬æ¢åŒ…æ‹¬ï¼šè°ƒæ•´å¤§å°ï¼šå°†å›¾åƒè°ƒæ•´ä¸º256x256åƒç´ ï¼Œä»¥ç¬¦åˆæ¨¡å‹è¾“å…¥å°ºå¯¸çš„è¦æ±‚ã€‚ä¸­å¿ƒè£å‰ªï¼šä»è°ƒæ•´å¤§å°åçš„å›¾åƒä¸­å¿ƒè£å‰ªå‡º224x224åƒç´ çš„åŒºåŸŸï¼Œè¿™æ˜¯ResNetæ¨¡å‹çš„æ ‡å‡†è¾“å…¥å°ºå¯¸ã€‚è½¬ä¸ºTensorï¼šå°†PILå›¾åƒè½¬æ¢ä¸ºPyTorchçš„Tensoræ ¼å¼ï¼Œä½¿å›¾åƒæ•°æ®èƒ½è¢«æ¨¡å‹å¤„ç†ã€‚æ ‡å‡†åŒ–ï¼šå¯¹å›¾åƒçš„æ¯ä¸ªé€šé“ï¼ˆçº¢ã€ç»¿ã€è“ï¼‰è¿›è¡Œæ ‡å‡†åŒ–å¤„ç†ï¼Œä½¿ç”¨ç‰¹å®šçš„å‡å€¼å’Œæ ‡å‡†å·®ï¼Œè¿™æ˜¯åŸºäºImageNetè®­ç»ƒé›†ç»Ÿè®¡å¾—å‡ºçš„ï¼Œä»¥ç¡®ä¿è¾“å…¥æ•°æ®ä¸æ¨¡å‹è®­ç»ƒæ—¶çš„æ•°æ®åˆ†å¸ƒä¸€è‡´ã€‚ç›®çš„ï¼šé€‚åº”æ¨¡å‹è¾“å…¥è¦æ±‚ï¼šé€šè¿‡è°ƒæ•´å°ºå¯¸å’Œè£å‰ªï¼Œç¡®ä¿å›¾åƒå°ºå¯¸ç¬¦åˆæ¨¡å‹çš„è¾“å…¥è§„æ ¼ã€‚æé«˜æ¨¡å‹æ€§èƒ½ï¼šæ ‡å‡†åŒ–å¯ä»¥å‡å°‘ä¸åŒå›¾åƒé—´å…‰ç…§å’Œè‰²å½©å·®å¼‚çš„å½±å“ï¼Œä½¿å¾—æ¨¡å‹èƒ½å¤Ÿæ›´ä¸“æ³¨äºå­¦ä¹ å›¾åƒçš„ç»“æ„ç‰¹å¾ã€‚é¢„æµ‹å›¾åƒç±»åˆ«ï¼šæœ€ç»ˆï¼Œé€šè¿‡é¢„è®­ç»ƒçš„ResNet50æ¨¡å‹å¯¹å¤„ç†è¿‡çš„å›¾åƒè¿›è¡Œåˆ†ç±»é¢„æµ‹ï¼Œç›®çš„æ˜¯è¯†åˆ«å‡ºå›¾åƒä¸­æœ€å¯èƒ½çš„ç‰©ä½“æˆ–åœºæ™¯ç±»åˆ«ã€‚è¿™æœ‰åŠ©äºç†è§£å›¾åƒå†…å®¹ï¼Œé€‚ç”¨äºå¤šç§åº”ç”¨åœºæ™¯ï¼Œå¦‚å›¾åƒåˆ†ç±»ã€å†…å®¹è¿‡æ»¤ã€è¾…åŠ©å†³ç­–ç­‰ã€‚--><h1 id="ğŸ‚web"><a href="#ğŸ‚web" class="headerlink" title="ğŸ‚web"></a>ğŸ‚web</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ä»wsgirefæ¨¡å—å¯¼å…¥:</span></span><br><span class="line"><span class="keyword">from</span> wsgiref.simple_server <span class="keyword">import</span> make_server</span><br><span class="line"><span class="comment"># å¯¼å…¥æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„applicationå‡½æ•°:</span></span><br><span class="line"><span class="keyword">from</span> hi <span class="keyword">import</span> application</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨ï¼ŒIPåœ°å€ä¸ºç©ºï¼Œç«¯å£æ˜¯8000ï¼Œå¤„ç†å‡½æ•°æ˜¯application:</span></span><br><span class="line">httpd = make_server(<span class="string">&#x27;&#x27;</span>, <span class="number">8000</span>, application)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;Serving HTTP on port 8000...&#x27;</span>)</span><br><span class="line"><span class="comment"># å¼€å§‹ç›‘å¬HTTPè¯·æ±‚:</span></span><br><span class="line">httpd.serve_forever()</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#hi.py</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">application</span>(<span class="params">environ, start_response</span>):</span><br><span class="line">    start_response(<span class="string">&#x27;200 OK&#x27;</span>, [(<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;text/html&#x27;</span>)])</span><br><span class="line">    <span class="keyword">return</span> [<span class="string">b&#x27;&lt;h1&gt;Hello, web!&lt;/h1&gt;&#x27;</span>]</span><br></pre></td></tr></table></figure><h2 id="flask"><a href="#flask" class="headerlink" title="flask"></a>flask</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install flask</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> request</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">home</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&lt;h1&gt;Home&lt;/h1&gt;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/login&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">signin_form</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#x27;&#x27;&lt;form action=&quot;/login&quot; method=&quot;post&quot;&gt;</span></span><br><span class="line"><span class="string">              &lt;p&gt;&lt;input name=&quot;username&quot;&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">              &lt;p&gt;&lt;input name=&quot;password&quot; type=&quot;password&quot;&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">              &lt;p&gt;&lt;button type=&quot;submit&quot;&gt;Sign In&lt;/button&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">              &lt;/form&gt;&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/login&#x27;</span>, methods=[<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">signin</span>():</span><br><span class="line">    <span class="comment"># éœ€è¦ä»requestå¯¹è±¡è¯»å–è¡¨å•å†…å®¹ï¼š</span></span><br><span class="line">    <span class="keyword">if</span> request.form[<span class="string">&#x27;username&#x27;</span>]==<span class="string">&#x27;admin&#x27;</span> <span class="keyword">and</span> request.form[<span class="string">&#x27;password&#x27;</span>]==<span class="string">&#x27;123123&#x27;</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;&lt;h3&gt;Hello, admin!&lt;/h3&gt;&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&lt;h3&gt;Bad username or password.&lt;/h3&gt;&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="fastapi"><a href="#fastapi" class="headerlink" title="fastapi"></a>fastapi</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install fastapi uvicorn[standard]</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#y.p</span></span><br><span class="line"><span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI  </span><br><span class="line">  </span><br><span class="line">app = FastAPI()  </span><br><span class="line">  </span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/&quot;</span></span>)  </span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">read_root</span>():  </span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;Hello&quot;</span>: <span class="string">&quot;World&quot;</span>&#125;  </span><br><span class="line">  </span><br><span class="line"><span class="meta">@app.get(<span class="params"><span class="string">&quot;/items/&#123;item_id&#125;&quot;</span></span>)  </span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">read_item</span>(<span class="params">item_id: <span class="built_in">int</span>, q: <span class="built_in">str</span> = <span class="literal">None</span></span>):  </span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">&quot;item_id&quot;</span>: item_id, <span class="string">&quot;q&quot;</span>: q&#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uvicorn y:app --reload</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://127.0.0.1:8000/   &#123;&quot;Hello&quot;: &quot;World&quot;&#125;ï¼Œ</span><br><span class="line">http://127.0.0.1:8000/items/5?q=m &#123;&quot;item_id&quot;: 5, &quot;q&quot;: &quot;m&quot;&#125;</span><br></pre></td></tr></table></figure><h1 id="ğŸ­debian-setup-python3-9"><a href="#ğŸ­debian-setup-python3-9" class="headerlink" title="ğŸ­debian setup python3.9"></a>ğŸ­debian setup python3.9</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install -y wget build-essential libreadline-gplv2-dev libncursesw5-dev libssl-dev libsqlite3-dev tk-dev libgdbm-dev libc6-dev libbz2-dev</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#dl</span></span><br><span class="line"><span class="built_in">cd</span> /usr/src</span><br><span class="line">sudo wget https://www.python.org/ftp/python/3.9.0/Python-3.9.0.tgz</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo tar xzf Python-3.9.0.tgz</span><br><span class="line"><span class="built_in">cd</span> Python-3.9.0</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo ./configure --enable-optimizations</span><br><span class="line">sudo make -j 4  <span class="comment"># æ›¿æ¢4ä¸ºä½ çš„CPUæ ¸å¿ƒæ•°</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo make altinstall  <span class="comment"># ä½¿ç”¨altinstallä»¥é¿å…è¦†ç›–ç³»ç»Ÿé»˜è®¤çš„pythonç‰ˆæœ¬</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3.9 --version</span><br></pre></td></tr></table></figure><h2 id="ubuntu-python"><a href="#ubuntu-python" class="headerlink" title="ubuntu python"></a>ubuntu python</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install -y make build-essential libssl-dev zlib1g-dev libbz2-dev libreadline-dev libsqlite3-dev wget curl llvm libncurses5-dev libncursesw5-dev xz-utils tk-dev libffi-dev liblzma-dev</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://www.python.org/ftp/python/3.12.0/Python-3.12.0.tgz</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xzf Python-3.12.0.tgz -C /usr/local/src/</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/local/src/Python-3.12.0/</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/usr/local</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo make install</span><br></pre></td></tr></table></figure><h1 id="â˜„ï¸ai"><a href="#â˜„ï¸ai" class="headerlink" title="â˜„ï¸ai"></a>â˜„ï¸ai</h1><h2 id="spark-ai"><a href="#spark-ai" class="headerlink" title="spark_ai"></a>spark_ai</h2><p>è®¯é£æ˜Ÿç«è®¤çŸ¥å¤§æ¨¡å‹v3.5 </p><!--#sudo update-alternatives --install /usr/bin/python3 python3 /usr/src/Python-3.9.0 1#sudo update-alternatives --config python3#pip3.9 install --upgrade spark_ai_python#alias python3=python3.13   python=python3.13 #source ~/.bashrc#or#source ~/.profile--><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install python3-pip</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install --upgrade spark_ai_python</span><br></pre></td></tr></table></figure><!--pip3 install --upgrade pippip3 install --upgrade spark_ai_python--><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding: utf-8</span></span><br><span class="line"><span class="keyword">import</span> SparkApi</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">appid = <span class="string">&quot;xxx&quot;</span>     <span class="comment">#å¡«å†™æ§åˆ¶å°ä¸­è·å–çš„ APPID ä¿¡æ¯</span></span><br><span class="line">api_secret = <span class="string">&quot;xxx&quot;</span>   <span class="comment">#å¡«å†™æ§åˆ¶å°ä¸­è·å–çš„ APISecret ä¿¡æ¯</span></span><br><span class="line">api_key =<span class="string">&quot;xxx&quot;</span>    <span class="comment">#å¡«å†™æ§åˆ¶å°ä¸­è·å–çš„ APIKey ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line">domain = <span class="string">&quot;generalv3.5&quot;</span>     </span><br><span class="line"></span><br><span class="line">Spark_url = <span class="string">&quot;wss://spark-api.xf-yun.com/v3.5/chat&quot;</span>  <span class="comment"># v3.5ç¯æœåŠ¡åœ°å€</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆå§‹ä¸Šä¸‹æ–‡å†…å®¹ï¼Œå½“å‰å¯ä¼ systemã€userã€assistant ç­‰è§’è‰²</span></span><br><span class="line">text =[</span><br><span class="line">    <span class="comment"># &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;ä½ æ˜¯è°&quot;&#125;,  # ç”¨æˆ·çš„å†å²é—®é¢˜</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getText</span>(<span class="params">role,content</span>):</span><br><span class="line">    jsoncon = &#123;&#125;</span><br><span class="line">    jsoncon[<span class="string">&quot;role&quot;</span>] = role</span><br><span class="line">    jsoncon[<span class="string">&quot;content&quot;</span>] = content</span><br><span class="line">    text.append(jsoncon)</span><br><span class="line">    <span class="keyword">return</span> text</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">getlength</span>(<span class="params">text</span>):</span><br><span class="line">    length = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> content <span class="keyword">in</span> text:</span><br><span class="line">        temp = content[<span class="string">&quot;content&quot;</span>]</span><br><span class="line">        leng = <span class="built_in">len</span>(temp)</span><br><span class="line">        length += leng</span><br><span class="line">    <span class="keyword">return</span> length</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">checklen</span>(<span class="params">text</span>):</span><br><span class="line">    <span class="keyword">while</span> (getlength(text) &gt; <span class="number">8000</span>):</span><br><span class="line">        <span class="keyword">del</span> text[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">return</span> text</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>):</span><br><span class="line">        Input = <span class="built_in">input</span>(<span class="string">&quot;\n&quot;</span> +<span class="string">&quot;æˆ‘:&quot;</span>)</span><br><span class="line">        question = checklen(getText(<span class="string">&quot;user&quot;</span>,Input))</span><br><span class="line">        SparkApi.answer =<span class="string">&quot;&quot;</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;æ˜Ÿç«:&quot;</span>,end =<span class="string">&quot;&quot;</span>)</span><br><span class="line">        SparkApi.main(appid,api_key,api_secret,Spark_url,domain,question)</span><br><span class="line">        <span class="comment"># print(SparkApi.answer)</span></span><br><span class="line">        getText(<span class="string">&quot;assistant&quot;</span>,SparkApi.answer)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ERNIE-4-0"><a href="#ERNIE-4-0" class="headerlink" title="ERNIE-4.0"></a>ERNIE-4.0</h2><p>åƒå¸†4.0</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_access_token</span>():</span><br><span class="line"></span><br><span class="line">    url = <span class="string">&quot;https://aip.baidubce.com/oauth/2.0/token?grant_type=client_credentials&amp;client_id=xx&amp;client_secret=xx&quot;</span></span><br><span class="line">    </span><br><span class="line">    payload = json.dumps(<span class="string">&quot;&quot;</span>)</span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Accept&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    response = requests.request(<span class="string">&quot;POST&quot;</span>, url, headers=headers, data=payload)</span><br><span class="line">    <span class="keyword">return</span> response.json().get(<span class="string">&quot;access_token&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    url = <span class="string">&quot;https://aip.baidubce.com/rpc/2.0/ai_custom/v1/wenxinworkshop/chat/ernie-4.0-8k-preview?access_token=&quot;</span> + get_access_token()</span><br><span class="line">    </span><br><span class="line">    payload = json.dumps(&#123;</span><br><span class="line">        <span class="string">&quot;messages&quot;</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>,</span><br><span class="line">                <span class="string">&quot;content&quot;</span>: <span class="string">&quot;Pythonæ˜¯æœ€å¥½çš„è¯­è¨€&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;)</span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    response = requests.request(<span class="string">&quot;POST&quot;</span>, url, headers=headers, data=payload)</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">print</span>(response.text)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">python3 ai.py</span><br><span class="line"></span><br><span class="line">&#123;<span class="string">&quot;id&quot;</span>:<span class="string">&quot;as-7bdgaekpn4&quot;</span>,<span class="string">&quot;object&quot;</span>:<span class="string">&quot;chat.completion&quot;</span>,<span class="string">&quot;created&quot;</span>:1716369031,<span class="string">&quot;result&quot;</span>:<span class="string">&quot;\&quot;Pythonæ˜¯æœ€å¥½çš„è¯­è¨€\&quot;è¿™ä¸€è¯´æ³•æ˜¯ä¸»è§‚çš„ï¼Œå¹¶ä¸é€‚ç”¨äºæ‰€æœ‰æƒ…å†µã€‚Pythonç¡®å®æ˜¯ä¸€ç§å¼ºå¤§ä¸”æµè¡Œçš„ç¼–ç¨‹è¯­è¨€ï¼Œå…·æœ‰è®¸å¤šä¼˜ç‚¹ï¼Œä½†å®ƒå¹¶ä¸ä¸€å®šæ˜¯æ‰€æœ‰æƒ…å†µä¸‹çš„æœ€ä½³é€‰æ‹©ã€‚ä»¥ä¸‹æ˜¯å¯¹è¿™ä¸€è¯´æ³•çš„è¯¦ç»†åˆ†æï¼š\n\n### Pythonçš„ä¼˜ç‚¹ï¼š\n\n1. **æ˜“è¯»æ˜“å†™**ï¼šPythonçš„è¯­æ³•æ¸…æ™°ç®€æ´ï¼Œæ˜“äºç†è§£ï¼Œè¿™ä½¿å¾—å®ƒæˆä¸ºåˆå­¦è€…å’Œä¸“ä¸šå¼€å‘è€…éƒ½å–œçˆ±çš„è¯­è¨€ã€‚\n\n2. **å¹¿æ³›çš„åº“å’Œæ¡†æ¶**ï¼šPythonæœ‰å¤§é‡çš„ç¬¬ä¸‰æ–¹åº“å’Œæ¡†æ¶å¯ä¾›ä½¿ç”¨ï¼Œå¦‚NumPyã€Pandasã€TensorFlowç­‰ï¼Œè¿™äº›åº“ä½¿å¾—Pythonåœ¨æ•°æ®ç§‘å­¦ã€Webå¼€å‘ã€æœºå™¨å­¦ä¹ ç­‰é¢†åŸŸå…·æœ‰æ˜¾è‘—ä¼˜åŠ¿ã€‚\n\n3. **è·¨å¹³å°å…¼å®¹æ€§**ï¼šPythonå¯ä»¥åœ¨å¤šç§æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œï¼ŒåŒ…æ‹¬Windowsã€macOSå’ŒLinuxã€‚\n\n4. **åŠ¨æ€ç±»å‹ç³»ç»Ÿ**ï¼šPythonæ˜¯åŠ¨æ€ç±»å‹çš„è¯­è¨€ï¼Œè¿™æ„å‘³ç€å¼€å‘è€…ä¸éœ€è¦åœ¨å£°æ˜å˜é‡æ—¶æŒ‡å®šå…¶ç±»å‹ï¼Œè¿™å¢åŠ äº†ç¼–ç¨‹çš„çµæ´»æ€§ã€‚\n\n### Pythonçš„å±€é™æ€§ï¼š\n\n1. **æ€§èƒ½**ï¼šä¸C++æˆ–Javaç­‰ç¼–è¯‘å‹è¯­è¨€ç›¸æ¯”ï¼ŒPythonåœ¨æ‰§è¡Œé€Ÿåº¦ä¸Šå¯èƒ½è¾ƒæ…¢ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤§é‡æ•°æ®æˆ–è¿›è¡Œå¤æ‚è®¡ç®—æ—¶ã€‚\n\n2. **ç±»å‹å®‰å…¨**ï¼šç”±äºPythonæ˜¯åŠ¨æ€ç±»å‹çš„ï¼Œè¿™å¯èƒ½å¯¼è‡´ç±»å‹é”™è¯¯åœ¨è¿è¡Œæ—¶æ‰è¢«å‘ç°ï¼Œè€Œä¸æ˜¯åœ¨ç¼–è¯‘é˜¶æ®µã€‚\n\n3. **ç§»åŠ¨å¼€å‘é™åˆ¶**ï¼šè™½ç„¶Pythonå¯ä»¥ç”¨äºå¼€å‘Webåº”ç”¨å’Œæ¡Œé¢åº”ç”¨ï¼Œä½†å®ƒåœ¨ç§»åŠ¨åº”ç”¨å¼€å‘ï¼ˆå¦‚iOSå’ŒAndroidåº”ç”¨ï¼‰æ–¹é¢å¹¶ä¸æ˜¯ä¸»æµé€‰æ‹©ã€‚\n\n4. **å†…å­˜æ¶ˆè€—**ï¼šPythonçš„å†…å­˜ç®¡ç†å¯èƒ½ä¸å¦‚æŸäº›å…¶ä»–è¯­è¨€é«˜æ•ˆï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¤§é‡æ•°æ®æ—¶ã€‚\n\n### ç»“è®ºï¼š\n\nPythonæ˜¯å¦æ˜¯æœ€å¥½çš„è¯­è¨€å–å†³äºå…·ä½“çš„ä½¿ç”¨åœºæ™¯å’Œéœ€æ±‚ã€‚å¯¹äºæ•°æ®ç§‘å­¦ã€Webå¼€å‘ã€è„šæœ¬ç¼–å†™å’Œè‡ªåŠ¨åŒ–ä»»åŠ¡ç­‰ï¼ŒPythonç¡®å®æ˜¯ä¸€ä¸ªå‡ºè‰²çš„é€‰æ‹©ã€‚ç„¶è€Œï¼Œåœ¨éœ€è¦é«˜æ€§èƒ½è®¡ç®—ã€å†…å­˜ä¼˜åŒ–æˆ–ç‰¹å®šäºç§»åŠ¨å¹³å°çš„å¼€å‘ä»»åŠ¡ä¸­ï¼Œå…¶ä»–è¯­è¨€å¯èƒ½æ›´ä¸ºåˆé€‚ã€‚\n\nå› æ­¤ï¼Œ\&quot;Pythonæ˜¯æœ€å¥½çš„è¯­è¨€\&quot;è¿™ä¸€è¯´æ³•æ˜¯ç‰‡é¢çš„ã€‚åœ¨é€‰æ‹©ç¼–ç¨‹è¯­è¨€æ—¶ï¼Œåº”æ ¹æ®é¡¹ç›®çš„å…·ä½“éœ€æ±‚å’Œä¸Šä¸‹æ–‡æ¥åšå‡ºå†³ç­–ã€‚&quot;</span>,<span class="string">&quot;is_truncated&quot;</span>:<span class="literal">false</span>,<span class="string">&quot;need_clear_history&quot;</span>:<span class="literal">false</span>,<span class="string">&quot;finish_reason&quot;</span>:<span class="string">&quot;normal&quot;</span>,<span class="string">&quot;usage&quot;</span>:&#123;<span class="string">&quot;prompt_tokens&quot;</span>:3,<span class="string">&quot;completion_tokens&quot;</span>:403,<span class="string">&quot;total_tokens&quot;</span>:406&#125;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><!--         #https://qianfan.cloud.baidu.com/    url = "https://aip.baidubce.com/rpc/2.0/ai_custom/v1/wenxinworkshop/chat/ernie-4.0-8k-preview?access_token=" + get_access_token()        payload = json.dumps({        "messages": [            {                "role": "user",                "content": "pythonå¯¹æ¯”jsæœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ"            }        ],         "stream": True    })    headers = {        'Content-Type': 'application/json'    }        response = requests.request("POST", url, headers=headers, data=payload, stream=True)        for line in response.iter_lines():        #print(line.decode("UTF-8"))        try:              con(line.decode("UTF-8"))        except Exception as e:              print(line.decode("UTF-8"))        #(line.decode("UTF-8"))    --><p>End</p><!--pip install alibabacloud_bailian20230601==1.6.1https://bailian.console.aliyun.com/djangopip install django--><!-- åŠ¨ç‰© å–œå‰§  æ—…æ¸¸ ç¾é£Ÿè¿åŠ¨ ç¾å®¹æ—¶å°š è‰ºæœ¯ æ¸¸æˆç§‘å­¦æ•™è‚² èˆè¹ˆ DIYæ±½è½¦ éŸ³ä¹ ç”Ÿæ´» è§£å‹ æˆ·å¤– å½±è§†https://www.liaoxuefeng.com/wiki/1016959663602400/1017269809315232è¾“å…¥è¾“å‡ºï¼Œæ‰“å°åŠ å‡ä¹˜é™¤çš„ç»“æœå€¼ï¼ˆday03/circle.pyï¼‰è¾“å…¥åœ†é•¿ï¼Œè®¡ç®—è¾“å‡ºåœ†å‘¨é•¿å’Œåœ†é¢ç§¯ï¼ˆday03/circle.pyï¼‰æ•°æ®ç±»å‹åŸºç¡€è¯­æ³•ä½¿ç”¨ï¼ˆday03/data_type.pyï¼‰å­—ç¬¦ä¸²ç±»å‹çš„åŸºç¡€ä½¿ç”¨ï¼ˆday03/str.pyï¼‰åˆ—è¡¨çš„åŸºç¡€ä½¿ç”¨ï¼ˆday03/list.pyï¼‰å…ƒç»„çš„åŸºç¡€ä½¿ç”¨ï¼ˆday03/tuple.pyï¼‰è¾“å…¥ä¸€ä¸ªæ•°ï¼Œåˆ¤æ–­æ˜¯å¦æ˜¯ç´ æ•°ï¼ˆday04/prime.pyï¼‰å­—å…¸çš„åŸºæœ¬ç»ƒä¹ ï¼ˆday04/dict.pyï¼‰ifå’Œwhileçš„é€»è¾‘ä½¿ç”¨ç»ƒä¹ ï¼ˆday04/logic.pyï¼‰å¾ªç¯ä¸€ä¸ªå­—å…¸çš„keyå’Œvalueï¼ˆday04/for_dict.pyï¼‰å‡½æ•°å¼ç¼–ç¨‹åˆ¤æ–­ç´ æ•°ï¼ˆday05/prime.pyï¼‰å‡½æ•°å¼ç¼–ç¨‹åˆ¤æ–­ç´ æ•°ä»¥åŠå­—å…¸çš„ä½¿ç”¨ï¼ˆday05/prime_fun.pyï¼‰åŸºç¡€å‡½æ•°çš„å­¦ä¹ ï¼ˆday05/fun.pyï¼‰åŸºç¡€å¼‚å¸¸å¤„ç†ï¼ˆday05/error.pyï¼‰ä½¿ç”¨ç”Ÿæˆå™¨åˆ›å»ºæ–æ³¢æ‹‰å¥‘æ•°åˆ—ï¼ˆday06/fibonacci_sequence.pyï¼‰æ–‡ä»¶æ“ä½œçš„ç»ƒä¹ å’Œä½¿ç”¨ï¼ˆday06/file_user.pyï¼‰Requestsæ¨¡å—çš„ç»ƒä¹ å’Œä½¿ç”¨ï¼ˆday06/requests_use.pyï¼‰PythonçŸ¥è¯†ç‚¹å›å¿†æ€»ç»“ï¼ˆday07/knowledge.mdï¼‰osæ¨¡å—çš„åŸºç¡€ä½¿ç”¨å’Œç»ƒä¹ ï¼ˆday07/os_use.pyï¼‰Requestsè·å–æ˜é‡‘æ²¸ç‚¹æ•°æ®ç»ƒä¹ ï¼ˆday07/juejin_poins.pyï¼‰é«˜é˜¶å‡½æ•°çš„ç»ƒä¹ å’Œä½¿ç”¨ï¼ˆday08/fun_to_code.pyï¼‰æ‰“æ‰°äº†ï¼Œåˆ©ç”¨è£…é¥°å™¨ç»™åˆ¤æ–­å‡½æ•°åŠ ä¸ª[æœ‰è¶£çš„]åŠŸèƒ½ï¼ˆday08/decorator.pyï¼‰ç»§ç»­æ‰“æ‰°äº†ï¼Œåˆ©ç”¨è£…é¥°å™¨ç»™åˆ¤æ–­å‡½æ•°åŠ ä¸ª[æœ‰è¶£çš„]åŠŸèƒ½ï¼ˆday09/prime_to_fun.pyï¼‰éå†åˆ›å»ºå¤šçº§ç›®å½•ï¼ˆday09/make_dirs.pyï¼‰éå†å¤šçº§ç›®å½•ä¸‹çš„æ–‡ä»¶å¤¹ä»¥åŠæ–‡ä»¶ï¼ˆday09/for_dir.pyï¼‰åˆ©ç”¨RequestsæŠ“å–æ²¸ç‚¹å†…å®¹å­˜åˆ°txtæ–‡ä»¶ï¼ˆday10/poins_content.pyï¼‰pipçš„åŸºç¡€ä½¿ç”¨ï¼ˆday11/pip.mdï¼‰pickleåºåˆ—åŒ–å­—å…¸æ•°æ®çš„ä½¿ç”¨ï¼ˆday11/pickle_use.pyï¼‰jsonåºåˆ—åŒ–å­—å…¸æ•°æ®çš„ä½¿ç”¨ï¼ˆday11/json_use.pyï¼‰openpyxlæ¨¡å—æ“ä½œExcelè¡¨æ ¼çš„è¯»å†™ï¼ˆday11/excel_use.pyï¼‰ä¸‹è½½è§†é¢‘ã€éŸ³ä¹ã€å›¾ç‰‡æ–‡ä»¶ï¼ˆday11/download.pyï¼‰csvçš„åŸºæœ¬äº†è§£å’Œè¯»å†™æ–‡ä»¶ï¼ˆday11/csv_use.pyï¼‰åˆ©ç”¨pymysqlæ¨¡å—ç®¡ç†mysqlçš„è¿æ¥å’ŒCURDåŸºç¡€ä½¿ç”¨ï¼ˆday12/mysql_use.pyï¼‰æ˜é‡‘æ²¸ç‚¹å†…å®¹ï¼Œå„ç§æ–¹å¼å­˜å‚¨ç»ƒä¹ ï¼ˆday12/poins_save.pyï¼‰æ­£åˆ™è¡¨è¾¾å¼çš„åŸºæœ¬å­¦ä¹ å’Œä½¿ç”¨ï¼ˆday13/re_use.pyï¼‰é¢å‘å¯¹è±¡ç¼–ç¨‹çš„ä½¿ç”¨å’Œç»ƒä¹ ï¼ˆday13/oop_use.pyï¼‰å¸¸è§çš„å†…å»ºæ¨¡å—ç»ƒä¹ ä¹‹datetimeï¼ˆday14/datetime_use.pyï¼‰å¸¸è§çš„å†…å»ºæ¨¡å—ç»ƒä¹ ä¹‹collectionsï¼ˆday14/collections_use.pyï¼‰å¸¸è§çš„å†…å»ºæ¨¡å—ç»ƒä¹ ä¹‹base64ã€structï¼ˆday14/char_use.pyï¼‰å¸¸è§çš„å†…å»ºæ¨¡å—ç»ƒä¹ ä¹‹hashlibã€hmacï¼ˆday14/encrypt_use.pyï¼‰å¸¸è§çš„å†…å»ºæ¨¡å—ç»ƒä¹ ä¹‹xmlã€HTMLParserï¼ˆday14/html_use.pyï¼‰BeautifulSoupçš„åŸºç¡€ä½¿ç”¨ï¼ˆday15/bs_use.pyï¼‰åˆ©ç”¨bs4çˆ¬å–åšå®¢çš„çŒœä½ å–œæ¬¢å†…å®¹ï¼ˆday15/get_like.pyï¼‰åˆ©ç”¨BeautifulSoupçˆ¬å–çœã€å¸‚ã€åŒºã€è¡—é“ã€åŠäº‹å¤„äº”çº§åœ°å€ï¼ˆday15/get_city.pyï¼‰åˆ©ç”¨bs4çˆ¬å–å›½å®¶åœ°ç†ä¸­æ–‡ç½‘-æ‚å¿—é˜…è¯»ä¿¡æ¯åˆ©ç”¨requestsæŠ“å–æ˜é‡‘ç”¨æˆ·çš„å…³æ³¨è€…åˆ©ç”¨requestsæŠ“å–æ˜é‡‘ç”¨æˆ·çš„å…³æ³¨è€…-ä¸¤çº§åˆ©ç”¨requestsæŠ“å–æ˜é‡‘ç”¨æˆ·çš„å…³æ³¨è€…-æ— é™æŠ“å–æŠ“å–ç‹è€…è£è€€çš®è‚¤Task19 date: 2018-11-07scrapyæ¡†æ¶åˆæ¢Task20 date: 2018-11-08seleniumæ¨¡æ‹Ÿæµè§ˆå™¨æ‰§è¡Œçš„åŸºç¡€ç”¨æ³•Task21 date: 2018-11-09splinteræ¨¡æ‹Ÿæµè§ˆå™¨æ‰§è¡Œçš„åŸºç¡€ç”¨æ³•seleniumæ¨¡æ‹Ÿæµè§ˆå™¨æŠ“å–æ·˜å®å•†å“ä¿¡æ¯https://github.com/gxcuizy/Python/tree/master/%E4%BB%8E%E9%9B%B6%E5%AD%A6Python-%E6%8E%98%E9%87%91%E6%B4%BB%E5%8A%A8study >>https://github.com/gxcuizy/Pythonhttps://www.liaoxuefeng.com/wiki/1016959663602400https://study.163.com/course/introduction.htm?courseId=1003655001https://mofanpy.com/tutorials/python-basic/https://www.runoob.com/python/python-tutorial.htmlhttps://docs.python-guide.org/https://github.com/jimmy201602/webterminalhttps://github.com/gxcuizy/Python/tree/mastervenv https://github.com/chaoxiaodi/pytodolist-->]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>socket.io</title>
      <link href="/2024/05/26/Nodejs-socketio/"/>
      <url>/2024/05/26/Nodejs-socketio/</url>
      
        <content type="html"><![CDATA[<p>server </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install express</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install socket.io</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> socketIO = <span class="built_in">require</span>(<span class="string">&#x27;socket.io&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="keyword">const</span> server = http.<span class="title function_">createServer</span>(app);</span><br><span class="line"><span class="keyword">const</span> io = <span class="title function_">socketIO</span>(server);</span><br><span class="line"></span><br><span class="line">io.<span class="title function_">on</span>(<span class="string">&#x27;connection&#x27;</span>, <span class="function">(<span class="params">socket</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;User connected&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    socket.<span class="title function_">on</span>(<span class="string">&#x27;chat message&#x27;</span>, <span class="function">(<span class="params">msg</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;message: &#x27;</span> + msg);</span><br><span class="line">        io.<span class="title function_">emit</span>(<span class="string">&#x27;chat message&#x27;</span>, msg); <span class="comment">// to all</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    socket.<span class="title function_">on</span>(<span class="string">&#x27;disconnect&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;User disconnected&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">24525</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Node Server is running on port 24525&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>docker<br>dockerfile</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">FROM node:16-alpine</span><br><span class="line"></span><br><span class="line">WORKDIR /usr/src/app</span><br><span class="line"></span><br><span class="line">COPY package*.json ./</span><br><span class="line">RUN npm ci --only=production</span><br><span class="line"></span><br><span class="line">COPY . .</span><br><span class="line"></span><br><span class="line">EXPOSE 24525</span><br><span class="line"></span><br><span class="line">CMD [<span class="string">&quot;node&quot;</span>, <span class="string">&quot;skio.js&quot;</span>]</span><br><span class="line"></span><br></pre></td></tr></table></figure><!--ä½¿ç”¨å®˜æ–¹ Node.js é•œåƒä½œä¸ºåŸºç¡€é•œåƒFROM node:16-alpineè®¾ç½®å·¥ä½œç›®å½•WORKDIR /usr/src/app å®‰è£…åº”ç”¨ä¾èµ–COPY package*.json ./RUN npm ci --only=productionå¤åˆ¶åº”ç”¨æºä»£ç åˆ°å®¹å™¨ä¸­ COPY . .æš´éœ²åº”ç”¨ç«¯å£EXPOSE 24525 å®šä¹‰å¯åŠ¨å‘½ä»¤CMD ["node", "skio.js"]--><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker build -t nodeskio .</span><br><span class="line"></span><br><span class="line">docker run -p 24525:24525 -d nodeskio</span><br><span class="line"></span><br><span class="line"><span class="comment">##login push</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#docker login</span></span><br><span class="line"><span class="comment">#docker push your-image-name</span></span><br></pre></td></tr></table></figure><p>client</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install socket.io-client</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> io = <span class="built_in">require</span>(<span class="string">&#x27;socket.io-client&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> readline = <span class="built_in">require</span>(<span class="string">&#x27;readline&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> rl = readline.<span class="title function_">createInterface</span>(&#123;</span><br><span class="line">    <span class="attr">input</span>: process.<span class="property">stdin</span>,</span><br><span class="line">    <span class="attr">output</span>: process.<span class="property">stdout</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> socket = io.<span class="title function_">connect</span>(<span class="string">&#x27;http://localhost:24525&#x27;</span>);</span><br><span class="line"></span><br><span class="line">socket.<span class="title function_">on</span>(<span class="string">&#x27;connect&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Connected to server&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›‘å¬ä»æœåŠ¡å™¨æ¥æ”¶åˆ°çš„æ¶ˆæ¯</span></span><br><span class="line">socket.<span class="title function_">on</span>(<span class="string">&#x27;chat message&#x27;</span>, <span class="function">(<span class="params">msg</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Message from server:&#x27;</span>, msg);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤„ç†ç”¨æˆ·è¾“å…¥å¹¶å‘é€åˆ°æœåŠ¡å™¨</span></span><br><span class="line">rl.<span class="title function_">on</span>(<span class="string">&#x27;line&#x27;</span>, <span class="function">(<span class="params">input</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (input.<span class="title function_">toLowerCase</span>() === <span class="string">&#x27;exit&#x27;</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Exiting...&#x27;</span>);</span><br><span class="line">        rl.<span class="title function_">close</span>();</span><br><span class="line">        process.<span class="title function_">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        socket.<span class="title function_">emit</span>(<span class="string">&#x27;chat message&#x27;</span>, input);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤„ç†å…³é—­äº‹ä»¶</span></span><br><span class="line">rl.<span class="title function_">on</span>(<span class="string">&#x27;close&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    socket.<span class="title function_">disconnect</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Connection closed.&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>HarmonyOS Interface Router ArkTS ArkUI</title>
      <link href="/2024/05/23/HarmonyOS-Router/"/>
      <url>/2024/05/23/HarmonyOS-Router/</url>
      
        <content type="html"><![CDATA[<p>11</p><h1 id="ğŸ¬ï¸create"><a href="#ğŸ¬ï¸create" class="headerlink" title="ğŸ¬ï¸create"></a>ğŸ¬ï¸create</h1><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">export</span>  <span class="keyword">default</span> struct <span class="title class_">TitleBar</span> &#123;</span><br><span class="line">   <span class="title function_">build</span>(<span class="params"></span>)&#123;</span><br><span class="line">     <span class="title class_">Row</span>()&#123;</span><br><span class="line">       <span class="title class_">Text</span>(<span class="string">&#x27;transition&#x27;</span>)</span><br><span class="line">         .<span class="title function_">fontSize</span>(<span class="string">&#x27;30fp&#x27;</span>)</span><br><span class="line">         .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">     &#125;</span><br><span class="line">     .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">     .<span class="title function_">height</span>(<span class="string">&#x27;8%&#x27;</span>)</span><br><span class="line">     .<span class="title function_">backgroundColor</span>(<span class="string">&#x27;#4169E1&#x27;</span>)</span><br><span class="line">     .<span class="title function_">padding</span>(&#123;<span class="attr">left</span>:<span class="number">10</span>&#125;)</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ğŸï¸interface"><a href="#ğŸï¸interface" class="headerlink" title="ğŸï¸interface"></a>ğŸï¸interface</h1><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span>  <span class="keyword">interface</span> <span class="title class_">IList</span>&#123;</span><br><span class="line">  <span class="attr">title</span>:<span class="built_in">string</span>;</span><br><span class="line">  url :<span class="built_in">string</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@State</span> <span class="attr">listData</span>:<span class="title class_">IList</span>[]=[ <span class="comment">//  @State listData:Array&lt;IList&gt;=[</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">title</span>:<span class="string">&#x27;in&#x27;</span>,</span><br><span class="line">    <span class="attr">url</span>:<span class="string">&#x27;pages/home1&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">  <span class="attr">title</span>:<span class="string">&#x27;scale&#x27;</span>,</span><br><span class="line">  <span class="attr">url</span>:<span class="string">&#x27;pages/home2&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">title</span>:<span class="string">&#x27;small&#x27;</span>,</span><br><span class="line">    <span class="attr">url</span>:<span class="string">&#x27;pages/home3&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">title</span>:<span class="string">&#x27;in&#x27;</span>,</span><br><span class="line">    <span class="attr">url</span>:<span class="string">&#x27;&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h1 id="ğŸ’¡foreach"><a href="#ğŸ’¡foreach" class="headerlink" title="ğŸ’¡foreach"></a>ğŸ’¡foreach</h1><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">listData</span>,<span class="function">(<span class="params"> item: IList,index?:<span class="built_in">number</span></span>)=&gt;</span>&#123;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//listitem</span></span><br><span class="line">       <span class="title class_">Button</span>(&#123;<span class="attr">type</span>:<span class="title class_">ButtonType</span>.<span class="property">Capsule</span>&#125;)&#123;</span><br><span class="line">         <span class="title class_">Text</span>(item.<span class="property">title</span>)</span><br><span class="line">           .<span class="title function_">fontSize</span>(<span class="string">&#x27;35fp&#x27;</span>)</span><br><span class="line">           .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">//...</span></span><br><span class="line">       &#125;)</span><br></pre></td></tr></table></figure><h1 id="ğŸ”¦router"><a href="#ğŸ”¦router" class="headerlink" title="ğŸ”¦router"></a>ğŸ”¦router</h1><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;@ohos.router&#x27;</span></span><br></pre></td></tr></table></figure><h1 id="ğŸ“¼mainpage"><a href="#ğŸ“¼mainpage" class="headerlink" title="ğŸ“¼mainpage"></a>ğŸ“¼mainpage</h1><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;pages/home1&quot;</span></span><br></pre></td></tr></table></figure><h1 id="ğŸ“¹ï¸onclick"><a href="#ğŸ“¹ï¸onclick" class="headerlink" title="ğŸ“¹ï¸onclick"></a>ğŸ“¹ï¸onclick</h1><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.<span class="title function_">onClick</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">           <span class="comment">//router</span></span><br><span class="line">           router.<span class="title function_">pushUrl</span>(&#123;<span class="attr">url</span>:item.<span class="property">url</span>&#125;)</span><br><span class="line">         &#125;)</span><br></pre></td></tr></table></figure><h1 id="ğŸ“ºï¸setInterval"><a href="#ğŸ“ºï¸setInterval" class="headerlink" title="ğŸ“ºï¸setInterval"></a>ğŸ“ºï¸setInterval</h1><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//home1  page1</span></span><br><span class="line"><span class="keyword">import</span>  router <span class="keyword">from</span> <span class="string">&#x27;@ohos.router&#x27;</span></span><br><span class="line"><span class="meta">@Entry</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">TOTAL_TIME</span>:<span class="built_in">number</span> = <span class="number">6</span>;<span class="comment">//s</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">FIRST_CT</span>:<span class="built_in">number</span> =<span class="number">3</span>;<span class="comment">//s</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">aboutToAppear</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">//timer</span></span><br><span class="line">   <span class="keyword">let</span> timer=   <span class="built_in">setInterval</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">TOTAL_TIME</span>--;</span><br><span class="line">      <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">TOTAL_TIME</span>===<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="comment">//end</span></span><br><span class="line">        router.<span class="title function_">pushUrl</span>(&#123;</span><br><span class="line">          <span class="attr">url</span>:<span class="string">&quot;pages/Index&quot;</span></span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="built_in">clearInterval</span>(timer);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,<span class="number">1000</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Column</span>() &#123;</span><br><span class="line">        <span class="title class_">Row</span>() &#123;</span><br><span class="line">          <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">TOTAL_TIME</span>&gt;<span class="variable language_">this</span>.<span class="property">FIRST_CT</span>)&#123;</span><br><span class="line">              <span class="comment">//1</span></span><br><span class="line">            <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.t2&#x27;</span>))</span><br><span class="line">              .<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">Contain</span>)</span><br><span class="line">          &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">TOTAL_TIME</span>&lt;<span class="variable language_">this</span>.<span class="property">FIRST_CT</span>) &#123;</span><br><span class="line">              <span class="comment">//2</span></span><br><span class="line">            <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.bc&#x27;</span>))</span><br><span class="line">              .<span class="title function_">objectFit</span>(<span class="title class_">ImageFit</span>.<span class="property">Contain</span>)</span><br><span class="line">              .<span class="title function_">width</span>(<span class="string">&#x27;30%&#x27;</span>)</span><br><span class="line">            <span class="title class_">Text</span>(<span class="string">&#x27; - m - &#x27;</span>)</span><br><span class="line">              .<span class="title function_">fontSize</span>(<span class="string">&#x27;30fp&#x27;</span>)</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">        .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Center</span>)</span><br><span class="line"></span><br><span class="line">          <span class="comment">// Text(&#x27;in&#x27;)</span></span><br><span class="line">          <span class="comment">//   .fontSize(&#x27;50fp&#x27;)</span></span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources/v2/a2.gif"></p><h1 id="ğŸ“½ï¸TransitionEnter-scale"><a href="#ğŸ“½ï¸TransitionEnter-scale" class="headerlink" title="ğŸ“½ï¸TransitionEnter  scale"></a>ğŸ“½ï¸TransitionEnter  scale</h1><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//home2 page2</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">scale1</span>: <span class="built_in">number</span> = <span class="number">1</span></span><br><span class="line">  <span class="meta">@State</span> <span class="attr">opacity1</span>: <span class="built_in">number</span> = <span class="number">1</span></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">   <span class="title class_">Column</span>()</span><br><span class="line">.<span class="title function_">scale</span>(&#123; <span class="attr">x</span>: <span class="variable language_">this</span>.<span class="property">scale1</span> &#125;).<span class="title function_">opacity</span>(<span class="variable language_">this</span>.<span class="property">opacity1</span>)</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"> <span class="title function_">pageTransition</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">PageTransitionEnter</span>(&#123; <span class="attr">duration</span>: <span class="number">1200</span>, <span class="attr">curve</span>: <span class="title class_">Curve</span>.<span class="property">Linear</span> &#125;)</span><br><span class="line">      .<span class="title function_">onEnter</span>(<span class="function">(<span class="params"><span class="keyword">type</span>: RouteType, progress: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">scale1</span> = <span class="number">1</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">opacity1</span> = progress</span><br><span class="line">      &#125;) <span class="comment">// onEnter (0% -- 100%)</span></span><br><span class="line">    <span class="title class_">PageTransitionExit</span>(&#123; <span class="attr">duration</span>: <span class="number">1500</span>, <span class="attr">curve</span>: <span class="title class_">Curve</span>.<span class="property">Ease</span> &#125;)</span><br><span class="line">      .<span class="title function_">onExit</span>(<span class="function">(<span class="params"><span class="keyword">type</span>: RouteType, progress: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">scale1</span> = <span class="number">1</span> - progress</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">opacity1</span> = <span class="number">1</span></span><br><span class="line">      &#125;) <span class="comment">// onExit (0% -- 100%)</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources/v2/a3.gif"></p><h1 id="ğŸ¥SlideEffect-Left"><a href="#ğŸ¥SlideEffect-Left" class="headerlink" title="ğŸ¥SlideEffect.Left"></a>ğŸ¥SlideEffect.Left</h1><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">pageTransition</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title class_">PageTransitionEnter</span>(&#123; <span class="attr">duration</span>: <span class="number">1200</span> &#125;)</span><br><span class="line">    .<span class="title function_">slide</span>(<span class="title class_">SlideEffect</span>.<span class="property">Left</span>)</span><br><span class="line">  <span class="title class_">PageTransitionExit</span>(&#123; <span class="attr">delay</span>: <span class="number">100</span> &#125;)</span><br><span class="line">    .<span class="title function_">translate</span>(&#123; <span class="attr">x</span>: <span class="number">100.0</span>, <span class="attr">y</span>: <span class="number">100.0</span> &#125;)</span><br><span class="line">    .<span class="title function_">opacity</span>(<span class="number">0</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources/v2/a4.gif"></p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>DotNetty ByteBuffer</title>
      <link href="/2024/05/23/DotNetty-ByteBuffer/"/>
      <url>/2024/05/23/DotNetty-ByteBuffer/</url>
      
        <content type="html"><![CDATA[<p><strong>DotNetty</strong>æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„.NETç½‘ç»œé€šä¿¡æ¡†æ¶ï¼ŒåŸºäºNettyï¼Œæ”¯æŒTCPã€UDPã€HTTPã€WebSocketç­‰åè®®ã€‚é€‚ç”¨äºé«˜å¹¶å‘ã€ä½å»¶è¿Ÿåœºæ™¯ï¼Œå¦‚å®æ—¶é€šä¿¡ã€æ¸¸æˆæœåŠ¡å™¨ã€IoTåº”ç”¨åŠå¤§å‹åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œé€šè¿‡å¼‚æ­¥I&#x2F;Oã€é›¶æ‹·è´ç­‰æŠ€æœ¯æå‡æ€§èƒ½ï¼Œå…·å¤‡æ˜“ç”¨æ€§ã€å¯æ‰©å±•æ€§ã€‚<br>æ¶æ„ä¸Šï¼Œå›´ç»•Channelã€EventLoopã€ChannelPipelineã€ChannelHandlerContextè®¾è®¡ï¼ŒåŒ…å«Transportã€Codecã€Handlerç­‰æ¨¡å—ï¼Œç®€åŒ–ç½‘ç»œç¼–ç¨‹ï¼ŒåŠ é€Ÿæ•°æ®ä¼ è¾“å¤„ç†ã€‚</p><p><strong>ByteBuffer</strong> ç”¨äºé«˜æ•ˆå¤„ç†å­—èŠ‚æ•°æ®ï¼Œå›ºå®šå®¹é‡ï¼Œé€šè¿‡allocateæˆ–wrapåˆ›å»ºã€‚æ¶‰åŠpositionå’Œlimitè¿½è¸ªè¯»å†™ä½ç½®ï¼Œæä¾›get&#x2F;putç­‰è¯»å†™æ–¹æ³•ï¼Œflipåˆ‡æ¢è¯»å†™æ¨¡å¼ï¼Œclearæ¸…ç©ºç¼“å†²åŒºï¼Œcompactç§»åŠ¨æ•°æ®å¹¶å‡†å¤‡ä¸‹ä¸€è½®è¯»å†™ï¼Œé€‚ç”¨äºé«˜æ€§èƒ½IOä¸ç½‘ç»œé€šä¿¡ã€‚.</p><p><strong>ä¼˜ç‚¹</strong><br>é›¶æ‹·è´é€šè¿‡å¤åˆç¼“å†²åŒºå®ç°ã€‚<br>åŠ¨æ€å®¹é‡å¢é•¿ã€‚<br>æ— éœ€flipåˆ‡æ¢è¯»å†™æ¨¡å¼ã€‚<br>åˆ†ç¦»è¯»å†™ç´¢å¼•ã€‚<br>å†…ç½®å¼•ç”¨è®¡æ•°ã€‚<br>æ”¯æŒç¼“å†²åŒºæ± åŒ–ã€‚<br>ä¼˜åŒ–ç½‘ç»œé€šä¿¡ä¸­çš„å­—èŠ‚å¤„ç†ã€‚</p><p><strong>ç»“æ„</strong><br>readerIndex è¯»å–ï¼Œéšè¯»å¢ã€‚<br>writerIndex å†™å…¥ï¼Œéšå†™å¢ã€‚<br>capacityå®¹é‡ã€‚</p><p><strong>ByteBufferå±æ€§</strong><br>readIndexï¼šä¸‹ä¸€ä¸ªè¯»ä½<br>writeIndexï¼šä¸‹ä¸€ä¸ªå†™ä½ç½®<br>capacityï¼šå®¹é‡<br>0ï¼šç¼“å†²åŒºå¼€å§‹ä½ç½®</p><p>å·²ç»è¯»å–çš„åŒºåŸŸï¼š[0,readerindex)<br>å¯è¯»å–çš„åŒºåŸŸï¼š[readerindex,writerIndex)<br>å¯å†™çš„åŒºåŸŸ: [writerIndex,capacity)<br>è¯»å†™ç‹¬ç«‹ç´¢å¼•ï¼Œæ“ä½œå‘½ååŒºåˆ†ï¼ˆread&#x2F;writeè‡ªåŠ¨è¿›ï¼Œget&#x2F;setä¸å½±å“ç´¢å¼•ï¼‰ã€‚<br>æ”¯æŒè®¾å®šæœ€å¤§å®¹é‡ï¼Œè¶…é™å†™æ“ä½œå°†æŠ›å¼‚å¸¸ï¼Œé»˜è®¤ä¸Šé™Integer.MAX_VALUEã€‚<br>readerIndex writerIndex æœ¬è´¨ä¸ºçµæ´»é«˜æ•ˆå­—èŠ‚å®¹å™¨</p><p><strong>å †ç¼“å†²åŒº</strong><br>æœ€å¸¸ç”¨çš„ ByteBuffer æ¨¡å¼æ˜¯å°†æ•°æ®å­˜å‚¨åœ¨å †ç©ºé—´ä¸­ã€‚è¿™ç§æ¨¡å¼è¢«ç§°ä¸ºæ”¯æ’‘æ•°ç»„ï¼ˆbacking arrayï¼‰ï¼Œå®ƒèƒ½åœ¨æ²¡æœ‰ä½¿ç”¨æ± åŒ–çš„æƒ…å†µä¸‹æä¾›å¿«é€Ÿçš„åˆ†é…å’Œé‡Šæ”¾ã€‚å¯ä»¥ç”± hasArray() æ¥åˆ¤æ–­æ£€æŸ¥ ByteBufferæ˜¯å¦ç”±æ•°ç»„æ”¯æ’‘ã€‚å¦‚æœä¸æ˜¯ï¼Œåˆ™è¿™æ˜¯ä¸€ä¸ªç›´æ¥ç¼“å†²åŒºã€‚</p><p><strong>ç›´æ¥ç¼“å†²åŒº</strong><br>ç›´æ¥ç¼“å†²åŒºæ˜¯å¦å¤–ä¸€ç§ ByteBuffer æ¨¡å¼ã€‚<br>ç›´æ¥ç¼“å†²åŒºçš„ä¸»è¦ç¼ºç‚¹æ˜¯ï¼Œç›¸å¯¹äºåŸºäºå †çš„ç¼“å†²åŒºï¼Œå®ƒä»¬çš„åˆ†é…å’Œé‡Šæ”¾éƒ½è¾ƒä¸ºæ˜‚è´µã€‚</p><p><strong>å¤åˆç¼“å†²åŒº</strong><br>å¤åˆç¼“å†²åŒº CompositeByteBufï¼Œå®ƒä¸ºå¤šä¸ª ByteBufferæä¾›ä¸€ä¸ªèšåˆè§†å›¾ã€‚æ¯”å¦‚ HTTP åè®®ï¼Œ åˆ†ä¸ºæ¶ˆæ¯å¤´å’Œæ¶ˆæ¯ä½“ï¼Œè¿™ä¸¤éƒ¨åˆ†å¯èƒ½ç”±åº”ç”¨ç¨‹åºçš„ä¸åŒæ¨¡å—äº§ç”Ÿï¼Œå„æœ‰å„çš„ ByteBufferï¼Œå°†ä¼šåœ¨æ¶ˆæ¯è¢«å‘é€çš„æ—¶å€™ç»„è£…ä¸ºä¸€ä¸ª ByteBufferï¼Œæ­¤æ—¶å¯ä»¥å°†è¿™ä¸¤ä¸ª ByteBufferèšåˆä¸ºä¸€ä¸ª CompositeByteBufï¼Œç„¶åä½¿ç”¨ç»Ÿä¸€å’Œé€šç”¨çš„ ByteBuffer API æ¥æ“ä½œã€‚</p><p>å¦‚ä½•åœ¨çš„ç¨‹åºä¸­è·å¾— ByteBuf çš„å®ä¾‹ï¼Œå¹¶ä½¿ç”¨å®ƒå‘¢ï¼ŸNetty æä¾›äº†ä¸¤ç§æ–¹å¼</p><p><strong>ByteBufAllocator æ¥å£</strong><br>ByteBufAllocator åˆ†é…ä»»æ„ç±»å‹çš„ ByteBuffer å®ä¾‹ã€‚</p><p>buffer(): åŸºäºå †&#x2F;ç›´æ¥å†…å­˜ByteBufferã€‚<br>heapBuffer(): ä»…å †å†…å­˜ã€‚<br>directBuffer(): ä»…ç›´æ¥å†…å­˜ã€‚<br>compositeBuffer(): å¯ç»„åˆå¤šä¸ªç¼“å†²åŒºï¼Œæ”¯æŒå †&#x2F;ç›´æ¥å†…å­˜ã€‚<br>ioBuffer(): é€‚é…I&#x2F;Oæ“ä½œï¼Œä¼˜å…ˆç›´æ¥å†…å­˜(éœ€Unsafeæ”¯æŒ)ã€‚<br>ByteBufAllocatorï¼š<br>Channel ChannelHandlerContext</p><p><strong>Unpooled ç¼“å†²åŒº</strong></p><p>Unpooledå·¥å…·ç±»åŠ©åˆ›ByteBuffer<br> buffer()ï¼šå †å†…å­˜ByteBuffer<br> directBuffer()ï¼šç›´æ¥å†…å­˜ByteBuffer<br> wrappedBuffer()ï¼šåŒ…è£…æ•°æ®çš„ByteBuffer<br> copiedBuffer()ï¼šå¤åˆ¶æ•°æ®çš„ByteBuffer é€‚ç”¨èŒƒå›´å¹¿æ³›ï¼Œä¸ä»…é™äºNettyç½‘ç»œé¡¹ç›®ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">IByteBuffer byteBuf = Unpooled.CopiedBuffer(<span class="string">&quot;hello,world!&quot;</span>, Encoding.UTF8); </span><br></pre></td></tr></table></figure><p><strong>ByteBufè®¿é—®&#x2F;è¯»å†™</strong><br>ç´¢å¼•ä»0å¼€å§‹è‡³capacity()-1ã€‚<br>éšæœºè®¿é—®ï¼ˆget&#x2F;setï¼‰ä¸æ”¹ç´¢å¼•ï¼Œéœ€æ˜¾å¼è°ƒç”¨readerIndex()&#x2F;writerIndex()ç§»åŠ¨ã€‚<br>é¡ºåºè®¿é—®åˆ†ä¸¤ç±»ï¼š<br>get&#x2F;setï¼šå›ºå®šç´¢å¼•ï¼Œè¯»å†™æ•°æ®ä¸ç§»ä½ã€‚<br>read&#x2F;writeï¼šè‡ªåŠ¨è°ƒæ•´readerIndex&#x2F;writerIndexã€‚</p><p>isReadable() å¦‚æœè‡³å°‘æœ‰ä¸€ä¸ªå­—èŠ‚å¯ä¾›è¯»å–ï¼Œåˆ™è¿”å› true<br>isWritable() å¦‚æœè‡³å°‘æœ‰ä¸€ä¸ªå­—èŠ‚å¯è¢«å†™å…¥ï¼Œåˆ™è¿”å› true<br>readableBytes() è¿”å›å¯è¢«è¯»å–çš„å­—èŠ‚æ•°<br>writableBytes() è¿”å›å¯è¢«å†™å…¥çš„å­—èŠ‚æ•°<br>capacity() è¿”å› ByteBuffer å¯å®¹çº³çš„å­—èŠ‚æ•°ã€‚åœ¨æ­¤ä¹‹åï¼Œå®ƒä¼šå°è¯•å†æ¬¡æ‰©å±•ç›´åˆ°è¾¾åˆ°<br>maxCapacity()<br>maxCapacity() è¿”å› ByteBuffer å¯ä»¥å®¹çº³çš„æœ€å¤§å­—èŠ‚æ•°<br>hasArray() å¦‚æœ ByteBuffer ç”±ä¸€ä¸ªå­—èŠ‚æ•°ç»„æ”¯æ’‘ï¼Œåˆ™è¿”å› true<br>array() å¦‚æœ ByteBuffer ç”±ä¸€ä¸ªå­—èŠ‚æ•°ç»„æ”¯æ’‘åˆ™è¿”å›è¯¥æ•°ç»„</p><p><strong>å¯ä¸¢å¼ƒå­—èŠ‚</strong><br>è¯»æ“ä½œåï¼Œå­—èŠ‚ç§¯ç´¯åœ¨â€å¯ä¸¢å¼ƒâ€æ®µï¼Œå§‹äºreaderIndexã€‚<br>discardReadBytes()é‡Šæ”¾å·²è¯»å­—èŠ‚ï¼Œå›æ”¶ç©ºé—´ï¼Œå¯èƒ½å¯¼è‡´ä¹‹å‰æ•°æ®ç§»åŠ¨ã€‚<br>æ­¤æ“ä½œå¯èƒ½æ¶‰åŠå†…å­˜å¤åˆ¶ï¼Œè°¨æ…ä½¿ç”¨ã€‚</p><p><strong>å¯è¯»å­—èŠ‚</strong>ï¼šå­˜å‚¨å®é™…æ•°æ®ï¼Œæ–°ç¼“å†²åŒºé»˜è®¤ä»readerIndex&#x3D;0å¼€å§‹ã€‚<br><strong>å¯å†™å­—èŠ‚</strong>ï¼šç©ºç™½åŒºåŸŸå¾…å†™å…¥ï¼Œæ–°ç¼“å†²åŒºwriterIndexåˆè®¾0ï¼Œå†™æ“ä½œåè‡ªåŠ¨é€’å¢ã€‚</p><p><strong>èµ„æºé‡Šæ”¾</strong><br>å¤„ç†Nettyå…¥ç«™ByteBuffer ï¼Œå¯é€‰è‡ªåŠ¨é‡Šæ”¾ï¼šç”¨SimpleChannelInboundHandlerï¼Œæˆ–åœ¨channelRead()æœ«æ‰‹åŠ¨è°ƒç”¨ReferenceCountUtil.release(msg)ç¡®ä¿èµ„æºç®¡ç†ã€‚</p><!--å¯¹äº**å…¥ç«™è¯·æ±‚**ï¼ŒNettyä¸­å¤„ç†Channelè¯»æ“ä½œæ—¶è‡ªåŠ¨åˆ†é…çš„ByteBuffer ï¼Œç¡®å®éœ€è¦æ­£ç¡®ç®¡ç†å…¶ç”Ÿå‘½å‘¨æœŸä»¥é¿å…å†…å­˜æ³„æ¼ã€‚ä¸»è¦æœ‰ä¸¤ç§æ¨èåšæ³•æ¥ç¡®ä¿ByteBufçš„é‡Šæ”¾ï¼šä½¿ç”¨SimpleChannelInboundHandlerï¼šè¿™ä¸ªHandlerç±»åœ¨å¤„ç†å®Œæ¶ˆæ¯åä¼šè‡ªåŠ¨é‡Šæ”¾ByteBuffer ã€‚å®ƒé€šè¿‡é‡å†™äº†channelReadComplete()æ–¹æ³•æ¥è°ƒç”¨release()é‡Šæ”¾æ¶ˆæ¯ï¼Œå› æ­¤ä½ ä¸éœ€è¦åœ¨channelRead()æ–¹æ³•é‡Œæ‰‹åŠ¨é‡Šæ”¾ã€‚æ‰‹åŠ¨é‡Šæ”¾ï¼šå¦‚æœä½ ä¸ä½¿ç”¨SimpleChannelInboundHandlerï¼Œè€Œæ˜¯åœ¨å…¶ä»–ç±»å‹çš„ChannelInboundHandlerä¸­å¤„ç†æ¶ˆæ¯ï¼Œå°±éœ€è¦åœ¨channelRead()æ–¹æ³•ç»“æŸå‰æ‰‹åŠ¨è°ƒç”¨ReferenceCountUtil.release(msg)æ¥é‡Šæ”¾ByteBuffer ã€‚ç®€è€Œè¨€ä¹‹ï¼Œç¡®ä¿ByteBuffer é‡Šæ”¾çš„ä¸¤ç§æ–¹å¼å¯æ€»ç»“ä¸ºï¼šâ€œåˆ©ç”¨SimpleChannelInboundHandlerè‡ªåŠ¨ç®¡ç†â€æˆ–â€œåœ¨channelRead()æœ«æ‰‹åŠ¨é‡Šæ”¾â€ã€‚--><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> DotNetty.Buffers;</span><br><span class="line"><span class="keyword">using</span> DotNetty.Transport.Channels;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">CommanChannelInboundHandler</span> : <span class="title">SimpleChannelInboundHandler</span>&lt;<span class="title">object</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">ChannelRead</span>(<span class="params">IChannelHandlerContext context, <span class="built_in">object</span> message</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">bool</span> shouldRelease = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (IsMessageAcceptable(message))</span><br><span class="line">            &#123;</span><br><span class="line">                ChannelRead0(context, message);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                shouldRelease = <span class="literal">false</span>;</span><br><span class="line">                context.FireChannelRead(message);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">finally</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (AutoRelease &amp;&amp; shouldRelease)</span><br><span class="line">            &#123;</span><br><span class="line">                ResourceUtil.Release(message);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="built_in">bool</span> <span class="title">IsMessageAcceptable</span>(<span class="params"><span class="built_in">object</span> msg</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">       </span><br><span class="line">        <span class="keyword">return</span> msg <span class="keyword">is</span> IByteBuffer; <span class="comment">// å‡è®¾åªå¤„ç†IByteBufferç±»å‹çš„æ¶ˆæ¯</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">ChannelRead0</span>(<span class="params">IChannelHandlerContext context, <span class="built_in">object</span> message</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//IByteBuffer ...</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   </span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">bool</span> AutoRelease &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125; = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹äº<strong>å‡ºç«™è¯·æ±‚</strong>ï¼Œä¸ç®¡ ByteBuffer æ˜¯å¦ç”±æˆ‘ä»¬çš„ä¸šåŠ¡åˆ›å»ºçš„ï¼Œå½“è°ƒç”¨äº† write æˆ–è€… writeAndFlush æ–¹æ³•åï¼ŒNetty ä¼šè‡ªåŠ¨æ›¿æˆ‘ä»¬é‡Šæ”¾ï¼Œä¸éœ€è¦æˆ‘ä»¬ä¸šåŠ¡ä»£ç è‡ªè¡Œé‡Šæ”¾ã€‚</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºByteBufå¯¹è±¡ï¼Œåˆå§‹å®¹é‡ä¸º1ï¼Œå†…éƒ¨åŠ¨æ€æ‰©å®¹ä»¥å®¹çº³æ›´å¤šæ•°æ®</span></span><br><span class="line">IByteBuffer byteBuf = Unpooled.Buffer(<span class="number">1</span>);</span><br><span class="line">Console.WriteLine(<span class="string">&quot;byteBuf=&quot;</span> + byteBuf);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    byteBuf.WriteByte(i);</span><br><span class="line">&#125;</span><br><span class="line">Console.WriteLine(<span class="string">&quot;byteBuf=&quot;</span> + byteBuf);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(byteBuf.GetByte(i));</span><br><span class="line">&#125;</span><br><span class="line">Console.WriteLine(<span class="string">&quot;byteBuf=&quot;</span> + byteBuf);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(byteBuf.ReadByte());</span><br><span class="line">&#125;</span><br><span class="line">Console.WriteLine(<span class="string">&quot;byteBuf=&quot;</span> + byteBuf);</span><br><span class="line"></span><br><span class="line"><span class="comment">//byteBuf2</span></span><br><span class="line"><span class="comment">// ä½¿ç”¨Unpooledå·¥å…·ç±»åˆ›å»ºByteBufï¼Œå†…å®¹ä¸º&quot;hello,world!&quot;</span></span><br><span class="line">IByteBuffer byteBuf2 = Unpooled.CopiedBuffer(<span class="string">&quot;hello,world!&quot;</span>, Encoding.UTF8); <span class="comment">// Unpooled.CopiedBuffer(&quot;hello,world!&quot;, Encoding.UTF8);</span></span><br><span class="line"><span class="comment">// ä½¿ç”¨ç›¸å…³çš„æ–¹æ³•</span></span><br><span class="line"><span class="keyword">if</span> (byteBuf2.HasArray) <span class="comment">// if (byteBuf2.HasArray)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">byte</span>[] content = byteBuf2.Array;</span><br><span class="line">    <span class="comment">// å°†contentè½¬æˆå­—ç¬¦ä¸²</span></span><br><span class="line">    Console.WriteLine(Encoding.UTF8.GetString(content));</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;byteBuf2=&quot;</span> + byteBuf2);</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(byteBuf2.GetByte(<span class="number">0</span>)); <span class="comment">// è·å–æ•°ç»„0è¿™ä¸ªä½ç½®çš„å­—ç¬¦&#x27;h&#x27;çš„ASCIIç ï¼Œh=104</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">int</span> len = byteBuf2.ReadableBytes; <span class="comment">// å¯è¯»çš„å­—èŠ‚æ•° 12</span></span><br><span class="line">    Console.WriteLine(<span class="string">&quot;len=&quot;</span> + len);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨forå–å‡ºå„ä¸ªå­—èŠ‚å¹¶è½¬æ¢ä¸ºå¯¹åº”çš„å­—ç¬¦æ‰“å°</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine((<span class="built_in">char</span>)byteBuf2.GetByte(i));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// èŒƒå›´è¯»å–</span></span><br><span class="line">    Console.WriteLine(byteBuf2.GetCharSequence(<span class="number">0</span>, <span class="number">6</span>, Encoding.UTF8));</span><br><span class="line">    Console.WriteLine(byteBuf2.GetCharSequence(<span class="number">6</span>, <span class="number">6</span>, Encoding.UTF8));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//byteBuf3 WrappedBuffer</span></span><br><span class="line"><span class="keyword">var</span> str1 = Encoding.UTF8.GetBytes(<span class="string">&quot;hello,world!&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> byteBuf3 = Unpooled.WrappedBuffer(str1);</span><br><span class="line"><span class="keyword">if</span> (byteBuf3.HasArray) <span class="comment">// if (byteBuf2.HasArray)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">byte</span>[] content = byteBuf3.Array;</span><br><span class="line">    <span class="comment">// å°†contentè½¬æˆå­—ç¬¦ä¸²</span></span><br><span class="line">    Console.WriteLine(Encoding.UTF8.GetString(content));</span><br><span class="line">    Console.WriteLine(<span class="string">&quot;byteBuf3=&quot;</span> + byteBuf3);</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(byteBuf3.GetByte(<span class="number">0</span>)); <span class="comment">// è·å–æ•°ç»„0è¿™ä¸ªä½ç½®çš„å­—ç¬¦&#x27;h&#x27;çš„ASCIIç ï¼Œh=104</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">int</span> len = byteBuf3.ReadableBytes; <span class="comment">// å¯è¯»çš„å­—èŠ‚æ•° 12</span></span><br><span class="line">    Console.WriteLine(<span class="string">&quot;len=&quot;</span> + len);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨forå–å‡ºå„ä¸ªå­—èŠ‚å¹¶è½¬æ¢ä¸ºå¯¹åº”çš„å­—ç¬¦æ‰“å°</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; len; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine((<span class="built_in">char</span>)byteBuf3.GetByte(i));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// èŒƒå›´è¯»å–</span></span><br><span class="line">    Console.WriteLine(byteBuf3.GetCharSequence(<span class="number">0</span>, <span class="number">6</span>, Encoding.UTF8));</span><br><span class="line">    Console.WriteLine(byteBuf3.GetCharSequence(<span class="number">6</span>, <span class="number">6</span>, Encoding.UTF8));</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç»“æœå¾—å‡º getæ“ä½œ readerIndex ä¸å˜ï¼Œreadæ“ä½œä½¿å…¶ç§»åŠ¨ã€‚</p><p>End</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>.NET FileUpload</title>
      <link href="/2024/05/20/NET-Fileupload/"/>
      <url>/2024/05/20/NET-Fileupload/</url>
      
        <content type="html"><![CDATA[<p>VS2022 .NET8 </p><h1 id="ğŸ’¾åŸºç¡€ä¸Šä¼ ç¤ºä¾‹"><a href="#ğŸ’¾åŸºç¡€ä¸Šä¼ ç¤ºä¾‹" class="headerlink" title="ğŸ’¾åŸºç¡€ä¸Šä¼ ç¤ºä¾‹"></a>ğŸ’¾åŸºç¡€ä¸Šä¼ ç¤ºä¾‹</h1><p>view</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@&#123;</span><br><span class="line">    ViewData[<span class="string">&quot;Title&quot;</span>] = <span class="string">&quot;File Upload&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;h1&gt;@ViewData[<span class="string">&quot;Title&quot;</span>]&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">&lt;form method=<span class="string">&quot;post&quot;</span> enctype=<span class="string">&quot;multipart/form-data&quot;</span> action=<span class="string">&quot;/Home/UploadFile&quot;</span>&gt;</span><br><span class="line">    &lt;div <span class="keyword">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span><br><span class="line">    </span><br><span class="line">        &lt;input type=<span class="string">&quot;file&quot;</span> name=<span class="string">&quot;file&quot;</span> <span class="keyword">class</span>=<span class="string">&quot;form-control&quot;</span> /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;button type=<span class="string">&quot;submit&quot;</span> <span class="keyword">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;Upload&lt;/button&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure><p>controller</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">HttpPost</span>]</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">async</span> Task&lt;IActionResult&gt; <span class="title">UploadFile</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> file = Request.Form.Files[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">if</span> (file != <span class="literal">null</span> &amp;&amp; file.Length &gt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> uploads = Path.Combine(Directory.GetCurrentDirectory(), <span class="string">&quot;wwwroot&quot;</span>, <span class="string">&quot;up&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (!Directory.Exists(uploads))</span><br><span class="line">        &#123;</span><br><span class="line">            Directory.CreateDirectory(uploads);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> filePath = Path.Combine(uploads, file.FileName);</span><br><span class="line">        <span class="keyword">using</span> (<span class="keyword">var</span> fileStream = <span class="keyword">new</span> FileStream(filePath, FileMode.Create))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">await</span> file.CopyToAsync(fileStream);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// SAVE TO DB</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> RedirectToAction(<span class="string">&quot;Index&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> View();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.UseStaticFiles();</span><br></pre></td></tr></table></figure><p>run</p><h1 id="ğŸ“€ä¼˜åŒ–-é™åˆ¶æ–‡ä»¶å¤§å°"><a href="#ğŸ“€ä¼˜åŒ–-é™åˆ¶æ–‡ä»¶å¤§å°" class="headerlink" title="ğŸ“€ä¼˜åŒ– é™åˆ¶æ–‡ä»¶å¤§å°"></a>ğŸ“€ä¼˜åŒ– é™åˆ¶æ–‡ä»¶å¤§å°</h1><p>ä¸Šä¼ æ–‡ä»¶å¤¹å¦‚ img &#x3D;&gt; img    rar &#x3D;&gt; file<br>é™åˆ¶æ–‡ä»¶å¤§å°  </p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹æ®æ–‡ä»¶ç±»å‹é€‰æ‹©ä¸Šä¼ çš„æ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="built_in">string</span> fileExtension = Path.GetExtension(file.FileName).ToLower();</span><br><span class="line"><span class="keyword">switch</span> (fileExtension)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;.jpg&quot;</span>:</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;.png&quot;</span>:</span><br><span class="line">        uploadFolder = Path.Combine(<span class="string">&quot;wwwroot&quot;</span>, <span class="string">&quot;img&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;.mp4&quot;</span>:</span><br><span class="line">        <span class="comment">// æ£€æŸ¥è§†é¢‘å¤§å°æ˜¯å¦è¶…è¿‡é™åˆ¶</span></span><br><span class="line">        <span class="keyword">if</span> (file.Length &gt; <span class="number">20</span> * <span class="number">1024</span> * <span class="number">1024</span>) <span class="comment">// 20MB</span></span><br><span class="line">        &#123;</span><br><span class="line">            ModelState.AddModelError(<span class="string">&quot;File&quot;</span>, <span class="string">&quot;Video file size should not exceed 20MB.&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> View(<span class="string">&quot;Index&quot;</span>, file);</span><br><span class="line">        &#125;</span><br><span class="line">        uploadFolder = Path.Combine(<span class="string">&quot;wwwroot&quot;</span>, <span class="string">&quot;vd&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;.m4a&quot;</span>:</span><br><span class="line">        uploadFolder = Path.Combine(<span class="string">&quot;wwwroot&quot;</span>, <span class="string">&quot;sound&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;.rar&quot;</span>:</span><br><span class="line">        uploadFolder = Path.Combine(<span class="string">&quot;wwwroot&quot;</span>, <span class="string">&quot;file&quot;</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="literal">default</span>:</span><br><span class="line">        ModelState.AddModelError(<span class="string">&quot;File&quot;</span>, <span class="string">&quot;Unsupported file format.&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> View(<span class="string">&quot;Index&quot;</span>, file);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="ğŸª«åˆ é™¤"><a href="#ğŸª«åˆ é™¤" class="headerlink" title="ğŸª«åˆ é™¤"></a>ğŸª«åˆ é™¤</h1><p>view</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">@model IEnumerable&lt;<span class="built_in">string</span>&gt;</span><br><span class="line"></span><br><span class="line">&lt;h1&gt;Uploaded Files&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">@if (Model.Any())</span><br><span class="line">&#123;</span><br><span class="line">    &lt;table <span class="keyword">class</span>=<span class="string">&quot;table&quot;</span>&gt;</span><br><span class="line">        &lt;thead&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;File Name&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;Action&lt;/th&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">        &lt;/thead&gt;</span><br><span class="line">        &lt;tbody&gt;</span><br><span class="line">            @foreach (<span class="keyword">var</span> fileName <span class="keyword">in</span> Model)</span><br><span class="line">            &#123;</span><br><span class="line">                &lt;tr&gt;</span><br><span class="line">                    &lt;td&gt;@fileName&lt;/td&gt;</span><br><span class="line">                    &lt;td&gt;</span><br><span class="line">                        &lt;form method=<span class="string">&quot;post&quot;</span> asp-action=<span class="string">&quot;DeleteFile&quot;</span>&gt;</span><br><span class="line">                            &lt;input type=<span class="string">&quot;hidden&quot;</span> name=<span class="string">&quot;fileName&quot;</span> <span class="keyword">value</span>=<span class="string">&quot;@fileName&quot;</span> /&gt;</span><br><span class="line">                            &lt;button type=<span class="string">&quot;submit&quot;</span> <span class="keyword">class</span>=<span class="string">&quot;btn btn-danger&quot;</span>&gt;Delete&lt;/button&gt;</span><br><span class="line">                        &lt;/form&gt;</span><br><span class="line">                    &lt;/td&gt;</span><br><span class="line">                &lt;/tr&gt;</span><br><span class="line">            &#125;</span><br><span class="line">        &lt;/tbody&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    &lt;p&gt;No files uploaded yet.&lt;/p&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>controller</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">HttpPost</span>]</span><br><span class="line"><span class="function"><span class="keyword">public</span> IActionResult <span class="title">DeleteFile</span>(<span class="params"><span class="built_in">string</span> fileName</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> uploadFolder = Path.Combine(Directory.GetCurrentDirectory(), <span class="string">&quot;wwwroot&quot;</span>, <span class="string">&quot;img&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> filePath = Path.Combine(uploadFolder, fileName);</span><br><span class="line">    <span class="keyword">if</span> (System.IO.File.Exists(filePath))</span><br><span class="line">    &#123;</span><br><span class="line">        System.IO.File.Delete(filePath);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> RedirectToAction(<span class="string">&quot;Files&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ğŸ’¿ï¸é‡å‘½å"><a href="#ğŸ’¿ï¸é‡å‘½å" class="headerlink" title="ğŸ’¿ï¸é‡å‘½å"></a>ğŸ’¿ï¸é‡å‘½å</h1><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> fileName = <span class="string">$&quot;<span class="subst">&#123;DateTime.Now:yyyyMMddHHmmssfff&#125;</span><span class="subst">&#123;<span class="keyword">new</span> Random().Next(<span class="number">1000</span>, <span class="number">9999</span>)&#125;</span><span class="subst">&#123;fileExtension&#125;</span>&quot;</span>;</span><br><span class="line"><span class="keyword">var</span> filePath = Path.Combine(uploads, fileName);</span><br><span class="line"><span class="keyword">using</span> (<span class="keyword">var</span> fileStream = <span class="keyword">new</span> FileStream(filePath, FileMode.Create))</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">await</span> file.CopyToAsync(fileStream);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ğŸ’½å¤šæ–‡ä»¶ä¸Šä¼ "><a href="#ğŸ’½å¤šæ–‡ä»¶ä¸Šä¼ " class="headerlink" title="ğŸ’½å¤šæ–‡ä»¶ä¸Šä¼ "></a>ğŸ’½å¤šæ–‡ä»¶ä¸Šä¼ </h1><p>controller</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">ApiController</span>]</span><br><span class="line">[<span class="meta">Route(<span class="string">&quot;[controller]&quot;</span>)</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">FileUploadController</span> : <span class="title">ControllerBase</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">readonly</span> <span class="built_in">string</span> UploadsDirectory = Path.Combine(Directory.GetCurrentDirectory(), <span class="string">&quot;uploads&quot;</span>);</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">FileUploadController</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// åˆ›å»ºä¸Šä¼ æ–‡ä»¶å¤¹ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰</span></span><br><span class="line">        <span class="keyword">if</span> (!Directory.Exists(UploadsDirectory))</span><br><span class="line">        &#123;</span><br><span class="line">            Directory.CreateDirectory(UploadsDirectory);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">HttpPost</span>]</span><br><span class="line">    [<span class="meta">Route(<span class="string">&quot;upload&quot;</span>)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">async</span> Task&lt;IActionResult&gt; <span class="title">Upload</span>(<span class="params">IFormFile[] files</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (files == <span class="literal">null</span> || files.Length == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> BadRequest(<span class="string">&quot;No files uploaded.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">var</span> file <span class="keyword">in</span> files)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (file.Length == <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> BadRequest(<span class="string">$&quot;File <span class="subst">&#123;file.FileName&#125;</span> is empty.&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// æ ¹æ®æ–‡ä»¶ç±»å‹é€‰æ‹©ä¸Šä¼ çš„æ–‡ä»¶å¤¹</span></span><br><span class="line">            <span class="built_in">string</span> uploadFolder = GetUploadFolder(file.FileName);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// é‡å‘½åæ–‡ä»¶ä¸ºæŒ‡å®šæ ¼å¼</span></span><br><span class="line">            <span class="built_in">string</span> fileName = <span class="string">$&quot;<span class="subst">&#123;DateTime.Now:yyyyMMddHHmmssfff&#125;</span>_<span class="subst">&#123;Guid.NewGuid()&#125;</span><span class="subst">&#123;Path.GetExtension(file.FileName)&#125;</span>&quot;</span>;</span><br><span class="line">            <span class="built_in">string</span> filePath = Path.Combine(UploadsDirectory, uploadFolder, fileName);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">using</span> (<span class="keyword">var</span> stream = <span class="keyword">new</span> FileStream(filePath, FileMode.Create))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">await</span> file.CopyToAsync(stream);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// åœ¨è¿™é‡Œå¯ä»¥å¤„ç†ä¸Šä¼ æ–‡ä»¶çš„é€»è¾‘ï¼Œæ¯”å¦‚ä¿å­˜æ–‡ä»¶ä¿¡æ¯åˆ°æ•°æ®åº“ç­‰</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> Ok(<span class="string">&quot;Files uploaded successfully.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="built_in">string</span> <span class="title">GetUploadFolder</span>(<span class="params"><span class="built_in">string</span> fileName</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">string</span> fileExtension = Path.GetExtension(fileName).ToLower();</span><br><span class="line">        <span class="keyword">switch</span> (fileExtension)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;.jpg&quot;</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;.png&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;img&quot;</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;.mp4&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;vd&quot;</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;.m4a&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;sound&quot;</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;.rar&quot;</span>:</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;file&quot;</span>;</span><br><span class="line">            <span class="literal">default</span>:</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> NotSupportedException(<span class="string">$&quot;Unsupported file format for <span class="subst">&#123;fileName&#125;</span>.&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>view</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">@&#123;</span><br><span class="line">    ViewBag.Title = <span class="string">&quot;File Upload&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;h2&gt;File Upload2&lt;/h2&gt;</span><br><span class="line"></span><br><span class="line">&lt;form id=<span class="string">&quot;uploadForm&quot;</span> enctype=<span class="string">&quot;multipart/form-data&quot;</span>&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;file&quot;</span> id=<span class="string">&quot;fileInput&quot;</span> multiple&gt;</span><br><span class="line">    &lt;input type=<span class="string">&quot;button&quot;</span> <span class="keyword">value</span>=<span class="string">&quot;Upload&quot;</span> onclick=<span class="string">&quot;uploadFiles()&quot;</span> /&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;div id=<span class="string">&quot;message&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">@section scripts &#123;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">        <span class="function">function <span class="title">uploadFiles</span>()</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> files = document.getElementById(<span class="string">&#x27;fileInput&#x27;</span>).files;</span><br><span class="line">            <span class="keyword">if</span> (files.length === <span class="number">0</span>) &#123;</span><br><span class="line">                showMessage(<span class="string">&#x27;No files selected.&#x27;</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> formData = <span class="keyword">new</span> FormData();</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; files.length; i++) &#123;</span><br><span class="line">                formData.append(<span class="string">&#x27;files&#x27;</span>, files[i]);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            $.ajax(&#123;</span><br><span class="line">                url: <span class="string">&#x27;@Url.Action(&quot;Upload&quot;, &quot;FileUpload&quot;)&#x27;</span>,</span><br><span class="line">                type: <span class="string">&#x27;POST&#x27;</span>,</span><br><span class="line">                data: formData,</span><br><span class="line">                processData: <span class="literal">false</span>,</span><br><span class="line">                contentType: <span class="literal">false</span>,</span><br><span class="line">                success: function (response) &#123;</span><br><span class="line">                    showMessage(response);</span><br><span class="line">                &#125;,</span><br><span class="line">                error: function (xhr, status, error) &#123;</span><br><span class="line">                    showMessage(<span class="string">&#x27;Upload failed: &#x27;</span> + error);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function">function <span class="title">showMessage</span>(<span class="params">message</span>)</span> &#123;</span><br><span class="line">            $(<span class="string">&#x27;#message&#x27;</span>).text(message);</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><!--//nodejs Express.jså’Œmulterconst express = require('express');const multer  = require('multer');const path = require('path');const fs = require('fs');const app = express();const upload = multer({ dest: 'uploads/' });app.post('/upload', upload.single('file'), (req, res) => {    // è·å–ä¸Šä¼ çš„æ–‡ä»¶ä¿¡æ¯    const file = req.file;    if (!file) {        return res.status(400).send('No file uploaded.');    }    // æ ¹æ®æ–‡ä»¶ç±»å‹é€‰æ‹©ä¸Šä¼ çš„æ–‡ä»¶å¤¹    let uploadFolder = '';    const fileExtension = path.extname(file.originalname).toLowerCase();    switch (fileExtension) {        case '.jpg':        case '.png':            uploadFolder = 'img';            break;        case '.mp4':            uploadFolder = 'vd';            break;        case '.m4a':            uploadFolder = 'sound';            break;        case '.rar':            uploadFolder = 'file';            break;        default:            return res.status(400).send('Unsupported file format.');    }    // åˆ›å»ºä¸Šä¼ æ–‡ä»¶å¤¹ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰    const uploadsDir = path.join(__dirname, 'uploads', uploadFolder);    if (!fs.existsSync(uploadsDir)) {        fs.mkdirSync(uploadsDir, { recursive: true });    }    // é‡å‘½åæ–‡ä»¶ä¸ºæŒ‡å®šæ ¼å¼    const fileName = `${new Date().toISOString().replace(/[-T:\.Z]/g, '')}_${Math.random().toString(36).substring(2, 6)}${fileExtension}`;    const filePath = path.join(uploadsDir, fileName);    fs.renameSync(file.path, filePath);    // åœ¨è¿™é‡Œå¯ä»¥å¤„ç†ä¸Šä¼ æ–‡ä»¶çš„é€»è¾‘ï¼Œæ¯”å¦‚ä¿å­˜æ–‡ä»¶ä¿¡æ¯åˆ°æ•°æ®åº“ç­‰    res.send('File uploaded successfully.');});app.listen(3000, () => {    console.log('Server is running on port 3000');});-->]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> .NET </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>c# run nodejs</title>
      <link href="/2024/05/20/nodejs-run-c/"/>
      <url>/2024/05/20/nodejs-run-c/</url>
      
        <content type="html"><![CDATA[<p>åœ¨C#ä¸­è°ƒç”¨Node.jsæ—¶ï¼Œä¸€ç§å¸¸è§çš„æ–¹æ³•æ˜¯ä½¿ç”¨è¿›ç¨‹é—´é€šä¿¡ï¼ˆInter-Process Communicationï¼ŒIPCï¼‰ï¼Œä¾‹å¦‚ä½¿ç”¨å­è¿›ç¨‹ã€‚<br>å¯ä»¥ä½¿ç”¨C#ä¸­çš„Processç±»æ¥å¯åŠ¨Node.jsè¿›ç¨‹ï¼Œå¹¶é€šè¿‡æ ‡å‡†è¾“å…¥è¾“å‡ºä¸å…¶è¿›è¡Œé€šä¿¡ã€‚</p><h1 id="C-run-nodejs"><a href="#C-run-nodejs" class="headerlink" title="C# run nodejs"></a>C# run nodejs</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// n.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›‘å¬æ¥è‡ªæ ‡å‡†è¾“å…¥çš„æ¶ˆæ¯</span></span><br><span class="line">process.<span class="property">stdin</span>.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="keyword">function</span> (<span class="params">data</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ”¶åˆ°æ¶ˆæ¯åï¼Œåœ¨æ§åˆ¶å°è¾“å‡ºå¹¶å›å¤æ¶ˆæ¯</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Message from C#: &quot;</span> + data.<span class="title function_">toString</span>());</span><br><span class="line"></span><br><span class="line">    process.<span class="property">stdout</span>.<span class="title function_">write</span>(<span class="string">&quot;Hello from Node.js!&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">ProcessStartInfo startInfo = <span class="keyword">new</span> ProcessStartInfo();</span><br><span class="line">startInfo.FileName = <span class="string">&quot;node&quot;</span>; <span class="comment">// Node.jså¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ï¼Œå¦‚æœå·²åœ¨ç³»ç»Ÿè·¯å¾„ä¸­ï¼Œåˆ™ä¸éœ€è¦æä¾›å®Œæ•´è·¯å¾„</span></span><br><span class="line">startInfo.Arguments = <span class="string">&quot;n.js&quot;</span>; <span class="comment">// æ‰§è¡Œçš„Node.jsè„šæœ¬æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">startInfo.UseShellExecute = <span class="literal">false</span>;</span><br><span class="line">startInfo.RedirectStandardInput = <span class="literal">true</span>;</span><br><span class="line">startInfo.RedirectStandardOutput = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">Process nodeProcess = <span class="keyword">new</span> Process();</span><br><span class="line">nodeProcess.StartInfo = startInfo;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯åŠ¨è¿›ç¨‹</span></span><br><span class="line">nodeProcess.Start();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸Node.jsè¿›ç¨‹è¿›è¡Œé€šä¿¡</span></span><br><span class="line"><span class="keyword">using</span> (<span class="keyword">var</span> writer = nodeProcess.StandardInput)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (writer.BaseStream.CanWrite)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// å‘Node.jsè¿›ç¨‹å‘é€æ¶ˆæ¯</span></span><br><span class="line">        writer.WriteLine(<span class="string">&quot;Hello from C#!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯»å–Node.jsè¿›ç¨‹çš„è¾“å‡º</span></span><br><span class="line"><span class="keyword">using</span> (<span class="keyword">var</span> reader = nodeProcess.StandardOutput)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (reader.BaseStream.CanRead)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ä»Node.jsè¿›ç¨‹è¯»å–å“åº”</span></span><br><span class="line">        <span class="built_in">string</span> response = reader.ReadLine();</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Response from Node.js: &quot;</span> + response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Console.Read();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰å¾…Node.jsè¿›ç¨‹ç»“æŸ</span></span><br><span class="line">nodeProcess.WaitForExit();</span><br><span class="line">nodeProcess.Close();</span><br></pre></td></tr></table></figure><h1 id="Socket"><a href="#Socket" class="headerlink" title="Socket"></a>Socket</h1><h2 id="server"><a href="#server" class="headerlink" title="server"></a>server</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> net = <span class="built_in">require</span>(<span class="string">&#x27;net&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨å®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> server = net.<span class="title function_">createServer</span>(<span class="function">(<span class="params">socket</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// è¿æ¥å»ºç«‹æ—¶è§¦å‘</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Client connected.&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç›‘å¬å®¢æˆ·ç«¯å‘é€çš„æ•°æ®</span></span><br><span class="line">    socket.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Received from client: &#x27;</span> + data.<span class="title function_">toString</span>());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å‘å®¢æˆ·ç«¯å‘é€å“åº”æ•°æ®</span></span><br><span class="line">        socket.<span class="title function_">write</span>(<span class="string">&#x27;Hello from Node.js!&#x27;</span> + data.<span class="title function_">toString</span>());</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç›‘å¬è¿æ¥æ–­å¼€äº‹ä»¶</span></span><br><span class="line">    socket.<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Client disconnected.&#x27;</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›‘å¬æŒ‡å®šç«¯å£</span></span><br><span class="line"><span class="keyword">const</span> port = <span class="number">24520</span>;</span><br><span class="line">server.<span class="title function_">listen</span>(port, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Node Server listening on port &#x27;</span> + port);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯åŠ¨ Node.js æœåŠ¡å™¨çš„ Node.js è„šæœ¬æ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="built_in">string</span> nodeScriptPath = <span class="string">&quot;n.js&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯åŠ¨ Node.js è¿›ç¨‹</span></span><br><span class="line">ProcessStartInfo startInfo = <span class="keyword">new</span> ProcessStartInfo();</span><br><span class="line">startInfo.FileName = <span class="string">&quot;node&quot;</span>; <span class="comment">// Node.js å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ï¼Œå¦‚æœå·²åœ¨ç³»ç»Ÿè·¯å¾„ä¸­ï¼Œåˆ™ä¸éœ€è¦æä¾›å®Œæ•´è·¯å¾„</span></span><br><span class="line">startInfo.Arguments = nodeScriptPath; <span class="comment">// Node.js è„šæœ¬æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">startInfo.UseShellExecute = <span class="literal">false</span>;</span><br><span class="line">startInfo.RedirectStandardOutput = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">Process nodeProcess = <span class="keyword">new</span> Process();</span><br><span class="line">nodeProcess.StartInfo = startInfo;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Node.js æœåŠ¡å™¨è¾“å‡ºçš„äº‹ä»¶å¤„ç†å‡½æ•°</span></span><br><span class="line">nodeProcess.OutputDataReceived += (sender, e) =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    Console.WriteLine(e.Data); <span class="comment">// è¾“å‡º Node.js æœåŠ¡å™¨çš„è¾“å‡ºä¿¡æ¯</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯åŠ¨è¿›ç¨‹</span></span><br><span class="line">nodeProcess.Start();</span><br><span class="line">nodeProcess.BeginOutputReadLine(); <span class="comment">// å¼€å§‹å¼‚æ­¥è¯»å– Node.js æœåŠ¡å™¨çš„è¾“å‡º</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç­‰å¾… Node.js è¿›ç¨‹ç»“æŸ</span></span><br><span class="line">nodeProcess.WaitForExit();</span><br><span class="line">nodeProcess.Close();</span><br></pre></td></tr></table></figure><p><strong>run</strong></p><h2 id="client"><a href="#client" class="headerlink" title="client"></a>client</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¿æ¥åˆ° Node.js æœåŠ¡å™¨çš„åœ°å€å’Œç«¯å£</span></span><br><span class="line"><span class="built_in">string</span> serverAddress = <span class="string">&quot;127.0.0.1&quot;</span>; <span class="comment">// æœ¬åœ°åœ°å€</span></span><br><span class="line"><span class="built_in">int</span> serverPort = <span class="number">24520</span>; <span class="comment">// Node.js æœåŠ¡å™¨ç«¯å£</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»º TcpClient å®ä¾‹</span></span><br><span class="line"><span class="keyword">using</span> (TcpClient client = <span class="keyword">new</span> TcpClient(serverAddress, serverPort))</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// è·å–ç”¨äºå‘æœåŠ¡å™¨å‘é€æ•°æ®çš„ç½‘ç»œæµ</span></span><br><span class="line">    <span class="keyword">using</span> (NetworkStream stream = client.GetStream())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// å‘é€æ•°æ®åˆ°æœåŠ¡å™¨</span></span><br><span class="line">        <span class="built_in">string</span> message = <span class="string">&quot;hi from C#!&quot;</span>;</span><br><span class="line">        <span class="built_in">byte</span>[] data = Encoding.ASCII.GetBytes(message);</span><br><span class="line">        stream.Write(data, <span class="number">0</span>, data.Length);</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Sent: &quot;</span> + message);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è¯»å–æœåŠ¡å™¨çš„å“åº”</span></span><br><span class="line">        <span class="built_in">byte</span>[] buffer = <span class="keyword">new</span> <span class="built_in">byte</span>[<span class="number">1024</span>];</span><br><span class="line">        <span class="built_in">int</span> bytesRead = stream.Read(buffer, <span class="number">0</span>, buffer.Length);</span><br><span class="line">        <span class="built_in">string</span> response = Encoding.ASCII.GetString(buffer, <span class="number">0</span>, bytesRead);</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Received: &quot;</span> + response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>run</strong></p><h1 id="nodejs-run-c"><a href="#nodejs-run-c" class="headerlink" title="nodejs run c#"></a>nodejs run c#</h1><p>Node.js ä½¿ç”¨ child_process.exec() å‡½æ•°æ‰§è¡Œ c# exe</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Console.WriteLine(<span class="string">&quot;hi c# &quot;</span>);</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//runc.js</span></span><br><span class="line"><span class="keyword">const</span> &#123; exec &#125; = <span class="built_in">require</span>(<span class="string">&#x27;child_process&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰§è¡Œ hello.exe</span></span><br><span class="line"><span class="title function_">exec</span>(<span class="string">&#x27;ConNode.exe&#x27;</span>, <span class="function">(<span class="params">error, stdout, stderr</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (error) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`æ‰§è¡Œé”™è¯¯: <span class="subst">$&#123;error.message&#125;</span>`</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (stderr) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">`æ‰§è¡Œé”™è¯¯: <span class="subst">$&#123;stderr&#125;</span>`</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`C# è¾“å‡º: <span class="subst">$&#123;stdout&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p><strong>run</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node runc.js</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c# </tag>
            
            <tag> .net </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Typescript</title>
      <link href="/2024/05/20/Typescript-ts/"/>
      <url>/2024/05/20/Typescript-ts/</url>
      
        <content type="html"><![CDATA[<p> typescript   â‰ˆ  javascript plus   </p><h1 id="ğŸ”—setup"><a href="#ğŸ”—setup" class="headerlink" title="ğŸ”—setup"></a>ğŸ”—setup</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install typescript -g</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc -version</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install ts-node -g</span><br></pre></td></tr></table></figure><h1 id="ğŸ–Œï¸hello-world"><a href="#ğŸ–Œï¸hello-world" class="headerlink" title="ğŸ–Œï¸hello world"></a>ğŸ–Œï¸hello world</h1><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="string">&quot;hi&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(str);</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ts-node t.ts</span><br></pre></td></tr></table></figure><h1 id="ğŸ–‹ï¸datatype"><a href="#ğŸ–‹ï¸datatype" class="headerlink" title="ğŸ–‹ï¸datatype"></a>ğŸ–‹ï¸datatype</h1><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a1 :<span class="built_in">string</span> =<span class="string">&#x27;abc&#x27;</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">a2</span>:<span class="built_in">number</span> = <span class="number">2</span></span><br><span class="line"><span class="keyword">let</span> a3 :<span class="built_in">boolean</span> =<span class="literal">true</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">nu</span>:<span class="literal">null</span> =<span class="literal">null</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">un</span>:<span class="literal">undefined</span> = <span class="literal">undefined</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">a4</span>:<span class="built_in">string</span>|<span class="literal">null</span>  = <span class="literal">null</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">a5</span>:<span class="number">1</span>|<span class="number">2</span>|<span class="number">3</span> = <span class="number">2</span></span><br></pre></td></tr></table></figure><h2 id="any"><a href="#any" class="headerlink" title="any"></a>any</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">a</span>:<span class="built_in">any</span></span><br><span class="line">a= <span class="number">1</span></span><br><span class="line">a=<span class="string">&quot;1&quot;</span></span><br><span class="line">a=<span class="literal">true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>strong type </p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">a</span>:<span class="built_in">string</span>  = <span class="string">&quot;123&quot;</span></span><br><span class="line"></span><br><span class="line">a=<span class="number">1</span> </span><br></pre></td></tr></table></figure><p>Err</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">a</span>:<span class="built_in">unknown</span></span><br><span class="line">a= <span class="number">1</span></span><br><span class="line">a=<span class="string">&quot;1&quot;</span></span><br><span class="line">a=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> b :<span class="title class_">String</span> </span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">typeof</span> a ==<span class="string">&quot;string&quot;</span>)</span><br><span class="line">&#123;</span><br><span class="line">    b=a </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="enum-æšä¸¾"><a href="#enum-æšä¸¾" class="headerlink" title="enum æšä¸¾"></a>enum æšä¸¾</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Color</span> &#123; <span class="variable constant_">RED</span>,<span class="variable constant_">BLUE</span>,<span class="variable constant_">BLACK</span>&#125;</span><br><span class="line"><span class="keyword">let</span> color = <span class="title class_">Color</span>.<span class="property">BLACK</span>; <span class="comment">//Color[2]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(color);</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ts-node t.ts</span><br></pre></td></tr></table></figure><p>or to js</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc t.ts </span><br></pre></td></tr></table></figure><p>to see t.js </p><h2 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr :<span class="built_in">number</span>[] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> arr2 :<span class="title class_">Array</span>&lt;<span class="built_in">string</span>&gt; = [<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>]</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å…ƒç»„"><a href="#å…ƒç»„" class="headerlink" title="å…ƒç»„"></a>å…ƒç»„</h2><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">arr</span>:[<span class="title class_">String</span>,<span class="built_in">number</span>,<span class="built_in">boolean</span>] =[<span class="string">&quot;123&quot;</span>,<span class="number">1</span>,<span class="literal">true</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a1 :[<span class="built_in">number</span>,<span class="built_in">string</span>,<span class="built_in">number</span>?] = [<span class="number">1</span>,<span class="string">&quot;11&quot;</span>]</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="ğŸ–Šï¸function"><a href="#ğŸ–Šï¸function" class="headerlink" title="ğŸ–Šï¸function"></a>ğŸ–Šï¸function</h1><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">myFn</span>(<span class="params">a:<span class="built_in">number</span>,b:<span class="built_in">string</span>,c?:<span class="built_in">boolean</span>,...rest:<span class="built_in">number</span>[]</span>) :<span class="built_in">number</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span>  <span class="number">100</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> f = <span class="title function_">myFn</span>(<span class="number">10</span>,<span class="string">&#x27;123&#x27;</span>,<span class="literal">true</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br></pre></td></tr></table></figure><h1 id="âœ’ï¸interface"><a href="#âœ’ï¸interface" class="headerlink" title="âœ’ï¸interface"></a>âœ’ï¸interface</h1><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Obj</span>&#123;</span><br><span class="line"></span><br><span class="line">    name :<span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="built_in">number</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">obj</span>:<span class="title class_">Obj</span>=&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;a&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="number">15</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="ğŸ“type"><a href="#ğŸ“type" class="headerlink" title="ğŸ“type"></a>ğŸ“type</h1><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">a</span>: <span class="title class_">String</span> |<span class="built_in">number</span> = <span class="number">10</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> myname = <span class="built_in">string</span> |<span class="built_in">number</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">b</span>:myname = <span class="number">10</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">b2</span>:myname = <span class="string">&quot;10&quot;</span></span><br></pre></td></tr></table></figure><h1 id="ğŸ“T-æ³›å‹"><a href="#ğŸ“T-æ³›å‹" class="headerlink" title="ğŸ“T æ³›å‹"></a>ğŸ“T æ³›å‹</h1><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> myFn&lt;T&gt;(<span class="attr">a</span>:T,<span class="attr">b</span>:T):T[]&#123;</span><br><span class="line">    <span class="keyword">return</span> [a,b]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">myFn&lt;<span class="built_in">number</span>&gt;(<span class="number">1</span>,<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="title function_">myFn</span>(<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>)</span><br></pre></td></tr></table></figure><h1 id="ğŸ“extends"><a href="#ğŸ“extends" class="headerlink" title="ğŸ“extends"></a>ğŸ“extends</h1><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span>  <span class="title class_">Parent</span>&#123;</span><br><span class="line">    p1 :<span class="built_in">string</span> </span><br><span class="line">    <span class="attr">p2</span>:<span class="built_in">number</span> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Child</span> <span class="keyword">extends</span>  <span class="title class_">Parent</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">p3</span>:<span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> v1 :<span class="title class_">Child</span>=</span><br><span class="line">&#123;</span><br><span class="line">    p1 :<span class="string">&quot;123&quot;</span>,</span><br><span class="line">    <span class="attr">p2</span>:<span class="number">1</span>,</span><br><span class="line">    <span class="attr">p3</span>:<span class="string">&quot;12&quot;</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="ğŸ”§class"><a href="#ğŸ”§class" class="headerlink" title="ğŸ”§class"></a>ğŸ”§class</h1><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Article</span></span><br><span class="line">&#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="attr">title</span>:<span class="built_in">string</span></span><br><span class="line">    <span class="attr">con</span>:<span class="built_in">string</span></span><br><span class="line">    temp1?:<span class="built_in">string</span></span><br><span class="line">    tempnum= <span class="number">100</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> temp2 ?:<span class="built_in">string</span> </span><br><span class="line">    <span class="keyword">protected</span> temp3?:<span class="built_in">string</span> </span><br><span class="line">    <span class="keyword">static</span> a1 :<span class="built_in">string</span> </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">readonly</span> a2 :<span class="built_in">string</span> =<span class="string">&#x27;a2st&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="title function_">constructor</span> (<span class="attr">title</span>:<span class="built_in">string</span>,<span class="attr">con</span>:<span class="built_in">string</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">title</span>=title</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">con</span>=con</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> a1 =<span class="keyword">new</span>  <span class="title class_">Article</span>(<span class="string">&#x27;t1&#x27;</span>,<span class="string">&#x27;con1&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">B</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Article</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="title function_">constructor</span> (<span class="attr">title</span>:<span class="built_in">string</span> ,<span class="attr">con</span>:<span class="built_in">string</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="variable language_">super</span>(title,con)</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">temp3</span>=<span class="string">&quot;1&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">User</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> _password :<span class="built_in">string</span> =<span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">password</span>():<span class="built_in">string</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;****&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    set password (<span class="attr">newPass</span>:<span class="built_in">string</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">_password</span> = newPass</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> u1  = <span class="keyword">new</span>   <span class="title class_">User</span>()</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(u1.<span class="property">password</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="ğŸª›abstract"><a href="#ğŸª›abstract" class="headerlink" title="ğŸª›abstract"></a>ğŸª›abstract</h1><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">Animal</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">abstract</span> <span class="attr">name</span>:<span class="built_in">string</span></span><br><span class="line">    <span class="keyword">abstract</span> <span class="title function_">makeSound</span>():<span class="built_in">void</span></span><br><span class="line">    <span class="title function_">move</span>():<span class="built_in">void</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;mmm&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Cat</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">name</span>:<span class="built_in">string</span>=<span class="string">&#x27;miao&#x27;</span></span><br><span class="line">    <span class="title function_">makeSound</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;miaomiao&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">name</span>:<span class="built_in">string</span>=<span class="string">&#x27;wang&#x27;</span></span><br><span class="line">    <span class="title function_">makeSound</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;wangwang&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="ğŸ§²implements"><a href="#ğŸ§²implements" class="headerlink" title="ğŸ§²implements"></a>ğŸ§²implements</h1><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Animal</span>&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="built_in">string</span></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">sound</span>():<span class="built_in">string</span></span><br><span class="line">    <span class="title function_">makesound</span>():<span class="built_in">void</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">AgeI</span>&#123;</span><br><span class="line">    <span class="attr">age</span>:<span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Dog</span> <span class="keyword">implements</span> <span class="title class_">Animal</span>,<span class="title class_">AgeI</span>&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span> = <span class="string">&#x27;wang&#x27;</span></span><br><span class="line">    <span class="attr">age</span>:<span class="built_in">number</span> = <span class="number">2</span></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">sound</span>()&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">makesound</span>(): <span class="built_in">void</span> &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> helloworld </tag>
            
            <tag> Typescript </tag>
            
            <tag> datatype </tag>
            
            <tag> interface </tag>
            
            <tag> type </tag>
            
            <tag> T </tag>
            
            <tag> extends </tag>
            
            <tag> class </tag>
            
            <tag> abstract </tag>
            
            <tag> implements </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>.NET Blazor</title>
      <link href="/2024/05/18/NET-Blazor/"/>
      <url>/2024/05/18/NET-Blazor/</url>
      
        <content type="html"><![CDATA[<p>Blazor æ˜¯ä¸€ä¸ªä½¿ç”¨ C#ã€HTML å’Œ CSS æ„å»ºäº¤äº’å¼ Web UI çš„å¼€æºæ¡†æ¶ï¼Œæ”¯æŒæœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯è¿è¡Œï¼Œå…è®¸å¼€å‘è€…åˆ©ç”¨ C# å’Œ .NET ç”Ÿæ€æ¥åˆ›å»º Web åº”ç”¨ã€‚</p><h1 id="ğŸŒ±Create"><a href="#ğŸŒ±Create" class="headerlink" title="ğŸŒ±Create"></a>ğŸŒ±Create</h1><p>carete Blazor Web</p><p>Program.cs æ˜¯å¯åŠ¨æœåŠ¡å™¨ä»¥åŠåœ¨å…¶ä¸­é…ç½®åº”ç”¨æœåŠ¡å’Œä¸­é—´ä»¶çš„åº”ç”¨çš„å…¥å£ç‚¹ã€‚<br>åœ¨ Components ç›®å½•ä¸­:</p><p>App.razor ä¸ºåº”ç”¨çš„æ ¹ç»„ä»¶ã€‚<br>Routes.razor é…ç½® Blazor è·¯ç”±å™¨ã€‚<br>Pages ç›®å½•åŒ…å«åº”ç”¨çš„ä¸€äº›ç¤ºä¾‹ç½‘é¡µã€‚<br>BlazorApp.csproj å®šä¹‰åº”ç”¨é¡¹ç›®åŠå…¶ä¾èµ–é¡¹ï¼Œä¸”å¯ä»¥é€šè¿‡åŒå‡»è§£å†³æ–¹æ¡ˆèµ„æºç®¡ç†å™¨ä¸­çš„ BlazorApp é¡¹ç›®èŠ‚ç‚¹è¿›è¡ŒæŸ¥çœ‹ã€‚<br>Properties ç›®å½•ä¸­çš„ launchSettings.json æ–‡ä»¶ä¸ºæœ¬åœ°å¼€å‘ç¯å¢ƒå®šä¹‰ä¸åŒçš„é…ç½®æ–‡ä»¶è®¾ç½®ã€‚åˆ›å»ºé¡¹ç›®æ—¶ä¼šè‡ªåŠ¨åˆ†é…ç«¯å£å·å¹¶å°†å…¶ä¿å­˜åœ¨æ­¤æ–‡ä»¶ä¸Šã€‚</p><h1 id="ğŸª´Run"><a href="#ğŸª´Run" class="headerlink" title="ğŸª´Run"></a>ğŸª´Run</h1><p>pages home.razor</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@page <span class="string">&quot;/&quot;</span></span><br><span class="line"></span><br><span class="line">&lt;PageTitle&gt;Home&lt;/PageTitle&gt;</span><br><span class="line"></span><br><span class="line">&lt;h1&gt;Hello, world m qqqqq&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">hihihi</span><br></pre></td></tr></table></figure><h1 id="ğŸŒ´Counter"><a href="#ğŸŒ´Counter" class="headerlink" title="ğŸŒ´Counter"></a>ğŸŒ´Counter</h1><p>counter.razor</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">@page <span class="string">&quot;/counter&quot;</span></span><br><span class="line">@rendermode InteractiveServer</span><br><span class="line"></span><br><span class="line">&lt;PageTitle&gt;Counter&lt;/PageTitle&gt;</span><br><span class="line"></span><br><span class="line">&lt;h1&gt;Counter&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">&lt;p role=<span class="string">&quot;status&quot;</span>&gt;Current count: @currentCount&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">&lt;button <span class="keyword">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> @onclick=<span class="string">&quot;IncrementCount&quot;</span>&gt;Click me&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">@code &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> currentCount = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">IncrementCount</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        currentCount++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><!-- # ğŸŒ²Weather  --><p>åƒVue</p><h1 id="ğŸŒ³Component"><a href="#ğŸŒ³Component" class="headerlink" title="ğŸŒ³Component"></a>ğŸŒ³Component</h1><p><strong>home &gt; component</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@page <span class="string">&quot;/&quot;</span></span><br><span class="line"></span><br><span class="line">&lt;PageTitle&gt;Home&lt;/PageTitle&gt;</span><br><span class="line"></span><br><span class="line">&lt;h1&gt;Hello, world m qqqqq&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">hihihi</span><br><span class="line"></span><br><span class="line"> &lt;Counter /&gt; </span><br><span class="line"></span><br><span class="line"> &lt;Weather&gt; &lt;/Weather&gt;</span><br></pre></td></tr></table></figure><h2 id="Parameter"><a href="#Parameter" class="headerlink" title="Parameter"></a>Parameter</h2><p>ä¿®æ”¹counter</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">@code &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">int</span> currentCount = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    [<span class="meta">Parameter</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> IncrementAmount &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125; = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">IncrementCount</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// currentCount++;</span></span><br><span class="line">        currentCount += IncrementAmount;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;Counter IncrementAmount=<span class="string">&quot;2&quot;</span> /&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç‚¹å‡»å³å¢åŠ 2 </p><p>data</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;input @bind=<span class="string">&quot;text&quot;</span> /&gt;</span><br><span class="line">&lt;button @onclick=<span class="string">&quot;() =&gt; text = string.Empty&quot;</span>&gt;Clear&lt;/button&gt;</span><br><span class="line">&lt;p&gt;@text&lt;/p&gt;</span><br><span class="line"></span><br><span class="line">@code &#123;</span><br><span class="line">    <span class="built_in">string</span> text = <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ğŸŒ»ToDoList"><a href="#ğŸŒ»ToDoList" class="headerlink" title="ğŸŒ»ToDoList"></a>ğŸŒ»ToDoList</h1><h2 id="nav"><a href="#nav" class="headerlink" title="nav"></a>nav</h2><p>Components&#x2F;Layout&#x2F;NavMenu.razor</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;nav-item px-3&quot;</span>&gt;</span><br><span class="line">    &lt;NavLink <span class="keyword">class</span>=<span class="string">&quot;nav-link&quot;</span> href=<span class="string">&quot;todo&quot;</span>&gt;</span><br><span class="line">        &lt;span <span class="keyword">class</span>=<span class="string">&quot;bi bi-list-nested-nav-menu&quot;</span> aria-hidden=<span class="string">&quot;true&quot;</span>&gt;&lt;/span&gt; Todo</span><br><span class="line">    &lt;/NavLink&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><h2 id="TodoItem"><a href="#TodoItem" class="headerlink" title="TodoItem"></a>TodoItem</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">TodoItem</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span>? Title &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">bool</span> IsDone &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125; = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="AddItem"><a href="#AddItem" class="headerlink" title="AddItem"></a>AddItem</h2><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">    @foreach (<span class="keyword">var</span> todo <span class="keyword">in</span> todos)</span><br><span class="line">    &#123;</span><br><span class="line">        &lt;li&gt;@todo.Title&lt;/li&gt;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line">&lt;br /&gt;</span><br><span class="line"></span><br><span class="line">&lt;input @bind=<span class="string">&quot;newTodo&quot;</span> /&gt;</span><br><span class="line">&lt;button @onclick=<span class="string">&quot;AddTodo&quot;</span>&gt;Add todo&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">@code &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> List&lt;TodoItem&gt; todos = <span class="keyword">new</span>();</span><br><span class="line"></span><br><span class="line">    <span class="built_in">string</span> newTodo = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">AddTodo</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="built_in">string</span>.IsNullOrWhiteSpace(newTodo))</span><br><span class="line">        &#123;</span><br><span class="line">            todos.Add(<span class="keyword">new</span> TodoItem &#123; Title = newTodo &#125;);</span><br><span class="line">            newTodo = <span class="built_in">string</span>.Empty;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><!--https://github.com/dotnet-presentations/blazor-workshop -->]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> .NET </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>.NET RabbitMQ NOTE</title>
      <link href="/2024/05/18/NET-RabbitMQ/"/>
      <url>/2024/05/18/NET-RabbitMQ/</url>
      
        <content type="html"><![CDATA[<h1 id="setup-rabbitmq"><a href="#setup-rabbitmq" class="headerlink" title="setup rabbitmq"></a>setup rabbitmq</h1><p>docker run  â€“name&#x3D;rabbit  -p 15672:15672 -p 5672:5672  -e RABBITMQ_DEFAULT_USER&#x3D;admin -e RABBITMQ_DEFAULT_PASS&#x3D;xxx  -d  rabbitmq:management </p><p>ip:15672</p><p>nuget RabbitMQ.Client</p><p><strong>Send</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.1.å®ä¾‹åŒ–è¿æ¥å·¥å‚</span></span><br><span class="line"><span class="keyword">var</span> factory = <span class="keyword">new</span> ConnectionFactory() &#123; HostName = <span class="string">&quot;localhost&quot;</span> &#125;;</span><br><span class="line"><span class="comment">//2. å»ºç«‹è¿æ¥</span></span><br><span class="line"><span class="keyword">using</span> (<span class="keyword">var</span> connection = factory.CreateConnection())</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//3. åˆ›å»ºä¿¡é“</span></span><br><span class="line">    <span class="keyword">using</span> (<span class="keyword">var</span> channel = connection.CreateModel())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//4. ç”³æ˜é˜Ÿåˆ—</span></span><br><span class="line">        channel.QueueDeclare(queue: <span class="string">&quot;hello&quot;</span>, durable: <span class="literal">false</span>, exclusive: <span class="literal">false</span>, autoDelete: <span class="literal">false</span>, arguments: <span class="literal">null</span>);</span><br><span class="line">        <span class="comment">//5. æ„å»ºbyteæ¶ˆæ¯æ•°æ®åŒ…</span></span><br><span class="line">        <span class="built_in">string</span> message = args.Length &gt; <span class="number">0</span> ? args[<span class="number">0</span>] : <span class="string">&quot;Hello RabbitMQ!&quot;</span>;</span><br><span class="line">        <span class="keyword">var</span> body = Encoding.UTF8.GetBytes(message);</span><br><span class="line">        <span class="comment">//6. å‘é€æ•°æ®åŒ…</span></span><br><span class="line">        channel.BasicPublish(exchange: <span class="string">&quot;&quot;</span>, routingKey: <span class="string">&quot;hello&quot;</span>, basicProperties: <span class="literal">null</span>, body: body);</span><br><span class="line">        Console.WriteLine(<span class="string">&quot; [x] Sent &#123;0&#125;&quot;</span>, message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>Received</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.å®ä¾‹åŒ–è¿æ¥å·¥å‚</span></span><br><span class="line"><span class="keyword">var</span> factory = <span class="keyword">new</span> ConnectionFactory() &#123; HostName = <span class="string">&quot;localhost&quot;</span> &#125;;</span><br><span class="line"><span class="comment">//2. å»ºç«‹è¿æ¥</span></span><br><span class="line"><span class="keyword">using</span> (<span class="keyword">var</span> connection = factory.CreateConnection())</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//3. åˆ›å»ºä¿¡é“</span></span><br><span class="line">    <span class="keyword">using</span> (<span class="keyword">var</span> channel = connection.CreateModel())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//4. ç”³æ˜é˜Ÿåˆ—</span></span><br><span class="line">        channel.QueueDeclare(queue: <span class="string">&quot;hello&quot;</span>, durable: <span class="literal">false</span>, exclusive: <span class="literal">false</span>, autoDelete: <span class="literal">false</span>, arguments: <span class="literal">null</span>);</span><br><span class="line">        <span class="comment">//5. æ„é€ æ¶ˆè´¹è€…å®ä¾‹</span></span><br><span class="line">        <span class="keyword">var</span> consumer = <span class="keyword">new</span> EventingBasicConsumer(channel);</span><br><span class="line">        <span class="comment">//6. ç»‘å®šæ¶ˆæ¯æ¥æ”¶åçš„äº‹ä»¶å§”æ‰˜</span></span><br><span class="line">        consumer.Received += (model, ea) =&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">var</span> message = Encoding.UTF8.GetString(ea.Body.ToArray());</span><br><span class="line">            Console.WriteLine(<span class="string">&quot; [x] Received &#123;0&#125;&quot;</span>, message);</span><br><span class="line">            Thread.Sleep(<span class="number">6000</span>);<span class="comment">//æ¨¡æ‹Ÿè€—æ—¶</span></span><br><span class="line">            Console.WriteLine(<span class="string">&quot; [x] Done&quot;</span>);</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">//7. å¯åŠ¨æ¶ˆè´¹è€…</span></span><br><span class="line">        channel.BasicConsume(queue: <span class="string">&quot;hello&quot;</span>, autoAck: <span class="literal">true</span>, consumer: consumer);</span><br><span class="line">        Console.WriteLine(<span class="string">&quot; Press [enter] to exit.&quot;</span>);</span><br><span class="line">        Console.ReadLine();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>Err<br>RabbitMQ.Client.Exceptions.BrokerUnreachableException:â€œNone of the specified endpoints were reachableâ€<br>IP host</p><p>Err<br>AuthenticationFailureException: ACCESS_REFUSED - Login was refused using authentication mechanism </p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> ConnectionFactory() &#123; HostName = <span class="string">&quot;localhost&quot;</span> ,UserName=<span class="string">&quot;admin&quot;</span>,Password=<span class="string">&quot;xxx&quot;</span>&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>æ¶ˆæ¯æŒä¹…åŒ–</strong></p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//...</span></span><br><span class="line">    <span class="comment">//4. ç”³æ˜é˜Ÿåˆ—(æŒ‡å®šdurable:true,å‘ŠçŸ¥rabbitmqå¯¹æ¶ˆæ¯è¿›è¡ŒæŒä¹…åŒ–)</span></span><br><span class="line">    channel.QueueDeclare(queue: <span class="string">&quot;hellooo&quot;</span>, durable: <span class="literal">true</span>, exclusive: <span class="literal">false</span>, autoDelete: <span class="literal">false</span>, arguments: <span class="literal">null</span>);</span><br><span class="line">    <span class="comment">//å°†æ¶ˆæ¯æ ‡è®°ä¸ºæŒä¹…æ€§ - å°†IBasicProperties.SetPersistentè®¾ç½®ä¸ºtrue</span></span><br><span class="line">    <span class="keyword">var</span> properties = channel.CreateBasicProperties();</span><br><span class="line">    properties.Persistent = <span class="literal">true</span>;</span><br><span class="line">    <span class="comment">//5. æ„å»ºbyteæ¶ˆæ¯æ•°æ®åŒ…</span></span><br><span class="line">    <span class="built_in">string</span> message = args.Length &gt; <span class="number">0</span> ? args[<span class="number">0</span>] : <span class="string">&quot;Hello RabbitMQ!&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> body = Encoding.UTF8.GetBytes(message);</span><br><span class="line">    <span class="comment">//6. å‘é€æ•°æ®åŒ…(æŒ‡å®šbasicProperties)</span></span><br><span class="line">    channel.BasicPublish(exchange: <span class="string">&quot;&quot;</span>, routingKey: <span class="string">&quot;hello&quot;</span>, basicProperties: properties, body: body);</span><br><span class="line">    <span class="comment">//6. å‘é€æ•°æ®åŒ…</span></span><br><span class="line">    channel.BasicPublish(exchange: <span class="string">&quot;&quot;</span>, routingKey: <span class="string">&quot;hello&quot;</span>, basicProperties: <span class="literal">null</span>, body: body);</span><br><span class="line">    Console.WriteLine(<span class="string">&quot; [x] Sent &#123;0&#125;&quot;</span>, message);</span><br></pre></td></tr></table></figure><p>durable: true </p><!--RPC //ç”³æ˜å”¯ä¸€guidç”¨æ¥æ ‡è¯†æ­¤æ¬¡å‘é€çš„è¿œç¨‹è°ƒç”¨è¯·æ±‚ var correlationId = Guid.NewGuid().ToString(); //ç”³æ˜éœ€è¦ç›‘å¬çš„å›è°ƒé˜Ÿåˆ— var replyQueue = channel.QueueDeclare().QueueName; var properties = channel.CreateBasicProperties(); properties.ReplyTo = replyQueue;//æŒ‡å®šå›è°ƒé˜Ÿåˆ— properties.CorrelationId = correlationId;//æŒ‡å®šæ¶ˆæ¯å”¯ä¸€æ ‡è¯† string number = args.Length > 0 ? args[0] : "30"; var body = Encoding.UTF8.GetBytes(number); //å‘å¸ƒæ¶ˆæ¯ channel.BasicPublish(exchange: "", routingKey: "rpc_queue", basicProperties: properties, body: body); Console.WriteLine($"[*] Request fib({number})"); // //åˆ›å»ºæ¶ˆè´¹è€…ç”¨äºå¤„ç†æ¶ˆæ¯å›è°ƒï¼ˆè¿œç¨‹è°ƒç”¨è¿”å›ç»“æœï¼‰ var callbackConsumer = new EventingBasicConsumer(channel); channel.BasicConsume(queue: replyQueue, autoAck: true, consumer: callbackConsumer); callbackConsumer.Received += (model, ea) => {      //ä»…å½“æ¶ˆæ¯å›è°ƒçš„IDä¸å‘é€çš„IDä¸€è‡´æ—¶ï¼Œè¯´æ˜è¿œç¨‹è°ƒç”¨ç»“æœæ­£ç¡®è¿”å›ã€‚     if (ea.BasicProperties.CorrelationId == correlationId)     {         var responseMsg = $"Get Response: {Encoding.UTF8.GetString(ea.Body)}";         Console.WriteLine($"[x]: {responseMsg}");     } };//ç”³æ˜é˜Ÿåˆ—æ¥æ”¶è¿œç¨‹è°ƒç”¨è¯·æ±‚channel.QueueDeclare(queue: "rpc_queue", durable: false,    exclusive: false, autoDelete: false, arguments: null);var consumer = new EventingBasicConsumer(channel);Console.WriteLine("[*] Waiting for message.");//è¯·æ±‚å¤„ç†é€»è¾‘consumer.Received += (model, ea) =>{    var message = Encoding.UTF8.GetString(ea.Body);    int n = int.Parse(message);    Console.WriteLine($"Receive request of Fib({n})");    int result = Fib(n);    //ä»è¯·æ±‚çš„å‚æ•°ä¸­è·å–è¯·æ±‚çš„å”¯ä¸€æ ‡è¯†ï¼Œåœ¨æ¶ˆæ¯å›ä¼ æ—¶åŒæ ·ç»‘å®š    var properties = ea.BasicProperties;    var replyProerties = channel.CreateBasicProperties();    replyProerties.CorrelationId = properties.CorrelationId;    //å°†è¿œç¨‹è°ƒç”¨ç»“æœå‘é€åˆ°å®¢æˆ·ç«¯ç›‘å¬çš„é˜Ÿåˆ—ä¸Š    channel.BasicPublish(exchange: "", routingKey: properties.ReplyTo,        basicProperties: replyProerties, body: Encoding.UTF8.GetBytes(result.ToString()));    //æ‰‹åŠ¨å‘å›æ¶ˆæ¯ç¡®è®¤    channel.BasicAck(ea.DeliveryTag, false);    Console.WriteLine($"Return result: Fib({n})= {result}");};channel.BasicConsume(queue: "rpc_queue", autoAck: false, consumer: consumer);https://github.com/sheng-jie/RabbitMQhttps://github.com/EasyNetQ/EasyNetQ-->]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> .NETS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nodejs2</title>
      <link href="/2024/05/17/Nodejs-Base2/"/>
      <url>/2024/05/17/Nodejs-Base2/</url>
      
        <content type="html"><![CDATA[<h1 id="ğŸ“˜-util"><a href="#ğŸ“˜-util" class="headerlink" title="ğŸ“˜ util"></a>ğŸ“˜ util</h1><h2 id="util"><a href="#util" class="headerlink" title="util"></a>util</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> util = <span class="built_in">require</span>(<span class="string">&#x27;util&#x27;</span>);</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">util.<span class="title function_">isArray</span>([])</span><br><span class="line"></span><br><span class="line">util.<span class="title function_">isRegExp</span>(<span class="regexp">/some regexp/</span>)</span><br><span class="line"></span><br><span class="line">util.<span class="title function_">isDate</span>(<span class="keyword">new</span> <span class="title class_">Date</span>())</span><br><span class="line"> <span class="comment">// true</span></span><br><span class="line"> util.<span class="title function_">isDate</span>(<span class="title class_">Date</span>())</span><br><span class="line"> <span class="comment">// false (without &#x27;new&#x27; returns a String)</span></span><br><span class="line"> </span><br></pre></td></tr></table></figure><h2 id="os"><a href="#os" class="headerlink" title="os"></a>os</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> os = <span class="built_in">require</span>(<span class="string">&quot;os&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// CPU çš„å­—èŠ‚åº</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;endianness : &#x27;</span> + os.<span class="title function_">endianness</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ“ä½œç³»ç»Ÿå</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;type : &#x27;</span> + os.<span class="title function_">type</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ“ä½œç³»ç»Ÿå</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;platform : &#x27;</span> + os.<span class="title function_">platform</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç³»ç»Ÿå†…å­˜æ€»é‡</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;total memory : &#x27;</span> + os.<span class="title function_">totalmem</span>() + <span class="string">&quot; bytes.&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ“ä½œç³»ç»Ÿç©ºé—²å†…å­˜é‡</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;free memory : &#x27;</span> + os.<span class="title function_">freemem</span>() + <span class="string">&quot; bytes.&quot;</span>);</span><br></pre></td></tr></table></figure><h2 id="path"><a href="#path" class="headerlink" title="path"></a>path</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// æ ¼å¼åŒ–è·¯å¾„</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;normalization : &#x27;</span> + path.<span class="title function_">normalize</span>(<span class="string">&#x27;/test/test1//2slashes/1slash/tab/..&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿æ¥è·¯å¾„</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;joint path : &#x27;</span> + path.<span class="title function_">join</span>(<span class="string">&#x27;/test&#x27;</span>, <span class="string">&#x27;test1&#x27;</span>, <span class="string">&#x27;2slashes/1slash&#x27;</span>, <span class="string">&#x27;tab&#x27;</span>, <span class="string">&#x27;..&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// è½¬æ¢ä¸ºç»å¯¹è·¯å¾„</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;resolve : &#x27;</span> + path.<span class="title function_">resolve</span>(<span class="string">&#x27;main.js&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·¯å¾„ä¸­æ–‡ä»¶çš„åç¼€å</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ext name : &#x27;</span> + path.<span class="title function_">extname</span>(<span class="string">&#x27;main.js&#x27;</span>));</span><br></pre></td></tr></table></figure><h2 id="net"><a href="#net" class="headerlink" title="net"></a>net</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//client</span></span><br><span class="line"><span class="keyword">var</span> net = <span class="built_in">require</span>(<span class="string">&#x27;net&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> client = net.<span class="title function_">connect</span>(&#123;<span class="attr">port</span>: <span class="number">6001</span>&#125;, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;è¿æ¥åˆ°æœåŠ¡å™¨ï¼&#x27;</span>);  </span><br><span class="line">&#125;);</span><br><span class="line">client.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="keyword">function</span>(<span class="params">data</span>) &#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(data.<span class="title function_">toString</span>());</span><br><span class="line">   client.<span class="title function_">end</span>();</span><br><span class="line">&#125;);</span><br><span class="line">client.<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123; </span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ–­å¼€ä¸æœåŠ¡å™¨çš„è¿æ¥&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//server</span></span><br><span class="line"><span class="keyword">var</span> net = <span class="built_in">require</span>(<span class="string">&#x27;net&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> server = net.<span class="title function_">createServer</span>(<span class="keyword">function</span>(<span class="params">connection</span>) &#123; </span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;client connected&#x27;</span>);</span><br><span class="line">   connection.<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å®¢æˆ·ç«¯å…³é—­è¿æ¥&#x27;</span>);</span><br><span class="line">   &#125;);</span><br><span class="line">   connection.<span class="title function_">write</span>(<span class="string">&#x27;Hello World!\r\n&#x27;</span>);</span><br><span class="line">   connection.<span class="title function_">pipe</span>(connection);</span><br><span class="line">&#125;);</span><br><span class="line">server.<span class="title function_">listen</span>(<span class="number">8080</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123; </span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;server is listening&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="dns"><a href="#dns" class="headerlink" title="dns"></a>dns</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> dns = <span class="built_in">require</span>(<span class="string">&#x27;dns&#x27;</span>);</span><br><span class="line"></span><br><span class="line">dns.<span class="title function_">lookup</span>(<span class="string">&#x27;www.qq.com&#x27;</span>, <span class="keyword">function</span> <span class="title function_">onLookup</span>(<span class="params">err, address, family</span>) &#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ip åœ°å€:&#x27;</span>, address);</span><br><span class="line">   dns.<span class="title function_">reverse</span>(address, <span class="keyword">function</span> (<span class="params">err, hostnames</span>) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;åå‘è§£æ &#x27;</span> + address + <span class="string">&#x27;: &#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(hostnames));</span><br><span class="line">&#125;);  </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="ğŸ“•file"><a href="#ğŸ“•file" class="headerlink" title="ğŸ“•file"></a>ğŸ“•file</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//read</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">stat</span>(<span class="string">&#x27;E:/vue/nodejs/hello.js&#x27;</span>, <span class="keyword">function</span> (<span class="params">err, stats</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(stats.<span class="title function_">isFile</span>());         <span class="comment">//true</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼‚æ­¥è¯»å–</span></span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&#x27;input.txt&#x27;</span>, <span class="keyword">function</span> (<span class="params">err, data</span>) &#123;</span><br><span class="line">   <span class="keyword">if</span> (err) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(err);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å¼‚æ­¥è¯»å–: &quot;</span> + data.<span class="title function_">toString</span>());</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŒæ­¥è¯»å–</span></span><br><span class="line"><span class="keyword">var</span> data = fs.<span class="title function_">readFileSync</span>(<span class="string">&#x27;input.txt&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;åŒæ­¥è¯»å–: &quot;</span> + data.<span class="title function_">toString</span>());</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚&quot;</span>);</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//write</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">writeFile</span>(<span class="string">&#x27;x.txt&#x27;</span>, <span class="string">&#x27;fs.writeFile å†™å…¥æ–‡ä»¶çš„å†…å®¹&#x27;</span>,  <span class="keyword">function</span>(<span class="params">err</span>) &#123;</span><br><span class="line">   <span class="keyword">if</span> (err) &#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(err);</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å†™å…¥æˆåŠŸï¼&quot;</span>);</span><br><span class="line"></span><br><span class="line">   fs.<span class="title function_">readFile</span>(<span class="string">&#x27;x.txt&#x27;</span>, <span class="keyword">function</span> (<span class="params">err, data</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">         <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(err);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å¼‚æ­¥è¯»å–æ–‡ä»¶æ•°æ®: &quot;</span> + data.<span class="title function_">toString</span>());</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="ğŸ“—Get-Post"><a href="#ğŸ“—Get-Post" class="headerlink" title="ğŸ“—Get&#x2F;Post"></a>ğŸ“—Get&#x2F;Post</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> util = <span class="built_in">require</span>(<span class="string">&#x27;util&#x27;</span>);</span><br><span class="line"> </span><br><span class="line">http.<span class="title function_">createServer</span>(<span class="keyword">function</span>(<span class="params">req, res</span>)&#123;</span><br><span class="line">    res.<span class="title function_">writeHead</span>(<span class="number">200</span>, &#123;<span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/plain; charset=utf-8&#x27;</span>&#125;);</span><br><span class="line">    res.<span class="title function_">end</span>(util.<span class="title function_">inspect</span>(url.<span class="title function_">parse</span>(req.<span class="property">url</span>, <span class="literal">true</span>)));</span><br><span class="line">&#125;).<span class="title function_">listen</span>(<span class="number">3000</span>);</span><br></pre></td></tr></table></figure><p><a href="http://localhost:3000/?name=mqm&url=www">http://localhost:3000/?name=mqm&amp;url=www</a><br>Url {<br>  protocol: null,<br>  slashes: null,<br>  auth: null,<br>  host: null,<br>  port: null,<br>  hostname: null,<br>  hash: null,<br>  search: â€˜?name&#x3D;mqm&amp;url&#x3D;wwwâ€™,<br>  query: [Object: null prototype] { name: â€˜mqmâ€™, url: â€˜wwwâ€™ },<br>  pathname: â€˜&#x2F;â€˜,<br>  path: â€˜&#x2F;?name&#x3D;mqm&amp;url&#x3D;wwwâ€™,<br>  href: â€˜&#x2F;?name&#x3D;mqm&amp;url&#x3D;wwwâ€™<br>}</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//post</span></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> querystring = <span class="built_in">require</span>(<span class="string">&#x27;querystring&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> postHTML = </span><br><span class="line">  <span class="string">&#x27;&lt;html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;title&gt;POST&lt;/title&gt;&lt;/head&gt;&#x27;</span> +</span><br><span class="line">  <span class="string">&#x27;&lt;body&gt;&#x27;</span> +</span><br><span class="line">  <span class="string">&#x27;&lt;form method=&quot;post&quot;&gt;&#x27;</span> +</span><br><span class="line">  <span class="string">&#x27;NAME: &lt;input name=&quot;name&quot;&gt;&lt;br&gt;&#x27;</span> +</span><br><span class="line">  <span class="string">&#x27;URLï¼š &lt;input name=&quot;url&quot;&gt;&lt;br&gt;&#x27;</span> +</span><br><span class="line">  <span class="string">&#x27;&lt;input type=&quot;submit&quot;&gt;&#x27;</span> +</span><br><span class="line">  <span class="string">&#x27;&lt;/form&gt;&#x27;</span> +</span><br><span class="line">  <span class="string">&#x27;&lt;/body&gt;&lt;/html&gt;&#x27;</span>;</span><br><span class="line"> </span><br><span class="line">http.<span class="title function_">createServer</span>(<span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> body = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  req.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="keyword">function</span> (<span class="params">chunk</span>) &#123;</span><br><span class="line">    body += chunk;</span><br><span class="line">  &#125;);</span><br><span class="line">  req.<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// è§£æå‚æ•°</span></span><br><span class="line">    body = querystring.<span class="title function_">parse</span>(body);</span><br><span class="line">    <span class="comment">// è®¾ç½®å“åº”å¤´éƒ¨ä¿¡æ¯åŠç¼–ç </span></span><br><span class="line">    res.<span class="title function_">writeHead</span>(<span class="number">200</span>, &#123;<span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/html; charset=utf8&#x27;</span>&#125;);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span>(body.<span class="property">name</span> &amp;&amp; body.<span class="property">url</span>) &#123; <span class="comment">// è¾“å‡ºæäº¤çš„æ•°æ®</span></span><br><span class="line">        res.<span class="title function_">write</span>(<span class="string">&quot;NAMEï¼š&quot;</span> + body.<span class="property">name</span>);</span><br><span class="line">        res.<span class="title function_">write</span>(<span class="string">&quot;&lt;br&gt;&quot;</span>);</span><br><span class="line">        res.<span class="title function_">write</span>(<span class="string">&quot;URLï¼š&quot;</span> + body.<span class="property">url</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;  <span class="comment">// è¾“å‡ºè¡¨å•</span></span><br><span class="line">        res.<span class="title function_">write</span>(postHTML);</span><br><span class="line">    &#125;</span><br><span class="line">    res.<span class="title function_">end</span>();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;).<span class="title function_">listen</span>(<span class="number">3000</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="ğŸ“™Web"><a href="#ğŸ“™Web" class="headerlink" title="ğŸ“™Web"></a>ğŸ“™Web</h1><p>server</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> url = <span class="built_in">require</span>(<span class="string">&#x27;url&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">// åˆ›å»ºæœåŠ¡å™¨</span></span><br><span class="line">http.<span class="title function_">createServer</span>( <span class="keyword">function</span> (<span class="params">request, response</span>) &#123;  </span><br><span class="line">   <span class="comment">// è§£æè¯·æ±‚ï¼ŒåŒ…æ‹¬æ–‡ä»¶å</span></span><br><span class="line">   <span class="keyword">var</span> pathname = url.<span class="title function_">parse</span>(request.<span class="property">url</span>).<span class="property">pathname</span>;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">// è¾“å‡ºè¯·æ±‚çš„æ–‡ä»¶å</span></span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Request for &quot;</span> + pathname + <span class="string">&quot; received.&quot;</span>);</span><br><span class="line">   </span><br><span class="line">   <span class="comment">// ä»æ–‡ä»¶ç³»ç»Ÿä¸­è¯»å–è¯·æ±‚çš„æ–‡ä»¶å†…å®¹</span></span><br><span class="line">   fs.<span class="title function_">readFile</span>(pathname.<span class="title function_">substr</span>(<span class="number">1</span>), <span class="keyword">function</span> (<span class="params">err, data</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (err) &#123;</span><br><span class="line">         <span class="variable language_">console</span>.<span class="title function_">log</span>(err);</span><br><span class="line">         <span class="comment">// HTTP çŠ¶æ€ç : 404 : NOT FOUND</span></span><br><span class="line">         <span class="comment">// Content Type: text/html</span></span><br><span class="line">         response.<span class="title function_">writeHead</span>(<span class="number">404</span>, &#123;<span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/html&#x27;</span>&#125;);</span><br><span class="line">      &#125;<span class="keyword">else</span>&#123;             </span><br><span class="line">         <span class="comment">// HTTP çŠ¶æ€ç : 200 : OK</span></span><br><span class="line">         <span class="comment">// Content Type: text/html</span></span><br><span class="line">         response.<span class="title function_">writeHead</span>(<span class="number">200</span>, &#123;<span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/html&#x27;</span>&#125;);    </span><br><span class="line">         </span><br><span class="line">         <span class="comment">// å“åº”æ–‡ä»¶å†…å®¹</span></span><br><span class="line">         response.<span class="title function_">write</span>(data.<span class="title function_">toString</span>());        </span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//  å‘é€å“åº”æ•°æ®</span></span><br><span class="line">      response.<span class="title function_">end</span>();</span><br><span class="line">   &#125;);   </span><br><span class="line">&#125;).<span class="title function_">listen</span>(<span class="number">188</span>);</span><br><span class="line"> </span><br></pre></td></tr></table></figure><p>client</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// ç”¨äºè¯·æ±‚çš„é€‰é¡¹</span></span><br><span class="line"><span class="keyword">var</span> options = &#123;</span><br><span class="line">   <span class="attr">host</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">   <span class="attr">port</span>: <span class="string">&#x27;3276&#x27;</span>,</span><br><span class="line">   <span class="attr">path</span>: <span class="string">&#x27;/api/fileApi/GetByfid?fid=1&#x27;</span>  </span><br><span class="line">&#125;;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// å¤„ç†å“åº”çš„å›è°ƒå‡½æ•°</span></span><br><span class="line"><span class="keyword">var</span> callback = <span class="keyword">function</span>(<span class="params">response</span>)&#123;</span><br><span class="line">   <span class="comment">// ä¸æ–­æ›´æ–°æ•°æ®</span></span><br><span class="line">   <span class="keyword">var</span> body = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">   response.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="keyword">function</span>(<span class="params">data</span>) &#123;</span><br><span class="line">      body += data;</span><br><span class="line">   &#125;);</span><br><span class="line">   </span><br><span class="line">   response.<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// æ•°æ®æ¥æ”¶å®Œæˆ</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(body);</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚</span></span><br><span class="line"><span class="keyword">var</span> req = http.<span class="title function_">request</span>(options, callback);</span><br><span class="line">req.<span class="title function_">end</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="ğŸ““express"><a href="#ğŸ““express" class="headerlink" title="ğŸ““express"></a>ğŸ““express</h1><p>router</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> app = <span class="title function_">express</span>();</span><br><span class="line"> </span><br><span class="line"><span class="comment">//  ä¸»é¡µè¾“å‡º &quot;Hello World&quot;</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/&#x27;</span>, <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ä¸»é¡µ GET è¯·æ±‚&quot;</span>);</span><br><span class="line">   res.<span class="title function_">send</span>(<span class="string">&#x27;Hello GET&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">//  POST è¯·æ±‚</span></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/&#x27;</span>, <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ä¸»é¡µ POST è¯·æ±‚&quot;</span>);</span><br><span class="line">   res.<span class="title function_">send</span>(<span class="string">&#x27;Hello POST&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"><span class="comment">//  /del_user é¡µé¢å“åº”</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/del_user&#x27;</span>, <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;/del_user å“åº” DELETE è¯·æ±‚&quot;</span>);</span><br><span class="line">   res.<span class="title function_">send</span>(<span class="string">&#x27;åˆ é™¤é¡µé¢&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"><span class="comment">//  /list_user é¡µé¢ GET è¯·æ±‚</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/list_user&#x27;</span>, <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;/list_user GET è¯·æ±‚&quot;</span>);</span><br><span class="line">   res.<span class="title function_">send</span>(<span class="string">&#x27;ç”¨æˆ·åˆ—è¡¨é¡µé¢&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"><span class="comment">// å¯¹é¡µé¢ abcd, abxcd, ab123cd, ç­‰å“åº” GET è¯·æ±‚</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/ab*cd&#x27;</span>, <span class="keyword">function</span>(<span class="params">req, res</span>) &#123;   </span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;/ab*cd GET è¯·æ±‚&quot;</span>);</span><br><span class="line">   res.<span class="title function_">send</span>(<span class="string">&#x27;æ­£åˆ™åŒ¹é…&#x27;</span>);</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> server = app.<span class="title function_">listen</span>(<span class="number">8081</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">var</span> host = server.<span class="title function_">address</span>().<span class="property">address</span></span><br><span class="line">  <span class="keyword">var</span> port = server.<span class="title function_">address</span>().<span class="property">port</span></span><br><span class="line"> </span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;åº”ç”¨å®ä¾‹ï¼Œè®¿é—®åœ°å€ä¸º http://%s:%s&quot;</span>, host, port)</span><br><span class="line"> </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><strong>Request</strong> å¯¹è±¡ - request å¯¹è±¡è¡¨ç¤º HTTP è¯·æ±‚ï¼ŒåŒ…å«äº†è¯·æ±‚æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œå‚æ•°ï¼Œå†…å®¹ï¼ŒHTTP å¤´éƒ¨ç­‰å±æ€§ã€‚å¸¸è§å±æ€§æœ‰ï¼š</p><p>req.appï¼šå½“callbackä¸ºå¤–éƒ¨æ–‡ä»¶æ—¶ï¼Œç”¨req.appè®¿é—®expressçš„å®ä¾‹<br>req.baseUrlï¼šè·å–è·¯ç”±å½“å‰å®‰è£…çš„URLè·¯å¾„<br>req.body &#x2F; req.cookiesï¼šè·å¾—ã€Œè¯·æ±‚ä¸»ä½“ã€&#x2F; Cookies<br>req.fresh &#x2F; req.staleï¼šåˆ¤æ–­è¯·æ±‚æ˜¯å¦è¿˜ã€Œæ–°é²œã€<br>req.hostname &#x2F; req.ipï¼šè·å–ä¸»æœºåå’ŒIPåœ°å€<br>req.originalUrlï¼šè·å–åŸå§‹è¯·æ±‚URL<br>req.paramsï¼šè·å–è·¯ç”±çš„parameters<br>req.pathï¼šè·å–è¯·æ±‚è·¯å¾„<br>req.protocolï¼šè·å–åè®®ç±»å‹<br>req.queryï¼šè·å–URLçš„æŸ¥è¯¢å‚æ•°ä¸²<br>req.routeï¼šè·å–å½“å‰åŒ¹é…çš„è·¯ç”±<br>req.subdomainsï¼šè·å–å­åŸŸå<br>req.accepts()ï¼šæ£€æŸ¥å¯æ¥å—çš„è¯·æ±‚çš„æ–‡æ¡£ç±»å‹<br>req.acceptsCharsets &#x2F; req.acceptsEncodings &#x2F; req.acceptsLanguagesï¼šè¿”å›æŒ‡å®šå­—ç¬¦é›†çš„ç¬¬ä¸€ä¸ªå¯æ¥å—å­—ç¬¦ç¼–ç <br>req.get()ï¼šè·å–æŒ‡å®šçš„HTTPè¯·æ±‚å¤´<br>req.is()ï¼šåˆ¤æ–­è¯·æ±‚å¤´Content-Typeçš„MIMEç±»å‹</p><p><strong>Response</strong> å¯¹è±¡ - response å¯¹è±¡è¡¨ç¤º HTTP å“åº”ï¼Œå³åœ¨æ¥æ”¶åˆ°è¯·æ±‚æ—¶å‘å®¢æˆ·ç«¯å‘é€çš„ HTTP å“åº”æ•°æ®ã€‚å¸¸è§å±æ€§æœ‰ï¼š</p><p>res.appï¼šåŒreq.appä¸€æ ·<br>res.append()ï¼šè¿½åŠ æŒ‡å®šHTTPå¤´<br>res.set()åœ¨res.append()åå°†é‡ç½®ä¹‹å‰è®¾ç½®çš„å¤´<br>res.cookie(nameï¼Œvalue [ï¼Œoption])ï¼šè®¾ç½®Cookie<br>opition: domain &#x2F; expires &#x2F; httpOnly &#x2F; maxAge &#x2F; path &#x2F; secure &#x2F; signed<br>res.clearCookie()ï¼šæ¸…é™¤Cookie<br>res.download()ï¼šä¼ é€æŒ‡å®šè·¯å¾„çš„æ–‡ä»¶<br>res.get()ï¼šè¿”å›æŒ‡å®šçš„HTTPå¤´<br>res.json()ï¼šä¼ é€JSONå“åº”<br>res.jsonp()ï¼šä¼ é€JSONPå“åº”<br>res.location()ï¼šåªè®¾ç½®å“åº”çš„Location HTTPå¤´ï¼Œä¸è®¾ç½®çŠ¶æ€ç æˆ–è€…close response<br>res.redirect()ï¼šè®¾ç½®å“åº”çš„Location HTTPå¤´ï¼Œå¹¶ä¸”è®¾ç½®çŠ¶æ€ç 302<br>res.render(view,[locals],callback)ï¼šæ¸²æŸ“ä¸€ä¸ªviewï¼ŒåŒæ—¶å‘callbackä¼ é€’æ¸²æŸ“åçš„å­—ç¬¦ä¸²ï¼Œå¦‚æœåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­æœ‰é”™è¯¯å‘ç”Ÿnext(err)å°†ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ã€‚callbackå°†ä¼šè¢«ä¼ å…¥ä¸€ä¸ªå¯èƒ½å‘ç”Ÿçš„é”™è¯¯ä»¥åŠæ¸²æŸ“åçš„é¡µé¢ï¼Œè¿™æ ·å°±ä¸ä¼šè‡ªåŠ¨è¾“å‡ºäº†ã€‚<br>res.send()ï¼šä¼ é€HTTPå“åº”<br>res.sendFile(path [ï¼Œoptions] [ï¼Œfn])ï¼šä¼ é€æŒ‡å®šè·¯å¾„çš„æ–‡ä»¶ -ä¼šè‡ªåŠ¨æ ¹æ®æ–‡ä»¶extensionè®¾å®šContent-Type<br>res.set()ï¼šè®¾ç½®HTTPå¤´ï¼Œä¼ å…¥objectå¯ä»¥ä¸€æ¬¡è®¾ç½®å¤šä¸ªå¤´<br>res.status()ï¼šè®¾ç½®HTTPçŠ¶æ€ç <br>res.type()ï¼šè®¾ç½®Content-Typeçš„MIMEç±»å‹</p><p>static<br>app.use(â€˜&#x2F;publicâ€™, express.static(â€˜publicâ€™));</p><p>Get</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> app = <span class="title function_">express</span>();</span><br><span class="line"> </span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/public&#x27;</span>, express.<span class="title function_">static</span>(<span class="string">&#x27;public&#x27;</span>));</span><br><span class="line"> </span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/index.html&#x27;</span>, <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">   res.<span class="title function_">sendFile</span>( __dirname + <span class="string">&quot;/&quot;</span> + <span class="string">&quot;index.html&quot;</span> );</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/process_get&#x27;</span>, <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line"> </span><br><span class="line">   <span class="comment">// è¾“å‡º JSON æ ¼å¼</span></span><br><span class="line">   <span class="keyword">var</span> response = &#123;</span><br><span class="line">       <span class="string">&quot;first_name&quot;</span>:req.<span class="property">query</span>.<span class="property">first_name</span>,</span><br><span class="line">       <span class="string">&quot;last_name&quot;</span>:req.<span class="property">query</span>.<span class="property">last_name</span></span><br><span class="line">   &#125;;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(response);</span><br><span class="line">   res.<span class="title function_">end</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(response));</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> server = app.<span class="title function_">listen</span>(<span class="number">8081</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">var</span> host = server.<span class="title function_">address</span>().<span class="property">address</span></span><br><span class="line">  <span class="keyword">var</span> port = server.<span class="title function_">address</span>().<span class="property">port</span></span><br><span class="line"> </span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;åº”ç”¨å®ä¾‹ï¼Œè®¿é—®åœ°å€ä¸º http://%s:%s&quot;</span>, host, port)</span><br><span class="line"> </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>Post</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="keyword">var</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// åˆ›å»º application/x-www-form-urlencoded ç¼–ç è§£æ</span></span><br><span class="line"><span class="keyword">var</span> urlencodedParser = bodyParser.<span class="title function_">urlencoded</span>(&#123; <span class="attr">extended</span>: <span class="literal">false</span> &#125;)</span><br><span class="line"> </span><br><span class="line">app.<span class="title function_">use</span>(<span class="string">&#x27;/public&#x27;</span>, express.<span class="title function_">static</span>(<span class="string">&#x27;public&#x27;</span>));</span><br><span class="line"> </span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/index.html&#x27;</span>, <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">   res.<span class="title function_">sendFile</span>( __dirname + <span class="string">&quot;/&quot;</span> + <span class="string">&quot;index.html&quot;</span> );</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&#x27;/process_post&#x27;</span>, urlencodedParser, <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line"> </span><br><span class="line">   <span class="comment">// è¾“å‡º JSON æ ¼å¼</span></span><br><span class="line">   <span class="keyword">var</span> response = &#123;</span><br><span class="line">       <span class="string">&quot;first_name&quot;</span>:req.<span class="property">body</span>.<span class="property">first_name</span>,</span><br><span class="line">       <span class="string">&quot;last_name&quot;</span>:req.<span class="property">body</span>.<span class="property">last_name</span></span><br><span class="line">   &#125;;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(response);</span><br><span class="line">   res.<span class="title function_">end</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(response));</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> server = app.<span class="title function_">listen</span>(<span class="number">8081</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">var</span> host = server.<span class="title function_">address</span>().<span class="property">address</span></span><br><span class="line">  <span class="keyword">var</span> port = server.<span class="title function_">address</span>().<span class="property">port</span></span><br><span class="line"> </span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;åº”ç”¨å®ä¾‹ï¼Œè®¿é—®åœ°å€ä¸º http://%s:%s&quot;</span>, host, port)</span><br><span class="line"> </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>ğŸ“’RESTful API</p><p>data</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;b1&quot;</span> : &#123;</span><br><span class="line">       <span class="string">&quot;name&quot;</span> : <span class="string">&quot;h&quot;</span>,</span><br><span class="line">       <span class="string">&quot;con&quot;</span> : <span class="string">&quot;hihihi&quot;</span>,</span><br><span class="line">      </span><br><span class="line">       <span class="string">&quot;id&quot;</span>: <span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;b2&quot;</span> : &#123;</span><br><span class="line">       <span class="string">&quot;name&quot;</span> : <span class="string">&quot;b&quot;</span>,</span><br><span class="line">       <span class="string">&quot;con&quot;</span> : <span class="string">&quot;bobobo&quot;</span>,</span><br><span class="line"></span><br><span class="line">       <span class="string">&quot;id&quot;</span>: <span class="number">2</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">&quot;b3&quot;</span> : &#123;</span><br><span class="line">       <span class="string">&quot;name&quot;</span> : <span class="string">&quot;c&quot;</span>,</span><br><span class="line">       <span class="string">&quot;con&quot;</span> : <span class="string">&quot;cccccc&quot;</span>,</span><br><span class="line"></span><br><span class="line">       <span class="string">&quot;id&quot;</span>: <span class="number">3</span></span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure><p>list</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/list&#x27;</span>, <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">   fs.<span class="title function_">readFile</span>( __dirname + <span class="string">&quot;/&quot;</span> + <span class="string">&quot;books.json&quot;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="keyword">function</span> (<span class="params">err, data</span>) &#123;</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>( data );</span><br><span class="line">       res.<span class="title function_">end</span>( data );</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> server = app.<span class="title function_">listen</span>(<span class="number">8081</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> host = server.<span class="title function_">address</span>().<span class="property">address</span></span><br><span class="line">  <span class="keyword">var</span> port = server.<span class="title function_">address</span>().<span class="property">port</span></span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è®¿é—®åœ°å€ä¸º http://%s:%s&quot;</span>, host, port)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>add</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ·»åŠ </span></span><br><span class="line"><span class="keyword">var</span> bk= &#123;</span><br><span class="line">   <span class="string">&quot;b4&quot;</span> : &#123;</span><br><span class="line">      <span class="string">&quot;name&quot;</span> : <span class="string">&quot;b4&quot;</span>,</span><br><span class="line">      <span class="string">&quot;com&quot;</span> : <span class="string">&quot;this is b4&quot;</span>,</span><br><span class="line">   </span><br><span class="line">      <span class="string">&quot;id&quot;</span>: <span class="number">4</span></span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/add&#x27;</span>, <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">   <span class="comment">// è¯»å–å·²å­˜åœ¨çš„æ•°æ®</span></span><br><span class="line">   fs.<span class="title function_">readFile</span>( __dirname + <span class="string">&quot;/&quot;</span> + <span class="string">&quot;Books.json&quot;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="keyword">function</span> (<span class="params">err, data</span>) &#123;</span><br><span class="line">       data = <span class="title class_">JSON</span>.<span class="title function_">parse</span>( data );</span><br><span class="line">       data[<span class="string">&quot;b4&quot;</span>] = bk[<span class="string">&quot;b4&quot;</span>];</span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>( data );</span><br><span class="line">       res.<span class="title function_">end</span>( <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data));</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> server = app.<span class="title function_">listen</span>(<span class="number">8081</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> host = server.<span class="title function_">address</span>().<span class="property">address</span></span><br><span class="line">  <span class="keyword">var</span> port = server.<span class="title function_">address</span>().<span class="property">port</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;åº”ç”¨å®ä¾‹ï¼Œè®¿é—®åœ°å€ä¸º http://%s:%s&quot;</span>, host, port)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>id</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/:id&#x27;</span>, <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">   <span class="comment">// é¦–å…ˆæˆ‘ä»¬è¯»å–å·²å­˜åœ¨çš„ç”¨æˆ·</span></span><br><span class="line">   fs.<span class="title function_">readFile</span>( __dirname + <span class="string">&quot;/&quot;</span> + <span class="string">&quot;Books.json&quot;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="keyword">function</span> (<span class="params">err, data</span>) &#123;</span><br><span class="line">       data = <span class="title class_">JSON</span>.<span class="title function_">parse</span>( data );</span><br><span class="line">       <span class="keyword">var</span> user = data[<span class="string">&quot;b&quot;</span> + req.<span class="property">params</span>.<span class="property">id</span>] </span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>( user );</span><br><span class="line">       res.<span class="title function_">end</span>( <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(user));</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> server = app.<span class="title function_">listen</span>(<span class="number">8081</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> host = server.<span class="title function_">address</span>().<span class="property">address</span></span><br><span class="line">  <span class="keyword">var</span> port = server.<span class="title function_">address</span>().<span class="property">port</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;åº”ç”¨å®ä¾‹ï¼Œè®¿é—®åœ°å€ä¸º http://%s:%s&quot;</span>, host, port)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>delete</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> id = <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&#x27;/delete&#x27;</span>, <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line"></span><br><span class="line">   <span class="comment">// First read existing users.</span></span><br><span class="line">   fs.<span class="title function_">readFile</span>( __dirname + <span class="string">&quot;/&quot;</span> + <span class="string">&quot;Books.json&quot;</span>, <span class="string">&#x27;utf8&#x27;</span>, <span class="keyword">function</span> (<span class="params">err, data</span>) &#123;</span><br><span class="line">       data = <span class="title class_">JSON</span>.<span class="title function_">parse</span>( data );</span><br><span class="line">       <span class="keyword">delete</span> data[<span class="string">&quot;b&quot;</span> + id];</span><br><span class="line">       </span><br><span class="line">       <span class="variable language_">console</span>.<span class="title function_">log</span>( data );</span><br><span class="line">       res.<span class="title function_">end</span>( <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data));</span><br><span class="line">   &#125;);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> server = app.<span class="title function_">listen</span>(<span class="number">8081</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> host = server.<span class="title function_">address</span>().<span class="property">address</span></span><br><span class="line">  <span class="keyword">var</span> port = server.<span class="title function_">address</span>().<span class="property">port</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot; http://%s:%s&quot;</span>, host, port)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h1 id="ğŸ“šï¸child-process"><a href="#ğŸ“šï¸child-process" class="headerlink" title="ğŸ“šï¸child_process"></a>ğŸ“šï¸child_process</h1><p>Node æä¾›äº† child_process æ¨¡å—æ¥åˆ›å»ºå­è¿›ç¨‹ï¼Œæ–¹æ³•æœ‰ï¼š</p><p>exec - child_process.exec ä½¿ç”¨å­è¿›ç¨‹æ‰§è¡Œå‘½ä»¤ï¼Œç¼“å­˜å­è¿›ç¨‹çš„è¾“å‡ºï¼Œå¹¶å°†å­è¿›ç¨‹çš„è¾“å‡ºä»¥å›è°ƒå‡½æ•°å‚æ•°çš„å½¢å¼è¿”å›ã€‚</p><p>spawn - child_process.spawn ä½¿ç”¨æŒ‡å®šçš„å‘½ä»¤è¡Œå‚æ•°åˆ›å»ºæ–°è¿›ç¨‹ã€‚</p><p>fork - child_process.fork æ˜¯ spawn()çš„ç‰¹æ®Šå½¢å¼ï¼Œç”¨äºåœ¨å­è¿›ç¨‹ä¸­è¿è¡Œçš„æ¨¡å—ï¼Œå¦‚ fork(â€˜.&#x2F;son.jsâ€™) ç›¸å½“äº spawn(â€˜nodeâ€™, [â€˜.&#x2F;son.jsâ€™]) ã€‚ä¸spawnæ–¹æ³•ä¸åŒçš„æ˜¯ï¼Œforkä¼šåœ¨çˆ¶è¿›ç¨‹ä¸å­è¿›ç¨‹ä¹‹é—´ï¼Œå»ºç«‹ä¸€ä¸ªé€šä¿¡ç®¡é“ï¼Œç”¨äºè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> child_process = <span class="built_in">require</span>(<span class="string">&#x27;child_process&#x27;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;<span class="number">10</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> workerProcess = child_process.<span class="title function_">exec</span>(<span class="string">&#x27;node hello.js &#x27;</span>+i, <span class="keyword">function</span> (<span class="params">error, stdout, stderr</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (error) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(error.<span class="property">stack</span>);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Error code : &#x27;</span>+error.<span class="property">code</span>);</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Signal received: &#x27;</span>+error.<span class="property">signal</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;stdout: &#x27;</span> + stdout);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;stderr: &#x27;</span> + stderr);</span><br><span class="line">    &#125;);</span><br><span class="line"> </span><br><span class="line">    workerProcess.<span class="title function_">on</span>(<span class="string">&#x27;exit&#x27;</span>, <span class="keyword">function</span> (<span class="params">code</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å­è¿›ç¨‹å·²é€€å‡ºï¼Œé€€å‡ºç  &#x27;</span>+code);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>spawn() æ–¹æ³•è¿”å›æµ (stdout &amp; stderr)ï¼Œåœ¨è¿›ç¨‹è¿”å›å¤§é‡æ•°æ®æ—¶ä½¿ç”¨ã€‚è¿›ç¨‹ä¸€æ—¦å¼€å§‹æ‰§è¡Œæ—¶ spawn() å°±å¼€å§‹æ¥æ”¶å“åº”ã€‚<br>child_process.fork æ˜¯ spawn() æ–¹æ³•çš„ç‰¹æ®Šå½¢å¼ã€‚</p><h1 id="ğŸ“”mogodb"><a href="#ğŸ“”mogodb" class="headerlink" title="ğŸ“”mogodb"></a>ğŸ“”mogodb</h1><p>mongodb </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name mongodb -v /data/mongodb0:/data/db -p 27017:27017 -d mongo</span><br></pre></td></tr></table></figure><p>npm</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install mongodb</span><br></pre></td></tr></table></figure><p>è¿›å…¥ MongoDB å®¹å™¨çš„ bash shell å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it mongodb  bash  </span><br><span class="line"><span class="comment">#mongosh --host 127.0.0.1 --port 27017</span></span><br></pre></td></tr></table></figure><p>è®°å¾—åœ¨ä¸å†éœ€è¦æ—¶åœæ­¢å’Œåˆ é™¤å®¹å™¨ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker stop mongodb </span><br><span class="line">docker <span class="built_in">rm</span> mongodb </span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; show dbs</span><br><span class="line">&gt; show tables</span><br><span class="line">&gt; db.site.find()</span><br></pre></td></tr></table></figure><p>create</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">MongoClient</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;mongodb&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// MongoDBè¿æ¥URI</span></span><br><span class="line"><span class="keyword">const</span> uri = <span class="string">&#x27;mongodb://localhost:27017&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºMongoDBå®¢æˆ·ç«¯</span></span><br><span class="line"><span class="keyword">const</span> client = <span class="keyword">new</span> <span class="title class_">MongoClient</span>(uri);</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">main</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// è¿æ¥åˆ°MongoDB</span></span><br><span class="line">    <span class="keyword">await</span> client.<span class="title function_">connect</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Connected to MongoDB&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åˆ›å»ºæ•°æ®åº“</span></span><br><span class="line">    <span class="keyword">const</span> databaseName = <span class="string">&#x27;myDatabase&#x27;</span>;</span><br><span class="line">    <span class="keyword">const</span> db = client.<span class="title function_">db</span>(databaseName);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Database &#x27;<span class="subst">$&#123;databaseName&#125;</span>&#x27; created`</span>);</span><br><span class="line"></span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error:&#x27;</span>, error);</span><br><span class="line">  &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="comment">// å…³é—­MongoDBè¿æ¥</span></span><br><span class="line">    <span class="keyword">await</span> client.<span class="title function_">close</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Disconnected from MongoDB&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">main</span>().<span class="title function_">catch</span>(<span class="variable language_">console</span>.<span class="property">error</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>insert </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">MongoClient</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;mongodb&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> uri = <span class="string">&#x27;mongodb://localhost:27017&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> client = <span class="keyword">new</span> <span class="title class_">MongoClient</span>(uri);</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">main</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> client.<span class="title function_">connect</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Connected to MongoDB&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> databaseName = <span class="string">&#x27;myDatabase&#x27;</span>;</span><br><span class="line">    <span class="keyword">const</span> db = client.<span class="title function_">db</span>(databaseName);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Database &#x27;<span class="subst">$&#123;databaseName&#125;</span>&#x27; created`</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ’å…¥æ•°æ®</span></span><br><span class="line">    <span class="keyword">const</span> collectionName = <span class="string">&#x27;myCollection&#x27;</span>;</span><br><span class="line">    <span class="keyword">const</span> collection = db.<span class="title function_">collection</span>(collectionName);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ’å…¥å•ä¸ªæ–‡æ¡£</span></span><br><span class="line">    <span class="keyword">const</span> insertResult = <span class="keyword">await</span> collection.<span class="title function_">insertOne</span>(&#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;m2&#x27;</span>,</span><br><span class="line">      <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">      <span class="attr">email</span>: <span class="string">&#x27;m@qq.com&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// console.log(&#x27;Inserted document:&#x27;, insertResult.ops[0]);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// æŸ¥è¯¢æ•°æ®</span></span><br><span class="line">    <span class="keyword">const</span> queryResult = <span class="keyword">await</span> collection.<span class="title function_">find</span>(&#123;&#125;).<span class="title function_">toArray</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Query result:&#x27;</span>, queryResult);</span><br><span class="line"></span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error:&#x27;</span>, error);</span><br><span class="line">  &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> client.<span class="title function_">close</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Disconnected from MongoDB&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">main</span>().<span class="title function_">catch</span>(<span class="variable language_">console</span>.<span class="property">error</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>update delete</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// æ›´æ–°æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> filter = &#123; <span class="attr">name</span>: <span class="string">&#x27;m&#x27;</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> update = &#123; <span class="attr">$set</span>: &#123; <span class="attr">age</span>: <span class="number">15</span> &#125; &#125;;</span><br><span class="line"><span class="keyword">const</span> updateResult = <span class="keyword">await</span> collection.<span class="title function_">updateOne</span>(filter, update);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Update result:&#x27;</span>, updateResult.<span class="property">modifiedCount</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥è¯¢æ•°æ®å¹¶æ‰“å°æ›´æ–°åçš„ç»“æœ</span></span><br><span class="line"><span class="keyword">const</span> queryResult = <span class="keyword">await</span> collection.<span class="title function_">find</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;m&#x27;</span> &#125;).<span class="title function_">toArray</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Query result after update:&#x27;</span>, queryResult);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ é™¤æ•°æ®</span></span><br><span class="line"><span class="keyword">const</span> deleteResult = <span class="keyword">await</span> collection.<span class="title function_">deleteOne</span>(&#123; <span class="attr">name</span>: <span class="string">&#x27;m2&#x27;</span> &#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Delete result:&#x27;</span>, deleteResult.<span class="property">deletedCount</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>End</p><!-- https://www.runoob.com/docker/docker-tutorial.html --><!--  https://www.runoob.com/nodejs/nodejs-jxcore-packaging.html jx æ‰“åŒ…--><!-- å®å…‰mini 5w é•¿å®‰ç³¯ç±³ 5.39w æœ¬ç”°é£åº¦10w å¸•è¨ç‰¹20w ==--><!-- https://blog.csdn.net/qq_48968230/article/details/130814245Node.jshttps://www.nodeapp.cn/net.htmlhttps://www.runoob.com/nodejs/nodejs-repl.htmlhttps://www.liaoxuefeng.com/wiki/1022910821149312/1023027697415616mongodbhttps://geek-docs.com/mongodb/mongodb-questions/65_mongodb_import_data_to_dockercontainers_mongodb.html-->]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Node.js </tag>
            
            <tag> util </tag>
            
            <tag> file </tag>
            
            <tag> getpost </tag>
            
            <tag> web </tag>
            
            <tag> express </tag>
            
            <tag> child_process </tag>
            
            <tag> mogodb </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nodejs base</title>
      <link href="/2024/05/17/Nodejs-Base/"/>
      <url>/2024/05/17/Nodejs-Base/</url>
      
        <content type="html"><![CDATA[<p>  ç®€å•çš„è¯´ Node.js å°±æ˜¯è¿è¡Œåœ¨æœåŠ¡ç«¯çš„ JavaScriptã€‚</p><p>  Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome JavaScript è¿è¡Œæ—¶å»ºç«‹çš„ä¸€ä¸ªå¹³å°ã€‚</p><p>  Node.js æ˜¯ä¸€ä¸ªäº‹ä»¶é©±åŠ¨ I&#x2F;O æœåŠ¡ç«¯ JavaScript ç¯å¢ƒï¼ŒåŸºäº Google çš„ V8 å¼•æ“ï¼ŒV8 å¼•æ“æ‰§è¡Œ Javascript çš„é€Ÿåº¦éå¸¸å¿«ï¼Œæ€§èƒ½éå¸¸å¥½ã€‚</p><h1 id="ğŸ› Node-jså®‰è£…"><a href="#ğŸ› Node-jså®‰è£…" class="headerlink" title="ğŸ› Node.jså®‰è£…"></a>ğŸ› Node.jså®‰è£…</h1><p>  Node.jså®‰è£…åœ¨ä¸Šä¸€ç¯‡æ–‡ç« Debian Node.js HEXO æœ‰è®²åˆ° </p><p>  æˆªè‡³ç›®å‰æœ€æ–°çš„ç‰ˆæœ¬æ˜¯20.12.2</p><p>  #æŸ¥çœ‹ç‰ˆæœ¬<br>  node -v<br>  v20.12.2</p><p>  winä¸‹å¯ä»¥åœ¨å®˜ç½‘ä¸‹è½½å®‰è£…<br>  <a href="https://nodejs.org/en/download">https://nodejs.org/en/download</a></p><h1 id="ğŸ’¬helloworld"><a href="#ğŸ’¬helloworld" class="headerlink" title="ğŸ’¬helloworld"></a>ğŸ’¬helloworld</h1><p>  hi.js</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello world node.js &quot;</span>) <span class="comment">// like javascript~ </span></span><br></pre></td></tr></table></figure><p>  node hi.js<br>  [20240504n11]</p><h1 id="ğŸ‘©â€ğŸ«Node-js-åˆ›å»ºç¬¬ä¸€ä¸ªåº”ç”¨"><a href="#ğŸ‘©â€ğŸ«Node-js-åˆ›å»ºç¬¬ä¸€ä¸ªåº”ç”¨" class="headerlink" title="ğŸ‘©â€ğŸ«Node.js åˆ›å»ºç¬¬ä¸€ä¸ªåº”ç”¨"></a>ğŸ‘©â€ğŸ«Node.js åˆ›å»ºç¬¬ä¸€ä¸ªåº”ç”¨</h1><h2 id="require-æŒ‡ä»¤"><a href="#require-æŒ‡ä»¤" class="headerlink" title="require æŒ‡ä»¤"></a>require æŒ‡ä»¤</h2>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&quot;http&quot;</span>);</span><br></pre></td></tr></table></figure><h2 id="åˆ›å»ºæœåŠ¡å™¨-æ¥æ”¶å“åº”è¯·æ±‚"><a href="#åˆ›å»ºæœåŠ¡å™¨-æ¥æ”¶å“åº”è¯·æ±‚" class="headerlink" title="åˆ›å»ºæœåŠ¡å™¨&#x2F;æ¥æ”¶å“åº”è¯·æ±‚"></a>åˆ›å»ºæœåŠ¡å™¨&#x2F;æ¥æ”¶å“åº”è¯·æ±‚</h2>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"></span><br><span class="line">http.<span class="title function_">createServer</span>(<span class="keyword">function</span> (<span class="params">request, response</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‘é€ HTTP å¤´éƒ¨ </span></span><br><span class="line">    <span class="comment">// HTTP çŠ¶æ€å€¼: 200 : OK</span></span><br><span class="line">    <span class="comment">// å†…å®¹ç±»å‹: text/plain</span></span><br><span class="line">    response.<span class="title function_">writeHead</span>(<span class="number">200</span>, &#123;<span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/plain&#x27;</span>&#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‘é€å“åº”æ•°æ® &quot;Hello World&quot;</span></span><br><span class="line">    response.<span class="title function_">end</span>(<span class="string">&#x27;Hello World\n&#x27;</span>);</span><br><span class="line">&#125;).<span class="title function_">listen</span>(<span class="number">8888</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»ˆç«¯æ‰“å°å¦‚ä¸‹ä¿¡æ¯</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Server running at http://127.0.0.1:1200/&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>  <!--  node è¿è¡Œ   [20240504n12.jpg]  --><h1 id="ğŸš€npmä½¿ç”¨"><a href="#ğŸš€npmä½¿ç”¨" class="headerlink" title="ğŸš€npmä½¿ç”¨"></a>ğŸš€npmä½¿ç”¨</h1><p>  npm æ˜¯åŒ…ç®¡ç†å·¥å…·<br>  å…è®¸ç”¨æˆ·ä»NPMæœåŠ¡å™¨ä¸‹è½½åˆ«äººç¼–å†™çš„ç¬¬ä¸‰æ–¹åŒ…åˆ°æœ¬åœ°ä½¿ç”¨ã€‚<br>  å…è®¸ç”¨æˆ·ä»NPMæœåŠ¡å™¨ä¸‹è½½å¹¶å®‰è£…åˆ«äººç¼–å†™çš„å‘½ä»¤è¡Œç¨‹åºåˆ°æœ¬åœ°ä½¿ç”¨ã€‚<br>  å…è®¸ç”¨æˆ·å°†è‡ªå·±ç¼–å†™çš„åŒ…æˆ–å‘½ä»¤è¡Œç¨‹åºä¸Šä¼ åˆ°NPMæœåŠ¡å™¨ä¾›åˆ«äººä½¿ç”¨ã€‚</p><p>  npm -v</p><p>  å¦‚æœä½ å®‰è£…çš„æ˜¯æ—§ç‰ˆæœ¬çš„ npmï¼Œå¯ä»¥å¾ˆå®¹æ˜“å¾—é€šè¿‡ npm å‘½ä»¤æ¥å‡çº§ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><p>  $ sudo npm install npm -g<br>  &#x2F;usr&#x2F;local&#x2F;bin&#x2F;npm -&gt; &#x2F;usr&#x2F;local&#x2F;lib&#x2F;node_modules&#x2F;npm&#x2F;bin&#x2F;npm-cli.js<br>  <a href="mailto:&#110;&#112;&#109;&#64;&#50;&#46;&#49;&#x34;&#46;&#50;">&#110;&#112;&#109;&#64;&#50;&#46;&#49;&#x34;&#46;&#50;</a> &#x2F;usr&#x2F;local&#x2F;lib&#x2F;node_modules&#x2F;npm<br>  å¦‚æœæ˜¯ Window ç³»ç»Ÿä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å³å¯ï¼š</p><p>  npm install npm -g<br>  ä½¿ç”¨æ·˜å®é•œåƒçš„å‘½ä»¤ï¼š</p><p>  npm install -g cnpm â€“registry&#x3D;<a href="https://registry.npmmirror.com/">https://registry.npmmirror.com</a></p><h2 id="å…¨å±€å®‰è£…ä¸æœ¬åœ°å®‰è£…"><a href="#å…¨å±€å®‰è£…ä¸æœ¬åœ°å®‰è£…" class="headerlink" title="å…¨å±€å®‰è£…ä¸æœ¬åœ°å®‰è£…"></a>å…¨å±€å®‰è£…ä¸æœ¬åœ°å®‰è£…</h2><p>  npm çš„åŒ…å®‰è£…åˆ†ä¸ºæœ¬åœ°å®‰è£…ï¼ˆlocalï¼‰ã€å…¨å±€å®‰è£…ï¼ˆglobalï¼‰ä¸¤ç§ï¼Œä»æ•²çš„å‘½ä»¤è¡Œæ¥çœ‹ï¼Œå·®åˆ«åªæ˜¯æœ‰æ²¡æœ‰-gè€Œå·²ï¼Œæ¯”å¦‚</p><p>  npm install express          # æœ¬åœ°å®‰è£…<br>  npm install express -g   # å…¨å±€å®‰è£…<br>  å¦‚æœå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p><p>  npm err! Error: connect ECONNREFUSED 127.0.0.1:8087<br>  è§£å†³åŠæ³•ä¸ºï¼š</p><p>  $ npm config set proxy null</p><h2 id="æŸ¥çœ‹å®‰è£…ä¿¡æ¯"><a href="#æŸ¥çœ‹å®‰è£…ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹å®‰è£…ä¿¡æ¯"></a>æŸ¥çœ‹å®‰è£…ä¿¡æ¯</h2><p>  npm list </p><p>  â”€â”€ <a href="mailto:&#x65;&#x78;&#x70;&#114;&#101;&#115;&#x73;&#64;&#x34;&#x2e;&#49;&#57;&#x2e;&#50;">&#x65;&#x78;&#x70;&#114;&#101;&#115;&#x73;&#64;&#x34;&#x2e;&#49;&#57;&#x2e;&#50;</a></p><p>  npm list -g</p><p>  ä½¿ç”¨package.json<br>  -node_modules&#x2F;express&#x2F;package.json å†…å®¹ï¼š</p><p>  Package.json å±æ€§è¯´æ˜</p><p>  name - åŒ…åã€‚</p><p>  version - åŒ…çš„ç‰ˆæœ¬å·ã€‚</p><p>  description - åŒ…çš„æè¿°ã€‚</p><p>  homepage - åŒ…çš„å®˜ç½‘ url ã€‚</p><p>  author - åŒ…çš„ä½œè€…å§“åã€‚</p><p>  contributors - åŒ…çš„å…¶ä»–è´¡çŒ®è€…å§“åã€‚</p><p>  dependencies - ä¾èµ–åŒ…åˆ—è¡¨ã€‚å¦‚æœä¾èµ–åŒ…æ²¡æœ‰å®‰è£…ï¼Œnpm ä¼šè‡ªåŠ¨å°†ä¾èµ–åŒ…å®‰è£…åœ¨ node_module ç›®å½•ä¸‹ã€‚</p><p>  repository - åŒ…ä»£ç å­˜æ”¾çš„åœ°æ–¹çš„ç±»å‹ï¼Œå¯ä»¥æ˜¯ git æˆ– svnï¼Œgit å¯åœ¨ Github ä¸Šã€‚</p><p>  main - main å­—æ®µæŒ‡å®šäº†ç¨‹åºçš„ä¸»å…¥å£æ–‡ä»¶ï¼Œrequire(â€˜moduleNameâ€™) å°±ä¼šåŠ è½½è¿™ä¸ªæ–‡ä»¶ã€‚è¿™ä¸ªå­—æ®µçš„é»˜è®¤å€¼æ˜¯æ¨¡å—æ ¹ç›®å½•ä¸‹é¢çš„ index.jsã€‚</p><p>  keywords - å…³é”®å­—</p><p>  å¸è½½<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall express</span><br><span class="line">npm <span class="built_in">ls</span></span><br></pre></td></tr></table></figure><br>  æ›´æ–°<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm update express</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p>  åˆ›å»º</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br></pre></td></tr></table></figure><p>  This utility will walk you through creating a package.json file.<br>  It only covers the most common items, and tries to guess sensible defaults.</p><p>  See <code>npm help json</code> for definitive documentation on these fields<br>  and exactly what they do.</p><p>  Use <code>npm install &lt;pkg&gt; --save</code> afterwards to install a package and<br>  save it as a dependency in the package.json file.</p><p>  Press ^C at any time to quit.<br>  name: (node_modules) runoob                   # æ¨¡å—å<br>  version: (1.0.0)<br>  description: Node.js æµ‹è¯•æ¨¡å—(<a href="http://www.runoob.com/">www.runoob.com</a>)  # æè¿°<br>  entry point: (index.js)<br>  test command: make test<br>  git repository: <a href="https://github.com/runoob/runoob.git">https://github.com/runoob/runoob.git</a>  # Github åœ°å€<br>  keywords:<br>  author:<br>  license: (ISC)<br>  About to write to â€¦â€¦&#x2F;node_modules&#x2F;package.json:      # ç”Ÿæˆåœ°å€</p><p>  {<br>    â€œnameâ€: â€œrunoobâ€,<br>    â€œversionâ€: â€œ1.0.0â€,<br>    â€œdescriptionâ€: â€œNode.js æµ‹è¯•æ¨¡å—(<a href="http://www.runoob.com/">www.runoob.com</a>)â€,<br>    â€¦â€¦<br>  }</p><p>  Is this ok? (yes) yes</p><p>  yesåä¼šç”Ÿæˆ package.json<br>  npm adduser<br>  Username: mcmohd<br>  Password:<br>  Email: (this IS public) <a href="mailto:&#109;&#x63;&#x6d;&#111;&#x68;&#100;&#x40;&#x67;&#109;&#x61;&#x69;&#108;&#x2e;&#99;&#111;&#109;">&#109;&#x63;&#x6d;&#111;&#x68;&#100;&#x40;&#x67;&#109;&#x61;&#x69;&#108;&#x2e;&#99;&#111;&#109;</a></p><p>  å‘å¸ƒ<br>  npm publish</p><p>  å°±å¯ä»¥è·Ÿå…¶ä»–æ¨¡å—ä¸€æ ·ä½¿ç”¨ npm æ¥å®‰è£…</p><h1 id="ğŸ”­Node-js-å›è°ƒå‡½æ•°"><a href="#ğŸ”­Node-js-å›è°ƒå‡½æ•°" class="headerlink" title="ğŸ”­Node.js å›è°ƒå‡½æ•°"></a>ğŸ”­Node.js å›è°ƒå‡½æ•°</h1><p>  Node.js å¼‚æ­¥ç¼–ç¨‹çš„ç›´æ¥ä½“ç°å°±æ˜¯å›è°ƒã€‚</p><p>  å¼‚æ­¥ç¼–ç¨‹ä¾æ‰˜äºå›è°ƒæ¥å®ç°ï¼Œä½†ä¸èƒ½è¯´ä½¿ç”¨äº†å›è°ƒåç¨‹åºå°±å¼‚æ­¥åŒ–äº†ã€‚</p><p>  å›è°ƒå‡½æ•°åœ¨å®Œæˆä»»åŠ¡åå°±ä¼šè¢«è°ƒç”¨ï¼ŒNode ä½¿ç”¨äº†å¤§é‡çš„å›è°ƒå‡½æ•°ï¼ŒNode æ‰€æœ‰ API éƒ½æ”¯æŒå›è°ƒå‡½æ•°ã€‚</p><p>  ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€è¾¹è¯»å–æ–‡ä»¶ï¼Œä¸€è¾¹æ‰§è¡Œå…¶ä»–å‘½ä»¤ï¼Œåœ¨æ–‡ä»¶è¯»å–å®Œæˆåï¼Œæˆ‘ä»¬å°†æ–‡ä»¶å†…å®¹ä½œä¸ºå›è°ƒå‡½æ•°çš„å‚æ•°è¿”å›ã€‚è¿™æ ·åœ¨æ‰§è¡Œä»£ç æ—¶å°±æ²¡æœ‰é˜»å¡æˆ–ç­‰å¾…æ–‡ä»¶ I&#x2F;O æ“ä½œã€‚è¿™å°±å¤§å¤§æé«˜äº† Node.js çš„æ€§èƒ½ï¼Œå¯ä»¥å¤„ç†å¤§é‡çš„å¹¶å‘è¯·æ±‚ã€‚</p><p>  å›è°ƒå‡½æ•°ä¸€èˆ¬ä½œä¸ºå‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°å‡ºç°ï¼š</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo1</span>(<span class="params">name, age, callback</span>) &#123; &#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo2</span>(<span class="params">value, callback1, callback2</span>) &#123; &#125;</span><br></pre></td></tr></table></figure><h2 id="é˜»å¡ä»£ç å®ä¾‹"><a href="#é˜»å¡ä»£ç å®ä¾‹" class="headerlink" title="é˜»å¡ä»£ç å®ä¾‹"></a>é˜»å¡ä»£ç å®ä¾‹</h2><p>  åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ x.txt ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><p>  hi hi hi </p><p>  åˆ›å»º main.js æ–‡ä»¶, ä»£ç å¦‚ä¸‹ï¼š<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> data = fs.<span class="title function_">readFileSync</span>(<span class="string">&#x27;x.txt&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data.<span class="title function_">toString</span>());</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ç¨‹åºæ‰§è¡Œç»“æŸ!&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p>  ä»¥ä¸Šä»£ç æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p><p>  node main.js</p><p>  hi hi hi </p><p>  ç¨‹åºæ‰§è¡Œç»“æŸ!</p><h2 id="éé˜»å¡ä»£ç å®ä¾‹"><a href="#éé˜»å¡ä»£ç å®ä¾‹" class="headerlink" title="éé˜»å¡ä»£ç å®ä¾‹"></a>éé˜»å¡ä»£ç å®ä¾‹</h2><p>  åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ input.txt ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><p>  èœé¸Ÿæ•™ç¨‹å®˜ç½‘åœ°å€ï¼š<a href="http://www.runoob.com/">www.runoob.com</a><br>  åˆ›å»º main.js æ–‡ä»¶, ä»£ç å¦‚ä¸‹ï¼š<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&#x27;input.txt&#x27;</span>, <span class="keyword">function</span> (<span class="params">err, data</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(err);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data.<span class="title function_">toString</span>());</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ç¨‹åºæ‰§è¡Œç»“æŸ!&quot;</span>);</span><br></pre></td></tr></table></figure><br>  ä»¥ä¸Šä»£ç æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p><p>  node main.js</p><p>  ç¨‹åºæ‰§è¡Œç»“æŸ!<br>  hi hi hi<br>  ä»¥ä¸Šä¸¤ä¸ªå®ä¾‹æˆ‘ä»¬äº†è§£äº†é˜»å¡ä¸éé˜»å¡è°ƒç”¨çš„ä¸åŒã€‚ç¬¬ä¸€ä¸ªå®ä¾‹åœ¨æ–‡ä»¶è¯»å–å®Œåæ‰æ‰§è¡Œç¨‹åºã€‚ ç¬¬äºŒä¸ªå®ä¾‹æˆ‘ä»¬ä¸éœ€è¦ç­‰å¾…æ–‡ä»¶è¯»å–å®Œï¼Œè¿™æ ·å°±å¯ä»¥åœ¨è¯»å–æ–‡ä»¶æ—¶åŒæ—¶æ‰§è¡Œæ¥ä¸‹æ¥çš„ä»£ç ï¼Œå¤§å¤§æé«˜äº†ç¨‹åºçš„æ€§èƒ½ã€‚</p><p>  å› æ­¤ï¼Œé˜»å¡æ˜¯æŒ‰é¡ºåºæ‰§è¡Œçš„ï¼Œè€Œéé˜»å¡æ˜¯ä¸éœ€è¦æŒ‰é¡ºåºçš„ï¼Œæ‰€ä»¥å¦‚æœéœ€è¦å¤„ç†å›è°ƒå‡½æ•°çš„å‚æ•°ï¼Œæˆ‘ä»¬å°±éœ€è¦å†™åœ¨å›è°ƒå‡½æ•°å†…ã€‚</p><h1 id="ğŸNode-js-äº‹ä»¶å¾ªç¯"><a href="#ğŸNode-js-äº‹ä»¶å¾ªç¯" class="headerlink" title="ğŸNode.js äº‹ä»¶å¾ªç¯"></a>ğŸNode.js äº‹ä»¶å¾ªç¯</h1><p>  Node.js æ˜¯å•è¿›ç¨‹å•çº¿ç¨‹åº”ç”¨ç¨‹åºï¼Œä½†æ˜¯å› ä¸º V8 å¼•æ“æä¾›çš„å¼‚æ­¥æ‰§è¡Œå›è°ƒæ¥å£ï¼Œé€šè¿‡è¿™äº›æ¥å£å¯ä»¥å¤„ç†å¤§é‡çš„å¹¶å‘ï¼Œæ‰€ä»¥æ€§èƒ½éå¸¸é«˜ã€‚</p><p>  Node.js å‡ ä¹æ¯ä¸€ä¸ª API éƒ½æ˜¯æ”¯æŒå›è°ƒå‡½æ•°çš„ã€‚</p><p>  Node.js åŸºæœ¬ä¸Šæ‰€æœ‰çš„äº‹ä»¶æœºåˆ¶éƒ½æ˜¯ç”¨è®¾è®¡æ¨¡å¼ä¸­è§‚å¯Ÿè€…æ¨¡å¼å®ç°ã€‚</p><p>  Node.js å•çº¿ç¨‹ç±»ä¼¼è¿›å…¥ä¸€ä¸ªwhile(true)çš„äº‹ä»¶å¾ªç¯ï¼Œç›´åˆ°æ²¡æœ‰äº‹ä»¶è§‚å¯Ÿè€…é€€å‡ºï¼Œæ¯ä¸ªå¼‚æ­¥äº‹ä»¶éƒ½ç”Ÿæˆä¸€ä¸ªäº‹ä»¶è§‚å¯Ÿè€…ï¼Œå¦‚æœæœ‰äº‹ä»¶å‘ç”Ÿå°±è°ƒç”¨è¯¥å›è°ƒå‡½æ•°.</p><h2 id="äº‹ä»¶é©±åŠ¨ç¨‹åº"><a href="#äº‹ä»¶é©±åŠ¨ç¨‹åº" class="headerlink" title="äº‹ä»¶é©±åŠ¨ç¨‹åº"></a>äº‹ä»¶é©±åŠ¨ç¨‹åº</h2><p>  Node.js ä½¿ç”¨äº‹ä»¶é©±åŠ¨æ¨¡å‹ï¼Œå½“web serveræ¥æ”¶åˆ°è¯·æ±‚ï¼Œå°±æŠŠå®ƒå…³é—­ç„¶åè¿›è¡Œå¤„ç†ï¼Œç„¶åå»æœåŠ¡ä¸‹ä¸€ä¸ªwebè¯·æ±‚ã€‚</p><p>  å½“è¿™ä¸ªè¯·æ±‚å®Œæˆï¼Œå®ƒè¢«æ”¾å›å¤„ç†é˜Ÿåˆ—ï¼Œå½“åˆ°è¾¾é˜Ÿåˆ—å¼€å¤´ï¼Œè¿™ä¸ªç»“æœè¢«è¿”å›ç»™ç”¨æˆ·ã€‚</p><p>  è¿™ä¸ªæ¨¡å‹éå¸¸é«˜æ•ˆå¯æ‰©å±•æ€§éå¸¸å¼ºï¼Œå› ä¸º webserver ä¸€ç›´æ¥å—è¯·æ±‚è€Œä¸ç­‰å¾…ä»»ä½•è¯»å†™æ“ä½œã€‚ï¼ˆè¿™ä¹Ÿç§°ä¹‹ä¸ºéé˜»å¡å¼IOæˆ–è€…äº‹ä»¶é©±åŠ¨IOï¼‰</p><p>  åœ¨äº‹ä»¶é©±åŠ¨æ¨¡å‹ä¸­ï¼Œä¼šç”Ÿæˆä¸€ä¸ªä¸»å¾ªç¯æ¥ç›‘å¬äº‹ä»¶ï¼Œå½“æ£€æµ‹åˆ°äº‹ä»¶æ—¶è§¦å‘å›è°ƒå‡½æ•°ã€‚</p><p>  EventEmitters -&gt; Events &#x3D;&gt;&lt;&#x3D; EventLoop  -&gt; Event  Handlers</p><p>  æ•´ä¸ªäº‹ä»¶é©±åŠ¨çš„æµç¨‹å°±æ˜¯è¿™ä¹ˆå®ç°çš„ï¼Œéå¸¸ç®€æ´ã€‚æœ‰ç‚¹ç±»ä¼¼äºè§‚å¯Ÿè€…æ¨¡å¼ï¼Œäº‹ä»¶ç›¸å½“äºä¸€ä¸ªä¸»é¢˜(Subject)ï¼Œè€Œæ‰€æœ‰æ³¨å†Œåˆ°è¿™ä¸ªäº‹ä»¶ä¸Šçš„å¤„ç†å‡½æ•°ç›¸å½“äºè§‚å¯Ÿè€…(Observer)ã€‚</p><p>  Node.js æœ‰å¤šä¸ªå†…ç½®çš„äº‹ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•å…¥ events æ¨¡å—ï¼Œå¹¶é€šè¿‡å®ä¾‹åŒ– EventEmitter ç±»æ¥ç»‘å®šå’Œç›‘å¬äº‹ä»¶ï¼Œå¦‚ä¸‹å®ä¾‹ï¼š</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥ events æ¨¡å—</span></span><br><span class="line"><span class="keyword">var</span> events = <span class="built_in">require</span>(<span class="string">&#x27;events&#x27;</span>);</span><br><span class="line"><span class="comment">// åˆ›å»º eventEmitter å¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> eventEmitter = <span class="keyword">new</span> events.<span class="title class_">EventEmitter</span>();</span><br></pre></td></tr></table></figure><p>  ä»¥ä¸‹ç¨‹åºç»‘å®šäº‹ä»¶å¤„ç†ç¨‹åºï¼š</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»‘å®šäº‹ä»¶åŠäº‹ä»¶çš„å¤„ç†ç¨‹åº</span></span><br><span class="line">eventEmitter.<span class="title function_">on</span>(<span class="string">&#x27;eventName&#x27;</span>, eventHandler);</span><br></pre></td></tr></table></figure><p>  æˆ‘ä»¬å¯ä»¥é€šè¿‡ç¨‹åºè§¦å‘äº‹ä»¶ï¼š</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è§¦å‘äº‹ä»¶</span></span><br><span class="line">eventEmitter.<span class="title function_">emit</span>(<span class="string">&#x27;eventName&#x27;</span>);</span><br></pre></td></tr></table></figure><p>  main.js</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥ events æ¨¡å—</span></span><br><span class="line"><span class="keyword">var</span> events = <span class="built_in">require</span>(<span class="string">&#x27;events&#x27;</span>);</span><br><span class="line"><span class="comment">// åˆ›å»º eventEmitter å¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> eventEmitter = <span class="keyword">new</span> events.<span class="title class_">EventEmitter</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºäº‹ä»¶å¤„ç†ç¨‹åº</span></span><br><span class="line"><span class="keyword">var</span> connectHandler = <span class="keyword">function</span> <span class="title function_">connected</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;è¿æ¥æˆåŠŸã€‚&#x27;</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// è§¦å‘ data_received äº‹ä»¶ </span></span><br><span class="line">  eventEmitter.<span class="title function_">emit</span>(<span class="string">&#x27;data_received&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»‘å®š connection äº‹ä»¶å¤„ç†ç¨‹åº</span></span><br><span class="line">eventEmitter.<span class="title function_">on</span>(<span class="string">&#x27;connection&#x27;</span>, connectHandler);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨åŒ¿åå‡½æ•°ç»‘å®š data_received äº‹ä»¶</span></span><br><span class="line">eventEmitter.<span class="title function_">on</span>(<span class="string">&#x27;data_received&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ•°æ®æ¥æ”¶æˆåŠŸã€‚&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§¦å‘ connection äº‹ä»¶ </span></span><br><span class="line">eventEmitter.<span class="title function_">emit</span>(<span class="string">&#x27;connection&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>  connection -&gt;  connectHandler -&gt; data_received</p>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">node main.js</span><br><span class="line">è¿æ¥æˆåŠŸã€‚</span><br><span class="line">æ•°æ®æ¥æ”¶æˆåŠŸã€‚</span><br><span class="line">ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Node-åº”ç”¨ç¨‹åºæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ"><a href="#Node-åº”ç”¨ç¨‹åºæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ" class="headerlink" title="Node åº”ç”¨ç¨‹åºæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ"></a>Node åº”ç”¨ç¨‹åºæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h2><p>  åœ¨ Node åº”ç”¨ç¨‹åºä¸­ï¼Œæ‰§è¡Œå¼‚æ­¥æ“ä½œçš„å‡½æ•°å°†å›è°ƒå‡½æ•°ä½œä¸ºæœ€åä¸€ä¸ªå‚æ•°ï¼Œ å›è°ƒå‡½æ•°æ¥æ”¶é”™è¯¯å¯¹è±¡ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚</p><p>  æ¥ä¸‹æ¥è®©æˆ‘ä»¬æ¥é‡æ–°çœ‹ä¸‹å‰é¢çš„å®ä¾‹ï¼Œåˆ›å»ºä¸€ä¸ª x.txt ,æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.js</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&#x27;x.txt&#x27;</span>, <span class="keyword">function</span> (<span class="params">err, data</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err)&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">stack</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(data.<span class="title function_">toString</span>());</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>  æ‰§è¡Œ åˆ™å¼‚æ­¥è¯»å–x.txtå†…å®¹<br>  æŠŠè·¯åŠ²æ”¹æˆ x1.txtè¯»å–é”™è¯¯åˆ™log é”™è¯¯å†…å®¹</p><h1 id="ğŸ“”Node-js-EventEmitter"><a href="#ğŸ“”Node-js-EventEmitter" class="headerlink" title="ğŸ“”Node.js EventEmitter"></a>ğŸ“”Node.js EventEmitter</h1><p>  Node.js æ‰€æœ‰çš„å¼‚æ­¥ I&#x2F;O æ“ä½œåœ¨å®Œæˆæ—¶éƒ½ä¼šå‘é€ä¸€ä¸ªäº‹ä»¶åˆ°äº‹ä»¶é˜Ÿåˆ—ã€‚</p><p>  Node.js é‡Œé¢çš„è®¸å¤šå¯¹è±¡éƒ½ä¼šåˆ†å‘äº‹ä»¶ï¼šä¸€ä¸ª net.Server å¯¹è±¡ä¼šåœ¨æ¯æ¬¡æœ‰æ–°è¿æ¥æ—¶è§¦å‘ä¸€ä¸ªäº‹ä»¶ï¼Œ ä¸€ä¸ª fs.readStream å¯¹è±¡ä¼šåœ¨æ–‡ä»¶è¢«æ‰“å¼€çš„æ—¶å€™è§¦å‘ä¸€ä¸ªäº‹ä»¶ã€‚ æ‰€æœ‰è¿™äº›äº§ç”Ÿäº‹ä»¶çš„å¯¹è±¡éƒ½æ˜¯ events.EventEmitter çš„å®ä¾‹ã€‚</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.js æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">EventEmitter</span> = <span class="built_in">require</span>(<span class="string">&#x27;events&#x27;</span>).<span class="property">EventEmitter</span>; </span><br><span class="line"><span class="keyword">var</span> event = <span class="keyword">new</span> <span class="title class_">EventEmitter</span>(); </span><br><span class="line">event.<span class="title function_">on</span>(<span class="string">&#x27;some_event&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123; </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;some_event äº‹ä»¶è§¦å‘&#x27;</span>); </span><br><span class="line">&#125;); </span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123; </span><br><span class="line">    event.<span class="title function_">emit</span>(<span class="string">&#x27;some_event&#x27;</span>); </span><br><span class="line">&#125;, <span class="number">10000</span>); </span><br></pre></td></tr></table></figure><p>  10såæ‰§è¡Œ some_event è¾“å‡º äº‹ä»¶è§¦å‘</p><p>  EventEmitter çš„æ¯ä¸ªäº‹ä»¶ç”±ä¸€ä¸ªäº‹ä»¶åå’Œè‹¥å¹²ä¸ªå‚æ•°ç»„æˆï¼Œäº‹ä»¶åæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé€šå¸¸è¡¨è¾¾ä¸€å®šçš„è¯­ä¹‰ã€‚å¯¹äºæ¯ä¸ªäº‹ä»¶ï¼ŒEventEmitter æ”¯æŒ è‹¥å¹²ä¸ªäº‹ä»¶ç›‘å¬å™¨ã€‚</p><p>  å½“äº‹ä»¶è§¦å‘æ—¶ï¼Œæ³¨å†Œåˆ°è¿™ä¸ªäº‹ä»¶çš„äº‹ä»¶ç›‘å¬å™¨è¢«ä¾æ¬¡è°ƒç”¨ï¼Œäº‹ä»¶å‚æ•°ä½œä¸ºå›è°ƒå‡½æ•°å‚æ•°ä¼ é€’ã€‚</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.js æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">var</span> events = <span class="built_in">require</span>(<span class="string">&#x27;events&#x27;</span>); </span><br><span class="line"><span class="keyword">var</span> emitter = <span class="keyword">new</span> events.<span class="title class_">EventEmitter</span>(); </span><br><span class="line">emitter.<span class="title function_">on</span>(<span class="string">&#x27;someEvent&#x27;</span>, <span class="keyword">function</span>(<span class="params">arg1, arg2</span>) &#123; </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;listener1&#x27;</span>, arg1, arg2); </span><br><span class="line">&#125;); </span><br><span class="line">emitter.<span class="title function_">on</span>(<span class="string">&#x27;someEvent&#x27;</span>, <span class="keyword">function</span>(<span class="params">arg1, arg2</span>) &#123; </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;listener2&#x27;</span>, arg1, arg2); </span><br><span class="line">&#125;); </span><br><span class="line">emitter.<span class="title function_">emit</span>(<span class="string">&#x27;someEvent&#x27;</span>, <span class="string">&#x27;arg1 å‚æ•°&#x27;</span>, <span class="string">&#x27;arg2 å‚æ•°&#x27;</span>); </span><br><span class="line"></span><br></pre></td></tr></table></figure><p>  emitter ä¸ºäº‹ä»¶ someEvent æ³¨å†Œäº†ä¸¤ä¸ªäº‹ä»¶ç›‘å¬å™¨ï¼Œç„¶åè§¦å‘äº† someEvent äº‹ä»¶ã€‚</p><p>  è¿è¡Œç»“æœä¸­å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªäº‹ä»¶ç›‘å¬å™¨å›è°ƒå‡½æ•°è¢«å…ˆåè°ƒç”¨ã€‚ è¿™å°±æ˜¯EventEmitteræœ€ç®€å•çš„ç”¨æ³•ã€‚</p><p>  EventEmitter æä¾›äº†å¤šä¸ªå±æ€§ï¼Œå¦‚ on å’Œ emitã€‚on å‡½æ•°ç”¨äºç»‘å®šäº‹ä»¶å‡½æ•°ï¼Œemit å±æ€§ç”¨äºè§¦å‘ä¸€ä¸ªäº‹ä»¶ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å…·ä½“çœ‹ä¸‹ EventEmitter çš„å±æ€§ä»‹ç»ã€‚</p><p>  .once ç›‘å¬å™¨æœ€å¤šåªä¼šè§¦å‘ä¸€æ¬¡ï¼Œè§¦å‘åç«‹åˆ»è§£é™¤è¯¥ç›‘å¬å™¨</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> events = <span class="built_in">require</span>(<span class="string">&#x27;events&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> eventEmitter = <span class="keyword">new</span> events.<span class="title class_">EventEmitter</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›‘å¬å™¨ #1</span></span><br><span class="line"><span class="keyword">var</span> listener1 = <span class="keyword">function</span> <span class="title function_">listener1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ç›‘å¬å™¨ listener1 æ‰§è¡Œã€‚&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›‘å¬å™¨ #2</span></span><br><span class="line"><span class="keyword">var</span> listener2 = <span class="keyword">function</span> <span class="title function_">listener2</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ç›‘å¬å™¨ listener2 æ‰§è¡Œã€‚&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»‘å®š connection äº‹ä»¶ï¼Œå¤„ç†å‡½æ•°ä¸º listener1 </span></span><br><span class="line">eventEmitter.<span class="title function_">addListener</span>(<span class="string">&#x27;connection&#x27;</span>, listener1);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»‘å®š connection äº‹ä»¶ï¼Œå¤„ç†å‡½æ•°ä¸º listener2</span></span><br><span class="line">eventEmitter.<span class="title function_">on</span>(<span class="string">&#x27;connection&#x27;</span>, listener2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> eventListeners = eventEmitter.<span class="title function_">listenerCount</span>(<span class="string">&#x27;connection&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(eventListeners + <span class="string">&quot; ä¸ªç›‘å¬å™¨ç›‘å¬è¿æ¥äº‹ä»¶ã€‚&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤„ç† connection äº‹ä»¶ </span></span><br><span class="line">eventEmitter.<span class="title function_">emit</span>(<span class="string">&#x27;connection&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç§»é™¤ç›‘ç»‘å®šçš„ listener1 å‡½æ•°</span></span><br><span class="line">eventEmitter.<span class="title function_">removeListener</span>(<span class="string">&#x27;connection&#x27;</span>, listener1);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;listener1 ä¸å†å—ç›‘å¬ã€‚&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§¦å‘è¿æ¥äº‹ä»¶</span></span><br><span class="line">eventEmitter.<span class="title function_">emit</span>(<span class="string">&#x27;connection&#x27;</span>);</span><br><span class="line"></span><br><span class="line">eventListeners = eventEmitter.<span class="title function_">listenerCount</span>(<span class="string">&#x27;connection&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(eventListeners + <span class="string">&quot; ä¸ªç›‘å¬å™¨ç›‘å¬è¿æ¥äº‹ä»¶ã€‚&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»‘å®š connection äº‹ä»¶ï¼Œå¤„ç†å‡½æ•°ä¸º listener2</span></span><br><span class="line">eventEmitter.<span class="title function_">on</span>(<span class="string">&#x27;connection&#x27;</span>, listener2);</span><br><span class="line"></span><br><span class="line">eventEmitter.<span class="title function_">emit</span>(<span class="string">&#x27;connection&#x27;</span>);</span><br><span class="line"></span><br><span class="line">eventListeners = eventEmitter.<span class="title function_">listenerCount</span>(<span class="string">&#x27;connection&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(eventListeners + <span class="string">&quot; ä¸ªç›‘å¬å™¨ç›‘å¬è¿æ¥äº‹ä»¶ã€‚&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚&quot;</span>);</span><br></pre></td></tr></table></figure><p>  error äº‹ä»¶<br>  EventEmitter å®šä¹‰äº†ä¸€ä¸ªç‰¹æ®Šçš„äº‹ä»¶ errorï¼Œå®ƒåŒ…å«äº†é”™è¯¯çš„è¯­ä¹‰ï¼Œæˆ‘ä»¬åœ¨é‡åˆ° å¼‚å¸¸çš„æ—¶å€™é€šå¸¸ä¼šè§¦å‘ error äº‹ä»¶ã€‚</p><p>  å½“ error è¢«è§¦å‘æ—¶ï¼ŒEventEmitter è§„å®šå¦‚æœæ²¡æœ‰å“ åº”çš„ç›‘å¬å™¨ï¼ŒNode.js ä¼šæŠŠå®ƒå½“ä½œå¼‚å¸¸ï¼Œé€€å‡ºç¨‹åºå¹¶è¾“å‡ºé”™è¯¯ä¿¡æ¯ã€‚</p><p>  æˆ‘ä»¬ä¸€èˆ¬è¦ä¸ºä¼šè§¦å‘ error äº‹ä»¶çš„å¯¹è±¡è®¾ç½®ç›‘å¬å™¨ï¼Œé¿å…é‡åˆ°é”™è¯¯åæ•´ä¸ªç¨‹åºå´©æºƒã€‚ä¾‹å¦‚ï¼š</p><p>  ç»§æ‰¿ EventEmitter<br>  å¤§å¤šæ•°æ—¶å€™æˆ‘ä»¬ä¸ä¼šç›´æ¥ä½¿ç”¨ EventEmitterï¼Œè€Œæ˜¯åœ¨å¯¹è±¡ä¸­ç»§æ‰¿å®ƒã€‚åŒ…æ‹¬ fsã€netã€ http åœ¨å†…çš„ï¼Œåªè¦æ˜¯æ”¯æŒäº‹ä»¶å“åº”çš„æ ¸å¿ƒæ¨¡å—éƒ½æ˜¯ EventEmitter çš„å­ç±»ã€‚</p><p>  ä¸ºä»€ä¹ˆè¦è¿™æ ·åšå‘¢ï¼ŸåŸå› æœ‰ä¸¤ç‚¹ï¼š</p><p>  é¦–å…ˆï¼Œå…·æœ‰æŸä¸ªå®ä½“åŠŸèƒ½çš„å¯¹è±¡å®ç°äº‹ä»¶ç¬¦åˆè¯­ä¹‰ï¼Œ äº‹ä»¶çš„ç›‘å¬å’Œå‘ç”Ÿåº”è¯¥æ˜¯ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•ã€‚</p><p>  å…¶æ¬¡ JavaScript çš„å¯¹è±¡æœºåˆ¶æ˜¯åŸºäºåŸå‹çš„ï¼Œæ”¯æŒ éƒ¨åˆ†å¤šé‡ç»§æ‰¿ï¼Œç»§æ‰¿ EventEmitter ä¸ä¼šæ‰“ä¹±å¯¹è±¡åŸæœ‰çš„ç»§æ‰¿å…³ç³»ã€‚</p><h1 id="â›-Node-js-Buffer"><a href="#â›-Node-js-Buffer" class="headerlink" title="â› Node.js Buffer"></a>â› Node.js Buffer</h1>  <!-- STRINGBUFFER --><p>  JavaScript è¯­è¨€è‡ªèº«åªæœ‰å­—ç¬¦ä¸²æ•°æ®ç±»å‹ï¼Œæ²¡æœ‰äºŒè¿›åˆ¶æ•°æ®ç±»å‹ã€‚</p><p>  ä½†åœ¨å¤„ç†åƒTCPæµæˆ–æ–‡ä»¶æµæ—¶ï¼Œå¿…é¡»ä½¿ç”¨åˆ°äºŒè¿›åˆ¶æ•°æ®ã€‚å› æ­¤åœ¨ Node.jsä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸ª Buffer ç±»ï¼Œè¯¥ç±»ç”¨æ¥åˆ›å»ºä¸€ä¸ªä¸“é—¨å­˜æ”¾äºŒè¿›åˆ¶æ•°æ®çš„ç¼“å­˜åŒºã€‚</p><p>  åœ¨ Node.js ä¸­ï¼ŒBuffer ç±»æ˜¯éš Node å†…æ ¸ä¸€èµ·å‘å¸ƒçš„æ ¸å¿ƒåº“ã€‚Buffer åº“ä¸º Node.js å¸¦æ¥äº†ä¸€ç§å­˜å‚¨åŸå§‹æ•°æ®çš„æ–¹æ³•ï¼Œå¯ä»¥è®© Node.js å¤„ç†äºŒè¿›åˆ¶æ•°æ®ï¼Œæ¯å½“éœ€è¦åœ¨ Node.js ä¸­å¤„ç†I&#x2F;Oæ“ä½œä¸­ç§»åŠ¨çš„æ•°æ®æ—¶ï¼Œå°±æœ‰å¯èƒ½ä½¿ç”¨ Buffer åº“ã€‚åŸå§‹æ•°æ®å­˜å‚¨åœ¨ Buffer ç±»çš„å®ä¾‹ä¸­ã€‚ä¸€ä¸ª Buffer ç±»ä¼¼äºä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œä½†å®ƒå¯¹åº”äº V8 å †å†…å­˜ä¹‹å¤–çš„ä¸€å—åŸå§‹å†…å­˜ã€‚</p><p>  Buffer ä¸å­—ç¬¦ç¼–ç </p><p>  Buffer å®ä¾‹ä¸€èˆ¬ç”¨äºè¡¨ç¤ºç¼–ç å­—ç¬¦çš„åºåˆ—ï¼Œæ¯”å¦‚ UTF-8 ã€ UCS2 ã€ Base64 ã€æˆ–åå…­è¿›åˆ¶ç¼–ç çš„æ•°æ®ã€‚ é€šè¿‡ä½¿ç”¨æ˜¾å¼çš„å­—ç¬¦ç¼–ç ï¼Œå°±å¯ä»¥åœ¨ Buffer å®ä¾‹ä¸æ™®é€šçš„ JavaScript å­—ç¬¦ä¸²ä¹‹é—´è¿›è¡Œç›¸äº’è½¬æ¢ã€‚</p><p>  Buffer.from() åˆ›å»ºå¯¹è±¡</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> buf = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;ascii&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º 72756e6f6f62</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf.<span class="title function_">toString</span>(<span class="string">&#x27;hex&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º cnVub29i</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf.<span class="title function_">toString</span>(<span class="string">&#x27;base64&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//UTF-8</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf.<span class="title function_">toString</span>(<span class="string">&#x27;UTF-8&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//ascii </span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(buf.<span class="title function_">toString</span>(<span class="string">&#x27;ascii&#x27;</span>));</span><br><span class="line">    <span class="comment">//utf16le</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(buf.<span class="title function_">toString</span>(<span class="string">&#x27;utf16le&#x27;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//latin1</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(buf.<span class="title function_">toString</span>(<span class="string">&#x27;latin1&#x27;</span>));</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>  Node.js ç›®å‰æ”¯æŒçš„å­—ç¬¦ç¼–ç åŒ…æ‹¬ï¼š</p><p>  ascii - ä»…æ”¯æŒ 7 ä½ ASCII æ•°æ®ã€‚å¦‚æœè®¾ç½®å»æ‰é«˜ä½çš„è¯ï¼Œè¿™ç§ç¼–ç æ˜¯éå¸¸å¿«çš„ã€‚</p><p>  utf8 - å¤šå­—èŠ‚ç¼–ç çš„ Unicode å­—ç¬¦ã€‚è®¸å¤šç½‘é¡µå’Œå…¶ä»–æ–‡æ¡£æ ¼å¼éƒ½ä½¿ç”¨ UTF-8 ã€‚</p><p>  utf16le - 2 æˆ– 4 ä¸ªå­—èŠ‚ï¼Œå°å­—èŠ‚åºç¼–ç çš„ Unicode å­—ç¬¦ã€‚æ”¯æŒä»£ç†å¯¹ï¼ˆU+10000 è‡³ U+10FFFFï¼‰ã€‚</p><p>  ucs2 - utf16le çš„åˆ«åã€‚</p><p>  base64 - Base64 ç¼–ç ã€‚</p><p>  latin1 - ä¸€ç§æŠŠ Buffer ç¼–ç æˆä¸€å­—èŠ‚ç¼–ç çš„å­—ç¬¦ä¸²çš„æ–¹å¼ã€‚</p><p>  binary - latin1 çš„åˆ«åã€‚</p><p>  hex - å°†æ¯ä¸ªå­—èŠ‚ç¼–ç ä¸ºä¸¤ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ã€‚</p><h2 id="åˆ›å»º-Buffer-ç±»"><a href="#åˆ›å»º-Buffer-ç±»" class="headerlink" title="åˆ›å»º Buffer ç±»"></a>åˆ›å»º Buffer ç±»</h2><p>  Buffer æä¾›äº†ä»¥ä¸‹ API æ¥åˆ›å»º Buffer ç±»ï¼š</p><p>  Buffer.alloc(size[, fill[, encoding]])ï¼š è¿”å›ä¸€ä¸ªæŒ‡å®šå¤§å°çš„ Buffer å®ä¾‹ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½® fillï¼Œåˆ™é»˜è®¤å¡«æ»¡ 0<br>  Buffer.allocUnsafe(size)ï¼š è¿”å›ä¸€ä¸ªæŒ‡å®šå¤§å°çš„ Buffer å®ä¾‹ï¼Œä½†æ˜¯å®ƒä¸ä¼šè¢«åˆå§‹åŒ–ï¼Œæ‰€ä»¥å®ƒå¯èƒ½åŒ…å«æ•æ„Ÿçš„æ•°æ®<br>  Buffer.allocUnsafeSlow(size)<br>  Buffer.from(array)ï¼š è¿”å›ä¸€ä¸ªè¢« array çš„å€¼åˆå§‹åŒ–çš„æ–°çš„ Buffer å®ä¾‹ï¼ˆä¼ å…¥çš„ array çš„å…ƒç´ åªèƒ½æ˜¯æ•°å­—ï¼Œä¸ç„¶å°±ä¼šè‡ªåŠ¨è¢« 0 è¦†ç›–ï¼‰<br>  Buffer.from(arrayBuffer[, byteOffset[, length]])ï¼š è¿”å›ä¸€ä¸ªæ–°å»ºçš„ä¸ç»™å®šçš„ ArrayBuffer å…±äº«åŒä¸€å†…å­˜çš„ Bufferã€‚<br>  Buffer.from(buffer)ï¼š å¤åˆ¶ä¼ å…¥çš„ Buffer å®ä¾‹çš„æ•°æ®ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„ Buffer å®ä¾‹<br>  Buffer.from(string[, encoding])ï¼š è¿”å›ä¸€ä¸ªè¢« string çš„å€¼åˆå§‹åŒ–çš„æ–°çš„ Buffer å®ä¾‹</p><h2 id="å†™å…¥ç¼“å†²åŒº"><a href="#å†™å…¥ç¼“å†²åŒº" class="headerlink" title="å†™å…¥ç¼“å†²åŒº"></a>å†™å…¥ç¼“å†²åŒº</h2><p>  è¯­æ³•<br>  å†™å…¥ Node ç¼“å†²åŒºçš„è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">buf.<span class="title function_">write</span>(string[, offset[, length]][, encoding])</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>  å‚æ•°<br>  å‚æ•°æè¿°å¦‚ä¸‹ï¼š</p><p>  string - å†™å…¥ç¼“å†²åŒºçš„å­—ç¬¦ä¸²ã€‚</p><p>  offset - ç¼“å†²åŒºå¼€å§‹å†™å…¥çš„ç´¢å¼•å€¼ï¼Œé»˜è®¤ä¸º 0 ã€‚</p><p>  length - å†™å…¥çš„å­—èŠ‚æ•°ï¼Œé»˜è®¤ä¸º buffer.length</p><p>  encoding - ä½¿ç”¨çš„ç¼–ç ã€‚é»˜è®¤ä¸º â€˜utf8â€™ ã€‚</p><p>  æ ¹æ® encoding çš„å­—ç¬¦ç¼–ç å†™å…¥ string åˆ° buf ä¸­çš„ offset ä½ç½®ã€‚ length å‚æ•°æ˜¯å†™å…¥çš„å­—èŠ‚æ•°ã€‚ å¦‚æœ buf æ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´ä¿å­˜æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ™åªä¼šå†™å…¥ string çš„ä¸€éƒ¨åˆ†ã€‚ åªéƒ¨åˆ†è§£ç çš„å­—ç¬¦ä¸ä¼šè¢«å†™å…¥ã€‚</p><p>  è¿”å›å€¼<br>  è¿”å›å®é™…å†™å…¥çš„å¤§å°ã€‚å¦‚æœ buffer ç©ºé—´ä¸è¶³ï¼Œ åˆ™åªä¼šå†™å…¥éƒ¨åˆ†å­—ç¬¦ä¸²ã€‚</p><p>  å®ä¾‹<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">buf = <span class="title class_">Buffer</span>.<span class="title function_">alloc</span>(<span class="number">256</span>);</span><br><span class="line">len = buf.<span class="title function_">write</span>(<span class="string">&quot;123123&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å†™å…¥å­—èŠ‚æ•° : &quot;</span>+  len);</span><br></pre></td></tr></table></figure></p><h2 id="ä»ç¼“å†²åŒºè¯»å–æ•°æ®"><a href="#ä»ç¼“å†²åŒºè¯»å–æ•°æ®" class="headerlink" title="ä»ç¼“å†²åŒºè¯»å–æ•°æ®"></a>ä»ç¼“å†²åŒºè¯»å–æ•°æ®</h2><p>  è¯­æ³•<br>  è¯»å– Node ç¼“å†²åŒºæ•°æ®çš„è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">buf.<span class="title function_">toString</span>([encoding[, start[, end]]])</span><br></pre></td></tr></table></figure></p><p>  å‚æ•°<br>  å‚æ•°æè¿°å¦‚ä¸‹ï¼š</p><p>  encoding - ä½¿ç”¨çš„ç¼–ç ã€‚é»˜è®¤ä¸º â€˜utf8â€™ ã€‚</p><p>  start - æŒ‡å®šå¼€å§‹è¯»å–çš„ç´¢å¼•ä½ç½®ï¼Œé»˜è®¤ä¸º 0ã€‚</p><p>  end - ç»“æŸä½ç½®ï¼Œé»˜è®¤ä¸ºç¼“å†²åŒºçš„æœ«å°¾ã€‚</p><p>  è¿”å›å€¼<br>  è§£ç ç¼“å†²åŒºæ•°æ®å¹¶ä½¿ç”¨æŒ‡å®šçš„ç¼–ç è¿”å›å­—ç¬¦ä¸²ã€‚</p><p>  å®ä¾‹<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">buf = <span class="title class_">Buffer</span>.<span class="title function_">alloc</span>(<span class="number">26</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span> ; i &lt; <span class="number">26</span> ; i++) &#123;</span><br><span class="line">  buf[i] = i + <span class="number">97</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>( buf.<span class="title function_">toString</span>(<span class="string">&#x27;ascii&#x27;</span>));       <span class="comment">// è¾“å‡º: abcdefghijklmnopqrstuvwxyz</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>( buf.<span class="title function_">toString</span>(<span class="string">&#x27;ascii&#x27;</span>,<span class="number">0</span>,<span class="number">5</span>));   <span class="comment">//ä½¿ç”¨ &#x27;ascii&#x27; ç¼–ç , å¹¶è¾“å‡º: abcde</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>( buf.<span class="title function_">toString</span>(<span class="string">&#x27;utf8&#x27;</span>,<span class="number">0</span>,<span class="number">5</span>));    <span class="comment">// ä½¿ç”¨ &#x27;utf8&#x27; ç¼–ç , å¹¶è¾“å‡º: abcde</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>( buf.<span class="title function_">toString</span>(<span class="literal">undefined</span>,<span class="number">0</span>,<span class="number">5</span>)); <span class="comment">// ä½¿ç”¨é»˜è®¤çš„ &#x27;utf8&#x27; ç¼–ç , å¹¶è¾“å‡º: abcde</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p>  å°† Buffer è½¬æ¢ä¸º JSON å¯¹è±¡<br>  è¯­æ³•<br>  å°† Node Buffer è½¬æ¢ä¸º JSON å¯¹è±¡çš„å‡½æ•°è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">buf.<span class="title function_">toJSON</span>()</span><br></pre></td></tr></table></figure>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> buf = <span class="title class_">Buffer</span>.<span class="title function_">from</span>([<span class="number">0x1</span>, <span class="number">0x2</span>, <span class="number">0x3</span>, <span class="number">0x4</span>, <span class="number">0x5</span>]);</span><br><span class="line"><span class="keyword">const</span> json = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(buf);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º: &#123;&quot;type&quot;:&quot;Buffer&quot;,&quot;data&quot;:[1,2,3,4,5]&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(json);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> copy = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(json, <span class="function">(<span class="params">key, value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> value &amp;&amp; value.<span class="property">type</span> === <span class="string">&#x27;Buffer&#x27;</span> ?</span><br><span class="line">    <span class="title class_">Buffer</span>.<span class="title function_">from</span>(value.<span class="property">data</span>) :</span><br><span class="line">    value;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º: &lt;Buffer 01 02 03 04 05&gt;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(copy);</span><br></pre></td></tr></table></figure><h2 id="ç¼“å†²åŒºåˆå¹¶"><a href="#ç¼“å†²åŒºåˆå¹¶" class="headerlink" title="ç¼“å†²åŒºåˆå¹¶"></a>ç¼“å†²åŒºåˆå¹¶</h2><p>  è¯­æ³•<br>  Node ç¼“å†²åŒºåˆå¹¶çš„è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Buffer</span>.<span class="title function_">concat</span>(list[, totalLength])</span><br></pre></td></tr></table></figure>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> buffer1 = <span class="title class_">Buffer</span>.<span class="title function_">from</span>((<span class="string">&#x27;123&#x27;</span>));</span><br><span class="line"><span class="keyword">var</span> buffer2 = <span class="title class_">Buffer</span>.<span class="title function_">from</span>((<span class="string">&#x27;test&#x27;</span>));</span><br><span class="line"><span class="keyword">var</span> buffer3 = <span class="title class_">Buffer</span>.<span class="title function_">concat</span>([buffer1,buffer2]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;buffer3 å†…å®¹: &quot;</span> + buffer3.<span class="title function_">toString</span>());</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ç¼“å†²åŒºæ¯”è¾ƒ"><a href="#ç¼“å†²åŒºæ¯”è¾ƒ" class="headerlink" title="ç¼“å†²åŒºæ¯”è¾ƒ"></a>ç¼“å†²åŒºæ¯”è¾ƒ</h2><p>  è¯­æ³•<br>  Node Buffer æ¯”è¾ƒçš„å‡½æ•°è¯­æ³•å¦‚ä¸‹æ‰€ç¤º, è¯¥æ–¹æ³•åœ¨ Node.js v0.12.2 ç‰ˆæœ¬å¼•å…¥ï¼š<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">buf.<span class="title function_">compare</span>(otherBuffer);</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> buffer1 = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&#x27;ABC&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> buffer2 = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&#x27;ABCD&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> result = buffer1.<span class="title function_">compare</span>(buffer2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(result &lt; <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(buffer1 + <span class="string">&quot; åœ¨ &quot;</span> + buffer2 + <span class="string">&quot;ä¹‹å‰&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(result == <span class="number">0</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(buffer1 + <span class="string">&quot; ä¸ &quot;</span> + buffer2 + <span class="string">&quot;ç›¸åŒ&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(buffer1 + <span class="string">&quot; åœ¨ &quot;</span> + buffer2 + <span class="string">&quot;ä¹‹å&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h2 id="æ‹·è´ç¼“å†²åŒº"><a href="#æ‹·è´ç¼“å†²åŒº" class="headerlink" title="æ‹·è´ç¼“å†²åŒº"></a>æ‹·è´ç¼“å†²åŒº</h2><p>  è¯­æ³•<br>  Node ç¼“å†²åŒºæ‹·è´è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">buf.<span class="title function_">copy</span>(targetBuffer[, targetStart[, sourceStart[, sourceEnd]]])</span><br></pre></td></tr></table></figure></p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> buf1 = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&#x27;abcdefghijkl&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> buf2 = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&#x27;123&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°† buf2 æ’å…¥åˆ° buf1 æŒ‡å®šä½ç½®ä¸Š</span></span><br><span class="line">buf2.<span class="title function_">copy</span>(buf1, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf1.<span class="title function_">toString</span>());</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ç¼“å†²åŒºè£å‰ª"><a href="#ç¼“å†²åŒºè£å‰ª" class="headerlink" title="ç¼“å†²åŒºè£å‰ª"></a>ç¼“å†²åŒºè£å‰ª</h2><p>  Node ç¼“å†²åŒºè£å‰ªè¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">buf.<span class="title function_">slice</span>([start[, end]])</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> buffer1 = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&#x27;TEST123TEST&#x27;</span>);</span><br><span class="line"><span class="comment">// å‰ªåˆ‡ç¼“å†²åŒº</span></span><br><span class="line"><span class="keyword">var</span> buffer2 = buffer1.<span class="title function_">slice</span>(<span class="number">0</span>,<span class="number">2</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;buffer2 content: &quot;</span> + buffer2.<span class="title function_">toString</span>());</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ç¼“å†²åŒºé•¿åº¦"><a href="#ç¼“å†²åŒºé•¿åº¦" class="headerlink" title="ç¼“å†²åŒºé•¿åº¦"></a>ç¼“å†²åŒºé•¿åº¦</h2><p>  è¯­æ³•<br>  Node ç¼“å†²åŒºé•¿åº¦è®¡ç®—è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">buf.<span class="property">length</span>;</span><br></pre></td></tr></table></figure></p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> buffer = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&#x27;123123123&#x27;</span>);</span><br><span class="line"><span class="comment">//  ç¼“å†²åŒºé•¿åº¦</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;buffer length: &quot;</span> + buffer.<span class="property">length</span>);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="ğŸ‘¨â€ğŸ’»Node-js-Stream"><a href="#ğŸ‘¨â€ğŸ’»Node-js-Stream" class="headerlink" title="ğŸ‘¨â€ğŸ’»Node.js Stream"></a>ğŸ‘¨â€ğŸ’»Node.js Stream</h1><p>  Node.js Stream(æµ)</p><p>  Stream æ˜¯ä¸€ä¸ªæŠ½è±¡æ¥å£ï¼ŒNode ä¸­æœ‰å¾ˆå¤šå¯¹è±¡å®ç°äº†è¿™ä¸ªæ¥å£ã€‚ä¾‹å¦‚ï¼Œå¯¹http æœåŠ¡å™¨å‘èµ·è¯·æ±‚çš„request å¯¹è±¡å°±æ˜¯ä¸€ä¸ª Streamï¼Œè¿˜æœ‰stdoutï¼ˆæ ‡å‡†è¾“å‡ºï¼‰ã€‚</p><p>  Node.jsï¼ŒStream æœ‰å››ç§æµç±»å‹ï¼š</p><p>  Readable - å¯è¯»æ“ä½œã€‚</p><p>  Writable - å¯å†™æ“ä½œã€‚</p><p>  Duplex - å¯è¯»å¯å†™æ“ä½œ.</p><p>  Transform - æ“ä½œè¢«å†™å…¥æ•°æ®ï¼Œç„¶åè¯»å‡ºç»“æœã€‚</p><p>  æ‰€æœ‰çš„ Stream å¯¹è±¡éƒ½æ˜¯ EventEmitter çš„å®ä¾‹ã€‚å¸¸ç”¨çš„äº‹ä»¶æœ‰ï¼š</p><p>  data - å½“æœ‰æ•°æ®å¯è¯»æ—¶è§¦å‘ã€‚</p><p>  end - æ²¡æœ‰æ›´å¤šçš„æ•°æ®å¯è¯»æ—¶è§¦å‘ã€‚</p><p>  error - åœ¨æ¥æ”¶å’Œå†™å…¥è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘ã€‚</p><p>  finish - æ‰€æœ‰æ•°æ®å·²è¢«å†™å…¥åˆ°åº•å±‚ç³»ç»Ÿæ—¶è§¦å‘ã€‚</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> data = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºå¯è¯»æµ</span></span><br><span class="line"><span class="keyword">var</span> readerStream = fs.<span class="title function_">createReadStream</span>(<span class="string">&#x27;x.txt&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®ç¼–ç ä¸º utf8ã€‚</span></span><br><span class="line">readerStream.<span class="title function_">setEncoding</span>(<span class="string">&#x27;UTF8&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤„ç†æµäº‹ä»¶ --&gt; data, end, and error</span></span><br><span class="line">readerStream.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="keyword">function</span>(<span class="params">chunk</span>) &#123;</span><br><span class="line">  data += chunk;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">readerStream.<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">readerStream.<span class="title function_">on</span>(<span class="string">&#x27;error&#x27;</span>, <span class="keyword">function</span>(<span class="params">err</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">stack</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>  å†™å…¥æµ<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> data = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> dataw = <span class="string">&#x27;w123w&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> ws = fs.<span class="title function_">createWriteStream</span>(<span class="string">&#x27;x.txt&#x27;</span>);</span><br><span class="line">ws.<span class="title function_">write</span>(dataw);    </span><br><span class="line">ws.<span class="title function_">end</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ•°æ®å†™å…¥æˆåŠŸï¼&quot;</span>);  </span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p>  ç®¡é“æµ<br>  ç®¡é“æä¾›äº†ä¸€ä¸ªè¾“å‡ºæµåˆ°è¾“å…¥æµçš„æœºåˆ¶ã€‚é€šå¸¸æˆ‘ä»¬ç”¨äºä»ä¸€ä¸ªæµä¸­è·å–æ•°æ®å¹¶å°†æ•°æ®ä¼ é€’åˆ°å¦å¤–ä¸€ä¸ªæµä¸­ã€‚</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªå¯è¯»æµ</span></span><br><span class="line"><span class="keyword">var</span> readerStream = fs.<span class="title function_">createReadStream</span>(<span class="string">&#x27;x.txt&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªå¯å†™æµ</span></span><br><span class="line"><span class="keyword">var</span> writerStream = fs.<span class="title function_">createWriteStream</span>(<span class="string">&#x27;output.txt&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®¡é“è¯»å†™æ“ä½œ</span></span><br><span class="line"><span class="comment">// è¯»å– input.txt æ–‡ä»¶å†…å®¹ï¼Œå¹¶å°†å†…å®¹å†™å…¥åˆ° output.txt æ–‡ä»¶ä¸­</span></span><br><span class="line">readerStream.<span class="title function_">pipe</span>(writerStream);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•&quot;</span>);</span><br></pre></td></tr></table></figure><p>  é“¾å¼æµ<br>  é“¾å¼æ˜¯é€šè¿‡è¿æ¥è¾“å‡ºæµåˆ°å¦å¤–ä¸€ä¸ªæµå¹¶åˆ›å»ºå¤šä¸ªæµæ“ä½œé“¾çš„æœºåˆ¶ã€‚é“¾å¼æµä¸€èˆ¬ç”¨äºç®¡é“æ“ä½œã€‚</p><p>  æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ˜¯ç”¨ç®¡é“å’Œé“¾å¼æ¥å‹ç¼©å’Œè§£å‹æ–‡ä»¶ã€‚<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> zlib = <span class="built_in">require</span>(<span class="string">&#x27;zlib&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‹ç¼© input.txt æ–‡ä»¶ä¸º input.txt.gz</span></span><br><span class="line">fs.<span class="title function_">createReadStream</span>(<span class="string">&#x27;x.txt&#x27;</span>)</span><br><span class="line">  .<span class="title function_">pipe</span>(zlib.<span class="title function_">createGzip</span>())</span><br><span class="line">.<span class="title function_">pipe</span>(fs.<span class="title function_">createWriteStream</span>(<span class="string">&#x27;input.txt.gz&#x27;</span>));</span><br><span class="line">  </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ–‡ä»¶å‹ç¼©å®Œæˆã€‚&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> zlib = <span class="built_in">require</span>(<span class="string">&#x27;zlib&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§£å‹ input.txt.gz æ–‡ä»¶ä¸º input.txt</span></span><br><span class="line">fs.<span class="title function_">createReadStream</span>(<span class="string">&#x27;input.txt.gz&#x27;</span>)</span><br><span class="line">  .<span class="title function_">pipe</span>(zlib.<span class="title function_">createGunzip</span>())</span><br><span class="line">  .<span class="title function_">pipe</span>(fs.<span class="title function_">createWriteStream</span>(<span class="string">&#x27;input2.txt&#x27;</span>));</span><br><span class="line">  </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ–‡ä»¶è§£å‹å®Œæˆã€‚&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h1 id="ğŸ“Node-js-æ¨¡å—ç³»ç»Ÿ"><a href="#ğŸ“Node-js-æ¨¡å—ç³»ç»Ÿ" class="headerlink" title="ğŸ“Node.js æ¨¡å—ç³»ç»Ÿ"></a>ğŸ“Node.js æ¨¡å—ç³»ç»Ÿ</h1><p>  ~~</p><p>  ä¸ºäº†è®©Node.jsçš„æ–‡ä»¶å¯ä»¥ç›¸äº’è°ƒç”¨ï¼ŒNode.jsæä¾›äº†ä¸€ä¸ªç®€å•çš„æ¨¡å—ç³»ç»Ÿã€‚</p><p>  æ¨¡å—æ˜¯Node.js åº”ç”¨ç¨‹åºçš„åŸºæœ¬ç»„æˆéƒ¨åˆ†ï¼Œæ–‡ä»¶å’Œæ¨¡å—æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚æ¢è¨€ä¹‹ï¼Œä¸€ä¸ª Node.js æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œè¿™ä¸ªæ–‡ä»¶å¯èƒ½æ˜¯JavaScript ä»£ç ã€JSON æˆ–è€…ç¼–è¯‘è¿‡çš„C&#x2F;C++ æ‰©å±•ã€‚</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//hello.js</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">world1</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello world node.js &quot;</span>) </span><br><span class="line"></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//test.js</span></span><br><span class="line"><span class="keyword">var</span> hello = <span class="built_in">require</span>(<span class="string">&#x27;./hello&#x27;</span>);</span><br><span class="line">hello.<span class="title function_">world1</span>();</span><br></pre></td></tr></table></figure><p>  hello.js é€šè¿‡ exports å¯¹è±¡æŠŠ world1 ä½œä¸ºæ¨¡å—çš„è®¿é—®æ¥å£ï¼Œåœ¨ main.js ä¸­é€šè¿‡ require(â€˜.&#x2F;helloâ€™) åŠ è½½è¿™ä¸ªæ¨¡å—ï¼Œç„¶åå°±å¯ä»¥ç›´æ¥è®¿ é—® hello.js ä¸­ exports å¯¹è±¡çš„æˆå‘˜å‡½æ•°äº†ã€‚</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//hello.js </span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Hello</span>(<span class="params"></span>) &#123; </span><br><span class="line">    <span class="keyword">var</span> name; </span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">setName</span> = <span class="keyword">function</span>(<span class="params">thyName</span>) &#123; </span><br><span class="line">        name = thyName; </span><br><span class="line">    &#125;; </span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">sayHello</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123; </span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hello &#x27;</span> + name); </span><br><span class="line">    &#125;; </span><br><span class="line">&#125;; </span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title class_">Hello</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//test.js </span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Hello</span> = <span class="built_in">require</span>(<span class="string">&#x27;./hello&#x27;</span>); </span><br><span class="line">hello = <span class="keyword">new</span> <span class="title class_">Hello</span>(); </span><br><span class="line">hello.<span class="title function_">setName</span>(<span class="string">&#x27;vvv&#x27;</span>); </span><br><span class="line">hello.<span class="title function_">sayHello</span>(); </span><br></pre></td></tr></table></figure><p>  æ¨¡å—æ¥å£çš„å”¯ä¸€å˜åŒ–æ˜¯ä½¿ç”¨ module.exports &#x3D; Hello ä»£æ›¿äº†exports.world &#x3D; function(){}ã€‚ åœ¨å¤–éƒ¨å¼•ç”¨è¯¥æ¨¡å—æ—¶ï¼Œå…¶æ¥å£å¯¹è±¡å°±æ˜¯è¦è¾“å‡ºçš„ Hello å¯¹è±¡æœ¬èº«ï¼Œè€Œä¸æ˜¯åŸå…ˆçš„ exportsã€‚</p><p>  exports å’Œ module.exports çš„ä½¿ç”¨</p><p>  å¦‚æœè¦å¯¹å¤–æš´éœ²å±æ€§æˆ–æ–¹æ³•ï¼Œå°±ç”¨ exports å°±è¡Œï¼Œè¦æš´éœ²å¯¹è±¡(ç±»ä¼¼classï¼ŒåŒ…å«äº†å¾ˆå¤šå±æ€§å’Œæ–¹æ³•)ï¼Œå°±ç”¨ module.exportsã€‚</p><p>  PS æ¨¡å—åŠ è½½<br>  ä»æ–‡ä»¶æ¨¡å—ç¼“å­˜ä¸­åŠ è½½<br>  å°½ç®¡åŸç”Ÿæ¨¡å—ä¸æ–‡ä»¶æ¨¡å—çš„ä¼˜å…ˆçº§ä¸åŒï¼Œä½†æ˜¯éƒ½ä¼šä¼˜å…ˆä»æ–‡ä»¶æ¨¡å—çš„ç¼“å­˜ä¸­åŠ è½½å·²ç»å­˜åœ¨çš„æ¨¡å—ã€‚</p><p>  ä»åŸç”Ÿæ¨¡å—åŠ è½½<br>  åŸç”Ÿæ¨¡å—çš„ä¼˜å…ˆçº§ä»…æ¬¡äºæ–‡ä»¶æ¨¡å—ç¼“å­˜çš„ä¼˜å…ˆçº§ã€‚require æ–¹æ³•åœ¨è§£ææ–‡ä»¶åä¹‹åï¼Œä¼˜å…ˆæ£€æŸ¥æ¨¡å—æ˜¯å¦åœ¨åŸç”Ÿæ¨¡å—åˆ—è¡¨ä¸­ã€‚ä»¥httpæ¨¡å—ä¸ºä¾‹ï¼Œå°½ç®¡åœ¨ç›®å½•ä¸‹å­˜åœ¨ä¸€ä¸ª http&#x2F;http.js&#x2F;http.node&#x2F;http.json æ–‡ä»¶ï¼Œrequire(â€œhttpâ€) éƒ½ä¸ä¼šä»è¿™äº›æ–‡ä»¶ä¸­åŠ è½½ï¼Œè€Œæ˜¯ä»åŸç”Ÿæ¨¡å—ä¸­åŠ è½½ã€‚</p><p>  åŸç”Ÿæ¨¡å—ä¹Ÿæœ‰ä¸€ä¸ªç¼“å­˜åŒºï¼ŒåŒæ ·ä¹Ÿæ˜¯ä¼˜å…ˆä»ç¼“å­˜åŒºåŠ è½½ã€‚å¦‚æœç¼“å­˜åŒºæ²¡æœ‰è¢«åŠ è½½è¿‡ï¼Œåˆ™è°ƒç”¨åŸç”Ÿæ¨¡å—çš„åŠ è½½æ–¹å¼è¿›è¡ŒåŠ è½½å’Œæ‰§è¡Œã€‚</p><p>  ä»æ–‡ä»¶åŠ è½½<br>  å½“æ–‡ä»¶æ¨¡å—ç¼“å­˜ä¸­ä¸å­˜åœ¨ï¼Œè€Œä¸”ä¸æ˜¯åŸç”Ÿæ¨¡å—çš„æ—¶å€™ï¼ŒNode.js ä¼šè§£æ require æ–¹æ³•ä¼ å…¥çš„å‚æ•°ï¼Œå¹¶ä»æ–‡ä»¶ç³»ç»Ÿä¸­åŠ è½½å®é™…çš„æ–‡ä»¶ï¼ŒåŠ è½½è¿‡ç¨‹ä¸­çš„åŒ…è£…å’Œç¼–è¯‘ç»†èŠ‚åœ¨å‰ä¸€èŠ‚ä¸­å·²ç»ä»‹ç»è¿‡ï¼Œè¿™é‡Œæˆ‘ä»¬å°†è¯¦ç»†æè¿°æŸ¥æ‰¾æ–‡ä»¶æ¨¡å—çš„è¿‡ç¨‹ï¼Œå…¶ä¸­ï¼Œä¹Ÿæœ‰ä¸€äº›ç»†èŠ‚å€¼å¾—çŸ¥æ™“ã€‚</p><p>  requireæ–¹æ³•æ¥å—ä»¥ä¸‹å‡ ç§å‚æ•°çš„ä¼ é€’ï¼š</p><p>  httpã€fsã€pathç­‰ï¼ŒåŸç”Ÿæ¨¡å—ã€‚<br>  .&#x2F;modæˆ–..&#x2F;modï¼Œç›¸å¯¹è·¯å¾„çš„æ–‡ä»¶æ¨¡å—ã€‚<br>  &#x2F;pathtomodule&#x2F;modï¼Œç»å¯¹è·¯å¾„çš„æ–‡ä»¶æ¨¡å—ã€‚<br>  modï¼ŒéåŸç”Ÿæ¨¡å—çš„æ–‡ä»¶æ¨¡å—ã€‚</p><h1 id="ğŸ”„nodejs-åŠ è½½c"><a href="#ğŸ”„nodejs-åŠ è½½c" class="headerlink" title="ğŸ”„nodejs åŠ è½½c++"></a>ğŸ”„nodejs åŠ è½½c++</h1><p>  åœ¨Node.jsä¸­åŠ è½½C++ä»£ç ï¼Œé€šå¸¸æ˜¯é€šè¿‡ç¼–å†™ä¸€ä¸ªC++çš„æ‰©å±•æ¨¡å—ï¼Œç„¶åé€šè¿‡Node.jsçš„requireæ–¹æ³•åŠ è½½è¿™ä¸ªæ¨¡å—ã€‚è¿™å¯ä»¥é€šè¿‡Node.jsçš„åŸç”Ÿæ‰©å±•æ¨¡å—APIå®ç°ï¼Œä¹Ÿå¯ä»¥é€šè¿‡N-APIå®ç°ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸ºæ„å»ºå¯ä»¥åœ¨å¤šä¸ªNode.jsç‰ˆæœ¬ä¸Šå·¥ä½œçš„åŸç”Ÿæ‰©å±•æ¨¡å—è€Œè®¾è®¡çš„APIã€‚</p><p>  ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå±•ç¤ºå¦‚ä½•åˆ›å»ºä¸€ä¸ªC++æ‰©å±•æ¨¡å—å¹¶åœ¨Node.jsä¸­ä½¿ç”¨å®ƒã€‚</p><p>  é¦–å…ˆï¼Œä½ éœ€è¦å®‰è£…ä¸€ä¸ªåä¸ºnode-gypçš„å·¥å…·ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨æ¥ç¼–è¯‘C++æ‰©å±•æ¨¡å—çš„å·¥å…·ï¼š</p><p>  npm install -g node-gyp<br>  ç„¶åï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºbinding.gypçš„æ–‡ä»¶ï¼Œå®ƒæè¿°äº†å¦‚ä½•æ„å»ºæ‰©å±•æ¨¡å—ï¼š</p>  <figure class="highlight gyp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;targets&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;target_name&quot;</span>: <span class="string">&quot;addon&quot;</span>,</span><br><span class="line">      <span class="string">&quot;sources&quot;</span>: [ <span class="string">&quot;addon.cc&quot;</span> ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  æ¥ä¸‹æ¥ï¼Œåˆ›å»ºä¸€ä¸ªC++æºæ–‡ä»¶ï¼Œä¾‹å¦‚addon.ccï¼Œå®ƒåŒ…å«äº†ä½ çš„C++ä»£ç ï¼š</p>  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;node.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> demo &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> v8::FunctionCallbackInfo;</span><br><span class="line"><span class="keyword">using</span> v8::Isolate;</span><br><span class="line"><span class="keyword">using</span> v8::Local;</span><br><span class="line"><span class="keyword">using</span> v8::NewStringType;</span><br><span class="line"><span class="keyword">using</span> v8::Object;</span><br><span class="line"><span class="keyword">using</span> v8::String;</span><br><span class="line"><span class="keyword">using</span> v8::Value;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Method</span><span class="params">(<span class="type">const</span> FunctionCallbackInfo&lt;Value&gt;&amp; args)</span> </span>&#123;</span><br><span class="line">  Isolate* isolate = args.<span class="built_in">GetIsolate</span>();</span><br><span class="line">  args.<span class="built_in">GetReturnValue</span>().<span class="built_in">Set</span>(String::<span class="built_in">NewFromUtf8</span>(isolate, <span class="string">&quot;world&quot;</span>, NewStringType::kNormal).<span class="built_in">ToLocalChecked</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Initialize</span><span class="params">(Local&lt;Object&gt; exports)</span> </span>&#123;</span><br><span class="line">  <span class="built_in">NODE_SET_METHOD</span>(exports, <span class="string">&quot;hello&quot;</span>, Method);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">NODE_MODULE</span>(NODE_GYP_MODULE_NAME, Initialize)</span><br><span class="line"></span><br><span class="line">&#125;  <span class="comment">// namespace demo</span></span><br></pre></td></tr></table></figure><p>  ç¡®ä¿åœ¨binding.gypæ–‡ä»¶çš„åŒä¸€ç›®å½•ä¸‹ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ„å»ºæ‰©å±•æ¨¡å—ï¼š<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node-gyp configure build</span><br></pre></td></tr></table></figure><br>  è¿™å°†ç”Ÿæˆä¸€ä¸ªç¼–è¯‘å¥½çš„æ‰©å±•æ¨¡å—ï¼Œä½ å¯ä»¥åœ¨Node.jsä¸­é€šè¿‡requireæ¥åŠ è½½å¹¶ä½¿ç”¨å®ƒï¼š</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> addon = <span class="built_in">require</span>(<span class="string">&#x27;./build/Release/addon.node&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(addon.<span class="title function_">hello</span>());  <span class="comment">// è¾“å‡º: world</span></span><br></pre></td></tr></table></figure><p>  åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒC++æ¨¡å—å¯¼å‡ºäº†ä¸€ä¸ªåä¸ºhelloçš„æ–¹æ³•ï¼Œå½“åœ¨Node.jsä¸­è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ—¶ï¼Œå®ƒè¿”å›å­—ç¬¦ä¸²â€worldâ€ã€‚</p><h1 id="ğŸ™‹â€â™€ï¸Node-js-å‡½æ•°"><a href="#ğŸ™‹â€â™€ï¸Node-js-å‡½æ•°" class="headerlink" title="ğŸ™‹â€â™€ï¸Node.js å‡½æ•°"></a>ğŸ™‹â€â™€ï¸Node.js å‡½æ•°</h1><p>  åœ¨ JavaScriptä¸­ï¼Œä¸€ä¸ªå‡½æ•°å¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°ã€‚æˆ‘ä»¬å¯ä»¥å…ˆå®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åä¼ é€’ï¼Œä¹Ÿå¯ä»¥åœ¨ä¼ é€’å‚æ•°çš„åœ°æ–¹ç›´æ¥å®šä¹‰å‡½æ•°ã€‚</p><p>  Node.js ä¸­å‡½æ•°çš„ä½¿ç”¨ä¸ JavaScript ç±»ä¼¼ï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œä½ å¯ä»¥è¿™æ ·åšï¼š<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">say</span>(<span class="params">word</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(word);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">execute</span>(<span class="params">someFunction, value</span>) &#123;</span><br><span class="line">  <span class="title function_">someFunction</span>(value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">execute</span>(say, <span class="string">&quot;Hello&quot;</span>);</span><br></pre></td></tr></table></figure><br>  ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬æŠŠ say å‡½æ•°ä½œä¸º execute å‡½æ•°çš„ç¬¬ä¸€ä¸ªå˜é‡è¿›è¡Œäº†ä¼ é€’ã€‚è¿™é‡Œä¼ é€’çš„ä¸æ˜¯ say çš„è¿”å›å€¼ï¼Œè€Œæ˜¯ say æœ¬èº«ï¼</p><p>  è¿™æ ·ä¸€æ¥ï¼Œ say å°±å˜æˆäº†execute ä¸­çš„æœ¬åœ°å˜é‡ someFunction ï¼Œexecute å¯ä»¥é€šè¿‡è°ƒç”¨ someFunction() ï¼ˆå¸¦æ‹¬å·çš„å½¢å¼ï¼‰æ¥ä½¿ç”¨ say å‡½æ•°ã€‚</p><p>  å½“ç„¶ï¼Œå› ä¸º say æœ‰ä¸€ä¸ªå˜é‡ï¼Œ execute åœ¨è°ƒç”¨ someFunction æ—¶å¯ä»¥ä¼ é€’è¿™æ ·ä¸€ä¸ªå˜é‡ã€‚</p><h2 id="åŒ¿åå‡½æ•°"><a href="#åŒ¿åå‡½æ•°" class="headerlink" title="åŒ¿åå‡½æ•°"></a>åŒ¿åå‡½æ•°</h2>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">execute</span>(<span class="params">someFunction, value</span>) &#123;</span><br><span class="line">  <span class="title function_">someFunction</span>(value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">execute</span>(<span class="keyword">function</span>(<span class="params">word</span>)&#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(word) &#125;, <span class="string">&quot;Hello&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>  ä¼ é€’<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&quot;http&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">onRequest</span>(<span class="params">request, response</span>) &#123;</span><br><span class="line">  response.<span class="title function_">writeHead</span>(<span class="number">200</span>, &#123;<span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;text/plain&quot;</span>&#125;);</span><br><span class="line">  response.<span class="title function_">write</span>(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">  response.<span class="title function_">end</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http.<span class="title function_">createServer</span>(onRequest).<span class="title function_">listen</span>(<span class="number">8888</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>  &#x3D;&#x3D;&gt;<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&quot;http&quot;</span>);</span><br><span class="line"></span><br><span class="line">http.<span class="title function_">createServer</span>(<span class="keyword">function</span>(<span class="params">request, response</span>) &#123;</span><br><span class="line">  response.<span class="title function_">writeHead</span>(<span class="number">200</span>, &#123;<span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;text/plain&quot;</span>&#125;);</span><br><span class="line">  response.<span class="title function_">write</span>(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">  response.<span class="title function_">end</span>();</span><br><span class="line">&#125;).<span class="title function_">listen</span>(<span class="number">8888</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h1 id="ğŸ™‹â€â™‚Node-js-ç®­å¤´å‡½æ•°"><a href="#ğŸ™‹â€â™‚Node-js-ç®­å¤´å‡½æ•°" class="headerlink" title="ğŸ™‹â€â™‚Node.js ç®­å¤´å‡½æ•°"></a>ğŸ™‹â€â™‚Node.js ç®­å¤´å‡½æ•°</h1><p>  åœ¨Node.jsä¸­ï¼Œç®­å¤´å‡½æ•°æ˜¯ä¸€ç§ç®€æ´å†™æ³•ï¼Œç”¨äºå£°æ˜åŒ¿åå‡½æ•°ã€‚å®ƒä»¬æœ€å¸¸ç”¨äºå›è°ƒå‡½æ•°å’Œäº‹ä»¶ç›‘å¬å™¨ç­‰åœºæ™¯ã€‚ç®­å¤´å‡½æ•°çš„è¯­æ³•å¾ˆç®€å•ï¼Œå®ƒçš„åŸºæœ¬æ ¼å¼å¦‚ä¸‹ï¼š<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(param1, param2, ...) =&gt; &#123;</span><br><span class="line">  <span class="comment">// å‡½æ•°ä½“</span></span><br><span class="line">  <span class="keyword">return</span> something;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">const</span> doubled = numbers.<span class="title function_">map</span>(<span class="function"><span class="params">number</span> =&gt;</span> number * <span class="number">2</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(doubled); <span class="comment">// è¾“å‡º: [2, 4, 6, 8, 10]</span></span><br></pre></td></tr></table></figure><br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hihihi.&#x27;</span>);</span><br><span class="line">&#125;, <span class="number">2000</span>);</span><br></pre></td></tr></table></figure><br>  ä»¥ä¸Šå†³ç­–å›¾çœ‹èµ·æ¥æœ‰ç‚¹å¤æ‚ï¼Œæˆ‘è®¤ä¸ºæœ‰ä¸‰ç‚¹æ¯”è¾ƒé‡è¦ï¼š</p><p>  ç®­å¤´å‡½æ•°é€‚åˆäºæ— å¤æ‚é€»è¾‘æˆ–è€…æ— å‰¯ä½œç”¨çš„çº¯å‡½æ•°åœºæ™¯ä¸‹ï¼Œä¾‹å¦‚ç”¨åœ¨ map ã€ reduce ã€ filter çš„å›è°ƒå‡½æ•°å®šä¹‰ä¸­ï¼›<br>  ä¸è¦åœ¨æœ€å¤–å±‚å®šä¹‰ç®­å¤´å‡½æ•°ï¼Œå› ä¸ºåœ¨å‡½æ•°å†…éƒ¨æ“ä½œ this ä¼šå¾ˆå®¹æ˜“æ±¡æŸ“å…¨å±€ä½œç”¨åŸŸã€‚æœ€èµ·ç åœ¨ç®­å¤´å‡½æ•°å¤–éƒ¨åŒ…ä¸€å±‚æ™®é€šå‡½æ•°ï¼Œå°† this æ§åˆ¶åœ¨å¯è§çš„èŒƒå›´å†…ï¼›<br>  å¦‚å¼€å¤´æ‰€è¿°ï¼Œç®­å¤´å‡½æ•°æœ€å¸å¼•äººçš„åœ°æ–¹æ˜¯ç®€æ´ã€‚åœ¨æœ‰å¤šå±‚å‡½æ•°åµŒå¥—çš„æƒ…å†µä¸‹ï¼Œç®­å¤´å‡½æ•°çš„ç®€æ´æ€§å¹¶æ²¡æœ‰å¾ˆå¤§çš„æå‡ï¼Œåè€Œå½±å“äº†å‡½æ•°çš„ä½œç”¨èŒƒå›´çš„è¯†åˆ«åº¦ï¼Œè¿™ç§æƒ…å†µä¸å»ºè®®ä½¿ç”¨ç®­å¤´å‡½æ•°ã€‚</p><h1 id="ğŸ§ªNode-js-è·¯ç”±"><a href="#ğŸ§ªNode-js-è·¯ç”±" class="headerlink" title="ğŸ§ªNode.js è·¯ç”±"></a>ğŸ§ªNode.js è·¯ç”±</h1><p>  åœ¨ Node.js ä¸­ï¼Œè·¯ç”±ï¼ˆRoutingï¼‰æ˜¯æŒ‡ç¡®å®šå¦‚ä½•å“åº”å¯¹ç‰¹å®šç«¯ç‚¹ï¼ˆURL è·¯å¾„ï¼‰çš„ HTTP è¯·æ±‚çš„è¿‡ç¨‹ã€‚</p><p>  æˆ‘ä»¬è¦ä¸ºè·¯ç”±æä¾›è¯·æ±‚çš„ URL å’Œå…¶ä»–éœ€è¦çš„ GET åŠ POST å‚æ•°ï¼Œéšåè·¯ç”±éœ€è¦æ ¹æ®è¿™äº›æ•°æ®æ¥æ‰§è¡Œç›¸åº”çš„ä»£ç ã€‚</p><p>  å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦æŸ¥çœ‹ HTTP è¯·æ±‚ï¼Œä»ä¸­æå–å‡ºè¯·æ±‚çš„ URL ä»¥åŠ GET&#x2F;POST å‚æ•°ã€‚è¿™ä¸€åŠŸèƒ½åº”å½“å±äºè·¯ç”±è¿˜æ˜¯æœåŠ¡å™¨ï¼ˆç”šè‡³ä½œä¸ºä¸€ä¸ªæ¨¡å—è‡ªèº«çš„åŠŸèƒ½ï¼‰ç¡®å®å€¼å¾—æ¢è®¨ï¼Œä½†è¿™é‡Œæš‚å®šå…¶ä¸ºæˆ‘ä»¬çš„HTTPæœåŠ¡å™¨çš„åŠŸèƒ½ã€‚</p><p>  æˆ‘ä»¬éœ€è¦çš„æ‰€æœ‰æ•°æ®éƒ½ä¼šåŒ…å«åœ¨ request å¯¹è±¡ä¸­ï¼Œè¯¥å¯¹è±¡ä½œä¸º onRequest() å›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ã€‚ä½†æ˜¯ä¸ºäº†è§£æè¿™äº›æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦é¢å¤–çš„ Node.JS æ¨¡å—ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ url å’Œ querystring æ¨¡å—ã€‚</p><pre><code>                url.parse(string).query                                        |        url.parse(string).pathname      |                    |                   |                    |                   |                  ------ -------------------</code></pre><p>  <a href="http://localhost:8888/start?foo=bar&hello=world">http://localhost:8888/start?foo=bar&amp;hello=world</a><br>                                  â€”       â€”â€“<br>                                  |          |<br>                                  |          |<br>                querystring.parse(queryString)[â€œfooâ€]    |<br>                                              |<br>                            querystring.parse(queryString)[â€œhelloâ€]<br>  ç°åœ¨æˆ‘ä»¬æ¥ç»™ onRequest() å‡½æ•°åŠ ä¸Šä¸€äº›é€»è¾‘ï¼Œç”¨æ¥æ‰¾å‡ºæµè§ˆå™¨è¯·æ±‚çš„ URL è·¯å¾„ï¼š</p><p>  router.js<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">route</span>(<span class="params">pathname</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;About to route a request for &quot;</span> + pathname);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">route</span> = route;</span><br></pre></td></tr></table></figure><br>  server.js<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&quot;http&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> url = <span class="built_in">require</span>(<span class="string">&quot;url&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">start</span>(<span class="params">route</span>) &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">onRequest</span>(<span class="params">request, response</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> pathname = url.<span class="title function_">parse</span>(request.<span class="property">url</span>).<span class="property">pathname</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Request for &quot;</span> + pathname + <span class="string">&quot; received.&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">route</span>(pathname);</span><br><span class="line"></span><br><span class="line">    response.<span class="title function_">writeHead</span>(<span class="number">200</span>, &#123;<span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;text/plain&quot;</span>&#125;);</span><br><span class="line">    response.<span class="title function_">write</span>(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">    response.<span class="title function_">end</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  http.<span class="title function_">createServer</span>(onRequest).<span class="title function_">listen</span>(<span class="number">8888</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Server has started.&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">start</span> = start;</span><br></pre></td></tr></table></figure></p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//test.js</span></span><br><span class="line"><span class="keyword">var</span> server = <span class="built_in">require</span>(<span class="string">&quot;./server&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> router = <span class="built_in">require</span>(<span class="string">&quot;./router&quot;</span>);</span><br><span class="line"></span><br><span class="line">server.<span class="title function_">start</span>(router.<span class="property">route</span>);</span><br></pre></td></tr></table></figure>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node  test.js </span><br></pre></td></tr></table></figure><h1 id="ğŸ™Node-js-å…¨å±€å¯¹è±¡"><a href="#ğŸ™Node-js-å…¨å±€å¯¹è±¡" class="headerlink" title="ğŸ™Node.js å…¨å±€å¯¹è±¡"></a>ğŸ™Node.js å…¨å±€å¯¹è±¡</h1><p>  javaScript ä¸­æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œç§°ä¸ºå…¨å±€å¯¹è±¡ï¼ˆGlobal Objectï¼‰ï¼Œå®ƒåŠå…¶æ‰€æœ‰å±æ€§éƒ½å¯ä»¥åœ¨ç¨‹åºçš„ä»»ä½•åœ°æ–¹è®¿é—®ï¼Œå³å…¨å±€å˜é‡ã€‚</p><p>  åœ¨æµè§ˆå™¨ JavaScript ä¸­ï¼Œé€šå¸¸ window æ˜¯å…¨å±€å¯¹è±¡ï¼Œ è€Œ Node.js ä¸­çš„å…¨å±€å¯¹è±¡æ˜¯ globalï¼Œæ‰€æœ‰å…¨å±€å˜é‡ï¼ˆé™¤äº† global æœ¬èº«ä»¥å¤–ï¼‰éƒ½æ˜¯ global å¯¹è±¡çš„å±æ€§ã€‚</p><p>  åœ¨ Node.js æˆ‘ä»¬å¯ä»¥ç›´æ¥è®¿é—®åˆ° global çš„å±æ€§ï¼Œè€Œä¸éœ€è¦åœ¨åº”ç”¨ä¸­åŒ…å«å®ƒã€‚</p><p>  å…¨å±€å¯¹è±¡ä¸å…¨å±€å˜é‡<br>  global æœ€æ ¹æœ¬çš„ä½œç”¨æ˜¯ä½œä¸ºå…¨å±€å˜é‡çš„å®¿ä¸»ã€‚æŒ‰ç…§ ECMAScript çš„å®šä¹‰ï¼Œæ»¡è¶³ä»¥ä¸‹æ¡ ä»¶çš„å˜é‡æ˜¯å…¨å±€å˜é‡ï¼š</p><p>  åœ¨æœ€å¤–å±‚å®šä¹‰çš„å˜é‡ï¼›<br>  å…¨å±€å¯¹è±¡çš„å±æ€§ï¼›<br>  éšå¼å®šä¹‰çš„å˜é‡ï¼ˆæœªå®šä¹‰ç›´æ¥èµ‹å€¼çš„å˜é‡ï¼‰ã€‚<br>  å½“ä½ å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡æ—¶ï¼Œè¿™ä¸ªå˜é‡åŒæ—¶ä¹Ÿä¼šæˆä¸ºå…¨å±€å¯¹è±¡çš„å±æ€§ï¼Œåä¹‹äº¦ç„¶ã€‚éœ€è¦æ³¨ æ„çš„æ˜¯ï¼Œåœ¨ Node.js ä¸­ä½ ä¸å¯èƒ½åœ¨æœ€å¤–å±‚å®šä¹‰å˜é‡ï¼Œå› ä¸ºæ‰€æœ‰ç”¨æˆ·ä»£ç éƒ½æ˜¯å±äºå½“å‰æ¨¡å—çš„ï¼Œ è€Œæ¨¡å—æœ¬èº«ä¸æ˜¯æœ€å¤–å±‚ä¸Šä¸‹æ–‡ã€‚</p><p>  æ³¨æ„ï¼š æœ€å¥½ä¸è¦ä½¿ç”¨ var å®šä¹‰å˜é‡ä»¥é¿å…å¼•å…¥å…¨å±€å˜é‡ï¼Œå› ä¸ºå…¨å±€å˜é‡ä¼šæ±¡æŸ“å‘½åç©ºé—´ï¼Œæé«˜ä»£ç çš„è€¦åˆé£é™©ã€‚</p><h2 id="filename"><a href="#filename" class="headerlink" title="__filename"></a>__filename</h2><p>  __filename è¡¨ç¤ºå½“å‰æ­£åœ¨æ‰§è¡Œçš„è„šæœ¬çš„æ–‡ä»¶åã€‚å®ƒå°†è¾“å‡ºæ–‡ä»¶æ‰€åœ¨ä½ç½®çš„ç»å¯¹è·¯å¾„ï¼Œä¸”å’Œå‘½ä»¤è¡Œå‚æ•°æ‰€æŒ‡å®šçš„æ–‡ä»¶åä¸ä¸€å®šç›¸åŒã€‚ å¦‚æœåœ¨æ¨¡å—ä¸­ï¼Œè¿”å›çš„å€¼æ˜¯æ¨¡å—æ–‡ä»¶çš„è·¯å¾„ã€‚</p><h2 id="dirname"><a href="#dirname" class="headerlink" title="__dirname"></a>__dirname</h2><p>  __dirname è¡¨ç¤ºå½“å‰æ‰§è¡Œè„šæœ¬æ‰€åœ¨çš„ç›®å½•ã€‚</p><h2 id="setTimeout-cb-ms"><a href="#setTimeout-cb-ms" class="headerlink" title="setTimeout(cb, ms)"></a>setTimeout(cb, ms)</h2><p>  setTimeout(cb, ms) å…¨å±€å‡½æ•°åœ¨æŒ‡å®šçš„æ¯«ç§’(ms)æ•°åæ‰§è¡ŒæŒ‡å®šå‡½æ•°(cb)ã€‚ï¼šsetTimeout() åªæ‰§è¡Œä¸€æ¬¡æŒ‡å®šå‡½æ•°ã€‚</p><h2 id="clearTimeout-t"><a href="#clearTimeout-t" class="headerlink" title="clearTimeout(t)"></a>clearTimeout(t)</h2><p>  clearTimeout( t ) å…¨å±€å‡½æ•°ç”¨äºåœæ­¢ä¸€ä¸ªä¹‹å‰é€šè¿‡ setTimeout() åˆ›å»ºçš„å®šæ—¶å™¨ã€‚ å‚æ•° t æ˜¯é€šè¿‡ setTimeout() å‡½æ•°åˆ›å»ºçš„å®šæ—¶å™¨ã€‚</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">printHello</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>( <span class="string">&quot;Hello, World!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸¤ç§’åæ‰§è¡Œä»¥ä¸Šå‡½æ•°</span></span><br><span class="line"><span class="keyword">var</span> t = <span class="built_in">setTimeout</span>(printHello, <span class="number">2000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¸…é™¤å®šæ—¶å™¨</span></span><br><span class="line"><span class="built_in">clearTimeout</span>(t);</span><br></pre></td></tr></table></figure><p>  æ‰§è¡Œ main.js æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤º:</p><h2 id="setInterval-cb-ms"><a href="#setInterval-cb-ms" class="headerlink" title="setInterval(cb, ms)"></a>setInterval(cb, ms)</h2><p>  setInterval(cb, ms) å…¨å±€å‡½æ•°åœ¨æŒ‡å®šçš„æ¯«ç§’(ms)æ•°åæ‰§è¡ŒæŒ‡å®šå‡½æ•°(cb)ã€‚</p><p>  è¿”å›ä¸€ä¸ªä»£è¡¨å®šæ—¶å™¨çš„å¥æŸ„å€¼ã€‚å¯ä»¥ä½¿ç”¨ clearInterval(t) å‡½æ•°æ¥æ¸…é™¤å®šæ—¶å™¨ã€‚</p><p>  setInterval() æ–¹æ³•ä¼šä¸åœåœ°è°ƒç”¨å‡½æ•°ï¼Œç›´åˆ° clearInterval() è¢«è°ƒç”¨æˆ–çª—å£è¢«å…³é—­ã€‚</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">printHello</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>( <span class="string">&quot;Hello, World!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸¤ç§’åæ‰§è¡Œä»¥ä¸Šå‡½æ•°</span></span><br><span class="line"><span class="built_in">setInterval</span>(printHello, <span class="number">2000</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="console"><a href="#console" class="headerlink" title="console"></a>console</h2><p>  console ç”¨äºæä¾›æ§åˆ¶å°æ ‡å‡†è¾“å‡ºï¼Œå®ƒæ˜¯ç”± Internet Explorer çš„ JScript å¼•æ“æä¾›çš„è°ƒè¯•å·¥å…·ï¼Œåæ¥é€æ¸æˆä¸ºæµè§ˆå™¨çš„å®æ–½æ ‡å‡†ã€‚</p><pre><code>console.logconsole.infoconsole.errorconsole.warn</code></pre><p>  console.time(label)<br>  è¾“å‡ºæ—¶é—´ï¼Œè¡¨ç¤ºè®¡æ—¶å¼€å§‹ã€‚<br>  console.timeEnd(label)<br>  ç»“æŸæ—¶é—´ï¼Œè¡¨ç¤ºè®¡æ—¶ç»“æŸã€‚<br>    console.trace</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;ç¨‹åºå¼€å§‹æ‰§è¡Œï¼š&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> counter = <span class="number">10</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è®¡æ•°: %d&quot;</span>, counter);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">time</span>(<span class="string">&quot;è·å–æ•°æ®&quot;</span>);</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++  )</span><br><span class="line">&#123;&#125;</span><br><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">timeEnd</span>(<span class="string">&#x27;è·å–æ•°æ®&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="process"><a href="#process" class="headerlink" title="process"></a>process</h2><p>  process æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå³ global å¯¹è±¡çš„å±æ€§ã€‚<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">process.<span class="title function_">on</span>(<span class="string">&#x27;exit&#x27;</span>, <span class="keyword">function</span>(<span class="params">code</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä»¥ä¸‹ä»£ç æ°¸è¿œä¸ä¼šæ‰§è¡Œ</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è¯¥ä»£ç ä¸ä¼šæ‰§è¡Œ&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">0</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;é€€å‡ºç ä¸º:&#x27;</span>, code);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ç¨‹åºæ‰§è¡Œç»“æŸ&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h2 id="Process-å±æ€§"><a href="#Process-å±æ€§" class="headerlink" title="Process å±æ€§"></a>Process å±æ€§</h2><p>  Process æä¾›äº†å¾ˆå¤šæœ‰ç”¨çš„å±æ€§ï¼Œä¾¿äºæˆ‘ä»¬æ›´å¥½çš„æ§åˆ¶ç³»ç»Ÿçš„äº¤äº’</p><pre><code>stdout</code></pre><p>  æ ‡å‡†è¾“å‡ºæµ<br>    stderr<br>  æ ‡å‡†é”™è¯¯æµã€‚<br>    stdin<br>  æ ‡å‡†è¾“å…¥æµã€‚<br>    argv<br>  argv å±æ€§è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œç”±å‘½ä»¤è¡Œæ‰§è¡Œè„šæœ¬æ—¶çš„å„ä¸ªå‚æ•°ç»„æˆã€‚å®ƒçš„ç¬¬ä¸€ä¸ªæˆå‘˜æ€»æ˜¯nodeï¼Œç¬¬äºŒä¸ªæˆå‘˜æ˜¯è„šæœ¬æ–‡ä»¶åï¼Œå…¶ä½™æˆå‘˜æ˜¯è„šæœ¬æ–‡ä»¶çš„å‚æ•°ã€‚<br>    execPath<br>  è¿”å›æ‰§è¡Œå½“å‰è„šæœ¬çš„ Node äºŒè¿›åˆ¶æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ã€‚<br>    execArgv<br>  è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å‘½ä»¤è¡Œä¸‹æ‰§è¡Œè„šæœ¬æ—¶ï¼Œåœ¨Nodeå¯æ‰§è¡Œæ–‡ä»¶ä¸è„šæœ¬æ–‡ä»¶ä¹‹é—´çš„å‘½ä»¤è¡Œå‚æ•°ã€‚<br>    env<br>  è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œæˆå‘˜ä¸ºå½“å‰ shell çš„ç¯å¢ƒå˜é‡<br>    exitCode<br>  è¿›ç¨‹é€€å‡ºæ—¶çš„ä»£ç ï¼Œå¦‚æœè¿›ç¨‹ä¼˜é€šè¿‡ process.exit() é€€å‡ºï¼Œä¸éœ€è¦æŒ‡å®šé€€å‡ºç ã€‚<br>    version<br>  Node çš„ç‰ˆæœ¬ï¼Œæ¯”å¦‚v0.10.18<br>    config<br>  ä¸€ä¸ªåŒ…å«ç”¨æ¥ç¼–è¯‘å½“å‰ node æ‰§è¡Œæ–‡ä»¶çš„ javascript é…ç½®é€‰é¡¹çš„å¯¹è±¡ã€‚å®ƒä¸è¿è¡Œ .&#x2F;configure è„šæœ¬ç”Ÿæˆçš„ â€œconfig.gypiâ€ æ–‡ä»¶ç›¸åŒã€‚<br>    pid<br>  å½“å‰è¿›ç¨‹çš„è¿›ç¨‹å·ã€‚<br>    title<br>  è¿›ç¨‹åï¼Œé»˜è®¤å€¼ä¸ºâ€nodeâ€ï¼Œå¯ä»¥è‡ªå®šä¹‰è¯¥å€¼ã€‚<br>    platform<br>  è¿è¡Œç¨‹åºæ‰€åœ¨çš„å¹³å°ç³»ç»Ÿ â€˜darwinâ€™, â€˜freebsdâ€™, â€˜linuxâ€™, â€˜sunosâ€™ æˆ– â€˜win32â€™<br>    arch<br>  å½“å‰ CPU çš„æ¶æ„ï¼šâ€™armâ€™ã€â€™ia32â€™ æˆ–è€… â€˜x64â€™ã€‚<br>    mainModule<br>  require.main çš„å¤‡é€‰æ–¹æ³•ã€‚ä¸åŒç‚¹ï¼Œå¦‚æœä¸»æ¨¡å—åœ¨è¿è¡Œæ—¶æ”¹å˜ï¼Œrequire.mainå¯èƒ½ä¼šç»§ç»­è¿”å›è€çš„æ¨¡å—ã€‚å¯ä»¥è®¤ä¸ºï¼Œè¿™ä¸¤è€…å¼•ç”¨äº†åŒä¸€ä¸ªæ¨¡å—ã€‚</p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¾“å‡ºåˆ°ç»ˆç«¯</span></span><br><span class="line">process.<span class="property">stdout</span>.<span class="title function_">write</span>(<span class="string">&quot;Hello World!&quot;</span> + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line"><span class="comment">// é€šè¿‡å‚æ•°è¯»å–</span></span><br><span class="line">process.<span class="property">argv</span>.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">val, index, array</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(index + <span class="string">&#x27;: &#x27;</span> + val);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// è·å–æ‰§è¡Œè·¯å¾„</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(process.<span class="property">execPath</span>);</span><br><span class="line"><span class="comment">// å¹³å°ä¿¡æ¯</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(process.<span class="property">platform</span>);</span><br><span class="line"><span class="comment">// è¾“å‡ºå½“å‰ç›®å½•</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å½“å‰ç›®å½•: &#x27;</span> + process.<span class="title function_">cwd</span>());</span><br><span class="line"><span class="comment">// è¾“å‡ºå½“å‰ç‰ˆæœ¬</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å½“å‰ç‰ˆæœ¬: &#x27;</span> + process.<span class="property">version</span>);</span><br><span class="line"><span class="comment">// è¾“å‡ºå†…å­˜ä½¿ç”¨æƒ…å†µ</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(process.<span class="title function_">memoryUsage</span>());</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="ğŸ”­Node-js-MySQL"><a href="#ğŸ”­Node-js-MySQL" class="headerlink" title="ğŸ”­Node.js MySQL"></a>ğŸ”­Node.js MySQL</h1>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install mysql</span><br></pre></td></tr></table></figure><p>  select </p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> mysql  = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>);  </span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> connection = mysql.<span class="title function_">createConnection</span>(&#123;     </span><br><span class="line">  host     : <span class="string">&#x27;localhost&#x27;</span>,       </span><br><span class="line">  user     : <span class="string">&#x27;root&#x27;</span>,              </span><br><span class="line">  password : <span class="string">&#x27;123456789&#x27;</span>,   <span class="comment">//pwd  </span></span><br><span class="line">  <span class="attr">port</span>: <span class="string">&#x27;30306&#x27;</span>,                   </span><br><span class="line">  <span class="attr">database</span>: <span class="string">&#x27;IMDB&#x27;</span> </span><br><span class="line">&#125;); </span><br><span class="line"></span><br><span class="line">connection.<span class="title function_">connect</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span>  sql = <span class="string">&#x27;SELECT * FROM IMConfig;&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(sql);</span><br><span class="line"><span class="comment">//æŸ¥</span></span><br><span class="line">connection.<span class="title function_">query</span>(sql,<span class="keyword">function</span> (<span class="params">err, result</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[SELECT ERROR] - &#x27;</span>,err.<span class="property">message</span>);</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;--------------------------SELECT----------------------------&#x27;</span>);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(result);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;------------------------------------------------------------\n\n&#x27;</span>);  </span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">connection.<span class="title function_">end</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="ERROR-1045-28000-Access-denied-for-user-â€˜rootâ€˜-â€˜localhostâ€˜-using-password-YES"><a href="#ERROR-1045-28000-Access-denied-for-user-â€˜rootâ€˜-â€˜localhostâ€˜-using-password-YES" class="headerlink" title="ERROR 1045 (28000): Access denied for user â€˜rootâ€˜@â€˜localhostâ€˜ (using password: YES)"></a>ERROR 1045 (28000): Access denied for user â€˜rootâ€˜@â€˜localhostâ€˜ (using password: YES)</h2><p>  è¿™è¾¹æ˜¯é€šè¿‡dockerå®‰è£…çš„mysqlï¼Œç™»å½•æŠ¥é”™<br>  root@f4a3881e5f06:&#x2F;# mysql -uroot  -p<br>  Enter password: 123456<br>  ERROR 1045 (28000): Access denied for user â€˜rootâ€˜@â€™localhostâ€™ (using password: YES)</p><p>  å¦‚æœå¸¸è§„çš„å‘½ä»¤ mysql -uroot -pæ— æ³•ç™»å½•ï¼Œä½¿ç”¨å‘½ä»¤å°è¯•ï¼š</p><p>  mysql -u root -h 127.0.0.1 -p</p><h2 id="Error-ER-NOT-SUPPORTED-AUTH-MODE-Client-does-not-support-authentication-protocol-requested"><a href="#Error-ER-NOT-SUPPORTED-AUTH-MODE-Client-does-not-support-authentication-protocol-requested" class="headerlink" title="Error: ER_NOT_SUPPORTED_AUTH_MODE: Client does not support authentication protocol requested"></a>Error: ER_NOT_SUPPORTED_AUTH_MODE: Client does not support authentication protocol requested</h2><p>  mysql -u root -p<br>  ALTER USER â€˜rootâ€˜@â€™%â€™ IDENTIFIED WITH mysql_native_password BY â€˜123456789â€™;<br>  flush privileges;</p><p>  insert<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">connection.<span class="title function_">connect</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span>  addSql = <span class="string">&#x27;INSERT INTO IMConfig(ConfigID,UserID,ConfigName,ConfigCreateTime,ConfigType,ConfigSn) VALUES(0,?,?,?,?,?)&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span>  addSqlParams = [<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;11&#x27;</span>,<span class="string">&#x27;2023-01-01&#x27;</span>, <span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;1&#x27;</span>];</span><br><span class="line"><span class="comment">//å¢</span></span><br><span class="line">connection.<span class="title function_">query</span>(addSql,addSqlParams,<span class="keyword">function</span> (<span class="params">err, result</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[INSERT ERROR] - &#x27;</span>,err.<span class="property">message</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">        &#125;        </span><br><span class="line"></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;--------------------------INSERT----------------------------&#x27;</span>);</span><br><span class="line">      <span class="comment">//console.log(&#x27;INSERT ID:&#x27;,result.insertId);        </span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;INSERT ID:&#x27;</span>,result);        </span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;-----------------------------------------------------------------\n\n&#x27;</span>);  </span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">connection.<span class="title function_">end</span>();</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p><p>  ER_NO_SUCH_TABLE: Table â€˜IMDB.IMCONFIGâ€™ doesnâ€™t exist<br>  ä¸­è‹±æ–‡é”™è¯¯<br>  ER_WRONG_VALUE_COUNT_ON_ROW: Column count doesnâ€™t match value count at row 1<br>  å­—æ®µé”™è¯¯<br>  ER_TRUNCATED_WRONG_VALUE: Incorrect datetime value: â€˜2023-01-01T16:00:00.000Zâ€™ for column â€˜ConfigCreateTimeâ€™ at row 1<br>  å­—æ®µç±»å‹</p><p>  update<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//update </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">connection.<span class="title function_">connect</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> modSql = <span class="string">&#x27;UPDATE IMConfig SET ConfigName = ?,ConfigType = ?,ConfigSn = ? WHERE ConfigId = ?&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> modSqlParams = [<span class="string">&#x27;lang&#x27;</span>, <span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;1&#x27;</span>,<span class="number">5</span>];</span><br><span class="line"><span class="comment">//æ”¹</span></span><br><span class="line">connection.<span class="title function_">query</span>(modSql,modSqlParams,<span class="keyword">function</span> (<span class="params">err, result</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span>(err)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[UPDATE ERROR] - &#x27;</span>,err.<span class="property">message</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">  &#125;        </span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;--------------------------UPDATE----------------------------&#x27;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;UPDATE affectedRows&#x27;</span>,result.<span class="property">affectedRows</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;-----------------------------------------------------------------\n\n&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">connection.<span class="title function_">end</span>();</span><br></pre></td></tr></table></figure><br>  delete<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">connection.<span class="title function_">connect</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> delSql = <span class="string">&#x27;DELETE FROM IMConfig where ConfigID=5&#x27;</span>;</span><br><span class="line"><span class="comment">//åˆ </span></span><br><span class="line">connection.<span class="title function_">query</span>(delSql,<span class="keyword">function</span> (<span class="params">err, result</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[DELETE ERROR] - &#x27;</span>,err.<span class="property">message</span>);</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;        </span><br><span class="line"></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;--------------------------DELETE----------------------------&#x27;</span>);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;DELETE affectedRows&#x27;</span>,result.<span class="property">affectedRows</span>);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;-----------------------------------------------------------------\n\n&#x27;</span>);  </span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">connection.<span class="title function_">end</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure></p><h1 id="ğŸ§µNode-js-Socket"><a href="#ğŸ§µNode-js-Socket" class="headerlink" title="ğŸ§µNode.js Socket"></a>ğŸ§µNode.js Socket</h1><p>  socket client </p>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//sk</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> net = <span class="built_in">require</span>(<span class="string">&#x27;net&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> client = net.<span class="title function_">connect</span>(<span class="string">&#x27;6001&#x27;</span>, <span class="string">&#x27;xxxx&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å·²ç»ä¸æœåŠ¡å™¨è¿æ¥&#x27;</span>);</span><br><span class="line">    client.<span class="title function_">write</span>(<span class="string">&#x27;Yes\r\n&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">client.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="keyword">function</span>(<span class="params">data</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data.<span class="title function_">toString</span>());</span><br><span class="line">    client.<span class="title function_">end</span>();<span class="comment">//one msg end</span></span><br><span class="line">&#125;);</span><br><span class="line">client.<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å®¢æˆ·ç«¯è¿æ¥ä¸­æ–­&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Node.js </tag>
            
            <tag> helloworld </tag>
            
            <tag> event </tag>
            
            <tag> buffer </tag>
            
            <tag> stream </tag>
            
            <tag> c++ </tag>
            
            <tag> router </tag>
            
            <tag> mysql </tag>
            
            <tag> socket </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HarmonyOS Photos Column Swiper Grid</title>
      <link href="/2024/05/16/HarmonyOS-Photos/"/>
      <url>/2024/05/16/HarmonyOS-Photos/</url>
      
        <content type="html"><![CDATA[<p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources/v2/20240516.jpg"></p><h1 id="âœ¨ï¸index"><a href="#âœ¨ï¸index" class="headerlink" title="âœ¨ï¸index"></a>âœ¨ï¸index</h1><p>title swiper list(grid) </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> coms <span class="keyword">from</span> <span class="string">&#x27;../pages/com&#x27;</span></span><br><span class="line">@<span class="title class_">Entry</span></span><br><span class="line">@<span class="title class_">Component</span></span><br><span class="line">struct <span class="title class_">Index</span> &#123;</span><br><span class="line">  @<span class="title class_">State</span> <span class="attr">message</span>: string = <span class="string">&#x27;Hello World1&#x27;</span></span><br><span class="line"><span class="comment">//private  list = new con</span></span><br><span class="line">  <span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Column</span>() &#123;</span><br><span class="line">      <span class="comment">//æ ‡é¢˜</span></span><br><span class="line">      <span class="title class_">Row</span>()&#123;</span><br><span class="line">        <span class="title class_">Text</span>(<span class="string">&#x27;photos&#x27;</span>)</span><br><span class="line">        .<span class="title function_">fontSize</span>(<span class="string">&#x27;30fp&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">justifyContent</span>(<span class="title class_">FlexAlign</span>.<span class="property">Start</span>)</span><br><span class="line">      .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">      .<span class="title function_">padding</span>(<span class="string">&#x27;12vp&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="comment">//è½®æ’­</span></span><br><span class="line">        <span class="title class_">Swiper</span>() &#123;</span><br><span class="line">        <span class="title class_">ForEach</span>(coms.<span class="property">SWIPERLIST</span>,<span class="function">(<span class="params">item:Resource,index?:<span class="built_in">Number</span></span>)=&gt;</span>&#123;</span><br><span class="line">          <span class="title class_">Row</span>() &#123;</span><br><span class="line">            <span class="title class_">Image</span>(item)</span><br><span class="line"></span><br><span class="line">          &#125;</span><br><span class="line">          .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">          .<span class="title function_">aspectRatio</span>(<span class="number">1.6</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">          &#125;</span><br><span class="line">        .<span class="title function_">autoPlay</span>(<span class="literal">true</span>)</span><br><span class="line">        .<span class="title function_">loop</span>(<span class="literal">true</span>)</span><br><span class="line">        .<span class="title function_">indicator</span>(<span class="literal">true</span>)</span><br><span class="line">        .<span class="title function_">duration</span>(<span class="number">1000</span>)</span><br><span class="line">        .<span class="title function_">itemSpace</span>(<span class="number">10</span>)</span><br><span class="line">        .<span class="title function_">borderRadius</span>(<span class="string">&#x27;12vp&#x27;</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(<span class="string">&#x27;12vp&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onChange</span>(<span class="function">(<span class="params">index: number</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="comment">//åˆ—è¡¨</span></span><br><span class="line">      <span class="title class_">Grid</span>()&#123;</span><br><span class="line"></span><br><span class="line">        <span class="title class_">GridItem</span>()&#123;</span><br><span class="line">          <span class="title class_">Column</span>()&#123;</span><br><span class="line"></span><br><span class="line">            <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.icon&#x27;</span>))</span><br><span class="line">              .<span class="title function_">borderRadius</span>(<span class="number">2</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title class_">GridItem</span>()&#123;</span><br><span class="line">          <span class="title class_">Column</span>()&#123;</span><br><span class="line"></span><br><span class="line">            <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.icon&#x27;</span>))</span><br><span class="line">              .<span class="title function_">borderRadius</span>(<span class="number">2</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title class_">GridItem</span>()&#123;</span><br><span class="line">          <span class="title class_">Column</span>()&#123;</span><br><span class="line"></span><br><span class="line">            <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.icon&#x27;</span>))</span><br><span class="line">              .<span class="title function_">borderRadius</span>(<span class="number">2</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title class_">GridItem</span>()&#123;</span><br><span class="line">          <span class="title class_">Column</span>()&#123;</span><br><span class="line"></span><br><span class="line">            <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.44&#x27;</span>))</span><br><span class="line">              .<span class="title function_">borderRadius</span>(<span class="number">2</span>)</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">columnsTemplate</span>(<span class="string">&#x27;1fr 1fr&#x27;</span>)</span><br><span class="line">      .<span class="title function_">columnsGap</span>(<span class="string">&#x27;12vp&#x27;</span>)</span><br><span class="line">      .<span class="title function_">rowsGap</span>(<span class="string">&#x27;12vp&#x27;</span>)</span><br><span class="line"></span><br><span class="line">      <span class="comment">//.padding(&#x27;2vp&#x27;)</span></span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">width</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line">    .<span class="title function_">height</span>(<span class="string">&#x27;100%&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ ¸å¿ƒGridçš„</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.<span class="title function_">columnsTemplate</span>(<span class="string">&#x27;1fr 1fr  &#x27;</span>)    </span><br></pre></td></tr></table></figure><p>è½®æ’­æ•°æ® åˆå¹¶data<br>data</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">class</span> <span class="title class_">com</span>&#123;</span><br><span class="line">  <span class="keyword">static</span>  <span class="attr">SWIPERLIST</span>:<span class="title class_">Array</span>&lt;<span class="title class_">Resource</span>&gt;=[</span><br><span class="line">    $r(<span class="string">&#x27;app.media.11&#x27;</span>),</span><br><span class="line">    $r(<span class="string">&#x27;app.media.22&#x27;</span>),</span><br><span class="line">    $r(<span class="string">&#x27;app.media.33&#x27;</span>),</span><br><span class="line">    $r(<span class="string">&#x27;app.media.44&#x27;</span>),</span><br><span class="line">    $r(<span class="string">&#x27;app.media.11&#x27;</span>)</span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆ—è¡¨æ•°æ® </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">static</span>  <span class="variable constant_">IMGLIST</span> :<span class="title class_">Resource</span>[][]=[</span><br><span class="line"> [</span><br><span class="line">    $r(<span class="string">&#x27;app.media.11&#x27;</span>),</span><br><span class="line">    $r(<span class="string">&#x27;app.media.22&#x27;</span>),</span><br><span class="line">    $r(<span class="string">&#x27;app.media.33&#x27;</span>),</span><br><span class="line">    $r(<span class="string">&#x27;app.media.44&#x27;</span>),</span><br><span class="line">    $r(<span class="string">&#x27;app.media.11&#x27;</span>)],</span><br><span class="line"></span><br><span class="line">    [</span><br><span class="line">    $r(<span class="string">&#x27;app.media.22&#x27;</span>),</span><br><span class="line">    $r(<span class="string">&#x27;app.media.11&#x27;</span>),</span><br><span class="line">    $r(<span class="string">&#x27;app.media.33&#x27;</span>),</span><br><span class="line">    $r(<span class="string">&#x27;app.media.44&#x27;</span>),</span><br><span class="line">    $r(<span class="string">&#x27;app.media.11&#x27;</span>)]</span><br><span class="line"></span><br><span class="line">    ,</span><br><span class="line">    [</span><br><span class="line">    $r(<span class="string">&#x27;app.media.44&#x27;</span>),</span><br><span class="line">    $r(<span class="string">&#x27;app.media.11&#x27;</span>),</span><br><span class="line">    $r(<span class="string">&#x27;app.media.33&#x27;</span>),</span><br><span class="line">    $r(<span class="string">&#x27;app.media.44&#x27;</span>),</span><br><span class="line">    $r(<span class="string">&#x27;app.media.11&#x27;</span>)]</span><br><span class="line">    ,</span><br><span class="line">    [</span><br><span class="line">    $r(<span class="string">&#x27;app.media.33&#x27;</span>),</span><br><span class="line">    $r(<span class="string">&#x27;app.media.11&#x27;</span>),</span><br><span class="line">    $r(<span class="string">&#x27;app.media.33&#x27;</span>),</span><br><span class="line">    $r(<span class="string">&#x27;app.media.44&#x27;</span>),</span><br><span class="line">    $r(<span class="string">&#x27;app.media.11&#x27;</span>)]</span><br><span class="line"></span><br><span class="line">  ]</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line">     <span class="title class_">ForEach</span>(coms.<span class="property">IMGLIST</span>,<span class="function">(<span class="params">item:<span class="built_in">Array</span>&lt; Resource&gt;,index?:<span class="built_in">Number</span></span>)=&gt;</span>&#123;</span><br><span class="line">          <span class="title class_">GridItem</span>()&#123;</span><br><span class="line">            <span class="title class_">Column</span>()&#123;</span><br><span class="line"></span><br><span class="line">              <span class="title class_">Image</span>(item[<span class="number">0</span>])</span><br><span class="line">                .<span class="title function_">borderRadius</span>(<span class="number">2</span>)</span><br><span class="line">                .<span class="title function_">aspectRatio</span>(<span class="number">1.6</span>)</span><br><span class="line">                .<span class="title function_">borderRadius</span>(<span class="string">&#x27;5vp&#x27;</span>)</span><br><span class="line">                .<span class="title function_">margin</span>(<span class="string">&#x27;5vp&#x27;</span>)</span><br><span class="line">             <span class="comment">//   .padding(&#x27;5vp&#x27;)</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br></pre></td></tr></table></figure><h1 id="ğŸˆpagelist-p2"><a href="#ğŸˆpagelist-p2" class="headerlink" title="ğŸˆpagelist p2"></a>ğŸˆpagelist p2</h1><p>router<br>P2</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.<span class="title function_">onClick</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">         router.<span class="title function_">pushUrl</span>(&#123;</span><br><span class="line">           <span class="attr">url</span>:<span class="string">&#x27;pages/ListPage&#x27;</span>,</span><br><span class="line">             <span class="attr">params</span>:&#123;<span class="attr">ptitem</span>:item&#125;</span><br><span class="line">         &#125;)</span><br><span class="line">       &#125;)</span><br></pre></td></tr></table></figure><p>main_pages.jsé…ç½®è·¯ç”± </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">//ts Record</span></span><br><span class="line">  <span class="attr">item</span>:<span class="title class_">Array</span>&lt;<span class="title class_">Resource</span>&gt; =    (router.<span class="title function_">getParams</span>() <span class="keyword">as</span> <span class="title class_">Record</span>&lt;string, <span class="title class_">Array</span>&lt;<span class="title class_">Resource</span>&gt;&gt;).<span class="property">item</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"></span><br><span class="line">    <span class="title class_">Navigation</span>()&#123;</span><br><span class="line"></span><br><span class="line">      <span class="title class_">Grid</span>()</span><br><span class="line">      &#123;</span><br><span class="line"></span><br><span class="line">        <span class="title class_">ForEach</span>(<span class="variable language_">this</span>.<span class="property">item</span>,<span class="function">(<span class="params">item2: Resource,index?:<span class="built_in">Number</span></span>)=&gt;</span> &#123;</span><br><span class="line">          <span class="title class_">GridItem</span>() &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="title class_">Image</span>(item2)</span><br><span class="line"></span><br><span class="line">              .<span class="title function_">borderRadius</span>(<span class="number">2</span>)</span><br><span class="line">              .<span class="title function_">aspectRatio</span>(<span class="number">1.6</span>)</span><br><span class="line">              .<span class="title function_">borderRadius</span>(<span class="string">&#x27;5vp&#x27;</span>)</span><br><span class="line">              .<span class="title function_">margin</span>(<span class="string">&#x27;5vp&#x27;</span>)</span><br><span class="line">            <span class="comment">//   .padding(&#x27;5vp&#x27;)</span></span><br><span class="line"></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      .<span class="title function_">columnsTemplate</span>(<span class="string">&#x27;1fr 1fr 1fr&#x27;</span>)</span><br><span class="line">      .<span class="title function_">columnsGap</span>(<span class="number">5</span>)</span><br><span class="line">      .<span class="title function_">rowsGap</span>(<span class="number">5</span>)</span><br><span class="line">      .<span class="title function_">margin</span>(<span class="string">&#x27;12vp&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    .<span class="title function_">title</span>(<span class="string">&#x27;p2&#x27;</span>)</span><br><span class="line">    .<span class="title function_">hideNavBar</span>(<span class="literal">false</span>)</span><br><span class="line">    .<span class="title function_">titleMode</span>(<span class="title class_">NavigationTitleMode</span>.<span class="property">Mini</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p> hmosé‡Œé¢çš„console.log<br> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//log</span></span><br><span class="line">  hilog.<span class="title function_">info</span>(<span class="number">0x0000</span>,<span class="string">&#x27;image&#x27;</span>,<span class="string">&#x27;abc&#x27;</span>);</span><br></pre></td></tr></table></figure></p><h1 id="ğŸª„page-p3"><a href="#ğŸª„page-p3" class="headerlink" title="ğŸª„page p3"></a>ğŸª„page p3</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">item3</span>:<span class="title class_">Resource</span> =    (router.<span class="title function_">getParams</span>() <span class="keyword">as</span> <span class="title class_">Record</span>&lt;string, <span class="title class_">Resource</span>&gt;).<span class="property">item3</span>;<span class="comment">// []</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="title function_">build</span>(<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="title class_">Navigation</span>()&#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      <span class="title class_">Image</span>(<span class="variable language_">this</span>.<span class="property">item3</span>)</span><br><span class="line"></span><br><span class="line">        .<span class="title function_">borderRadius</span>(<span class="number">2</span>)</span><br><span class="line">        .<span class="title function_">aspectRatio</span>(<span class="number">1.6</span>)</span><br><span class="line">        .<span class="title function_">borderRadius</span>(<span class="string">&#x27;5vp&#x27;</span>)</span><br><span class="line">        .<span class="title function_">margin</span>(<span class="string">&#x27;5vp&#x27;</span>)</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  .<span class="title function_">title</span>(<span class="string">&#x27;p3&#x27;</span>)</span><br><span class="line">  .<span class="title function_">hideNavBar</span>(<span class="literal">false</span>)</span><br><span class="line">  .<span class="title function_">titleMode</span>(<span class="title class_">NavigationTitleMode</span>.<span class="property">Mini</span>)</span><br></pre></td></tr></table></figure><p>å¤‡æ³¨<br> Imageç»„ä»¶å…±æœ‰ä»¥ä¸‹ä¸‰ç§å£°æ˜æ–¹å¼ï¼š<br>ï¼ˆ1ï¼‰stringæ ¼å¼ï¼Œé€šå¸¸ç”¨æ¥åŠ è½½ç½‘ç»œå›¾ç‰‡ï¼Œè‹¥éƒ¨ç½²åœ¨çœŸå®è®¾å¤‡ä¸Šï¼Œéœ€è¦ç”³è¯·ç½‘ç»œè®¿é—®æƒé™<br>     Imageï¼ˆâ€URLâ€ï¼‰<br>ï¼ˆ2ï¼‰PixelMapæ ¼å¼ï¼Œå¯ä»¥åŠ è½½åƒç´ å›¾ï¼Œå¸¸ç”¨åœ¨å›¾ç‰‡ç¼–è¾‘ä¸­<br>     Imageï¼ˆpixelMapObjectï¼‰<br>ï¼ˆ3ï¼‰Resourceæ ¼å¼ï¼ŒåŠ è½½æœ¬åœ°å›¾ç‰‡ï¼ˆæ¨èï¼‰<br>     Image($r(â€˜app.media.xxxâ€™))ä¸éœ€è¦å¸¦åç¼€å åœ°å€ï¼šsrc&#x2F;main&#x2F;resources&#x2F;base&#x2F;media<br>     Image($rawfile(xxx.png))éœ€è¦åç¼€ï¼Œåœ°å€ï¼šsrc&#x2F;main&#x2F;resources&#x2F;rawfile</p><p>end</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>.NET AES DES</title>
      <link href="/2024/05/15/NET-ASE-DES/"/>
      <url>/2024/05/15/NET-ASE-DES/</url>
      
        <content type="html"><![CDATA[<p>.NET AES DES å¯¹ç§°åŠ å¯†</p><h1 id="ASE-åŠ å¯†è§£å¯†"><a href="#ASE-åŠ å¯†è§£å¯†" class="headerlink" title="ASE åŠ å¯†è§£å¯†"></a>ASE åŠ å¯†è§£å¯†</h1><p>åŠ å¯†æ–¹æ³• (Encrypt):</p><p>åˆ›å»ºä¸€ä¸ª Aes å®ä¾‹ã€‚<br>è®¾ç½®å¯†é’¥ (Key) å’Œåˆå§‹åŒ–å‘é‡ (IV)ã€‚<br>ä½¿ç”¨ CreateEncryptor åˆ›å»ºåŠ å¯†å™¨ã€‚<br>é€šè¿‡ CryptoStream å’Œ StreamWriter å°†æ˜æ–‡å†™å…¥å†…å­˜æµï¼Œç„¶åè½¬æ¢ä¸º Base64 å­—ç¬¦ä¸²ã€‚</p><p>è§£å¯†æ–¹æ³• (Decrypt):</p><p>åŒæ ·åˆ›å»ºä¸€ä¸ª Aes å®ä¾‹ã€‚<br>è®¾ç½®ç›¸åŒçš„å¯†é’¥å’Œåˆå§‹åŒ–å‘é‡ã€‚<br>ä½¿ç”¨ CreateDecryptor åˆ›å»ºè§£å¯†å™¨ã€‚<br>é€šè¿‡ CryptoStream å’Œ StreamReader ä»å†…å­˜æµè¯»å–å¯†æ–‡å¹¶è§£å¯†ä¸ºæ˜æ–‡ã€‚</p><p>æ³¨æ„äº‹é¡¹<br>å¯†é’¥é•¿åº¦ï¼šAES æ”¯æŒ 128, 192, å’Œ 256 ä½å¯†é’¥ã€‚æœ¬ä¾‹ä½¿ç”¨ 256 ä½ï¼ˆ32 å­—èŠ‚ï¼‰ã€‚<br>åˆå§‹åŒ–å‘é‡ (IV)ï¼šåº”ç¡®ä¿åŠ å¯†å’Œè§£å¯†æ—¶ä½¿ç”¨ç›¸åŒçš„ IVã€‚æœ¬ä¾‹ä¸­ä½¿ç”¨äº†å…¨é›¶çš„ IVï¼Œåœ¨å®é™…åº”ç”¨ä¸­å»ºè®®ä½¿ç”¨éšæœº IVï¼Œå¹¶å°†å…¶ä¸å¯†æ–‡ä¸€èµ·å­˜å‚¨ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.IO;</span><br><span class="line"><span class="keyword">using</span> System.Security.Cryptography;</span><br><span class="line"><span class="keyword">using</span> System.Text;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">SymmetricEncryption</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// åŠ å¯†æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">string</span> <span class="title">Encrypt</span>(<span class="params"><span class="built_in">string</span> plainText, <span class="built_in">string</span> key</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">using</span> (Aes aesAlg = Aes.Create())</span><br><span class="line">        &#123;</span><br><span class="line">            aesAlg.Key = Encoding.UTF8.GetBytes(key);</span><br><span class="line">            aesAlg.IV = <span class="keyword">new</span> <span class="built_in">byte</span>[<span class="number">16</span>]; <span class="comment">// åˆå§‹åŒ–å‘é‡ (IV) å¯ä»¥è®¾ä¸ºå…¨é›¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨éšæœºå€¼</span></span><br><span class="line">            </span><br><span class="line">            ICryptoTransform encryptor = aesAlg.CreateEncryptor(aesAlg.Key, aesAlg.IV);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">using</span> (MemoryStream msEncrypt = <span class="keyword">new</span> MemoryStream())</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">using</span> (CryptoStream csEncrypt = <span class="keyword">new</span> CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write))</span><br><span class="line">                <span class="keyword">using</span> (StreamWriter swEncrypt = <span class="keyword">new</span> StreamWriter(csEncrypt))</span><br><span class="line">                &#123;</span><br><span class="line">                    swEncrypt.Write(plainText);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> Convert.ToBase64String(msEncrypt.ToArray());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è§£å¯†æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">string</span> <span class="title">Decrypt</span>(<span class="params"><span class="built_in">string</span> cipherText, <span class="built_in">string</span> key</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">using</span> (Aes aesAlg = Aes.Create())</span><br><span class="line">        &#123;</span><br><span class="line">            aesAlg.Key = Encoding.UTF8.GetBytes(key);</span><br><span class="line">            aesAlg.IV = <span class="keyword">new</span> <span class="built_in">byte</span>[<span class="number">16</span>]; <span class="comment">// ä¸åŠ å¯†æ—¶ä½¿ç”¨ç›¸åŒçš„ IV</span></span><br><span class="line">            </span><br><span class="line">            ICryptoTransform decryptor = aesAlg.CreateDecryptor(aesAlg.Key, aesAlg.IV);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">using</span> (MemoryStream msDecrypt = <span class="keyword">new</span> MemoryStream(Convert.FromBase64String(cipherText)))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">using</span> (CryptoStream csDecrypt = <span class="keyword">new</span> CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Read))</span><br><span class="line">                <span class="keyword">using</span> (StreamReader srDecrypt = <span class="keyword">new</span> StreamReader(csDecrypt))</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">return</span> srDecrypt.ReadToEnd();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¤ºä¾‹ä¸»æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">string</span> original = <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line">        <span class="built_in">string</span> key = <span class="string">&quot;thisisaverysecretkey1234&quot;</span>; <span class="comment">// 32 å­—èŠ‚çš„å¯†é’¥</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// åŠ å¯†</span></span><br><span class="line">        <span class="built_in">string</span> encrypted = Encrypt(original, key);</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;Encrypted: <span class="subst">&#123;encrypted&#125;</span>&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è§£å¯†</span></span><br><span class="line">        <span class="built_in">string</span> decrypted = Decrypt(encrypted, key);</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;Decrypted: <span class="subst">&#123;decrypted&#125;</span>&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><!-- è°ƒç”¨<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">  <span class="comment">//test åŠ å¯† </span></span><br><span class="line">  <span class="built_in">string</span> original = <span class="string">&quot;115&quot;</span>;</span><br><span class="line">  <span class="built_in">string</span> key = <span class="string">&quot;thisisaverysecretkey1234&quot;</span>; <span class="comment">// 32 å­—èŠ‚çš„å¯†é’¥</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// åŠ å¯†</span></span><br><span class="line">  <span class="built_in">string</span> encrypted =Asev1.Encrypt(original, key);</span><br><span class="line">  Console.WriteLine(<span class="string">$&quot;Encrypted: <span class="subst">&#123;encrypted&#125;</span>&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è§£å¯†</span></span><br><span class="line">  <span class="built_in">string</span> decrypted = Asev1.Decrypt(encrypted, key);</span><br><span class="line">  Console.WriteLine(<span class="string">$&quot;Decrypted: <span class="subst">&#123;decrypted&#125;</span>&quot;</span>);</span><br><span class="line">  </span><br><span class="line">  ``` --&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Encrypted: NEVECFUqMdlFuAPGXm30FQ==</span><br><span class="line">Decrypted: <span class="number">115</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="meta"># DES åŠ å¯†è§£å¯†</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> ``` c<span class="meta">#</span></span><br><span class="line"> <span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.IO;</span><br><span class="line"><span class="keyword">using</span> System.Security.Cryptography;</span><br><span class="line"><span class="keyword">using</span> System.Text;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title">SymmetricEncryption</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// åŠ å¯†æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">string</span> <span class="title">Encrypt</span>(<span class="params"><span class="built_in">string</span> plainText, <span class="built_in">string</span> key</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">using</span> (DES desAlg = DES.Create())</span><br><span class="line">        &#123;</span><br><span class="line">            desAlg.Key = Encoding.UTF8.GetBytes(key);</span><br><span class="line">            desAlg.IV = Encoding.UTF8.GetBytes(key); <span class="comment">// ä½¿ç”¨ç›¸åŒçš„ key ä½œä¸º IVï¼Œè¿™ä»…ç”¨äºç¤ºä¾‹ï¼Œå®é™…åº”ç”¨ä¸­åº”ä½¿ç”¨éšæœº IV</span></span><br><span class="line">            </span><br><span class="line">            ICryptoTransform encryptor = desAlg.CreateEncryptor(desAlg.Key, desAlg.IV);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">using</span> (MemoryStream msEncrypt = <span class="keyword">new</span> MemoryStream())</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">using</span> (CryptoStream csEncrypt = <span class="keyword">new</span> CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write))</span><br><span class="line">                <span class="keyword">using</span> (StreamWriter swEncrypt = <span class="keyword">new</span> StreamWriter(csEncrypt))</span><br><span class="line">                &#123;</span><br><span class="line">                    swEncrypt.Write(plainText);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> Convert.ToBase64String(msEncrypt.ToArray());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// è§£å¯†æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">string</span> <span class="title">Decrypt</span>(<span class="params"><span class="built_in">string</span> cipherText, <span class="built_in">string</span> key</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">using</span> (DES desAlg = DES.Create())</span><br><span class="line">        &#123;</span><br><span class="line">            desAlg.Key = Encoding.UTF8.GetBytes(key);</span><br><span class="line">            desAlg.IV = Encoding.UTF8.GetBytes(key); <span class="comment">// ä½¿ç”¨ç›¸åŒçš„ key ä½œä¸º IV</span></span><br><span class="line">            </span><br><span class="line">            ICryptoTransform decryptor = desAlg.CreateDecryptor(desAlg.Key, desAlg.IV);</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">using</span> (MemoryStream msDecrypt = <span class="keyword">new</span> MemoryStream(Convert.FromBase64String(cipherText)))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">using</span> (CryptoStream csDecrypt = <span class="keyword">new</span> CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Read))</span><br><span class="line">                <span class="keyword">using</span> (StreamReader srDecrypt = <span class="keyword">new</span> StreamReader(csDecrypt))</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">return</span> srDecrypt.ReadToEnd();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¤ºä¾‹ä¸»æ–¹æ³•</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">string</span> original = <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line">        <span class="built_in">string</span> key = <span class="string">&quot;abcdefgh&quot;</span>; <span class="comment">// 8 å­—èŠ‚çš„å¯†é’¥</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// åŠ å¯†</span></span><br><span class="line">        <span class="built_in">string</span> encrypted = Encrypt(original, key);</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;Encrypted: <span class="subst">&#123;encrypted&#125;</span>&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// è§£å¯†</span></span><br><span class="line">        <span class="built_in">string</span> decrypted = Decrypt(encrypted, key);</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;Decrypted: <span class="subst">&#123;decrypted&#125;</span>&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŠ å¯†æ–¹æ³• (Encrypt):</p><p>åˆ›å»ºä¸€ä¸ª DES å®ä¾‹ã€‚<br>è®¾ç½®å¯†é’¥ (Key) å’Œåˆå§‹åŒ–å‘é‡ (IV)ã€‚è¿™é‡Œä¸ºäº†ç®€åŒ–ä½¿ç”¨ç›¸åŒçš„ key ä½œä¸º IVï¼Œä½†å®é™…åº”ç”¨ä¸­åº”ä½¿ç”¨ä¸åŒä¸”éšæœºçš„ IVã€‚<br>ä½¿ç”¨ CreateEncryptor åˆ›å»ºåŠ å¯†å™¨ã€‚<br>é€šè¿‡ CryptoStream å’Œ StreamWriter å°†æ˜æ–‡å†™å…¥å†…å­˜æµï¼Œç„¶åè½¬æ¢ä¸º Base64 å­—ç¬¦ä¸²ã€‚<br>è§£å¯†æ–¹æ³• (Decrypt):</p><p>åŒæ ·åˆ›å»ºä¸€ä¸ª DES å®ä¾‹ã€‚<br>è®¾ç½®ç›¸åŒçš„å¯†é’¥å’Œåˆå§‹åŒ–å‘é‡ã€‚<br>ä½¿ç”¨ CreateDecryptor åˆ›å»ºè§£å¯†å™¨ã€‚<br>é€šè¿‡ CryptoStream å’Œ StreamReader ä»å†…å­˜æµè¯»å–å¯†æ–‡å¹¶è§£å¯†ä¸ºæ˜æ–‡ã€‚</p><p>ä¸»æ–¹æ³• (Main):<br>å®šä¹‰ä¸€ä¸ªç¤ºä¾‹æ˜æ–‡å’Œå¯†é’¥ã€‚</p><p>è°ƒç”¨åŠ å¯†å’Œè§£å¯†æ–¹æ³•ï¼Œè¾“å‡ºç»“æœã€‚<br>æ³¨æ„äº‹é¡¹<br>å¯†é’¥é•¿åº¦ï¼šDES ä½¿ç”¨ 56 ä½å¯†é’¥ï¼ˆå³ 8 å­—èŠ‚ï¼‰ã€‚æœ¬ä¾‹ä½¿ç”¨äº† 8 å­—èŠ‚çš„å­—ç¬¦ä¸²å¯†é’¥ã€‚<br>åˆå§‹åŒ–å‘é‡ (IV)ï¼šåº”ç¡®ä¿åŠ å¯†å’Œè§£å¯†æ—¶ä½¿ç”¨ç›¸åŒçš„ IVã€‚æœ¬ä¾‹ä¸­ä¸ºäº†ç®€åŒ–ç¤ºä¾‹ï¼Œä½¿ç”¨äº†ä¸å¯†é’¥ç›¸åŒçš„ IVï¼Œå®é™…åº”ç”¨ä¸­åº”ä½¿ç”¨éšæœº IVï¼Œå¹¶å°†å…¶ä¸å¯†æ–‡ä¸€èµ·å­˜å‚¨ã€‚<br>DES å®‰å…¨æ€§ï¼šDES å·²è¢«è®¤ä¸ºä¸å†å®‰å…¨ï¼Œå»ºè®®ä½¿ç”¨æ›´å®‰å…¨çš„åŠ å¯†ç®—æ³•å¦‚ AESã€‚åœ¨å®é™…åº”ç”¨ä¸­å°½é‡é¿å…ä½¿ç”¨ DESã€‚</p><p>æ‰©å±• NodeJSç‰ˆæœ¬</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> crypto = <span class="built_in">require</span>(<span class="string">&#x27;crypto&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŠ å¯†å‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">encrypt</span>(<span class="params">plainText, key</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> iv = <span class="title class_">Buffer</span>.<span class="title function_">alloc</span>(<span class="number">16</span>, <span class="number">0</span>); <span class="comment">// åˆå§‹åŒ–å‘é‡ (IV) å¯ä»¥è®¾ä¸ºå…¨é›¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨éšæœºå€¼</span></span><br><span class="line">    <span class="keyword">const</span> cipher = crypto.<span class="title function_">createCipheriv</span>(<span class="string">&#x27;aes-256-cbc&#x27;</span>, key, iv);</span><br><span class="line">    <span class="keyword">let</span> encrypted = cipher.<span class="title function_">update</span>(plainText, <span class="string">&#x27;utf8&#x27;</span>, <span class="string">&#x27;base64&#x27;</span>);</span><br><span class="line">    encrypted += cipher.<span class="title function_">final</span>(<span class="string">&#x27;base64&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> encrypted;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§£å¯†å‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">decrypt</span>(<span class="params">cipherText, key</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> iv = <span class="title class_">Buffer</span>.<span class="title function_">alloc</span>(<span class="number">16</span>, <span class="number">0</span>); <span class="comment">// ä¸åŠ å¯†æ—¶ä½¿ç”¨ç›¸åŒçš„ IV</span></span><br><span class="line">    <span class="keyword">const</span> decipher = crypto.<span class="title function_">createDecipheriv</span>(<span class="string">&#x27;aes-256-cbc&#x27;</span>, key, iv);</span><br><span class="line">    <span class="keyword">let</span> decrypted = decipher.<span class="title function_">update</span>(cipherText, <span class="string">&#x27;base64&#x27;</span>, <span class="string">&#x27;utf8&#x27;</span>);</span><br><span class="line">    decrypted += decipher.<span class="title function_">final</span>(<span class="string">&#x27;utf8&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> decrypted;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¦åŠ å¯†çš„æ˜æ–‡</span></span><br><span class="line"><span class="keyword">const</span> plainText = <span class="string">&quot;115&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨å¯†é’¥åŠ å¯†æ¶ˆæ¯</span></span><br><span class="line"><span class="keyword">const</span> key = crypto.<span class="title function_">createHash</span>(<span class="string">&#x27;sha256&#x27;</span>).<span class="title function_">update</span>(<span class="string">&quot;thisisaverysecretkey1234&quot;</span>).<span class="title function_">digest</span>();</span><br><span class="line"><span class="keyword">const</span> encryptedText = <span class="title function_">encrypt</span>(plainText, key);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Encrypted Text:&#x27;</span>, encryptedText);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨å¯†é’¥è§£å¯†æ¶ˆæ¯</span></span><br><span class="line"><span class="keyword">const</span> decryptedText = <span class="title function_">decrypt</span>(encryptedText, key);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Decrypted Text:&#x27;</span>, decryptedText);</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AES </tag>
            
            <tag> DES </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>IOS POD</title>
      <link href="/2024/05/14/IOS-POD/"/>
      <url>/2024/05/14/IOS-POD/</url>
      
        <content type="html"><![CDATA[<p>IOS POD </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install cocoapod</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gem install cocoapod</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gem install cocoapod</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo brew update </span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ruby update </span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rvm install 2.7</span><br></pre></td></tr></table></figure><p>cd xx</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pod install</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IOD </tag>
            
            <tag> POD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>.NET webp</title>
      <link href="/2024/05/10/NET-Webp/"/>
      <url>/2024/05/10/NET-Webp/</url>
      
        <content type="html"><![CDATA[<p>åœ¨C#ä¸­ï¼Œå¯ä»¥ä½¿ç”¨Imageç±»å’ŒBitmapç±»æ¥å¤„ç†å›¾åƒï¼Œå¹¶ä¸”å¯ä»¥å€ŸåŠ©Magick.NETåº“æ¥å°†JPGå›¾ç‰‡è½¬æ¢ä¸ºWEBPæ ¼å¼ã€‚</p><p>å®‰è£…Magick.NET-Q8-AnyCPU NuGetåŒ…ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> ImageMagick;</span><br></pre></td></tr></table></figure><p>è½¬æ¢æ–¹æ³•</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ConvertJpgToWebP2</span>(<span class="params"><span class="built_in">string</span> inputFilePath, <span class="built_in">string</span> outputFilePath</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">using</span> (<span class="keyword">var</span> image = <span class="keyword">new</span> MagickImage(inputFilePath))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// è®¾ç½®WEBPå‹ç¼©è´¨é‡ï¼ŒèŒƒå›´ä»0ï¼ˆæœ€å¥½çš„è´¨é‡ï¼‰åˆ°100ï¼ˆæœ€å¿«é€Ÿå‹ç¼©ï¼‰</span></span><br><span class="line">        image.Quality = <span class="number">80</span>;</span><br><span class="line">        image.Format = MagickFormat.WebP;</span><br><span class="line">        image.Write(outputFilePath);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è°ƒç”¨</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> jpgPath = <span class="string">&quot;E:\\net8test\\ConsoleApp1Test\\ConsoleApp1Test\\bin\\Debug\\net8.0\\55.jpg&quot;</span>;</span><br><span class="line"><span class="built_in">string</span> webpPath = <span class="string">&quot;E:\\net8test\\ConsoleApp1Test\\ConsoleApp1Test\\bin\\Debug\\net8.0\\55.webp&quot;</span>;</span><br><span class="line">Ig ig = <span class="keyword">new</span> Ig();</span><br><span class="line">ig.ConvertJpgToWebP2(jpgPath, webpPath);</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> .NET </tag>
            
            <tag> webp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo Categories Tags</title>
      <link href="/2024/05/09/Hexo-Categories-Tag/"/>
      <url>/2024/05/09/Hexo-Categories-Tag/</url>
      
        <content type="html"><![CDATA[<h1 id="é…ç½®categories"><a href="#é…ç½®categories" class="headerlink" title="é…ç½®categories"></a>é…ç½®categories</h1><h2 id="æ–°å»ºé¡µé¢categories"><a href="#æ–°å»ºé¡µé¢categories" class="headerlink" title="æ–°å»ºé¡µé¢categories:"></a>æ–°å»ºé¡µé¢categories:</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page <span class="string">&quot;categories&quot;</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå‘½ä»¤åå°†æ–°ç”Ÿæˆæ–‡ä»¶å¤¹categoriesï¼Œå¹¶åœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆindex.mdæ–‡ä»¶ã€‚</p><h2 id="ç¼–è¾‘categories-index-mdæ–‡ä»¶"><a href="#ç¼–è¾‘categories-index-mdæ–‡ä»¶" class="headerlink" title="ç¼–è¾‘categories&#x2F;index.mdæ–‡ä»¶:"></a>ç¼–è¾‘categories&#x2F;index.mdæ–‡ä»¶:</h2><p>vi {path}&#x2F;source&#x2F;categories&#x2F;index.md<br>ç¼–è¾‘å†…å®¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: åˆ†ç±»</span><br><span class="line"><span class="built_in">date</span>: 2017-10-25 22:00:00</span><br><span class="line"><span class="built_in">type</span>: <span class="string">&quot;categories&quot;</span></span><br><span class="line">---</span><br></pre></td></tr></table></figure><h2 id="ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶themes-xx-config-yml"><a href="#ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶themes-xx-config-yml" class="headerlink" title="ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶themes&#x2F;xx&#x2F;_config.yml:"></a>ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶themes&#x2F;xx&#x2F;_config.yml:</h2><p>vi {path}&#x2F;themes&#x2F;xx&#x2F;_config.yml<br>å°†menuä¸­çš„categoriesçš„æ³¨é‡Šå»æ‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">     home: / || home</span><br><span class="line">     <span class="comment">#tags: /tags/ || tags</span></span><br><span class="line">     categories: /categories/ || th</span><br><span class="line">     archives: /archives/ || archive</span><br><span class="line">     <span class="comment">#about: /about/ || user</span></span><br><span class="line">     <span class="comment">#schedule: /schedule/ || calendar</span></span><br><span class="line">     <span class="comment">#sitemap: /sitemap.xml || sitemap</span></span><br><span class="line">     <span class="comment">#commonweal: /404/ || heartbeat</span></span><br></pre></td></tr></table></figure><h2 id="ç¼–è¾‘æ–‡ç« åœ¨Front-matteråŒºåŸŸï¼ˆå³â€”åˆ†éš”çš„åŒºåŸŸï¼‰æŒ‡å®šcategorieså³å¯ï¼š"><a href="#ç¼–è¾‘æ–‡ç« åœ¨Front-matteråŒºåŸŸï¼ˆå³â€”åˆ†éš”çš„åŒºåŸŸï¼‰æŒ‡å®šcategorieså³å¯ï¼š" class="headerlink" title="ç¼–è¾‘æ–‡ç« åœ¨Front-matteråŒºåŸŸï¼ˆå³â€”åˆ†éš”çš„åŒºåŸŸï¼‰æŒ‡å®šcategorieså³å¯ï¼š"></a>ç¼–è¾‘æ–‡ç« åœ¨Front-matteråŒºåŸŸï¼ˆå³â€”åˆ†éš”çš„åŒºåŸŸï¼‰æŒ‡å®šcategorieså³å¯ï¼š</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: <span class="built_in">test</span></span><br><span class="line"><span class="built_in">date</span>: 2017-01-01 00:00:00</span><br><span class="line">categories:</span><br><span class="line"> - ç±»åˆ«åç§°</span><br><span class="line">tags:</span><br><span class="line"> - æ ‡ç­¾</span><br><span class="line">--- </span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">categories/index.md</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line">title: åˆ†ç±»</span><br><span class="line"><span class="built_in">date</span>: 2024-05-08 22:00:00</span><br><span class="line"><span class="built_in">type</span>: <span class="string">&quot;categories&quot;</span></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- [åˆ†ç±»](/categories/)</span><br><span class="line"></span><br><span class="line">- [åˆ†ç±»-æŠ€æœ¯](/categories/æŠ€æœ¯/)</span><br><span class="line">- [åˆ†ç±»-ç”Ÿæ´»](/categories/ç”Ÿæ´»/)  </span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åˆ†ç±»å…·æœ‰é¡ºåºæ€§å’Œå±‚æ¬¡æ€§ï¼Œè€Œæ ‡ç­¾æ²¡æœ‰é¡ºåºå’Œå±‚æ¬¡ã€‚</p><h1 id="é…ç½®tags"><a href="#é…ç½®tags" class="headerlink" title="é…ç½®tags"></a>é…ç½®tags</h1><h2 id="æ–°å»ºé¡µé¢tags"><a href="#æ–°å»ºé¡µé¢tags" class="headerlink" title="æ–°å»ºé¡µé¢tags:"></a>æ–°å»ºé¡µé¢tags:</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page <span class="string">&quot;tags&quot;</span></span><br></pre></td></tr></table></figure><h2 id="ç¼–è¾‘tags-index-mdæ–‡ä»¶"><a href="#ç¼–è¾‘tags-index-mdæ–‡ä»¶" class="headerlink" title="ç¼–è¾‘tags&#x2F;index.mdæ–‡ä»¶:"></a>ç¼–è¾‘tags&#x2F;index.mdæ–‡ä»¶:</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;% if (site.tags.length)&#123; %&gt;</span><br><span class="line">  <span class="tag">&lt;<span class="name">aside</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;widget&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">&quot;widget-title&quot;</span>&gt;</span>æ ‡ç­¾äº‘<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;widget-content&quot;</span>&gt;</span></span><br><span class="line">        &lt;% site.tags.forEach(function(tag)&#123; %&gt;</span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%= url_for(tag.path) %&gt;&quot;</span> <span class="attr">style</span>=<span class="string">&quot;font-size: &lt;%= tag.length %&gt;px;&quot;</span>&gt;</span>&lt;%= tag.name %&gt;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        &lt;% &#125;) %&gt;</span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">aside</span>&gt;</span></span><br><span class="line">&lt;% &#125; %&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>vi {path}&#x2F;source&#x2F;tags&#x2F;index.md<br>ç¼–è¾‘å†…å®¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: æ ‡ç­¾</span><br><span class="line"><span class="built_in">date</span>: 2017-10-25 22:05:00</span><br><span class="line"><span class="built_in">type</span>: <span class="string">&quot;tags&quot;</span></span><br><span class="line">---</span><br></pre></td></tr></table></figure><h2 id="ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶themes-xx-config-yml-1"><a href="#ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶themes-xx-config-yml-1" class="headerlink" title="ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶themes&#x2F;xx&#x2F;_config.yml:"></a>ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶themes&#x2F;xx&#x2F;_config.yml:</h2><p>vi {path}&#x2F;themes&#x2F;next&#x2F;_config.yml<br>å°†menuä¸­çš„tagsçš„æ³¨é‡Šå»æ‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">     home: / || home</span><br><span class="line">     tags: /tags/ || tags</span><br><span class="line">     categories: /categories/ || th</span><br><span class="line">     archives: /archives/ || archive</span><br><span class="line">     <span class="comment">#about: /about/ || user</span></span><br><span class="line">     <span class="comment">#schedule: /schedule/ || calendar</span></span><br><span class="line">     <span class="comment">#sitemap: /sitemap.xml || sitemap  </span></span><br><span class="line">     <span class="comment">#commonweal: /404/ || heartbeat</span></span><br></pre></td></tr></table></figure><p>æ–‡ç« æŒ‡å®štagsçš„å†™æ³•ä¸categoriesä¸€è‡´ï¼Œåœ¨Front-matteråŒºåŸŸæŒ‡å®šå³å¯ï¼Œå†™æ³•å¯å‚è€ƒä»¥ä¸Šã€‚</p><h1 id="é…ç½®about"><a href="#é…ç½®about" class="headerlink" title="é…ç½®about"></a>é…ç½®about</h1><h2 id="æ–°å»ºé¡µé¢about"><a href="#æ–°å»ºé¡µé¢about" class="headerlink" title="æ–°å»ºé¡µé¢about:"></a>æ–°å»ºé¡µé¢about:</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page <span class="string">&quot;about&quot;</span></span><br></pre></td></tr></table></figure><h2 id="ç¼–è¾‘about-index-mdæ–‡ä»¶ï¼Œå†…å®¹å¯æ ¹æ®ä¸ªäººç¼–å†™ï¼›"><a href="#ç¼–è¾‘about-index-mdæ–‡ä»¶ï¼Œå†…å®¹å¯æ ¹æ®ä¸ªäººç¼–å†™ï¼›" class="headerlink" title="ç¼–è¾‘about&#x2F;index.mdæ–‡ä»¶ï¼Œå†…å®¹å¯æ ¹æ®ä¸ªäººç¼–å†™ï¼›"></a>ç¼–è¾‘about&#x2F;index.mdæ–‡ä»¶ï¼Œå†…å®¹å¯æ ¹æ®ä¸ªäººç¼–å†™ï¼›</h2><p>vi {path}&#x2F;source&#x2F;about&#x2F;index.md</p><h2 id="ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶themes-xx-config-yml-2"><a href="#ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶themes-xx-config-yml-2" class="headerlink" title="ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶themes&#x2F;xx&#x2F;_config.yml:"></a>ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶themes&#x2F;xx&#x2F;_config.yml:</h2><p>vi {path}&#x2F;themes&#x2F;xx&#x2F;_config.yml<br>å°†menuä¸­çš„aboutçš„æ³¨é‡Šå»æ‰ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">     home: / || home</span><br><span class="line">     tags: /tags/ || tags</span><br><span class="line">     categories: /categories/ || th</span><br><span class="line">     archives: /archives/ || archive</span><br><span class="line">     about: /about/ || user</span><br><span class="line">     <span class="comment">#schedule: /schedule/ || calendar</span></span><br><span class="line">     <span class="comment">#sitemap: /sitemap.xml || sitemap</span></span><br><span class="line">     <span class="comment">#commonweal: /404/ || heartbeat</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Web uvpv busuanzi</title>
      <link href="/2024/05/08/Web-busuanzi/"/>
      <url>/2024/05/08/Web-busuanzi/</url>
      
        <content type="html"><![CDATA[<h1 id="WEB-UVPV-busuanzi-ä¸è’œå­"><a href="#WEB-UVPV-busuanzi-ä¸è’œå­" class="headerlink" title="WEB UVPV busuanzi ä¸è’œå­"></a>WEB UVPV busuanzi ä¸è’œå­</h1><p>ä¸è’œå­æ˜¯ä¸€æ¬¾ç”¨äºé™æ€ç½‘ç«™çš„è®¿é—®è®¡æ•°å·¥å…·ï¼Œå¯ä»¥æ–¹ä¾¿åœ°åœ¨ç½‘é¡µä¸Šæ˜¾ç¤ºè®¿é—®æ¬¡æ•°ã€‚ä¸å…¶ä»–ç»Ÿè®¡å·¥å…·å¦‚ç™¾åº¦ç»Ÿè®¡å’Œè°·æ­Œåˆ†æä¸åŒçš„æ˜¯ï¼Œä¸è’œå­ç›´æ¥å°†è®¿é—®æ¬¡æ•°æ˜¾ç¤ºåœ¨ç½‘é¡µä¸Šï¼Œè€Œä¸éœ€è¦ç”¨æˆ·è·³è½¬åˆ°å¤–éƒ¨å¹³å°æŸ¥çœ‹ã€‚</p><h1 id="ä¸è’œå­çš„è®¡æ•°åŸç†ï¼š"><a href="#ä¸è’œå­çš„è®¡æ•°åŸç†ï¼š" class="headerlink" title="ä¸è’œå­çš„è®¡æ•°åŸç†ï¼š"></a>ä¸è’œå­çš„è®¡æ•°åŸç†ï¼š</h1><p>é€šè¿‡åœ¨ç½‘é¡µä¸­å¼•å…¥JavaScriptè„šæœ¬ï¼Œå°†å½“å‰é¡µé¢çš„URLæˆ–æŸç§å”¯ä¸€æ ‡è¯†æ³¨å†Œåˆ°ä¸è’œå­çš„æœåŠ¡å™¨ä¸Šï¼ŒæœåŠ¡å™¨ä¿å­˜ç€URLä¸å¯¹åº”çš„è®¿é—®è®¡æ•°å€¼ã€‚å½“é¡µé¢è¢«è®¿é—®æ—¶ï¼Œé€šè¿‡JavaScriptæ›´æ–°æœåŠ¡å™¨ä¸Šçš„è®¡æ•°å€¼ï¼Œå¹¶åœ¨é¡µé¢åˆå§‹åŒ–æ—¶åŠ è½½å¹¶æ˜¾ç¤ºè®¡æ•°å€¼ã€‚</p><h1 id="å¦‚ä½•ä½¿ç”¨ï¼Ÿ"><a href="#å¦‚ä½•ä½¿ç”¨ï¼Ÿ" class="headerlink" title="å¦‚ä½•ä½¿ç”¨ï¼Ÿ"></a>å¦‚ä½•ä½¿ç”¨ï¼Ÿ</h1><p>åœ¨ç½‘é¡µéœ€è¦å¼•ç”¨è®¡æ•°åŠŸèƒ½çš„åœ°æ–¹å…ˆå¼•å…¥ä¸è’œå­çš„js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å¼•å…¥ä¸è’œå­è®¡æ•° --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">async</span> <span class="attr">src</span>=<span class="string">&quot;//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>ä¸ºäº†ç¾è§‚ï¼Œæˆ‘ä»¬å†å¼•å…¥æ—‹è½¬èŠ±ç“£åŠ è½½ç‰¹æ•ˆâ€fa fa-spinner fa-spinâ€<br>æ€»è®¿é—®é‡è®¡æ•°ç®—æ³•ï¼špvæ–¹å¼ï¼Œå•ä¸ªç”¨æˆ·è¿ç»­ç‚¹å‡»nç¯‡æ–‡ç« ï¼Œè®°å½•næ¬¡è®¿é—®é‡ã€‚<br>æ€»è®¿å®¢æ•°è®¡æ•°ç®—æ³•ï¼šuvæ–¹å¼ï¼Œå•ä¸ªç”¨æˆ·è¿ç»­ç‚¹å‡»nç¯‡æ–‡ç« ï¼Œåªè®°å½•1æ¬¡è®¿å®¢æ•°ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">center</span>&gt;</span></span><br><span class="line">        æµè§ˆé‡ï¼š<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;busuanzi_value_site_pv&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-spinner fa-spin&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>ğŸ‘€ | è®¿å®¢æ•°ï¼š<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;busuanzi_value_site_uv&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-spinner fa-spin&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>ğŸ‘¦</span><br><span class="line"><span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ³¨ï¼šç¾åŒ–åŠå…¶ä»–åµŒå…¥çš„æ”¹åŠ¨ï¼Œå…¶å®åªè¦å†…å±‚çš„spanå°±å¯ä»¥ï¼Œç„¶åç”¨cssç¾åŒ–æˆ–è€…åšåµŒå…¥</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>npm audit</title>
      <link href="/2024/05/08/Nodejs-npm-audit/"/>
      <url>/2024/05/08/Nodejs-npm-audit/</url>
      
        <content type="html"><![CDATA[<p>11 packages are looking for funding<br>  run <code>npm fund</code> for details</p><p>6 vulnerabilities (4 high, 2 critical)</p><p>To address issues that do not require attention, run:<br>  npm audit fix</p><p>To address all issues, run:<br>  npm audit fix â€“force</p><p>Run <code>npm audit</code> for details.</p><p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p><p>è¿™ä¸ªæŠ¥é”™ä¿¡æ¯çš„æ„æ€æ˜¯ï¼š</p><p>ä¾èµ–åŒ…å·²ç»æ˜¯æœ€æ–°çš„ï¼Œnpmæ£€æŸ¥äº†xxä¸ªåŒ…ï¼ŒèŠ±äº†xç§’é’Ÿã€‚<br>æœ‰xä¸ªåŒ…æ­£åœ¨å¯»æ±‚èµ„é‡‘æ”¯æŒï¼Œè¿è¡Œnpm fundæ¥æŸ¥çœ‹è¯¦æƒ…ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©æèµ ä¸€äº›é’±ç»™è¿™äº›åŒ…çš„å¼€å‘è€…ã€‚<br>æœ‰xä¸ªä¸­ç­‰ç¨‹åº¦çš„å®‰å…¨æ¼æ´ï¼Œè¿è¡Œnpm audit fix â€“forceæ¥ä¿®å¤æ‰€æœ‰çš„é—®é¢˜ï¼ŒåŒ…æ‹¬ä¸€äº›å¯èƒ½å¯¼è‡´ç ´åæ€§å˜åŒ–çš„é—®é¢˜ã€‚<br>è¿è¡Œnpm auditæ¥æŸ¥çœ‹æ›´å¤šçš„ç»†èŠ‚ï¼ŒåŒ…æ‹¬æ¯ä¸ªæ¼æ´çš„ç±»å‹ï¼Œæ¥æºï¼Œå½±å“ç­‰ã€‚</p><p>è§£å†³æ–¹æ³•</p><p>æœ‰æ—¶å€™å¹¶ä¸æƒ³ä¿®å¤è¿™äº›å®‰å…¨æ¼æ´ï¼Œå› ä¸ºå®ƒä»¬å¯èƒ½ä¼šå½±å“æˆ‘ä»¬çš„é¡¹ç›®çš„æ­£å¸¸è¿è¡Œï¼Œæˆ–è€…æˆ‘ä»¬åªæ˜¯æƒ³å¿«é€Ÿåœ°åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®ï¼Œä¸æƒ³è¢«è¿™äº›æŠ¥é”™ä¿¡æ¯æ‰“æ‰°,å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç®€å•çš„å‘½ä»¤æ¥å…³é—­npmçš„auditæ£€æŸ¥ï¼š<br>npm set audit false<br>è¿™æ ·å°±å¯ä»¥ä¿è¯npmçš„auditä¸ä¼šå½±å“åˆå§‹åŒ–é¡¹ç›®ï¼Œä½†æ˜¯è¿™ä¸ªè§£å†³åŠæ³•å¹¶ä¸å»ºè®®ä½¿ç”¨åœ¨å®é™…ç”Ÿäº§ä¸­ï¼Œå› ä¸ºå®ƒä¼šè®©æˆ‘ä»¬å¿½ç•¥ä¸€äº›å¯èƒ½å­˜åœ¨çš„å®‰å…¨é£é™©ã€‚<br>åŒæ ·çš„ï¼Œå¯ä»¥å°†å€¼è®¾ä¸ºtrueæ¥æ‰“å¼€npm auditæ£€æŸ¥ï¼Œè¿™æ ·å¯ä»¥çœ‹åˆ°npmçš„æŠ¥é”™ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ä¿®å¤å®ƒä»¬ï¼š<br>npm set audit true<br>è¿™ä¸ªæ“ä½œå°†å¯¹å…¨å±€ç”Ÿæ•ˆï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä¼šå½±å“æˆ‘ä»¬æ‰€æœ‰çš„é¡¹ç›®ï¼Œä¸ç®¡æ˜¯æ–°çš„è¿˜æ˜¯æ—§çš„ã€‚</p><p>ä¿®å¤~ä½†ä¸æ˜¯ç ´åæ€§ä¿®å¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm audit fix </span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> npm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>.NET native AOT</title>
      <link href="/2024/05/08/NET-AOT-native/"/>
      <url>/2024/05/08/NET-AOT-native/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>.NET8å¯¹äºæ€§èƒ½çš„ä¼˜åŒ–æ˜¯æ–¹æ–¹é¢é¢çš„ï¼Œæ‰€ä»¥AOTé¢„ç¼–è¯‘æœºå™¨ç ä¹Ÿæ˜¯ä¸ä¾‹å¤–çš„ã€‚æœ¬ç¯‡æ¥çœ‹ä¸‹å¯¹äºAOTçš„ä¼˜åŒ–ã€‚</p><h1 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h1><p>é¦–å…ˆè¦æ˜ç¡®ä¸€ä¸ªæ¦‚å¿µï¼Œ.NETé‡Œé¢çš„AOTå®ƒæ˜¯åŸç”Ÿçš„ã€‚ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿä¹Ÿå°±æ˜¯è¯´é€šè¿‡ILCç¼–è¯‘å™¨(AOTç¼–è¯‘å™¨ï¼Œç¼–è¯‘å‡ºæ¥çš„ä»£ç æ˜¯å„ä¸ªå¹³å°ä¸Šå¯ä»¥ç›´æ¥è¿è¡Œçš„äºŒè¿›åˆ¶ä»£ç ã€‚æ¯”å¦‚MacOSçš„äºŒè¿›åˆ¶ï¼ŒLinuxäºŒè¿›åˆ¶ç­‰ç­‰ã€‚æ‰€ä»¥ç§°ä¹‹ä¸ºåŸç”Ÿã€‚</p><p>C#æºç è¢«ILCç¼–è¯‘ä¹‹åï¼Œç”Ÿæˆäº†ä¸€ä¸ªå®Œå…¨åŸç”Ÿæ€ä»£ç çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚åœ¨æ‰§è¡Œçš„æ—¶å€™ä¸éœ€è¦JITæ¥ç¼–è¯‘ä»»ä½•ä¸œè¥¿ï¼Œå› ä¸ºJITå·²ç»åœ¨ILCé‡Œé¢è¢«å……åˆ†åˆ©ç”¨è¿‡äº†ã€‚å®é™…ä¸ŠAOTé‡Œé¢ä¹Ÿæ²¡æœ‰åŒ…å«JITã€‚é‚£ä¹ˆå®ƒå¦‚ä½•ä¼˜åŒ–å‘¢ï¼Ÿåªèƒ½æ˜¯åœ¨ILCé‡Œé¢è°ƒç”¨JITçš„æ—¶å€™äº†ã€‚æ‰€ä»¥å®ƒè¿™ä¸ªä¼˜åŒ–ä¾ç„¶ä¾é JITã€‚.NET8é‡Œé¢ä¼˜åŒ–AOTçš„ä¸€ä¸ªå…¸å‹çš„ä¾‹å­ï¼Œå°±æ˜¯ASP.NETåº”ç”¨ç¨‹åºåœ¨ä½¿ç”¨AOTçš„æ—¶å€™è¡¨ç°ä¸é”™ï¼ŒåŒæ—¶ä¹Ÿé™ä½äº†æ€»æˆæœ¬ã€‚</p><h1 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h1><p>å¯ç”¨AOT </p><h1 id="æ‰“åŒ…æŒ‡ä»¤"><a href="#æ‰“åŒ…æŒ‡ä»¤" class="headerlink" title="æ‰“åŒ…æŒ‡ä»¤"></a>æ‰“åŒ…æŒ‡ä»¤</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dotnet publish DemoAot.csproj -o pub\ -c Release -r win-x64</span><br></pre></td></tr></table></figure><h1 id="linuxä¸‹"><a href="#linuxä¸‹" class="headerlink" title="linuxä¸‹"></a>linuxä¸‹</h1><p>å…ˆå®‰è£…SDK<br>å®‰è£…å </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dotnet --list-sdks</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dotnet publish DemoAot.csproj -o <span class="variable">$PWD</span>/pub -c Release -r linux-x64</span><br></pre></td></tr></table></figure><h1 id="macosä¸‹"><a href="#macosä¸‹" class="headerlink" title="macosä¸‹"></a>macosä¸‹</h1><p>å®‰è£…SDKå </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dotnet --list-sdks</span><br></pre></td></tr></table></figure><pre><code class="bash">dotnet publish DemoAot.csproj -o $PWD/pub -c Release -r osx-x64</code></pre>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> .NET </tag>
            
            <tag> linux </tag>
            
            <tag> AOT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Debian nginx https</title>
      <link href="/2024/05/07/Debian-Nginx/"/>
      <url>/2024/05/07/Debian-Nginx/</url>
      
        <content type="html"><![CDATA[<p>debianå®‰è£… nginx<br>åœ¨Debianç³»ç»Ÿä¸Šå®‰è£…Nginxï¼Œä½ å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š</p><p>sudo: command not found</p><p>apt-get install sudo</p><p>é¦–å…ˆï¼Œæ›´æ–°ä½ çš„åŒ…ç´¢å¼•ï¼š   </p><p>sudo apt update<br>æ¥ä¸‹æ¥ï¼Œå®‰è£…Nginxï¼š</p><p>sudo apt install nginx</p><p>å®‰è£…å®Œæˆåï¼Œå¯åŠ¨NginxæœåŠ¡ï¼š</p><p>sudo systemctl start nginx<br>ï¼ˆå¯é€‰ï¼‰è®¾ç½®Nginxå¼€æœºè‡ªå¯åŠ¨ï¼š</p><p>sudo systemctl enable nginx<br>ä½ å¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ£€æŸ¥Nginxçš„çŠ¶æ€ï¼š</p><p>sudo systemctl status nginx<br>ç°åœ¨ï¼Œä½ å¯ä»¥åœ¨Webæµè§ˆå™¨ä¸­è¾“å…¥ä½ æœåŠ¡å™¨çš„IPåœ°å€æˆ–åŸŸåæ¥è®¿é—®é»˜è®¤çš„Nginxæ¬¢è¿é¡µé¢ã€‚å¦‚æœä½ æ˜¯åœ¨æœ¬åœ°å®‰è£…çš„Nginxï¼Œä½ å¯ä»¥é€šè¿‡è®¿é—® <a href="http://localhost/">http://localhost</a> æ¥æŸ¥çœ‹è¿™ä¸ªé¡µé¢ã€‚</p><p>å¦‚æœä½ éœ€è¦é…ç½®Nginxï¼Œä½ å¯ä»¥ç¼–è¾‘ &#x2F;etc&#x2F;nginx&#x2F;nginx.conf æ–‡ä»¶æˆ–è€…åœ¨ &#x2F;etc&#x2F;nginx&#x2F;sites-available&#x2F; ç›®å½•ä¸‹åˆ›å»ºæˆ–ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨ sudo ln -s &#x2F;etc&#x2F;nginx&#x2F;sites-available&#x2F;your-config &#x2F;etc&#x2F;nginx&#x2F;sites-enabled&#x2F; å‘½ä»¤æ¥å¯ç”¨å®ƒã€‚</p><p>sudo whereis nginx<br>Nginx é»˜è®¤å®‰è£…ä½ç½®<br>é…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½• &#x2F;etc&#x2F;</p><p>nginxé…ç½®<br> æ£€æµ‹Nginxé…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®<br> nginx -t</p><p>é‡è½½Nginxé…ç½®<br>nginx -s reload</p><p> è‡ªå®šä¹‰Nginxç«™ç‚¹é…ç½®æ–‡ä»¶å­˜æ”¾ç›®å½•<br>&#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F;</p><p>nginxç½‘ç«™ç›®å½•<br>&#x2F;var&#x2F;www&#x2F;</p><p>åŸŸåè¯ä¹¦</p><p>é˜¿é‡Œäº‘è¯ä¹¦<br>å…è´¹è¯ä¹¦<br><a href="https://help.aliyun.com/zh/ssl-certificate/user-guide/overview-of-free-certificates-overview-of-free-certificates">https://help.aliyun.com/zh/ssl-certificate/user-guide/overview-of-free-certificates-overview-of-free-certificates</a><br><a href="https://yundun.console.aliyun.com/?p=cas#/certExtend/free/cn-hangzhou">https://yundun.console.aliyun.com/?p=cas#/certExtend/free/cn-hangzhou</a></p><p>æœåŠ¡å™¨ç±»å‹<br>Nginx<br>Tomcat<br>Apache<br>ls<br>JKS<br>å…¶ä»–</p><p>æ ¹è¯ä¹¦ä¸‹è½½<br>è¯ä¹¦æ ¼å¼<br>pem&#x2F;key<br>pfx<br>crt&#x2F;key<br>pfx<br>jks<br>pem&#x2F;key<br>crt&#x2F;cer</p><p>Nginxéƒ¨ç½²<br><a href="https://help.aliyun.com/zh/ssl-certificate/user-guide/install-ssl-certificates-on-nginx-servers-or-tengine-servers">https://help.aliyun.com/zh/ssl-certificate/user-guide/install-ssl-certificates-on-nginx-servers-or-tengine-servers</a>?</p><p> ls &#x2F;root&#x2F;cerf&#x2F;<a href="http://www.dtso.net.pem/">www.dtso.net.pem</a></p><p>nginx -s reload  #é‡æ–°è½½å…¥é…ç½®æ–‡ä»¶ã€‚<br>è¯´æ˜<br>æŠ¥é”™the â€œsslâ€ parameter requires ngx_http_ssl_moduleï¼šæ‚¨éœ€è¦é‡æ–°ç¼–è¯‘Nginxå¹¶åœ¨ç¼–è¯‘å®‰è£…çš„æ—¶å€™åŠ ä¸Šâ€“with-http_ssl_moduleé…ç½®ã€‚</p><p>æŠ¥é”™â€&#x2F;cert&#x2F;3970497_demo.aliyundoc.com.pemâ€:BIO_new_file() failed (SSL: error:02001002:system library:fopen:No such file or directory:fopen(â€˜&#x2F;cert&#x2F;3970497_demo.aliyundoc.com.pemâ€™,â€™râ€™) error:2006D080:BIO routines:BIO_new_file:no such file)ï¼šæ‚¨éœ€è¦å»æ‰è¯ä¹¦ç›¸å¯¹è·¯å¾„æœ€å‰é¢çš„&#x2F;ã€‚ä¾‹å¦‚ï¼Œæ‚¨éœ€è¦å»æ‰&#x2F;cert&#x2F;cert-file-name.pemæœ€å‰é¢çš„&#x2F;ï¼Œä½¿ç”¨æ­£ç¡®çš„ç›¸å¯¹è·¯å¾„cert&#x2F;cert-file-name.pemã€‚</p><p>nginx -s reload</p><p>åŸŸå443å®‰å…¨ç»„ é˜²ç«å¢™å¼€å¯~ 443 443 443</p><p>.conf ç¤ºä¾‹</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">server &#123;  </span><br><span class="line">       listen       443 ssl http2;  </span><br><span class="line">       listen       [::]:443 ssl http2;  </span><br><span class="line">       server_name  www.x.com;  </span><br><span class="line"> </span><br><span class="line">       ssl_certificate      /root/cerf/www.x.com.pem;  </span><br><span class="line">       ssl_certificate_key  /root/cerf/www.x.com.key;  </span><br><span class="line"> </span><br><span class="line">       ssl_protocols TLSv1.2 TLSv1.3;  </span><br><span class="line">       ssl_ciphers HIGH:!aNULL:!MD5;  </span><br><span class="line"> </span><br><span class="line">       ssl_prefer_server_ciphers on;  </span><br><span class="line"> </span><br><span class="line">       <span class="comment"># HSTS (optional)  </span></span><br><span class="line">       add_header Strict-Transport-Security <span class="string">&quot;max-age=31536000; includeSubDomains; preload&quot;</span>;  </span><br><span class="line"> </span><br><span class="line">       <span class="comment"># SSL session cache (optional)  </span></span><br><span class="line">       ssl_session_cache    shared:SSL:10m;  </span><br><span class="line">       ssl_session_timeout  10m;  </span><br><span class="line"> </span><br><span class="line">       <span class="comment"># SSL stapling (optional, if you use OCSP)  </span></span><br><span class="line">       <span class="comment"># ssl_stapling on;  </span></span><br><span class="line">       <span class="comment"># ssl_stapling_verify on;  </span></span><br><span class="line"> </span><br><span class="line">       <span class="comment"># DH param is dependent on certificate size  </span></span><br><span class="line">       <span class="comment">#ssl_dhparam /path/to/dhparam.pem;  </span></span><br><span class="line"> </span><br><span class="line">       location / &#123;  </span><br><span class="line">           root   /usr/share/nginx/html;  </span><br><span class="line">           index  index.html index.htm;  </span><br><span class="line">       &#125;  </span><br><span class="line"> </span><br><span class="line">       <span class="comment"># other locations...  </span></span><br><span class="line"> </span><br><span class="line">       <span class="comment"># Redirect non-https to https  </span></span><br><span class="line">       <span class="comment"># server &#123;  </span></span><br><span class="line">       <span class="comment">#     listen 80;  </span></span><br><span class="line">       <span class="comment">#     server_name your.domain.com;  </span></span><br><span class="line">       <span class="comment">#     return 301 https://$host$request_uri;  </span></span><br><span class="line">       <span class="comment"># &#125;  </span></span><br><span class="line"> </span><br><span class="line">       <span class="comment"># Error handling  </span></span><br><span class="line">       error_page   500 502 503 504  /50x.html;  </span><br><span class="line">       location = /50x.html &#123;  </span><br><span class="line">           root   /usr/share/nginx/html;  </span><br><span class="line">       &#125;  </span><br><span class="line">   &#125;  </span><br><span class="line"></span><br></pre></td></tr></table></figure><!--159-TCP: 443TCP: 80TCP:1234TCP:123TCP:8090TCP:50501TCP:6379TCP:8080TCP:8880TCP: 30306TCP: 27145TCP:3389TCP: 22TCP:4000117-1123123451234123600260011111188882280443--><p>ç½‘ç»œæµ‹è¯•</p><p><a href="https://boce.aliyun.com/detect/dns">https://boce.aliyun.com/detect/dns</a></p><ul><li></li></ul><h1 id="debian-å¸è½½-nginx"><a href="#debian-å¸è½½-nginx" class="headerlink" title="debian å¸è½½ nginx"></a>debian å¸è½½ nginx</h1><p>åœ¨Debianç³»ç»Ÿä¸­ï¼Œè¦å¸è½½nginxï¼Œä½ å¯ä»¥ä½¿ç”¨apt-getå‘½ä»¤ã€‚ä»¥ä¸‹æ˜¯å…·ä½“æ­¥éª¤ï¼š</p><p>é¦–å…ˆï¼Œä½ éœ€è¦çŸ¥é“nginxæ˜¯å¦æ˜¯é€šè¿‡aptå®‰è£…çš„ã€‚ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å·²å®‰è£…çš„nginxåŒ…ï¼š</p><p>dpkg -l | grep nginx<br>å¦‚æœnginxæ˜¯é€šè¿‡aptå®‰è£…çš„ï¼Œä½ å¯ä»¥ä½¿ç”¨apt-getå‘½ä»¤æ¥å¸è½½å®ƒï¼š</p><p>sudo apt-get remove nginx nginx-common<br>è¿™å°†ä¼šå¸è½½nginxåŠå…¶é…ç½®æ–‡ä»¶ã€‚</p><p>ä¸ºäº†æ¸…é™¤æ‰€æœ‰nginxçš„é…ç½®æ–‡ä»¶å’Œä¾èµ–ï¼Œä½ å¯ä»¥æ‰§è¡Œï¼š</p><p>sudo apt-get purge nginx nginx-common<br>æœ€åï¼Œä½ å¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ¸…é™¤æ— ç”¨çš„åŒ…å’Œä¾èµ–ï¼š</p><p>sudo apt-get autoremove<br>ç¡®ä¿åœ¨æ‰§è¡Œè¿™äº›æ­¥éª¤ä¹‹å‰ï¼Œä½ å·²ç»åœæ­¢äº†nginxæœåŠ¡ï¼š</p><p>sudo systemctl stop nginx<br>å¦‚æœnginxæ˜¯é€šè¿‡å…¶ä»–æ–¹å¼å®‰è£…çš„ï¼Œæ¯”å¦‚ç¼–è¯‘å®‰è£…ï¼Œé‚£ä¹ˆä½ éœ€è¦æ‰‹åŠ¨åˆ é™¤nginxæˆ–è€…æŒ‰ç…§å…¶å®‰è£…æ–¹å¼æ¥å¸è½½ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>.NETè·å–å†…å­˜</title>
      <link href="/2024/05/06/NET-Memory/"/>
      <url>/2024/05/06/NET-Memory/</url>
      
        <content type="html"><![CDATA[<p>åœ¨.NET æ§åˆ¶å°åº”ç”¨ç¨‹åºä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨System.Diagnosticså‘½åç©ºé—´ä¸‹çš„Processç±»æ¥è·å–å½“å‰è¿›ç¨‹çš„å†…å­˜ä½¿ç”¨æƒ…å†µã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ä»£ç ï¼Œå±•ç¤ºå¦‚ä½•è·å–å¹¶æ˜¾ç¤ºå½“å‰è¿›ç¨‹çš„å†…å­˜ä½¿ç”¨é‡ï¼š</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Diagnostics;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">namespace</span> <span class="title">DisplayProcessMemory</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// è·å–å½“å‰è¿›ç¨‹</span></span><br><span class="line">            Process currentProcess = Process.GetCurrentProcess();</span><br><span class="line"> </span><br><span class="line">            <span class="comment">// ä½¿ç”¨éœ€è¦çš„å†…å­˜é‡</span></span><br><span class="line">            <span class="built_in">long</span> workingSet64 = currentProcess.WorkingSet64;</span><br><span class="line"> </span><br><span class="line">            <span class="comment">// æ˜¾ç¤ºå†…å­˜ä½¿ç”¨é‡</span></span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;å½“å‰è¿›ç¨‹å ç”¨å†…å­˜: <span class="subst">&#123;workingSet64&#125;</span> å­—èŠ‚&quot;</span>);</span><br><span class="line"> </span><br><span class="line">            <span class="comment">// å•ä½è½¬æ¢ä¸ºå…†å­—èŠ‚</span></span><br><span class="line">            <span class="built_in">double</span> memoryInMB = workingSet64 / <span class="number">1024.0</span> / <span class="number">1024.0</span>;</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;å½“å‰è¿›ç¨‹å ç”¨å†…å­˜: <span class="subst">&#123;memoryInMB.ToString(<span class="string">&quot;F2&quot;</span>)&#125;</span> MB&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨.NETä¸­ï¼Œå¯ä»¥ä½¿ç”¨System.Diagnosticså‘½åç©ºé—´ä¸‹çš„Processç±»æ¥è·å–å½“å‰è¿›ç¨‹çš„ä¿¡æ¯ï¼Œä½†æ˜¯ç›´æ¥è·å–ç½‘ç»œå¸¦å®½ä½¿ç”¨æƒ…å†µä¸æ˜¯Processç±»æä¾›çš„åŠŸèƒ½ã€‚ä½ å¯ä»¥ä½¿ç”¨System.Net.NetworkInformationå‘½åç©ºé—´ä¸‹çš„IPGlobalPropertiesç±»æ¥è·å–ç½‘ç»œæ¥å£çš„ä¿¡æ¯ï¼Œç„¶åç´¯è®¡æ‰€æœ‰ç½‘ç»œæ¥å£çš„ä¼ è¾“æ•°æ®é‡æ¥ä¼°ç®—å¸¦å®½ä½¿ç”¨ã€‚</p><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ä»£ç ï¼Œç”¨äºæ˜¾ç¤ºå½“å‰è¿›ç¨‹çš„ç½‘ç»œä¼ è¾“æ•°æ®é‡ï¼ˆå‘é€å’Œæ¥æ”¶ï¼‰ï¼š</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Diagnostics;</span><br><span class="line"><span class="keyword">using</span> System.Net.NetworkInformation;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Process currentProcess = Process.GetCurrentProcess();</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;Process ID: <span class="subst">&#123;currentProcess.Id&#125;</span>&quot;</span>);</span><br><span class="line"> </span><br><span class="line">        IPGlobalProperties ipProperties = IPGlobalProperties.GetIPGlobalProperties();</span><br><span class="line">        TcpStatistics tcpStats = ipProperties.GetTcpIPv4Statistics();</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;Total bytes received: <span class="subst">&#123;tcpStats.BytesReceived&#125;</span>&quot;</span>);</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;Total bytes sent: <span class="subst">&#123;tcpStats.BytesSent&#125;</span>&quot;</span>);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// è¾“å‡ºç½‘ç»œæ¥å£ç»Ÿè®¡ä¿¡æ¯</span></span><br><span class="line">        NetworkInterface[] networkInterfaces = NetworkInterface.GetAllNetworkInterfaces();</span><br><span class="line">        <span class="keyword">foreach</span> (NetworkInterface networkInterface <span class="keyword">in</span> networkInterfaces)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;Interface: <span class="subst">&#123;networkInterface.Name&#125;</span>&quot;</span>);</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;Bytes received: <span class="subst">&#123;networkInterface.GetIPv4Statistics().BytesReceived&#125;</span>&quot;</span>);</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;Bytes sent: <span class="subst">&#123;networkInterface.GetIPv4Statistics().BytesSent&#125;</span>&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯·æ³¨æ„ï¼Œè¿™ä¸ªç¤ºä¾‹æ˜¾ç¤ºçš„æ˜¯ä»ç³»ç»Ÿå¯åŠ¨ä»¥æ¥ç´¯è®¡çš„ç½‘ç»œæ¥å£æ•°æ®é‡ã€‚å¦‚æœä½ éœ€è¦ç›‘æµ‹ç‰¹å®šæ—¶é—´æ®µå†…çš„å¸¦å®½ä½¿ç”¨æƒ…å†µï¼Œä½ éœ€è¦å®šæœŸè·å–æ•°æ®å¹¶è®¡ç®—å·®å€¼ã€‚å¦å¤–ï¼Œè¿™ä¸ªç¤ºä¾‹ä»…åŒ…æ‹¬äº†IPv4çš„æ•°æ®ï¼Œå¦‚æœéœ€è¦IPv6æˆ–è€…æ›´å¤šç»†èŠ‚ï¼Œè¯·ç›¸åº”åœ°æ‰©å±•ä»£ç ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> debian </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Debian Nodejs HEXO</title>
      <link href="/2024/05/03/Debian-hexo/"/>
      <url>/2024/05/03/Debian-hexo/</url>
      
        <content type="html"><![CDATA[<p>Debian Nodejs HEXO </p><h1 id="å®‰è£…Node-jsç¯å¢ƒ"><a href="#å®‰è£…Node-jsç¯å¢ƒ" class="headerlink" title="å®‰è£…Node.jsç¯å¢ƒ"></a>å®‰è£…Node.jsç¯å¢ƒ</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br></pre></td></tr></table></figure><p>debianå®‰è£…æœ€æ–°node v20.12.0<br>åœ¨Debianç³»ç»Ÿä¸Šå®‰è£…ç‰¹å®šç‰ˆæœ¬çš„Node.jsï¼ˆä¾‹å¦‚v20.12.0ï¼‰ï¼Œä½ å¯ä»¥ä½¿ç”¨NodeSourceäºŒè¿›åˆ¶åˆ†å‘ã€‚ä»¥ä¸‹æ˜¯å®‰è£…v20.12.0çš„æ­¥éª¤ï¼š</p><p>é¦–å…ˆï¼Œæ‰“å¼€ç»ˆç«¯ã€‚</p><p>ä½¿ç”¨curlä¸‹è½½NodeSourceçš„å®‰è£…è„šæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -</span><br></pre></td></tr></table></figure><p>å®‰è£…Node.jsï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install -y nodejs</span><br></pre></td></tr></table></figure><p>éªŒè¯Node.jsæ˜¯å¦å®‰è£…æˆåŠŸï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node --version</span><br></pre></td></tr></table></figure><p>å¦‚æœä½ æƒ³è¦ç¡®ä¿å®‰è£…äº†ç‰¹å®šçš„v20.12.0ç‰ˆæœ¬ï¼Œå¯ä»¥åœ¨å®‰è£…å®ŒNode.jsåè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥éªŒè¯ç‰ˆæœ¬ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br></pre></td></tr></table></figure><p>å¦‚æœæ˜¾ç¤ºçš„ç‰ˆæœ¬å·æ˜¯v20.12.0ï¼Œåˆ™è¡¨ç¤ºå·²ç»æˆåŠŸå®‰è£…äº†è¯¥ç‰ˆæœ¬ã€‚</p><h1 id="å®‰è£…HEXO"><a href="#å®‰è£…HEXO" class="headerlink" title="å®‰è£…HEXO"></a>å®‰è£…HEXO</h1><p>ä½¿ç”¨npmåŒ…ç®¡ç†å™¨ï¼Œç›´æ¥å®‰è£…hexo </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo -g</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo init blog</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> blog </span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo server</span><br></pre></td></tr></table></figure><h1 id="hexo-ä¿®æ”¹ç«¯å£å·"><a href="#hexo-ä¿®æ”¹ç«¯å£å·" class="headerlink" title="hexo ä¿®æ”¹ç«¯å£å·"></a>hexo ä¿®æ”¹ç«¯å£å·</h1><p>_config.yml  # æˆ–è€…ä½¿ç”¨ vim _config.yml</p><h2 id="Docs-https-hexo-io-docs-server-html"><a href="#Docs-https-hexo-io-docs-server-html" class="headerlink" title="Docs: https://hexo.io/docs/server.html"></a>Docs: <a href="https://hexo.io/docs/server.html">https://hexo.io/docs/server.html</a></h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">12311</span>  <span class="comment"># ä¿®æ”¹è¿™é‡Œä¸ºä½ æƒ³è¦çš„ç«¯å£å·</span></span><br><span class="line">  <span class="attr">compress:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">header:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>.NET netty proto</title>
      <link href="/2024/05/03/NET-netty-proto/"/>
      <url>/2024/05/03/NET-netty-proto/</url>
      
        <content type="html"><![CDATA[<p>DotNettyæ˜¯å¾®è½¯çš„Azureå›¢é˜Ÿï¼Œä½¿ç”¨C#å®ç°çš„Nettyçš„ç‰ˆæœ¬å‘å¸ƒã€‚ä¸ä½†ä½¿ç”¨äº†C#å’Œ.Netå¹³å°çš„æŠ€æœ¯ç‰¹ç‚¹ï¼Œå¹¶ä¸”ä¿ç•™äº†NettyåŸæ¥ç»å¤§éƒ¨åˆ†çš„ç¼–ç¨‹æ¥å£ã€‚è®©æˆ‘ä»¬åœ¨ä½¿ç”¨æ—¶ï¼Œå®Œå…¨å¯ä»¥ä¾ç…§Nettyå®˜æ–¹çš„æ•™ç¨‹æ¥å­¦ä¹ å’Œä½¿ç”¨DotNettyåº”ç”¨ç¨‹åºã€‚</p><p>Netty æ˜¯ä¸€ä¸ªå¼‚æ­¥äº‹ä»¶é©±åŠ¨çš„ç½‘ç»œåº”ç”¨ç¨‹åºæ¡†æ¶ï¼Œç”¨äºå¿«é€Ÿå¼€å‘å¯ç»´æŠ¤çš„é«˜æ€§èƒ½åè®®æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ã€‚</p><p>ä¼˜ç‚¹<br>å…³æ³¨ç‚¹åˆ†ç¦»â€”â€”ä¸šåŠ¡å’Œç½‘ç»œé€»è¾‘è§£è€¦ï¼›<br>æ¨¡å—åŒ–å’Œå¯å¤ç”¨æ€§ï¼›<br>å¯æµ‹è¯•æ€§ä½œä¸ºé¦–è¦çš„è¦æ±‚<br>å†å²<br>é˜»å¡Socketé€šä¿¡ç‰¹ç‚¹ï¼š</p><p>å»ºç«‹è¿æ¥è¦é˜»å¡çº¿ç¨‹ï¼Œè¯»å–æ•°æ®è¦é˜»å¡çº¿ç¨‹<br>å¦‚æœè¦ç®¡ç†å¤šä¸ªå®¢æˆ·ç«¯ï¼Œå°±éœ€è¦ä¸ºæ¯ä¸ªå®¢æˆ·ç«¯å»ºç«‹ä¸åŒçš„çº¿ç¨‹<br>ä¼šæœ‰å¤§é‡çš„çº¿ç¨‹åœ¨ä¼‘çœ çŠ¶æ€ï¼Œç­‰å¾…æ¥æ”¶æ•°æ®ï¼Œèµ„æºæµªè´¹<br>æ¯ä¸ªçº¿ç¨‹éƒ½è¦å ç”¨ç³»ç»Ÿèµ„æº<br>çº¿ç¨‹çš„åˆ‡æ¢å¾ˆè€—è´¹ç³»ç»Ÿèµ„æº<br>éé˜»å¡Socketï¼ˆNIOï¼‰ç‰¹ç‚¹ï¼š<br>æ¯ä¸ªSocketå¦‚æœéœ€è¦è¯»å†™æ“ä½œï¼Œéƒ½é€šè¿‡äº‹ä»¶é€šçŸ¥çš„æ–¹å¼é€šçŸ¥é€‰æ‹©å™¨ï¼Œè¿™æ ·å°±å®ç°äº†ä¸€ä¸ªçº¿ç¨‹ç®¡ç†å¤šä¸ªSocketçš„ç›®çš„ã€‚<br>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240504.jpg"></p><p>é€‰æ‹©å™¨ç”šè‡³å¯ä»¥åœ¨æ‰€æœ‰çš„Socketç©ºé—²çš„æ—¶å€™å…è®¸çº¿ç¨‹å…ˆå»å¹²åˆ«çš„äº‹æƒ…<br>å‡å°‘äº†çº¿ç¨‹æ•°é‡å¯¼è‡´çš„èµ„æºå ç”¨ï¼Œå‡å°‘äº†çº¿ç¨‹åˆ‡æ¢å¯¼è‡´çš„èµ„æºæ¶ˆè€—</p><p>Protobuf<br>wakeng</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> .NET </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>.NET æ£€æµ‹åœ°å€/ä¸»æœº/åŸŸåæ˜¯å¦æ­£å¸¸</title>
      <link href="/2024/04/28/NET-IP-Host/"/>
      <url>/2024/04/28/NET-IP-Host/</url>
      
        <content type="html"><![CDATA[<!----><p>ğŸŒ±PINGÂ åœ°å€&#x2F;ä¸»æœºå&#x2F;åŸŸå</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> PING</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;ip&quot;&gt;</span>ip<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">bool</span> <span class="title">PingIp</span>(<span class="params"><span class="built_in">string</span> ip</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    System.Net.NetworkInformation.Ping p = <span class="keyword">new</span> System.Net.NetworkInformation.Ping();</span><br><span class="line">    System.Net.NetworkInformation.PingOptions options = <span class="keyword">new</span> System.Net.NetworkInformation.PingOptions();</span><br><span class="line">    options.DontFragment = <span class="literal">true</span>;</span><br><span class="line">    <span class="built_in">string</span> data = <span class="string">&quot;Test Data!&quot;</span>;</span><br><span class="line">    <span class="built_in">byte</span>[] buffer = Encoding.ASCII.GetBytes(data);</span><br><span class="line">    <span class="built_in">int</span> timeout = <span class="number">2000</span>; <span class="comment">// Timeout</span></span><br><span class="line">    System.Net.NetworkInformation.PingReply reply = p.Send(ip, timeout, buffer, options);</span><br><span class="line">    <span class="keyword">if</span> (reply.Status == System.Net.NetworkInformation.IPStatus.Success)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="comment">//  AddToConvo(ip + reply.Status);</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">       <span class="comment">// AddToConvo(ip + reply.Status);</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ğŸ‘€è°ƒç”¨æ–¹æ³•</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">List&lt;<span class="built_in">string</span>&gt; list = <span class="keyword">new</span> List&lt;<span class="built_in">string</span>&gt;();</span><br><span class="line">list.Add(<span class="string">&quot;192.168.1.1&quot;</span>);</span><br><span class="line">list.Add(<span class="string">&quot;192.168.3.1&quot;</span>);</span><br><span class="line">list.Add(<span class="string">&quot;192.168.4.1&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">foreach</span> (<span class="built_in">string</span> s <span class="keyword">in</span> list)</span><br><span class="line">&#123;</span><br><span class="line">   Console.WriteLine(s+<span class="string">&quot; &quot;</span>+ ccPing.PingIp(s));</span><br><span class="line">      <span class="comment">//if(!xxx) </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Thread.Sleep(<span class="number">10000</span>);</span><br></pre></td></tr></table></figure>   <!-- <img src="https://cdn.jsdelivr.net/gh/qfsysw/res/v1/111.png"> --><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v1/111.png"></p><p>éš”10ç§’è‡ªåŠ¨è°ƒç”¨1æ¬¡Â </p><p>Â </p><p>ğŸ“«æ£€æŸ¥URL</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">async</span> Task&lt;<span class="built_in">bool</span>&gt; <span class="title">IsServerRespondingAsync</span>(<span class="params"><span class="built_in">string</span> url, TimeSpan timeout</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">using</span> (<span class="keyword">var</span> cancellationTokenSource = <span class="keyword">new</span> System.Threading.CancellationTokenSource())</span><br><span class="line">        &#123;</span><br><span class="line">            cancellationTokenSource.CancelAfter(timeout);</span><br><span class="line">            <span class="keyword">var</span> response = <span class="keyword">await</span> _httpClient.GetAsync(url, cancellationTokenSource.Token);</span><br><span class="line">            <span class="keyword">return</span> response.IsSuccessStatusCode;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (TaskCanceledException)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// è¯·æ±‚è¶…æ—¶</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (Exception)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// å‘ç”Ÿå…¶ä»–é”™è¯¯</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>âš¡å¼‚æ­¥è°ƒç”¨</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">await</span> checker.IsServerRespondingAsync(url, TimeSpan.FromSeconds(<span class="number">2</span>));</span><br></pre></td></tr></table></figure><p>å¦‚æœFalseå¯ä»¥è°ƒç”¨æŠ¥è­¦ä»£ç </p><p>END</p><p>â€‹</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> .NET </tag>
            
            <tag> spider </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>.NET Avalonia Linux </title>
      <link href="/2024/04/27/NET-Avalonia/"/>
      <url>/2024/04/27/NET-Avalonia/</url>
      
        <content type="html"><![CDATA[<p>ç¯å¢ƒWIN10  VS2022  debian</p><h1 id="ğŸ‘»å‰è¨€"><a href="#ğŸ‘»å‰è¨€" class="headerlink" title="ğŸ‘»å‰è¨€"></a>ğŸ‘»å‰è¨€</h1><p>Avalonia æ˜¯ä¸€ä¸ªç”¨äºåˆ›å»ºè·¨å¹³å°ç”¨æˆ·ç•Œé¢ (UI) çš„å¼€æºæ¡†æ¶ã€‚å®ƒæ˜¯ä¸€ä¸ªåŸºäº .NET å¹³å°çš„æ¡†æ¶ï¼Œå…è®¸å¼€å‘è€…ä½¿ç”¨ XAML å’Œ C#ï¼ˆF#ï¼‰æ¥æ„å»ºè·¨å¹³å°çš„åº”ç”¨ç¨‹åºã€‚Avalonia çš„ç›®æ ‡æ˜¯æä¾›ä¸ Windows Presentation Foundation (WPF) ç±»ä¼¼çš„å¼€å‘ä½“éªŒï¼Œä½†èƒ½å¤Ÿåœ¨ Windowsã€macOS å’Œ Linux ç­‰å¤šä¸ªå¹³å°ä¸Šè¿è¡Œã€‚</p><p>ä½¿ç”¨ Avaloniaï¼Œå¼€å‘è€…å¯ä»¥åˆ›å»ºå„ç§ç±»å‹çš„åº”ç”¨ç¨‹åºï¼ŒåŒ…æ‹¬æ¡Œé¢åº”ç”¨ã€ç§»åŠ¨åº”ç”¨å’ŒåµŒå…¥å¼åº”ç”¨ã€‚ä¸€äº›å¯ä»¥é€šè¿‡ Avalonia å®ç°çš„åŠŸèƒ½å’Œåº”ç”¨åŒ…æ‹¬ï¼š</p><p>æ¡Œé¢åº”ç”¨ç¨‹åºï¼šå¦‚åŠå…¬è½¯ä»¶ã€IDEã€æ¸¸æˆå®¢æˆ·ç«¯ç­‰ã€‚</p><p>ç§»åŠ¨åº”ç”¨ç¨‹åºï¼šé€šè¿‡ Avalonia å¯ä»¥æ„å»ºæ”¯æŒå¤šä¸ªå¹³å°çš„ç§»åŠ¨åº”ç”¨ï¼Œå¦‚ Windowsã€macOS å’Œ Linux ä¸Šçš„ç§»åŠ¨åº”ç”¨ã€‚</p><p>è·¨å¹³å°å·¥å…·ï¼šAvalonia å¯ä»¥ç”¨äºæ„å»ºè·¨å¹³å°çš„å¼€å‘å·¥å…·ã€å®ç”¨å·¥å…·ç­‰ã€‚</p><p>æ¸¸æˆå¼€å‘ï¼šAvalonia ä¹Ÿå¯ä»¥ç”¨äºæ„å»ºæ¸¸æˆçš„ç”¨æˆ·ç•Œé¢ï¼Œé€‚åˆåŸºäº .NET å¹³å°çš„æ¸¸æˆå¼€å‘ã€‚</p><p>Avalonia æä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·é›†ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿåˆ›å»ºå…·æœ‰å„ç§åŠŸèƒ½å’Œæ ·å¼çš„è·¨å¹³å°åº”ç”¨ç¨‹åºã€‚</p><p>ğŸ’»å®‰è£…Avalonia<br>é€‰æ‹©ç®¡ç†æ‹“å±•ï¼Œç‚¹å‡»ä¸‹è½½ï¼Œå®‰è£…</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240427a.jpg"></p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240427b.jpg"></p><h1 id="ğŸ“¦åˆ›å»ºé¡¹ç›®"><a href="#ğŸ“¦åˆ›å»ºé¡¹ç›®" class="headerlink" title="ğŸ“¦åˆ›å»ºé¡¹ç›®"></a>ğŸ“¦åˆ›å»ºé¡¹ç›®</h1><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240427c.jpg"></p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240427d.jpg"></p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240427e.jpg"></p><p>ç¼–ç â€¦</p><h1 id="ğŸ“šåœ¨winä¸‹è¿è¡Œ"><a href="#ğŸ“šåœ¨winä¸‹è¿è¡Œ" class="headerlink" title="ğŸ“šåœ¨winä¸‹è¿è¡Œ"></a>ğŸ“šåœ¨winä¸‹è¿è¡Œ</h1><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240427f.jpg"></p><p>æŸ¥çœ‹linuxå†…æ ¸</p><p>uname -a</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240427g.jpg"></p><h1 id="ğŸ”‘æ‰“åŒ…å‘å¸ƒ"><a href="#ğŸ”‘æ‰“åŒ…å‘å¸ƒ" class="headerlink" title="ğŸ”‘æ‰“åŒ…å‘å¸ƒ"></a>ğŸ”‘æ‰“åŒ…å‘å¸ƒ</h1><p>å¤åˆ¶åˆ°linux</p><p>æˆäºˆæƒé™</p><h1 id="ğŸ“»åœ¨linuxä¸‹è¿è¡Œ"><a href="#ğŸ“»åœ¨linuxä¸‹è¿è¡Œ" class="headerlink" title="ğŸ“»åœ¨linuxä¸‹è¿è¡Œ"></a>ğŸ“»åœ¨linuxä¸‹è¿è¡Œ</h1><p>è¿ç§»Socketå‘å¸ƒåˆ°linux<br>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240427h.jpg"></p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240427i.jpg"></p><p>å®ç°win linux web åŸºäºsocketå®æ—¶èŠå¤©</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> .NET </tag>
            
            <tag> Avalonia </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Debian Gnome-Desktop GUI </title>
      <link href="/2024/04/26/Debian-Gnome-Desktop-GUI/"/>
      <url>/2024/04/26/Debian-Gnome-Desktop-GUI/</url>
      
        <content type="html"><![CDATA[<p>debian   gnome-desktop</p><h1 id="ğŸŒæ›´æ–°"><a href="#ğŸŒæ›´æ–°" class="headerlink" title="ğŸŒæ›´æ–°"></a>ğŸŒæ›´æ–°</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line"></span><br><span class="line">[2024042601]</span><br><span class="line">sudo apt -y upgrade</span><br></pre></td></tr></table></figure><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024042602.jpg"></p><h1 id="ğŸ¨å®‰è£…"><a href="#ğŸ¨å®‰è£…" class="headerlink" title="ğŸ¨å®‰è£…"></a>ğŸ¨å®‰è£…</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt -y install task-gnome-desktop</span><br></pre></td></tr></table></figure><p> è¿™ä¸ªè¿‡ç¨‹æ¯”è¾ƒä¹…</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024042603.jpg"></p><h1 id="ğŸåˆ†é…"><a href="#ğŸåˆ†é…" class="headerlink" title="ğŸåˆ†é…"></a>ğŸåˆ†é…</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl set-default graphical.target</span><br><span class="line">vi /etc/pam.d/gdm-password</span><br><span class="line">``` bash</span><br><span class="line">æ³¨é‡Š auth required pam_succeed_if.so user != root quiet_success</span><br><span class="line">``` bash</span><br><span class="line"><span class="comment">#auth required pam_succeed_if.so user != root quiet_success</span></span><br></pre></td></tr></table></figure><h1 id="ğŸ›‹ï¸é‡å¯"><a href="#ğŸ›‹ï¸é‡å¯" class="headerlink" title="ğŸ›‹ï¸é‡å¯"></a>ğŸ›‹ï¸é‡å¯</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo reboot</span><br></pre></td></tr></table></figure><h1 id="ğŸ”‘é€šè¿‡VNCè¿æ¥"><a href="#ğŸ”‘é€šè¿‡VNCè¿æ¥" class="headerlink" title="ğŸ”‘é€šè¿‡VNCè¿æ¥"></a>ğŸ”‘é€šè¿‡VNCè¿æ¥</h1><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024042604.jpg"></p><p>é…ç½®å</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024042605.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> debian </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HarmonyOSå¼€å‘ç¯å¢ƒæ­å»º ç§»åŠ¨å¼€å‘ é¸¿è’™å¼€å‘ ArkTS</title>
      <link href="/2024/04/21/HarmonyOS-Base/"/>
      <url>/2024/04/21/HarmonyOS-Base/</url>
      
        <content type="html"><![CDATA[<h1 id="ğŸ’¡-ç¯å¢ƒæ­å»º"><a href="#ğŸ’¡-ç¯å¢ƒæ­å»º" class="headerlink" title="ğŸ’¡ ç¯å¢ƒæ­å»º"></a>ğŸ’¡ ç¯å¢ƒæ­å»º</h1><p>HarmonyOSå¼€å‘ç¯å¢ƒæ­å»º</p><p> DevEco Studioå®‰è£…<br><a href="https://developer.huawei.com/consumer/cn/deveco-studio/">https://developer.huawei.com/consumer/cn/deveco-studio/</a></p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@v5/v2/2024042110.jpg"></p><h1 id="ğŸš€å®‰è£…nodejs"><a href="#ğŸš€å®‰è£…nodejs" class="headerlink" title="ğŸš€å®‰è£…nodejs"></a>ğŸš€å®‰è£…nodejs</h1><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@v5/v2/2024042111.jpg"></p><h1 id="ğŸ¤µå®‰è£…ohpm"><a href="#ğŸ¤µå®‰è£…ohpm" class="headerlink" title="ğŸ¤µå®‰è£…ohpm"></a>ğŸ¤µå®‰è£…ohpm</h1><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@v5/v2/2024042112.jpg"></p><h1 id="ğŸ”å®‰è£…SDK"><a href="#ğŸ”å®‰è£…SDK" class="headerlink" title="ğŸ”å®‰è£…SDK"></a>ğŸ”å®‰è£…SDK</h1><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@v5/v2/2024042113.jpg"></p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@v5/v2/2024042114.jpg"></p><h1 id="ğŸ’¥Emulatorå®‰è£…"><a href="#ğŸ’¥Emulatorå®‰è£…" class="headerlink" title="ğŸ’¥Emulatorå®‰è£…"></a>ğŸ’¥Emulatorå®‰è£…</h1><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@v5/v2/2024042115.jpg"></p><p>Q:The graphic card OpenGL version is too old for Previewer to work..</p><p>è§£å†³æ–¹æ³•åˆ†ä¸¤æ­¥ï¼š</p><p>1ã€ä¸‹è½½enGLåº“ï¼š<a href="https://github.com/pal1000/mesa-dist-win/releases/download/23.1.1/mesa3d-23.1.1-release-msvc.7z">https://github.com/pal1000/mesa-dist-win/releases/download/23.1.1/mesa3d-23.1.1-release-msvc.7z</a></p><p>2ã€è§£å‹ä¸‹è½½çš„zipæ–‡ä»¶,åŒå‡»æ‰§è¡Œsystemwidedeploy.cmdæ–‡ä»¶ï¼Œç„¶åæŒ‰ä»»æ„é”®ï¼Œå‡ºç°ä¸€ä¸ªèœå•ï¼Œé€‰æ‹©1ï¼Œç„¶åå¼€å§‹å®‰è£…OpenGLé©±åŠ¨ï¼Œå‡ºç°complete åå…³é—­ç»ˆç«¯ï¼Œé‡æ–°è¿è¡Œç¨‹åºå³å¯ç”Ÿæ•ˆã€‚</p><h1 id="ğŸŒ¶ï¸æ–°å»ºArkTsé¡¹ç›®"><a href="#ğŸŒ¶ï¸æ–°å»ºArkTsé¡¹ç›®" class="headerlink" title="ğŸŒ¶ï¸æ–°å»ºArkTsé¡¹ç›®"></a>ğŸŒ¶ï¸æ–°å»ºArkTsé¡¹ç›®</h1><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@v5/v2/2024042116.jpg"></p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@v5/v2/2024042117.jpg"></p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@v5/v2/2024042118.jpg"></p><p>entryï¼šHarmonyOSå·¥ç¨‹æ¨¡å—ï¼Œç¼–è¯‘æ„å»ºç”Ÿæˆä¸€ä¸ªHAPåŒ…ã€‚</p><p>src &gt; main &gt; etsï¼šç”¨äºå­˜æ”¾etsæºç ã€‚<br>src &gt; main &gt; ets &gt; MainAbilityï¼šåº”ç”¨&#x2F;æœåŠ¡çš„å…¥å£ã€‚<br>src &gt; main &gt; ets &gt; MainAbility &gt; pagesï¼šMainAbilityåŒ…å«çš„é¡µé¢ã€‚<br>src &gt; main &gt; ets &gt; MainAbility &gt; pages &gt; index.etsï¼špagesåˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªé¡µé¢ï¼Œå³åº”ç”¨çš„é¦–é¡µå…¥å£ã€‚<br>src &gt; main &gt; ets &gt; MainAbility &gt; app.etsï¼šæ‰¿è½½Abilityç”Ÿå‘½å‘¨æœŸã€‚<br>src &gt; main &gt; resourcesï¼šç”¨äºå­˜æ”¾åº”ç”¨&#x2F;æœåŠ¡æ‰€ç”¨åˆ°çš„èµ„æºæ–‡ä»¶ï¼Œå¦‚å›¾å½¢ã€å¤šåª’ä½“ã€å­—ç¬¦ä¸²ã€å¸ƒå±€æ–‡ä»¶ç­‰ã€‚<br>src &gt; main &gt; config.jsonï¼šæ¨¡å—é…ç½®æ–‡ä»¶ã€‚ä¸»è¦åŒ…å«HAPåŒ…çš„é…ç½®ä¿¡æ¯ã€åº”ç”¨&#x2F;æœåŠ¡åœ¨å…·ä½“è®¾å¤‡ä¸Šçš„é…ç½®ä¿¡æ¯ä»¥åŠåº”ç”¨&#x2F;æœåŠ¡çš„å…¨å±€é…ç½®ä¿¡æ¯ã€‚<br>build-profile.json5ï¼šå½“å‰çš„æ¨¡å—ä¿¡æ¯ã€ç¼–è¯‘ä¿¡æ¯é…ç½®é¡¹ï¼ŒåŒ…æ‹¬buildOptionã€targetsé…ç½®ç­‰ã€‚å…¶ä¸­targetsä¸­å¯é…ç½®å½“å‰è¿è¡Œç¯å¢ƒï¼Œé»˜è®¤ä¸ºHarmonyOSã€‚<br>hvigorfile.tsï¼šæ¨¡å—çº§ç¼–è¯‘æ„å»ºä»»åŠ¡è„šæœ¬ï¼Œå¼€å‘è€…å¯ä»¥è‡ªå®šä¹‰ç›¸å…³ä»»åŠ¡å’Œä»£ç å®ç°ã€‚<br>build-profile.json5ï¼šåº”ç”¨çº§é…ç½®ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç­¾åã€äº§å“é…ç½®ç­‰ã€‚</p><p>hvigorfile.tsï¼šåº”ç”¨çº§ç¼–è¯‘æ„å»ºä»»åŠ¡è„šæœ¬ã€‚</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@v5/v2/2024042119.jpg"></p><h1 id="ğŸ†ï¸ArkTSè¯­è¨€"><a href="#ğŸ†ï¸ArkTSè¯­è¨€" class="headerlink" title="ğŸ†ï¸ArkTSè¯­è¨€"></a>ğŸ†ï¸ArkTSè¯­è¨€</h1><p>ArkTSæ˜¯HarmonyOSä¼˜é€‰çš„ä¸»åŠ›åº”ç”¨å¼€å‘è¯­è¨€ã€‚</p><p>ArkTSå›´ç»•åº”ç”¨å¼€å‘åœ¨TypeScriptï¼ˆç®€ç§°TSï¼‰ç”Ÿæ€åŸºç¡€ä¸Šåšäº†è¿›ä¸€æ­¥æ‰©å±•ï¼Œç»§æ‰¿äº†TSçš„æ‰€æœ‰ç‰¹æ€§ï¼Œæ˜¯TSçš„è¶…é›†ã€‚å› æ­¤ï¼Œåœ¨å­¦ä¹ ArkTSè¯­è¨€ä¹‹å‰ï¼Œå»ºè®®å¼€å‘è€…å…·å¤‡TSè¯­è¨€å¼€å‘èƒ½åŠ›ã€‚</p><p>åŸºæœ¬è¯­æ³•ï¼šArkTSå®šä¹‰äº†å£°æ˜å¼UIæè¿°ã€è‡ªå®šä¹‰ç»„ä»¶å’ŒåŠ¨æ€æ‰©å±•UIå…ƒç´ çš„èƒ½åŠ›ï¼Œå†é…åˆArkUIå¼€å‘æ¡†æ¶ä¸­çš„ç³»ç»Ÿç»„ä»¶åŠå…¶ç›¸å…³çš„äº‹ä»¶æ–¹æ³•ã€å±æ€§æ–¹æ³•ç­‰å…±åŒæ„æˆäº†UIå¼€å‘çš„ä¸»ä½“ã€‚<br>çŠ¶æ€ç®¡ç†ï¼šArkTSæä¾›äº†å¤šç»´åº¦çš„çŠ¶æ€ç®¡ç†æœºåˆ¶ã€‚åœ¨UIå¼€å‘æ¡†æ¶ä¸­ï¼Œä¸UIç›¸å…³è”çš„æ•°æ®å¯ä»¥åœ¨ç»„ä»¶<br>å†…ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨ä¸åŒç»„ä»¶å±‚çº§é—´ä¼ é€’ï¼Œæ¯”å¦‚çˆ¶å­ç»„ä»¶ä¹‹é—´ã€çˆ·å­™ç»„ä»¶ä¹‹é—´ï¼Œè¿˜å¯ä»¥åœ¨åº”ç”¨å…¨å±€èŒƒ<br>å›´å†…ä¼ é€’æˆ–è·¨è®¾å¤‡ä¼ é€’ã€‚å¦å¤–ï¼Œä»æ•°æ®çš„ä¼ é€’å½¢å¼æ¥çœ‹ï¼Œå¯åˆ†ä¸ºåªè¯»çš„å•å‘ä¼ é€’å’Œå¯å˜æ›´çš„åŒå‘ä¼ <br>é€’ã€‚å¼€å‘è€…å¯ä»¥çµæ´»åœ°åˆ©ç”¨è¿™äº›èƒ½åŠ›æ¥å®ç°æ•°æ®å’ŒUIçš„è”åŠ¨ã€‚<br>æ¸²æŸ“æ§åˆ¶ï¼šArkTSæä¾›äº†æ¸²æŸ“æ§åˆ¶çš„èƒ½åŠ›ã€‚æ¡ä»¶æ¸²æŸ“å¯æ ¹æ®åº”ç”¨çš„ä¸åŒçŠ¶æ€ï¼Œæ¸²æŸ“å¯¹åº”çŠ¶æ€ä¸‹çš„UI<br>å†…å®¹ã€‚å¾ªç¯æ¸²æŸ“å¯ä»æ•°æ®æºä¸­è¿­ä»£è·å–æ•°æ®ï¼Œå¹¶åœ¨æ¯æ¬¡è¿­ä»£è¿‡ç¨‹ä¸­åˆ›å»ºç›¸åº”çš„ç»„ä»¶ã€‚æ•°æ®æ‡’åŠ è½½ä»<br>æ•°æ®æºä¸­æŒ‰éœ€è¿­ä»£æ•°æ®ï¼Œå¹¶åœ¨æ¯æ¬¡è¿­ä»£è¿‡ç¨‹ä¸­åˆ›å»ºç›¸åº”çš„ç»„ä»¶ã€‚<br>æœªæ¥ï¼ŒArkTSä¼šç»“åˆåº”ç”¨å¼€å‘&#x2F;è¿è¡Œçš„éœ€æ±‚æŒç»­æ¼”è¿›ï¼Œé€æ­¥æä¾›å¹¶è¡Œå’Œå¹¶å‘èƒ½åŠ›å¢å¼ºã€ç³»ç»Ÿç±»å‹å¢å¼ºã€åˆ†å¸ƒå¼å¼€å‘èŒƒå¼ç­‰æ›´å¤šç‰¹æ€§ã€‚</p><h1 id="âœ¨ï¸åŸºæœ¬è¯­æ³•"><a href="#âœ¨ï¸åŸºæœ¬è¯­æ³•" class="headerlink" title="âœ¨ï¸åŸºæœ¬è¯­æ³•"></a>âœ¨ï¸åŸºæœ¬è¯­æ³•</h1><p>åŸºæœ¬è¯­æ³•æ¦‚è¿°<br>åœ¨åˆæ­¥äº†è§£äº†ArkTSè¯­è¨€ä¹‹åï¼Œæˆ‘ä»¬ä»¥ä¸€ä¸ªå…·ä½“çš„ç¤ºä¾‹æ¥è¯´æ˜ArkTSçš„åŸºæœ¬ç»„æˆã€‚<br>è£…é¥°å™¨ï¼š ç”¨äºè£…é¥°ç±»ã€ç»“æ„ã€æ–¹æ³•ä»¥åŠå˜é‡ï¼Œå¹¶èµ‹äºˆå…¶ç‰¹æ®Šçš„å«ä¹‰ã€‚å¦‚ä¸Šè¿°ç¤ºä¾‹ä¸­@Entryã€<br>@Componentå’Œ@Stateéƒ½æ˜¯è£…é¥°å™¨ï¼Œ@Componentè¡¨ç¤ºè‡ªå®šä¹‰ç»„ä»¶ï¼Œ@Entryè¡¨ç¤ºè¯¥è‡ªå®šä¹‰ç»„ä»¶<br>ä¸ºå…¥å£ç»„ä»¶ï¼Œ@Stateè¡¨ç¤ºç»„ä»¶ä¸­çš„çŠ¶æ€å˜é‡ï¼ŒçŠ¶æ€å˜é‡å˜åŒ–ä¼šè§¦å‘UIåˆ·æ–°ã€‚<br>UIæè¿°ï¼šä»¥å£°æ˜å¼çš„æ–¹å¼æ¥æè¿°UIçš„ç»“æ„ï¼Œä¾‹å¦‚build()æ–¹æ³•ä¸­çš„ä»£ç å—ã€‚<br>è‡ªå®šä¹‰ç»„ä»¶ï¼šå¯å¤ç”¨çš„UIå•å…ƒï¼Œå¯ç»„åˆå…¶ä»–ç»„ä»¶ï¼Œå¦‚ä¸Šè¿°è¢«@Componentè£…é¥°çš„struct Helloã€‚<br>ç³»ç»Ÿç»„ä»¶ï¼šArkUIæ¡†æ¶ä¸­é»˜è®¤å†…ç½®çš„åŸºç¡€å’Œå®¹å™¨ç»„ä»¶ï¼Œå¯ç›´æ¥è¢«å¼€å‘è€…è°ƒç”¨ï¼Œæ¯”å¦‚ç¤ºä¾‹ä¸­çš„<br>Columnã€Textã€Dividerã€Buttonã€‚<br>å±æ€§æ–¹æ³•ï¼šç»„ä»¶å¯ä»¥é€šè¿‡é“¾å¼è°ƒç”¨é…ç½®å¤šé¡¹å±æ€§ï¼Œå¦‚fontSize()ã€width()ã€height()ã€<br>backgroundColor()ç­‰ã€‚<br>äº‹ä»¶æ–¹æ³•ï¼šç»„ä»¶å¯ä»¥é€šè¿‡é“¾å¼è°ƒç”¨è®¾ç½®å¤šä¸ªäº‹ä»¶çš„å“åº”é€»è¾‘ï¼Œå¦‚è·Ÿéšåœ¨Buttonåé¢çš„onClick()ã€‚<br>ç³»ç»Ÿç»„ä»¶ã€å±æ€§æ–¹æ³•ã€äº‹ä»¶æ–¹æ³•å…·ä½“ä½¿ç”¨å¯å‚è€ƒåŸºäºArkTSçš„å£°æ˜å¼å¼€å‘èŒƒå¼ã€‚<br>é™¤æ­¤ä¹‹å¤–ï¼ŒArkTSæ‰©å±•äº†å¤šç§è¯­æ³•èŒƒå¼æ¥ä½¿å¼€å‘æ›´åŠ ä¾¿æ·ï¼š</p><p>@Builder&#x2F;@BuilderParamï¼šç‰¹æ®Šçš„å°è£…UIæè¿°çš„æ–¹æ³•ï¼Œç»†ç²’åº¦çš„å°è£…å’Œå¤ç”¨UIæè¿°ã€‚<br>@Extend&#x2F;@Stylesï¼šæ‰©å±•å†…ç½®ç»„ä»¶å’Œå°è£…å±æ€§æ ·å¼ï¼Œæ›´çµæ´»åœ°ç»„åˆå†…ç½®ç»„ä»¶ã€‚<br>stateStylesï¼šå¤šæ€æ ·å¼ï¼Œå¯ä»¥ä¾æ®ç»„ä»¶çš„å†…éƒ¨çŠ¶æ€çš„ä¸åŒï¼Œè®¾ç½®ä¸åŒæ ·å¼ã€‚</p><h1 id="ğŸ¥‡-å£°æ˜å¼UIæè¿°"><a href="#ğŸ¥‡-å£°æ˜å¼UIæè¿°" class="headerlink" title="ğŸ¥‡ å£°æ˜å¼UIæè¿°"></a>ğŸ¥‡ å£°æ˜å¼UIæè¿°</h1><p>ArkTSä»¥å£°æ˜æ–¹å¼ç»„åˆå’Œæ‰©å±•ç»„ä»¶æ¥æè¿°åº”ç”¨ç¨‹åºçš„UIï¼ŒåŒæ—¶è¿˜æä¾›äº†åŸºæœ¬çš„å±æ€§ã€äº‹ä»¶å’Œå­ç»„ä»¶é…ç½®æ–¹æ³•ï¼Œå¸®åŠ©æˆ‘ä»¬å®ç°åº”ç”¨äº¤äº’é€»è¾‘ã€‚<br>åˆ›å»ºç»„ä»¶<br>æ ¹æ®ç»„ä»¶æ„é€ æ–¹æ³•çš„ä¸åŒï¼Œåˆ›å»ºç»„ä»¶åŒ…å«æœ‰å‚æ•°å’Œæ— å‚æ•°ä¸¤ç§æ–¹å¼ã€‚<br>æ— å‚æ•°<br>å¦‚æœç»„ä»¶çš„æ¥å£å®šä¹‰æ²¡æœ‰åŒ…å«å¿…é€‰æ„é€ å‚æ•°ï¼Œåˆ™ç»„ä»¶åé¢çš„â€œ()â€ä¸éœ€è¦é…ç½®ä»»ä½•å†…å®¹ã€‚ä¾‹å¦‚ï¼ŒDividerç»„ä»¶ä¸åŒ…å«æ„é€ å‚æ•°</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Column</span>() &#123;</span><br><span class="line">    <span class="title class_">Text</span>(<span class="string">&#x27;item 1&#x27;</span>)</span><br><span class="line">    <span class="title class_">Divider</span>()</span><br><span class="line">    <span class="title class_">Text</span>(<span class="string">&#x27;item 2&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ‰å‚æ•°<br>å¦‚æœç»„ä»¶çš„æ¥å£å®šä¹‰åŒ…å«æ„é€ å‚æ•°ï¼Œåˆ™åœ¨ç»„ä»¶åé¢çš„â€œ()â€é…ç½®ç›¸åº”å‚æ•°ã€‚<br>Imageç»„ä»¶çš„å¿…é€‰å‚æ•°srcã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Image</span>(<span class="string">&#x27;https://xyz/test.jpg&#x27;</span>)</span><br></pre></td></tr></table></figure><p>Textç»„ä»¶çš„éå¿…é€‰å‚æ•°contentã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// stringç±»å‹çš„å‚æ•°</span></span><br><span class="line"><span class="title class_">Text</span>(<span class="string">&#x27;test&#x27;</span>)</span><br><span class="line"><span class="comment">// $rå½¢å¼å¼•å…¥åº”ç”¨èµ„æºï¼Œå¯åº”ç”¨äºå¤šè¯­è¨€åœºæ™¯</span></span><br><span class="line"><span class="title class_">Text</span>($r(<span class="string">&#x27;app.string.title_value&#x27;</span>))</span><br><span class="line"><span class="comment">// æ— å‚æ•°å½¢å¼</span></span><br><span class="line"><span class="title class_">Text</span>()</span><br></pre></td></tr></table></figure><p>å˜é‡æˆ–è¡¨è¾¾å¼ä¹Ÿå¯ä»¥ç”¨äºå‚æ•°èµ‹å€¼ï¼Œå…¶ä¸­è¡¨è¾¾å¼è¿”å›çš„ç»“æœç±»å‹å¿…é¡»æ»¡è¶³å‚æ•°ç±»å‹è¦æ±‚ã€‚<br>ä¾‹å¦‚ï¼Œè®¾ç½®å˜é‡æˆ–è¡¨è¾¾å¼æ¥æ„é€ Imageå’ŒTextç»„ä»¶çš„å‚æ•°ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Image</span>(<span class="variable language_">this</span>.<span class="property">imagePath</span>)</span><br><span class="line"><span class="title class_">Image</span>(<span class="string">&#x27;https://&#x27;</span> + <span class="variable language_">this</span>.<span class="property">imageUrl</span>)</span><br><span class="line"><span class="title class_">Text</span>(<span class="string">`count: <span class="subst">$&#123;<span class="variable language_">this</span>.count&#125;</span>`</span>)</span><br></pre></td></tr></table></figure><p>é…ç½®å±æ€§<br>å±æ€§æ–¹æ³•ä»¥â€œ.â€é“¾å¼è°ƒç”¨çš„æ–¹å¼é…ç½®ç³»ç»Ÿç»„ä»¶çš„æ ·å¼å’Œå…¶ä»–å±æ€§ï¼Œå»ºè®®æ¯ä¸ªå±æ€§æ–¹æ³•å•ç‹¬å†™ä¸€è¡Œã€‚<br>é…ç½®Textç»„ä»¶çš„å­—ä½“å¤§å°ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Text</span>(<span class="string">&#x27;test&#x27;</span>)</span><br><span class="line">.<span class="title function_">fontSize</span>(<span class="number">12</span>)</span><br></pre></td></tr></table></figure><p>é…ç½®ç»„ä»¶çš„å¤šä¸ªå±æ€§ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Image</span>(<span class="string">&#x27;test.jpg&#x27;</span>)</span><br><span class="line">.<span class="title function_">alt</span>(<span class="string">&#x27;error.jpg&#x27;</span>)</span><br><span class="line">.<span class="title function_">width</span>(<span class="number">100</span>)</span><br><span class="line">.<span class="title function_">height</span>(<span class="number">100</span>)</span><br></pre></td></tr></table></figure><p>é™¤äº†ç›´æ¥ä¼ é€’å¸¸é‡å‚æ•°å¤–ï¼Œè¿˜å¯ä»¥ä¼ é€’å˜é‡æˆ–è¡¨è¾¾å¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Text</span>(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line">.<span class="title function_">fontSize</span>(<span class="variable language_">this</span>.<span class="property">size</span>)</span><br><span class="line"><span class="title class_">Image</span>(<span class="string">&#x27;test.jpg&#x27;</span>)</span><br><span class="line">.<span class="title function_">width</span>(<span class="variable language_">this</span>.<span class="property">count</span> % <span class="number">2</span> === <span class="number">0</span> ? <span class="number">100</span> : <span class="number">200</span>)</span><br><span class="line">.<span class="title function_">height</span>(<span class="variable language_">this</span>.<span class="property">offset</span> + <span class="number">100</span>)</span><br></pre></td></tr></table></figure><p>å¯¹äºç³»ç»Ÿç»„ä»¶ï¼ŒArkUIè¿˜ä¸ºå…¶å±æ€§é¢„å®šä¹‰äº†ä¸€äº›æšä¸¾ç±»å‹ä¾›å¼€å‘è€…è°ƒç”¨ï¼Œæšä¸¾ç±»å‹å¯ä»¥ä½œä¸ºå‚æ•°ä¼ <br>é€’ï¼Œä½†å¿…é¡»æ»¡è¶³å‚æ•°ç±»å‹è¦æ±‚ã€‚<br>ä¾‹å¦‚ï¼Œå¯ä»¥æŒ‰ä»¥ä¸‹æ–¹å¼é…ç½®Textç»„ä»¶çš„é¢œè‰²å’Œå­—ä½“æ ·å¼ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Text</span>(<span class="string">&#x27;hello&#x27;</span>)</span><br><span class="line">.<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">.<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">.<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é…ç½®äº‹ä»¶<br>äº‹ä»¶æ–¹æ³•ä»¥â€œ.â€é“¾å¼è°ƒç”¨çš„æ–¹å¼é…ç½®ç³»ç»Ÿç»„ä»¶æ”¯æŒçš„äº‹ä»¶ï¼Œå»ºè®®æ¯ä¸ªäº‹ä»¶æ–¹æ³•å•ç‹¬å†™ä¸€è¡Œã€‚<br>ä½¿ç”¨ç®­å¤´å‡½æ•°é…ç½®ç»„ä»¶çš„äº‹ä»¶æ–¹æ³•ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Button</span>(<span class="string">&#x27;Click me&#x27;</span>)</span><br><span class="line">.<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">myText</span> = <span class="string">&#x27;ArkUI&#x27;</span>;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨åŒ¿åå‡½æ•°è¡¨è¾¾å¼é…ç½®ç»„ä»¶çš„äº‹ä»¶æ–¹æ³•ï¼Œè¦æ±‚ä½¿ç”¨bindï¼Œä»¥ç¡®ä¿å‡½æ•°ä½“ä¸­çš„thisæŒ‡å‘å½“å‰ç»„ä»¶ã€‚<br>ä½¿ç”¨ç»„ä»¶çš„æˆå‘˜å‡½æ•°é…ç½®ç»„ä»¶çš„äº‹ä»¶æ–¹æ³•ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Button</span>(<span class="string">&#x27;add counter&#x27;</span>)</span><br><span class="line">.<span class="title function_">onClick</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">counter</span> += <span class="number">2</span>;</span><br><span class="line">&#125;.<span class="title function_">bind</span>(<span class="variable language_">this</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä½¿ç”¨å£°æ˜çš„ç®­å¤´å‡½æ•°ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨ï¼Œä¸éœ€è¦bind thisã€‚</p><p>é…ç½®å­ç»„ä»¶<br>å¦‚æœç»„ä»¶æ”¯æŒå­ç»„ä»¶é…ç½®ï¼Œåˆ™éœ€åœ¨å°¾éšé—­åŒ…â€{â€¦}â€ä¸­ä¸ºç»„ä»¶æ·»åŠ å­ç»„ä»¶çš„UIæè¿°ã€‚Columnã€Rowã€<br>Stackã€Gridã€Listç­‰ç»„ä»¶éƒ½æ˜¯å®¹å™¨ç»„ä»¶ã€‚<br>ä»¥ä¸‹æ˜¯ç®€å•çš„Columnç»„ä»¶é…ç½®å­ç»„ä»¶çš„ç¤ºä¾‹ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Column</span>() &#123;</span><br><span class="line">    <span class="title class_">Text</span>(<span class="string">&#x27;Hello&#x27;</span>)</span><br><span class="line">    .<span class="title function_">fontSize</span>(<span class="number">100</span>)</span><br><span class="line"><span class="title class_">Divider</span>()</span><br><span class="line">    <span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">myText</span>)</span><br><span class="line">    .<span class="title function_">fontSize</span>(<span class="number">100</span>)</span><br><span class="line">    .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">Red</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å®¹å™¨ç»„ä»¶å‡æ”¯æŒå­ç»„ä»¶é…ç½®ï¼Œå¯ä»¥å®ç°ç›¸å¯¹å¤æ‚çš„å¤šçº§åµŒå¥—ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">column</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Row</span>() &#123;</span><br><span class="line">        <span class="title class_">Image</span>(<span class="string">&#x27;test1.jpg&#x27;</span>)</span><br><span class="line">        .<span class="title function_">width</span>(<span class="number">100</span>)</span><br><span class="line">        .<span class="title function_">height</span>(<span class="number">100</span>)</span><br><span class="line">    <span class="title class_">Button</span>(<span class="string">&#x27;click +1&#x27;</span>)</span><br><span class="line">        .<span class="title function_">onClick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;+1 clicked!&#x27;</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="ğŸ±ç»„ä»¶"><a href="#ğŸ±ç»„ä»¶" class="headerlink" title="ğŸ±ç»„ä»¶"></a>ğŸ±ç»„ä»¶</h1><h2 id="Row"><a href="#Row" class="headerlink" title="Row"></a>Row</h2><p>æ²¿æ°´å¹³æ–¹å‘å¸ƒå±€å®¹å™¨ã€‚å¯ä»¥åŒ…å«å­ç»„ä»¶ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Row</span>(value?:&#123;space?: string | number&#125;)</span><br></pre></td></tr></table></figure><p>å‚æ•°ï¼š</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:64.6pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>å‚æ•°å</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:122.3pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°ç±»å‹</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:51.75pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å¿…å¡«</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:64.55pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>é»˜è®¤å€¼</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:140.95pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:64.6pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">space</span></p> </td><td style="width:122.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">string | number</span></p> </td><td style="width:51.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">å¦</span></p> </td><td style="width:64.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">0</span></p> </td><td style="width:140.95pt;"> <p style="margin-left:0;"><span style="color:#333333;">æ¨ªå‘å¸ƒå±€å…ƒç´ é—´è·ã€‚</span></p> </td></tr></tbody></table></div><!-- space  string | number éå¿…å¡« 0 æ¨ªå‘å¸ƒå±€å…ƒç´ é—´è·ã€‚å±æ€§ï¼šalignItems VerticalAlign VerticalAlign.Center åœ¨å‚ç›´æ–¹å‘ä¸Šå­ç»„ä»¶çš„å¯¹é½æ ¼å¼ã€‚justifyContent FlexAlign FlexAlign.Start è®¾ç½®å­ç»„ä»¶åœ¨æ°´å¹³æ–¹å‘ä¸Šçš„å¯¹é½æ ¼å¼ã€‚ -->å±æ€§ï¼š<div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:84.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:76.55pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°ç±»å‹</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:109.55pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>é»˜è®¤å€¼</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:174pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:84.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">alignItems</span></p> </td><td style="width:76.55pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">VerticalAlign</span></p> </td><td style="width:109.55pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">VerticalAlign.Center</span></p> </td><td style="width:174pt;"> <p style="margin-left:0;"><span style="color:#333333;">åœ¨å‚ç›´æ–¹å‘ä¸Šå­ç»„ä»¶çš„å¯¹é½æ ¼å¼ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:84.15pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">justifyContent</span></p> </td><td style="background-color:#f8f8f8;width:76.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">FlexAlign</span></p> </td><td style="background-color:#f8f8f8;width:109.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">FlexAlign.Start</span></p> </td><td style="background-color:#f8f8f8;width:174pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®å­ç»„ä»¶åœ¨æ°´å¹³æ–¹å‘ä¸Šçš„å¯¹é½æ ¼å¼ã€‚</span></p> </td></tr></tbody></table></div><h2 id="Column"><a href="#Column" class="headerlink" title="Column"></a>Column</h2><p>æ²¿å‚ç›´æ–¹å‘å¸ƒå±€çš„å®¹å™¨ã€‚å¯ä»¥åŒ…å«å­ç»„ä»¶ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Column</span>(value?:&#123;space?: string | number&#125;)</span><br></pre></td></tr></table></figure><p>å‚æ•°ï¼š</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:65.35pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>å‚æ•°å</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:117.05pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°ç±»å‹</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:52.5pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å¿…å¡«</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:65.3pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>é»˜è®¤å€¼</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:143.95pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:65.35pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">space</span></p> </td><td style="width:117.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">string|number</span></p> </td><td style="width:52.5pt;"> <p style="margin-left:0;"><span style="color:#333333;">å¦</span></p> </td><td style="width:65.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">0</span></p> </td><td style="width:143.95pt;"> <p style="margin-left:0;"><span style="color:#333333;">çºµå‘å¸ƒå±€å…ƒç´ é—´è·ã€‚</span></p> </td></tr></tbody></table></div><p>å±æ€§ï¼š</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:95.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:90.05pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°ç±»å‹</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:123.8pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>é»˜è®¤å€¼</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:134.95pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:95.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">alignItems</span></p> </td><td style="width:90.05pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">HorizontalAlign</span></p> </td><td style="width:123.8pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">HorizontalAlign.Center</span></p> </td><td style="width:134.95pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®å­ç»„ä»¶åœ¨æ°´å¹³æ–¹å‘ä¸Šçš„å¯¹é½æ ¼å¼ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:95.4pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">justifyContent8+</span></p> </td><td style="background-color:#f8f8f8;width:90.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">FlexAlign</span></p> </td><td style="background-color:#f8f8f8;width:123.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">FlexAlign.Start</span></p> </td><td style="background-color:#f8f8f8;width:134.95pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®å­ç»„ä»¶åœ¨å‚ç›´æ–¹å‘ä¸Šçš„å¯¹é½æ ¼å¼ã€‚</span></p> </td></tr></tbody></table></div><p>Flexä»¥å¼¹æ€§æ–¹å¼å¸ƒå±€å­ç»„ä»¶çš„å®¹å™¨ç»„ä»¶ã€‚<br>å­ç»„ä»¶   å¯ä»¥åŒ…å«å­ç»„ä»¶ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="title class_">Flex</span>(value?: &#123; direction?: <span class="title class_">FlexDirection</span>, wrap?: <span class="title class_">FlexWrap</span>, justifyContent?:</span><br><span class="line"> </span><br><span class="line"><span class="title class_">FlexAlign</span>, alignItems?: <span class="title class_">ItemAlign</span>, alignContent?: <span class="title class_">FlexAlign</span> &#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å‚æ•°ï¼š</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:84.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>å‚æ•°å</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:80.3pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°ç±»å‹</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:30pt;"> <p style="margin-left:0;text-align:center;"><span style="color:#333333;"><strong>å¿…å¡«</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:103.55pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>é»˜è®¤å€¼</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:146.2pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:84.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">direction</span></p> </td><td style="width:80.3pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">FlexDirection</span></p> </td><td style="width:30pt;"> <p style="margin-left:0;"><span style="color:#333333;">å¦</span></p> </td><td style="width:103.55pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">FlexDirection.Row</span></p> </td><td style="width:146.2pt;"> <p style="margin-left:0;"><span style="color:#333333;">å­ç»„ä»¶åœ¨Flexå®¹å™¨ä¸Šæ’åˆ—çš„æ–¹å‘ï¼Œå³ä¸»è½´çš„æ–¹å‘ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:84.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">wrap</span></p> </td><td style="background-color:#f8f8f8;width:80.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">FlexWrap</span></p> </td><td style="background-color:#f8f8f8;width:30pt;"> <p style="margin-left:0;"><span style="color:#333333;">å¦</span></p> </td><td style="background-color:#f8f8f8;width:103.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">FlexWrap.NoWrap</span></p> </td><td style="background-color:#f8f8f8;width:146.2pt;"> <p style="margin-left:0;"><span style="color:#333333;">Flexå®¹å™¨æ˜¯å•è¡Œ/åˆ—è¿˜æ˜¯å¤šè¡Œ/ åˆ—æ’åˆ—ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:84.15pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">justifyContent</span></p> </td><td style="width:80.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">FlexAlign</span></p> </td><td style="width:30pt;"> <p style="margin-left:0;"><span style="color:#333333;">å¦</span></p> </td><td style="width:103.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">FlexAlign.Start</span></p> </td><td style="width:146.2pt;"> <p style="margin-left:0;"><span style="color:#333333;">å­ç»„ä»¶åœ¨Flexå®¹å™¨ä¸»è½´ä¸Šçš„å¯¹é½æ ¼å¼ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:84.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">alignItems</span></p> </td><td style="background-color:#f8f8f8;width:80.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">ItemAlign</span></p> </td><td style="background-color:#f8f8f8;width:30pt;"> <p style="margin-left:0;"><span style="color:#333333;">å¦</span></p> </td><td style="background-color:#f8f8f8;width:103.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">ItemAlign.Stretch</span></p> </td><td style="background-color:#f8f8f8;width:146.2pt;"> <p style="margin-left:0;"><span style="color:#333333;">å­ç»„ä»¶åœ¨Flexå®¹å™¨äº¤å‰è½´ä¸Šçš„å¯¹é½æ ¼å¼ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:84.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">alignContent</span></p> </td><td style="width:80.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">FlexAlign</span></p> </td><td style="width:30pt;"> <p style="margin-left:0;"><span style="color:#333333;">å¦</span></p> </td><td style="width:103.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">FlexAlign.Start</span></p> </td><td style="width:146.2pt;"> <p style="margin-left:0cm;"><span style="color:#333333;">äº¤å‰è½´ä¸­æœ‰é¢å¤–çš„ç©ºé—´æ—¶ï¼Œå¤šè¡Œå†…å®¹çš„å¯¹é½æ–¹å¼ã€‚ä»…åœ¨ wrapä¸ºWrapæˆ–</span></p> <p style="margin-left:0;"><span style="color:#333333;">WrapReverseä¸‹ç”Ÿæ•ˆã€‚</span></p> </td></tr></tbody></table></div><h2 id="List"><a href="#List" class="headerlink" title="List"></a>List</h2><p>åˆ—è¡¨åŒ…å«ä¸€ç³»åˆ—ç›¸åŒå®½åº¦çš„åˆ—è¡¨é¡¹ã€‚é€‚åˆè¿ç»­ã€å¤šè¡Œå‘ˆç°åŒç±»æ•°æ®ï¼Œä¾‹å¦‚å›¾ç‰‡å’Œæ–‡æœ¬ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">List</span>(value?:&#123;space?: number | string, initialIndex?: number, scroller?:</span><br><span class="line"> </span><br><span class="line"><span class="title class_">Scroller</span>&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å‚æ•°ï¼š</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:70.65pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>å‚æ•°å</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:57.05pt;"> <p style="margin-left:0cm;"><span style="color:#333333;"><strong>å‚æ•°ç±»å‹</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:30pt;"> <p style="margin-left:0;text-align:center;"><span style="color:#333333;"><strong>å¿…å¡«</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:286.55pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:70.65pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">space</span></p> </td><td style="width:57.05pt;"> <p style="margin-left:0cm;"><span style="color:#333333;">number</span></p> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">| string</span></p> </td><td style="width:30pt;"> <p style="margin-left:0;"><span style="color:#333333;">å¦</span></p> </td><td style="width:286.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">åˆ—è¡¨é¡¹é—´è·ã€‚é»˜è®¤å€¼ï¼š0</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:70.65pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">initialIndex</span></p> </td><td style="background-color:#f8f8f8;width:57.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">number</span></p> </td><td style="background-color:#f8f8f8;width:30pt;"> <p style="margin-left:0;"><span style="color:#333333;">å¦</span></p> </td><td style="background-color:#f8f8f8;width:286.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®å½“å‰Liståˆæ¬¡åŠ è½½æ—¶è§†å£èµ·å§‹ä½ç½®æ˜¾ç¤ºçš„itemçš„ç´¢å¼•å€¼ã€‚å¦‚æœè®¾ç½®çš„å€¼è¶…è¿‡äº†å½“å‰Liståä¸€ä¸ªitemçš„ç´¢å¼•å€¼ï¼Œåˆ™è®¾ç½®ä¸ç”Ÿæ•ˆã€‚é»˜è®¤å€¼ï¼š0</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:70.65pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">scroller</span></p> </td><td style="width:57.05pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">Scroller</span></p> </td><td style="width:30pt;"> <p style="margin-left:0;"><span style="color:#333333;">å¦</span></p> </td><td style="width:286.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">å¯æ»šåŠ¨ç»„ä»¶çš„æ§åˆ¶å™¨ã€‚ç”¨äºä¸å¯æ»šåŠ¨ç»„ä»¶è¿›è¡Œç»‘å®šã€‚</span></p> </td></tr></tbody></table></div><p>å±æ€§</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:101.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:149.3pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°ç±»å‹</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:193.5pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:101.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">listDirection</span></p> </td><td style="width:149.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">Axis</span></p> </td><td style="width:193.5pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®Listç»„ä»¶æ’åˆ—æ–¹å‘å‚ç…§Axisæšä¸¾è¯´æ˜ã€‚é»˜è®¤å€¼ï¼šVertical</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:101.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">divider</span></p> </td><td style="background-color:#f8f8f8;width:149.3pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">{strokeWidth: Length,color?:</span></p> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">ResourceColor,startMargin?:</span></p> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">Length,endMargin?: Length}</span></p> <p style="margin-left:0;"><span style="color:#333333;">| null</span></p> </td><td style="background-color:#f8f8f8;width:193.5pt;"> <p style="margin-left:0cm;"><span style="color:#333333;">ç”¨äºè®¾ç½®ListItemåˆ†å‰²çº¿æ ·å¼ï¼Œé»˜è®¤æ— åˆ†å‰²çº¿ã€‚strokeWidth: åˆ†å‰²çº¿çš„çº¿å®½ã€‚</span></p> <p style="margin-left:0cm;"><span style="color:#333333;">color: åˆ†å‰²çº¿çš„é¢œè‰²ã€‚startMarginï¼š åˆ†å‰²çº¿ä¸åˆ—è¡¨ä¾§è¾¹èµ·å§‹ç«¯çš„è·ç¦»ã€‚</span></p> <p style="margin-left:0;"><span style="color:#333333;">endMargin: åˆ†å‰²çº¿ä¸åˆ—è¡¨ä¾§è¾¹ç»“æŸç«¯çš„è·ç¦»ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:101.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">scrollBar</span></p> </td><td style="width:149.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">BarState</span></p> </td><td style="width:193.5pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®æ»šåŠ¨æ¡çŠ¶æ€ã€‚é»˜è®¤å€¼ï¼šBarState.Off</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:101.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">cachedCount</span></p> </td><td style="background-color:#f8f8f8;width:149.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">number</span></p> </td><td style="background-color:#f8f8f8;width:193.5pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®é¢„åŠ è½½çš„ListItemçš„æ•°é‡ã€‚å…·ä½“ä½¿ç”¨å¯å‚è€ƒå‡å°‘åº”ç”¨ç™½å—è¯´æ˜ã€‚é»˜è®¤å€¼ï¼š1</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:101.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">editMode</span></p> </td><td style="width:149.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">boolean</span></p> </td><td style="width:193.5pt;"> <p style="margin-left:0;"><span style="color:#333333;">å£°æ˜å½“å‰Listç»„ä»¶æ˜¯å¦å¤„äºå¯ç¼–è¾‘æ¨¡å¼ã€‚</span></p> <p style="margin-left:0;"><span style="color:#333333;">é»˜è®¤å€¼ï¼šfalse</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:101.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">edgeEffect</span></p> </td><td style="background-color:#f8f8f8;width:149.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">EdgeEffect</span></p> </td><td style="background-color:#f8f8f8;width:193.5pt;"> <p style="margin-left:0;"><span style="color:#333333;">æ»‘åŠ¨æ•ˆæœï¼Œç›®å‰æ”¯æŒçš„æ»‘åŠ¨æ•ˆæœå‚è§</span></p> <p style="margin-left:0;"><span style="color:#333333;">EdgeEffectçš„æšä¸¾è¯´æ˜ã€‚é»˜è®¤å€¼ï¼š</span></p> <p style="margin-left:0;"><span style="color:#333333;">EdgeEffect.Spring</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:101.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">chainAnimation</span></p> </td><td style="width:149.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">boolean</span></p> </td><td style="width:193.5pt;"> <p style="margin-left:0;"><span style="color:#333333;">ç”¨äºè®¾ç½®å½“å‰listæ˜¯å¦å¯ç”¨é“¾å¼è”åŠ¨åŠ¨æ•ˆï¼Œå¼€å¯ååˆ—è¡¨æ»‘åŠ¨ä»¥åŠé¡¶éƒ¨å’Œåº•éƒ¨æ‹–æ‹½æ—¶ä¼šæœ‰é“¾å¼è”åŠ¨çš„æ•ˆæœã€‚é“¾å¼è”åŠ¨æ•ˆæœï¼šlistå†…çš„list-itemé—´éš”ä¸€å®šè·ç¦»ï¼Œåœ¨åŸºæœ¬çš„æ»‘åŠ¨äº¤äº’è¡Œä¸ºä¸‹ï¼Œä¸»åŠ¨å¯¹è±¡é©±åŠ¨ä»åŠ¨å¯¹è±¡è¿›è¡Œè”åŠ¨ï¼Œé©±åŠ¨æ•ˆæœéµå¾ªå¼¹ç°§ç‰©ç†åŠ¨æ•ˆã€‚- falseï¼šä¸å¯ç”¨é“¾å¼è”åŠ¨ã€‚trueï¼šå¯ç”¨é“¾å¼è”åŠ¨ã€‚é»˜è®¤å€¼ï¼šfalse</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:101.4pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">multiSelectable 8+</span></p> </td><td style="background-color:#f8f8f8;width:149.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">boolean</span></p> </td><td style="background-color:#f8f8f8;width:193.5pt;"> <p style="margin-left:0;"><span style="color:#333333;">æ˜¯å¦å¼€å¯é¼ æ ‡æ¡†é€‰ã€‚&gt;é»˜è®¤å€¼ï¼šfalsefalseï¼šå…³é—­æ¡†é€‰ã€‚- trueï¼šå¼€å¯æ¡†é€‰ã€‚</span></p> </td></tr></tbody></table></div>äº‹ä»¶<div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:242px;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:349px;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>åŠŸèƒ½æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:242px;"> <p style="margin-left:.1pt;"><span style="color:#333333;">onItemDelete(event: (index:</span></p> <p style="margin-left:.1pt;"><span style="color:#333333;">number) =&gt; boolean)</span></p> </td><td style="width:349px;"> <p style="margin-left:0;"><span style="color:#333333;">åˆ—è¡¨é¡¹åˆ é™¤æ—¶è§¦å‘ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:242px;"> <p style="margin-left:.1pt;"><span style="color:#333333;">onScroll(event: (scrollOffset: number, scrollState: ScrollState) =&gt; void)</span></p> </td><td style="background-color:#f8f8f8;width:349px;"> <p style="margin-left:0;"><span style="color:#333333;">åˆ—è¡¨æ»‘åŠ¨æ—¶è§¦å‘ï¼Œè¿”å›å€¼scrollOffsetä¸ºæ»‘åŠ¨åç§»é‡ï¼Œ scrollStateä¸ºå½“å‰æ»‘åŠ¨çŠ¶æ€ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:242px;"> <p style="margin-left:.1pt;"><span style="color:#333333;">onScrollIndex(event: (start:</span></p> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">number, end: number) =&gt; void)</span></p> </td><td style="width:349px;"> <p style="margin-left:0;"><span style="color:#333333;">åˆ—è¡¨æ»‘åŠ¨æ—¶è§¦å‘ï¼Œè¿”å›å€¼åˆ†åˆ«ä¸ºæ»‘åŠ¨èµ·å§‹ä½ç½®ç´¢å¼•å€¼ä¸æ»‘åŠ¨ç»“æŸä½ç½®ç´¢å¼•å€¼ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:242px;"> <p style="margin-left:.1pt;"><span style="color:#333333;">onReachStart(event: () =&gt; void)</span></p> </td><td style="background-color:#f8f8f8;width:349px;"> <p style="margin-left:0;"><span style="color:#333333;">åˆ—è¡¨åˆ°è¾¾èµ·å§‹ä½ç½®æ—¶è§¦å‘ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:242px;"> <p style="margin-left:.1pt;"><span style="color:#333333;">onReachEnd(event: () =&gt; void)</span></p> </td><td style="width:349px;"> <p style="margin-left:0;"><span style="color:#333333;">åˆ—è¡¨åˆ°åº•æœ«å°¾ä½ç½®æ—¶è§¦å‘ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:242px;"> <p style="margin-left:.1pt;"><span style="color:#333333;">onScrollStop(event: () =&gt; void)</span></p> </td><td style="background-color:#f8f8f8;width:349px;"> <p style="margin-left:0;"><span style="color:#333333;">åˆ—è¡¨æ»‘åŠ¨åœæ­¢æ—¶è§¦å‘ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:242px;"> <p style="margin-left:.1pt;"><span style="color:#333333;">onItemMove(event: (from: number, to: number) =&gt; boolean)</span></p> </td><td style="width:349px;"> <p style="margin-left:0;"><span style="color:#333333;">åˆ—è¡¨å…ƒç´ å‘ç”Ÿç§»åŠ¨æ—¶è§¦å‘ï¼Œè¿”å›å€¼fromã€toåˆ†åˆ«ä¸ºç§»åŠ¨å‰ç´¢å¼•å€¼ä¸ç§»åŠ¨åç´¢å¼•å€¼ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:242px;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">onItemDragStart(event: (event:</span></p> <p style="margin-left:.1pt;"><span style="color:#333333;">ItemDragInfo, itemIndex:</span></p> <p style="margin-left:.1pt;"><span style="color:#333333;">number) =&gt; ((() =&gt; any) | void))</span></p> </td><td style="background-color:#f8f8f8;width:349px;"> <p style="margin-left:0;"><span style="color:#333333;">å¼€å§‹æ‹–æ‹½åˆ—è¡¨å…ƒç´ æ—¶è§¦å‘ï¼Œè¿”å›å€¼eventè§ItemDragInfoå¯¹è±¡è¯´æ˜ï¼ŒitemIndexä¸ºè¢«æ‹–æ‹½åˆ—è¡¨å…ƒç´ ç´¢å¼•å€¼ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:242px;"> <p style="margin-left:.1pt;"><span style="color:#333333;">onItemDragEnter(event:</span></p> <p style="margin-left:.1pt;"><span style="color:#333333;">(event: ItemDragInfo) =&gt; void)</span></p> </td><td style="width:349px;"> <p style="margin-left:0;"><span style="color:#333333;">æ‹–æ‹½è¿›å…¥åˆ—è¡¨å…ƒç´ èŒƒå›´å†…æ—¶è§¦å‘ï¼Œè¿”å›å€¼eventè§</span></p> <p style="margin-left:0;"><span style="color:#333333;">ItemDragInfoå¯¹è±¡è¯´æ˜ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:242px;"> <p style="margin-left:.1pt;"><span style="color:#333333;">onItemDragMove(event: (event: ItemDragInfo, itemIndex: number, insertIndex: number) =&gt; void)</span></p> </td><td style="background-color:#f8f8f8;width:349px;"> <p style="margin-left:0;"><span style="color:#333333;">æ‹–æ‹½åœ¨åˆ—è¡¨å…ƒç´ èŒƒå›´å†…ç§»åŠ¨æ—¶è§¦å‘ï¼Œè¿”å›å€¼eventè§</span></p> <p style="margin-left:0;"><span style="color:#333333;">ItemDragInfoå¯¹è±¡è¯´æ˜ï¼ŒitemIndexä¸ºæ‹–æ‹½èµ·å§‹ä½ç½®ï¼Œ insertIndexä¸ºæ‹–æ‹½æ’å…¥ä½ç½®ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:242px;"> <p style="margin-left:.1pt;"><span style="color:#333333;">onItemDragLeave(event: (event: ItemDragInfo, itemIndex: number) =&gt; void)</span></p> </td><td style="width:349px;"> <p style="margin-left:0;"><span style="color:#333333;">æ‹–æ‹½ç¦»å¼€åˆ—è¡¨å…ƒç´ æ—¶è§¦å‘ï¼Œè¿”å›å€¼eventè§ItemDragInfoå¯¹è±¡è¯´æ˜ï¼ŒitemIndexä¸ºæ‹–æ‹½ç¦»å¼€çš„åˆ—è¡¨å…ƒç´ ç´¢å¼•å€¼ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:242px;"> <p style="margin-left:.1pt;"><span style="color:#333333;">onItemDrop(event: (event:</span></p> <p style="margin-left:.1pt;"><span style="color:#333333;">ItemDragInfo, itemIndex: number, insertIndex: number, isSuccess: boolean) =&gt; void)</span></p> </td><td style="background-color:#f8f8f8;width:349px;"> <p style="margin-left:0;"><span style="color:#333333;">ç»‘å®šè¯¥äº‹ä»¶çš„åˆ—è¡¨å…ƒç´ å¯ä½œä¸ºæ‹–æ‹½é‡Šæ”¾ç›®æ ‡ï¼Œå½“åœ¨åˆ—è¡¨å…ƒç´ </span></p> <p style="margin-left:0;"><span style="color:#333333;">å†…åœæ­¢æ‹–æ‹½æ—¶è§¦å‘ï¼Œè¿”å›å€¼eventè§ItemDragInfoå¯¹è±¡è¯´æ˜ï¼Œ itemIndexä¸ºæ‹–æ‹½èµ·å§‹ä½ç½®ï¼ŒinsertIndexä¸ºæ‹–æ‹½æ’å…¥ä½ç½®ï¼Œ isSuccessä¸ºæ˜¯å¦æˆåŠŸé‡Šæ”¾ã€‚</span></p> </td></tr></tbody></table></div>ScrollStateæšä¸¾è¯´æ˜<div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:150.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:293.3pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:150.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">Idle</span></p> </td><td style="width:293.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">æœªæ»‘åŠ¨çŠ¶æ€ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:150.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">Scroll</span></p> </td><td style="background-color:#f8f8f8;width:293.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">æƒ¯æ€§æ»‘åŠ¨çŠ¶æ€ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:150.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">Fling</span></p> </td><td style="width:293.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">æ‰‹æŒ‡æ‹–åŠ¨çŠ¶æ€ã€‚</span></p> </td></tr></tbody></table></div><h2 id="ListItem"><a href="#ListItem" class="headerlink" title="ListItem"></a>ListItem</h2><p>ç”¨æ¥å±•ç¤ºåˆ—è¡¨å…·ä½“itemï¼Œå¿…é¡»é…åˆListæ¥ä½¿ç”¨ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">ListItem</span>(value?: string)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å±æ€§</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:77.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:63.8pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°ç±»å‹</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:73.55pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>é»˜è®¤å€¼</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:229.5pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:77.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">sticky</span></p> </td><td style="width:63.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">Sticky</span></p> </td><td style="width:73.55pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">Sticky.None</span></p> </td><td style="width:229.5pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®ListItemå¸é¡¶æ•ˆæœï¼Œå‚è§Stickyæšä¸¾æè¿°ã€‚é»˜è®¤å€¼ï¼šSticky.None</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:77.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">editable</span></p> </td><td style="background-color:#f8f8f8;width:63.8pt;"> <p style="margin-left:0cm;"><span style="color:#333333;">boolean |</span></p> <p style="margin-left:0;"><span style="color:#333333;">EditMode</span></p> </td><td style="background-color:#f8f8f8;width:73.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">false</span></p> </td><td style="background-color:#f8f8f8;width:229.5pt;"> <p style="margin-left:0;"><span style="color:#333333;">å½“å‰ListItemå…ƒç´ æ˜¯å¦å¯ç¼–è¾‘ï¼Œè¿›å…¥ç¼–è¾‘æ¨¡å¼åå¯åˆ é™¤æˆ–ç§»åŠ¨ã€‚é»˜è®¤å€¼ï¼šfalse</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:77.4pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">selectable 8+</span></p> </td><td style="width:63.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">boolean</span></p> </td><td style="width:73.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">true</span></p> </td><td style="width:229.5pt;"> <p style="margin-left:0;"><span style="color:#333333;">å½“å‰ListItemå…ƒç´ æ˜¯å¦å¯ä»¥è¢«é¼ æ ‡æ¡†é€‰ã€‚é»˜è®¤å€¼ï¼štrue<strong>è¯´æ˜ï¼š</strong>å¤–å±‚Listå®¹å™¨çš„é¼ æ ‡æ¡†é€‰å¼€å¯æ—¶ï¼ŒListItemçš„æ¡†é€‰æ‰ç”Ÿæ•ˆã€‚</span></p> </td></tr></tbody></table></div>Stickyæšä¸¾è¯´æ˜<div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:104.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:339.8pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:104.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">None</span></p> </td><td style="width:339.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">æ— å¸é¡¶æ•ˆæœã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:104.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">Normal</span></p> </td><td style="background-color:#f8f8f8;width:339.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">å½“å‰itemå¸é¡¶ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:104.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">Opacity</span></p> </td><td style="width:339.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">å½“å‰itemå¸é¡¶æ˜¾ç¤ºé€æ˜åº¦å˜åŒ–æ•ˆæœã€‚</span></p> </td></tr></tbody></table></div>EditModeæšä¸¾è¯´æ˜<div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:174.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:270.05pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:174.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">None</span></p> </td><td style="width:270.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">ç¼–è¾‘æ“ä½œä¸é™åˆ¶ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:174.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">Deletable</span></p> </td><td style="background-color:#f8f8f8;width:270.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">å¯åˆ é™¤ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:174.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">Movable</span></p> </td><td style="width:270.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">å¯ç§»åŠ¨ã€‚</span></p> </td></tr></tbody></table></div>äº‹ä»¶<div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:120.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:324.05pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>åŠŸèƒ½æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:120.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">onSelect(event:</span></p> <p style="margin-left:.1pt;"><span style="color:#333333;">(isSelected: boolean)</span></p> <p style="margin-left:.1pt;"><span style="color:#333333;">=&gt; void) 8+</span></p> </td><td style="width:324.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">ListItemå…ƒç´ è¢«é¼ æ ‡æ¡†é€‰çš„çŠ¶æ€æ”¹å˜æ—¶è§¦å‘å›è°ƒã€‚isSelectedï¼šè¿›å…¥é¼ æ ‡æ¡†é€‰èŒƒå›´å³è¢«é€‰ä¸­è¿”å›trueï¼Œ ç§»å‡ºé¼ æ ‡æ¡†é€‰èŒƒå›´å³æœªè¢«é€‰ä¸­è¿”å› falseã€‚</span></p> </td></tr></tbody></table></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">List</span>() &#123;</span><br><span class="line">     <span class="title class_">ListItem</span>() &#123;</span><br><span class="line">       <span class="title class_">Row</span>() &#123;</span><br><span class="line">         <span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.icon&#x27;</span>)).<span class="title function_">width</span>(<span class="string">&#x27;80vp&#x27;</span>)</span><br><span class="line">         <span class="title class_">Column</span>() &#123;</span><br><span class="line">           <span class="title class_">Text</span>(<span class="string">&#x27;æ ‡é¡Œ&#x27;</span>)</span><br><span class="line">           .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">Blue</span>)</span><br><span class="line">             .<span class="title function_">fontSize</span>(<span class="string">&#x27;22fp&#x27;</span>)</span><br><span class="line">           <span class="title class_">Text</span>(<span class="string">&#x27;æè¿°&#x27;</span>)</span><br><span class="line">           .<span class="title function_">fontColor</span>(<span class="title class_">Color</span>.<span class="property">Gray</span>)</span><br><span class="line">             .<span class="title function_">fontSize</span>(<span class="string">&#x27;22fp&#x27;</span>)</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       .<span class="title function_">padding</span>(&#123;<span class="attr">left</span>:<span class="string">&#x27;10vp&#x27;</span>&#125;)</span><br><span class="line"> </span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">White</span>)</span><br></pre></td></tr></table></figure><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@v5/v2/2024042120.jpg"></p><p>Tabs é€šè¿‡é¡µç­¾è¿›è¡Œå†…å®¹è§†å›¾åˆ‡æ¢çš„å®¹å™¨ç»„ä»¶ï¼Œæ¯ä¸ªé¡µç­¾å¯¹åº”ä¸€ä¸ªå†…å®¹è§†å›¾ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Tabs</span>(value?: &#123;barPosition?: <span class="title class_">BarPosition</span>, index?: number, controller?:</span><br><span class="line"> </span><br><span class="line"><span class="title class_">TabsController</span>&#125;)</span><br></pre></td></tr></table></figure><p>å‚æ•°</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:72.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>å‚æ•°å</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:87.8pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°ç±»å‹</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:35.25pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å¿…å¡«</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:97.55pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>é»˜è®¤å€¼</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:150.75pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:72.9pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">barPosition</span></p> </td><td style="width:87.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">BarPosition</span></p> </td><td style="width:35.25pt;"> <p style="margin-left:0;"><span style="color:#333333;">å¦</span></p> </td><td style="width:97.55pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">BarPosition.Start</span></p> </td><td style="width:150.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">æŒ‡å®šé¡µç­¾ä½ç½®æ¥åˆ›å»ºTabså®¹å™¨ç»„ä»¶ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:72.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">index</span></p> </td><td style="background-color:#f8f8f8;width:87.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">number</span></p> </td><td style="background-color:#f8f8f8;width:35.25pt;"> <p style="margin-left:0;"><span style="color:#333333;">å¦</span></p> </td><td style="background-color:#f8f8f8;width:97.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">0</span></p> </td><td style="background-color:#f8f8f8;width:150.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">æŒ‡å®šåˆæ¬¡åˆå§‹é¡µç­¾ç´¢å¼•ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:72.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">controller</span></p> </td><td style="width:87.8pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">TabsController</span></p> </td><td style="width:35.25pt;"> <p style="margin-left:0;"><span style="color:#333333;">å¦</span></p> </td><td style="width:97.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">-</span></p> </td><td style="width:150.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®Tabsæ§åˆ¶å™¨ã€‚</span></p> </td></tr></tbody></table></div><p>BarPositionæšä¸¾è¯´æ˜</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:42.1pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:402.1pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:42.1pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">Start</span></p> </td><td style="width:402.1pt;"> <p style="margin-left:0;"><span style="color:#333333;">verticalå±æ€§æ–¹æ³•è®¾ç½®ä¸ºtrueæ—¶ï¼Œé¡µç­¾ä½äºå®¹å™¨å·¦ä¾§ï¼›verticalå±æ€§æ–¹æ³•è®¾ç½®ä¸ºfalseæ—¶ï¼Œé¡µç­¾ä½äºå®¹å™¨é¡¶éƒ¨ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:42.1pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">End</span></p> </td><td style="background-color:#f8f8f8;width:402.1pt;"> <p style="margin-left:0;"><span style="color:#333333;">verticalå±æ€§æ–¹æ³•è®¾ç½®ä¸ºtrueæ—¶ï¼Œé¡µç­¾ä½äºå®¹å™¨å³ä¾§ï¼›verticalå±æ€§æ–¹æ³•è®¾ç½®ä¸ºfalseæ—¶ï¼Œé¡µç­¾ä½äºå®¹å™¨åº•éƒ¨ã€‚</span></p> </td></tr></tbody></table></div><p>å±æ€§ä¸æ”¯æŒè§¦æ‘¸çƒ­åŒºè®¾ç½®ã€‚</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:107.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:62.3pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°ç±»å‹</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:89.3pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>é»˜è®¤å€¼</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:185.25pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:107.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">vertical</span></p> </td><td style="width:62.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">boolean</span></p> </td><td style="width:89.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">false</span></p> </td><td style="width:185.25pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®ä¸ºfalseæ˜¯ä¸ºæ¨ªå‘Tabsï¼Œè®¾ç½®ä¸º trueæ—¶ä¸ºçºµå‘Tabsã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:107.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">scrollable</span></p> </td><td style="background-color:#f8f8f8;width:62.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">boolean</span></p> </td><td style="background-color:#f8f8f8;width:89.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">true</span></p> </td><td style="background-color:#f8f8f8;width:185.25pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®ä¸ºtrueæ—¶å¯ä»¥é€šè¿‡æ»‘åŠ¨é¡µé¢è¿›è¡Œé¡µé¢åˆ‡æ¢ï¼Œä¸ºfalseæ—¶ä¸å¯æ»‘åŠ¨åˆ‡æ¢é¡µé¢ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:107.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">barMode</span></p> </td><td style="width:62.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">BarMode</span></p> </td><td style="width:89.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">BarMode.Fixed</span></p> </td><td style="width:185.25pt;"> <p style="margin-left:0;"><span style="color:#333333;">TabBarå¸ƒå±€æ¨¡å¼ï¼Œå…·ä½“æè¿°è§</span></p> <p style="margin-left:0;"><span style="color:#333333;">BarModeæšä¸¾è¯´æ˜ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:107.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">barWidth</span></p> </td><td style="background-color:#f8f8f8;width:62.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">Length</span></p> </td><td style="background-color:#f8f8f8;width:89.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">-</span></p> </td><td style="background-color:#f8f8f8;width:185.25pt;"> <p style="margin-left:0;"><span style="color:#333333;">TabBarçš„å®½åº¦å€¼ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:107.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">barHeight</span></p> </td><td style="width:62.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">Length</span></p> </td><td style="width:89.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">-</span></p> </td><td style="width:185.25pt;"> <p style="margin-left:0;"><span style="color:#333333;">TabBarçš„é«˜åº¦å€¼ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:107.4pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">animationDuration</span></p> </td><td style="background-color:#f8f8f8;width:62.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">number</span></p> </td><td style="background-color:#f8f8f8;width:89.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">200</span></p> </td><td style="background-color:#f8f8f8;width:185.25pt;"> <p style="margin-left:0;"><span style="color:#333333;">TabContentæ»‘åŠ¨åŠ¨ç”»æ—¶é•¿ã€‚</span></p> </td></tr></tbody></table></div><p>BarModeæšä¸¾è¯´æ˜</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:96.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:348.05pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:96.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">Scrollable</span></p> </td><td style="width:348.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">TabBarä½¿ç”¨å®é™…å¸ƒå±€å®½åº¦, è¶…è¿‡æ€»é•¿åº¦åå¯æ»‘åŠ¨ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:96.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">Fixed</span></p> </td><td style="background-color:#f8f8f8;width:348.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">æ‰€æœ‰TabBarå¹³å‡åˆ†é…å®½åº¦ã€‚</span></p> </td></tr></tbody></table></div><p>äº‹ä»¶</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:197.45pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:246.75pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>åŠŸèƒ½æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:197.45pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">onChange(event: (index: number) =&gt; void)</span></p> </td><td style="width:246.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">Tabé¡µç­¾åˆ‡æ¢åè§¦å‘çš„äº‹ä»¶ã€‚- index: tabæ ‡ç­¾çš„ç´¢å¼•å€¼ã€‚</span></p> </td></tr></tbody></table></div><p>TabsController</p><p>Tabsç»„ä»¶çš„æ§åˆ¶å™¨ï¼Œç”¨äºæ§åˆ¶Tabsç»„ä»¶è¿›è¡Œé¡µç­¾åˆ‡æ¢ã€‚å¯¼å…¥å¯¹è±¡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">controller</span>: <span class="title class_">TabsController</span> = <span class="keyword">new</span> <span class="title class_">TabsController</span>()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>changeIndex changeIndex(value: number): void</p><p>æ§åˆ¶Tabsåˆ‡æ¢åˆ°æŒ‡å®šé¡µç­¾ã€‚å‚æ•°ï¼š</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:54.1pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>å‚æ•°å</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:65.3pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°ç±»å‹</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:43.5pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å¿…å¡«</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:54.8pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>é»˜è®¤å€¼</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:226.5pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:54.1pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">value</span></p> </td><td style="width:65.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">number</span></p> </td><td style="width:43.5pt;"> <p style="margin-left:0;"><span style="color:#333333;">æ˜¯</span></p> </td><td style="width:54.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">-</span></p> </td><td style="width:226.5pt;"> <p style="margin-left:0;"><span style="color:#333333;">é¡µç­¾åœ¨Tabsé‡Œçš„ç´¢å¼•å€¼ï¼Œç´¢å¼•å€¼ä»0å¼€å§‹ã€‚</span></p> </td></tr></tbody></table></div><h2 id="TabContent"><a href="#TabContent" class="headerlink" title="TabContent"></a>TabContent</h2><p>ä»…åœ¨Tabsä¸­ä½¿ç”¨ï¼Œå¯¹åº”ä¸€ä¸ªåˆ‡æ¢é¡µç­¾çš„å†…å®¹è§†å›¾ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">TabContent</span>()</span><br></pre></td></tr></table></figure><p>å±æ€§</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:51.1pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:103.55pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°ç±»å‹</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:30pt;"> <p style="margin-left:0;text-align:center;"><span style="color:#333333;"><strong>é»˜è®¤å€¼</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:259.55pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:51.1pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">tabBar</span></p> </td><td style="width:103.55pt;"> <p style="margin-left:0cm;"><span style="color:#333333;">string |</span></p> <p style="margin-left:0cm;"><span style="color:#333333;">Resource| {icon?:</span></p> <p style="margin-left:0cm;"><span style="color:#333333;">string |</span></p> <p style="margin-left:0cm;"><span style="color:#333333;">Resource,text?:</span></p> <p style="margin-left:0cm;"><span style="color:#333333;">string |</span></p> <p style="margin-left:0cm;"><span style="color:#333333;">Resource}|</span></p> <p style="margin-left:0;"><span style="color:#333333;">CustomBuilder8+</span></p> </td><td style="width:30pt;"> <p style="margin-left:0;"><span style="color:#333333;">-</span></p> </td><td style="width:259.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®TabBarä¸Šæ˜¾ç¤ºå†…å®¹ã€‚CustomBuilder: æ„é€ å™¨ï¼Œå†…éƒ¨å¯ä»¥ä¼ å…¥ç»„ä»¶ï¼ˆAPI8ç‰ˆæœ¬ä»¥ä¸Šé€‚ç”¨ï¼‰ã€‚<strong>è¯´æ˜ï¼š</strong>å¦‚æœ iconé‡‡ç”¨svgæ ¼å¼å›¾æºï¼Œåˆ™è¦æ±‚svgå›¾æºåˆ é™¤å…¶è‡ªæœ‰å®½é«˜å±æ€§å€¼ã€‚å¦‚é‡‡ç”¨å¸¦æœ‰è‡ªæœ‰å®½é«˜å±æ€§çš„svgå›¾æºï¼Œiconå¤§å°åˆ™æ˜¯svgæœ¬èº«å†…ç½®çš„å®½é«˜å±æ€§å€¼å¤§å°ã€‚</span></p> </td></tr></tbody></table></div><h2 id="Swiper"><a href="#Swiper" class="headerlink" title="Swiper"></a>Swiper</h2><p>æ»‘å—è§†å›¾å®¹å™¨ï¼Œæä¾›å­ç»„ä»¶æ»‘åŠ¨è½®æ’­æ˜¾ç¤ºçš„èƒ½åŠ›ã€‚<br>å‚æ•°</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:68.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>å‚æ•°å</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:103.55pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°ç±»å‹</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:42pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å¿…å¡«</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:230.25pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:68.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">controller</span></p> </td><td style="width:103.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">SwiperController</span></p> </td><td style="width:42pt;"> <p style="margin-left:0;"><span style="color:#333333;">å¦</span></p> </td><td style="width:230.25pt;"> <p style="margin-left:0;"><span style="color:#333333;">ç»™ç»„ä»¶ç»‘å®šä¸€ä¸ªæ§åˆ¶å™¨ï¼Œç”¨æ¥æ§åˆ¶ç»„ä»¶ç¿»é¡µã€‚</span></p> </td></tr></tbody></table></div><p>å±æ€§</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:93.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:158.3pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°ç±»å‹</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:192pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:93.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">index</span></p> </td><td style="width:158.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">number</span></p> </td><td style="width:192pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®å½“å‰åœ¨å®¹å™¨ä¸­æ˜¾ç¤ºçš„å­ç»„ä»¶çš„ç´¢å¼•å€¼ã€‚é»˜è®¤å€¼ï¼š0</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:93.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">autoPlay</span></p> </td><td style="background-color:#f8f8f8;width:158.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">boolean</span></p> </td><td style="background-color:#f8f8f8;width:192pt;"> <p style="margin-left:0;"><span style="color:#333333;">å­ç»„ä»¶æ˜¯å¦è‡ªåŠ¨æ’­æ”¾ï¼Œè‡ªåŠ¨æ’­æ”¾çŠ¶æ€ä¸‹ï¼Œå¯¼èˆªç‚¹ä¸å¯æ“ä½œã€‚é»˜è®¤å€¼ï¼šfalse</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:93.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">interval</span></p> </td><td style="width:158.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">number</span></p> </td><td style="width:192pt;"> <p style="margin-left:0;"><span style="color:#333333;">ä½¿ç”¨è‡ªåŠ¨æ’­æ”¾æ—¶æ’­æ”¾çš„æ—¶é—´é—´éš”ï¼Œå•ä½ä¸ºæ¯«ç§’ã€‚é»˜è®¤å€¼ï¼š3000</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:93.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">indicator</span></p> </td><td style="background-color:#f8f8f8;width:158.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">boolean</span></p> </td><td style="background-color:#f8f8f8;width:192pt;"> <p style="margin-left:0;"><span style="color:#333333;">æ˜¯å¦å¯ç”¨å¯¼èˆªç‚¹æŒ‡ç¤ºå™¨ã€‚é»˜è®¤å€¼ï¼štrue</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:93.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">loop</span></p> </td><td style="width:158.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">boolean</span></p> </td><td style="width:192pt;"> <p style="margin-left:0;"><span style="color:#333333;">æ˜¯å¦å¼€å¯å¾ªç¯ã€‚è®¾ç½®ä¸ºtrueæ—¶è¡¨ç¤ºå¼€å¯å¾ªç¯ï¼Œåœ¨LazyForEachæ‡’å¾ªç¯åŠ è½½æ¨¡å¼</span></p> <p style="margin-left:0;"><span style="color:#333333;">ä¸‹ï¼ŒåŠ è½½çš„ç»„ä»¶æ•°é‡å»ºè®®å¤§äº5ä¸ªã€‚é»˜è®¤å€¼ï¼štrue</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:93.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">duration</span></p> </td><td style="background-color:#f8f8f8;width:158.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">number</span></p> </td><td style="background-color:#f8f8f8;width:192pt;"> <p style="margin-left:0;"><span style="color:#333333;">å­ç»„ä»¶åˆ‡æ¢çš„åŠ¨ç”»æ—¶é•¿ï¼Œå•ä½ä¸ºæ¯«ç§’ã€‚</span></p> <p style="margin-left:0;"><span style="color:#333333;">é»˜è®¤å€¼ï¼š400</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:93.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">vertical</span></p> </td><td style="width:158.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">boolean</span></p> </td><td style="width:192pt;"> <p style="margin-left:0;"><span style="color:#333333;">æ˜¯å¦ä¸ºçºµå‘æ»‘åŠ¨ã€‚é»˜è®¤å€¼ï¼šfalse</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:93.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">itemSpace</span></p> </td><td style="background-color:#f8f8f8;width:158.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">number | string</span></p> </td><td style="background-color:#f8f8f8;width:192pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®å­ç»„ä»¶ä¸å­ç»„ä»¶ä¹‹é—´é—´éš™ã€‚é»˜è®¤å€¼ï¼š0</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:93.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">displayMode</span></p> </td><td style="width:158.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">SwiperDisplayMode</span></p> </td><td style="width:192pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®å­ç»„ä»¶æ˜¾ç¤ºæ¨¡å¼ã€‚é»˜è®¤å€¼ï¼š</span></p> <p style="margin-left:0;"><span style="color:#333333;">SwiperDisplayMode.Stretch</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:93.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">cachedCount 8+</span></p> </td><td style="background-color:#f8f8f8;width:158.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">number</span></p> </td><td style="background-color:#f8f8f8;width:192pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®é¢„åŠ è½½å­ç»„ä»¶ä¸ªæ•°ã€‚é»˜è®¤å€¼ï¼š1</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:93.9pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">disableSwipe 8+</span></p> </td><td style="width:158.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">boolean</span></p> </td><td style="width:192pt;"> <p style="margin-left:0;"><span style="color:#333333;">ç¦ç”¨ç»„ä»¶æ»‘åŠ¨åˆ‡æ¢åŠŸèƒ½ã€‚é»˜è®¤å€¼ï¼šfalse</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:93.9pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">displayCount 8+</span></p> </td><td style="background-color:#f8f8f8;width:158.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">number | string</span></p> </td><td style="background-color:#f8f8f8;width:192pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®ä¸€é¡µä¸­æ˜¾ç¤ºå­ç»„ä»¶çš„ä¸ªæ•°ï¼Œè®¾ç½®ä¸º</span></p> <p style="margin-left:0;"><span style="color:#333333;">â€œautoâ€æ—¶ç­‰åŒäº</span></p> <p style="margin-left:0;"><span style="color:#333333;">SwiperDisplayMode.AutoLinearçš„æ˜¾ç¤º</span></p> <p style="margin-left:0;"><span style="color:#333333;">æ•ˆæœã€‚é»˜è®¤å€¼ï¼š1</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:93.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">effectMode 8+</span></p> </td><td style="width:158.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">EdgeEffect</span></p> </td><td style="width:192pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®æ»‘åŠ¨åˆ°è¾¹ç¼˜æ—¶çš„æ˜¾ç¤ºæ•ˆæœã€‚é»˜è®¤å€¼ï¼šEdgeEffect.Spring</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:93.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">curve 8+</span></p> </td><td style="background-color:#f8f8f8;width:158.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">Curve | string</span></p> </td><td style="background-color:#f8f8f8;width:192pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®Swiperçš„åŠ¨ç”»æ›²çº¿ï¼Œé»˜è®¤ä¸ºæ·¡å…¥æ·¡å‡ºæ›²çº¿</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:93.9pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">indicatorStyle 8+</span></p> </td><td style="width:158.3pt;"> <p style="margin-left:0cm;"><span style="color:#333333;">{left?: Length,top?:</span></p> <p style="margin-left:0cm;"><span style="color:#333333;">Length,right?:</span></p> <p style="margin-left:0cm;"><span style="color:#333333;">Length,bottom?: Length,size?:</span></p> <p style="margin-left:0cm;"><span style="color:#333333;">Length,mask?: boolean,color?:</span></p> <p style="margin-left:0cm;"><span style="color:#333333;">ResourceColor,selectedColor?:</span></p> <p style="margin-left:0;"><span style="color:#333333;">ResourceColor}</span></p> </td><td style="width:192pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®å¯¼èˆªç‚¹æ ·å¼ï¼š- left: è®¾ç½®å¯¼èˆªç‚¹è·ç¦»</span></p> <p style="margin-left:0;"><span style="color:#333333;">Swiperç»„ä»¶å·¦è¾¹çš„è·ç¦»ã€‚- top: è®¾ç½®å¯¼</span></p> <p style="margin-left:0cm;"><span style="color:#333333;">èˆªç‚¹è·ç¦»Swiperç»„ä»¶é¡¶éƒ¨çš„è·ç¦»ã€‚right: è®¾ç½®å¯¼èˆªç‚¹è·ç¦»Swiperç»„ä»¶å³è¾¹çš„è·ç¦»ã€‚- bottom: è®¾ç½®å¯¼èˆªç‚¹è·ç¦»</span></p> <p style="margin-left:0cm;"><span style="color:#333333;">Swiperç»„ä»¶åº•éƒ¨çš„è·ç¦»ã€‚- size: è®¾ç½®å¯¼èˆªç‚¹çš„ç›´å¾„ã€‚- mask: è®¾ç½®æ˜¯å¦æ˜¾ç¤ºå¯¼èˆª</span></p> <p style="margin-left:0;"><span style="color:#333333;">ç‚¹è’™å±‚æ ·å¼ã€‚- color: è®¾ç½®å¯¼èˆªç‚¹çš„é¢œ</span></p> <p style="margin-left:0;"><span style="color:#333333;">è‰²ã€‚- selectedColor: è®¾ç½®é€‰ä¸­çš„å¯¼èˆªç‚¹çš„é¢œè‰²ã€‚</span></p> </td></tr></tbody></table></div><p>SwiperDisplayModeæšä¸¾è¯´æ˜</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:101.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:342.8pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:101.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">Stretch</span></p> </td><td style="width:342.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">Swiperæ»‘åŠ¨ä¸€é¡µçš„å®½åº¦ä¸ºSwiperç»„ä»¶è‡ªèº«çš„å®½åº¦ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:101.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">AutoLinear</span></p> </td><td style="background-color:#f8f8f8;width:342.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">Swiperæ»‘åŠ¨ä¸€é¡µçš„å®½åº¦ä¸ºå­ç»„ä»¶å®½åº¦ä¸­çš„ å¤§å€¼ã€‚</span></p> </td></tr></tbody></table></div>EdgeEffectæšä¸¾è¯´æ˜<div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:51.85pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:392.35pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:51.85pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">Spring</span></p> </td><td style="width:392.35pt;"> <p style="margin-left:0;"><span style="color:#333333;">å¼¹æ€§ç‰©ç†åŠ¨æ•ˆï¼Œæ»‘åŠ¨åˆ°è¾¹ç¼˜åå¯ä»¥é€šè¿‡è§¦æ‘¸äº‹ä»¶ç»§ç»­æ»‘åŠ¨ä¸€æ®µè·ç¦»ï¼Œæ¾æ‰‹åå›å¼¹ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:51.85pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">Fade</span></p> </td><td style="background-color:#f8f8f8;width:392.35pt;"> <p style="margin-left:0;"><span style="color:#333333;">æ»‘åŠ¨åˆ°è¾¹ç¼˜åï¼Œå¯ä»¥é€šè¿‡è§¦æ‘¸äº‹ä»¶ç»§ç»­æ»‘åŠ¨ä¸€æ®µé˜´å½±ï¼Œæ¾æ‰‹åé˜´å½±å›å¼¹ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:51.85pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">None</span></p> </td><td style="width:392.35pt;"> <p style="margin-left:0;"><span style="color:#333333;">æ»‘åŠ¨åˆ°è¾¹ç¼˜åæ— æ•ˆæœã€‚</span></p> </td></tr></tbody></table></div><p>SwiperController<br>Swiperå®¹å™¨ç»„ä»¶çš„æ§åˆ¶å™¨ï¼Œå¯ä»¥å°†æ­¤å¯¹è±¡ç»‘å®šè‡³Swiperç»„ä»¶ï¼Œç„¶åé€šè¿‡å®ƒæ§åˆ¶ç¿»é¡µã€‚</p><p>showNext</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">showNext</span>(): <span class="keyword">void</span></span><br></pre></td></tr></table></figure><p>ç¿»è‡³ä¸‹ä¸€é¡µã€‚<br>showPrevious</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">showPrevious</span>(): <span class="keyword">void</span></span><br></pre></td></tr></table></figure><p>ç¿»è‡³ä¸Šä¸€é¡µã€‚<br>finishAnimation</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">finishAnimation</span>(callback?: <span class="function">() =&gt;</span> <span class="keyword">void</span>): <span class="keyword">void</span></span><br></pre></td></tr></table></figure><p>åœæ­¢æ’­æ”¾åŠ¨ç”»ã€‚å‚æ•°ï¼š</p><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:94.65pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>å‚æ•°å</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:102.05pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°ç±»å‹</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:82.55pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å¿…å¡«é¡¹</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:165pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:94.65pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">callback</span></p> </td><td style="width:102.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">() =&gt; void</span></p> </td><td style="width:82.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">æ˜¯</span></p> </td><td style="width:165pt;"> <p style="margin-left:0;"><span style="color:#333333;">åŠ¨ç”»ç»“æŸçš„å›è°ƒã€‚</span></p> </td></tr></tbody></table><p>äº‹ä»¶<br>onChange</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">onChange</span>(<span class="attr">event</span>: <span class="function">(<span class="params">index: number</span>) =&gt;</span> <span class="keyword">void</span>)</span><br></pre></td></tr></table></figure><p>å½“å‰æ˜¾ç¤ºçš„ç»„ä»¶ç´¢å¼•å˜åŒ–æ—¶è§¦å‘è¯¥äº‹ä»¶ï¼Œè¿”å›å€¼ä¸ºå½“å‰æ˜¾ç¤ºçš„å­ç»„ä»¶çš„ç´¢å¼•å€¼ã€‚</p><p>å‚æ•°</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:79.65pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>å‚æ•°å</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:95.3pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°ç±»å‹</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:79.55pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å¿…å¡«é¡¹</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:189.75pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:79.65pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">index</span></p> </td><td style="width:95.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">number</span></p> </td><td style="width:79.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">æ˜¯</span></p> </td><td style="width:189.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">å½“å‰æ˜¾ç¤ºå…ƒç´ çš„ç´¢å¼•ã€‚</span></p> </td></tr></tbody></table></div><h2 id="Grid"><a href="#Grid" class="headerlink" title="Grid"></a>Grid</h2><p>ç½‘æ ¼å®¹å™¨ï¼Œç”±â€œè¡Œâ€å’Œâ€œåˆ—â€åˆ†å‰²çš„å•å…ƒæ ¼æ‰€ç»„æˆï¼Œé€šè¿‡æŒ‡å®šâ€œé¡¹ç›®â€æ‰€åœ¨çš„å•å…ƒæ ¼åšå‡ºå„ç§å„æ ·çš„å¸ƒå±€ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Grid</span>(scroller?: <span class="title class_">Scroller</span>)</span><br></pre></td></tr></table></figure><p>å‚æ•°</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:60.1pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>å‚æ•°å</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:66.05pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°ç±»å‹</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:44.25pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å¿…å¡«</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:273.8pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:60.1pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">scroller</span></p> </td><td style="width:66.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">Scroller</span></p> </td><td style="width:44.25pt;"> <p style="margin-left:0;"><span style="color:#333333;">å¦</span></p> </td><td style="width:273.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">å¯æ»šåŠ¨ç»„ä»¶çš„æ§åˆ¶å™¨ã€‚ç”¨äºä¸å¯æ»šåŠ¨ç»„ä»¶è¿›è¡Œç»‘å®šã€‚</span></p> </td></tr></tbody></table></div><p>å±æ€§</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:114.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:81.8pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°ç±»å‹</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:247.5pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:114.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">columnsTemplate</span></p> </td><td style="width:81.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">string</span></p> </td><td style="width:247.5pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®å½“å‰ç½‘æ ¼å¸ƒå±€åˆ—çš„æ•°é‡ï¼Œä¸è®¾ç½®æ—¶é»˜è®¤1åˆ—ã€‚ä¾‹</span></p> <p style="margin-left:0;"><span style="color:#333333;">å¦‚, '1fr 1fr 2fr' æ˜¯å°†çˆ¶ç»„ä»¶åˆ†3åˆ—ï¼Œå°†çˆ¶ç»„ä»¶å…è®¸çš„å®½åˆ†ä¸º4ç­‰ä»½ï¼Œç¬¬ä¸€åˆ—å 1ä»½ï¼Œç¬¬äºŒåˆ—å 1ä»½ï¼Œç¬¬ä¸‰åˆ—å 2 ä»½ã€‚é»˜è®¤å€¼ï¼š'1fr'</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:114.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">rowsTemplate</span></p> </td><td style="background-color:#f8f8f8;width:81.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">string</span></p> </td><td style="background-color:#f8f8f8;width:247.5pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®å½“å‰ç½‘æ ¼å¸ƒå±€è¡Œçš„æ•°é‡ï¼Œä¸è®¾ç½®æ—¶é»˜è®¤1è¡Œã€‚ä¾‹å¦‚, '1fr 1fr 2fr'æ˜¯å°†çˆ¶ç»„ä»¶åˆ†ä¸‰è¡Œï¼Œå°†çˆ¶ç»„ä»¶å…è®¸çš„</span></p> <p style="margin-left:0;"><span style="color:#333333;">é«˜åˆ†ä¸º4ç­‰ä»½ï¼Œç¬¬ä¸€è¡Œå 1ä»½ï¼Œç¬¬äºŒè¡Œå ä¸€ä»½ï¼Œç¬¬ä¸‰è¡Œå 2ä»½ã€‚é»˜è®¤å€¼ï¼š'1fr'</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:114.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">columnsGap</span></p> </td><td style="width:81.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">Length</span></p> </td><td style="width:247.5pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®åˆ—ä¸åˆ—çš„é—´è·ã€‚é»˜è®¤å€¼ï¼š0</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:114.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">rowsGap</span></p> </td><td style="background-color:#f8f8f8;width:81.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">Length</span></p> </td><td style="background-color:#f8f8f8;width:247.5pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®è¡Œä¸è¡Œçš„é—´è·ã€‚é»˜è®¤å€¼ï¼š0</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:114.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">scrollBar</span></p> </td><td style="width:81.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">BarState</span></p> </td><td style="width:247.5pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®æ»šåŠ¨æ¡çŠ¶æ€ã€‚é»˜è®¤å€¼ï¼šBarState.Off</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:114.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">scrollBarColor</span></p> </td><td style="background-color:#f8f8f8;width:81.8pt;"> <p style="margin-left:0cm;"><span style="color:#333333;">string |</span></p> <p style="margin-left:0cm;"><span style="color:#333333;">number |</span></p> <p style="margin-left:0;"><span style="color:#333333;">Color</span></p> </td><td style="background-color:#f8f8f8;width:247.5pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®æ»šåŠ¨æ¡çš„é¢œè‰²ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:114.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">scrollBarWidth</span></p> </td><td style="width:81.8pt;"> <p style="margin-left:0cm;"><span style="color:#333333;">string |</span></p> <p style="margin-left:0;"><span style="color:#333333;">number</span></p> </td><td style="width:247.5pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®æ»šåŠ¨æ¡çš„å®½åº¦ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:114.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">cachedCount</span></p> </td><td style="background-color:#f8f8f8;width:81.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">number</span></p> </td><td style="background-color:#f8f8f8;width:247.5pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®é¢„åŠ è½½çš„GridItemçš„æ•°é‡ã€‚å…·ä½“ä½¿ç”¨å¯å‚è€ƒå‡å°‘åº”ç”¨ç™½å—è¯´æ˜ã€‚é»˜è®¤å€¼ï¼š1</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:114.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">editMode 8+</span></p> </td><td style="width:81.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">boolean</span></p> </td><td style="width:247.5pt;"> <p style="margin-left:0;"><span style="color:#333333;">æ˜¯å¦è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œè¿›å…¥ç¼–è¾‘æ¨¡å¼å¯ä»¥æ‹–æ‹½Gridç»„ä»¶å†…éƒ¨GridItemã€‚é»˜è®¤å€¼ï¼šfalse</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:114.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">layoutDirection 8+</span></p> </td><td style="background-color:#f8f8f8;width:81.8pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">GridDirection</span></p> </td><td style="background-color:#f8f8f8;width:247.5pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®å¸ƒå±€çš„ä¸»è½´æ–¹å‘ã€‚é»˜è®¤å€¼ï¼šGridDirection.Row</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:114.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">maxCount 8+</span></p> </td><td style="width:81.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">number</span></p> </td><td style="width:247.5pt;"> <p style="margin-left:0cm;"><span style="color:#333333;">å½“layoutDirectionæ˜¯Row/RowReverseæ—¶ï¼Œè¡¨ç¤ºå¯æ˜¾ç¤ºçš„ å¤§è¡Œæ•°å½“layoutDirectionæ˜¯</span></p> <p style="margin-left:0;"><span style="color:#333333;">Column/ColumnReverseæ—¶ï¼Œè¡¨ç¤ºå¯æ˜¾ç¤ºçš„ å¤§åˆ—</span></p> <p style="margin-left:0;"><span style="color:#333333;">æ•°ã€‚é»˜è®¤å€¼ï¼š1</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:114.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">minCount 8+</span></p> </td><td style="background-color:#f8f8f8;width:81.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">number</span></p> </td><td style="background-color:#f8f8f8;width:247.5pt;"> <p style="margin-left:0cm;"><span style="color:#333333;">å½“layoutDirectionæ˜¯Row/RowReverseæ—¶ï¼Œè¡¨ç¤ºå¯æ˜¾ç¤ºçš„ å°è¡Œæ•°ã€‚å½“layoutDirectionæ˜¯</span></p> <p style="margin-left:0;"><span style="color:#333333;">Column/ColumnReverseæ—¶ï¼Œè¡¨ç¤ºå¯æ˜¾ç¤ºçš„ å°åˆ—</span></p> <p style="margin-left:0;"><span style="color:#333333;">æ•°ã€‚é»˜è®¤å€¼ï¼š1</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:114.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">cellLength 8+</span></p> </td><td style="width:81.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">number</span></p> </td><td style="width:247.5pt;"> <p style="margin-left:0;"><span style="color:#333333;">å½“layoutDirectionæ˜¯Row/RowReverseæ—¶ï¼Œè¡¨ç¤ºä¸€è¡Œçš„é«˜åº¦ã€‚å½“layoutDirectionæ˜¯</span></p> <p style="margin-left:0;"><span style="color:#333333;">Column/ColumnReverseæ—¶ï¼Œè¡¨ç¤ºä¸€åˆ—çš„å®½åº¦ã€‚é»˜</span></p> <p style="margin-left:0;"><span style="color:#333333;">è®¤å€¼ï¼š0</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:114.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">multiSelectable 8+</span></p> </td><td style="background-color:#f8f8f8;width:81.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">boolean</span></p> </td><td style="background-color:#f8f8f8;width:247.5pt;"> <p style="margin-left:0;"><span style="color:#333333;">æ˜¯å¦å¼€å¯é¼ æ ‡æ¡†é€‰ã€‚- falseï¼šå…³é—­æ¡†é€‰ã€‚- trueï¼šå¼€å¯æ¡†é€‰ã€‚é»˜è®¤å€¼ï¼šfalse</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:114.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">supportAnimation 8+</span></p> </td><td style="width:81.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">boolean</span></p> </td><td style="width:247.5pt;"> <p style="margin-left:0;"><span style="color:#333333;">æ˜¯å¦æ”¯æŒåŠ¨ç”»ã€‚é»˜è®¤å€¼ï¼šfalse</span></p> </td></tr></tbody></table></div><p>GridDirectionæšä¸¾è¯´æ˜8+</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:92.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:351.8pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:92.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">Row</span></p> </td><td style="width:351.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">ä¸»è½´å¸ƒå±€æ–¹å‘æ²¿æ°´å¹³æ–¹å‘å¸ƒå±€ï¼Œå³è‡ªå·¦å¾€å³å…ˆå¡«æ»¡ä¸€è¡Œï¼Œå†å»å¡«ä¸‹ä¸€è¡Œã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:92.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">Column</span></p> </td><td style="background-color:#f8f8f8;width:351.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">ä¸»è½´å¸ƒå±€æ–¹å‘æ²¿å‚ç›´æ–¹å‘å¸ƒå±€ï¼Œå³è‡ªä¸Šå¾€ä¸‹å…ˆå¡«æ»¡ä¸€åˆ—ï¼Œå†å»å¡«ä¸‹ä¸€åˆ—ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:92.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">RowReverse</span></p> </td><td style="width:351.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">ä¸»è½´å¸ƒå±€æ–¹å‘æ²¿æ°´å¹³æ–¹å‘åå‘å¸ƒå±€ï¼Œå³è‡ªå³å¾€å·¦å…ˆå¡«æ»¡ä¸€è¡Œï¼Œå†å»å¡«ä¸‹ä¸€è¡Œã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:92.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">ColumnReverse</span></p> </td><td style="background-color:#f8f8f8;width:351.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">ä¸»è½´å¸ƒå±€æ–¹å‘æ²¿å‚ç›´æ–¹å‘åå‘å¸ƒå±€ï¼Œå³è‡ªä¸‹å¾€ä¸Šå…ˆå¡«æ»¡ä¸€åˆ—ï¼Œå†å»å¡«ä¸‹ä¸€åˆ—ã€‚</span></p> </td></tr></tbody></table></div>äº‹ä»¶<div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:248.45pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:195.75pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>åŠŸèƒ½æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:248.45pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">onScrollIndex(event: (first: number) =&gt; void)</span></p> </td><td style="width:195.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">å½“å‰ç½‘æ ¼æ˜¾ç¤ºçš„èµ·å§‹ä½ç½®itemå‘ç”Ÿå˜åŒ–</span></p> <p style="margin-left:0;"><span style="color:#333333;">æ—¶è§¦å‘ã€‚- first: å½“å‰æ˜¾ç¤ºçš„ç½‘æ ¼èµ·å§‹ä½ç½®çš„ç´¢å¼•å€¼ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:248.45pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">onItemDragStart(event: (event: ItemDragInfo, itemIndex: number) =&gt; (() =&gt; any) | void)</span></p> </td><td style="background-color:#f8f8f8;width:195.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">å¼€å§‹æ‹–æ‹½ç½‘æ ¼å…ƒç´ æ—¶è§¦å‘ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:248.45pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">onItemDragEnter(event: (event: ItemDragInfo) =&gt; void)</span></p> </td><td style="width:195.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">æ‹–æ‹½è¿›å…¥ç½‘æ ¼å…ƒç´ èŒƒå›´å†…æ—¶è§¦å‘ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:248.45pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">onItemDragMove(event: (event: ItemDragInfo, itemIndex: number, insertIndex: number) =&gt; void)</span></p> </td><td style="background-color:#f8f8f8;width:195.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">æ‹–æ‹½åœ¨ç½‘æ ¼å…ƒç´ èŒƒå›´å†…ç§»åŠ¨æ—¶è§¦å‘ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:248.45pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">onItemDragLeave(event: (event: ItemDragInfo, itemIndex: number) =&gt; void)</span></p> </td><td style="width:195.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">æ‹–æ‹½ç¦»å¼€ç½‘æ ¼å…ƒç´ æ—¶è§¦å‘ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:248.45pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">onItemDrop(event: (event: ItemDragInfo, itemIndex: number, insertIndex: number,</span></p> <p style="margin-left:.1pt;"><span style="color:#333333;">isSuccess: boolean) =&gt; void)</span></p> </td><td style="background-color:#f8f8f8;width:195.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">ç»‘å®šè¯¥äº‹ä»¶çš„ç½‘æ ¼å…ƒç´ å¯ä½œä¸ºæ‹–æ‹½é‡Šæ”¾ç›®æ ‡ï¼Œå½“åœ¨ç½‘æ ¼å…ƒç´ å†…åœæ­¢æ‹–æ‹½æ—¶è§¦å‘ã€‚</span></p> </td></tr></tbody></table></div><p>ItemDragInfoå¯¹è±¡è¯´æ˜</p><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:84.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:120.05pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>ç±»å‹</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:240pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:84.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">x</span></p> </td><td style="width:120.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">number</span></p> </td><td style="width:240pt;"> <p style="margin-left:0;"><span style="color:#333333;">å½“å‰æ‹–æ‹½ç‚¹çš„xåæ ‡ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:84.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">y</span></p> </td><td style="background-color:#f8f8f8;width:120.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">number</span></p> </td><td style="background-color:#f8f8f8;width:240pt;"> <p style="margin-left:0;"><span style="color:#333333;">å½“å‰æ‹–æ‹½ç‚¹çš„yåæ ‡ã€‚</span></p> </td></tr></tbody></table><h2 id="GridItem"><a href="#GridItem" class="headerlink" title="GridItem"></a>GridItem</h2><p>ç½‘æ ¼å®¹å™¨ä¸­å•é¡¹å†…å®¹å®¹å™¨ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">GridItem</span>()</span><br></pre></td></tr></table></figure><p>å±æ€§</p><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:78.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:57.8pt;"> <p style="margin-left:0cm;"><span style="color:#333333;"><strong>å‚æ•°ç±»å‹</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:308.3pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:78.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">rowStart</span></p> </td><td style="width:57.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">number</span></p> </td><td style="width:308.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">æŒ‡å®šå½“å‰å…ƒç´ èµ·å§‹è¡Œå·ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:78.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">rowEnd</span></p> </td><td style="background-color:#f8f8f8;width:57.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">number</span></p> </td><td style="background-color:#f8f8f8;width:308.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">æŒ‡å®šå½“å‰å…ƒç´ ç»ˆç‚¹è¡Œå·ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:78.15pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">columnStart</span></p> </td><td style="width:57.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">number</span></p> </td><td style="width:308.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">æŒ‡å®šå½“å‰å…ƒç´ èµ·å§‹åˆ—å·ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:78.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">columnEnd</span></p> </td><td style="background-color:#f8f8f8;width:57.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">number</span></p> </td><td style="background-color:#f8f8f8;width:308.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">æŒ‡å®šå½“å‰å…ƒç´ ç»ˆç‚¹åˆ—å·ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:78.15pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">forceRebuild</span></p> </td><td style="width:57.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">boolean</span></p> </td><td style="width:308.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®åœ¨è§¦å‘ç»„ä»¶buildæ—¶æ˜¯å¦é‡æ–°åˆ›å»ºæ­¤èŠ‚ç‚¹ã€‚é»˜è®¤å€¼ï¼šfalse</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:78.15pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">selectable8+</span></p> </td><td style="background-color:#f8f8f8;width:57.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">boolean</span></p> </td><td style="background-color:#f8f8f8;width:308.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">å½“å‰GridItemå…ƒç´ æ˜¯å¦å¯ä»¥è¢«é¼ æ ‡æ¡†é€‰ã€‚é»˜è®¤å€¼ï¼štrue<strong>è¯´æ˜ï¼š</strong>å¤–å±‚</span></p> <p style="margin-left:0;"><span style="color:#333333;">Gridå®¹å™¨çš„é¼ æ ‡æ¡†é€‰å¼€å¯æ—¶ï¼ŒGridItemçš„æ¡†é€‰æ‰ç”Ÿæ•ˆã€‚</span></p> </td></tr></tbody></table><p>äº‹ä»¶</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:117.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:327.05pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>åŠŸèƒ½æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:117.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">onSelect(event:</span></p> <p style="margin-left:.1pt;"><span style="color:#333333;">(isSelected: boolean)</span></p> <p style="margin-left:.1pt;"><span style="color:#333333;">=&gt; void)8+</span></p> </td><td style="width:327.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">GridItemå…ƒç´ è¢«é¼ æ ‡æ¡†é€‰çš„çŠ¶æ€æ”¹å˜æ—¶è§¦å‘å›è°ƒã€‚isSelectedï¼šè¿›å…¥é¼ æ ‡æ¡†é€‰èŒƒå›´å³è¢«é€‰ä¸­ï¼Œè¿”å›trueï¼›ç§»å‡ºé¼ æ ‡æ¡†é€‰èŒƒå›´å³æœªè¢«é€‰ä¸­ï¼Œè¿”å› falseã€‚</span></p> </td></tr></tbody></table></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="title class_">Grid</span>() &#123;</span><br><span class="line">       <span class="comment">// ç¬¬ä¸€è¡Œ</span></span><br><span class="line">       <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">         <span class="title class_">Text</span>(<span class="string">&#x27;1&#x27;</span>)</span><br><span class="line">       &#125; .<span class="title function_">height</span>(<span class="string">&#x27;20%&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;20%&#x27;</span>)</span><br><span class="line">       <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">         <span class="title class_">Text</span>(<span class="string">&#x27;2&#x27;</span>)</span><br><span class="line">       &#125;.<span class="title function_">height</span>(<span class="string">&#x27;20%&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;20%&#x27;</span>)</span><br><span class="line">       <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">         <span class="title class_">Text</span>(<span class="string">&#x27;3&#x27;</span>)</span><br><span class="line">       &#125;.<span class="title function_">height</span>(<span class="string">&#x27;20%&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;20%&#x27;</span>)</span><br><span class="line"></span><br><span class="line">       <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">         <span class="title class_">Text</span>(<span class="string">&#x27;4&#x27;</span>)</span><br><span class="line">       &#125;.<span class="title function_">height</span>(<span class="string">&#x27;20%&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;20%&#x27;</span>)</span><br><span class="line">       <span class="title class_">GridItem</span>() &#123;</span><br><span class="line">         <span class="title class_">Text</span>(<span class="string">&#x27;5&#x27;</span>)</span><br><span class="line">       &#125;.<span class="title function_">height</span>(<span class="string">&#x27;20%&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;20%&#x27;</span>)</span><br><span class="line">       <span class="comment">// GridItem() &#123;</span></span><br><span class="line">       <span class="comment">//   Text(&#x27;6&#x27;)</span></span><br><span class="line">       <span class="comment">// &#125;.height(&#x27;20%&#x27;).width(&#x27;20%&#x27;)</span></span><br><span class="line">     &#125;.<span class="title function_">height</span>(<span class="string">&#x27;30%&#x27;</span>).<span class="title function_">width</span>(<span class="string">&#x27;30%&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@v5/v2/2024042121.jpg"></p><p>åŸºç¡€ç»„ä»¶</p><h2 id="Text"><a href="#Text" class="headerlink" title="Text"></a>Text</h2><p>æ˜¾ç¤ºä¸€æ®µæ–‡æœ¬çš„ç»„ä»¶ã€‚å¯ä»¥åŒ…å«Spanå­ç»„ä»¶ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="title class_">Text</span>(content?: string | <span class="title class_">Resource</span>)</span><br><span class="line"></span><br><span class="line"><span class="title class_">Text</span>(<span class="variable language_">this</span>.<span class="property">message</span>)</span><br><span class="line">          .<span class="title function_">fontSize</span>(<span class="number">20</span>)</span><br><span class="line">          .<span class="title function_">fontWeight</span>(<span class="title class_">FontWeight</span>.<span class="property">Bold</span>)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å±æ€§</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:86.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:144.05pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°ç±»å‹</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:213.75pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:86.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">textAlign</span></p> </td><td style="width:144.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">TextAlign</span></p> </td><td style="width:213.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®å¤šè¡Œæ–‡æœ¬çš„æ–‡æœ¬å¯¹é½æ–¹å¼ã€‚é»˜è®¤å€¼ï¼š</span></p> <p style="margin-left:0;"><span style="color:#333333;">TextAlign.Start</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:86.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">textOverflow</span></p> </td><td style="background-color:#f8f8f8;width:144.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">{overflow: TextOverflow}</span></p> </td><td style="background-color:#f8f8f8;width:213.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®æ–‡æœ¬è¶…é•¿æ—¶çš„æ˜¾ç¤ºæ–¹å¼ã€‚é»˜è®¤å€¼ï¼š</span></p> <p style="margin-left:0;text-align:justify;"><span style="color:#333333;">{overflow: TextOverflow.Clip}<strong>è¯´æ˜ï¼š</strong>æ–‡æœ¬æˆªæ–­æ˜¯æŒ‰å­—æˆªæ–­ã€‚ä¾‹å¦‚ï¼Œè‹±æ–‡ä»¥å•è¯ä¸º å°å•</span></p> <p style="margin-left:0;"><span style="color:#333333;">ä½è¿›è¡Œæˆªæ–­ï¼Œè‹¥éœ€è¦ä»¥å­—æ¯ä¸ºå•ä½è¿›è¡Œæˆªæ–­ï¼Œå¯åœ¨å­—æ¯é—´æ·»åŠ é›¶å®½ç©ºæ ¼ï¼š\u200Bã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:86.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">maxLines</span></p> </td><td style="width:144.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">number</span></p> </td><td style="width:213.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®æ–‡æœ¬çš„ å¤§è¡Œæ•°ã€‚é»˜è®¤å€¼ï¼šInfinity</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:86.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">lineHeight</span></p> </td><td style="background-color:#f8f8f8;width:144.05pt;"> <p style="margin-left:0cm;"><span style="color:#333333;">string | number |</span></p> <p style="margin-left:0;"><span style="color:#333333;">Resource</span></p> </td><td style="background-color:#f8f8f8;width:213.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®æ–‡æœ¬çš„æ–‡æœ¬è¡Œé«˜ï¼Œè®¾ç½®å€¼ä¸å¤§äº0æ—¶ï¼Œä¸é™åˆ¶æ–‡æœ¬è¡Œé«˜ï¼Œè‡ªé€‚åº”å­—ä½“å¤§å°ï¼ŒLengthä¸º numberç±»å‹æ—¶å•ä½ä¸ºfpã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:86.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">decoration</span></p> </td><td style="width:144.05pt;"> <p style="margin-left:0cm;"><span style="color:#333333;">{type:</span></p> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">TextDecorationType,color?:</span></p> <p style="margin-left:0;"><span style="color:#333333;">ResourceColor}</span></p> </td><td style="width:213.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®æ–‡æœ¬è£…é¥°çº¿æ ·å¼åŠå…¶é¢œè‰²ã€‚é»˜è®¤å€¼ï¼š</span></p> <p style="margin-left:0;"><span style="color:#333333;">{type: TextDecorationType.None,colorï¼š</span></p> <p style="margin-left:0;"><span style="color:#333333;">Color.Black}</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:86.4pt;"> <p style="margin-left:.05pt;text-align:center;"><span style="color:#333333;">baselineOffset</span></p> </td><td style="background-color:#f8f8f8;width:144.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">number | string</span></p> </td><td style="background-color:#f8f8f8;width:213.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®æ–‡æœ¬åŸºçº¿çš„åç§»é‡ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:86.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">letterSpacing</span></p> </td><td style="width:144.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">number | string</span></p> </td><td style="width:213.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®æ–‡æœ¬å­—ç¬¦é—´è·ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:86.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">minFontSize</span></p> </td><td style="background-color:#f8f8f8;width:144.05pt;"> <p style="margin-left:0cm;"><span style="color:#333333;">number | string |</span></p> <p style="margin-left:0;"><span style="color:#333333;">Resource</span></p> </td><td style="background-color:#f8f8f8;width:213.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®æ–‡æœ¬ å°æ˜¾ç¤ºå­—å·ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:86.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">maxFontSize</span></p> </td><td style="width:144.05pt;"> <p style="margin-left:0cm;"><span style="color:#333333;">number | string |</span></p> <p style="margin-left:0;"><span style="color:#333333;">Resource</span></p> </td><td style="width:213.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®æ–‡æœ¬ å¤§æ˜¾ç¤ºå­—å·ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:86.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">textCase</span></p> </td><td style="background-color:#f8f8f8;width:144.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">TextCase</span></p> </td><td style="background-color:#f8f8f8;width:213.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®æ–‡æœ¬å¤§å°å†™ã€‚é»˜è®¤å€¼ï¼š</span></p> <p style="margin-left:0;"><span style="color:#333333;">TextCase.Normal</span></p> </td></tr></tbody></table></div><p>TextInput<br>å•è¡Œæ–‡æœ¬è¾“å…¥æ¡†ç»„ä»¶ã€‚</p><p>å­ç»„ä»¶   æ— </p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="title class_">TextInput</span>(value?:&#123;placeholder?: <span class="title class_">ResourceStr</span>, text?: <span class="title class_">ResourceStr</span>, controller?:</span><br><span class="line"> </span><br><span class="line"><span class="title class_">TextInputController</span>&#125;)</span><br></pre></td></tr></table></figure><p>å‚æ•°</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:90.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>å‚æ•°å</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:130.55pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°ç±»å‹</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:47.25pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å¿…å¡«</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:176.25pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:90.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">placeholder</span></p> </td><td style="width:130.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">ResourceStr</span></p> </td><td style="width:47.25pt;"> <p style="margin-left:0;"><span style="color:#333333;">å¦</span></p> </td><td style="width:176.25pt;"> <p style="margin-left:0;"><span style="color:#333333;">æ— è¾“å…¥æ—¶çš„æç¤ºæ–‡æœ¬ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:90.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">text</span></p> </td><td style="background-color:#f8f8f8;width:130.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">ResourceStr</span></p> </td><td style="background-color:#f8f8f8;width:47.25pt;"> <p style="margin-left:0;"><span style="color:#333333;">å¦</span></p> </td><td style="background-color:#f8f8f8;width:176.25pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®è¾“å…¥æ¡†å½“å‰çš„æ–‡æœ¬å†…å®¹ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:90.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">controller8+</span></p> </td><td style="width:130.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">TextInputController</span></p> </td><td style="width:47.25pt;"> <p style="margin-left:0;"><span style="color:#333333;">å¦</span></p> </td><td style="width:176.25pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®TextInputæ§åˆ¶å™¨ã€‚</span></p> </td></tr></tbody></table></div>å±æ€§<div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:99.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:108.05pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°ç±»å‹</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:237pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:99.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">type</span></p> </td><td style="width:108.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">InputType</span></p> </td><td style="width:237pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®è¾“å…¥æ¡†ç±»å‹ã€‚é»˜è®¤å€¼ï¼šInputType.Normal</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:99.15pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">placeholderColor</span></p> </td><td style="background-color:#f8f8f8;width:108.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">ResourceColor</span></p> </td><td style="background-color:#f8f8f8;width:237pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®placeholderé¢œè‰²ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:99.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">placeholderFont</span></p> </td><td style="width:108.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">Font</span></p> </td><td style="width:237pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®placeholderæ–‡æœ¬æ ·å¼ï¼š- size: è®¾ç½®æ–‡æœ¬å°ºå¯¸ï¼ŒLengthä¸ºnumberç±»å‹æ—¶ï¼Œä½¿ç”¨fpå•ä½ã€‚weight: è®¾ç½®æ–‡æœ¬çš„å­—ä½“ç²—ç»†ï¼Œnumberç±»å‹å–å€¼</span></p> <p style="margin-left:0;"><span style="color:#333333;">[100, 900]ï¼Œå–å€¼é—´éš”ä¸º100ï¼Œé»˜è®¤ä¸º400ï¼Œå–å€¼è¶Šå¤§ï¼Œå­—ä½“è¶Šç²—ã€‚- family: è®¾ç½®æ–‡æœ¬çš„å­—ä½“åˆ—è¡¨ã€‚ä½¿</span></p> <p style="margin-left:0;"><span style="color:#333333;">ç”¨å¤šä¸ªå­—ä½“ï¼Œä½¿ç”¨','è¿›è¡Œåˆ†å‰²ï¼Œä¼˜å…ˆçº§æŒ‰é¡ºåºç”Ÿ</span></p> <p style="margin-left:0;"><span style="color:#333333;">æ•ˆã€‚ä¾‹å¦‚ï¼š'Arial, sans-serif'ã€‚- style: è®¾ç½®æ–‡æœ¬çš„å­—ä½“æ ·å¼ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:99.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">enterKeyType</span></p> </td><td style="background-color:#f8f8f8;width:108.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">EnterKeyType</span></p> </td><td style="background-color:#f8f8f8;width:237pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®è¾“å…¥æ³•å›è½¦é”®ç±»å‹ã€‚é»˜è®¤å€¼ï¼š</span></p> <p style="margin-left:0;"><span style="color:#333333;">EnterKeyType.Done</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:99.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">caretColor</span></p> </td><td style="width:108.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">ResourceColor</span></p> </td><td style="width:237pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®è¾“å…¥æ¡†å…‰æ ‡é¢œè‰²ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:99.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">maxLength</span></p> </td><td style="background-color:#f8f8f8;width:108.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">number</span></p> </td><td style="background-color:#f8f8f8;width:237pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®æ–‡æœ¬çš„ å¤§è¾“å…¥å­—ç¬¦æ•°ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:99.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">inputFilter8+</span></p> </td><td style="width:108.05pt;"> <p style="margin-left:0cm;"><span style="color:#333333;">{value:</span></p> <p style="margin-left:0;"><span style="color:#333333;">ResourceStr,error?: (value: string) =&gt; void}</span></p> </td><td style="width:237pt;"> <p style="margin-left:0;"><span style="color:#333333;">æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ»¡è¶³è¡¨è¾¾å¼çš„è¾“å…¥å…è®¸æ˜¾ç¤ºï¼Œä¸æ»¡è¶³æ­£åˆ™è¡¨è¾¾å¼çš„è¾“å…¥è¢«å¿½ç•¥ã€‚ä»…æ”¯æŒå•ä¸ªå­—ç¬¦åŒ¹é…ï¼Œä¸æ”¯æŒå­—ç¬¦ä¸²åŒ¹é…ã€‚ä¾‹å¦‚ï¼š^(?=.<em>\d)(?=.</em>[a-z])(?=.* [A-Z]).{8,10}$ï¼Œ8åˆ°10ä½çš„å¼ºå¯†ç ä¸æ”¯æŒè¿‡æ»¤ã€‚valueï¼šè®¾ç½®æ­£åˆ™è¡¨è¾¾å¼ã€‚- errorï¼šæ­£åˆ™åŒ¹é…å¤±è´¥æ—¶ï¼Œè¿”å›è¢«å¿½ç•¥çš„å†…å®¹ã€‚</span></p> </td></tr></tbody></table></div><p>EnterKeyTypeæšä¸¾è¯´æ˜</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:143.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:300.8pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:143.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">Go</span></p> </td><td style="width:300.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">æ˜¾ç¤ºGoæ–‡æœ¬ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:143.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">Search</span></p> </td><td style="background-color:#f8f8f8;width:300.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">æ˜¾ç¤ºä¸ºæœç´¢æ ·å¼ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:143.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">Send</span></p> </td><td style="width:300.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">æ˜¾ç¤ºä¸ºå‘é€æ ·å¼ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:143.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">Next</span></p> </td><td style="background-color:#f8f8f8;width:300.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">æ˜¾ç¤ºä¸ºä¸‹ä¸€ä¸ªæ ·å¼ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:143.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">Done</span></p> </td><td style="width:300.8pt;"> <p style="margin-left:0;"><span style="color:#333333;">æ ‡å‡†æ ·å¼ã€‚</span></p> </td></tr></tbody></table></div>InputTypeæšä¸¾è¯´æ˜<div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:157.65pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:286.55pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:157.65pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">Normal</span></p> </td><td style="width:286.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">åŸºæœ¬è¾“å…¥æ¨¡å¼ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:157.65pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">Password</span></p> </td><td style="background-color:#f8f8f8;width:286.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">å¯†ç è¾“å…¥æ¨¡å¼ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:157.65pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">Email</span></p> </td><td style="width:286.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">e-mailåœ°å€è¾“å…¥æ¨¡å¼ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:157.65pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">Number</span></p> </td><td style="background-color:#f8f8f8;width:286.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">çº¯æ•°å­—è¾“å…¥æ¨¡å¼ã€‚</span></p> </td></tr></tbody></table></div><p>äº‹ä»¶</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:186.95pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:257.3pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>åŠŸèƒ½æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:186.95pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">onChange(callback: (value: string) =&gt; void)</span></p> </td><td style="width:257.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">è¾“å…¥å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè§¦å‘å›è°ƒã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:186.95pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">onSubmit(callback: (enterKey:</span></p> <p style="margin-left:.1pt;"><span style="color:#333333;">EnterKeyType) =&gt; void)</span></p> </td><td style="background-color:#f8f8f8;width:257.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">å›è½¦é”®æˆ–è€…è½¯é”®ç›˜å›è½¦é”®è§¦å‘è¯¥å›è°ƒï¼Œå‚æ•°ä¸ºå½“å‰è½¯é”®ç›˜å›è½¦é”®ç±»å‹ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:186.95pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">onEditChanged(callback: (isEditing:</span></p> <p style="margin-left:.1pt;"><span style="color:#333333;">boolean) =&gt; void)(deprecated)</span></p> </td><td style="width:257.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">è¾“å…¥çŠ¶æ€å˜åŒ–æ—¶ï¼Œè§¦å‘å›è°ƒã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:186.95pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">onEditChange(callback: (isEditing:</span></p> <p style="margin-left:.1pt;"><span style="color:#333333;">boolean) =&gt; void) 8+</span></p> </td><td style="background-color:#f8f8f8;width:257.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">è¾“å…¥çŠ¶æ€å˜åŒ–æ—¶ï¼Œè§¦å‘å›è°ƒã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:186.95pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">onCopy8+(callback:(value: string) =&gt; void)</span></p> </td><td style="width:257.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">é•¿æŒ‰è¾“å…¥æ¡†å†…éƒ¨åŒºåŸŸå¼¹å‡ºå‰ªè´´æ¿åï¼Œç‚¹å‡»å‰ªåˆ‡æ¿å¤åˆ¶æŒ‰é’®ï¼Œè§¦å‘å›è°ƒã€‚valueï¼šå¤åˆ¶çš„æ–‡æœ¬å†…å®¹ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:186.95pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">onCut8+(callback:(value: string) =&gt; void)</span></p> </td><td style="background-color:#f8f8f8;width:257.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">é•¿æŒ‰è¾“å…¥æ¡†å†…éƒ¨åŒºåŸŸå¼¹å‡ºå‰ªè´´æ¿åï¼Œç‚¹å‡»å‰ªåˆ‡æ¿å‰ªåˆ‡æŒ‰é’®ï¼Œè§¦å‘å›è°ƒã€‚valueï¼šå‰ªåˆ‡çš„æ–‡æœ¬å†…å®¹ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:186.95pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">onPaste8+(callback:(value: string) =&gt; void)</span></p> </td><td style="width:257.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">é•¿æŒ‰è¾“å…¥æ¡†å†…éƒ¨åŒºåŸŸå¼¹å‡ºå‰ªè´´æ¿åï¼Œç‚¹å‡»å‰ªåˆ‡æ¿ç²˜è´´æŒ‰é’®ï¼Œè§¦å‘å›è°ƒã€‚valueï¼šç²˜è´´çš„æ–‡æœ¬å†…å®¹ã€‚</span></p> </td></tr></tbody></table></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="title class_">TextInput</span>()</span><br><span class="line"> .<span class="title function_">padding</span>(&#123;<span class="attr">top</span>:<span class="string">&#x27;5vp&#x27;</span>&#125;)</span><br><span class="line"> .<span class="title function_">margin</span>(&#123;<span class="attr">top</span>:<span class="string">&#x27;5vp&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@v5/v2/2024042122.jpg"><br>TextInputController 8+                                                        </p><p>TextInputç»„ä»¶çš„æ§åˆ¶å™¨ã€‚</p><p>å¯¼å…¥å¯¹è±¡</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="attr">controller</span>: <span class="title class_">TextInputController</span> = <span class="keyword">new</span> <span class="title class_">TextInputController</span>()</span><br><span class="line"> </span><br><span class="line">caretPosition</span><br><span class="line"> </span><br><span class="line"><span class="title function_">caretPosition</span>(<span class="attr">value</span>: number): <span class="keyword">void</span></span><br></pre></td></tr></table></figure><p>è®¾ç½®å…‰æ ‡ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®ã€‚å‚æ•°ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;table-box&quot;</span>&gt;<span class="language-xml"><span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1&quot;</span> <span class="attr">cellspacing</span>=<span class="string">&quot;0&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-left:.3pt;width:444.2pt;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">tbody</span>&gt;</span><span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;background-color:#f8f8f8;border-color:#dfe2e5;width:45.1pt;&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;margin-left:.1pt;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color:#333333;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">strong</span>&gt;</span>å‚æ•°å<span class="tag">&lt;/<span class="name">strong</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span> <span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;background-color:#f8f8f8;border-color:#dfe2e5;width:57.05pt;&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;margin-left:0cm;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color:#333333;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">strong</span>&gt;</span>å‚æ•°ç±»å‹<span class="tag">&lt;/<span class="name">strong</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span> <span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;background-color:#f8f8f8;border-color:#dfe2e5;width:36pt;&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;margin-left:0cm;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color:#333333;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">strong</span>&gt;</span>å¿…å¡«<span class="tag">&lt;/<span class="name">strong</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span> <span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;background-color:#f8f8f8;border-color:#dfe2e5;width:306.05pt;&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;margin-left:0;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color:#333333;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">strong</span>&gt;</span>å‚æ•°æè¿°<span class="tag">&lt;/<span class="name">strong</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span> <span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;border-color:#dfe2e5;width:45.1pt;&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;margin-left:0cm;text-align:center;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color:#333333;&quot;</span>&gt;</span>value<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span> <span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;width:57.05pt;&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;margin-left:0;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color:#333333;&quot;</span>&gt;</span>number<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span> <span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;width:36pt;&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;margin-left:0;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color:#333333;&quot;</span>&gt;</span>æ˜¯<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span> <span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">&quot;width:306.05pt;&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;margin-left:0;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color:#333333;&quot;</span>&gt;</span>è®¾ç½®è¾“å…¥å…‰æ ‡çš„ä½ç½®ã€‚valueï¼šä»å­—ç¬¦ä¸²å¼€å§‹åˆ°å…‰æ ‡æ‰€åœ¨ä½ç½®çš„å­—ç¬¦é•¿åº¦ã€‚<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span> <span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span><span class="tag">&lt;/<span class="name">tbody</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span>&lt;/div&gt;</span><br></pre></td></tr></table></figure><h2 id="Button"><a href="#Button" class="headerlink" title="Button"></a>Button</h2><p>æŒ‰é’®ç»„ä»¶ï¼Œå¯å¿«é€Ÿåˆ›å»ºä¸åŒæ ·å¼çš„æŒ‰é’®ã€‚</p><p>æ¥å£</p><p>æ–¹æ³•1ï¼š</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Button</span>(options?: &#123;type?: <span class="title class_">ButtonType</span>, stateEffect?: boolean&#125;)</span><br></pre></td></tr></table></figure><p>å‚æ•°</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:69.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>å‚æ•°å</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:73.55pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°ç±»å‹</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:30pt;"> <p style="margin-left:0;text-align:center;"><span style="color:#333333;"><strong>å¿…å¡«</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:271.55pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:69.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">type</span></p> </td><td style="width:73.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">ButtonType</span></p> </td><td style="width:30pt;"> <p style="margin-left:0;"><span style="color:#333333;">å¦</span></p> </td><td style="width:271.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">æè¿°æŒ‰é’®æ˜¾ç¤ºæ ·å¼ã€‚é»˜è®¤å€¼ï¼šButtonType.Capsule</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:69.15pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">stateEffect</span></p> </td><td style="background-color:#f8f8f8;width:73.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">boolean</span></p> </td><td style="background-color:#f8f8f8;width:30pt;"> <p style="margin-left:0;"><span style="color:#333333;">å¦</span></p> </td><td style="background-color:#f8f8f8;width:271.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">æŒ‰é’®æŒ‰ä¸‹æ—¶æ˜¯å¦å¼€å¯æŒ‰å‹æ€æ˜¾ç¤ºæ•ˆæœï¼Œå½“è®¾ç½®ä¸ºfalseæ—¶ï¼ŒæŒ‰å‹æ•ˆæœå…³é—­ã€‚ã€‚é»˜è®¤å€¼ï¼štrue</span></p> </td></tr></tbody></table></div>æ–¹æ³•<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Button</span>(label?: <span class="title class_">ResourceStr</span>, options?: &#123; type?: <span class="title class_">ButtonType</span>, stateEffect?: boolean &#125;)</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ–‡æœ¬å†…å®¹åˆ›å»ºç›¸åº”çš„æŒ‰é’®ç»„ä»¶ï¼Œæ­¤æ—¶Buttonæ— æ³•åŒ…å«å­ç»„ä»¶ã€‚å‚æ•°ï¼š</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:59.35pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>å‚æ•°å</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:226.6pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°ç±»å‹</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:43.5pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å¿…å¡«</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:114.7pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:59.35pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">label</span></p> </td><td style="width:226.6pt;"> <p style="margin-left:0;"><span style="color:#333333;">ResourceStr</span></p> </td><td style="width:43.5pt;"> <p style="margin-left:0;"><span style="color:#333333;">å¦</span></p> </td><td style="width:114.7pt;"> <p style="margin-left:0;"><span style="color:#333333;">æŒ‰é’®æ–‡æœ¬å†…å®¹ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:59.35pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">options</span></p> </td><td style="background-color:#f8f8f8;width:226.6pt;"> <p style="margin-left:0;"><span style="color:#333333;">{type?: ButtonType,stateEffect?: boolean}</span></p> </td><td style="background-color:#f8f8f8;width:43.5pt;"> <p style="margin-left:0;"><span style="color:#333333;">å¦</span></p> </td><td style="background-color:#f8f8f8;width:114.7pt;"> <p style="margin-left:0;"><span style="color:#333333;">è§æ–¹æ³•1å‚æ•°è¯´æ˜ã€‚</span></p> </td></tr></tbody></table></div><p>å±æ€§</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:69.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:73.55pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°ç±»å‹</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:301.55pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:69.15pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">type</span></p> </td><td style="width:73.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">ButtonType</span></p> </td><td style="width:301.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®Buttonæ ·å¼ã€‚é»˜è®¤å€¼ï¼šButtonType.Capsule</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:69.15pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">stateEffect</span></p> </td><td style="background-color:#f8f8f8;width:73.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">boolean</span></p> </td><td style="background-color:#f8f8f8;width:301.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">æŒ‰é’®æŒ‰ä¸‹æ—¶æ˜¯å¦å¼€å¯æŒ‰å‹æ€æ˜¾ç¤ºæ•ˆæœï¼Œå½“è®¾ç½®ä¸ºfalseæ—¶ï¼ŒæŒ‰å‹æ•ˆæœå…³é—­ã€‚é»˜è®¤å€¼ï¼štrue</span></p> </td></tr></tbody></table></div>ButtonTypeæšä¸¾è¯´æ˜<div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:99.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:344.3pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:99.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">Capsule</span></p> </td><td style="width:344.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">èƒ¶å›Šå‹æŒ‰é’®ï¼ˆåœ†è§’é»˜è®¤ä¸ºé«˜åº¦çš„ä¸€åŠï¼‰ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:99.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">Circle</span></p> </td><td style="background-color:#f8f8f8;width:344.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">åœ†å½¢æŒ‰é’®ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:99.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">Normal</span></p> </td><td style="width:344.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">æ™®é€šæŒ‰é’®ï¼ˆé»˜è®¤ä¸å¸¦åœ†è§’ï¼‰ã€‚</span></p> </td></tr></tbody></table></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Button</span>() &#123;</span><br><span class="line">   <span class="title class_">Text</span>(<span class="string">&#x27;ç‚¹å‡»&#x27;</span>)</span><br><span class="line"> </span><br><span class="line"> &#125;</span><br><span class="line"> .<span class="title function_">width</span>(<span class="string">&#x27;100fp&#x27;</span>)</span><br><span class="line"> .<span class="title function_">backgroundColor</span>(<span class="title class_">Color</span>.<span class="property">Gray</span>)</span><br><span class="line"> .<span class="title function_">padding</span>(&#123;<span class="attr">top</span>:<span class="string">&#x27;5vp&#x27;</span>&#125;)</span><br><span class="line"> .<span class="title function_">margin</span>(&#123;<span class="attr">top</span>:<span class="string">&#x27;5vp&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure><h2 id="Image"><a href="#Image" class="headerlink" title="Image"></a>Image</h2><p>å›¾ç‰‡ç»„ä»¶ï¼Œæ”¯æŒæœ¬åœ°å›¾ç‰‡å’Œç½‘ç»œå›¾ç‰‡çš„æ¸²æŸ“å±•ç¤ºã€‚</p><pre><code><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Image</span>(<span class="attr">src</span>: string | <span class="title class_">PixelMap</span> | <span class="title class_">Resource</span>)</span><br></pre></td></tr></table></figure></code></pre><p>å‚æ•°</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:85px;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>å‚æ•°å</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:49px;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°ç±»å‹</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:55px;"> <p style="margin-left:0;text-align:center;"><span style="color:#333333;"><strong>å¿…å¡«</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:74px;"> <p style="margin-left:0;text-align:center;"><span style="color:#333333;"><strong>é»˜è®¤å€¼</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:302px;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:85px;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">src</span></p> </td><td style="width:49px;"> <p style="margin-left:0;"><span style="color:#333333;">string| PixelMap|</span></p> <p style="margin-left:0;"><span style="color:#333333;">Resource</span></p> </td><td style="width:55px;"> <p style="margin-left:0;"><span style="color:#333333;">æ˜¯</span></p> </td><td style="width:74px;"> <p style="margin-left:0;"><span style="color:#333333;">-</span></p> </td><td style="width:302px;"> <p style="margin-left:0;"><span style="color:#333333;">å›¾ç‰‡çš„æ•°æ®æºï¼Œæ”¯æŒæœ¬åœ°å›¾ç‰‡å’Œç½‘ç»œå›¾ç‰‡ã€‚å½“ä½¿ç”¨ç›¸å¯¹è·¯å¾„</span></p> <p style="margin-left:0;"><span style="color:#333333;">å¼•ç”¨å›¾ç‰‡èµ„æºæ—¶ï¼Œä¾‹å¦‚Image("common/test.jpg")ï¼Œä¸æ”¯æŒè¯¥Imageç»„ä»¶è¢«è·¨åŒ…/è·¨æ¨¡å—è°ƒç”¨ï¼Œå»ºè®®ä½¿ç”¨$ræ–¹å¼æ¥ç®¡ç†éœ€å…¨å±€ä½¿ç”¨çš„å›¾ç‰‡èµ„æºã€‚- æ”¯æŒçš„å›¾ç‰‡æ ¼å¼åŒ…æ‹¬pngã€jpgã€ bmpã€svgå’Œgifã€‚- æ”¯æŒBase64å­—ç¬¦ä¸²ã€‚æ ¼å¼</span></p> <p style="margin-left:0;"><span style="color:#333333;">data:image/[png|jpeg|bmp|webp];base64,[base64 data], å…¶ä¸­[base64 data]ä¸ºBase64å­—ç¬¦ä¸²æ•°æ®ã€‚- æ”¯æŒ dataability://è·¯å¾„å‰ç¼€çš„å­—ç¬¦ä¸²ï¼Œç”¨äºè®¿é—®é€šè¿‡data ability æä¾›çš„å›¾ç‰‡è·¯å¾„ã€‚</span></p> </td></tr></tbody></table></div><p>å±æ€§</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:110.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:108.05pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>å‚æ•°ç±»å‹</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:66.05pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>é»˜è®¤å€¼</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:159.75pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:110.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">alt</span></p> </td><td style="width:108.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">string | Resource</span></p> </td><td style="width:66.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">-</span></p> </td><td style="width:159.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">åŠ è½½æ—¶æ˜¾ç¤ºçš„å ä½å›¾ã€‚ä»…æ”¯æŒæœ¬åœ°å›¾ç‰‡ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:110.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">objectFit</span></p> </td><td style="background-color:#f8f8f8;width:108.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">ImageFit</span></p> </td><td style="background-color:#f8f8f8;width:66.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">Cover</span></p> </td><td style="background-color:#f8f8f8;width:159.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®å›¾ç‰‡çš„ç¼©æ”¾ç±»å‹ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:110.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">objectRepeat</span></p> </td><td style="width:108.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">ImageRepeat</span></p> </td><td style="width:66.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">NoRepeat</span></p> </td><td style="width:159.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®å›¾ç‰‡çš„é‡å¤æ ·å¼ã€‚<strong>è¯´æ˜ï¼š</strong>svgç±»å‹å›¾æºä¸æ”¯æŒè¯¥å±æ€§ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:110.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">interpolation</span></p> </td><td style="background-color:#f8f8f8;width:108.05pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">ImageInterpolation</span></p> </td><td style="background-color:#f8f8f8;width:66.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">None</span></p> </td><td style="background-color:#f8f8f8;width:159.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®å›¾ç‰‡çš„æ’å€¼æ•ˆæœï¼Œå³å‡è½»ä½æ¸…æ™°åº¦å›¾ç‰‡åœ¨æ”¾å¤§æ˜¾ç¤ºçš„æ—¶å€™å‡ºç°çš„é”¯é½¿é—®é¢˜ï¼Œä»…é’ˆå¯¹å›¾ç‰‡æ”¾å¤§æ’å€¼ã€‚<strong>è¯´æ˜ï¼š</strong>- svgç±»å‹å›¾æºä¸æ”¯æŒè¯¥å±æ€§ã€‚- PixelMapèµ„æºä¸æ”¯æŒè¯¥å±æ€§ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:110.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">renderMode</span></p> </td><td style="width:108.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">ImageRenderMode</span></p> </td><td style="width:66.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">Original</span></p> </td><td style="width:159.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®å›¾ç‰‡æ¸²æŸ“çš„æ¨¡å¼ã€‚<strong>è¯´æ˜ï¼š</strong>svgç±»å‹å›¾æºä¸æ”¯æŒè¯¥å±æ€§ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:110.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">sourceSize</span></p> </td><td style="background-color:#f8f8f8;width:108.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">{width: number,height:</span></p> <p style="margin-left:0;"><span style="color:#333333;">number}</span></p> </td><td style="background-color:#f8f8f8;width:66.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">-</span></p> </td><td style="background-color:#f8f8f8;width:159.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®å›¾ç‰‡è§£ç å°ºå¯¸ï¼Œå°†åŸå§‹å›¾ç‰‡</span></p> <p style="margin-left:0;"><span style="color:#333333;">è§£ç æˆæŒ‡å®šå°ºå¯¸çš„å›¾ç‰‡ï¼Œ</span></p> <p style="margin-left:0;"><span style="color:#333333;">numberç±»å‹å•ä½ä¸ºpxã€‚<strong>è¯´æ˜ï¼š</strong>PixelMapèµ„æºå’ŒSVGå›¾ç‰‡ä¸æ”¯æŒè¯¥å±æ€§ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:110.4pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">matchTextDirection</span></p> </td><td style="width:108.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">boolean</span></p> </td><td style="width:66.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">false</span></p> </td><td style="width:159.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®å›¾ç‰‡æ˜¯å¦è·Ÿéšç³»ç»Ÿè¯­è¨€æ–¹å‘ï¼Œåœ¨RTLè¯­è¨€ç¯å¢ƒä¸‹æ˜¾ç¤ºé•œåƒç¿»è½¬æ˜¾ç¤ºæ•ˆæœã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:110.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">fitOriginalSize</span></p> </td><td style="background-color:#f8f8f8;width:108.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">boolean</span></p> </td><td style="background-color:#f8f8f8;width:66.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">true</span></p> </td><td style="background-color:#f8f8f8;width:159.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">å›¾ç‰‡ç»„ä»¶å°ºå¯¸æœªè®¾ç½®æ—¶ï¼Œå…¶æ˜¾ç¤ºå°ºå¯¸æ˜¯å¦è·Ÿéšå›¾æºå°ºå¯¸ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:110.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">fillColor</span></p> </td><td style="width:108.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">ResourceColor</span></p> </td><td style="width:66.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">-</span></p> </td><td style="width:159.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">ä»…å¯¹svgå›¾æºç”Ÿæ•ˆï¼Œè®¾ç½®åä¼šæ›¿æ¢svgå›¾ç‰‡çš„fillé¢œè‰²ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:110.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">autoResize</span></p> </td><td style="background-color:#f8f8f8;width:108.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">boolean</span></p> </td><td style="background-color:#f8f8f8;width:66.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">true</span></p> </td><td style="background-color:#f8f8f8;width:159.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">æ˜¯å¦éœ€è¦åœ¨å›¾ç‰‡è§£ç è¿‡ç¨‹ä¸­å¯¹å›¾æºåšresizeæ“ä½œï¼Œè¯¥æ“ä½œä¼šæ ¹æ®æ˜¾ç¤ºåŒºåŸŸçš„å°ºå¯¸å†³å®šç”¨äºç»˜åˆ¶çš„å›¾æºå°ºå¯¸ï¼Œæœ‰åˆ©äºå‡å°‘å†…å­˜å ç”¨ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:110.4pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">syncLoad8+</span></p> </td><td style="width:108.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">boolean</span></p> </td><td style="width:66.05pt;"> <p style="margin-left:0;"><span style="color:#333333;">false</span></p> </td><td style="width:159.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">è®¾ç½®æ˜¯å¦åŒæ­¥åŠ è½½å›¾ç‰‡ï¼Œé»˜è®¤æ˜¯å¼‚æ­¥åŠ è½½ã€‚åŒæ­¥åŠ è½½æ—¶é˜»å¡UIçº¿ç¨‹ï¼Œä¸ä¼šæ˜¾ç¤ºå ä½å›¾ã€‚</span></p> </td></tr></tbody></table></div><p>ImageInterpolationæšä¸¾è¯´æ˜</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:82.65pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:361.55pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:82.65pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">None</span></p> </td><td style="width:361.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">ä¸ä½¿ç”¨æ’å€¼å›¾ç‰‡æ•°æ®ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:82.65pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">High</span></p> </td><td style="background-color:#f8f8f8;width:361.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">é«˜åº¦ä½¿ç”¨æ’å€¼å›¾ç‰‡æ•°æ®ï¼Œå¯èƒ½ä¼šå½±å“å›¾ç‰‡æ¸²æŸ“çš„é€Ÿåº¦ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:82.65pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">Medium</span></p> </td><td style="width:361.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">ä¸­åº¦ä½¿ç”¨æ’å€¼å›¾ç‰‡æ•°æ®ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:82.65pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">Low</span></p> </td><td style="background-color:#f8f8f8;width:361.55pt;"> <p style="margin-left:0;"><span style="color:#333333;">ä½åº¦ä½¿ç”¨æ’å€¼å›¾ç‰‡æ•°æ®ã€‚</span></p> </td></tr></tbody></table></div>ImageRenderModeæšä¸¾è¯´æ˜<div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:96.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:347.3pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:96.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">Original</span></p> </td><td style="width:347.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">æŒ‰ç…§åŸå›¾è¿›è¡Œæ¸²æŸ“ï¼ŒåŒ…æ‹¬é¢œè‰²ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:96.9pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">Template</span></p> </td><td style="background-color:#f8f8f8;width:347.3pt;"> <p style="margin-left:0;"><span style="color:#333333;">å°†å›¾åƒæ¸²æŸ“ä¸ºæ¨¡æ¿å›¾åƒï¼Œå¿½ç•¥å›¾ç‰‡çš„é¢œè‰²ä¿¡æ¯ã€‚</span></p> </td></tr></tbody></table></div><p>äº‹ä»¶</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:245.45pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:198.75pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>åŠŸèƒ½æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:245.45pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">onComplete(callback: (event?: { width: number, height: number, componentWidth: number,componentHeight: number, loadingStatus: number }) =&gt; void)</span></p> </td><td style="width:198.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">å›¾ç‰‡æˆåŠŸåŠ è½½æ—¶è§¦å‘è¯¥å›è°ƒï¼Œè¿”å›æˆåŠŸåŠ è½½çš„å›¾æºå°ºå¯¸ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:245.45pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">onError(callback: (event?: { componentWidth: number, componentHeight: number }) =&gt; void)</span></p> </td><td style="background-color:#f8f8f8;width:198.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">å›¾ç‰‡åŠ è½½å‡ºç°å¼‚å¸¸æ—¶è§¦å‘è¯¥å›è°ƒã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:245.45pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">onFinish(event: () =&gt; void)</span></p> </td><td style="width:198.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">å½“åŠ è½½çš„æºæ–‡ä»¶ä¸ºå¸¦åŠ¨æ•ˆçš„svgå›¾ç‰‡æ—¶ï¼Œå½“svgåŠ¨æ•ˆæ’­æ”¾å®Œæˆæ—¶ä¼šè§¦å‘è¿™ä¸ªå›è°ƒï¼Œå¦‚æœåŠ¨æ•ˆä¸ºæ— é™å¾ªç¯åŠ¨æ•ˆï¼Œåˆ™ä¸ä¼šè§¦å‘è¿™ä¸ªå›è°ƒã€‚</span></p> </td></tr></tbody></table></div><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Image</span>($r(<span class="string">&#x27;app.media.icon&#x27;</span>)).<span class="title function_">width</span>(<span class="string">&#x27;80vp&#x27;</span>)</span><br></pre></td></tr></table></figure><h1 id="ğŸ˜´åƒç´ å•ä½"><a href="#ğŸ˜´åƒç´ å•ä½" class="headerlink" title="ğŸ˜´åƒç´ å•ä½"></a>ğŸ˜´åƒç´ å•ä½</h1><p>åƒç´ å•ä½ æä¾›4ç§åƒç´ å•ä½ï¼Œæ¡†æ¶é‡‡ç”¨vpä¸ºåŸºå‡†æ•°æ®å•ä½ã€‚</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:34.6pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>åç§°</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:409.6pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:34.6pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">px</span></p> </td><td style="width:409.6pt;"> <p style="margin-left:0;"><span style="color:#333333;">å±å¹•ç‰©ç†åƒç´ å•ä½ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:34.6pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">vp</span></p> </td><td style="background-color:#f8f8f8;width:409.6pt;"> <p style="margin-left:0;"><span style="color:#333333;">å±å¹•å¯†åº¦ç›¸å…³åƒç´ ï¼Œæ ¹æ®å±å¹•åƒç´ å¯†åº¦è½¬æ¢ä¸ºå±å¹•ç‰©ç†åƒç´ ï¼Œå½“æ•°å€¼ä¸å¸¦å•ä½æ—¶ï¼Œé»˜è®¤å•ä½vpã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:34.6pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">fp</span></p> </td><td style="width:409.6pt;"> <p style="margin-left:0;"><span style="color:#333333;">å­—ä½“åƒç´ ï¼Œä¸vpç±»ä¼¼é€‚ç”¨å±å¹•å¯†åº¦å˜åŒ–ï¼Œéšç³»ç»Ÿå­—ä½“å¤§å°è®¾ç½®å˜åŒ–ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:34.6pt;"> <p style="margin-left:0cm;text-align:center;"><span style="color:#333333;">lpx</span></p> </td><td style="background-color:#f8f8f8;width:409.6pt;"> <p style="margin-left:0;"><span style="color:#333333;">è§†çª—é€»è¾‘åƒç´ å•ä½ï¼Œlpxå•ä½ä¸ºå®é™…å±å¹•å®½åº¦ä¸é€»è¾‘å®½åº¦ï¼ˆé€šè¿‡designWidthé…ç½®ï¼‰çš„æ¯”å€¼ã€‚å¦‚é…ç½®designWidthä¸º720æ—¶ï¼Œåœ¨å®é™…å®½åº¦ä¸º1440ç‰©ç†åƒç´ çš„å±å¹•ä¸Šï¼Œ1lpxä¸º2pxå¤§å°ã€‚</span></p> </td></tr></tbody></table></div><p>åƒç´ å•ä½è½¬æ¢ æä¾›å…¶ä»–å•ä½ä¸pxå•ä½äº’ç›¸è½¬æ¢çš„æ–¹æ³•ã€‚</p><div class="table-box"><table border="1" cellspacing="0" style="margin-left:.3pt;width:444.2pt;"><tbody><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:197.45pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;"><strong>æ¥å£</strong></span></p> </td><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:246.75pt;"> <p style="margin-left:0;"><span style="color:#333333;"><strong>æè¿°</strong></span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:197.45pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">vp2px(value : number) : number</span></p> </td><td style="width:246.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">å°†vpå•ä½çš„æ•°å€¼è½¬æ¢ä¸ºä»¥pxä¸ºå•ä½çš„æ•°å€¼ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:197.45pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">px2vp(value : number) : number</span></p> </td><td style="background-color:#f8f8f8;width:246.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">å°†pxå•ä½çš„æ•°å€¼è½¬æ¢ä¸ºä»¥vpä¸ºå•ä½çš„æ•°å€¼ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:197.45pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">fp2px(value : number) : number</span></p> </td><td style="width:246.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">å°†fpå•ä½çš„æ•°å€¼è½¬æ¢ä¸ºä»¥pxä¸ºå•ä½çš„æ•°å€¼ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:197.45pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">px2fp(value : number) : number</span></p> </td><td style="background-color:#f8f8f8;width:246.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">å°†pxå•ä½çš„æ•°å€¼è½¬æ¢ä¸ºä»¥fpä¸ºå•ä½çš„æ•°å€¼ã€‚</span></p> </td></tr><tr><td style="border-color:#dfe2e5;width:197.45pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">lpx2px(value : number) : number</span></p> </td><td style="width:246.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">å°†lpxå•ä½çš„æ•°å€¼è½¬æ¢ä¸ºä»¥pxä¸ºå•ä½çš„æ•°å€¼ã€‚</span></p> </td></tr><tr><td style="background-color:#f8f8f8;border-color:#dfe2e5;width:197.45pt;"> <p style="margin-left:.1pt;"><span style="color:#333333;">px2lpx(value : number) : number</span></p> </td><td style="background-color:#f8f8f8;width:246.75pt;"> <p style="margin-left:0;"><span style="color:#333333;">å°†pxå•ä½çš„æ•°å€¼è½¬æ¢ä¸ºä»¥lpxä¸ºå•ä½çš„æ•°å€¼ã€‚</span></p> </td></tr></tbody></table></div><h1 id="ğŸ›°ï¸é¢„è§ˆå™¨"><a href="#ğŸ›°ï¸é¢„è§ˆå™¨" class="headerlink" title="ğŸ›°ï¸é¢„è§ˆå™¨"></a>ğŸ›°ï¸é¢„è§ˆå™¨</h1><p>ç¼–è¾‘å™¨å¸¸ç”¨çš„ çœŸæœºlog é¢„è§ˆå™¨log<br>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@v5/v2/2024042123.jpg"><br>é¢„è§ˆç¼–è¾‘å™¨<br>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@v5/v2/2024042124.jpg"><br> ç»„ä»¶é¢„è§ˆ<br>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@v5/v2/2024042125.jpg"></p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@v5/v2/2024042126.jpg"></p><h1 id="ğŸ‘‰è¯·æ±‚åç«¯æ¥å£æµ‹è¯•"><a href="#ğŸ‘‰è¯·æ±‚åç«¯æ¥å£æµ‹è¯•" class="headerlink" title="ğŸ‘‰è¯·æ±‚åç«¯æ¥å£æµ‹è¯•"></a>ğŸ‘‰è¯·æ±‚åç«¯æ¥å£æµ‹è¯•</h1><p>import ohos.net.http</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// test.ets</span></span><br><span class="line"><span class="keyword">import</span> http <span class="keyword">from</span> <span class="string">&#x27;@ohos.net.http&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span>  <span class="keyword">function</span> <span class="title function_">test</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="comment">// æ¯ä¸€ä¸ªhttpRequestå¯¹åº”ä¸€ä¸ªHTTPè¯·æ±‚ä»»åŠ¡ï¼Œä¸å¯å¤ç”¨</span></span><br><span class="line">  <span class="keyword">let</span> httpRequest = http.<span class="title function_">createHttp</span>();</span><br><span class="line">  <span class="comment">// ç”¨äºè®¢é˜…HTTPå“åº”å¤´ï¼Œæ­¤æ¥å£ä¼šæ¯”requestè¯·æ±‚å…ˆè¿”å›ã€‚å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€è¦è®¢é˜…æ­¤æ¶ˆæ¯</span></span><br><span class="line">  <span class="comment">// ä»API 8å¼€å§‹ï¼Œä½¿ç”¨on(&#x27;headersReceive&#x27;, Callback)æ›¿ä»£on(&#x27;headerReceive&#x27;, AsyncCallback)ã€‚ 8+</span></span><br><span class="line">  httpRequest.<span class="title function_">on</span>(<span class="string">&#x27;headersReceive&#x27;</span>, <span class="function">(<span class="params">header</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;header: &#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(header));</span><br><span class="line">  &#125;);</span><br><span class="line">  httpRequest.<span class="title function_">request</span>(</span><br><span class="line">    <span class="comment">// å¡«å†™HTTPè¯·æ±‚çš„URLåœ°å€ï¼Œå¯ä»¥å¸¦å‚æ•°ä¹Ÿå¯ä»¥ä¸å¸¦å‚æ•°ã€‚URLåœ°å€éœ€è¦å¼€å‘è€…è‡ªå®šä¹‰ã€‚è¯·æ±‚çš„å‚æ•°å¯ä»¥åœ¨extraDataä¸­æŒ‡å®š</span></span><br><span class="line">    <span class="string">&quot;/api/userApi/RegIMUser&quot;</span>,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">method</span>: http.<span class="property">RequestMethod</span>.<span class="property">POST</span>, <span class="comment">// å¯é€‰ï¼Œé»˜è®¤ä¸ºhttp.RequestMethod.GET</span></span><br><span class="line">      <span class="comment">// å¼€å‘è€…æ ¹æ®è‡ªèº«ä¸šåŠ¡éœ€è¦æ·»åŠ headerå­—æ®µ</span></span><br><span class="line">      <span class="attr">header</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// å½“ä½¿ç”¨POSTè¯·æ±‚æ—¶æ­¤å­—æ®µç”¨äºä¼ é€’å†…å®¹</span></span><br><span class="line">      <span class="attr">extraData</span>: &#123;</span><br><span class="line"> </span><br><span class="line">        <span class="string">&quot;mobile&quot;</span>: <span class="string">&quot;20240419&quot;</span>,</span><br><span class="line">        <span class="string">&quot;password&quot;</span>: <span class="string">&quot;123123&quot;</span>,</span><br><span class="line">        <span class="string">&quot;ucode&quot;</span>: <span class="string">&quot;666666&quot;</span></span><br><span class="line"> </span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">expectDataType</span>: http.<span class="property">HttpDataType</span>.<span class="property">STRING</span>, <span class="comment">// å¯é€‰ï¼ŒæŒ‡å®šè¿”å›æ•°æ®çš„ç±»å‹</span></span><br><span class="line">      <span class="attr">usingCache</span>: <span class="literal">true</span>, <span class="comment">// å¯é€‰ï¼Œé»˜è®¤ä¸ºtrue</span></span><br><span class="line">      <span class="attr">priority</span>: <span class="number">1</span>, <span class="comment">// å¯é€‰ï¼Œé»˜è®¤ä¸º1</span></span><br><span class="line">      <span class="attr">connectTimeout</span>: <span class="number">60000</span>, <span class="comment">// å¯é€‰ï¼Œé»˜è®¤ä¸º60000ms</span></span><br><span class="line">      <span class="attr">readTimeout</span>: <span class="number">60000</span>, <span class="comment">// å¯é€‰ï¼Œé»˜è®¤ä¸º60000ms</span></span><br><span class="line">      <span class="attr">usingProtocol</span>: http.<span class="property">HttpProtocol</span>.<span class="property">HTTP1_1</span>, <span class="comment">// å¯é€‰ï¼Œåè®®ç±»å‹é»˜è®¤å€¼ç”±ç³»ç»Ÿè‡ªåŠ¨æŒ‡å®š</span></span><br><span class="line">    &#125;, <span class="function">(<span class="params">err, data</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!err) &#123;</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// data.resultä¸ºHTTPå“åº”å†…å®¹ï¼Œå¯æ ¹æ®ä¸šåŠ¡éœ€è¦è¿›è¡Œè§£æ</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Result:&#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data.<span class="property">result</span>));</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;code:&#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data.<span class="property">responseCode</span>));</span><br><span class="line">      <span class="comment">// data.headerä¸ºHTTPå“åº”å¤´ï¼Œå¯æ ¹æ®ä¸šåŠ¡éœ€è¦è¿›è¡Œè§£æ</span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;header:&#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data.<span class="property">header</span>));</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;cookies:&#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data.<span class="property">cookies</span>)); <span class="comment">// 8+</span></span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data.<span class="property">result</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;error:&#x27;</span> + <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(err));</span><br><span class="line">      <span class="comment">// å–æ¶ˆè®¢é˜…HTTPå“åº”å¤´äº‹ä»¶</span></span><br><span class="line">      httpRequest.<span class="title function_">off</span>(<span class="string">&#x27;headersReceive&#x27;</span>);</span><br><span class="line">      <span class="comment">// å½“è¯¥è¯·æ±‚ä½¿ç”¨å®Œæ¯•æ—¶ï¼Œè°ƒç”¨destroyæ–¹æ³•ä¸»åŠ¨é”€æ¯</span></span><br><span class="line">      httpRequest.<span class="title function_">destroy</span>();</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(err);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>index.etsè°ƒç”¨</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// index.ets</span></span><br><span class="line"><span class="keyword">import</span> &#123;test&#125; <span class="keyword">from</span> <span class="string">&#x27;../Common/Stest&#x27;</span></span><br><span class="line"> </span><br><span class="line">  <span class="title function_">onPageShow</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&#x27;Index onPageShow&#x27;</span>);</span><br><span class="line">     <span class="keyword">const</span>  tests = <span class="title function_">test</span>();</span><br><span class="line"> </span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>è¯·æ±‚ç»“æœ</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@v5/v2/2024042127.jpg"></p><p>sqlæŸ¥è¯¢</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@v5/v2/2024042128.jpg"></p><p>End ğŸ¦‰</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HarmonyOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>.NET åç¼–è¯‘</title>
      <link href="/2024/04/21/NET-Reflector/"/>
      <url>/2024/04/21/NET-Reflector/</url>
      
        <content type="html"><![CDATA[<p>åç¼–è¯‘æ˜¯å¯¹ç¨‹åºè¿›è¡Œé€†å‘åˆ†æã€ç ”ç©¶ï¼Œä»¥æ¨å¯¼å‡ºè½¯ä»¶äº§å“æ‰€ä½¿ç”¨çš„æ€è·¯ã€åŸç†ã€ç»“æ„ã€ç®—æ³•ã€å¤„ç†è¿‡ç¨‹ã€è¿è¡Œæ–¹æ³•ç­‰è®¾è®¡è¦ç´ ã€‚</p><p>åç¼–è¯‘.NETç¨‹åºéœ€è¦ä½¿ç”¨ä¸“é—¨çš„åç¼–è¯‘å·¥å…·</p><h1 id="ğŸ§¿ä½¿ç”¨dotPeekè¿›è¡Œåç¼–è¯‘"><a href="#ğŸ§¿ä½¿ç”¨dotPeekè¿›è¡Œåç¼–è¯‘" class="headerlink" title="ğŸ§¿ä½¿ç”¨dotPeekè¿›è¡Œåç¼–è¯‘"></a>ğŸ§¿ä½¿ç”¨dotPeekè¿›è¡Œåç¼–è¯‘</h1><p>1.ä¸‹è½½dotPeek<br>dotPeekï¼šJetBrains å‡ºå“çš„å…è´¹ .NET åç¼–è¯‘å™¨ä¸ç¨‹åºé›†æµè§ˆå™¨</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240421aaa.jpg"></p><p>2.File &gt; Open</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240421aa2.jpg"></p><p>3.æ‰“å¼€éœ€è¦åç¼–è¯‘çš„æ–‡ä»¶æ–¹æ³•</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240421aa3.jpg"></p><h1 id="ğŸ§â€â™‚ï¸ä½¿ç”¨ILSpyè¿›è¡Œåç¼–è¯‘"><a href="#ğŸ§â€â™‚ï¸ä½¿ç”¨ILSpyè¿›è¡Œåç¼–è¯‘" class="headerlink" title="ğŸ§â€â™‚ï¸ä½¿ç”¨ILSpyè¿›è¡Œåç¼–è¯‘"></a>ğŸ§â€â™‚ï¸ä½¿ç”¨ILSpyè¿›è¡Œåç¼–è¯‘</h1><ol><li>ä¸‹è½½å¹¶å®‰è£…<br>ILSpyï¼š<a href="https://github.com/icsharpcode/ILSpy/releases">https://github.com/icsharpcode/ILSpy/releases</a></li></ol><p>2.æ–‡ä»¶-æ‰“å¼€-exe</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240421aa4.jpg"></p><p>3.æŸ¥çœ‹åç¼–è¯‘å†…å®¹</p><p>æ‰¾åˆ°Form1 å¯ä»¥çœ‹åˆ°é‡Œé¢åç¼–è¯‘çš„å†…å®¹</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240421aa5.jpg"></p><p>å¤åˆ¶åˆ°vsé‡Œé¢ </p><p>æ›¿æ¢ä»£ç æ·»åŠ ç›¸å…³å¼•ç”¨å³å¯</p><h1 id="ğŸ¤–ä½¿ç”¨Reflectorè¿›è¡Œåç¼–è¯‘"><a href="#ğŸ¤–ä½¿ç”¨Reflectorè¿›è¡Œåç¼–è¯‘" class="headerlink" title="ğŸ¤–ä½¿ç”¨Reflectorè¿›è¡Œåç¼–è¯‘"></a>ğŸ¤–ä½¿ç”¨Reflectorè¿›è¡Œåç¼–è¯‘</h1><p>1.File &gt; Open Assembly</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240421aa6.jpg"><br>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240421aa7.jpg"></p><p>2.ç‚¹å¼€WinTime.exeå†…å®¹</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240421aa8.jpg"></p><p>3.æŸ¥çœ‹åç¼–è¯‘å†…å®¹</p><p>å¯ä»¥çœ‹åˆ°åç¼–è¯‘å‡ºæ¥çš„æ§ä»¶å’Œæ–¹æ³•<br>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240421aa9.jpg"></p><p>ç‚¹å¼€æ–¹æ³•ï¼Œå¯ä»¥çœ‹åˆ°æ–¹æ³•å†…çš„å†…å®¹</p><p>æ³¨æ„ï¼š</p><p>åç¼–è¯‘çš„ä»£ç å¯èƒ½ä¸å®Œå…¨ç­‰åŒäºåŸå§‹æºä»£ç ï¼Œå› ä¸ºç¼–è¯‘å™¨å¯èƒ½ä¼šè¿›è¡Œä¼˜åŒ–ï¼Œå¹¶ä¸”æŸäº›ä¿¡æ¯å¯èƒ½å› ä¸ºæ··æ·†æŠ€æœ¯è€Œæ— æ³•æ¢å¤ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> .NET </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>.NET SMTP</title>
      <link href="/2024/04/20/NET-Smtp/"/>
      <url>/2024/04/20/NET-Smtp/</url>
      
        <content type="html"><![CDATA[<p>SMTPï¼ˆSimple Mail Transfer Protocolï¼‰æ˜¯ç”¨äºç”µå­é‚®ä»¶ä¼ è¾“çš„è§„åˆ™é›†ï¼Œå¯ä»¥ä»é‚®ä»¶å®¢æˆ·ç«¯å‘æ¥æ”¶ç”µå­é‚®ä»¶æœåŠ¡å™¨å‘é€ã€ä¸­ç»§æˆ–è½¬å‘é‚®ä»¶ã€‚å‘ä»¶äººå¯ä½¿ç”¨SMTP æœåŠ¡å™¨æ¥æ‰§è¡Œå‘é€ç”µå­é‚®ä»¶çš„è¿‡ç¨‹ã€‚SMTPæœåŠ¡å™¨åˆ™æ˜¯æŒ‰ç…§è¿™äº›è§„åˆ™ä¸­è½¬ç”µå­é‚®ä»¶çš„æœåŠ¡å™¨ã€‚</p><p>IMAPå¯ä»¥ç†è§£ä¸ºæ”¶é‚®ä»¶ã€‚<br>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240420aaa01.jpg"></p><h1 id="ğŸ§ä½¿ç”¨QQé‚®ç®±å‘é‚®ä»¶"><a href="#ğŸ§ä½¿ç”¨QQé‚®ç®±å‘é‚®ä»¶" class="headerlink" title="ğŸ§ä½¿ç”¨QQé‚®ç®±å‘é‚®ä»¶"></a>ğŸ§ä½¿ç”¨QQé‚®ç®±å‘é‚®ä»¶</h1><p>é¦–å…ˆéœ€è¦è®¾ç½®å¼€å¯é‚®ç®±çš„SMTPæœåŠ¡</p><p>ç™»å½•(<a href="https://mail.qq.com/)%E7%94%B5%E8%84%91%E7%BD%91%E9%A1%B5%E7%89%88%E9%82%AE%E7%AE%B1%E8%BF%9B%E5%85%A5%E3%80%90%E8%AE%BE%E7%BD%AE%E3%80%91-%3E%E3%80%90%E5%B8%90%E6%88%B7%E3%80%91-%3E%E3%80%90POP3/IMAP/SMTP%E6%9C%8D%E5%8A%A1%E3%80%91%EF%BC%8C">https://mail.qq.com/)ç”µè„‘ç½‘é¡µç‰ˆé‚®ç®±è¿›å…¥ã€è®¾ç½®ã€‘-&gt;ã€å¸æˆ·ã€‘-&gt;ã€POP3/IMAP/SMTPæœåŠ¡ã€‘ï¼Œ</a> å¼€å¯æˆ–å…³é—­ç›¸åº”æœåŠ¡æœ€åä¿å­˜æ›´æ”¹å³å¯ã€‚<br>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240420aaa02.jpg"></p><p>QQé‚®ç®± POP3 å’Œ SMTP æœåŠ¡å™¨åœ°å€è®¾ç½®å¦‚ä¸‹ï¼š</p><p>é‚®ç®±POP3æœåŠ¡å™¨ï¼ˆç«¯å£995ï¼‰SMTPæœåŠ¡å™¨ï¼ˆç«¯å£465æˆ–587ï¼‰<br>qq.compop.qq.comsmtp.qq.com<br>SMTPæœåŠ¡å™¨éœ€è¦èº«ä»½éªŒè¯ã€‚</p><p>ä»¥ä¸‹æ˜¯ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> ConsoleApp1Test;</span><br><span class="line"><span class="comment">//xxx</span></span><br><span class="line"><span class="built_in">string</span> server = <span class="string">&quot;smtp.qq.com&quot;</span>;</span><br><span class="line"><span class="built_in">string</span> username = <span class="string">&quot;my test email&quot;</span>;</span><br><span class="line"><span class="built_in">string</span> password = <span class="string">&quot;xxx;</span></span><br><span class="line"><span class="string">string from = &quot;</span><span class="keyword">from</span>@qq.com<span class="string">&quot;;</span></span><br><span class="line"><span class="string">string to =   &quot;</span>to@qq.com<span class="string">&quot;;</span></span><br><span class="line"><span class="string">string subject = &quot;</span>Test Email<span class="string">&quot;;</span></span><br><span class="line"><span class="string">string content = &quot;</span>This <span class="keyword">is</span> a test email sent asynchronously.<span class="string">&quot;;</span></span><br><span class="line"><span class="string">bool isHtml = false; // æ˜¯å¦ä¸º HTML æ ¼å¼</span></span><br><span class="line"><span class="string">try</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">    bool success = await MailHelper. SendMailAsync(server, username, password, from, to, null, subject, content, isHtml);</span></span><br><span class="line"><span class="string">    if (success)</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        Console.WriteLine(&quot;</span>é‚®ä»¶å‘é€æˆåŠŸï¼<span class="string">&quot;);</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    else</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        Console.WriteLine(&quot;</span>é‚®ä»¶å‘é€å¤±è´¥ï¼<span class="string">&quot;);</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">catch (Exception ex)</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">    Console.WriteLine($&quot;</span>é‚®ä»¶å‘é€å‡ºé”™ï¼š&#123;ex.Message&#125;<span class="string">&quot;);</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">using System;</span></span><br><span class="line"><span class="string">using System.Collections.Generic;</span></span><br><span class="line"><span class="string">using System.Linq;</span></span><br><span class="line"><span class="string">using System.Net.Mail;</span></span><br><span class="line"><span class="string">using System.Text;</span></span><br><span class="line"><span class="string">using System.Threading.Tasks;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">namespace ConsoleApp1Test</span></span><br><span class="line"><span class="string">&#123;</span></span><br><span class="line"><span class="string">    internal class MailHelper</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">      public static async Task&lt;bool&gt; SendMailAsync(string server, string username, string password, string from, string to, string cc, string subject, string content, bool isHtml)</span></span><br><span class="line"><span class="string">    &#123;</span></span><br><span class="line"><span class="string">        try</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            using (var smtp = new SmtpClient(server))</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                smtp.UseDefaultCredentials = false;</span></span><br><span class="line"><span class="string">                smtp.Credentials = new System.Net.NetworkCredential(username, password);</span></span><br><span class="line"><span class="string">                smtp.EnableSsl = true; // å¯ç”¨åŠ å¯†</span></span><br><span class="line"><span class="string">                smtp.DeliveryMethod = SmtpDeliveryMethod.Network;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">                using (var mail = new MailMessage())</span></span><br><span class="line"><span class="string">                &#123;</span></span><br><span class="line"><span class="string">                    mail.From = new MailAddress(from);</span></span><br><span class="line"><span class="string">                    mail.To.Add(to);</span></span><br><span class="line"><span class="string">                    mail.SubjectEncoding = Encoding.UTF8;</span></span><br><span class="line"><span class="string">                    mail.Subject = subject;</span></span><br><span class="line"><span class="string">                    mail.IsBodyHtml = isHtml;</span></span><br><span class="line"><span class="string">                    mail.BodyEncoding = Encoding.UTF8;</span></span><br><span class="line"><span class="string">                    mail.Body = content;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">                    await smtp.SendMailAsync(mail); // å¼‚æ­¥å‘é€é‚®ä»¶</span></span><br><span class="line"><span class="string">                &#125;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">                return true;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        catch (Exception err)</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">            // å‘é€å¤±è´¥æ—¶çš„å¼‚å¸¸å¤„ç†</span></span><br><span class="line"><span class="string">            // å¯ä»¥åœ¨æ­¤å¤„è®°å½•æ—¥å¿—</span></span><br><span class="line"><span class="string">            return false;</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240420aaa03.jpg"><br>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240420aaa04.jpg"></p><h1 id="ğŸ·ä½¿ç”¨ç½‘æ˜“é‚®ç®±å‘é€é‚®ä»¶"><a href="#ğŸ·ä½¿ç”¨ç½‘æ˜“é‚®ç®±å‘é€é‚®ä»¶" class="headerlink" title="ğŸ·ä½¿ç”¨ç½‘æ˜“é‚®ç®±å‘é€é‚®ä»¶"></a>ğŸ·ä½¿ç”¨ç½‘æ˜“é‚®ç®±å‘é€é‚®ä»¶</h1><p>163ç½‘æ˜“å…è´¹é‚®</p><p>è®¾ç½® &gt; POP3&#x2F;SMTP&#x2F;IMAP </p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240420aaa05.jpg"><br>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240420aaa06.jpg"></p><p>ä½¿ç”¨ç½‘æ˜“é‚®ç®±å‘é€é‚®ä»¶ä¸Šè¿°ç¤ºä¾‹ç±»ä¼¼ï¼Œåªéœ€æ›¿æ¢ç›¸åº”çš„æœåŠ¡å™¨åœ°å€ã€ç”¨æˆ·åã€å¯†ç ã€å‘ä»¶äººã€æ”¶ä»¶äººã€ä¸»é¢˜ã€å†…å®¹ç­‰ä¿¡æ¯å³å¯ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span> server = <span class="string">&quot;smtp.163.com&quot;</span>;</span><br><span class="line"><span class="built_in">string</span> username = <span class="string">&quot;f@163.com&quot;</span>;</span><br><span class="line"><span class="built_in">string</span> password = <span class="string">&quot;xxx&quot;</span>;</span><br><span class="line"><span class="built_in">string</span> <span class="keyword">from</span> = <span class="string">&quot;f@163.com&quot;</span>;</span><br><span class="line"><span class="built_in">string</span> to = <span class="string">&quot;t@qq.com&quot;</span>;</span><br><span class="line"><span class="built_in">string</span> subject = <span class="string">&quot;Test163Email m&quot;</span>;</span><br><span class="line"><span class="built_in">string</span> content = <span class="string">&quot;This is a test email &quot;</span>;</span><br><span class="line"><span class="built_in">bool</span> isHtml = <span class="literal">false</span>; <span class="comment">// æ˜¯å¦ä¸º HTML æ ¼å¼</span></span><br><span class="line">``` c<span class="meta">#</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">è¿è¡Œï¼š</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">â€‹&lt;img src=<span class="string">&quot;https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240420aaa07.jpg&quot;</span>&gt;</span><br><span class="line">â€‹&lt;img src=<span class="string">&quot;https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240420aaa08.jpg&quot;</span>&gt;</span><br><span class="line">â€‹&lt;img src=<span class="string">&quot;https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240420aaa09.jpg&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta"># ğŸ¬ä½¿ç”¨è°·æ­Œé‚®ç®±å‘é€é‚®ä»¶</span></span><br><span class="line"></span><br><span class="line">è°·æ­ŒGmailé‚®ç®±ç™»é™†åœ°å€ï¼šhttps:<span class="comment">//mail.google.com</span></span><br><span class="line"></span><br><span class="line">â€‹&lt;img src=<span class="string">&quot;https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240420aaa10.jpg&quot;</span>&gt;</span><br><span class="line">â€‹&lt;img src=<span class="string">&quot;https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240420aaa11.jpg&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">è°·æ­Œimapå¼€é€š smtpä¹Ÿè‡ªåŠ¨å¼€é€š </span><br><span class="line"></span><br><span class="line">https:<span class="comment">//myaccount.google.com/</span></span><br><span class="line">â€‹&lt;img src=<span class="string">&quot;https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240420aaa12.jpg&quot;</span>&gt;</span><br><span class="line">â€‹&lt;img src=<span class="string">&quot;https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240420aaa13.jpg&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line">æ¥æ”¶é‚®ä»¶ (IMAP) æœåŠ¡å™¨imap.gmail.comè¦æ±‚ SSLï¼šæ˜¯ç«¯å£ï¼š<span class="number">993</span></span><br><span class="line">å‘é€é‚®ä»¶ (SMTP) æœåŠ¡å™¨smtp.gmail.comè¦æ±‚ SSLï¼šæ˜¯è¦æ±‚ TLSï¼šæ˜¯ï¼ˆå¦‚é€‚ç”¨ï¼‰ä½¿ç”¨èº«ä»½éªŒè¯ï¼šæ˜¯SSL ç«¯å£ï¼š<span class="number">465</span>TLS/STARTTLS ç«¯å£ï¼š<span class="number">587</span></span><br><span class="line"></span><br><span class="line">ä½¿ç”¨è°·æ­Œé‚®ç®±ä¿®æ”¹å¯¹åº”çš„æœåŠ¡å™¨åœ°å€ã€ç”¨æˆ·åã€å¯†ç ã€å‘ä»¶äººã€æ”¶ä»¶äººã€ä¸»é¢˜ã€å†…å®¹ç­‰ä¿¡æ¯å³å¯ã€‚</span><br><span class="line">``` c<span class="meta">#</span></span><br><span class="line"><span class="built_in">string</span> server = <span class="string">&quot;smtp.gmail.com&quot;</span>;</span><br><span class="line"><span class="built_in">string</span> username = <span class="string">&quot;f@gmail.com&quot;</span>;</span><br><span class="line"><span class="built_in">string</span> password = <span class="string">&quot;xx&quot;</span>;</span><br><span class="line"><span class="built_in">string</span> <span class="keyword">from</span> = <span class="string">&quot;f@gmail.com&quot;</span>;</span><br><span class="line"><span class="built_in">string</span> to = <span class="string">&quot;t@qq.com&quot;</span>;</span><br><span class="line"><span class="built_in">string</span> subject = <span class="string">&quot;TestSMTPEmail m&quot;</span>;</span><br><span class="line"><span class="built_in">string</span> content = <span class="string">&quot;This is a test email sent using Gmail SMTP.m&quot;</span>;</span><br><span class="line"><span class="built_in">bool</span> isHtml = <span class="literal">false</span>; <span class="comment">// æ˜¯å¦ä¸º HTML æ ¼å¼</span></span><br></pre></td></tr></table></figure><p>è¿è¡Œï¼š</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240420aaa14.jpg"><br>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240420aaa15.jpg"></p><p>ğŸ“®æœ‰äº›å…è´¹é‚®ç®±å¯¹å‘ä¿¡é‡æœ‰é™åˆ¶ï¼Œå¯ä½¿ç”¨ä¼ä¸šé‚®ï¼Œå¤šè´¦å·å¢åŠ å‘ä¿¡é‡ã€‚</p><p>END</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> .NET </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Socket to WebSocket</title>
      <link href="/2024/04/20/NET-Socket/"/>
      <url>/2024/04/20/NET-Socket/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>é’ˆå¯¹IOS App Proxy Serveræ— æ³•ç›´è¿WebSocketï¼Œå»ºç«‹ Socketä¸­è½¬ç«¯ã€‚</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240420311.jpg"></p><p>WebSocket ç«¯ï¼š</p><p>WebSocket ç«¯ç”¨äºå®ç°å®æ—¶é€šä¿¡åŠŸèƒ½ã€‚</p><p>WebSocket ç«¯é€šè¿‡ WebSocket åè®®ä¸ä¸­è½¬ç«¯é€šä¿¡ï¼Œä¸­è½¬ç«¯å¯ä»¥é€šè¿‡ WebSocket æˆ–å…¶ä»–ä¼ è¾“åè®®ä¸ WebSocket ç«¯å»ºç«‹è¿æ¥ï¼Œæ”¶å‘æ¶ˆæ¯ã€‚</p><p>å®šä¹‰ SendMessageToChatRoomIP å’Œ JoinChatRoomï¼Œç”¨äºå¤„ç†æ¥è‡ªå®¢æˆ·ç«¯çš„æ¶ˆæ¯å’Œè¿æ¥äº‹ä»¶ã€‚</p><p>ä¸­è½¬ç«¯ C1 ï¼ˆSocket Serverï¼‰ï¼š</p><p>ä¸­è½¬ç«¯ C1 æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åº”ç”¨ç¨‹åºï¼Œç”¨äºè¿æ¥WebSocketç«¯ï¼Œå»ºç«‹SocketæœåŠ¡ã€‚</p><p>ä¸­è½¬ç«¯ C1 çš„ä¸»è¦åŠŸèƒ½æ˜¯æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯ C2 çš„æ¶ˆæ¯ï¼Œå¹¶å°†å…¶è½¬å‘ç»™ WebSocket ç«¯ï¼Œæˆ–è€…æ¥æ”¶æ¥è‡ª WebSocket ç«¯çš„æ¶ˆæ¯ï¼Œå¹¶è½¬å‘ç»™å®¢æˆ·ç«¯ C2ã€‚</p><p>å®¢æˆ·ç«¯ C2 x  N ï¼š</p><p>å®¢æˆ·ç«¯ C2 ï¼Œä¸»è¦ä¸ä¸­è½¬ç«¯è¿æ¥ å‘é€æ•°æ®ï¼Œæ¥æ”¶æ•°æ®ã€‚</p><p>åœ¨å®¢æˆ·ç«¯ C2 ä¸­ï¼Œè¿æ¥åˆ°ä¸­è½¬ç«¯ C1ã€å‘é€æ¶ˆæ¯ç»™ä¸­è½¬ç«¯ C1ã€æ¥æ”¶æ¥è‡ªä¸­è½¬ç«¯ C1 çš„æ¶ˆæ¯ã€‚</p><p>è°ƒç”¨å…³ç³»ä¸ºï¼š</p><p>å®¢æˆ·ç«¯ C2 é€šè¿‡ä¸ä¸­è½¬ç«¯ C1 çš„é€šä¿¡ï¼Œå‘ WebSocket ç«¯å‘é€æ¶ˆæ¯æˆ–æ¥æ”¶æ¥è‡ª WebSocket ç«¯çš„æ¶ˆæ¯ã€‚</p><p>ä¸­è½¬ç«¯ C1 æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯ C2 çš„æ¶ˆæ¯ï¼Œå¹¶å°†å…¶è½¬å‘ç»™ WebSocket ç«¯ï¼Œæˆ–è€…æ¥æ”¶æ¥è‡ª WebSocket ç«¯çš„æ¶ˆæ¯ï¼Œå¹¶è½¬å‘ç»™å®¢æˆ·ç«¯ C2ã€‚</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240420312.jpg"></p><h1 id="ä¸­è½¬ç«¯å®ç°"><a href="#ä¸­è½¬ç«¯å®ç°" class="headerlink" title="ä¸­è½¬ç«¯å®ç°"></a>ä¸­è½¬ç«¯å®ç°</h1><h2 id="1-è¿æ¥WebSocket"><a href="#1-è¿æ¥WebSocket" class="headerlink" title="1.è¿æ¥WebSocket"></a>1.è¿æ¥WebSocket</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">async</span> Task <span class="title">ConnectToServer</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        connection = <span class="keyword">new</span> HubConnectionBuilder()</span><br><span class="line">            .WithUrl(<span class="string">&quot;xxx/chathub&quot;</span>)<span class="comment">//</span></span><br><span class="line">            .Build();</span><br><span class="line"> </span><br><span class="line">        connection.On&lt;<span class="built_in">string</span>, <span class="built_in">string</span>, <span class="built_in">string</span>, <span class="built_in">string</span>&gt;(<span class="string">&quot;ReceiveMessage&quot;</span>, <span class="keyword">async</span> (user, message, clientIP, chatRoomId) =&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;Received message from wsserver_sr : <span class="subst">&#123;user&#125;</span>: <span class="subst">&#123;message&#125;</span> |socketserver <span class="subst">&#123;clientIP&#125;</span>|<span class="subst">&#123;chatRoomId&#125;</span>&quot;</span>);</span><br><span class="line"> </span><br><span class="line">            <span class="comment">// æ”¶åˆ°æ¥è‡ªæœåŠ¡å™¨çš„æ¶ˆæ¯æ—¶ï¼Œå‘å®¢æˆ·ç«¯ C2 å‘é€æ¶ˆæ¯</span></span><br><span class="line">            <span class="keyword">await</span> SendMessageToClientC2(user, message, clientIP, chatRoomId);</span><br><span class="line">        &#125;);</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">await</span> connection.StartAsync();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;Error connecting to SignalR server: <span class="subst">&#123;ex.Message&#125;</span>&quot;</span> + Environment.NewLine);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> æ”¶åˆ°æ¶ˆæ¯æ—¶å‘é€ç»™å¯¹åº”å®¢æˆ·ç«¯</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">async</span> Task <span class="title">SendMessageToClientC2</span>(<span class="params"><span class="built_in">string</span> user, <span class="built_in">string</span> message, <span class="built_in">string</span> clientIP, <span class="built_in">string</span> chatRoomId</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// æ ¹æ® chatRoomId æ‰¾åˆ°å¯¹åº”çš„å®¢æˆ·ç«¯ C2ï¼Œå¹¶å‘é€æ¶ˆæ¯</span></span><br><span class="line">    <span class="keyword">if</span> (chatRooms.ContainsKey(chatRoomId))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">byte</span>[] data = Encoding.ASCII.GetBytes(<span class="string">$&quot;<span class="subst">&#123;user&#125;</span>  <span class="subst">&#123;message&#125;</span>  |<span class="subst">&#123;clientIP&#125;</span>|<span class="subst">&#123;chatRoomId&#125;</span> &quot;</span>);</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">var</span> client <span class="keyword">in</span> chatRooms[chatRoomId])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">await</span> client.GetStream().WriteAsync(data, <span class="number">0</span>, data.Length);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">$&quot;Chat room <span class="subst">&#123;chatRoomId&#125;</span> does not exist&quot;</span> + Environment.NewLine);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-å»ºç«‹ä¸­è½¬ç«¯Socketç«¯å£"><a href="#2-å»ºç«‹ä¸­è½¬ç«¯Socketç«¯å£" class="headerlink" title="2.å»ºç«‹ä¸­è½¬ç«¯Socketç«¯å£"></a>2.å»ºç«‹ä¸­è½¬ç«¯Socketç«¯å£</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">StartListening</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (!listening)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">int</span> port = <span class="number">10086</span>; <span class="comment">// ç›‘å¬ç«¯å£</span></span><br><span class="line">            server = <span class="keyword">new</span> TcpListener(IPAddress.Any, port);</span><br><span class="line">            server.Start();</span><br><span class="line">            listening = <span class="literal">true</span>;</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;Server listening on port <span class="subst">&#123;port&#125;</span>&quot;</span> + Environment.NewLine);</span><br><span class="line"> </span><br><span class="line">            Task.Run(() =&gt; AcceptClients());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;Error starting server: <span class="subst">&#123;ex.Message&#125;</span>&quot;</span> + Environment.NewLine);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-å‘å®¢æˆ·ç«¯å‘æ¶ˆæ¯"><a href="#3-å‘å®¢æˆ·ç«¯å‘æ¶ˆæ¯" class="headerlink" title="3.å‘å®¢æˆ·ç«¯å‘æ¶ˆæ¯"></a>3.å‘å®¢æˆ·ç«¯å‘æ¶ˆæ¯</h2> <figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">async</span> Task <span class="title">AcceptClients</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">while</span> (listening)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            TcpClient client = <span class="keyword">await</span> server.AcceptTcpClientAsync();</span><br><span class="line">            Task.Run(() =&gt; HandleClient(client));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;Error accepting client: <span class="subst">&#123;ex.Message&#125;</span>&quot;</span> + Environment.NewLine);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-ç›‘å¬å®¢æˆ·ç«¯è¿æ¥"><a href="#4-ç›‘å¬å®¢æˆ·ç«¯è¿æ¥" class="headerlink" title="4.ç›‘å¬å®¢æˆ·ç«¯è¿æ¥"></a>4.ç›‘å¬å®¢æˆ·ç«¯è¿æ¥</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">async</span> Task <span class="title">AcceptClients</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">while</span> (listening)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            TcpClient client = <span class="keyword">await</span> server.AcceptTcpClientAsync();</span><br><span class="line">            Task.Run(() =&gt; HandleClient(client));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;Error accepting client: <span class="subst">&#123;ex.Message&#125;</span>&quot;</span> + Environment.NewLine);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="5-å¤„ç†å®¢æˆ·ç«¯è¿æ¥"><a href="#5-å¤„ç†å®¢æˆ·ç«¯è¿æ¥" class="headerlink" title="5.å¤„ç†å®¢æˆ·ç«¯è¿æ¥"></a>5.å¤„ç†å®¢æˆ·ç«¯è¿æ¥</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">async</span> Task <span class="title">HandleClient</span>(<span class="params">TcpClient client</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    NetworkStream stream = client.GetStream();</span><br><span class="line">    <span class="built_in">byte</span>[] buffer = <span class="keyword">new</span> <span class="built_in">byte</span>[<span class="number">1024</span>];</span><br><span class="line">    <span class="built_in">int</span> bytesRead;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">while</span> (client.Connected)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            bytesRead = <span class="keyword">await</span> stream.ReadAsync(buffer, <span class="number">0</span>, buffer.Length);</span><br><span class="line">            <span class="built_in">string</span> message = Encoding.ASCII.GetString(buffer, <span class="number">0</span>, bytesRead);</span><br><span class="line">            ProcessMessage(message, client);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;Error receiving message: <span class="subst">&#123;ex.Message&#125;</span>&quot;</span> + Environment.NewLine);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// å®¢æˆ·ç«¯æ–­å¼€è¿æ¥æ—¶ï¼Œä»èŠå¤©å®¤ä¸­ç§»é™¤</span></span><br><span class="line">    <span class="keyword">foreach</span> (<span class="keyword">var</span> chatRoomId <span class="keyword">in</span> chatRooms.Keys)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (chatRooms[chatRoomId].Contains(client))</span><br><span class="line">        &#123;</span><br><span class="line">            chatRooms[chatRoomId].Remove(client);</span><br><span class="line">            Console.WriteLine(<span class="string">$&quot;Client disconnected from chat room <span class="subst">&#123;chatRoomId&#125;</span>&quot;</span> + Environment.NewLine);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="6-å¤„ç†è¿æ¥"><a href="#6-å¤„ç†è¿æ¥" class="headerlink" title="6.å¤„ç†è¿æ¥"></a>6.å¤„ç†è¿æ¥</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">async</span> <span class="keyword">void</span> <span class="title">ProcessMessage</span>(<span class="params"><span class="built_in">string</span> message, TcpClient client</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">string</span>[] parts = message.Split(<span class="string">&#x27;|&#x27;</span>);</span><br><span class="line">    <span class="keyword">if</span> (parts.Length &gt;= <span class="number">2</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">string</span> command = parts[<span class="number">0</span>];</span><br><span class="line">        <span class="built_in">string</span> chatRoomId = parts[<span class="number">1</span>];</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">switch</span> (command)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;JoinChatRoom&quot;</span>:</span><br><span class="line">                <span class="keyword">await</span> JoinChatRoom(chatRoomId, client);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;SendMessageToChatRoomIP2&quot;</span>:</span><br><span class="line">                <span class="keyword">if</span> (parts.Length &gt;= <span class="number">4</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">string</span> user = parts[<span class="number">2</span>];</span><br><span class="line">                    <span class="built_in">string</span> msg = parts[<span class="number">3</span>];</span><br><span class="line">                    <span class="comment">//  await SendMessageToChatRoom(chatRoomId, user, msg);</span></span><br><span class="line">                    <span class="keyword">await</span> SendMessageToChatRoomAddress(chatRoomId, user, msg, client);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="literal">default</span>:</span><br><span class="line">                Console.WriteLine(<span class="string">$&quot;Invalid command: <span class="subst">&#123;command&#125;</span>&quot;</span> + Environment.NewLine);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>JoinChatRoom å¼‚æ­¥è°ƒç”¨æœåŠ¡ç«¯çš„JoinChatRoom </p><p>SendMessageToChatRoomIP2 å¼‚æ­¥è°ƒç”¨SendMessage  </p><h2 id="7-è¿è¡Œ"><a href="#7-è¿è¡Œ" class="headerlink" title="7.è¿è¡Œ"></a>7.è¿è¡Œ</h2><p>æœ¬åœ°è¿è¡Œ<br>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240420313.jpg"></p><p>å‘å¸ƒåˆ°linux<br>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240420314.jpg"></p><p>run  Server listening on port 10860</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -tlnæŸ¥çœ‹ç«¯å£ ï¼ˆtulnï¼‰ </span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ä¼˜åŒ–å°è£…æˆWinFormç¨‹åºï¼Œæ”¶å‘æ¶ˆæ¯å¯è§†åŒ–ã€‚</p><p>ç‚¹å‡»å¯åŠ¨socketç«¯å£è°ƒç”¨ 1.è¿æ¥websocket 2.ç›‘å¬socket   </p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240420315.jpg"></p><p>ä¹Ÿå¯ä»¥å°è£…æˆç³»ç»ŸæœåŠ¡ï¼Œä¸è¿›ç¨‹ä¸€æ ·è—åœ¨åå°è¿è¡Œã€‚</p><h1 id="å®¢æˆ·ç«¯å®ç°"><a href="#å®¢æˆ·ç«¯å®ç°" class="headerlink" title="å®¢æˆ·ç«¯å®ç°"></a>å®¢æˆ·ç«¯å®ç°</h1><h2 id="1-è¿æ¥Socketç«¯"><a href="#1-è¿æ¥Socketç«¯" class="headerlink" title="1.è¿æ¥Socketç«¯"></a>1.è¿æ¥Socketç«¯</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">async</span> <span class="keyword">void</span> <span class="title">MainForm_Load</span>(<span class="params"><span class="built_in">object</span> sender, EventArgs e</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">try</span></span><br><span class="line">    &#123;</span><br><span class="line">        client = <span class="keyword">new</span> TcpClient();</span><br><span class="line">        <span class="keyword">await</span> client.ConnectAsync(<span class="string">&quot;192.168.80.123&quot;</span>, <span class="number">10086</span>); </span><br><span class="line">        stream = client.GetStream();</span><br><span class="line">        connected = <span class="literal">true</span>;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// è¿æ¥æˆåŠŸåï¼Œè°ƒç”¨ JoinChatRoom æ–¹æ³•åŠ å…¥èŠå¤©å®¤</span></span><br><span class="line">        <span class="keyword">await</span> JoinChatRoom(<span class="string">&quot;room001&quot;</span>);</span><br><span class="line"> </span><br><span class="line">        Task.Run(ReceiveMessages);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">    &#123;</span><br><span class="line">        textBoxReceivedMessages.AppendText(<span class="string">$&quot;Error connecting to server: <span class="subst">&#123;ex.Message&#125;</span>&quot;</span> + Environment.NewLine);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="2-åŠ å…¥ChatRoom"><a href="#2-åŠ å…¥ChatRoom" class="headerlink" title="2.åŠ å…¥ChatRoom"></a>2.åŠ å…¥ChatRoom</h1><p>JoinChatRoomä¸­è½¬åˆ°Serverç«¯å†åŠ å…¥èŠå¤©å®¤</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">async</span> Task <span class="title">JoinChatRoom</span>(<span class="params"><span class="built_in">string</span> chatRoomId</span>)</span></span><br><span class="line">     &#123;</span><br><span class="line">         <span class="comment">// å‘é€æ¶ˆæ¯ç»™ä¸­è½¬ç«¯ C1ï¼Œè¯·æ±‚åŠ å…¥èŠå¤©å®¤</span></span><br><span class="line">         <span class="built_in">byte</span>[] data = Encoding.ASCII.GetBytes(<span class="string">$&quot;JoinChatRoom|<span class="subst">&#123;chatRoomId&#125;</span>|J&quot;</span>);</span><br><span class="line">         <span class="keyword">await</span> stream.WriteAsync(data, <span class="number">0</span>, data.Length);</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure><h1 id="3-å‘é€æ¶ˆæ¯"><a href="#3-å‘é€æ¶ˆæ¯" class="headerlink" title="3.å‘é€æ¶ˆæ¯"></a>3.å‘é€æ¶ˆæ¯</h1><p>å‘é€åˆ°Socketä¸­è½¬ç«¯</p><pre><code> <figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">async</span> Task <span class="title">SendMessageToChatRoom</span>(<span class="params"><span class="built_in">string</span> chatRoomId, <span class="built_in">string</span> message</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// å‘é€æ¶ˆæ¯ç»™ä¸­è½¬ç«¯ C1ï¼Œè¯·æ±‚å‘æŒ‡å®šèŠå¤©å®¤å‘é€æ¶ˆæ¯</span></span><br><span class="line">    <span class="built_in">byte</span>[] data = Encoding.ASCII.GetBytes(<span class="string">$&quot;SendMessageToChatRoomIP2|<span class="subst">&#123;chatRoomId&#125;</span>|client2m|<span class="subst">&#123;message&#125;</span>&quot;</span>);</span><br><span class="line">    <span class="keyword">await</span> stream.WriteAsync(data, <span class="number">0</span>, data.Length);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></code></pre><h1 id="4-æ¥æ”¶æ¶ˆæ¯"><a href="#4-æ¥æ”¶æ¶ˆæ¯" class="headerlink" title="4.æ¥æ”¶æ¶ˆæ¯"></a>4.æ¥æ”¶æ¶ˆæ¯</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">async</span> Task <span class="title">ReceiveMessages</span>()</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">byte</span>[] buffer = <span class="keyword">new</span> <span class="built_in">byte</span>[<span class="number">1024</span>];</span><br><span class="line">            <span class="built_in">int</span> bytesRead;</span><br><span class="line"> </span><br><span class="line">            <span class="keyword">while</span> (connected)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">try</span></span><br><span class="line">                &#123;</span><br><span class="line">                    bytesRead = <span class="keyword">await</span> stream.ReadAsync(buffer, <span class="number">0</span>, buffer.Length);</span><br><span class="line">                    <span class="built_in">string</span> message = Encoding.ASCII.GetString(buffer, <span class="number">0</span>, bytesRead);</span><br><span class="line">                    DisplayMessage(message);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">                &#123;</span><br><span class="line">                    textBoxReceivedMessages.AppendText(<span class="string">$&quot;Error receiving message: <span class="subst">&#123;ex.Message&#125;</span>&quot;</span> + Environment.NewLine);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">DisplayMessage</span>(<span class="params"><span class="built_in">string</span> message</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (InvokeRequired)</span><br><span class="line">            &#123;</span><br><span class="line">                Invoke(<span class="keyword">new</span> Action&lt;<span class="built_in">string</span>&gt;(DisplayMessage), message);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line"> </span><br><span class="line">            textBoxReceivedMessages.AppendText(message + Environment.NewLine);</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><h1 id="5-ç‚¹å‡»äº‹ä»¶"><a href="#5-ç‚¹å‡»äº‹ä»¶" class="headerlink" title="5.ç‚¹å‡»äº‹ä»¶"></a>5.ç‚¹å‡»äº‹ä»¶</h1><p>Send</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">async</span> <span class="keyword">void</span> <span class="title">buttonSend_Click</span>(<span class="params"><span class="built_in">object</span> sender, EventArgs e</span>)</span></span><br><span class="line">     &#123;</span><br><span class="line">         <span class="keyword">if</span> (!connected)</span><br><span class="line">         &#123;</span><br><span class="line">             textBoxReceivedMessages.AppendText(<span class="string">&quot;Not connected to server.&quot;</span> + Environment.NewLine);</span><br><span class="line">             <span class="keyword">return</span>;</span><br><span class="line">         &#125;</span><br><span class="line"> </span><br><span class="line">         <span class="built_in">string</span> message = textBoxSendMessage.Text;</span><br><span class="line"> </span><br><span class="line">         <span class="keyword">if</span> (!<span class="built_in">string</span>.IsNullOrEmpty(message))</span><br><span class="line">         &#123;</span><br><span class="line">             <span class="comment">// å‘é€æ¶ˆæ¯ç»™ä¸­è½¬ç«¯ C1ï¼Œè¯·æ±‚å‘èŠå¤©å®¤å‘é€æ¶ˆæ¯</span></span><br><span class="line">             <span class="keyword">await</span> SendMessageToChatRoom(<span class="string">&quot;room001&quot;</span>, message);</span><br><span class="line">             textBoxSendMessage.Clear();</span><br><span class="line">             textBoxReceivedMessages.AppendText(<span class="string">&quot;Sent message to chat room: room001&quot;</span>  + Environment.NewLine);</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">else</span></span><br><span class="line">         &#123;</span><br><span class="line">             textBoxReceivedMessages.AppendText(<span class="string">&quot;Please enter a message.&quot;</span> + Environment.NewLine);</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure><h1 id="6-è¿è¡Œ"><a href="#6-è¿è¡Œ" class="headerlink" title="6.è¿è¡Œ"></a>6.è¿è¡Œ</h1><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240420316.jpg"></p><p>æœåŠ¡ç«¯å¯åŠ¨</p><p>Server listening on port 10086</p><p>æœåŠ¡ç«¯å‘æ”¶å‘æ¶ˆæ¯åˆ°ä¸­è½¬ç«¯</p><p>Sent message to chat room: room001<br>client2m  hihihi|socketclient 192.168.80.123  |::ffff:183.7.113.105|room001 </p><p>ä¸­è½¬ç«¯æ‹¿åˆ°å®¢æˆ·ç«¯ä¿¡æ¯-&gt;WebSocketç«¯-&gt;ä¸­è½¬ç«¯æ¥æ”¶-&gt;å®¢æˆ·ç«¯æ¥æ”¶</p><p>Client joined chat room room001<br>Received message from WSSserver_sr : client2m: hihihi|socketclient 192.168.80.123 |socketserver:::ffff:183.7.113.105|room001</p><p>å®¢æˆ·ç«¯ä¹Ÿå¯ä»¥ç”¨IOS SOCKET5å‘é€æ¶ˆæ¯</p><pre><code class="c#">//...          dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(1 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;                    NSData * sendData = [@&quot;JoinChatRoom|room001&quot; dataUsingEncoding:NSUTF8StringEncoding];                    [self.socket writeData:sendData withTimeout:-1 tag:1];                                        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(1 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123;                        NSData * sendData = [@&quot;SendMessageToChatRoomIP2|room001|userid001|hello&quot; dataUsingEncoding:NSUTF8StringEncoding];                        [self.socket writeData:sendData withTimeout:-1 tag:2];                        [self.socket readDataWithTimeout:-1 tag:1];                    &#125;);                &#125;); //...</code></pre><p>Run</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240420317.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>.NET JWT </title>
      <link href="/2024/04/19/NET-JWT/"/>
      <url>/2024/04/19/NET-JWT/</url>
      
        <content type="html"><![CDATA[<p>å‰è¨€</p><p>JWT (JSON Web Token) æ˜¯ä¸€ç§å®‰å…¨ä¼ è¾“ä¿¡æ¯çš„å¼€æ”¾æ ‡å‡†ï¼Œç”±Headerã€Payloadå’ŒSignatureä¸‰éƒ¨åˆ†ç»„æˆã€‚å®ƒä¸»è¦ç”¨äºèº«ä»½éªŒè¯ã€ä¿¡æ¯äº¤æ¢å’Œæˆæƒã€‚JWTå¯éªŒè¯ç”¨æˆ·èº«ä»½ï¼Œç¡®ä¿è®¿é—®æƒé™ï¼Œå®ç°å•ç‚¹ç™»å½•ï¼Œå¹¶åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å®‰å…¨åœ°äº¤æ¢ä¿¡æ¯ã€‚å› å…¶ç®€å•ã€å®‰å…¨å’Œä¾¿æ·ï¼ŒJWTåœ¨ç°ä»£Webåº”ç”¨ä¸­å¹¿æ³›ä½¿ç”¨ã€‚</p><p>ç”¨JWTæœ‰å¤šä¸ªåŸå› ï¼š</p><p>æ— çŠ¶æ€çš„èº«ä»½éªŒè¯ï¼šJWTå…è®¸æœåŠ¡å™¨æ— éœ€ä¿å­˜ç”¨æˆ·çš„ä¼šè¯ä¿¡æ¯ï¼Œå› ä¸ºæ‰€æœ‰å¿…è¦çš„ä¿¡æ¯éƒ½å­˜å‚¨åœ¨ä»¤ç‰Œæœ¬èº«ä¸­ã€‚è¿™é™ä½äº†æœåŠ¡å™¨çš„å­˜å‚¨éœ€æ±‚ï¼Œå¹¶æé«˜äº†ç³»ç»Ÿçš„å¯æ‰©å±•æ€§ã€‚</p><p>è·¨åŸŸèº«ä»½éªŒè¯ï¼šç”±äºJWTæ˜¯è‡ªæˆ‘åŒ…å«çš„ï¼Œå¹¶ä¸”å¯ä»¥è¢«è½»æ¾ä¼ é€’ï¼Œå› æ­¤å®ƒéå¸¸é€‚åˆè·¨åŸŸèº«ä»½éªŒè¯ã€‚ç”¨æˆ·å¯ä»¥åœ¨ä¸€ä¸ªæœåŠ¡ä¸ŠéªŒè¯èº«ä»½ï¼Œç„¶åä½¿ç”¨ç›¸åŒçš„ä»¤ç‰Œè®¿é—®å¦ä¸€ä¸ªæœåŠ¡ï¼Œä»è€Œå®ç°å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰ã€‚</p><p>å®‰å…¨æ€§ï¼šJWTå¯ä»¥é€šè¿‡ä½¿ç”¨å¼ºå¤§çš„åŠ å¯†ç®—æ³•ï¼ˆå¦‚HS256, RS256ç­‰ï¼‰è¿›è¡Œç­¾åï¼Œä»¥ç¡®ä¿å…¶å®Œæ•´æ€§å’ŒçœŸå®æ€§ã€‚æœåŠ¡å™¨å¯ä»¥ä½¿ç”¨å…¬é’¥éªŒè¯ä»¤ç‰Œçš„ç­¾åï¼Œä»è€Œç¡®ä¿å®ƒæ²¡æœ‰è¢«ç¯¡æ”¹ï¼Œå¹¶ä¸”ç¡®å®æ˜¯ç”±å—ä¿¡ä»»çš„é¢å‘è€…ç­¾å‘çš„ã€‚</p><p>å‡å°‘æ•°æ®åº“æŸ¥è¯¢ï¼šç”±äºç”¨æˆ·çš„èº«ä»½ä¿¡æ¯éƒ½å­˜å‚¨åœ¨JWTä¸­ï¼ŒæœåŠ¡å™¨æ— éœ€æ¯æ¬¡éƒ½å»æ•°æ®åº“ä¸­æŸ¥è¯¢ç”¨æˆ·çš„èº«ä»½ä¿¡æ¯ï¼Œä»è€Œå‡å°‘äº†æ•°æ®åº“çš„å‹åŠ›å’ŒæŸ¥è¯¢æ—¶é—´ã€‚</p><p>å¯å®šåˆ¶æ€§ï¼šJWTçš„Payloadéƒ¨åˆ†å¯ä»¥åŒ…å«è‡ªå®šä¹‰çš„ä¿¡æ¯ï¼Œå¦‚ç”¨æˆ·è§’è‰²ã€æƒé™ç­‰ï¼Œè¿™ä½¿å¾—JWTéå¸¸çµæ´»ï¼Œå¹¶å¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚è¿›è¡Œå®šåˆ¶ã€‚</p><p>æ˜“äºåˆ†å‘å’Œå…±äº«ï¼šJWTå¯ä»¥è½»æ¾åœ°é€šè¿‡ç½‘ç»œä¼ è¾“ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å¤šä¸ªæœåŠ¡å’Œå®¢æˆ·ç«¯ä¹‹é—´å…±äº«ï¼Œè¿™ä½¿å¾—å®ƒåœ¨å¾®æœåŠ¡æ¶æ„å’Œåˆ†å¸ƒå¼ç³»ç»Ÿä¸­éå¸¸æœ‰ç”¨ã€‚</p><p>æ ‡å‡†åŒ–å’Œäº’æ“ä½œæ€§ï¼šJWTæ˜¯ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ï¼ˆRFC 7519ï¼‰ï¼Œè¿™æ„å‘³ç€ä¸åŒçš„ç³»ç»Ÿå’Œè¯­è¨€éƒ½å¯ä»¥ä½¿ç”¨ç›¸åŒçš„æ–¹å¼ç”Ÿæˆå’ŒéªŒè¯JWTï¼Œä»è€Œæé«˜äº†ç³»ç»Ÿçš„äº’æ“ä½œæ€§ã€‚</p><p>ç¯å¢ƒ Win10  VS2022  .NET8 </p><h1 id="âœ¨-å»ºç«‹é¡¹ç›®jwttest"><a href="#âœ¨-å»ºç«‹é¡¹ç›®jwttest" class="headerlink" title="âœ¨ å»ºç«‹é¡¹ç›®jwttest"></a>âœ¨ å»ºç«‹é¡¹ç›®jwttest</h1><h2 id="1-åˆ›å»ºTestJwtController"><a href="#1-åˆ›å»ºTestJwtController" class="headerlink" title="1.åˆ›å»ºTestJwtController"></a>1.åˆ›å»ºTestJwtController</h2><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041501.jpg"></p><h2 id="2-ä¸‹è½½JWT"><a href="#2-ä¸‹è½½JWT" class="headerlink" title="2.ä¸‹è½½JWT"></a>2.ä¸‹è½½JWT</h2><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041502.jpg"></p><h2 id="3-å»ºå®ä½“ç±»"><a href="#3-å»ºå®ä½“ç±»" class="headerlink" title="3.å»ºå®ä½“ç±»"></a>3.å»ºå®ä½“ç±»</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> ç”¨æˆ·ä¿¡æ¯ç±»</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">LoginRs</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> ç”¨æˆ·ID</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> UserId &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">   <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">   <span class="comment"><span class="doctag">///</span> ç”¨æˆ·å¯†ç </span></span><br><span class="line">   <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> PasswordMD5 &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> ç”¨æˆ·ç™»å½•ä¿¡æ¯ç±»</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">LoginInfo</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> ç”¨æˆ·ä¿¡æ¯</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> UserId &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> æ£€éªŒæ—¶é—´</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="keyword">public</span> DateTime Expires &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> rsmodel</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">RsModel</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> æ˜¯å¦æˆåŠŸ</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">bool</span> isOk &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> è¿”å›å€¼</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> code &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> è¿”å›æ¶ˆæ¯</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> msg &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> è¿”å›æ•°æ®  </span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">object</span> rsData &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-æ·»åŠ post-login"><a href="#4-æ·»åŠ post-login" class="headerlink" title="4.æ·»åŠ post login"></a>4.æ·»åŠ post login</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// POST api/&lt;ValuesController&gt;</span></span><br><span class="line">[<span class="meta">HttpPost</span>]</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">Login</span>(<span class="params">[FromBody] LoginRs loginRequest</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (loginRequest == <span class="literal">null</span>) <span class="keyword">return</span> JsonConvert.SerializeObject(<span class="keyword">new</span> RsModel() &#123; code = <span class="number">0</span>, isOk = <span class="literal">false</span>, msg = <span class="string">&quot;ç™»å½•ä¿¡æ¯ä¸ºç©ºï¼&quot;</span> &#125;);</span><br><span class="line"> </span><br><span class="line">    <span class="meta">#<span class="keyword">region</span>  åˆ¤æ–­userid pwd</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (loginRequest.UserId != <span class="string">&quot;admin&quot;</span> || loginRequest.PasswordMD5 != <span class="string">&quot;admin&quot;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> JsonConvert.SerializeObject(<span class="keyword">new</span> RsModel() &#123; code = <span class="number">0</span>, isOk = <span class="literal">false</span>, msg = <span class="string">&quot;ç”¨æˆ·åå’Œå¯†ç ä¸æ­£ç¡®ï¼&quot;</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">    LoginInfo Info = <span class="keyword">new</span> LoginInfo()</span><br><span class="line">    &#123;</span><br><span class="line">        UserId = loginRequest.UserId,</span><br><span class="line">        Expires = DateTime.Now.AddDays(<span class="number">1</span>)</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">const</span> <span class="built_in">string</span> secretKey = <span class="string">&quot;myseckey&quot;</span>;<span class="comment">//å£ä»¤åŠ å¯†ç§˜é’¥</span></span><br><span class="line">    <span class="built_in">byte</span>[] key = Encoding.UTF8.GetBytes(secretKey);</span><br><span class="line">    IJwtAlgorithm algorithm = <span class="keyword">new</span> HMACSHA256Algorithm();<span class="comment">//åŠ å¯†æ–¹å¼</span></span><br><span class="line">    IJsonSerializer serializer = <span class="keyword">new</span> JsonNetSerializer();<span class="comment">//åºåˆ—åŒ–Json</span></span><br><span class="line">    IBase64UrlEncoder urlEncoder = <span class="keyword">new</span> JwtBase64UrlEncoder();<span class="comment">//base64åŠ è§£å¯†</span></span><br><span class="line">    IJwtEncoder encoder = <span class="keyword">new</span> JwtEncoder(algorithm, serializer, urlEncoder);<span class="comment">//JWTç¼–ç </span></span><br><span class="line">    <span class="keyword">var</span> token = encoder.Encode(Info, key);<span class="comment">//ç”Ÿæˆä»¤ç‰Œ</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> JsonConvert.SerializeObject(<span class="keyword">new</span> RsModel() &#123; code = <span class="number">1</span>, isOk = <span class="literal">true</span>, rsData = token, msg = <span class="string">&quot;ç™»å½•æˆåŠŸï¼&quot;</span> &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041503.jpg"></p><h2 id="5-ç™»å½•éªŒè¯"><a href="#5-ç™»å½•éªŒè¯" class="headerlink" title="5.ç™»å½•éªŒè¯"></a>5.ç™»å½•éªŒè¯</h2><p>è¿™é‡Œä½¿ç”¨swaggeræ–¹ä¾¿æ£€éªŒ    ğŸ‘‰    .NET MVC API Swaggerå…¥å‘</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041504.jpg"></p><h2 id="6-æµ‹è¯•æ²¡é—®é¢˜ï¼Œå†™ä¸ªJwtHelper"><a href="#6-æµ‹è¯•æ²¡é—®é¢˜ï¼Œå†™ä¸ªJwtHelper" class="headerlink" title="6.æµ‹è¯•æ²¡é—®é¢˜ï¼Œå†™ä¸ªJwtHelper"></a>6.æµ‹è¯•æ²¡é—®é¢˜ï¼Œå†™ä¸ªJwtHelper</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title">JwtHelper</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">readonly</span> <span class="built_in">string</span> JwtKey = <span class="string">&quot;mysecret&quot;</span>;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> è·å–åŠ å¯†è§£å¯†</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> IJwtEncoder <span class="title">GetEncoder</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        IJwtAlgorithm algorithm = <span class="keyword">new</span> HMACSHA256Algorithm();<span class="comment">//åŠ å¯†æ–¹å¼</span></span><br><span class="line">        IJsonSerializer serializer = <span class="keyword">new</span> JsonNetSerializer();<span class="comment">//åºåˆ—åŒ–Json</span></span><br><span class="line">        IBase64UrlEncoder urlEncoder = <span class="keyword">new</span> JwtBase64UrlEncoder();<span class="comment">//base64åŠ è§£å¯†</span></span><br><span class="line">        IJwtEncoder encoder = <span class="keyword">new</span> JwtEncoder(algorithm, serializer, urlEncoder);<span class="comment">//JWTç¼–ç </span></span><br><span class="line">        <span class="keyword">return</span> encoder;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> è·å–è§£å¯†å¯†é’¥</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">static</span> IJwtDecoder <span class="title">GetDecoder</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        IJsonSerializer serializer = <span class="keyword">new</span> JsonNetSerializer();</span><br><span class="line">        IDateTimeProvider provider = <span class="keyword">new</span> UtcDateTimeProvider();</span><br><span class="line">        IJwtValidator validator = <span class="keyword">new</span> JwtValidator(serializer, provider);</span><br><span class="line">        IBase64UrlEncoder urlEncoder = <span class="keyword">new</span> JwtBase64UrlEncoder();</span><br><span class="line">        IJwtAlgorithm algorithm = <span class="keyword">new</span> HMACSHA256Algorithm();</span><br><span class="line">        IJwtDecoder decoder = <span class="keyword">new</span> JwtDecoder(serializer, validator, urlEncoder, algorithm);</span><br><span class="line">        <span class="keyword">return</span> decoder;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> åŠ å¯†</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">string</span> <span class="title">Encode</span>(<span class="params"><span class="built_in">object</span> payload</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> encoder = GetEncoder();</span><br><span class="line">        <span class="keyword">var</span> token = encoder.Encode(payload, JwtKey);</span><br><span class="line">        <span class="keyword">return</span> token;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> è§£å¯†</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> T <span class="title">Decode</span>&lt;<span class="title">T</span>&gt;(<span class="params"><span class="built_in">string</span> token</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> decoder = GetDecoder();</span><br><span class="line">        <span class="keyword">var</span> data = decoder.Decode(token, JwtKey);</span><br><span class="line">        <span class="keyword">var</span> res = JsonConvert.DeserializeObject&lt;T&gt;(data);</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> è§£å¯†ï¼Œåªè¿”å›Jsonæ–‡æœ¬</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;token&quot;&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">string</span> <span class="title">Decode</span>(<span class="params"><span class="built_in">string</span> token</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> decoder = GetDecoder();</span><br><span class="line">        <span class="keyword">var</span> data = decoder.Decode(token, JwtKey);</span><br><span class="line">        <span class="keyword">return</span> data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041505.jpg"><br>æŠŠä¸­é—´çš„åŠ å¯†ç®—æ³•æ›¿æ¢æˆhelperçš„Encode</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> token = JwtHelper.Encode(Info);</span><br></pre></td></tr></table></figure><h2 id="7-æ·»åŠ tokenåŠ å¯†ç±»"><a href="#7-æ·»åŠ tokenåŠ å¯†ç±»" class="headerlink" title="7.æ·»åŠ tokenåŠ å¯†ç±»"></a>7.æ·»åŠ tokenåŠ å¯†ç±»</h2><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041506.jpg"></p><p>è°ƒç”¨Decodeæ–¹æ³• è§£å¯†token</p><h2 id="8-æµ‹è¯•JWT"><a href="#8-æµ‹è¯•JWT" class="headerlink" title="8.æµ‹è¯•JWT"></a>8.æµ‹è¯•JWT</h2><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041507.jpg"></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&quot;isOk&quot;</span>:<span class="literal">true</span>,<span class="string">&quot;code&quot;</span>:<span class="number">1</span>,<span class="string">&quot;msg&quot;</span>:<span class="string">&quot;ç™»å½•æˆåŠŸï¼&quot;</span>,<span class="string">&quot;rsData&quot;</span>:<span class="string">&quot;eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJVc2VySWQiOiJhZG1pbiIsIkV4cGlyZXMiOiIyMDI0LTA0LTEwVDAxOjUxOjUwLjk5NDgxNzQrMDA6MDAifQ.eYJovquJFezVhfdLp-Hro2vnMoQsUwgXLkYcZSYEy7U&quot;</span>&#125;</span><br></pre></td></tr></table></figure><p>æµ‹è¯•è§£å¯†</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041508.jpg"></p><p>è§£å¯†æˆåŠŸ</p><h1 id="â­ï¸JwtBearer"><a href="#â­ï¸JwtBearer" class="headerlink" title="â­ï¸JwtBearer"></a>â­ï¸JwtBearer</h1><h2 id="9ã€æ·»åŠ NuGetåŒ…Microsoft-AspNetCore-Authentication-JwtBearer"><a href="#9ã€æ·»åŠ NuGetåŒ…Microsoft-AspNetCore-Authentication-JwtBearer" class="headerlink" title="9ã€æ·»åŠ NuGetåŒ…Microsoft.AspNetCore.Authentication.JwtBearer"></a>9ã€æ·»åŠ NuGetåŒ…Microsoft.AspNetCore.Authentication.JwtBearer</h2><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041509.jpg"></p><h2 id="10ã€åœ¨appsettings-jsonä¸­æ·»åŠ JWTé…ç½®èŠ‚ç‚¹"><a href="#10ã€åœ¨appsettings-jsonä¸­æ·»åŠ JWTé…ç½®èŠ‚ç‚¹" class="headerlink" title="10ã€åœ¨appsettings.jsonä¸­æ·»åŠ JWTé…ç½®èŠ‚ç‚¹"></a>10ã€åœ¨appsettings.jsonä¸­æ·»åŠ JWTé…ç½®èŠ‚ç‚¹</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;JWT&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;SecKey&quot;</span>: <span class="string">&quot;im6666666!#@$%@%^^&amp;*(~Czmjklneafguvioszb%yuv&amp;*6WVDf5dw#5dfw6f5w6faW%FW^f5wa65f^AWf56&quot;</span>, <span class="comment">//å¯†é’¥</span></span><br><span class="line">  <span class="string">&quot;Issuer&quot;</span>: <span class="string">&quot;im666&quot;</span>, <span class="comment">//å‘è¡Œè€…</span></span><br><span class="line">  <span class="string">&quot;ExpireSeconds&quot;</span>: <span class="number">7200</span> <span class="comment">//è¿‡æœŸæ—¶é—´ 2h</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h2 id="11-æ·»åŠ jwtç±»"><a href="#11-æ·»åŠ jwtç±»" class="headerlink" title="11.æ·»åŠ jwtç±»"></a>11.æ·»åŠ jwtç±»</h2> <figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br></pre></td><td class="code"><pre><span class="line">    <span class="keyword">using</span> Microsoft.IdentityModel.Tokens;</span><br><span class="line">    <span class="keyword">using</span> System.Diagnostics;</span><br><span class="line">    <span class="keyword">using</span> System.IdentityModel.Tokens.Jwt;</span><br><span class="line">    <span class="keyword">using</span> System.Security.Claims;</span><br><span class="line">    <span class="keyword">using</span> System.Text;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">namespace</span> <span class="title">webapijwttest.Models</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> æˆæƒJWTç±»</span></span><br><span class="line">    <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">JwtHelper2</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">private</span> <span class="keyword">readonly</span> IConfiguration _configuration;</span><br><span class="line">            <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">            <span class="comment"><span class="doctag">///</span> Tokené…ç½®</span></span><br><span class="line">            <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">            <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;configuration&quot;&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="title">JwtHelper2</span>(<span class="params">IConfiguration configuration</span>)</span></span><br><span class="line">            &#123;</span><br><span class="line">                _configuration = configuration;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">            <span class="comment"><span class="doctag">///</span> åˆ›å»ºToken è¿™é‡Œé¢å¯ä»¥ä¿å­˜è‡ªå·±æƒ³è¦çš„ä¿¡æ¯</span></span><br><span class="line">            <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">            <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;username&quot;&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">            <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;mobile&quot;&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">            <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">CreateToken</span>(<span class="params"><span class="built_in">string</span> username, <span class="built_in">string</span> mobile</span>)</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">try</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">// 1. å®šä¹‰éœ€è¦ä½¿ç”¨åˆ°çš„Claims</span></span><br><span class="line">                    <span class="keyword">var</span> claims = <span class="keyword">new</span>[]</span><br><span class="line">                    &#123;</span><br><span class="line">                    <span class="keyword">new</span> Claim(<span class="string">&quot;username&quot;</span>, username),</span><br><span class="line">                    <span class="keyword">new</span> Claim(<span class="string">&quot;mobile&quot;</span>, mobile),</span><br><span class="line">                    <span class="comment">/* å¯ä»¥ä¿å­˜è‡ªå·±æƒ³è¦ä¿¡æ¯ï¼Œä¼ å‚è¿›æ¥å³å¯</span></span><br><span class="line"><span class="comment">                    new Claim(&quot;sex&quot;, &quot;sex&quot;),</span></span><br><span class="line"><span class="comment">                    new Claim(&quot;limit&quot;, &quot;limit&quot;),</span></span><br><span class="line"><span class="comment">                    new Claim(&quot;head_url&quot;, &quot;xxxxx&quot;)</span></span><br><span class="line"><span class="comment">                    */</span></span><br><span class="line">                &#125;;</span><br><span class="line">                    <span class="comment">// 2. ä» appsettings.json ä¸­è¯»å–SecretKey</span></span><br><span class="line">                    <span class="keyword">var</span> secretKey = <span class="keyword">new</span> SymmetricSecurityKey(Encoding.UTF8.GetBytes(_configuration[<span class="string">&quot;Jwt:SecKey&quot;</span>]));</span><br><span class="line">                    <span class="comment">// 3. é€‰æ‹©åŠ å¯†ç®—æ³•</span></span><br><span class="line">                    <span class="keyword">var</span> algorithm = SecurityAlgorithms.HmacSha256;</span><br><span class="line">                    <span class="comment">// 4. ç”ŸæˆCredentials</span></span><br><span class="line">                    <span class="keyword">var</span> signingCredentials = <span class="keyword">new</span> SigningCredentials(secretKey, algorithm);</span><br><span class="line">                    <span class="comment">// 5. æ ¹æ®ä»¥ä¸Šï¼Œç”Ÿæˆtoken</span></span><br><span class="line">                    <span class="keyword">var</span> jwtSecurityToken = <span class="keyword">new</span> JwtSecurityToken(</span><br><span class="line">                        _configuration[<span class="string">&quot;Jwt:Issuer&quot;</span>],    <span class="comment">//Issuer</span></span><br><span class="line">                        _configuration[<span class="string">&quot;Jwt:ExpireSeconds&quot;</span>],  <span class="comment">//ExpireSeconds</span></span><br><span class="line">                        claims,                          <span class="comment">//Claims,</span></span><br><span class="line">                        DateTime.Now,                    <span class="comment">//notBefore</span></span><br><span class="line">                        DateTime.Now.AddSeconds(<span class="number">30</span>),     <span class="comment">//expires</span></span><br><span class="line">                        signingCredentials               <span class="comment">//Credentials</span></span><br><span class="line">                    );</span><br><span class="line">                    <span class="comment">// 6. å°†tokenå˜ä¸ºstring</span></span><br><span class="line">                    <span class="keyword">var</span> token = <span class="keyword">new</span> JwtSecurityTokenHandler().WriteToken(jwtSecurityToken);</span><br><span class="line">                    <span class="keyword">return</span> token;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">catch</span> (Exception)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">throw</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">            <span class="comment"><span class="doctag">///</span> è·å–ä¿¡æ¯</span></span><br><span class="line">            <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">            <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;jwt&quot;&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">            <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">string</span> <span class="title">ReaderToken</span>(<span class="params"><span class="built_in">string</span> jwt</span>)</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">var</span> str = <span class="built_in">string</span>.Empty;</span><br><span class="line">                <span class="keyword">try</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//è·å–Tokençš„ä¸‰ç§æ–¹å¼</span></span><br><span class="line">                    <span class="comment">//ç¬¬ä¸€ç§ç›´æ¥ç”¨JwtSecurityTokenHandleræä¾›çš„readæ–¹æ³•</span></span><br><span class="line">                    <span class="keyword">var</span> jwtHander = <span class="keyword">new</span> JwtSecurityTokenHandler();</span><br><span class="line">                    JwtSecurityToken jwtSecurityToken = jwtHander.ReadJwtToken(jwt);</span><br><span class="line">                    str = jwtSecurityToken.ToString();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">                &#123;</span><br><span class="line">                    Debug.WriteLine(ex.Message);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> str;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">            <span class="comment"><span class="doctag">///</span> è§£å¯†jwt</span></span><br><span class="line">            <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">            <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;jwt&quot;&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">            <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">JwtDecrypt</span>(<span class="params"><span class="built_in">string</span> jwt</span>)</span></span><br><span class="line">            &#123;</span><br><span class="line">                StringBuilder sb = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">                <span class="keyword">try</span></span><br><span class="line">                &#123;</span><br><span class="line">                    JwtSecurityTokenHandler tokenHandler = <span class="keyword">new</span>();</span><br><span class="line">                    TokenValidationParameters valParam = <span class="keyword">new</span>();</span><br><span class="line">                    <span class="keyword">var</span> securityKey = <span class="keyword">new</span> SymmetricSecurityKey(Encoding.UTF8.GetBytes(_configuration[<span class="string">&quot;Jwt:SecKey&quot;</span>]));</span><br><span class="line">                    valParam.IssuerSigningKey = securityKey;</span><br><span class="line">                    valParam.ValidateIssuer = <span class="literal">false</span>;</span><br><span class="line">                    valParam.ValidateAudience = <span class="literal">false</span>;</span><br><span class="line">                    <span class="comment">//è§£å¯†</span></span><br><span class="line">                    ClaimsPrincipal claimsPrincipal = tokenHandler.ValidateToken(jwt,</span><br><span class="line">                            valParam, <span class="keyword">out</span> SecurityToken secToken);</span><br><span class="line">                    <span class="keyword">foreach</span> (<span class="keyword">var</span> claim <span class="keyword">in</span> claimsPrincipal.Claims)</span><br><span class="line">                    &#123;</span><br><span class="line">                        sb.Append(<span class="string">$&quot;<span class="subst">&#123;claim.Type&#125;</span>=<span class="subst">&#123;claim.Value&#125;</span>&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">catch</span> (Exception ex)</span><br><span class="line">                &#123;</span><br><span class="line">                    Debug.WriteLine(ex.Message);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> sb.ToString();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="12-Program-csæ³¨å†ŒJWTæœåŠ¡"><a href="#12-Program-csæ³¨å†ŒJWTæœåŠ¡" class="headerlink" title="12.Program.csæ³¨å†ŒJWTæœåŠ¡"></a>12.Program.csæ³¨å†ŒJWTæœåŠ¡</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">region</span> JWTæœåŠ¡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ³¨å†ŒJWTæœåŠ¡</span></span><br><span class="line">builder.Services.AddSingleton(<span class="keyword">new</span> JwtHelper2(builder.Configuration));</span><br><span class="line">builder.Services.AddAuthentication(JwtBearerDefaults.AuthenticationScheme).AddJwtBearer(options =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    options.TokenValidationParameters = <span class="keyword">new</span> TokenValidationParameters()</span><br><span class="line">    &#123;</span><br><span class="line">        ValidateIssuer = <span class="literal">true</span>, <span class="comment">//æ˜¯å¦éªŒè¯Issuer</span></span><br><span class="line">        ValidIssuer = builder.Configuration[<span class="string">&quot;Jwt:Issuer&quot;</span>], <span class="comment">//å‘è¡ŒäººIssuer</span></span><br><span class="line">        ValidateAudience = <span class="literal">false</span>, <span class="comment">//æ˜¯å¦éªŒè¯Audience      </span></span><br><span class="line">        ValidateIssuerSigningKey = <span class="literal">true</span>, <span class="comment">//æ˜¯å¦éªŒè¯SecurityKey</span></span><br><span class="line">        IssuerSigningKey = <span class="keyword">new</span> SymmetricSecurityKey(Encoding.UTF8.GetBytes(builder.Configuration[<span class="string">&quot;Jwt:SecKey&quot;</span>])), <span class="comment">//SecurityKey</span></span><br><span class="line">        ValidateLifetime = <span class="literal">true</span>, <span class="comment">//æ˜¯å¦éªŒè¯å¤±æ•ˆæ—¶é—´</span></span><br><span class="line">        ClockSkew = TimeSpan.FromSeconds(<span class="number">30</span>), <span class="comment">//è¿‡æœŸæ—¶é—´å®¹é”™å€¼ï¼Œè§£å†³æœåŠ¡å™¨ç«¯æ—¶é—´ä¸åŒæ­¥é—®é¢˜ï¼ˆç§’ï¼‰</span></span><br><span class="line">        RequireExpirationTime = <span class="literal">true</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line">);</span><br><span class="line"><span class="meta">#<span class="keyword">endregion</span></span></span><br></pre></td></tr></table></figure><p>æ·»åŠ swagger authorization</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">builder.Services.AddSwaggerGen(c =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    c.SwaggerDoc(<span class="string">&quot;v1&quot;</span>, <span class="keyword">new</span> OpenApiInfo &#123; Title = <span class="string">&quot;Web API&quot;</span>, Version = <span class="string">&quot;v1&quot;</span> &#125;);</span><br><span class="line">    <span class="comment">//å¼€å¯æ³¨é‡Š</span></span><br><span class="line">    <span class="keyword">var</span> xmlFile = <span class="string">$&quot;<span class="subst">&#123;Assembly.GetEntryAssembly().GetName().Name&#125;</span>.xml&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> xmlPath = Path.Combine(AppContext.BaseDirectory, xmlFile);<span class="comment">//éœ€è¦ ç”Ÿæˆ ç›®å½•ç”ŸæˆXML</span></span><br><span class="line">    c.IncludeXmlComments(xmlPath, <span class="literal">true</span>);</span><br><span class="line">    <span class="comment">// é…ç½® JWT Bearer æˆæƒ</span></span><br><span class="line">    c.AddSecurityDefinition(<span class="string">&quot;Bearer&quot;</span>, <span class="keyword">new</span> OpenApiSecurityScheme</span><br><span class="line">    &#123;</span><br><span class="line">        Description = <span class="string">&quot;JWT Authorization header using the Bearer scheme&quot;</span>,</span><br><span class="line">        Name = <span class="string">&quot;Authorization&quot;</span>,</span><br><span class="line">        In = ParameterLocation.Header,</span><br><span class="line">        Type = SecuritySchemeType.Http,</span><br><span class="line">        Scheme = <span class="string">&quot;bearer&quot;</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">var</span> securityScheme = <span class="keyword">new</span> OpenApiSecurityScheme</span><br><span class="line">    &#123;</span><br><span class="line">        Reference = <span class="keyword">new</span> OpenApiReference &#123; Type = ReferenceType.SecurityScheme, Id = <span class="string">&quot;Bearer&quot;</span> &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">var</span> securityRequirement = <span class="keyword">new</span> OpenApiSecurityRequirement &#123; &#123; securityScheme, <span class="keyword">new</span> <span class="built_in">string</span>[] &#123; &#125; &#125; &#125;;</span><br><span class="line">    c.AddSecurityRequirement(securityRequirement);</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">&#125;);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> app = builder.Build();</span><br><span class="line"> </span><br><span class="line"><span class="comment">//å¯ç”¨éªŒè¯ä¸­é—´ä»¶</span></span><br><span class="line">app.UseAuthentication();</span><br><span class="line">app.UseAuthorization();</span><br></pre></td></tr></table></figure><h2 id="13-æ·»åŠ jwtæµ‹è¯•api"><a href="#13-æ·»åŠ jwtæµ‹è¯•api" class="headerlink" title="13.æ·»åŠ jwtæµ‹è¯•api"></a>13.æ·»åŠ jwtæµ‹è¯•api</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> Microsoft.AspNetCore.Authorization;</span><br><span class="line"><span class="keyword">using</span> Microsoft.AspNetCore.Identity.Data;</span><br><span class="line"><span class="keyword">using</span> Microsoft.AspNetCore.Mvc;</span><br><span class="line"><span class="keyword">using</span> webapijwttest.Models;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">webapijwttest.Controllers</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">Route(<span class="string">&quot;api/[controller]/[action]&quot;</span>)</span>]</span><br><span class="line">    [<span class="meta">ApiController</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Jwt2Controller</span> : <span class="title">ControllerBase</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">readonly</span> JwtHelper2 _jwt;</span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> åˆå§‹åŒ–</span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;jwtHelper&quot;&gt;</span><span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Jwt2Controller</span>(<span class="params">JwtHelper2 jwtHelper</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            _jwt = jwtHelper;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> è·å–Token</span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">        [<span class="meta">HttpPost</span>]</span><br><span class="line">        <span class="function"><span class="keyword">public</span> IActionResult <span class="title">GetToken</span>(<span class="params">LoginRs user</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//å‚æ•°éªŒè¯ç­‰ç­‰....</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">string</span>.IsNullOrEmpty(user.UserId))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> Ok(<span class="string">&quot;å‚æ•°å¼‚å¸¸ï¼&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//è¿™é‡Œå¯ä»¥è¿æ¥mysqlæ•°æ®åº“åšè´¦å·å¯†ç éªŒè¯</span></span><br><span class="line">            <span class="comment">//è¿™é‡Œå¯ä»¥åšRedisç¼“å­˜éªŒè¯ç­‰ç­‰</span></span><br><span class="line">            <span class="comment">//è¿™é‡Œè·å–Tokenï¼Œå½“ç„¶ï¼Œè¿™é‡Œä¹Ÿå¯ä»¥é€‰æ‹©ä¼ ç»“æ„ä½“è¿‡å»</span></span><br><span class="line">            <span class="keyword">var</span> token = _jwt.CreateToken(user.UserId, user.PasswordMD5);</span><br><span class="line">            <span class="comment">//è§£å¯†åçš„Token</span></span><br><span class="line">            <span class="keyword">var</span> PWToken = _jwt.JwtDecrypt(token);</span><br><span class="line">            <span class="keyword">return</span> Ok(token + <span class="string">&quot;è§£å¯†åï¼š&quot;</span> + PWToken);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> è·å–è‡ªå·±çš„è¯¦ç»†ä¿¡æ¯ï¼Œå…¶ä¸­ [Authorize] å°±è¡¨ç¤ºè¦å¸¦Tokenæ‰è¡Œ</span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">        [<span class="meta">HttpPost</span>]</span><br><span class="line">        [<span class="meta">Authorize</span>]</span><br><span class="line">        <span class="function"><span class="keyword">public</span> IActionResult <span class="title">GetSelfInfo</span>()</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//æ‰§è¡Œåˆ°è¿™é‡Œï¼Œå°±è¡¨ç¤ºå·²ç»éªŒè¯æˆæƒé€šè¿‡äº†</span></span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">             * è¿™é‡Œè¿”å›ä¸ªäººä¿¡æ¯æœ‰ä¸¤ç§æ–¹å¼</span></span><br><span class="line"><span class="comment">             * ç¬¬ä¸€ç§ï¼šä»Headerä¸­çš„Tokenä¿¡æ¯åå‘è§£æå‡ºç”¨æˆ·è´¦å·ï¼Œå†ä»æ•°æ®åº“ä¸­æŸ¥æ‰¾è¿”å›</span></span><br><span class="line"><span class="comment">             * ç¬¬äºŒç§ï¼šä»Headerä¸­çš„Tokenä¿¡æ¯åå‘è§£æå‡ºç”¨æˆ·è´¦å·ä¿¡æ¯ç›´æ¥è¿”å›ï¼Œå½“ç„¶ï¼Œåœ¨å‰é¢åˆ›å»º        Tokenæ—¶ï¼Œè¦ä¿å­˜è¿›ä½¿ç”¨åˆ°çš„Claimsä¸­ã€‚</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="keyword">return</span> Ok(<span class="string">&quot;æˆæƒé€šè¿‡äº†ï¼&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è°ƒç”¨</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041510.jpg"></p><p>æ£€æµ‹æ§åˆ¶å™¨</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> Microsoft.AspNetCore.Authorization;</span><br><span class="line"><span class="keyword">using</span> Microsoft.AspNetCore.Mvc;</span><br><span class="line"><span class="keyword">using</span> Newtonsoft.Json;</span><br><span class="line"><span class="keyword">using</span> webapijwttest.Models;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// For more information on enabling Web API for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">namespace</span> <span class="title">webapijwttest.Controllers</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">Route(<span class="string">&quot;api/[controller]&quot;</span>)</span>]</span><br><span class="line">    [<span class="meta">ApiController</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">AuthController</span> : <span class="title">ControllerBase</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">private</span> ILogger&lt;AuthController&gt; _logger = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">private</span> JwtHelper2 _iJWTService = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">readonly</span> IConfiguration _configuration;</span><br><span class="line"> </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">AuthController</span>(<span class="params">ILogger&lt;AuthController&gt; logger, JwtHelper2 jWTService, IConfiguration configuration</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">this</span>._logger = logger;</span><br><span class="line">            _iJWTService = jWTService;</span><br><span class="line">            _configuration = configuration;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        [<span class="meta">Route(<span class="string">&quot;Get&quot;</span>)</span>]</span><br><span class="line">        [<span class="meta">HttpGet</span>]</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">IEnumerable</span>&lt;<span class="title">int</span>&gt; <span class="title">Get</span>()</span></span><br><span class="line">        &#123;<span class="comment">//æœªåŠ æˆæƒè®¤è¯</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> List&lt;<span class="built_in">int</span>&gt;() &#123; <span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span> &#125;;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        [<span class="meta">Route(<span class="string">&quot;GetData&quot;</span>)</span>]</span><br><span class="line">        [<span class="meta">HttpGet</span>]</span><br><span class="line">        [<span class="meta">Authorize</span>]</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">List</span>&lt;<span class="title">object</span>&gt; <span class="title">GetData</span>()</span></span><br><span class="line">        &#123;<span class="comment">//æ·»åŠ äº†æˆæƒè®¤è¯ï¼Œéœ€è¦ä½¿ç”¨token</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> List&lt;<span class="built_in">object</span>&gt;() &#123; <span class="keyword">new</span> &#123; userName = <span class="string">&quot;123&quot;</span>, remark = <span class="string">&quot;1234&quot;</span> &#125; &#125;;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        [<span class="meta">Route(<span class="string">&quot;Login&quot;</span>)</span>]</span><br><span class="line">        [<span class="meta">HttpGet</span>]</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">Login</span>(<span class="params"><span class="built_in">string</span> name, <span class="built_in">string</span> password</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (!<span class="built_in">string</span>.IsNullOrEmpty(name) &amp;&amp; !<span class="built_in">string</span>.IsNullOrEmpty(password))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">string</span> token = <span class="keyword">this</span>._iJWTService.CreateToken(name,password);</span><br><span class="line">                <span class="keyword">return</span> JsonConvert.SerializeObject(<span class="keyword">new</span> &#123; result = <span class="literal">true</span>, token &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span> JsonConvert.SerializeObject(<span class="keyword">new</span> &#123; result = <span class="literal">false</span>, token = <span class="string">&quot;&quot;</span> &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è°ƒç”¨<br>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041511.jpg"></p><p>æŠŠtokenæ”¾è¿› </p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041513.jpg"></p><p>æµ‹è¯•GetData<br>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041514.jpg"></p><p>å½“è¶…è¿‡æ—¶é—´è°ƒç”¨åˆ™GetDataå¤±è´¥<br>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041515.jpg"></p><p>ENDğŸŸğŸŸğŸŸ</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> .NET </tag>
            
            <tag> JWT </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>.NET spider</title>
      <link href="/2024/04/18/NET-Spider/"/>
      <url>/2024/04/18/NET-Spider/</url>
      
        <content type="html"><![CDATA[<p>å‰è¨€<br>çˆ¬è™«å¯ä»¥ç”¨äºå¤–æ±‡ï¼ŒæœŸè´§ï¼ŒåŸºé‡‘ï¼Œè´§å¸ï¼Œæ¯”åˆ†ï¼Œç”µå•†ï¼Œæ–‡ç« ç­‰ä¿¡æ¯çš„é‡‡é›†ã€‚é€šè¿‡æ•°æ®åˆ†æï¼Œç«å“åˆ†æï¼Œä¸ºå•†ä¸šå†³ç­–æä¾›æ•°æ®æ”¯æŒã€‚</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041710.jpg"><br>é‡‘ä»·æš´æ¶¨ï¼ŒæŠ“å–ä¸‹ä»Šæ—¥çš„é‡‘ä»·ã€‚</p><h1 id="ğŸ’¡ä½¿ç”¨HttpClientçˆ¬å–æ•°æ®"><a href="#ğŸ’¡ä½¿ç”¨HttpClientçˆ¬å–æ•°æ®" class="headerlink" title="ğŸ’¡ä½¿ç”¨HttpClientçˆ¬å–æ•°æ®"></a>ğŸ’¡ä½¿ç”¨HttpClientçˆ¬å–æ•°æ®</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// åˆ›å»ºHttpClientå®ä¾‹</span></span><br><span class="line">    <span class="keyword">using</span> (<span class="keyword">var</span> httpClient = <span class="keyword">new</span> HttpClient())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//æ¨¡æ‹ŸUser-Agent</span></span><br><span class="line">        httpClient.DefaultRequestHeaders.Add(<span class="string">&quot;User-Agent&quot;</span>, GetUserAgent());</span><br><span class="line">        <span class="comment">// å‘é€GETè¯·æ±‚å¹¶è·å–å“åº” xxx.comæ˜¯æŸç½‘ç«™çš„é¡µé¢~ï¼ˆä¿æŠ¤ï¼‰</span></span><br><span class="line">        <span class="keyword">var</span> response = <span class="keyword">await</span> httpClient.GetAsync(<span class="string">&quot;https://xxx.com&quot;</span>);</span><br><span class="line">        response.EnsureSuccessStatusCode();</span><br><span class="line">        <span class="keyword">var</span> htmlContent = <span class="keyword">await</span> response.Content.ReadAsStringAsync();</span><br><span class="line"> </span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">catch</span> (HttpRequestException ex)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// å¤„ç†è¯·æ±‚å¼‚å¸¸</span></span><br><span class="line">    ViewBag.Error = <span class="string">&quot;Failed to retrieve price data: &quot;</span> + ex.Message;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ğŸš€æ¨¡æ‹ŸUser-Agent"><a href="#ğŸš€æ¨¡æ‹ŸUser-Agent" class="headerlink" title="ğŸš€æ¨¡æ‹ŸUser-Agent"></a>ğŸš€æ¨¡æ‹ŸUser-Agent</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç”Ÿæˆéšæœº User-Agent</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="built_in">string</span> <span class="title">GetUserAgent</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">string</span>[] userAgents = <span class="keyword">new</span> <span class="built_in">string</span>[]</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.99 Safari/537.36&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.190 Safari/537.36&quot;</span>,</span><br><span class="line">        <span class="comment">// </span></span><br><span class="line">    &#125;;</span><br><span class="line"> </span><br><span class="line">    Random random = <span class="keyword">new</span> Random();</span><br><span class="line">    <span class="built_in">int</span> index = random.Next(userAgents.Length);</span><br><span class="line">    <span class="keyword">return</span> userAgents[index];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ğŸ¤µä½¿ç”¨HTMLè§£æåº“"><a href="#ğŸ¤µä½¿ç”¨HTMLè§£æåº“" class="headerlink" title="ğŸ¤µä½¿ç”¨HTMLè§£æåº“"></a>ğŸ¤µä½¿ç”¨HTMLè§£æåº“</h1><p>ï¼ˆHtmlAgilityPackï¼‰æå–ä»·æ ¼</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041711.jpg"></p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨HtmlAgilityPackè§£æHTML</span></span><br><span class="line">      <span class="keyword">var</span> htmlDocument = <span class="keyword">new</span> HtmlDocument();</span><br><span class="line">      htmlDocument.LoadHtml(htmlContent);</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// ä½¿ç”¨XPathè¡¨è¾¾å¼é€‰æ‹©æŒ‡å®šçš„&lt;tr&gt;å…ƒç´ </span></span><br><span class="line">      <span class="keyword">var</span> trElement = htmlDocument.DocumentNode.SelectSingleNode(<span class="string">&quot;//tr[contains(@class, &#x27;border_ea&#x27;) and contains(@class, &#x27;noTop_border&#x27;)]&quot;</span>);</span><br><span class="line"> </span><br><span class="line">      <span class="keyword">if</span> (trElement != <span class="literal">null</span>)</span><br><span class="line">      &#123;</span><br><span class="line">          <span class="comment">// è·å–åŒ…å«ä»·æ ¼çš„&lt;td&gt;å…ƒç´ </span></span><br><span class="line">          <span class="keyword">var</span> priceCell = trElement.SelectSingleNode(<span class="string">&quot;.//td[@align=&#x27;center&#x27;][2]&quot;</span>);</span><br><span class="line"> </span><br><span class="line">          <span class="keyword">if</span> (priceCell != <span class="literal">null</span>)</span><br><span class="line">          &#123;</span><br><span class="line">              <span class="comment">// æå–ä»·æ ¼</span></span><br><span class="line">              <span class="built_in">string</span> price = priceCell.InnerText.Trim();</span><br><span class="line"> </span><br><span class="line">              <span class="comment">// å°†ä»·æ ¼ä¼ é€’ç»™è§†å›¾</span></span><br><span class="line">              ViewBag.Price = price;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">else</span></span><br><span class="line">          &#123;</span><br><span class="line">              ViewBag.Error = <span class="string">&quot;Price cell not found in table row.&quot;</span>;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">      &#123;</span><br><span class="line">          ViewBag.Error = <span class="string">&quot;Table row not found.&quot;</span>;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥ç”¨æ­£åˆ™è¡¨è¾¾å¼æå–</p><h1 id="ğŸ‘Œå‰ç«¯Priceæ˜¾ç¤º"><a href="#ğŸ‘Œå‰ç«¯Priceæ˜¾ç¤º" class="headerlink" title="ğŸ‘Œå‰ç«¯Priceæ˜¾ç¤º"></a>ğŸ‘Œå‰ç«¯Priceæ˜¾ç¤º</h1><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Au99.99 Price: @ViewBag.Price<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>@ViewBag.Error<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="ğŸŒ±è¿è¡Œå®ä¾‹-è·å–é‡‘ä»·Au"><a href="#ğŸŒ±è¿è¡Œå®ä¾‹-è·å–é‡‘ä»·Au" class="headerlink" title="ğŸŒ±è¿è¡Œå®ä¾‹ è·å–é‡‘ä»·Au"></a>ğŸŒ±è¿è¡Œå®ä¾‹ è·å–é‡‘ä»·Au</h1><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041712.jpg"><br>ä¹Ÿå¯ä»¥é€šè¿‡ä¿®æ”¹è§„åˆ™å–å®æ—¶Ptçš„ä»·æ ¼</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä½¿ç”¨XPathè¡¨è¾¾å¼é€‰æ‹©æŒ‡å®šçš„&lt;tr&gt;å…ƒç´ </span></span><br><span class="line"><span class="keyword">var</span> trElements = htmlDocument.DocumentNode.SelectNodes(<span class="string">&quot;//tr[contains(@class, &#x27;border_ea&#x27;) and contains(@class, &#x27;noTop_border &#x27;)]&quot;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> (trElements != <span class="literal">null</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">foreach</span> (<span class="keyword">var</span> trElement <span class="keyword">in</span> trElements)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// è·å–åŒ…å«äº§å“åç§°å’Œä»·æ ¼çš„&lt;td&gt;å…ƒç´ </span></span><br><span class="line">        <span class="keyword">var</span> tdElements = trElement.SelectNodes(<span class="string">&quot;./td&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (tdElements != <span class="literal">null</span> &amp;&amp; tdElements.Count &gt;= <span class="number">5</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// è·å–äº§å“åç§°ã€æœ€æ–°ä»·ã€æœ€é«˜ä»·ã€æœ€ä½ä»·å’Œä»Šå¼€ç›˜ä»·æ ¼</span></span><br><span class="line">            <span class="built_in">string</span> productName = tdElements[<span class="number">0</span>].InnerText.Trim();</span><br><span class="line">            <span class="built_in">string</span> latestPrice = tdElements[<span class="number">1</span>].InnerText.Trim();</span><br><span class="line">            <span class="built_in">string</span> highestPrice = tdElements[<span class="number">2</span>].InnerText.Trim();</span><br><span class="line">            <span class="built_in">string</span> lowestPrice = tdElements[<span class="number">3</span>].InnerText.Trim();</span><br><span class="line">            <span class="built_in">string</span> openingPrice = tdElements[<span class="number">4</span>].InnerText.Trim();</span><br><span class="line"> </span><br><span class="line">            <span class="comment">// æ£€æŸ¥äº§å“åç§°æ˜¯å¦ä¸ºAu99.99æˆ–Pt99.95</span></span><br><span class="line">            <span class="keyword">if</span> (productName == <span class="string">&quot;Au99.99&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// å°†Au99.99ä»·æ ¼ä¿¡æ¯ä¼ é€’ç»™è§†å›¾</span></span><br><span class="line">                ViewBag.AuLatestPrice = latestPrice;</span><br><span class="line">                ViewBag.AuHighestPrice = highestPrice;</span><br><span class="line">                ViewBag.AuLowestPrice = lowestPrice;</span><br><span class="line">                ViewBag.AuOpeningPrice = openingPrice;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (productName == <span class="string">&quot;Pt99.95&quot;</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// å°†Pt99.95ä»·æ ¼ä¿¡æ¯ä¼ é€’ç»™è§†å›¾</span></span><br><span class="line">                ViewBag.PtLatestPrice = latestPrice;</span><br><span class="line">                ViewBag.PtHighestPrice = highestPrice;</span><br><span class="line">                ViewBag.PtLowestPrice = lowestPrice;</span><br><span class="line">                ViewBag.PtOpeningPrice = openingPrice;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹ï¼š</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041713.jpg"></p><h1 id="ğŸ§¾ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è§£æ"><a href="#ğŸ§¾ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è§£æ" class="headerlink" title="ğŸ§¾ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è§£æ"></a>ğŸ§¾ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è§£æ</h1><p>é€šè¿‡httpClientè¯·æ±‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">async</span> Task&lt;ActionResult&gt; <span class="title">Index</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// è·å–å½“å‰æ—¶é—´çš„æ—¶é—´æˆ³</span></span><br><span class="line">    <span class="built_in">long</span> timestamp = DateTimeOffset.Now.ToUnixTimeMilliseconds();</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// æ„å»ºURL</span></span><br><span class="line">    <span class="built_in">string</span> url = <span class="string">$&quot;http://www.xxx.cn/xx.js?t=<span class="subst">&#123;timestamp&#125;</span>&quot;</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// åˆ›å»ºHttpClientå®ä¾‹</span></span><br><span class="line">    <span class="keyword">using</span> (<span class="keyword">var</span> httpClient = <span class="keyword">new</span> HttpClient())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// è®¾ç½® User-Agent</span></span><br><span class="line">        httpClient.DefaultRequestHeaders.Add(<span class="string">&quot;User-Agent&quot;</span>, GetUserAgent());</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">try</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// å‘é€GETè¯·æ±‚</span></span><br><span class="line">            <span class="keyword">var</span> response = <span class="keyword">await</span> httpClient.GetAsync(url);</span><br><span class="line">            response.EnsureSuccessStatusCode();</span><br><span class="line"> </span><br><span class="line">            <span class="comment">// è¯»å–è¿”å›çš„æ•°æ®</span></span><br><span class="line">            <span class="keyword">var</span> responseData = <span class="keyword">await</span> response.Content.ReadAsStringAsync();</span><br><span class="line"> </span><br><span class="line">            <span class="comment">// è§£æè¿”å›çš„æ•°æ®</span></span><br><span class="line">            <span class="keyword">var</span> price = ParseGoldPrice(responseData);</span><br><span class="line"> </span><br><span class="line">            <span class="comment">// å°†ä»·æ ¼ä¼ é€’ç»™è§†å›¾</span></span><br><span class="line">            ViewBag.Price = price;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span> (HttpRequestException ex)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// å¤„ç†è¯·æ±‚å¼‚å¸¸</span></span><br><span class="line">            ViewBag.Error = <span class="string">&quot;Failed to retrieve gold price data.&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// è¿”å›è§†å›¾</span></span><br><span class="line">    <span class="keyword">return</span> View();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¤„ç†è¿”å›ä»·æ ¼ </p><p>é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ•°æ®</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="built_in">decimal</span> <span class="title">ParseGoldPrice</span>(<span class="params"><span class="built_in">string</span> responseData</span>)</span></span><br><span class="line">&#123;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    <span class="built_in">string</span> price = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="built_in">decimal</span> price2 = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">string</span> data = responseData;<span class="comment">// </span></span><br><span class="line"> </span><br><span class="line">    <span class="comment">// åŒ¹é…ä»·æ ¼çš„æ­£åˆ™è¡¨è¾¾å¼</span></span><br><span class="line">    <span class="built_in">string</span> pattern = <span class="string">@&quot;var hq_str_gds_AUTD=&quot;&quot;([^&quot;&quot;]+)&quot;&quot;;&quot;</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ•°æ®</span></span><br><span class="line">    Match match = Regex.Match(data, pattern);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span> (match.Success)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// è·å–åŒ¹é…åˆ°çš„ä»·æ ¼æ•°æ®</span></span><br><span class="line">        <span class="built_in">string</span> priceData = match.Groups[<span class="number">1</span>].Value;</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// ä½¿ç”¨é€—å·åˆ†å‰²æ•°æ®ï¼Œå–ç¬¬ä¸€ä¸ªå…ƒç´ ä½œä¸ºä»·æ ¼</span></span><br><span class="line">        <span class="built_in">string</span>[] priceParts = priceData.Split(<span class="string">&#x27;,&#x27;</span>);</span><br><span class="line">        price = priceParts[<span class="number">0</span>];</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// å°†å­—ç¬¦ä¸²ä»·æ ¼è½¬æ¢ä¸ºdecimalç±»å‹</span></span><br><span class="line">        price2 = <span class="built_in">decimal</span>.Parse(price);</span><br><span class="line"> </span><br><span class="line">        <span class="comment">// è¾“å‡ºæå–åˆ°çš„ä»·æ ¼</span></span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Gold Price: &quot;</span> + price2);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Price not found in data.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// decimal price = decimal.Parse(priceString);</span></span><br><span class="line">   </span><br><span class="line">    <span class="keyword">return</span> price2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041714.jpg"></p><h1 id="ğŸ’«è·å–BTCä»·æ ¼"><a href="#ğŸ’«è·å–BTCä»·æ ¼" class="headerlink" title="ğŸ’«è·å–BTCä»·æ ¼"></a>ğŸ’«è·å–BTCä»·æ ¼</h1><p>Headersæ¨¡æ‹Ÿcookieè·å–BTCä»·æ ¼</p> <figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"> httpClient.DefaultRequestHeaders.Add(<span class="string">&quot;User-Agent&quot;</span>, GetUserAgent());</span><br><span class="line"> </span><br><span class="line"> httpClient.DefaultRequestHeaders.Add(<span class="string">&quot;Accept&quot;</span>, <span class="string">&quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7&quot;</span>);</span><br><span class="line"> httpClient.DefaultRequestHeaders.Add(<span class="string">&quot;Accept-Language&quot;</span>, <span class="string">&quot;zh-CN,zh;q=0.9&quot;</span>);</span><br><span class="line"> httpClient.DefaultRequestHeaders.Add(<span class="string">&quot;Cache-Control&quot;</span>, <span class="string">&quot;max-age=0&quot;</span>);</span><br><span class="line"><span class="comment">//cookie</span></span><br><span class="line"> httpClient.DefaultRequestHeaders.Add(<span class="string">&quot;Cookie&quot;</span>, <span class="string">&quot;__51uvsct__3ExGyQaAoNSqsSUY=1; __51vcke__3ExGyQaAoNSqsSUY=c91184d5-8826-5ea8-8ddc-a0f3b85c9470; __51vuft__3ExGyQaAoNSqsSUY=1713248151570; PHPSESSI328&quot;</span>);</span><br><span class="line"> httpClient.DefaultRequestHeaders.Add(<span class="string">&quot;Sec-Ch-Ua&quot;</span>, <span class="string">&quot;\&quot;Google Chrome\&quot;;v=\&quot;123\&quot;, \&quot;Not:A-Brand\&quot;;v=\&quot;8\&quot;, \&quot;Chromium\&quot;;v=\&quot;123\&quot;&quot;</span>);</span><br><span class="line"> httpClient.DefaultRequestHeaders.Add(<span class="string">&quot;Sec-Ch-Ua-Mobile&quot;</span>, <span class="string">&quot;?0&quot;</span>);</span><br><span class="line"> httpClient.DefaultRequestHeaders.Add(<span class="string">&quot;Sec-Ch-Ua-Platform&quot;</span>, <span class="string">&quot;\&quot;Windows\&quot;&quot;</span>);</span><br><span class="line"> httpClient.DefaultRequestHeaders.Add(<span class="string">&quot;Sec-Fetch-Dest&quot;</span>, <span class="string">&quot;document&quot;</span>);</span><br><span class="line"> httpClient.DefaultRequestHeaders.Add(<span class="string">&quot;Sec-Fetch-Mode&quot;</span>, <span class="string">&quot;navigate&quot;</span>);</span><br><span class="line"> httpClient.DefaultRequestHeaders.Add(<span class="string">&quot;Sec-Fetch-Site&quot;</span>, <span class="string">&quot;none&quot;</span>);</span><br><span class="line"> httpClient.DefaultRequestHeaders.Add(<span class="string">&quot;Sec-Fetch-User&quot;</span>, <span class="string">&quot;?1&quot;</span>);</span><br><span class="line"> httpClient.DefaultRequestHeaders.Add(<span class="string">&quot;Upgrade-Insecure-Requests&quot;</span>, <span class="string">&quot;1&quot;</span>);</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"> <span class="comment">//åŒ¹é…</span></span><br><span class="line"> <span class="keyword">var</span> currencyElement = </span><br><span class="line"> htmlDocument.DocumentNode.SelectSingleNode(<span class="string">&quot;//div[@id=&#x27;hr_app_cid_1&#x27;]&quot;</span>);</span><br><span class="line"> <span class="keyword">if</span> (currencyElement != <span class="literal">null</span>)</span><br><span class="line"> &#123;</span><br><span class="line">     <span class="comment">// æŸ¥æ‰¾åŒ…å«äººæ°‘å¸ä»·æ ¼çš„å…ƒç´ </span></span><br><span class="line">     <span class="keyword">var</span> priceElement = currencyElement.SelectSingleNode(<span class="string">&quot;.//div[@class=&#x27;virtual overflow&#x27;]&quot;</span>);</span><br><span class="line">     <span class="keyword">if</span> (priceElement != <span class="literal">null</span>)</span><br><span class="line">     &#123;</span><br><span class="line">      <span class="comment">// æå–äººæ°‘å¸ä»·æ ¼</span></span><br><span class="line">      <span class="keyword">var</span> chinesePrice = priceElement.InnerText.Trim();</span><br><span class="line">     &#125;</span><br><span class="line"> </span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>ç¾å…ƒä»·æ ¼ä¹Ÿæ˜¯ç±»ä¼¼çš„è§„åˆ™ï¼Œè¿è¡Œç»“æœ</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041715.jpg"></p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041716.jpg"></p><h1 id="âœ¨è·å–CSDNçƒ­ç‚¹"><a href="#âœ¨è·å–CSDNçƒ­ç‚¹" class="headerlink" title="âœ¨è·å–CSDNçƒ­ç‚¹"></a>âœ¨è·å–CSDNçƒ­ç‚¹</h1><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041717.jpg"></p><p>æ¨¡æ‹Ÿè¯·æ±‚ï¼Œä¿®æ”¹è§„åˆ™</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> httpClient = <span class="keyword">new</span> HttpClient();</span><br><span class="line"><span class="keyword">var</span> referer = <span class="string">&quot;xxx&quot;</span>;</span><br><span class="line">httpClient.DefaultRequestHeaders.Add(<span class="string">&quot;referer&quot;</span>, referer);</span><br><span class="line">httpClient.DefaultRequestHeaders.Add(<span class="string">&quot;User-Agent&quot;</span>, GetUserAgent());</span><br><span class="line"><span class="keyword">var</span> response = <span class="keyword">await</span> httpClient.GetAsync(<span class="string">&quot;xxx/&quot;</span>);</span><br><span class="line">response.EnsureSuccessStatusCode();</span><br><span class="line"><span class="keyword">var</span> responseBody = <span class="keyword">await</span> response.Content.ReadAsStringAsync();</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> contentList = <span class="keyword">new</span> List&lt;Tuple&lt;<span class="built_in">string</span>, <span class="built_in">string</span>, <span class="built_in">string</span>&gt;&gt;();</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> htmlDocument = <span class="keyword">new</span> HtmlDocument();</span><br><span class="line">htmlDocument.LoadHtml(responseBody);</span><br><span class="line"> </span><br><span class="line"><span class="comment">//  var itemNodes = htmlDocument.DocumentNode.SelectNodes(&quot;//div[contains(@class, &#x27;headswiper-item&#x27;)]&quot;);</span></span><br><span class="line"><span class="keyword">var</span> items = htmlDocument.DocumentNode.SelectNodes(<span class="string">&quot;//div[@class=&#x27;headswiper-item&#x27;]&quot;</span>);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">if</span> (items != <span class="literal">null</span>)</span><br><span class="line">&#123;</span><br><span class="line">     <span class="keyword">foreach</span> (<span class="keyword">var</span> item <span class="keyword">in</span> items)</span><br><span class="line">     &#123;</span><br><span class="line">         <span class="keyword">var</span> titleNode = item.SelectSingleNode(<span class="string">&quot;.//a[@class=&#x27;title&#x27;]&quot;</span>);</span><br><span class="line">         <span class="keyword">var</span> nameNode = item.SelectSingleNode(<span class="string">&quot;.//p[@class=&#x27;name&#x27;]&quot;</span>);</span><br><span class="line">         <span class="keyword">var</span> linkNode = item.SelectSingleNode(<span class="string">&quot;.//a[@class=&#x27;title&#x27;]&quot;</span>);</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">         <span class="keyword">if</span> (titleNode != <span class="literal">null</span> &amp;&amp; nameNode != <span class="literal">null</span> &amp;&amp; linkNode != <span class="literal">null</span>)</span><br><span class="line">         &#123;</span><br><span class="line">             <span class="keyword">var</span> title = titleNode.InnerText.Trim();</span><br><span class="line">             <span class="keyword">var</span> name = nameNode.InnerText.Trim();</span><br><span class="line">             <span class="keyword">var</span> link = linkNode.GetAttributeValue(<span class="string">&quot;href&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">             contentList.Add(<span class="keyword">new</span> Tuple&lt;<span class="built_in">string</span>, <span class="built_in">string</span>, <span class="built_in">string</span>&gt;(title, name, link));</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> View(contentList);</span><br></pre></td></tr></table></figure><p>or ä½¿ç”¨æ­£åˆ™</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="comment">// ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„ div å…ƒç´ å†…å®¹</span></span><br><span class="line"><span class="keyword">var</span> regex = <span class="keyword">new</span> Regex(<span class="string">@&quot;&lt;div class=&quot;&quot;headswiper-item&quot;&quot;(.*?)&lt;/div&gt;&quot;</span>, RegexOptions.Singleline);</span><br><span class="line"><span class="keyword">var</span> matches = regex.Matches(responseBody);</span><br><span class="line"><span class="keyword">foreach</span> (Match match <span class="keyword">in</span> matches)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//å»é™¤Vuehtml</span></span><br><span class="line">    <span class="built_in">string</span> s1temp = match.Groups[<span class="number">1</span>].Value.Trim();</span><br><span class="line">    <span class="built_in">int</span> i1 = s1temp.IndexOf(<span class="string">&quot;&gt;&quot;</span>)+<span class="number">1</span>;</span><br><span class="line">    <span class="built_in">int</span> i2  = s1temp.Length - i1 - <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">string</span>  hotstr = s1temp.Substring(i1, i2);</span><br><span class="line">    </span><br><span class="line">    contentList.Add(hotstr);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœ<br>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041718.jpg"></p><h1 id="ğŸƒ-è·å–ç¼–ç¨‹è¯­è¨€æ’è¡Œæ¦œ"><a href="#ğŸƒ-è·å–ç¼–ç¨‹è¯­è¨€æ’è¡Œæ¦œ" class="headerlink" title="ğŸƒ è·å–ç¼–ç¨‹è¯­è¨€æ’è¡Œæ¦œ"></a>ğŸƒ è·å–ç¼–ç¨‹è¯­è¨€æ’è¡Œæ¦œ</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> response = <span class="keyword">await</span> httpClient.GetAsync(<span class="string">&quot;xxx&quot;</span>);</span><br><span class="line">response.EnsureSuccessStatusCode();</span><br><span class="line"><span class="keyword">var</span> htmlContent = <span class="keyword">await</span> response.Content.ReadAsStringAsync();</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> htmlDocument = <span class="keyword">new</span> HtmlDocument();</span><br><span class="line">htmlDocument.LoadHtml(htmlContent);</span><br><span class="line"> </span><br><span class="line"><span class="comment">// è·å–è¡¨æ ¼å†…å®¹</span></span><br><span class="line"><span class="keyword">var</span> table = htmlDocument.DocumentNode.SelectSingleNode(<span class="string">&quot;//table[@class=&#x27;w-min min-w-full table-fixed divide-y-2 divide-gray-200 text-sm dark:divide-gray-700&#x27;]&quot;</span>);</span><br><span class="line"> </span><br><span class="line">ViewBag.TableContent = table?.OuterHtml; </span><br></pre></td></tr></table></figure><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041719.jpg"></p><h1 id="ğŸ–¥ï¸è·å–å°ç ´ç«™çƒ­é—¨"><a href="#ğŸ–¥ï¸è·å–å°ç ´ç«™çƒ­é—¨" class="headerlink" title="ğŸ–¥ï¸è·å–å°ç ´ç«™çƒ­é—¨"></a>ğŸ–¥ï¸è·å–å°ç ´ç«™çƒ­é—¨</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> httpClient = <span class="keyword">new</span> HttpClient();</span><br><span class="line"><span class="keyword">var</span> referer = <span class="string">&quot;https://xxx&quot;</span>;</span><br><span class="line">httpClient.DefaultRequestHeaders.Add(<span class="string">&quot;Referer&quot;</span>, referer);</span><br><span class="line">httpClient.DefaultRequestHeaders.Add(<span class="string">&quot;User-Agent&quot;</span>, GetUserAgent());</span><br><span class="line"><span class="keyword">var</span> response = <span class="keyword">await</span> httpClient.GetAsync(<span class="string">&quot;https://xxx&quot;</span>);</span><br><span class="line">response.EnsureSuccessStatusCode();</span><br><span class="line"><span class="keyword">var</span> responseBody = <span class="keyword">await</span> response.Content.ReadAsStringAsync();</span><br><span class="line"><span class="keyword">var</span> jsonRes = Newtonsoft.Json.JsonConvert.DeserializeObject&lt;<span class="built_in">dynamic</span>&gt;(responseBody);</span><br><span class="line"><span class="keyword">var</span> tempArr = <span class="keyword">new</span> List&lt;MItem&gt;();</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> itid = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> itemj <span class="keyword">in</span> jsonRes.data.list)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">string</span> tt = itemj.keyword.ToString();</span><br><span class="line">  <span class="comment">//  string hot = itemj.hot_value.ToString();</span></span><br><span class="line">    tempArr.Add(<span class="keyword">new</span> MItem</span><br><span class="line">    &#123;</span><br><span class="line">        Index = itid++,</span><br><span class="line">        Title = tt,</span><br><span class="line">        Hot = <span class="string">&quot;&quot;</span>,</span><br><span class="line">        Url = <span class="string">&quot;https://search.bilibili.com/all?keyword=&quot;</span> + tt+ <span class="string">&quot;&amp;order=click&quot;</span>,</span><br><span class="line">        MobileUrl = <span class="string">&quot;https://search.bilibili.com/all?keyword=&quot;</span> + tt+ <span class="string">&quot;&amp;order=click&quot;</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> md = <span class="keyword">new</span> MData</span><br><span class="line">&#123;</span><br><span class="line">    Success = <span class="literal">true</span>,</span><br><span class="line">    Title = <span class="string">&quot;å°ç ´ç«™&quot;</span>,</span><br><span class="line">    Subtitle = <span class="string">&quot;çƒ­æœæ¦œ&quot;</span>,</span><br><span class="line">    UpdateTime = DateTime.Now.ToString(<span class="string">&quot;yyyy-MM-dd hh:mm:ss&quot;</span>),</span><br><span class="line">    Data = tempArr</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MData</span></span><br><span class="line"> &#123;</span><br><span class="line">     <span class="keyword">public</span> <span class="built_in">bool</span> Success &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">     <span class="keyword">public</span> <span class="built_in">string</span> Title &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">     <span class="keyword">public</span> <span class="built_in">string</span> Subtitle &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">     <span class="keyword">public</span> <span class="built_in">string</span> UpdateTime &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">     <span class="keyword">public</span> List&lt;MItem&gt; Data &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MItem</span></span><br><span class="line">   &#123;</span><br><span class="line">       <span class="keyword">public</span> <span class="built_in">int</span> Index &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">       <span class="keyword">public</span> <span class="built_in">string</span> Title &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">       <span class="keyword">public</span> <span class="built_in">string</span> Hot &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">       <span class="keyword">public</span> <span class="built_in">string</span> Url &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">       <span class="keyword">public</span> <span class="built_in">string</span> MobileUrl &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041720.jpg"></p><h1 id="â­è·å–æŸéŸ³çƒ­é—¨"><a href="#â­è·å–æŸéŸ³çƒ­é—¨" class="headerlink" title="â­è·å–æŸéŸ³çƒ­é—¨"></a>â­è·å–æŸéŸ³çƒ­é—¨</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> httpClient = <span class="keyword">new</span> HttpClient();</span><br><span class="line"><span class="keyword">var</span> referer = <span class="string">&quot;xxx&quot;</span>;</span><br><span class="line">httpClient.DefaultRequestHeaders.Add(<span class="string">&quot;referer&quot;</span>, referer);</span><br><span class="line">httpClient.DefaultRequestHeaders.Add(<span class="string">&quot;User-Agent&quot;</span>, GetUserAgent());</span><br><span class="line"><span class="keyword">var</span> response = <span class="keyword">await</span> httpClient.GetAsync(<span class="string">&quot;xxx&quot;</span>);</span><br><span class="line">response.EnsureSuccessStatusCode();</span><br><span class="line"><span class="keyword">var</span> responseBody = <span class="keyword">await</span> response.Content.ReadAsStringAsync();</span><br><span class="line"><span class="keyword">var</span> jsonRes = Newtonsoft.Json.JsonConvert.DeserializeObject&lt;<span class="built_in">dynamic</span>&gt;(responseBody);</span><br><span class="line"><span class="keyword">var</span> tempArr = <span class="keyword">new</span> List&lt;MItem&gt;();</span><br><span class="line"> </span><br><span class="line"><span class="built_in">int</span> itid = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">foreach</span> (<span class="keyword">var</span> itemj <span class="keyword">in</span> jsonRes.word_list)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">string</span> tt = itemj.word.ToString();</span><br><span class="line">    <span class="built_in">string</span> hot  =itemj.hot_value.ToString();</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    tempArr.Add(<span class="keyword">new</span> MItem</span><br><span class="line">    &#123;</span><br><span class="line">        Index = itid++,</span><br><span class="line">        Title = tt,</span><br><span class="line">        Hot = hot,</span><br><span class="line">        Url = <span class="string">&quot;https://www.douyin.com/search/&quot;</span> + tt,</span><br><span class="line">        MobileUrl = <span class="string">&quot;https://www.douyin.com/search/&quot;</span> + tt</span><br><span class="line">    &#125;); </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> douyinData = <span class="keyword">new</span> MData</span><br><span class="line">&#123;</span><br><span class="line">    Success = <span class="literal">true</span>,</span><br><span class="line">    Title = <span class="string">&quot;æŸéŸ³&quot;</span>,</span><br><span class="line">    Subtitle = <span class="string">&quot;çƒ­æœæ¦œ&quot;</span>,</span><br><span class="line">    UpdateTime = DateTime.Now.ToString(<span class="string">&quot;yyyy-MM-dd hh:mm:ss&quot;</span>),</span><br><span class="line">    Data = tempArr</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041721.jpg"></p><p>æ³¨æ„ï¼šå¦‚æœç›®æ ‡æœ‰IPé™åˆ¶ã€Cookieã€ç­¾åç­‰ï¼Œåˆ™éœ€ç¼–å†™ç›¸åº”çš„å¯¹ç­– ã€‚</p><p>æ­¤å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡WinFrom WebBowseræ§ä»¶å®ç°åŠ è½½å®ŒDOMå†åŒ¹é…ä¿¡æ¯å®ç°çˆ¬å–æ•ˆæœã€‚</p><p>è¿™é‡ŒåªåšæŠ›ç –å¼•ç‰ï¼Œè¯·å‹¿ä½¿ç”¨æ­¤æŠ€æœ¯åšè¿æ³•çš„äº‹æƒ…ï¼ï¼ï¼ğŸ’€ </p><p>END</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> .NET </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue study</title>
      <link href="/2024/04/17/Vue-Base/"/>
      <url>/2024/04/17/Vue-Base/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>Vue.jsï¼Œè¿™ä¸ªè½»é‡çº§ä¸”çµæ´»çš„JavaScriptæ¡†æ¶ï¼Œå°±åƒä¸€ä½é­”æœ¯å¸ˆï¼Œç”¨å®ƒçš„é­”æ³•æ£’å°†æ•°æ®å’Œè§†å›¾å·§å¦™åœ°è¿æ¥åœ¨ä¸€èµ·ã€‚å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒVue.jså°±åƒå˜é­”æœ¯ä¸€æ ·ï¼Œè®©è§†å›¾è‡ªåŠ¨æ›´æ–°ï¼Œä¸ºå¼€å‘è€…å¸¦æ¥äº†æå¤§çš„ä¾¿åˆ©ã€‚</p><p>Vue.jsçš„è¯ç”Ÿï¼Œæºäºä¸€ä½åå«å°¤é›¨æºªçš„å¼€å‘è€…å¯¹å‰ç«¯å¼€å‘çš„çƒ­çˆ±ä¸è¿½æ±‚ã€‚åœ¨Googleå·¥ä½œæœŸé—´ï¼Œä»–å—åˆ°äº†Angularçš„å¯å‘ï¼Œå†³å®šå¼€å‘ä¸€æ¬¾æ›´åŠ è½»é‡ã€çµæ´»çš„æ¡†æ¶ã€‚äºæ˜¯ï¼ŒVue.jsåº”è¿è€Œç”Ÿï¼Œå®ƒçš„åå­—æ¥æºäºâ€œViewâ€çš„ç¼©å†™ï¼Œå¯“æ„ç€å®ƒä¸“æ³¨äºè§†å›¾å±‚çš„å¼€å‘ã€‚Vue.jsä¸æ–­åœ°å®Œå–„å’Œå‘å±•ã€‚å®ƒå¼•å…¥äº†å“åº”å¼æ•°æ®ç»‘å®šã€ç»„ä»¶åŒ–å¼€å‘ç­‰æ ¸å¿ƒæ¦‚å¿µï¼Œè®©å‰ç«¯å¼€å‘å˜å¾—æ›´åŠ é«˜æ•ˆå’Œå¯ç»´æŠ¤ã€‚</p><h1 id="ğŸ‘‹-Vueç¯å¢ƒæ­å»º"><a href="#ğŸ‘‹-Vueç¯å¢ƒæ­å»º" class="headerlink" title="ğŸ‘‹ Vueç¯å¢ƒæ­å»º"></a>ğŸ‘‹ Vueç¯å¢ƒæ­å»º</h1><p>é¦–å…ˆï¼Œæ­ä¸€ä¸ªæ‰“ä»£ç çš„ç¯å¢ƒ</p><h2 id="1-å®‰è£…node-js"><a href="#1-å®‰è£…node-js" class="headerlink" title="1.å®‰è£…node.js"></a>1.å®‰è£…node.js</h2><p>åœ¨ä½¿ç”¨VS Codeä¹‹å‰ï¼Œéœ€è¦å®‰è£…Vueçš„å¼€å‘ç¯å¢ƒã€‚</p><p>å®‰è£…Vueçš„æœ€ç®€å•æ–¹æ³•æ˜¯ä½¿ç”¨npmåŒ…ç®¡ç†å™¨ï¼Œå…ˆå®‰è£…Node.jså’Œnpmã€‚</p><p>nodeå®˜ç½‘ &#x3D;&gt; <a href="https://nodejs.org/en/download">https://nodejs.org/en/download</a></p><img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041731.jpg"><h2 id="2-é…ç½®ç¯å¢ƒå˜é‡"><a href="#2-é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="2.é…ç½®ç¯å¢ƒå˜é‡"></a>2.é…ç½®ç¯å¢ƒå˜é‡</h2><p>åœ¨nodejså®‰è£…ç›®å½•ä¸‹æ–°å»ºnode_cacheï¼ˆnodejsç¼“å­˜ï¼‰ã€node_globalï¼ˆå…¨å±€åŒ…å­˜æ”¾ï¼‰ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚</p><p>â€‹â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041732.jpg"></p><p>æ‰“å¼€cmdå‘½ä»¤æç¤ºç¬¦ï¼Œé…ç½®æ–‡ä»¶è·¯å¾„å¦‚ä¸‹ï¼š</p><p>â€‹â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041733.jpg"></p><p>é…ç½®ç¯å¢ƒå˜é‡</p><p>â€‹â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041734.jpg"></p><p>ç³»ç»Ÿå±æ€§-&gt;é«˜çº§-&gt;ç¯å¢ƒå˜é‡-&gt;æ–°å¢ç¯å¢ƒå˜é‡ï¼š<br>â€‹â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041735.jpg"></p><p>ç³»ç»Ÿå˜é‡<br>â€‹â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041736.jpg"></p><p>â€‹â€‹</p><h2 id="3-VSCodeé…ç½®"><a href="#3-VSCodeé…ç½®" class="headerlink" title="3.VSCodeé…ç½®"></a>3.VSCodeé…ç½®</h2><p> Visual Studio Code</p><p>ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡ŒVSCode</p><p>VSCodeå®‰è£…æ’ä»¶ESLint</p><p>å®‰è£…jsæ‰“åŒ…å·¥å…·</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">npm install -g webpack</span><br></pre></td></tr></table></figure><p>â€‹â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041737.jpg"></p><p>â€‹â€‹</p><h2 id="4-å®‰è£…Vue-CLI"><a href="#4-å®‰è£…Vue-CLI" class="headerlink" title="4.å®‰è£…Vue CLI"></a>4.å®‰è£…Vue CLI</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">npm install -g vue-cli</span><br><span class="line"></span><br><span class="line">(vue-cli npm install @vue/cli -g --unsafe-perm)</span><br></pre></td></tr></table></figure><h2 id="5-åœ¨VS-Codeä¸­æ‰“å¼€Vueé¡¹ç›®"><a href="#5-åœ¨VS-Codeä¸­æ‰“å¼€Vueé¡¹ç›®" class="headerlink" title="5.åœ¨VS Codeä¸­æ‰“å¼€Vueé¡¹ç›®"></a>5.åœ¨VS Codeä¸­æ‰“å¼€Vueé¡¹ç›®</h2><h3 id="5-1-åœ¨VS-Codeä¸­ï¼ŒFile-Open-Folderâ€¦-é€‰æ‹©â€œæ–‡ä»¶â€-â€œæ‰“å¼€æ–‡ä»¶å¤¹â€ã€‚"><a href="#5-1-åœ¨VS-Codeä¸­ï¼ŒFile-Open-Folderâ€¦-é€‰æ‹©â€œæ–‡ä»¶â€-â€œæ‰“å¼€æ–‡ä»¶å¤¹â€ã€‚" class="headerlink" title="5.1. åœ¨VS Codeä¸­ï¼ŒFile &gt; Open Folderâ€¦ é€‰æ‹©â€œæ–‡ä»¶â€&gt; â€œæ‰“å¼€æ–‡ä»¶å¤¹â€ã€‚"></a>5.1. åœ¨VS Codeä¸­ï¼ŒFile &gt; Open Folderâ€¦ é€‰æ‹©â€œæ–‡ä»¶â€&gt; â€œæ‰“å¼€æ–‡ä»¶å¤¹â€ã€‚</h3><p>â€‹â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041738.jpg"></p><h3 id="5-2-æ‰¾åˆ°Vueé¡¹ç›®æ–‡ä»¶å¤¹ï¼Œé€‰æ‹©â€œæ–‡ä»¶å¤¹â€å¹¶æ‰“å¼€ã€‚"><a href="#5-2-æ‰¾åˆ°Vueé¡¹ç›®æ–‡ä»¶å¤¹ï¼Œé€‰æ‹©â€œæ–‡ä»¶å¤¹â€å¹¶æ‰“å¼€ã€‚" class="headerlink" title="5.2. æ‰¾åˆ°Vueé¡¹ç›®æ–‡ä»¶å¤¹ï¼Œé€‰æ‹©â€œæ–‡ä»¶å¤¹â€å¹¶æ‰“å¼€ã€‚"></a>5.2. æ‰¾åˆ°Vueé¡¹ç›®æ–‡ä»¶å¤¹ï¼Œé€‰æ‹©â€œæ–‡ä»¶å¤¹â€å¹¶æ‰“å¼€ã€‚</h3><p>â€‹â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041739.jpg"></p><p>å¯ä»¥æ ¹æ®éœ€è¦ï¼Œåœ¨Extensionså®‰è£…VSCodeçš„ä¸­æ–‡æ‰©å±•ã€‚</p><h3 id="5-3ä¹Ÿå¯ä»¥é€šè¿‡Vue-UI-åˆ›å»ºä¸€ä¸ªæ–°çš„Vueé¡¹ç›®ç„¶åæ‰“å¼€"><a href="#5-3ä¹Ÿå¯ä»¥é€šè¿‡Vue-UI-åˆ›å»ºä¸€ä¸ªæ–°çš„Vueé¡¹ç›®ç„¶åæ‰“å¼€" class="headerlink" title="5.3ä¹Ÿå¯ä»¥é€šè¿‡Vue UI åˆ›å»ºä¸€ä¸ªæ–°çš„Vueé¡¹ç›®ç„¶åæ‰“å¼€"></a>5.3ä¹Ÿå¯ä»¥é€šè¿‡Vue UI åˆ›å»ºä¸€ä¸ªæ–°çš„Vueé¡¹ç›®ç„¶åæ‰“å¼€</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vue ui</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>â€‹â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041740.jpg"></p><p>â€‹â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041741.jpg"></p><h2 id="6-è¿è¡ŒVueé¡¹ç›®"><a href="#6-è¿è¡ŒVueé¡¹ç›®" class="headerlink" title="6.è¿è¡ŒVueé¡¹ç›®"></a>6.è¿è¡ŒVueé¡¹ç›®</h2><p>åœ¨VS Codeä¸­æ‰“å¼€ Terminal  ç»ˆç«¯ï¼Œåˆ‡æ¢åˆ°Vueé¡¹ç›®æ–‡ä»¶å¤¹ï¼Œç„¶åè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>â€‹â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041742.jpg"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">install --å®Œä¼šæœ‰node_modules</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm run dev</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>â€‹â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041743.jpg"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run serve</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">npm run build  </span><br><span class="line"></span><br></pre></td></tr></table></figure><p>â€‹â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041744.jpg"></p><p>ç”Ÿæˆæ‰“åŒ…å®Œä¼šæœ‰distæ–‡ä»¶å¤¹æ”¾ç€æ‰“åŒ…å¥½çš„æ–‡ä»¶</p><p>å¯ç›´æ¥æ”¾åˆ°æœåŠ¡å™¨ä¸Šè¿è¡Œ </p><p> å¦å¤–ï¼Œä¹Ÿå¯é€šè¿‡ HBuilder æ¥æ•²ä»£ç <br>â€‹â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041745.jpg"></p><p>å†…ç½®æµè§ˆå™¨</p><h1 id="ğŸ‘€-VueåŸºç¡€å­¦ä¹ "><a href="#ğŸ‘€-VueåŸºç¡€å­¦ä¹ " class="headerlink" title="ğŸ‘€ VueåŸºç¡€å­¦ä¹ "></a>ğŸ‘€ VueåŸºç¡€å­¦ä¹ </h1><h2 id="1-å¼•å…¥vue-js"><a href="#1-å¼•å…¥vue-js" class="headerlink" title="1.å¼•å…¥vue.js"></a>1.å¼•å…¥vue.js</h2> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;vue.js&quot;</span> type=<span class="string">&quot;text/javascript&quot;</span> charset=<span class="string">&quot;utf-8&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  &#123;&#123; message &#125;&#125; &#123;&#123;name&#125;&#125; &#123;&#123;himan&#125;&#125;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> app = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="attr">data</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="attr">message</span>: <span class="string">&#x27;Hello Vue!&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">name : <span class="string">&quot;Vue&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="attr">himan</span>:<span class="string">&quot;hhhhhhh&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">â€‹<span class="string">``</span><span class="string">`</span></span><br><span class="line"><span class="string">â€‹â€‹&lt;img src=&quot;https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041746.jpg&quot;&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">## 2.æ•°æ®æ–¹æ³•</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> `</span><span class="string">``</span> javascript</span><br><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">&#123;&#123;a&#125;&#125;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"> </span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> data = &#123; a : <span class="number">1</span> &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">el   : <span class="string">&quot;#app&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">data : data</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//data.a = 121212</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">vm.$watch(<span class="string">&#x27;a&#x27;</span>, <span class="keyword">function</span>(<span class="params">newVal, oldVal</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(newVal, oldVal);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">vm.<span class="property">$data</span>.<span class="property">a</span> = <span class="string">&quot;123123.&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>â€‹</p><h2 id="3-ç”Ÿå‘½å‘¨æœŸ"><a href="#3-ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="3.ç”Ÿå‘½å‘¨æœŸ"></a>3.ç”Ÿå‘½å‘¨æœŸ</h2><p>æ¯ä¸ª Vue ç»„ä»¶å®ä¾‹åœ¨åˆ›å»ºæ—¶éƒ½éœ€è¦ç»å†ä¸€ç³»åˆ—çš„åˆå§‹åŒ–æ­¥éª¤ï¼Œæ¯”å¦‚è®¾ç½®å¥½æ•°æ®ä¾¦å¬ï¼Œç¼–è¯‘æ¨¡æ¿ï¼ŒæŒ‚è½½å®ä¾‹åˆ° DOMï¼Œä»¥åŠåœ¨æ•°æ®æ”¹å˜æ—¶æ›´æ–° DOMã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œå®ƒä¹Ÿä¼šè¿è¡Œè¢«ç§°ä¸ºç”Ÿå‘½å‘¨æœŸé’©å­çš„å‡½æ•°ï¼Œè®©å¼€å‘è€…æœ‰æœºä¼šåœ¨ç‰¹å®šé˜¶æ®µè¿è¡Œè‡ªå·±çš„ä»£ç ã€‚</p><p>befroreCreate åœ¨å®ä¾‹åˆå§‹åŒ–ä¹‹å</p><p>æ•°æ®è§‚æµ‹ (data observer) å’Œ event&#x2F;watcher äº‹ä»¶é…ç½®ä¹‹å‰è¢«è°ƒç”¨ã€‚</p><p>created     åœ¨å®ä¾‹åˆ›å»ºå®Œæˆåè¢«ç«‹å³è°ƒç”¨ã€‚</p><p>åœ¨è¿™ä¸€æ­¥ï¼Œå®ä¾‹å·²å®Œæˆä»¥ä¸‹çš„é…ç½®ï¼šæ•°æ®è§‚æµ‹ (data observer)ï¼Œå±æ€§å’Œæ–¹æ³•çš„è¿ç®—ï¼Œwatch&#x2F;event äº‹ä»¶å›è°ƒã€‚</p><p> ç„¶è€Œï¼ŒæŒ‚è½½é˜¶æ®µè¿˜æ²¡å¼€å§‹ï¼Œ$el å±æ€§ç›®å‰ä¸å¯è§ã€‚</p><p> beforeMount åœ¨æŒ‚è½½å¼€å§‹ä¹‹å‰è¢«è°ƒç”¨</p><p>ç›¸å…³çš„æ¸²æŸ“å‡½æ•°é¦–æ¬¡è¢«è°ƒç”¨</p><p>mounted   åœ¨ç»„ä»¶è¢«æŒ‚è½½ä¹‹åè°ƒç”¨</p><p>beforeUpdate æ•°æ®æ›´æ–°æ—¶è°ƒç”¨</p><p>updated  &#x2F;&#x2F;ç»„ä»¶ DOM å·²ç»æ›´æ–°, ç»„ä»¶æ›´æ–°å®Œæ¯• </p><p> æ³¨æ„ï¼šç”Ÿå‘½å‘¨æœŸä¸èƒ½ç”¨ç®­å¤´å‡½æ•°</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">&#123;&#123;msg&#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">el : <span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">data : &#123;</span></span><br><span class="line"><span class="language-javascript">msg : <span class="string">&quot;hi vue&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript"><span class="attr">beforeCreate</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;beforeCreate&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">created:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;created&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">beforeMount : <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;beforeMount&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">mounted : <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;mounted&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">beforeUpdate : <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;beforeUpdate&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">updated : <span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;updated&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">vm.<span class="property">msg</span> = <span class="string">&quot;change msg&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;change msg&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;, <span class="number">10000</span>);</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">â€‹</span></span><br></pre></td></tr></table></figure><p>â€‹â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041747.jpg"></p><p>ç”Ÿå‘½å‘¨æœŸé€‰é¡¹Vue.js &#x3D;&gt; <a href="https://cn.vuejs.org/api/options-lifecycle.html">https://cn.vuejs.org/api/options-lifecycle.html</a></p><h2 id="4-æ¨¡æ¿è¯­æ³•"><a href="#4-æ¨¡æ¿è¯­æ³•" class="headerlink" title="4.æ¨¡æ¿è¯­æ³•"></a>4.æ¨¡æ¿è¯­æ³•</h2><p>v-bind v-html</p><p>jsè¡¨è¾¾å¼ </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; number + 1 &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; 1 == 1 ? &#x27;YES&#x27; : &#x27;NO&#x27; &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; message.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;) &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">&#123;&#123;msg&#125;&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Using mustaches: &#123;&#123; rawHtml &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-html</span>=<span class="string">&quot;rawHtml&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-bind:class</span>=<span class="string">&quot;color&quot;</span>&gt;</span>test...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; number + 1 &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; 1 == 1 ? &#x27;YES&#x27; : &#x27;NO&#x27; &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; message.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;) &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">el : <span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">data : &#123;</span></span><br><span class="line"><span class="language-javascript">msg : <span class="string">&quot;hi vue&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">rawHtml : <span class="string">&#x27;&lt;span style=&quot;color:red&quot;&gt;this is should be red&lt;/span&gt;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">color</span>:<span class="string">&#x27;blue&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">number : <span class="number">10</span>,</span></span><br><span class="line"><span class="language-javascript">ok : <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">message : <span class="string">&quot;vue&quot;</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript">vm.<span class="property">msg</span> = <span class="string">&quot;hi....&quot;</span>;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">&quot;text/css&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.red</span>&#123;<span class="attribute">color</span>:red;&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.blue</span>&#123;<span class="attribute">color</span>:blue; <span class="attribute">font-size</span>:<span class="number">14px</span>;&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p>â€‹â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041748.jpg"></p><p>v-if @clikck @click.stop   stopä¿®é¥° è¡¨ç¤ºåªæ‰§è¡Œclick2</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-if</span>=<span class="string">&quot;seen&quot;</span>&gt;</span>HIHI<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:href</span>=<span class="string">&quot;url&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> @<span class="attr">click</span>=<span class="string">&quot;click1&quot;</span> &gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> @<span class="attr">click.stop</span>=<span class="string">&quot;click2&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">click me </span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">el : <span class="string">&quot;#app&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">data : &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">seen : <span class="literal">false</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">url : <span class="string">&quot;HTTPS://WWW.BAIDU.COM&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="attr">methods</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">click1 : <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;click1......&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">click2 : <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;click2......&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">â€‹<span class="string">``</span><span class="string">`</span></span><br><span class="line"><span class="string">â€‹â€‹&lt;img src=&quot;https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041749.jpg&quot;&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">## 5.å¯¹è±¡è¯­æ³•</span></span><br><span class="line"><span class="string">class styleç»‘å®š</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span> html</span><br><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml"><span class="attr">class</span>=<span class="string">&quot;test&quot;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml"><span class="attr">v-bind:class</span>=<span class="string">&quot;[ isActive ? &#x27;active&#x27; : &#x27;&#x27;, isGreen ? &#x27;green&#x27; : &#x27;&#x27;]&quot;</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml"><span class="attr">style</span>=<span class="string">&quot;width:200px; height:200px; text-align:center; line-height:200px;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">hahaha</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> </span></span></span><br><span class="line"><span class="tag"><span class="language-xml"><span class="attr">:style</span>=<span class="string">&quot;&#123;color:color, fontSize:size, background: isBlue ? &#x27;blue&#x27; : &#x27;&#x27;&#125;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">hihihihi</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">el : <span class="string">&quot;#app&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">data : &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">isActive : <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">isGreen : <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">color : <span class="string">&quot;#111111&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">size : <span class="string">&#x27;50px&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">isRed : <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="attr">isBlue</span>:<span class="literal">true</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.test</span>&#123;<span class="attribute">font-size</span>:<span class="number">30px</span>;&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.green</span>&#123;<span class="attribute">color</span>:<span class="number">#00FF00</span>;&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.active</span>&#123;<span class="attribute">background</span>:gray;&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">â€‹<span class="string">``</span><span class="string">`</span></span><br><span class="line"><span class="string">[2024041750]</span></span><br><span class="line"><span class="string">## 6.æ¡ä»¶æ¸²æŸ“</span></span><br><span class="line"><span class="string">v-if v-show </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> `</span><span class="string">``</span> javascript</span><br><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;type === &#x27;A&#x27;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  A</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else-if</span>=<span class="string">&quot;type === &#x27;B&#x27;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  B</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else-if</span>=<span class="string">&quot;type === &#x27;C&#x27;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  C</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  Not A/B/C</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-show</span>=<span class="string">&quot;ok&quot;</span>&gt;</span>Hello!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-show</span>=<span class="string">&quot;nok&quot;</span>&gt;</span>Hello!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">el : <span class="string">&quot;#app&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">data : &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">type : <span class="string">&quot;D&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">ok : <span class="literal">true</span><span class="comment">//ok : false</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">â€‹<span class="string">``</span><span class="string">`</span></span><br><span class="line"><span class="string">â€‹â€‹&lt;img src=&quot;https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041751.jpg&quot;&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">å¦‚æœéœ€è¦é¢‘ç¹åˆ‡æ¢ ï¼Œç”¨v-show showæœ‰å†™å…¥dom</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">## 7.åˆ—è¡¨æ¸²æŸ“</span></span><br><span class="line"><span class="string">v-for </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> `</span><span class="string">``</span> javascript</span><br><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;item,index in items&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">&#123;&#123;index + 1 &#125;&#125;  &#123;&#123; item.message &#125;&#125;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;value, key in object&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">&#123;&#123;key&#125;&#125; : &#123;&#123; value &#125;&#125;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">el : <span class="string">&quot;#app&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">data : &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">items : [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#123; <span class="attr">message</span>: <span class="string">&#x27;zhangsan&#x27;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#123; <span class="attr">message</span>: <span class="string">&#x27;liwu&#x27;</span> &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="attr">object</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="attr">title</span>: <span class="string">&#x27;tt&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="attr">author</span>: <span class="string">&#x27;zhangsan&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="attr">createAt</span>: <span class="string">&#x27;2024-01-01&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">â€‹<span class="string">``</span><span class="string">`</span></span><br><span class="line"><span class="string">â€‹â€‹&lt;img src=&quot;https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041752.jpg&quot;&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">## 8.äº‹ä»¶</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> `</span><span class="string">``</span> html</span><br><span class="line"></span><br><span class="line">    &lt;div id=<span class="string">&quot;app&quot;</span>&gt;</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;example-1&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;counter+=1&quot;</span>&gt;</span>æ•°å€¼: &#123;&#123; counter &#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;greet(&#x27;abc&#x27;)&quot;</span>&gt;</span>Greet<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        el :<span class="string">&quot;#app&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        data :&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">counter</span>:<span class="number">0</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            name :<span class="string">&quot;vue&quot;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">methods</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            greet :<span class="keyword">function</span>(<span class="params">str,e</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="title function_">alert</span>(<span class="string">&#x27;hi&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">name</span>);&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>â€‹â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041753.jpg"></p><h2 id="9-è¡¨å•ç»‘å®š"><a href="#9-è¡¨å•ç»‘å®š" class="headerlink" title="9.è¡¨å•ç»‘å®š"></a>9.è¡¨å•ç»‘å®š</h2> <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;example-1&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">v-model</span>=<span class="string">&quot;message&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;edit me&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>Message is: &#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">textarea</span> <span class="attr">v-model</span>=<span class="string">&quot;message2&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;add multiple lines&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">&quot;white-space: pre-line;&quot;</span>&gt;</span>&#123;&#123; message2 &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-top:20px;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;z&quot;</span> <span class="attr">value</span>=<span class="string">&quot;z&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;checkedNames&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;z&quot;</span>&gt;</span>z<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;x&quot;</span> <span class="attr">value</span>=<span class="string">&quot;x&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;checkedNames&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;x&quot;</span>&gt;</span>x<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">id</span>=<span class="string">&quot;a&quot;</span> <span class="attr">value</span>=<span class="string">&quot;a&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;checkedNames&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;a&quot;</span>&gt;</span>a<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>Checked names: &#123;&#123; checkedNames &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;margin-top:20px;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">id</span>=<span class="string">&quot;one&quot;</span> <span class="attr">value</span>=<span class="string">&quot;One&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;picked&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;one&quot;</span>&gt;</span>One<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">id</span>=<span class="string">&quot;two&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Two&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;picked&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;two&quot;</span>&gt;</span>Two<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>Picked: &#123;&#123; picked &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>æäº¤<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">el : <span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">data : &#123;</span></span><br><span class="line"><span class="language-javascript">message : <span class="string">&quot;himsg&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">message2 :<span class="string">&quot;himsg2&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">checkedNames : [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;z&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">picked : <span class="string">&quot;Two&quot;</span></span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">submit : <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">message</span> + <span class="string">&quot; &quot;</span>+<span class="variable language_">this</span>.<span class="property">message2</span>  );</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">â€‹```</span><br><span class="line">â€‹â€‹<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041754.jpg&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">## 10.ç»„ä»¶åŸºç¡€</span><br><span class="line"></span><br><span class="line"> ``` javascript</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button-counter</span> <span class="attr">title</span>=<span class="string">&quot;123&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">button-counter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button-counter</span> <span class="attr">title</span>=<span class="string">&quot;title1 &quot;</span> @<span class="attr">clicknow</span>=<span class="string">&quot;clicknow&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>hi...h3<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">button-counter</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button-counter</span> <span class="attr">title</span>=<span class="string">&quot;title2 : &quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">button-counter</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;button-counter&#x27;</span>, &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">props</span>: [<span class="string">&#x27;title&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript"><span class="attr">data</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">count</span>: <span class="number">0</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">template</span>: <span class="string">&#x27;&lt;div&gt;&lt;h1&gt;hi...&lt;/h1&gt;&lt;button v-on:click=&quot;clickfun&quot;&gt;&#123;&#123;title&#125;&#125; You clicked me &#123;&#123; count &#125;&#125; times.&lt;/button&gt;&lt;slot&gt;&lt;/slot&gt; &lt;/div&gt;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">clickfun</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">this</span>.<span class="property">count</span>++;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">this</span>.$emit(<span class="string">&#x27;clicknow&#x27;</span>, <span class="variable language_">this</span>.<span class="property">count</span>);<span class="comment">//ä¼ å‡ºå»</span></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;)</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">el</span>: <span class="string">&quot;#app&quot;</span>,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"><span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">clicknow</span>: <span class="keyword">function</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span></span><br><span class="line"><span class="language-javascript">&#125;,</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>component(â€˜xxxâ€™,{})  xxxç»„ä»¶åç§°  {}å¯¹è±¡å†…å®¹</p><p>props:[â€œtitleâ€]å®šä¹‰å±æ€§</p><p><slot></slot> æ’æ§½ å¯æ’å…¥htmlæ ‡ç­¾</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;button-counter&#x27;</span>, &#123;</span><br><span class="line"><span class="attr">props</span>: [<span class="string">&#x27;title&#x27;</span>],</span><br><span class="line"><span class="attr">data</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"><span class="keyword">return</span> &#123;&#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">template</span>: <span class="string">&#x27;&lt;div&gt;&lt;h1&gt;hi...&lt;/h1&gt;&lt;/div&gt;&#x27;</span>,</span><br><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">el : <span class="string">&quot;#app&quot;</span>,</span><br><span class="line">data : &#123;</span><br><span class="line"></span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line">clicknow : <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">components</span>:&#123;</span><br><span class="line">test : &#123;</span><br><span class="line"><span class="attr">template</span>:<span class="string">&quot;&lt;h2&gt;h2...&lt;/h2&gt;&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>Vue.component(â€˜button-counterâ€™â€¦æ˜¯å…¨å±€æ³¨å†Œ</p><p>components:{â€¦  } å±€éƒ¨æ³¨å†Œ</p><h2 id="11-å•æ–‡ä»¶ç»„ä»¶"><a href="#11-å•æ–‡ä»¶ç»„ä»¶" class="headerlink" title="11.å•æ–‡ä»¶ç»„ä»¶"></a>11.å•æ–‡ä»¶ç»„ä»¶</h2><p>â€‹â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041755.jpg"></p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, Vue!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">HelloWorld</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"> </span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// å¼•å…¥ HelloWorld ç»„ä»¶</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">HelloWorld</span> <span class="keyword">from</span> <span class="string">&#x27;./HelloWorld.vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">components</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="comment">// æ³¨å†Œå¼•å…¥çš„ç»„ä»¶</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">HelloWorld</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="comment">/* æ ·å¼ */</span></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h1 id="ğŸŒ±Vueç»„ä»¶å­¦ä¹ "><a href="#ğŸŒ±Vueç»„ä»¶å­¦ä¹ " class="headerlink" title="ğŸŒ±Vueç»„ä»¶å­¦ä¹ "></a>ğŸŒ±Vueç»„ä»¶å­¦ä¹ </h1><p>Vue Router<br>Vue Router æ˜¯ Vue.js å®˜æ–¹çš„è·¯ç”±ç®¡ç†å™¨ã€‚å®ƒå…è®¸æ„å»ºå•é¡µåº”ç”¨ï¼ˆSPAï¼‰ï¼Œåœ¨ä¸åŒçš„ URL ä¹‹é—´è¿›è¡Œå¯¼èˆªï¼ŒåŒæ—¶è¿˜å¯ä»¥å®ç°è¯¸å¦‚è·¯ç”±å‚æ•°ã€åµŒå¥—è·¯ç”±ã€è·¯ç”±å¯¼èˆªå®ˆå«ç­‰åŠŸèƒ½ã€‚</p><h2 id="1-å®‰è£…-Vue-Router"><a href="#1-å®‰è£…-Vue-Router" class="headerlink" title="1.å®‰è£… Vue Router"></a>1.å®‰è£… Vue Router</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-router</span><br></pre></td></tr></table></figure><h2 id="2-router-js"><a href="#2-router-js" class="headerlink" title="2.router.js"></a>2.router.js</h2><p>Vue é¡¹ç›®ä¸­ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªè·¯ç”±å®ä¾‹å¹¶å°†å…¶æŒ‚è½½åˆ° Vue å®ä¾‹ä¸Šã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œåä¸º router.js æˆ–è€…ç±»ä¼¼çš„æ–‡ä»¶ä¸­å®šä¹‰è·¯ç”±ï¼Œç„¶ååœ¨ä¸» Vue å®ä¾‹ä¸­å¼•å…¥å®ƒã€‚</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// router/index.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Login</span> <span class="keyword">from</span> <span class="string">&#x27;../components/Login.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Setting</span> <span class="keyword">from</span> <span class="string">&#x27;../components/Setting.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">UserManagement</span> <span class="keyword">from</span> <span class="string">&#x27;../components/UserManagement.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> imtest <span class="keyword">from</span> <span class="string">&#x27;../components/WebIMTest.vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/Login&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Login</span> &#125;,    <span class="comment">// _ // è®¾ç½®ç©ºé»˜è®¤è·¯ç”±ä¸ºLogin.vue</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/Setting&#x27;</span>, <span class="attr">component</span>: <span class="title class_">Setting</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/UserManagement&#x27;</span>, <span class="attr">component</span>: <span class="title class_">UserManagement</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&#x27;/imtest&#x27;</span>, <span class="attr">component</span>: imtest &#125;</span><br><span class="line">]</span><br><span class="line"> </span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(),</span><br><span class="line">  routes</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><p>createRouter å‡½æ•°ç”¨äºåˆ›å»ºè·¯ç”±å®ä¾‹ï¼Œè€Œ createWebHistory å‡½æ•°åˆ™ç”¨äºåˆ›å»ºåŸºäº HTML5 History API çš„è·¯ç”±æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨æµè§ˆå™¨çš„ History API æ¥å¤„ç† URL çš„å˜åŒ–</p><h2 id="3-å¼•å…¥è·¯ç”±å®ä¾‹"><a href="#3-å¼•å…¥è·¯ç”±å®ä¾‹" class="headerlink" title="3.å¼•å…¥è·¯ç”±å®ä¾‹"></a>3.å¼•å…¥è·¯ç”±å®ä¾‹</h2><p>Vue å®ä¾‹ä¸­ï¼Œéœ€è¦å¼•å…¥è¿™ä¸ªè·¯ç”±å®ä¾‹ï¼Œå¹¶å°†å…¶åº”ç”¨åˆ° Vue å®ä¾‹ä¸­ã€‚</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">  <span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"> </span><br><span class="line">  app.<span class="title function_">use</span>(router) <span class="comment">// ä½¿ç”¨è·¯ç”±</span></span><br><span class="line">  app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="4-è·¯ç”±å¯¼èˆª"><a href="#4-è·¯ç”±å¯¼èˆª" class="headerlink" title="4.è·¯ç”±å¯¼èˆª"></a>4.è·¯ç”±å¯¼èˆª</h2><p>å¯ä»¥ä½¿ç”¨ <router-link> æ¥å®ç°è·¯ç”±å¯¼èˆªï¼Œä½¿ç”¨ <router-view> æ¥æ¸²æŸ“å½“å‰è·¯ç”±åŒ¹é…åˆ°çš„ç»„ä»¶ã€‚</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- <span class="title class_">App</span>.<span class="property">vue</span> --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    </span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/login&quot;</span> <span class="attr">class</span>=<span class="string">&quot;nav-link&quot;</span>&gt;</span>Login<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/setting&quot;</span> <span class="attr">class</span>=<span class="string">&quot;nav-link&quot;</span>&gt;</span>Setting<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"> </span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&#x27;App&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="5-è¿è¡Œå®ä¾‹"><a href="#5-è¿è¡Œå®ä¾‹" class="headerlink" title="5.è¿è¡Œå®ä¾‹"></a>5.è¿è¡Œå®ä¾‹</h2><p>â€‹â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041756.jpg"></p><p>ç‚¹å‡»Setting  åˆ™æ¥åˆ°&#x2F;setting  ï¼Œ <router-view></router-view> å±•ç¤ºçš„æ˜¯Settingçš„å†…å®¹</p><h1 id="Axios"><a href="#Axios" class="headerlink" title="Axios"></a>Axios</h1><p>Axios æ˜¯ä¸€ä¸ªæµè¡Œçš„åŸºäº Promise çš„ HTTP å®¢æˆ·ç«¯ï¼Œç”¨äºæµè§ˆå™¨å’Œ Node.js ç¯å¢ƒã€‚å®ƒå…è®¸ä½ ä»¥ç®€å•ã€ç›´è§‚çš„æ–¹å¼å‘é€å¼‚æ­¥HTTPè¯·æ±‚ï¼Œå¹¶å¤„ç†å“åº”ã€‚Axios å…·æœ‰è®¸å¤šåŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š</p><p>æ”¯æŒ Promise APIï¼šAxiosä½¿ç”¨Promiseå¯¹è±¡è¿›è¡Œå¼‚æ­¥æ“ä½œçš„å¤„ç†ï¼Œä½¿å¾—ä»£ç æ›´åŠ æ¸…æ™°å’Œæ˜“äºç†è§£ã€‚</p><p>æ”¯æŒæµè§ˆå™¨å’ŒNode.jsï¼šAxioså¯ä»¥åœ¨æµè§ˆå™¨å’ŒNode.jsç¯å¢ƒä¸­ä½¿ç”¨ï¼Œè¿™ä½¿å¾—å®ƒæˆä¸ºè·¨å¹³å°å¼€å‘çš„ç†æƒ³é€‰æ‹©ã€‚</p><p>æ‹¦æˆªè¯·æ±‚å’Œå“åº”ï¼šä½ å¯ä»¥åœ¨å‘é€è¯·æ±‚æˆ–æ¥æ”¶å“åº”æ—¶ï¼Œä½¿ç”¨æ‹¦æˆªå™¨å¯¹è¯·æ±‚æˆ–å“åº”è¿›è¡Œå…¨å±€å¤„ç†ã€‚</p><p>è‡ªåŠ¨è½¬æ¢JSONæ•°æ®ï¼šAxiosä¼šè‡ªåŠ¨å°†æ¥æ”¶åˆ°çš„JSONæ•°æ®è½¬æ¢ä¸ºJavaScriptå¯¹è±¡ï¼Œæ–¹ä¾¿åœ¨ä»£ç ä¸­è¿›è¡Œå¤„ç†ã€‚</p><p>å–æ¶ˆè¯·æ±‚ï¼šAxioså…è®¸ä½ å–æ¶ˆæœªå®Œæˆçš„HTTPè¯·æ±‚ï¼Œé˜²æ­¢ä¸å¿…è¦çš„ç½‘ç»œè¯·æ±‚ã€‚</p><p>å®¢æˆ·ç«¯ç«¯å£æ”¯æŒé˜²æ­¢CSRFï¼šAxioså¯ä»¥è‡ªåŠ¨è¯†åˆ«å’Œå¤„ç†CSRFä¿æŠ¤ã€‚</p><p>é”™è¯¯å¤„ç†ï¼šAxiosæä¾›äº†ä¸°å¯Œçš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œæ–¹ä¾¿ä½ å¤„ç†å„ç§ç½‘ç»œè¯·æ±‚å¯èƒ½å‡ºç°çš„é”™è¯¯ã€‚</p><p>é€‚ç”¨äºå‰ç«¯å’Œåç«¯å¼€å‘ï¼Œä½¿å¾—å‘é€å’Œå¤„ç†HTTPè¯·æ±‚å˜å¾—æ›´åŠ ç®€å•å’Œé«˜æ•ˆã€‚</p><h2 id="1-å®‰è£…Axios"><a href="#1-å®‰è£…Axios" class="headerlink" title="1.å®‰è£…Axios"></a>1.å®‰è£…Axios</h2><p>å¯ä»¥é€šè¿‡npmæˆ–è€…yarnè¿›è¡Œå®‰è£…ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install axios</span><br></pre></td></tr></table></figure><h2 id="2-å¼•å…¥axios"><a href="#2-å¼•å…¥axios" class="headerlink" title="2.å¼•å…¥axios"></a>2.å¼•å…¥axios</h2> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br></pre></td></tr></table></figure><h2 id="3-axiosè¯·æ±‚æ–¹æ³•"><a href="#3-axiosè¯·æ±‚æ–¹æ³•" class="headerlink" title="3.axiosè¯·æ±‚æ–¹æ³•"></a>3.axiosè¯·æ±‚æ–¹æ³•</h2> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line"> </span><br><span class="line"><span class="title class_">AxiosTest</span>() &#123;</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">const</span> url = <span class="string">&#x27;/api/getLogByID&#x27;</span>;</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">const</span> id = <span class="string">&#x27;3&#x27;</span>;</span><br><span class="line"> </span><br><span class="line">  <span class="comment">// ä½¿ç”¨Axioså‘é€GETè¯·æ±‚</span></span><br><span class="line">  axios.<span class="title function_">get</span>(url, &#123;</span><br><span class="line">    <span class="attr">params</span>: &#123;</span><br><span class="line">      <span class="attr">id</span>: id</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// è¯·æ±‚æˆåŠŸæ—¶çš„å¤„ç†é€»è¾‘</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(response.<span class="property">data</span>); <span class="comment">// è¾“å‡ºè·å–åˆ°çš„æ—¥å¿—æ•°æ®</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// è¯·æ±‚å¤±è´¥æ—¶çš„å¤„ç†é€»è¾‘</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;There was an error!&#x27;</span>, error);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h2 id="4-è°ƒç”¨æ–¹æ³•"><a href="#4-è°ƒç”¨æ–¹æ³•" class="headerlink" title="4.è°ƒç”¨æ–¹æ³•"></a>4.è°ƒç”¨æ–¹æ³•</h2><p>åœ¨Vueæ¨¡æ¿ä¸­è°ƒç”¨æ–¹æ³•ï¼šé€šè¿‡äº‹ä»¶ç»‘å®šæˆ–å…¶ä»–æ–¹å¼æ¥è°ƒç”¨ä¸Šé¢å®šä¹‰çš„æ–¹æ³•ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;AxiosTest&quot;</span>&gt;</span>è·å– <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="5-è¿è¡Œå®ä¾‹-1"><a href="#5-è¿è¡Œå®ä¾‹-1" class="headerlink" title="5.è¿è¡Œå®ä¾‹"></a>5.è¿è¡Œå®ä¾‹</h2><p>â€‹â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041757.jpg"></p><p>æˆ·ç‚¹å‡»æŒ‰é’®æ—¶ï¼ŒAxiosTestæ–¹æ³•è¢«è°ƒç”¨ï¼Œå®ƒä¼šä½¿ç”¨Axioså‘é€GETè¯·æ±‚æ¥è°ƒç”¨GetLogByIDæ–¹æ³•ï¼Œå¹¶å¤„ç†è¿”å›çš„æ•°æ®æˆ–é”™è¯¯ã€‚ console.log è¾“å‡º è¿”å›çš„æ•°æ®</p><h1 id="Vue-i18n-å›½é™…åŒ–"><a href="#Vue-i18n-å›½é™…åŒ–" class="headerlink" title="Vue-i18n å›½é™…åŒ–"></a>Vue-i18n å›½é™…åŒ–</h1><p>åœ¨Vueåº”ç”¨ä¸­ä½¿ç”¨Vue I18næ—¶ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š</p><h2 id="1-å®‰è£…Vue-I18n"><a href="#1-å®‰è£…Vue-I18n" class="headerlink" title="1.å®‰è£…Vue I18n"></a>1.å®‰è£…Vue I18n</h2><p>é¦–å…ˆï¼Œéœ€è¦å®‰è£…Vue I18nã€‚å¯ä»¥é€šè¿‡npmæˆ–è€…yarnæ¥å®‰è£…Vue I18n</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue-i18n</span><br></pre></td></tr></table></figure><p>or</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add vue-i18n</span><br></pre></td></tr></table></figure><h2 id="2-åˆ›å»ºè¯­è¨€æ–‡ä»¶"><a href="#2-åˆ›å»ºè¯­è¨€æ–‡ä»¶" class="headerlink" title="2.åˆ›å»ºè¯­è¨€æ–‡ä»¶"></a>2.åˆ›å»ºè¯­è¨€æ–‡ä»¶</h2><p>æ¥ä¸‹æ¥ï¼Œåˆ›å»ºè¯­è¨€æ–‡ä»¶ã€‚è¿™äº›æ–‡ä»¶å¯ä»¥æ˜¯JSONæ ¼å¼çš„ï¼Œç”¨æ¥å­˜å‚¨ä¸åŒè¯­è¨€çš„ç¿»è¯‘ä¿¡æ¯ã€‚ä¾‹å¦‚en.jsonã€zh.jsonå’Œfr.jsonç­‰æ–‡ä»¶ï¼Œåˆ†åˆ«å­˜å‚¨è‹±è¯­ã€ä¸­æ–‡å’Œæ³•è¯­çš„ä¿¡æ¯ã€‚</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// en.json</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;Welcome&quot;</span>: <span class="string">&quot;Welcome&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Login&quot;</span>: <span class="string">&quot;Login&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Setting&quot;</span>: <span class="string">&quot;Setting&quot;</span>,</span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// en.json</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;Welcome&quot;</span>: <span class="string">&quot;Welcome&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Login&quot;</span>: <span class="string">&quot;Login&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Setting&quot;</span>: <span class="string">&quot;Setting&quot;</span>,</span><br><span class="line">   </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// zh.json</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;Welcome&quot;</span>: <span class="string">&quot;æ¬¢è¿&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Login&quot;</span>: <span class="string">&quot;ç™»å½•&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Setting&quot;</span>: <span class="string">&quot;è®¾ç½®&quot;</span>,</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-åœ¨Vueç»„ä»¶ä¸­ä½¿ç”¨Vue-I18n"><a href="#3-åœ¨Vueç»„ä»¶ä¸­ä½¿ç”¨Vue-I18n" class="headerlink" title="3.åœ¨Vueç»„ä»¶ä¸­ä½¿ç”¨Vue I18n"></a>3.åœ¨Vueç»„ä»¶ä¸­ä½¿ç”¨Vue I18n</h2><p> åœ¨Vueç»„ä»¶ä¸­å¼•å…¥Vue I18nï¼Œå¹¶åˆ›å»ºä¸€ä¸ªå®ä¾‹ã€‚</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createI18n &#125; <span class="keyword">from</span> <span class="string">&#x27;vue-i18n&#x27;</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&#x27;./router&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// å¼•å…¥è¯­è¨€æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">import</span> en <span class="keyword">from</span> <span class="string">&#x27;./locales/en.json&#x27;</span></span><br><span class="line"><span class="keyword">import</span> zh <span class="keyword">from</span> <span class="string">&#x27;./locales/zh.json&#x27;</span></span><br><span class="line"><span class="keyword">import</span> fr <span class="keyword">from</span> <span class="string">&#x27;./locales/fr.json&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// åˆ›å»º Vue I18n å®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> i18n = <span class="title function_">createI18n</span>(&#123;</span><br><span class="line">    <span class="attr">locale</span>: <span class="string">&#x27;en&#x27;</span>, <span class="comment">// é»˜è®¤è¯­è¨€</span></span><br><span class="line">    <span class="attr">messages</span>: &#123;</span><br><span class="line">        en,</span><br><span class="line">        zh,</span><br><span class="line">        fr</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"> </span><br><span class="line"><span class="comment">// åˆ›å»º Vue åº”ç”¨å®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment">// ä½¿ç”¨ Vue I18n å’Œè·¯ç”±</span></span><br><span class="line">app.<span class="title function_">use</span>(i18n)</span><br><span class="line">app.<span class="title function_">use</span>(router)</span><br><span class="line"> </span><br><span class="line"><span class="comment">// æŒ‚è½½åº”ç”¨</span></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="4-åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ç¿»è¯‘"><a href="#4-åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ç¿»è¯‘" class="headerlink" title="4.åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ç¿»è¯‘"></a>4.åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ç¿»è¯‘</h2><p>ä½¿ç”¨ $t æ–¹æ³•æ¥è¿›è¡Œç¿»è¯‘ã€‚</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- <span class="title class_">HelloWorld</span>.<span class="property">vue</span> --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; $t(&#x27;Welcome&#x27;) &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; $t(&#x27;Login&#x27;) &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; $t(&#x27;Setting&#x27;) &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  </span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h2 id="5-åˆ‡æ¢è¯­è¨€ï¼š-æœ€åï¼Œé€šè¿‡ä¿®æ”¹Vue-I18nå®ä¾‹çš„localeå±æ€§æ¥åˆ‡æ¢è¯­è¨€ã€‚"><a href="#5-åˆ‡æ¢è¯­è¨€ï¼š-æœ€åï¼Œé€šè¿‡ä¿®æ”¹Vue-I18nå®ä¾‹çš„localeå±æ€§æ¥åˆ‡æ¢è¯­è¨€ã€‚" class="headerlink" title="5.åˆ‡æ¢è¯­è¨€ï¼š æœ€åï¼Œé€šè¿‡ä¿®æ”¹Vue I18nå®ä¾‹çš„localeå±æ€§æ¥åˆ‡æ¢è¯­è¨€ã€‚"></a>5.åˆ‡æ¢è¯­è¨€ï¼š æœ€åï¼Œé€šè¿‡ä¿®æ”¹Vue I18nå®ä¾‹çš„localeå±æ€§æ¥åˆ‡æ¢è¯­è¨€ã€‚</h2> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ‡æ¢åˆ°ä¸­æ–‡</span></span><br><span class="line">i18n.<span class="property">global</span>.<span class="property">locale</span> = <span class="string">&#x27;zh&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// åˆ‡æ¢åˆ°æ³•è¯­</span></span><br><span class="line">i18n.<span class="property">global</span>.<span class="property">locale</span> = <span class="string">&#x27;fr&#x27;</span>;</span><br><span class="line">åœ¨<span class="number">2.</span>åˆ›å»ºè¯­è¨€æ–‡ä»¶æ—¶ä¹Ÿå¯ä»¥åªåˆ›å»ºä¸€ä¸ªjsonï¼Œå‡å°‘åç»­ç»´æŠ¤æˆæœ¬å¦‚ï¼š</span><br><span class="line"></span><br><span class="line"><span class="comment">// lan.json</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;en&quot;</span>: &#123;</span><br><span class="line"><span class="string">&quot;Welcome&quot;</span>: <span class="string">&quot;Welcome&quot;</span>,</span><br><span class="line"><span class="string">&quot;Login&quot;</span>: <span class="string">&quot;Login&quot;</span>,</span><br><span class="line"><span class="string">&quot;Setting&quot;</span>: <span class="string">&quot;Setting&quot;</span>,</span><br><span class="line"> </span><br><span class="line"><span class="string">&quot;UserManagement&quot;</span>: <span class="string">&quot;User Management&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">&quot;zh&quot;</span>: &#123;</span><br><span class="line"><span class="string">&quot;Welcome&quot;</span>: <span class="string">&quot;æ¬¢è¿&quot;</span>,</span><br><span class="line"><span class="string">&quot;Login&quot;</span>: <span class="string">&quot;ç™»å½•&quot;</span>,</span><br><span class="line"><span class="string">&quot;Setting&quot;</span>: <span class="string">&quot;è®¾ç½®&quot;</span>,</span><br><span class="line"><span class="string">&quot;UserManagement&quot;</span>: <span class="string">&quot;ç”¨æˆ·ç®¡ç†&quot;</span></span><br><span class="line"> </span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">&quot;fr&quot;</span>: &#123;</span><br><span class="line"><span class="string">&quot;Welcome&quot;</span>: <span class="string">&quot;Bienvenue&quot;</span>,</span><br><span class="line"><span class="string">&quot;Login&quot;</span>: <span class="string">&quot;Connexion&quot;</span>,</span><br><span class="line"><span class="string">&quot;Setting&quot;</span>: <span class="string">&quot;RÃ©glage&quot;</span>,</span><br><span class="line"><span class="string">&quot;UserManagement&quot;</span>: <span class="string">&quot;Gestion des utilisateurs&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">&quot;ru&quot;</span>: &#123;</span><br><span class="line"><span class="string">&quot;Welcome&quot;</span>: <span class="string">&quot;Ğ”Ğ¾Ğ±Ñ€Ğ¾ Ğ¿Ğ¾Ğ¶Ğ°Ğ»Ğ¾Ğ²Ğ°Ñ‚ÑŒ&quot;</span>,</span><br><span class="line"><span class="string">&quot;Login&quot;</span>: <span class="string">&quot;Ğ’Ğ¾Ğ¹Ñ‚Ğ¸&quot;</span>,</span><br><span class="line"><span class="string">&quot;Setting&quot;</span>: <span class="string">&quot;ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸&quot;</span>,</span><br><span class="line"><span class="string">&quot;UserManagement&quot;</span>: <span class="string">&quot;Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼Ğ¸&quot;</span></span><br><span class="line">&#125;,</span><br><span class="line"><span class="string">&quot;hk&quot;</span>: &#123;</span><br><span class="line"><span class="string">&quot;Welcome&quot;</span>: <span class="string">&quot;æ­¡è¿&quot;</span>,</span><br><span class="line"><span class="string">&quot;Login&quot;</span>: <span class="string">&quot;ç™»éŒ„&quot;</span>,</span><br><span class="line"><span class="string">&quot;Setting&quot;</span>: <span class="string">&quot;è¨­ç½®&quot;</span>,</span><br><span class="line"><span class="string">&quot;UserManagement&quot;</span>: <span class="string">&quot;ç”¨æˆ¶ç®¡ç†&quot;</span>,</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//main.js</span></span><br><span class="line"><span class="keyword">import</span> translations <span class="keyword">from</span> <span class="string">&#x27;./lan.json&#x27;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment">// åˆ›å»º Vue I18n å®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> i18n = <span class="title function_">createI18n</span>(&#123;</span><br><span class="line">    <span class="attr">locale</span>: <span class="string">&#x27;en&#x27;</span>, <span class="comment">// é»˜è®¤è¯­è¨€</span></span><br><span class="line">    <span class="attr">messages</span>: translations</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="5-è¿è¡Œå®ä¾‹-2"><a href="#5-è¿è¡Œå®ä¾‹-2" class="headerlink" title="5.è¿è¡Œå®ä¾‹"></a>5.è¿è¡Œå®ä¾‹</h2><p>â€‹â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041758.jpg"></p><p>â€‹â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041759.jpg"></p><h1 id="Vue-SignalR-å®æ—¶é€šè®¯"><a href="#Vue-SignalR-å®æ—¶é€šè®¯" class="headerlink" title="Vue-SignalR å®æ—¶é€šè®¯"></a>Vue-SignalR å®æ—¶é€šè®¯</h1><p>åœ¨Vueåº”ç”¨ä¸­ä½¿ç”¨SignalRï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œ</p><h2 id="1-å®‰è£…SignalRå®¢æˆ·ç«¯åº“"><a href="#1-å®‰è£…SignalRå®¢æˆ·ç«¯åº“" class="headerlink" title="1.å®‰è£…SignalRå®¢æˆ·ç«¯åº“"></a>1.å®‰è£…SignalRå®¢æˆ·ç«¯åº“</h2><p> é¦–å…ˆï¼Œéœ€è¦å®‰è£…SignalRçš„JavaScriptå®¢æˆ·ç«¯åº“ã€‚å¯ä»¥é€šè¿‡npmæˆ–è€…yarnæ¥å®‰è£…ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install @microsoft/signalr</span><br></pre></td></tr></table></figure><p>or</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add @microsoft/signalr</span><br></pre></td></tr></table></figure><h2 id="2-åœ¨Vueç»„ä»¶ä¸­ä½¿ç”¨SignalR"><a href="#2-åœ¨Vueç»„ä»¶ä¸­ä½¿ç”¨SignalR" class="headerlink" title="2.åœ¨Vueç»„ä»¶ä¸­ä½¿ç”¨SignalR"></a>2.åœ¨Vueç»„ä»¶ä¸­ä½¿ç”¨SignalR</h2><p>åœ¨Vueç»„ä»¶ä¸­å¼•å…¥SignalRåº“ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªSignalRè¿æ¥ï¼Œç„¶åè®¢é˜…æœåŠ¡å™¨å‘é€çš„æ¶ˆæ¯ã€‚</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">HubConnectionBuilder</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;@microsoft/signalr&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          <span class="attr">messageText</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="attr">hubConnection</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="attr">messages</span>: []</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">sendMessage</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">messageText</span>) <span class="keyword">return</span>;</span><br><span class="line"> </span><br><span class="line">      <span class="comment">// å‘é€æ¶ˆæ¯ç»™SignalR Hub</span></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">hubConnection</span>.<span class="title function_">invoke</span>(<span class="string">&#x27;SendMessage2&#x27;</span>,<span class="string">&#x27;user1&#x27;</span>, <span class="variable language_">this</span>.<span class="property">messageText</span>)</span><br><span class="line">        .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Message sent: &#x27;</span>, <span class="variable language_">this</span>.<span class="property">messageText</span>);</span><br><span class="line">          <span class="comment">// æ¸…ç©ºè¾“å…¥æ¡†</span></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">messageText</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">        &#125;)</span><br><span class="line">        .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error sending message: &#x27;</span>, error);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">    <span class="title function_">created</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">hubConnection</span> = <span class="keyword">new</span> <span class="title class_">HubConnectionBuilder</span>()</span><br><span class="line">            .<span class="title function_">withUrl</span>(<span class="string">&quot;/chatHub&quot;</span>) <span class="comment">// SignalR Hubçš„URL</span></span><br><span class="line">            .<span class="title function_">build</span>();</span><br><span class="line"> </span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">hubConnection</span>.<span class="title function_">start</span>()</span><br><span class="line">            .<span class="title function_">then</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;SignalR connection established.&quot;</span>))</span><br><span class="line">            .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;SignalR connection failed: &quot;</span>, err));</span><br><span class="line"> </span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">hubConnection</span>.<span class="title function_">on</span>(<span class="string">&quot;ReceiveMessage&quot;</span>, <span class="function">(<span class="params">user, message</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">messages</span>.<span class="title function_">push</span>(&#123; user, message &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"> </span><br></pre></td></tr></table></figure><p>&#x2F;chatHub æ˜¯æœåŠ¡ç«¯é€šè®¯åœ°å€</p><p>SignalRæœåŠ¡ç«¯   ğŸ‘‰  .NET SignalR Redis</p><h2 id="3-åœ¨æ¨¡æ¿ä¸­æ˜¾ç¤ºæ¶ˆæ¯"><a href="#3-åœ¨æ¨¡æ¿ä¸­æ˜¾ç¤ºæ¶ˆæ¯" class="headerlink" title="3.åœ¨æ¨¡æ¿ä¸­æ˜¾ç¤ºæ¶ˆæ¯"></a>3.åœ¨æ¨¡æ¿ä¸­æ˜¾ç¤ºæ¶ˆæ¯</h2><p> æœ€åï¼Œåœ¨ä½ çš„Vueæ¨¡æ¿ä¸­æ˜¾ç¤ºä»SignalRæ”¶åˆ°çš„æ¶ˆæ¯ã€‚</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;messageText&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;sendMessage&quot;</span>&gt;</span>Send<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">&quot;(message, index) in messages&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123; message.user &#125;&#125;: &#123;&#123; message.message &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªmessageTex è·å–ç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬ç‚¹å‡»æŒ‰é’®Sendæ—¶ï¼Œä¼šè°ƒç”¨sendMessage æ–¹æ³•æ¥å‘é€æ¶ˆæ¯ç»™SignalR Hubã€‚å¹¶å°†è¾“å…¥æ¡†ä¸­çš„æ¶ˆæ¯ä½œä¸ºå‚æ•°ä¼ é€’ç»™å®ƒã€‚</p><h2 id="4-è¿è¡Œå®ä¾‹"><a href="#4-è¿è¡Œå®ä¾‹" class="headerlink" title="4.è¿è¡Œå®ä¾‹"></a>4.è¿è¡Œå®ä¾‹</h2><p>å¯ä»¥çœ‹åˆ°æ¶ˆæ¯å®æ—¶ä¼ é€’åˆ°å¦ä¸€ä¸ªå®¢æˆ·ç«¯<br>â€‹â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041760.jpg"></p><h1 id="Vuex"><a href="#Vuex" class="headerlink" title="Vuex"></a>Vuex</h1><p>Vuex æ˜¯ Vue.js çš„çŠ¶æ€ç®¡ç†åº“ï¼Œç”¨äºé›†ä¸­ç®¡ç†åº”ç”¨çš„çŠ¶æ€</p><p>ç”¨äºå…¨å±€çŠ¶æ€ç®¡ç† æ•°æ®å…±äº« </p><h2 id="1-å®‰è£…Vuex"><a href="#1-å®‰è£…Vuex" class="headerlink" title="1.å®‰è£…Vuex"></a>1.å®‰è£…Vuex</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vuex</span><br></pre></td></tr></table></figure><p>â€‹â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041761.jpg"></p><h2 id="2-å¯¼å…¥ä¾èµ–"><a href="#2-å¯¼å…¥ä¾èµ–" class="headerlink" title="2.å¯¼å…¥ä¾èµ–"></a>2.å¯¼å…¥ä¾èµ–</h2> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span>;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œåšä¸ªç®€å•çš„ç™»å½•Vuex storeä¾‹å­ </p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> api <span class="keyword">from</span> <span class="string">&#x27;../services/api&#x27;</span>;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">createStore</span>(&#123;</span><br><span class="line">  <span class="attr">state</span>: &#123;</span><br><span class="line">    <span class="attr">isLoggedIn</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">user</span>: <span class="literal">null</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="title function_">login</span>(<span class="params">state, user</span>) &#123;</span><br><span class="line">      state.<span class="property">isLoggedIn</span> = <span class="literal">true</span>;</span><br><span class="line">      state.<span class="property">user</span> = user;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">logout</span>(<span class="params">state</span>) &#123;</span><br><span class="line">      state.<span class="property">isLoggedIn</span> = <span class="literal">false</span>;</span><br><span class="line">      state.<span class="property">user</span> = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="keyword">async</span> <span class="title function_">login</span>(<span class="params">&#123; commit &#125;, loginForm</span>) &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> response = <span class="keyword">await</span> api.<span class="title function_">post</span>(<span class="string">&#x27;/api/userApi/GetUserByMobilePwd&#x27;</span>, loginForm);</span><br><span class="line">        <span class="comment">// ç™»å½•æˆåŠŸï¼Œæ›´æ–°ç”¨æˆ·ä¿¡æ¯å¹¶è®¾ç½®ç™»å½•çŠ¶æ€</span></span><br><span class="line">        <span class="title function_">commit</span>(<span class="string">&#x27;login&#x27;</span>, response.<span class="property">data</span>.<span class="property">rsData</span>); <span class="comment">//rsData</span></span><br><span class="line">        <span class="keyword">return</span> response.<span class="property">data</span>;</span><br><span class="line">      &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="comment">// ç™»å½•å¤±è´¥ï¼ŒæŠ›å‡ºé”™è¯¯</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(error.<span class="property">response</span>.<span class="property">data</span>.<span class="property">message</span> || <span class="string">&#x27;Login failed&#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">logout</span>(<span class="params">&#123; commit &#125;</span>) &#123;</span><br><span class="line">      <span class="comment">// æ¸…é™¤ç”¨æˆ·ä¿¡æ¯å¹¶è®¾ç½®ç™»å½•çŠ¶æ€ä¸ºæœªç™»å½•</span></span><br><span class="line">      <span class="title function_">commit</span>(<span class="string">&#x27;logout&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>state å¯¹è±¡åŒ…å«åº”ç”¨çš„å…¨å±€çŠ¶æ€ï¼Œå…¶ä¸­ isLoggedIn æ˜¯å¦å·²ç»ç™»å½•ï¼Œuser å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ã€‚</p><p>mutations </p><p>login æ–¹æ³•ç”¨äºå°†ç”¨æˆ·ç™»å½•çŠ¶æ€è®¾ç½®ä¸ºå·²ç™»å½•ï¼Œå¹¶å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼Œ</p><p>logout æ–¹æ³•ç”¨äºå°†ç”¨æˆ·ç™»å½•çŠ¶æ€è®¾ç½®ä¸ºæœªç™»å½•ï¼Œå¹¶æ¸…ç©ºç”¨æˆ·ä¿¡æ¯ã€‚</p><p>actions </p><p>login æ–¹æ³•ç”¨äºå‘èµ·ç™»å½•è¯·æ±‚ï¼Œå¹¶æ ¹æ®å“åº”ç»“æœæäº¤ login mutation æ¥æ›´æ–°ç”¨æˆ·ç™»å½•çŠ¶æ€å’Œç”¨æˆ·ä¿¡æ¯ï¼Œ</p><p>logout æ–¹æ³•ç”¨äºå¤„ç†ç”¨æˆ·ç™»å‡ºé€»è¾‘ã€‚</p><p>getters åŒ…å«ä¸€äº›è®¡ç®—å±æ€§ï¼Œç”¨äºä» state ä¸­æ´¾ç”Ÿå‡ºä¸€äº›è¡ç”ŸçŠ¶æ€ã€‚</p><p>è¿™é‡Œçš„ isLoggedIn getter è¿”å› state.isLoggedInï¼Œä»¥ç¡®ä¿çŠ¶æ€çš„å“åº”æ€§ã€‚</p><h2 id="3-åœ¨Vueç»„ä»¶ä¸­ä½¿ç”¨"><a href="#3-åœ¨Vueç»„ä»¶ä¸­ä½¿ç”¨" class="headerlink" title="3.åœ¨Vueç»„ä»¶ä¸­ä½¿ç”¨"></a>3.åœ¨Vueç»„ä»¶ä¸­ä½¿ç”¨</h2> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.js</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./services/store.js&#x27;</span>;</span><br><span class="line"> </span><br><span class="line">...</span><br><span class="line">  app.<span class="title function_">provide</span>(<span class="string">&#x27;store&#x27;</span>, store) <span class="comment">// æ³¨å…¥ Vuex store</span></span><br></pre></td></tr></table></figure><h2 id="4-ç¼–å†™ç»„ä»¶"><a href="#4-ç¼–å†™ç»„ä»¶" class="headerlink" title="4.ç¼–å†™ç»„ä»¶"></a>4.ç¼–å†™ç»„ä»¶</h2><p>login logout </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;login-container&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;login-card&quot;</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">      <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">&quot;login-title&quot;</span> <span class="attr">style</span>=<span class="string">&quot;margin-top: ;&quot;</span>&gt;</span>&#123;&#123; $t(&#x27;Login&#x27;) &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">form</span> @<span class="attr">submit.prevent</span>=<span class="string">&quot;login&quot;</span> <span class="attr">class</span>=<span class="string">&quot;login-form&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;mobile&quot;</span>&gt;</span>&#123;&#123; $t(&#x27;username&#x27;) &#125;&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;mobile&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;loginForm.mobile&quot;</span>  &gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-group&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;pwd&quot;</span>&gt;</span>&#123;&#123; $t(&#x27;password&#x27;) &#125;&#125;<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">id</span>=<span class="string">&quot;pwd&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;loginForm.pwd&quot;</span> &gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-if</span>=<span class="string">&quot;!isLoggedIn&quot;</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span>&gt;</span>&#123;&#123; $t(&#x27;Login&#x27;) &#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;isLoggedIn&quot;</span> <span class="attr">class</span>=<span class="string">&quot;user-info&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>Welcome, &#123;&#123; user &amp;&amp; user.UserName &#125;&#125;!<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;logout&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-danger&quot;</span>&gt;</span>&#123;&#123; $t(&#x27;Logout&#x27;) &#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> </span><br><span class="line">      <span class="comment">&lt;!-- æ·»åŠ æŒ‰é’®ç”¨äºæµ‹è¯•</span></span><br><span class="line"><span class="comment">      &lt;button @click=&quot;checkIsLoggedIn&quot; class=&quot;btn btn-primary&quot;&gt;Check isLoggedIn&lt;/button&gt; --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="5-ç¼–å†™è„šæœ¬"><a href="#5-ç¼–å†™è„šæœ¬" class="headerlink" title="5.ç¼–å†™è„šæœ¬"></a>5.ç¼–å†™è„šæœ¬</h2><p>Vue3  setup() å‡½æ•°è®¾ç½®ç»„ä»¶é€»è¾‘</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="title function_">setup</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> store = <span class="title function_">useStore</span>();</span><br><span class="line">    <span class="keyword">const</span> loginForm = <span class="title function_">ref</span>(&#123;</span><br><span class="line">      <span class="attr">mobile</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">      <span class="attr">pwd</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">const</span> isLoggedIn = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> store.<span class="property">state</span>.<span class="property">isLoggedIn</span>); <span class="comment">// ä½¿ç”¨ computed è·å–å“åº”å¼çš„ isLoggedIn</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">const</span> user = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> store.<span class="property">state</span>.<span class="property">user</span>); <span class="comment">// ä½¿ç”¨ computed è·å–å“åº”å¼çš„ user</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">login</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;isLoggedIn before login:&#x27;</span>, isLoggedIn.<span class="property">value</span>); <span class="comment">// åœ¨è°ƒç”¨æ¥å£å‰è¾“å‡º isLoggedIn</span></span><br><span class="line">        <span class="keyword">const</span> result = <span class="keyword">await</span> store.<span class="title function_">dispatch</span>(<span class="string">&#x27;login&#x27;</span>, loginForm.<span class="property">value</span>);</span><br><span class="line">        <span class="keyword">if</span> (result) &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Login successful&#x27;</span>);</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;isLoggedIn after login:&#x27;</span>, isLoggedIn.<span class="property">value</span>); <span class="comment">// åœ¨è°ƒç”¨æ¥å£åè¾“å‡º isLoggedIn</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Login failed: Login unsuccessful&#x27;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Login failed:&#x27;</span>, error.<span class="property">message</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">logout</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">await</span> store.<span class="title function_">dispatch</span>(<span class="string">&#x27;logout&#x27;</span>);</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Logout successful&#x27;</span>);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Logout failed:&#x27;</span>, error.<span class="property">message</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// æ–°å¢æ–¹æ³•ç”¨äºæµ‹è¯•</span></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">checkIsLoggedIn</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;isLoggedIn:&#x27;</span>, isLoggedIn.<span class="property">value</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> &#123; loginForm, login, logout, isLoggedIn, user, checkIsLoggedIn &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>å½“ isLoggedIn åœ¨ mutations ä¸­è¢«ä¿®æ”¹æ—¶ï¼Œç»„ä»¶ä¸­ä½¿ç”¨è¯¥å±æ€§çš„åœ°æ–¹ä¼šç«‹å³æ›´æ–°ã€‚</p><h2 id="6-è¿è¡Œå®ä¾‹"><a href="#6-è¿è¡Œå®ä¾‹" class="headerlink" title="6.è¿è¡Œå®ä¾‹"></a>6.è¿è¡Œå®ä¾‹</h2><p>â€‹â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041762.jpg"></p><p>å½“ç„¶ï¼Œè¿˜æœ‰å¾ˆå¤šç»„ä»¶å€¼å¾—å­¦ä¹ ã€‚</p><p>æ„¿åœ¨å‰ç«¯çš„æ—…ç¨‹ï¼Œä¸æ–­è¿›æ­¥ï¼ğŸ¶</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> VUE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>.NET i18n </title>
      <link href="/2024/04/16/NET-i18n/"/>
      <url>/2024/04/16/NET-i18n/</url>
      
        <content type="html"><![CDATA[<p>ç¯å¢ƒ WIN10 VS2022 .NET8  </p><h1 id="ğŸ‘‹åˆ›å»ºé¡¹ç›®"><a href="#ğŸ‘‹åˆ›å»ºé¡¹ç›®" class="headerlink" title="ğŸ‘‹åˆ›å»ºé¡¹ç›®"></a>ğŸ‘‹åˆ›å»ºé¡¹ç›®</h1><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041301.jpg"></p><h1 id="ğŸ‘€åˆ›å»ºResources-Controllers"><a href="#ğŸ‘€åˆ›å»ºResources-Controllers" class="headerlink" title="ğŸ‘€åˆ›å»ºResources Controllers"></a>ğŸ‘€åˆ›å»ºResources Controllers</h1><p>HomeController.en.resx</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041302.jpg"><br>HomeController.fr.resx</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041303.jpg"><br>HomeController.zh.resx</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041304.jpg"></p><h1 id="ğŸŒ±Program-csæ·»åŠ å›½é™…åŒ–æ”¯æŒ"><a href="#ğŸŒ±Program-csæ·»åŠ å›½é™…åŒ–æ”¯æŒ" class="headerlink" title="ğŸŒ±Program.csæ·»åŠ å›½é™…åŒ–æ”¯æŒ"></a>ğŸŒ±Program.csæ·»åŠ å›½é™…åŒ–æ”¯æŒ</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ·»åŠ å›½é™…åŒ–æ”¯æŒ</span></span><br><span class="line">builder.Services.AddLocalization(options =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    options.ResourcesPath = <span class="string">&quot;Resources&quot;</span>;</span><br><span class="line">&#125;);</span><br><span class="line"> </span><br><span class="line"><span class="keyword">var</span> app = builder.Build();</span><br><span class="line"> </span><br><span class="line"><span class="comment">// å¤šè¯­è¨€</span></span><br><span class="line"><span class="keyword">var</span> supportedCultures = <span class="keyword">new</span> List&lt;CultureInfo&gt;</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">new</span> CultureInfo(<span class="string">&quot;en&quot;</span>),</span><br><span class="line">                <span class="keyword">new</span> CultureInfo(<span class="string">&quot;zh&quot;</span>),</span><br><span class="line">                 <span class="keyword">new</span> CultureInfo(<span class="string">&quot;fr&quot;</span>),</span><br><span class="line">            &#125;;</span><br><span class="line"> </span><br><span class="line">app.UseRequestLocalization(<span class="keyword">new</span> RequestLocalizationOptions</span><br><span class="line">&#123;</span><br><span class="line">    DefaultRequestCulture = <span class="keyword">new</span> RequestCulture(<span class="string">&quot;zh&quot;</span>),</span><br><span class="line">    SupportedCultures = supportedCultures,</span><br><span class="line">    SupportedUICultures = supportedCultures</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h1 id="âš¡æ³¨å…¥localizer"><a href="#âš¡æ³¨å…¥localizer" class="headerlink" title="âš¡æ³¨å…¥localizer"></a>âš¡æ³¨å…¥localizer</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">private</span> <span class="keyword">readonly</span> IStringLocalizer&lt;HomeController&gt; localizer;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">HomeController</span>(<span class="params">ILogger&lt;HomeController&gt; logger,     </span></span></span><br><span class="line"><span class="params"><span class="function">IStringLocalizer&lt;HomeController&gt; localizer</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    _logger = logger;</span><br><span class="line">    <span class="keyword">this</span>.localizer = localizer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="ğŸ“«ç¼–å†™è°ƒç”¨æ–¹æ³•"><a href="#ğŸ“«ç¼–å†™è°ƒç”¨æ–¹æ³•" class="headerlink" title="ğŸ“«ç¼–å†™è°ƒç”¨æ–¹æ³•"></a>ğŸ“«ç¼–å†™è°ƒç”¨æ–¹æ³•</h1><pre><code>    [HttpGet]    public ActionResult&lt;string&gt; Get()    &#123;        string rsstr= localizer.GetString(&quot;String1&quot;).Value;//?ui-culture=zh        return rsstr;    &#125;</code></pre><p>é»˜è®¤æ˜¯ä¸­æ–‡</p><p>?ui-culture&#x3D;en åˆ™å–å¯¹åº”HomeController.en.resx é‡Œé¢çš„String1</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041306.jpg"></p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041307.jpg"></p><p>ğŸŸ</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> .NET </tag>
            
            <tag> i18n </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQL Incorrect string value </title>
      <link href="/2024/04/13/MySQL-Incorrect/"/>
      <url>/2024/04/13/MySQL-Incorrect/</url>
      
        <content type="html"><![CDATA[<p>MySQLå­˜å‚¨IOSä¼ è¿‡æ¥emojié”™è¯¯å¤„ç† Incorrect string value: â€˜â€˜ for column â€˜xxxâ€˜ at row<br>MySQL Incorrect string value: â€˜\xF0\x9F\x8D\xBAâ€˜ for column â€˜xxxâ€˜ at row</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/202404132a.jpg"></p><p>è°ƒç”¨æ¥å£æç¤º</p><p>Incorrect string value: â€˜\xF0\x9F\x8D\xBAâ€™ for column â€˜xxxâ€™ at row </p><p>ğŸ˜µâ€ğŸ’«</p><p>éœ€è¦æŠŠmysqlå­—æ®µæ’åºè§„åˆ™</p><p>utf8mb4_0900_ai_ci</p><p>æ”¹æˆ</p><p>utf8mb4_unicode_ci</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/202404132b.jpg"></p><h1 id="ğŸ’¤SQLè°ƒæ•´"><a href="#ğŸ’¤SQLè°ƒæ•´" class="headerlink" title="ğŸ’¤SQLè°ƒæ•´"></a>ğŸ’¤SQLè°ƒæ•´</h1><p>ALTER TABLE <code>MUser</code> CHANGE <code>Signature</code> <code>Signature</code> VARCHAR(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL;</p><ul><li>è®¾ç½®è¯¥åˆ—çš„å­—ç¬¦é›†ä¸º<code>utf8mb4</code>ã€‚<code>utf8mb4</code>æ˜¯MySQLä¸­çš„ä¸€ä¸ªå­—ç¬¦é›†ï¼Œå®ƒå¯ä»¥å­˜å‚¨å››å­—èŠ‚çš„UTF-8å­—ç¬¦ï¼Œå› æ­¤å¯ä»¥æ”¯æŒæ›´å¤šçš„Unicodeå­—ç¬¦ï¼Œå¦‚æŸäº›è¡¨æƒ…ç¬¦å·ã€‚  </li><li>è®¾ç½®è¯¥åˆ—çš„æ ¡å¯¹è§„åˆ™ä¸º<code>utf8mb4_unicode_ci</code>ã€‚æ ¡å¯¹è§„åˆ™å†³å®šäº†å­—ç¬¦å¦‚ä½•æ¯”è¾ƒå’Œæ’åºã€‚<code>utf8mb4_unicode_ci</code>æ˜¯ä¸€ä¸ªä¸åŒºåˆ†å¤§å°å†™çš„æ ¡å¯¹è§„åˆ™ï¼Œå®ƒåŸºäºUnicodeæ ‡å‡†ã€‚</li></ul><p>ALTER DATABASE IDB CHARACTER SET &#x3D; utf8mb4 COLLATE &#x3D; utf8mb4_unicode_ci;</p><ul><li><p>è®¾ç½®è¯¥æ•°æ®åº“çš„å­—ç¬¦é›†ä¸º<code>utf8mb4</code>ã€‚</p></li><li><p>è®¾ç½®è¯¥æ•°æ®åº“çš„æ ¡å¯¹è§„åˆ™ä¸º<code>utf8mb4_unicode_ci</code>ã€‚</p></li></ul><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/202404132c.jpg"></p><h1 id="ğŸ’¤æœåŠ¡ç«¯è¿æ¥è°ƒæ•´"><a href="#ğŸ’¤æœåŠ¡ç«¯è¿æ¥è°ƒæ•´" class="headerlink" title="ğŸ’¤æœåŠ¡ç«¯è¿æ¥è°ƒæ•´"></a>ğŸ’¤æœåŠ¡ç«¯è¿æ¥è°ƒæ•´</h1><p>  ChatSet utf8mb4</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/202404132d.jpg"></p><h1 id="ğŸ’¤Runing"><a href="#ğŸ’¤Runing" class="headerlink" title="ğŸ’¤Runing"></a>ğŸ’¤Runing</h1><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/202404132e.jpg"></p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/202404132f.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Debian Docker Redis </title>
      <link href="/2024/04/12/debian-docker-reids/"/>
      <url>/2024/04/12/debian-docker-reids/</url>
      
        <content type="html"><![CDATA[<p>Debianå®‰è£…docker</p><h1 id="1-ä½¿ç”¨å®˜æ–¹è„šæœ¬è‡ªåŠ¨å®‰è£…docker"><a href="#1-ä½¿ç”¨å®˜æ–¹è„šæœ¬è‡ªåŠ¨å®‰è£…docker" class="headerlink" title="1.ä½¿ç”¨å®˜æ–¹è„šæœ¬è‡ªåŠ¨å®‰è£…docker"></a>1.ä½¿ç”¨å®˜æ–¹è„šæœ¬è‡ªåŠ¨å®‰è£…docker</h1><p>å®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://get.docker.com -o get-docker.sh</span><br><span class="line">sudo sh get-docker.sh</span><br></pre></td></tr></table></figure><p>å¦‚æœå®‰è£…æç¤º</p><p>-bash sudo command not found</p><p>åˆ™éœ€è¦</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#update</span></span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install sudo</span><br></pre></td></tr></table></figure><p>å†æ‰§è¡Œå®‰è£…è„šæœ¬1</p><p>å®‰è£…æˆåŠŸåå¯ä»¥è¾“å…¥ dockerå‘½ä»¤æŸ¥çœ‹dockerç‰ˆæœ¬ </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#version</span></span><br><span class="line">docker --version</span><br></pre></td></tr></table></figure><p>èƒ½æŸ¥åˆ°è¡¨æ˜å®‰è£…æˆåŠŸ</p><h1 id="2-pull-redis"><a href="#2-pull-redis" class="headerlink" title="2.pull redis"></a>2.pull redis</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#pull redis</span></span><br><span class="line">docker pull redis:latest</span><br><span class="line">pull redisé•œåƒ</span><br></pre></td></tr></table></figure><h1 id="3-åˆ›å»ºreidså®¹å™¨"><a href="#3-åˆ›å»ºreidså®¹å™¨" class="headerlink" title="3.åˆ›å»ºreidså®¹å™¨"></a>3.åˆ›å»ºreidså®¹å™¨</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -itd --name redis-test -p 6379:6379 redis</span><br></pre></td></tr></table></figure><h1 id="4-æµ‹è¯•redis"><a href="#4-æµ‹è¯•redis" class="headerlink" title="4.æµ‹è¯•redis"></a>4.æµ‹è¯•redis</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it redis-test /bin/bash </span><br><span class="line">redis-cli</span><br><span class="line"><span class="built_in">set</span> <span class="built_in">test</span> 1 </span><br><span class="line">get <span class="built_in">test</span> </span><br><span class="line"><span class="built_in">set</span> <span class="built_in">test</span> 1</span><br></pre></td></tr></table></figure><p>æç¤ºok</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">get <span class="built_in">test</span> </span><br></pre></td></tr></table></figure><p>ä¸€äº›å‘½ä»¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#images</span></span><br><span class="line">docker images</span><br><span class="line"></span><br><span class="line"><span class="comment">#redis</span></span><br><span class="line">docker pull redis:latest</span><br><span class="line">docker run -itd --name redis-test -p 6379:6379 redis</span><br><span class="line"><span class="comment">#test redis</span></span><br><span class="line">docker <span class="built_in">exec</span> -it redis-test /bin/bash - </span><br><span class="line">redis-cli</span><br><span class="line"><span class="built_in">set</span> <span class="built_in">test</span> 1 </span><br><span class="line">get <span class="built_in">test</span> </span><br></pre></td></tr></table></figure><p>docker desktopä¹Ÿå¯ä»¥é€šè¿‡å‘½ä»¤å®‰è£…</p><p>å®‰è£…å®Œåå¯ä»¥åœ¨å®¹å™¨åˆ—è¡¨æŸ¥çœ‹</p><!--rediså¯ä»¥å®ç°è½»é‡æ¶ˆæ¯é˜Ÿåˆ—è®¡æ•°å™¨ å…¨å±€è‡ªå¢ åˆ†å¸ƒå¼IDåˆ†å¸ƒå¼é” GEO-->]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Debian </tag>
            
            <tag> Reids </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>.NET SignalR Redis </title>
      <link href="/2024/04/12/NET-SignalR-Redis/"/>
      <url>/2024/04/12/NET-SignalR-Redis/</url>
      
        <content type="html"><![CDATA[<p>ç¯å¢ƒ Win10 VS2022 .NET8 Docker  Redis</p><p>å‰è¨€</p><p>ä»€ä¹ˆæ˜¯ SignalRï¼Ÿ<br>ASP.NET Core SignalR æ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç åº“ï¼Œå¯ç”¨äºç®€åŒ–å‘åº”ç”¨æ·»åŠ å®æ—¶ Web åŠŸèƒ½ã€‚ å®æ—¶ Web åŠŸèƒ½ä½¿æœåŠ¡å™¨ç«¯ä»£ç èƒ½å¤Ÿå°†å†…å®¹æ¨é€åˆ°å®¢æˆ·ç«¯ã€‚</p><p>é€‚åˆ SignalR çš„å€™é€‰é¡¹ï¼š</p><p>éœ€è¦ä»æœåŠ¡å™¨è¿›è¡Œé«˜é¢‘ç‡æ›´æ–°çš„åº”ç”¨ã€‚ ï¼ˆæ¸¸æˆã€ç¤¾äº¤ç½‘ç»œã€æŠ•ç¥¨ã€æ‹å–ã€åœ°å›¾å’Œ GPS åº”ç”¨ï¼‰<br>ä»ªè¡¨æ¿å’Œç›‘è§†åº”ç”¨ã€‚ ï¼ˆå…¬å¸ä»ªè¡¨æ¿ã€å³æ—¶é”€å”®æ›´æ–°æˆ–å‡ºè¡Œè­¦æŠ¥ï¼‰<br>åä½œåº”ç”¨ã€‚ ï¼ˆåŒ…æ‹¬ç™½æ¿åº”ç”¨å’Œå›¢é˜Ÿä¼šè®®è½¯ä»¶ï¼‰<br>éœ€è¦é€šçŸ¥çš„åº”ç”¨ã€‚ï¼ˆ ç¤¾äº¤ç½‘ç»œã€ç”µå­é‚®ä»¶ã€èŠå¤©ã€æ¸¸æˆç­‰ï¼‰<br>SignalR æä¾›ç”¨äºåˆ›å»ºæœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯çš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ (RPC) APIã€‚ RPC ä»æœåŠ¡å™¨ç«¯ .NET Core ä»£ç è°ƒç”¨å®¢æˆ·ç«¯ä¸Šçš„å‡½æ•°ã€‚æ”¯æŒJavaScript ï¼Œ.NET ï¼ŒJAVAï¼ŒSwift ï¼ˆå®˜æ–¹æ²¡æœ‰æ˜ç¡®æ”¯æŒï¼Œè¿™æ˜¯ç¬¬ä¸‰æ–¹åº“ï¼‰å…¶ä¸­æ¯ä¸ªå¹³å°éƒ½æœ‰å„è‡ªçš„å®¢æˆ·ç«¯ SDKã€‚ å› æ­¤ï¼ŒRPC è°ƒç”¨æ‰€è°ƒç”¨çš„ç¼–ç¨‹è¯­è¨€æœ‰æ‰€ä¸åŒã€‚</p><p>ASP.NET Core SignalR çš„ä¸€äº›åŠŸèƒ½ï¼š</p><p>è‡ªåŠ¨å¤„ç†è¿æ¥ç®¡ç†ã€‚<br>åŒæ—¶å‘æ‰€æœ‰è¿æ¥çš„å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ã€‚ ä¾‹å¦‚èŠå¤©å®¤ã€‚<br>å‘ç‰¹å®šå®¢æˆ·ç«¯æˆ–å®¢æˆ·ç«¯ç»„å‘é€æ¶ˆæ¯ã€‚<br>å¯¹å…¶è¿›è¡Œç¼©æ”¾ï¼Œä»¥å¤„ç†ä¸æ–­å¢åŠ çš„æµé‡ã€‚<br>SignalR ä¸­å¿ƒåè®®<br>1.ğŸ‘‹nugetå¼•å…¥SignalR<br>â€‹â€‹<br>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041210.jpg"></p><p>2.ğŸ‘€åˆ›å»ºSignalR Hub</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> Microsoft.AspNetCore.SignalR;</span><br><span class="line"><span class="keyword">using</span> System.Threading.Tasks;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">namespace</span> <span class="title">WebSignalR</span></span><br><span class="line">&#123;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">ChatHub</span> : <span class="title">Hub</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">async</span> Task <span class="title">SendMessage</span>(<span class="params"><span class="built_in">string</span> user, <span class="built_in">string</span> message</span>)</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">await</span> Clients.All.SendAsync(<span class="string">&quot;ReceiveMessage&quot;</span>, user, message);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">   </span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3.ğŸŒ± Program.csæ·»åŠ SignalRæœåŠ¡<br> (Startup.cs)</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ·»åŠ SignalRæœåŠ¡ </span></span><br><span class="line">builder.Services.AddSignalR();</span><br><span class="line">builder.Services.AddControllersWithViews();</span><br><span class="line">app.UseEndpoints(endpoints =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    endpoints.MapHub&lt;ChatHub&gt;(<span class="string">&quot;/chathub&quot;</span>);</span><br><span class="line">    endpoints.MapControllerRoute(</span><br><span class="line">        name: <span class="string">&quot;default&quot;</span>,</span><br><span class="line">        pattern: <span class="string">&quot;&#123;controller=Home&#125;/&#123;action=Index&#125;/&#123;id?&#125;&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>4.ğŸ“« æ·»åŠ å‰ç«¯ä»£ç </p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;text-center&quot;</span>&gt;</span><br><span class="line"> </span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;chat-container&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;userInput&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Your name&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;messageInput&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Type a message...&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;sendButton&quot;</span>&gt;</span>Send<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">&quot;messagesList&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"> </span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/5.0.12/signalr.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">const</span> connection = <span class="keyword">new</span> signalR.<span class="title class_">HubConnectionBuilder</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            .<span class="title function_">withUrl</span>(<span class="string">&quot;/chathub&quot;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            .<span class="title function_">build</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        connection.<span class="title function_">on</span>(<span class="string">&quot;ReceiveMessage&quot;</span>, <span class="keyword">function</span> (<span class="params">user, message</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">const</span> encodedUser = user.<span class="title function_">replace</span>(<span class="regexp">/&amp;/g</span>, <span class="string">&quot;&amp;amp;&quot;</span>).<span class="title function_">replace</span>(<span class="regexp">/&lt;/g</span>, <span class="string">&quot;&amp;lt;&quot;</span>).<span class="title function_">replace</span>(/&gt;</span></span>/g, <span class="string">&quot;&amp;gt;&quot;</span>);</span><br><span class="line">            <span class="keyword">const</span> encodedMessage = message.<span class="title function_">replace</span>(<span class="regexp">/&amp;/g</span>, <span class="string">&quot;&amp;amp;&quot;</span>).<span class="title function_">replace</span>(<span class="regexp">/&lt;/g</span>, <span class="string">&quot;&amp;lt;&quot;</span>).<span class="title function_">replace</span>(<span class="regexp">/&gt;/g</span>, <span class="string">&quot;&amp;gt;&quot;</span>);</span><br><span class="line">            <span class="keyword">const</span> li = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;li&quot;</span>);</span><br><span class="line">            li.<span class="property">textContent</span> = <span class="string">`<span class="subst">$&#123;encodedUser&#125;</span>: <span class="subst">$&#123;encodedMessage&#125;</span>`</span>;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;messagesList&quot;</span>).<span class="title function_">appendChild</span>(li);</span><br><span class="line">        &#125;);</span><br><span class="line"> </span><br><span class="line">        connection.<span class="title function_">start</span>().<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">err</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(err.<span class="title function_">toString</span>());</span><br><span class="line">        &#125;);</span><br><span class="line"> </span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;sendButton&quot;</span>).<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> user = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;userInput&quot;</span>).<span class="property">value</span>;</span><br><span class="line">            <span class="keyword">const</span> message = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;messageInput&quot;</span>).<span class="property">value</span>;</span><br><span class="line">            connection.<span class="title function_">invoke</span>(<span class="string">&quot;SendMessage&quot;</span>, user, message).<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">err</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(err.<span class="title function_">toString</span>());</span><br><span class="line">            &#125;);</span><br><span class="line">            event.<span class="title function_">preventDefault</span>();</span><br><span class="line">        &#125;);</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>5.âš¡F5è¿è¡Œ<br>â€‹<br>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041211.jpg"><br>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041212.jpg"></p><p>å‡çº§ä¼˜åŒ–</p><p>å°è£…Msg</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Msg</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span>? user &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span>? message &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//sendMessage</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">async</span> Task <span class="title">SendMessage</span>(<span class="params">Msg entity</span>)</span></span><br><span class="line">  &#123;</span><br><span class="line">      <span class="keyword">if</span> (Clients != <span class="literal">null</span>)</span><br><span class="line">          <span class="keyword">await</span> Clients.All.SendAsync(<span class="string">&quot;ReceiveMessage&quot;</span>, entity.user, entity.message);<span class="comment">// $&quot;&#123;entity.user&#125; å‘é€æ¶ˆæ¯ï¼š&#123;entity.message&#125;&quot;);</span></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>å‰ç«¯   connection.invoke(â€œSendMessageâ€ â€¦   ä¼ é€’msgå¯¹è±¡è¿›æ¥å³å¯</p><p>6.ğŸ’ªè·¨åŸŸé—®é¢˜</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">builder.Services.AddCors(options =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    options.AddPolicy(<span class="string">&quot;CorsPolicy&quot;</span>,</span><br><span class="line">        builder =&gt; builder</span><br><span class="line">            .AllowAnyMethod()</span><br><span class="line">            .AllowAnyHeader()</span><br><span class="line">            .WithOrigins(<span class="string">&quot;http://localhost:5173&quot;</span>) <span class="comment">// æ›¿æ¢ä¸ºä½ å…è®¸çš„æ¥æº</span></span><br><span class="line">            .AllowCredentials());</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//é€šè¿‡æ·»åŠ app.UseCors(&quot;CorsPolicy&quot;)ä¸­é—´ä»¶æ¥å¯ç”¨è·¨åŸŸæ”¯æŒ</span></span><br><span class="line">app.UseCors(<span class="string">&quot;CorsPolicy&quot;</span>); </span><br></pre></td></tr></table></figure><p>ä¸Šé¢ä»£ç ä¸­çš„WithOriginsæ–¹æ³•æŒ‡å®šäº†å…è®¸è®¿é—®SignalRç«¯ç‚¹çš„æ¥æºã€‚å°†â€‹â€<a href="http://localhost:5173"æ›¿æ¢ä¸ºä½ å…è®¸çš„å®é™…æ¥æºã€‚å¦‚æœè¦å…è®¸ä»»ä½•æ¥æºè®¿é—®ï¼Œå¯ä»¥ä½¿ç”¨é€šé…ç¬¦"*"ã€‚â€‹">http://localhost:5173&quot;æ›¿æ¢ä¸ºä½ å…è®¸çš„å®é™…æ¥æºã€‚å¦‚æœè¦å…è®¸ä»»ä½•æ¥æºè®¿é—®ï¼Œå¯ä»¥ä½¿ç”¨é€šé…ç¬¦&quot;*&quot;ã€‚â€‹</a></p><p>è¿™æ ·å°±å¯ä»¥è·¨åŸŸè®¿é—® ğŸ‘‡Vueè·¨åŸŸ</p><p>â€‹â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041213.jpg"></p><p>7.ğŸ§™â€â™‚ï¸èŠå¤©æ± çš„å®ç°<br>å®é™…ç”Ÿäº§å¯èƒ½éœ€è¦1å¯¹1æˆ–è€…å¤šå¯¹å¤šï¼Œå¯åœ¨åç«¯å»ºç«‹ä¸€ä¸ªå­—å…¸ï¼Œå°†èŠå¤©æ± çš„æ ‡è¯†æ˜ å°„åˆ°è¯¥èŠå¤©æ± çš„è¿æ¥IDåˆ—è¡¨ã€‚</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Dictionary&lt;<span class="built_in">string</span>, List&lt;<span class="built_in">string</span>&gt;&gt; _chatRooms = <span class="keyword">new</span> Dictionary&lt;<span class="built_in">string</span>, List&lt;<span class="built_in">string</span>&gt;&gt;();</span><br><span class="line">     </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">async</span> Task <span class="title">JoinChatRoom</span>(<span class="params"><span class="built_in">string</span> chatRoomId</span>)</span></span><br><span class="line">&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// å°†ç”¨æˆ·è¿æ¥æ·»åŠ åˆ°ç‰¹å®šçš„èŠå¤©æ± </span></span><br><span class="line">    <span class="keyword">if</span> (!MsgSt._chatRooms2.ContainsKey(chatRoomId))</span><br><span class="line">    &#123;</span><br><span class="line">        MsgSt._chatRooms2[chatRoomId] = <span class="keyword">new</span> List&lt;<span class="built_in">string</span>&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    MsgSt._chatRooms2[chatRoomId].Add(Context.ConnectionId);</span><br><span class="line">   <span class="comment">// int i = _chatRooms.Count;</span></span><br><span class="line">    Console.WriteLine(<span class="string">&quot;chatRoomId-Cid&quot;</span> + chatRoomId + <span class="string">&quot; &quot;</span> + Context.ConnectionId);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">async</span> Task <span class="title">SendMessageToChatRoom</span>(<span class="params"><span class="built_in">string</span> chatRoomId, <span class="built_in">string</span> user, <span class="built_in">string</span> message</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// Console.WriteLine(connectionIds);</span></span><br><span class="line">    <span class="comment">// å‘ç‰¹å®šçš„èŠå¤©æ± å‘é€æ¶ˆæ¯</span></span><br><span class="line">    <span class="keyword">if</span> (MsgSt._chatRooms2.TryGetValue(chatRoomId, <span class="keyword">out</span> <span class="keyword">var</span> connectionIds))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">var</span> connectionId <span class="keyword">in</span> connectionIds)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">await</span> Clients.Client(connectionId).SendAsync(<span class="string">&quot;ReceiveMessage&quot;</span>,user, message);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//  await Clients.Client(connectionId).SendAsync(&quot;ReceiveMessage&quot;, message);</span></span><br><span class="line"> </span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">MsgSt</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Dictionary&lt;<span class="built_in">string</span>, List&lt;<span class="built_in">string</span>&gt;&gt; _chatRooms2= <span class="keyword">new</span> Dictionary&lt;<span class="built_in">string</span>, List&lt;<span class="built_in">string</span>&gt;&gt;();</span><br><span class="line">    <span class="comment">//public static int temp2 = 0;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨å‰ç«¯å‘é€æ¶ˆæ¯æ—¶ï¼Œé™¤äº†å‘é€æ¶ˆæ¯å†…å®¹å¤–ï¼Œè¿˜è¦å‘é€æ¶ˆæ¯åˆ°çš„èŠå¤©æ± çš„æ ‡è¯†ã€‚</p><p>JoinChatRoom   SendMessageToChatRoom</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">    &lt;script&gt;</span><br><span class="line">        <span class="keyword">const</span> connection = <span class="keyword">new</span> signalR.<span class="title class_">HubConnectionBuilder</span>()</span><br><span class="line">            .<span class="title function_">withUrl</span>(<span class="string">&quot;/chathub&quot;</span>)</span><br><span class="line">            .<span class="title function_">build</span>();</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">const</span> userId = <span class="string">&quot;userid001&quot;</span>;</span><br><span class="line">        <span class="keyword">const</span> chatRoomId = <span class="string">&quot;room001&quot;</span>; <span class="comment">// èŠå¤©æ± æ ‡è¯†</span></span><br><span class="line"> </span><br><span class="line">        connection.<span class="title function_">on</span>(<span class="string">&quot;ReceiveMessage&quot;</span>, <span class="keyword">function</span> (<span class="params">user, message</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> encodedUser = user.<span class="title function_">replace</span>(<span class="regexp">/&amp;/g</span>, <span class="string">&quot;&amp;amp;&quot;</span>).<span class="title function_">replace</span>(<span class="regexp">/&lt;/g</span>, <span class="string">&quot;&amp;lt;&quot;</span>).<span class="title function_">replace</span>(<span class="regexp">/&gt;/g</span>, <span class="string">&quot;&amp;gt;&quot;</span>);</span><br><span class="line">            <span class="keyword">const</span> encodedMessage = message.<span class="title function_">replace</span>(<span class="regexp">/&amp;/g</span>, <span class="string">&quot;&amp;amp;&quot;</span>).<span class="title function_">replace</span>(<span class="regexp">/&lt;/g</span>, <span class="string">&quot;&amp;lt;&quot;</span>).<span class="title function_">replace</span>(<span class="regexp">/&gt;/g</span>, <span class="string">&quot;&amp;gt;&quot;</span>);</span><br><span class="line">            <span class="keyword">const</span> li = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;li&quot;</span>);</span><br><span class="line">            li.<span class="property">textContent</span> = <span class="string">`<span class="subst">$&#123;encodedUser&#125;</span>: <span class="subst">$&#123;encodedMessage&#125;</span>`</span>;</span><br><span class="line">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;messagesList&quot;</span>).<span class="title function_">appendChild</span>(li);</span><br><span class="line">        &#125;);</span><br><span class="line"> </span><br><span class="line">        connection.<span class="title function_">start</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Connection started&quot;</span> +chatRoomId);</span><br><span class="line">            connection.<span class="title function_">invoke</span>(<span class="string">&quot;JoinChatRoom&quot;</span>, chatRoomId); <span class="comment">// åŠ å…¥ç‰¹å®šçš„èŠå¤©æ± </span></span><br><span class="line">        &#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(err));</span><br><span class="line"> </span><br><span class="line">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;sendButton&quot;</span>).<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> message = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;messageInput&quot;</span>).<span class="property">value</span>;</span><br><span class="line">            <span class="keyword">const</span> user = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;userInput&quot;</span>).<span class="property">value</span>;</span><br><span class="line">            connection.<span class="title function_">invoke</span>(<span class="string">&quot;SendMessageToChatRoom&quot;</span>, chatRoomId, user, message).<span class="title function_">catch</span>(<span class="keyword">function</span> (<span class="params">err</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(err.<span class="title function_">toString</span>());</span><br><span class="line">            &#125;);</span><br><span class="line">            event.<span class="title function_">preventDefault</span>();</span><br><span class="line">        &#125;);</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>chatroom1 </p><p>â€‹<br> â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041214.jpg"><br>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041215.jpg"></p><p>8.â˜”æ–­çº¿é‡è¿<br>ç¡®ä¿å®¢æˆ·ç«¯åœ¨ä¸ SignalR Hub çš„è¿æ¥æ–­å¼€åèƒ½å¤Ÿé‡æ–°è¿æ¥å¹¶æ¢å¤ä¹‹å‰çš„çŠ¶æ€</p><p>å¯ä»¥åœ¨å®¢æˆ·ç«¯ä»£ç ä¸­å®ç°é‡è¿é€»è¾‘</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> isConnected = <span class="literal">false</span>; <span class="comment">// ç”¨äºæ ‡è¯†æ˜¯å¦å·²è¿æ¥</span></span><br><span class="line"><span class="comment">// è¿æ¥æˆåŠŸæ—¶å°† isConnected è®¾ç½®ä¸º true</span></span><br><span class="line">connection.onclose(() =&gt; &#123;</span><br><span class="line">    isConnected = <span class="literal">false</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="function"><span class="keyword">async</span> function <span class="title">startConnection</span>()</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">await</span> connection.start();</span><br><span class="line">        console.log(<span class="string">&quot;Connection started&quot;</span>);</span><br><span class="line">        isConnected = <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">        console.error(err);</span><br><span class="line">        isConnected = <span class="literal">false</span>;</span><br><span class="line">        <span class="comment">// è¿æ¥å¤±è´¥æ—¶å°è¯•é‡æ–°è¿æ¥</span></span><br><span class="line">        setTimeout(startConnection, <span class="number">5000</span>); <span class="comment">// 5ç§’åé‡è¯•</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">startConnection(); <span class="comment">// åˆå§‹è¿æ¥</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>9.ğŸŒ é…ç½®Redisåˆ†å¸ƒå¼ç¼“å­˜<br>Docker Redis ğŸ‘ˆ Rediséƒ¨ç½²</p><p>ç”¨ Microsoft.Extensions.Caching.StackExchangeRedis åŒ…è¿æ¥åˆ° Redis å¹¶ä½¿ç”¨åˆ†å¸ƒå¼ç¼“å­˜ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿å³ä½¿æœåŠ¡é‡å¯ï¼Œä¹Ÿèƒ½å¤Ÿä¿ç•™èŠå¤©å®¤çš„çŠ¶æ€ã€‚</p><p>å®‰è£… Microsoft.Extensions.Caching.StackExchangeRedis   </p><p>â€‹â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041216.jpg"></p><p>or StackExchange.Redis </p><p>â€‹â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041217.jpg"></p><p>Program.cs</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ·»åŠ Redisç¼“å­˜</span></span><br><span class="line">builder.Services.AddStackExchangeRedisCache(options =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    options.Configuration = <span class="string">&quot;127.0.0.1:6379&quot;</span>; <span class="comment">// RedisæœåŠ¡å™¨åœ°å€</span></span><br><span class="line">    options.InstanceName = <span class="string">&quot;ChatRooms&quot;</span>; <span class="comment">// å®ä¾‹åç§°</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>options.Configuration è®¾ç½®ä¸º Redis æœåŠ¡å™¨çš„åœ°å€ï¼Œå¦‚æœ Redis è¿è¡Œåœ¨æœ¬åœ°ï¼Œåˆ™å¯ä»¥è®¾ç½®ä¸º â€œlocalhostâ€ã€‚options.InstanceName æ˜¯ Redis å®ä¾‹åç§°ã€‚</p><p>å¯åŠ¨RedisæœåŠ¡  </p><p>åœ¨ ChatHub ä¸­æ³¨å…¥ IDistributedCacheï¼Œè¿æ¥åˆ° Redis</p><p>_cacheç›¸å½“äº _chatRooms2å­˜æ”¾è¿æ¥IDçš„åˆ—è¡¨</p> <figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">readonly</span> IDistributedCache _cache;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">ChatHub</span>(<span class="params">IDistributedCache cache</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    _cache = cache;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">async</span> Task <span class="title">JoinChatRoom</span>(<span class="params"><span class="built_in">string</span> chatRoomId</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨Redisçš„SETæ“ä½œæ¥æ·»åŠ è¿æ¥IDåˆ°èŠå¤©å®¤  </span></span><br><span class="line">    <span class="keyword">var</span> connectionId = Context.ConnectionId;</span><br><span class="line">    <span class="keyword">var</span> key = <span class="string">$&quot;chatrooms:<span class="subst">&#123;chatRoomId&#125;</span>&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> connectionIds = <span class="keyword">await</span> _cache.GetStringAsync(key);</span><br><span class="line">    <span class="keyword">var</span> connectionsList = <span class="built_in">string</span>.IsNullOrEmpty(connectionIds)</span><br><span class="line">        ? <span class="keyword">new</span> List&lt;<span class="built_in">string</span>&gt;()</span><br><span class="line">        : connectionIds.Split(<span class="keyword">new</span>[] &#123; <span class="string">&#x27;,&#x27;</span> &#125;, StringSplitOptions.RemoveEmptyEntries).ToList();</span><br><span class="line"> </span><br><span class="line">    connectionsList.Add(connectionId);</span><br><span class="line">    <span class="keyword">await</span> _cache.SetStringAsync(key, <span class="built_in">string</span>.Join(<span class="string">&quot;,&quot;</span>, connectionsList));</span><br><span class="line"> </span><br><span class="line">    Console.WriteLine(<span class="string">$&quot;chatRoomId-Cid <span class="subst">&#123;chatRoomId&#125;</span> <span class="subst">&#123;connectionId&#125;</span>&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">async</span> Task <span class="title">SendMessageToChatRoom</span>(<span class="params"><span class="built_in">string</span> chatRoomId, <span class="built_in">string</span> user, <span class="built_in">string</span> message</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> key = <span class="string">$&quot;chatrooms:<span class="subst">&#123;chatRoomId&#125;</span>&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> connectionIds = <span class="keyword">await</span> _cache.GetStringAsync(key);</span><br><span class="line">    <span class="keyword">if</span> (!<span class="built_in">string</span>.IsNullOrEmpty(connectionIds))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">var</span> connectionsList = connectionIds.Split(<span class="keyword">new</span>[] &#123; <span class="string">&#x27;,&#x27;</span> &#125;, StringSplitOptions.RemoveEmptyEntries);</span><br><span class="line">        <span class="keyword">foreach</span> (<span class="keyword">var</span> connectionId <span class="keyword">in</span> connectionsList)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">await</span> Clients.Client(connectionId).SendAsync(<span class="string">&quot;ReceiveMessage&quot;</span>, user, message);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ ·å‰ç«¯ä¼ è¿‡æ¥çš„ room001 room002 ä¾¿ä¼šå­˜å…¥åˆ°Redisé‡Œé¢</p><p>è¿è¡Œè°ƒè¯•çš„æ—¶å€™å¯ä»¥çœ‹åˆ°æœ‰ç”¨æˆ·JionChatRoomçš„chatRoomId connectionId</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041218.jpg"></p><p>ä¹Ÿå¯é€šè¿‡Rediså‘½ä»¤ KEY * æŸ¥çœ‹</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/2024041219.jpg"></p><p>PSï¼šè¿™é‡Œç”¨ç®€å•çš„å­—ç¬¦ä¸²æ¥å­˜å‚¨è¿æ¥IDçš„åˆ—è¡¨ï¼Œè¿æ¥IDä¹‹é—´ç”¨é€—å·åˆ†éš”ï¼Œå®é™…ç”Ÿäº§å¯ä½¿ç”¨Redisçš„é›†åˆï¼ˆSetï¼‰æ•°æ®ç±»å‹æ¥å­˜å‚¨è¿æ¥IDï¼Œè¿˜éœ€å¤„ç†Redisè¿æ¥å¤±è´¥ã€ç¼“å­˜è¿‡æœŸç­‰å¼‚å¸¸æƒ…å†µã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> .NET </tag>
            
            <tag> Redis </tag>
            
            <tag> SignalR </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>.NET Swagger </title>
      <link href="/2024/04/11/NET-Swagger/"/>
      <url>/2024/04/11/NET-Swagger/</url>
      
        <content type="html"><![CDATA[<p>å¼€å‘ç¯å¢ƒ Win10 VS2022 .NET8.0</p><h1 id="1-ä»NuGetæ·»åŠ Swagger"><a href="#1-ä»NuGetæ·»åŠ Swagger" class="headerlink" title="1.ä»NuGetæ·»åŠ Swagger"></a>1.ä»NuGetæ·»åŠ Swagger</h1><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240411a1.jpg"></p><p>åœ¨è§£å†³æ–¹æ¡ˆèµ„æºç®¡ç†å™¨ä¸­å³é”®å•å‡»é¡¹ç›®&gt;ç®¡ç† NuGet åŒ…<br>å°†åŒ…æºè®¾ç½®ä¸ºâ€œnuget.orgâ€<br>ç¡®ä¿å¯ç”¨â€œåŒ…æ‹¬é¢„å‘è¡Œâ€é€‰é¡¹<br>åœ¨æœç´¢æ¡†ä¸­è¾“å…¥â€œSwashbuckle.AspNetCoreâ€<br>ä»â€œæµè§ˆâ€é€‰é¡¹å¡ä¸­é€‰æ‹©æœ€æ–°çš„â€œSwashbuckle.AspNetCoreâ€åŒ…ï¼Œç„¶åå•å‡»â€œå®‰è£…â€</p><h1 id="2-å°†-Swagger-ç”Ÿæˆå™¨æ·»åŠ åˆ°ä»¥ä¸‹ä½ç½®çš„æœåŠ¡é›†åˆä¸­Program-csï¼š"><a href="#2-å°†-Swagger-ç”Ÿæˆå™¨æ·»åŠ åˆ°ä»¥ä¸‹ä½ç½®çš„æœåŠ¡é›†åˆä¸­Program-csï¼š" class="headerlink" title="2.å°† Swagger ç”Ÿæˆå™¨æ·»åŠ åˆ°ä»¥ä¸‹ä½ç½®çš„æœåŠ¡é›†åˆä¸­Program.csï¼š"></a>2.å°† Swagger ç”Ÿæˆå™¨æ·»åŠ åˆ°ä»¥ä¸‹ä½ç½®çš„æœåŠ¡é›†åˆä¸­Program.csï¼š</h1><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">builder.Services.AddControllers();</span><br><span class="line"> </span><br><span class="line">builder.Services.AddEndpointsApiExplorer();</span><br><span class="line">builder.Services.AddSwaggerGen();</span><br></pre></td></tr></table></figure><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240411a2.jpg"></p><p>å¯ç”¨ä¸­é—´ä»¶ ç”Ÿæˆ</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">app.UseSwagger();</span><br><span class="line">app.UseSwaggerUI();</span><br><span class="line"> </span><br><span class="line">app.UseSwaggerUI(options =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    options.SwaggerEndpoint(<span class="string">&quot;/swagger/v1/swagger.json&quot;</span>, <span class="string">&quot;v1&quot;</span>);</span><br><span class="line">    options.RoutePrefix = <span class="built_in">string</span>.Empty;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240411a3.jpg"></p><h1 id="3-æ·»åŠ APIæ§åˆ¶å™¨"><a href="#3-æ·»åŠ APIæ§åˆ¶å™¨" class="headerlink" title="3.æ·»åŠ APIæ§åˆ¶å™¨"></a>3.æ·»åŠ APIæ§åˆ¶å™¨</h1><p>åˆ›å»ºapi</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// GET api/&lt;myapi&gt;/5</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> getid</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;param name=&quot;id&quot;&gt;</span>idå‚æ•°<span class="doctag">&lt;/param&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span>valuestr<span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">[<span class="meta">HttpGet(<span class="string">&quot;&#123;id&#125;&quot;</span>)</span>]</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">Get</span>(<span class="params"><span class="built_in">int</span> id</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;value&quot;</span> + id;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// POST api/&lt;myapi&gt;</span></span><br><span class="line">[<span class="meta">HttpPost</span>]</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">Post</span>(<span class="params">[FromBody] <span class="built_in">string</span> <span class="keyword">value</span></span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//posté€»è¾‘ä»£ç </span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;myPost&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// PUT api/&lt;myapi&gt;/5</span></span><br><span class="line">[<span class="meta">HttpPut(<span class="string">&quot;&#123;id&#125;&quot;</span>)</span>]</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">Put</span>(<span class="params"><span class="built_in">int</span> id, [FromBody] <span class="built_in">string</span> <span class="keyword">value</span></span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//puté€»è¾‘ä»£ç </span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;myPut&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment">// DELETE api/&lt;myapi&gt;/5</span></span><br><span class="line">[<span class="meta">HttpDelete(<span class="string">&quot;&#123;id&#125;&quot;</span>)</span>]</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="built_in">string</span> <span class="title">Delete</span>(<span class="params"><span class="built_in">int</span> id</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//deleteé€»è¾‘ä»£ç </span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;myDelete&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240411a4.jpg"></p><h1 id="4-F5è¿è¡Œ-è®¿é—®-swagger-index-html"><a href="#4-F5è¿è¡Œ-è®¿é—®-swagger-index-html" class="headerlink" title="4.F5è¿è¡Œ è®¿é—®&#x2F;swagger&#x2F;index.html"></a>4.F5è¿è¡Œ è®¿é—®&#x2F;swagger&#x2F;index.html</h1><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240411a5.jpg"></p><h1 id="5-try-it-outæµ‹è¯•API"><a href="#5-try-it-outæµ‹è¯•API" class="headerlink" title="5.try it outæµ‹è¯•API"></a>5.try it outæµ‹è¯•API</h1><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240411a6.jpg"></p><p>çœ‹åˆ°è¿”å›äº† value111  å³æ¥å£æ²¡é—®é¢˜</p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> .NET </tag>
            
            <tag> Swagger </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker MySQL </title>
      <link href="/2024/04/11/Docker-MySQL/"/>
      <url>/2024/04/11/Docker-MySQL/</url>
      
        <content type="html"><![CDATA[<p>1.ä¸‹è½½docker desktop<br><a href="https://www.docker.com/products/docker-desktop/">https://www.docker.com/products/docker-desktop/</a></p><ol start="2"><li>åˆ›å»ºå®¹å™¨<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run </span><br></pre></td></tr></table></figure>åˆ›å»ºå¹¶å¯åŠ¨mysqlå®¹å™¨</li></ol><p>â€“name å®¹å™¨åå­— </p><p>-d åå°è¿è¡Œå®¹å™¨</p><p>-p æ˜ å°„ç«¯å£</p><p>-e å‚æ•°</p><p>æˆªè‡³ç›®å‰æœ€æ–°çš„mysqlæ˜¯mysql8.0.36 é‚£å°±æ•´è¿™ä¸ªè¯•ä¸‹ã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name mysql-container -e TZ=UTC -p 30306:3306 -e MYSQL_ROOT_PASSWORD=ä½ çš„å¯†ç  mysql:8.0.36-debian</span><br></pre></td></tr></table></figure><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240411a.jpg"></p><p>ç­‰å¾…ä¸€ä¼šï¼Œçœ‹åˆ°mysqlå·²ç»pullä¸‹æ¥ã€‚</p><p>å›åˆ°dockerçœ‹åˆ°å®¹å™¨å·²ç»åˆ›å»ºã€‚</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240411b.jpg"></p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240411c.jpg"></p><p>å¯ä»¥è¾“å…¥docker imagesæŸ¥çœ‹</p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240411d.jpg"></p><p>3.åˆ›å»ºmysqlæ•°æ®åº“ç®¡ç†è½¯ä»¶å®¹å™¨</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name myadmin -d --<span class="built_in">link</span> mysql-container:db -p 8880:80 phpmyadmin/phpmyadmin</span><br></pre></td></tr></table></figure><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240411e.jpg"></p><p>å›åˆ°dockeræŸ¥çœ‹ä¸‹å®¹å™¨æ˜¯å¦åˆ›å»ºæˆåŠŸã€‚<br>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240411f.jpg"></p><p>å¤åˆ¶åœ°å€åˆ°æµè§ˆå™¨è®¿é—®ã€‚<br>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240411g.jpg"></p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/qfsysw/resources@1.3/v2/20240411h.jpg"></p><p>okok</p><p>å”‰å“Ÿä¸é”™å“¦~</p><p>æ‰©å±•ï¼šubuntuç‰ˆæœ¬</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name mysql-container -e TZ=UTC -p 30306:3306 -e MYSQL_ROOT_PASSWORD=xxxxxx ubuntu/mysql:8.0-22.04_beta</span><br></pre></td></tr></table></figure><p> <a href="https://hub.docker.com/r/ubuntu/mysql?uuid=D64B1F2A-A81A-4D2C-B66B-FCFAECE77EFE">https://hub.docker.com/r/ubuntu/mysql?uuid=D64B1F2A-A81A-4D2C-B66B-FCFAECE77EFE</a></p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2024/03/20/hello-world/"/>
      <url>/2024/03/20/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">npm install hexo-cli -g</span><br><span class="line">hexo init blog</span><br><span class="line"><span class="built_in">cd</span> blog</span><br><span class="line">npm install</span><br><span class="line">hexo server</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> .NET </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>cloud act</title>
      <link href="/2023/08/03/Cloud/"/>
      <url>/2023/08/03/Cloud/</url>
      
        <content type="html"><![CDATA[<p><a href="https://cloud.tencent.com/">https://cloud.tencent.com/</a></p><p><a href="https://www.aliyun.com/">https://www.aliyun.com/</a></p><p><a href="https://activity.huaweicloud.com/ecs.html">https://activity.huaweicloud.com/ecs.html</a></p><p><a href="https://www.jdcloud.com/cn/activity/promotions">https://www.jdcloud.com/cn/activity/promotions</a></p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯ </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>100ä»¶å°äº‹</title>
      <link href="/2023/02/20/T100/"/>
      <url>/2023/02/20/T100/</url>
      
        <content type="html"><![CDATA[<br><div class="container grid-sm s-content posts">    <div class="column col-12">        <ol>                        <li class="done"><del>æ‰‹ç‰µæ‰‹é€›è¡—</del></li>                        <li class="done"><del>ä¸€èµ·çœ‹æµ·</del></li>                        <li class="">ä¸€èµ·çœ‹é›ª</li>                        <li class="done"><del>å–‚æˆ‘åƒä¸œè¥¿</del></li>                        <li class="">ä¸€èµ·å †é›ªäºº</li>                        <li class="done"><del>ä¸€èµ·åæ‘©å¤©è½®</del></li>                        <li class="">ä¸€èµ·æ¶ä½œå‰§</li>                        <li class="done"><del>ä¸€èµ·åæµ·ç›—èˆ¹</del></li>                        <li class="done"><del>åƒåŒä¸€æ¯å†°æ·‡æ·‹</del></li>                        <li class="done"><del>ä¸€èµ·æ¬ä¸œè¥¿</del></li>                        <li class="done"><del>ä¸€èµ·å¸ƒç½®æˆ‘ä»¬çš„å°çª</del></li>                        <li class="">ä¸€èµ·çœ‹æ—¥å‡º</li>                        <li class="">ä¸€èµ·çœ‹ææ€–ç‰‡</li>                        <li class="done"><del>é€æƒŠå–œå°ç¤¼ç‰©</del></li>                        <li class="done"><del>ä¸ºæˆ‘åšé¡¿é¥­</del></li>                        <li class="done"><del>ä¸€èµ·çœ‹çˆ±æƒ…ç‰‡</del></li>                        <li class="done">ä¸€èµ·çœ‹æ—¥è½</li>                        <li class="done">ä¸€èµ·æ•°æ˜Ÿæ˜Ÿ</li>                        <li class="done"><del>ä¸€èµ·æ´—è¡£æœ</del></li>                        <li class="done"><del>ä¸€èµ·å¬åŒä¸€é¦–æ›²å­</del></li>                        <li class="done"><del>åœ¨æœ‹å‹é¢å‰ä»‹ç»æˆ‘</del></li>                        <li class="done"><del>æŠŠè‚©è†€å€Ÿç»™æˆ‘é </del></li>                        <li class="done"><del>ä¸ºæˆ‘æ“¦çœ¼æ³ª</del></li>                        <li class="done"><del>å”±æ­Œç»™æˆ‘å¬</del></li>                        <li class="">ä¸ºæˆ‘å†™ç¯‡æ—¥è®°</li>                        <li class="done"><del>åœ¨å¤§è¡—ä¸ŠèƒŒæˆ‘</del></li>                        <li class="done"><del>éšå«éšåˆ°</del></li>                        <li class="">ä¸€èµ·çœ‹çƒèµ›</li>                        <li class="">æ¯”èµ›å•ƒè¥¿ç“œ</li>                        <li class="">åœ¨æ²™æ»©ä¸Šç”»å¿ƒ</li>                        <li class="">ä¸€èµ·æ²¡å½¢è±¡çš„å¤§å«</li>                        <li class="done">ä¸€èµ·ç†¬å¤œç©æ¸¸æˆ</li>                        <li class="done"><del>ä¸ºæˆ‘ç³»é‹å¸¦</del></li>                        <li class="done"><del>ä¸€èµ·æ‹‰ç²‘</del></li>                        <li class="done"><del>ä¸€èµ·å‘å‘†</del></li>                        <li class="done"><del>ä¸€èµ·è¿‡æˆ‘ä»¬çš„çºªå¿µæ—¥</del></li>                        <li class="">ä¸€èµ·åšé™¶ç“·</li>                        <li class="done">ä¸€èµ·è®¸æ„¿</li>                        <li class="done"><del>ä¸€èµ·åšè›‹ç³•</del></li>                        <li class="done"><del>å­¦å¯¹æ–¹è¯´è¯</del></li>                        <li class=""><del>ä¸€èµ·æ¨¡ä»¿æç¬‘çš„äº‹æƒ…</del></li>                        <li class="done"><del>ä¸ºæˆ‘å‰ªæŒ‡ç”²</del></li>                        <li class="done"><del>åƒæˆ‘å‰©ä¸‹çš„é¥­é¥­</del></li>                        <li class="">æŠŠä½ æ¬ºè´Ÿçš„å¯¹æˆ‘æ²¡è¾™</li>                        <li class="">ä¸€èµ·æ‰“æ°´ä»—</li>                        <li class="done"><del>ä¸€èµ·æ‹ç…§ç‰‡</del></li>                        <li class="">ä¸€èµ·éª‘è„šè¸è½¦</li>                        <li class=""><del>æˆ´åŒä¸€æ¡å›´å·¾</del></li>                        <li class="">æˆ´åŒä¸€åŒæ‰‹å¥—</li>                        <li class=""><del>è®²æ•…äº‹å“„æˆ‘ç¡è§‰</del></li>                        <li class="done"><del>ä¸€èµ·åƒæ£‰èŠ±ç³–</del></li>                        <li class="done">ä¸€èµ·å”±æ­Œ</li>                        <li class="done"><del>ä¸€èµ·æ·‹é›¨</del></li>                        <li class="">ä¸€èµ·é¢å¯¹æ‰€æœ‰éš¾å ª</li>                        <li class=""><del>ä¸€èµ·çˆ¬å±±</del></li>                        <li class="">ä¸€èµ·éœ²è¥</li>                        <li class="done">ä¸€èµ·è·‘æ­¥ </li>                        <li class="done"><del>ä¸€èµ·å‚»ç¬‘</del></li>                        <li class="done"><del>ä¸€èµ·åƒè·¯è¾¹æ‘Š</del></li>                        <li class="done"><del>ä¸€èµ·å»çŒ«å’–</del></li>                        <li class="done"><del>ç©¿æƒ…ä¾£è£…æ˜¾æ‘†</del></li>                        <li class="done"><del>ä¸€èµ·æ‰“ç¾½æ¯›çƒ </del></li>                        <li class="done"><del>ä¸€èµ·åƒçˆ±åƒçš„ä¸œè¥¿åˆ°å</del></li>                        <li class="done"><del>ä¸€èµ·è¸©é©¬è·¯åˆ°è„šè½¯</del></li>                        <li class="done">ä¸€èµ·å»æ—…è¡Œ </li>                        <li class="">ä¸€èµ·å»åŠ¨ç‰©å›­ </li>                        <li class="done"><del>å’¬ä¸€ä¸‹ä½ çš„è„¸é¢Š</del></li>                        <li class="done"><del>å¯¹æˆ‘è¯´æ™šå®‰</del></li>                        <li class="done"><del>ä¸€èµ·çœ‹ç”µå½±</del></li>                        <li class="done"><del>ä¸€èµ·ä¹°èœ</del></li>                        <li class="done"><del>æ¯”èµ›çŸ³å¤´å‰ªåˆ€å¸ƒ</del></li>                        <li class="done"><del>ä¸€èµ·è§å¯¹æ–¹çš„æœ‹å‹</del></li>                        <li class="done"><del>ä¸€èµ·åšé¬¼è„¸</del></li>                        <li class="">ä¸€èµ·èµ°éä¸–ç•Œå„åœ°</li>                        <li class="done"><del>ä¸€èµ·åƒå¤§é¤ï¼Œç‰µæ‰‹è¿›å»ï¼Œæ‰¶å¢™å‡ºæ¥</del></li>                        <li class="">ä¸€èµ·æ‰æ°”çƒèµ¢å¥–å“</li>                        <li class="">ç«™åœ¨é©¬è·¯çš„ä¸¤ä¾§å¤§å–Š</li>                        <li class="">çœ‹ä½ æ‰“åœºæ¯”èµ›</li>                        <li class=""><del>ä¸€èµ·çœ‹æ¼”å”±ä¼š</del></li>                        <li class="">ä¸€èµ·æ²¿é“è½¨</li>                        <li class="done"><del>ä¸€èµ·ååœ°é“</del></li>                        <li class="done"><del>ä¸€èµ·æ”¾é£ç­</del></li>                        <li class="">ä¸€èµ·çœ‹èŠ±ç”°</li>                        <li class="done"><del>è¶ä½ ç¡è§‰å·äº²ä½ ä¸€ä¸‹</del></li>                        <li class="">ä¸€èµ·æ”¾å­”æ˜ç¯</li>                        <li class="">ä¸€èµ·é’“é±¼</li>                        <li class=""><del>ä¸€èµ·ä¸‹æ£‹</del></li>                        <li class="done"><del>ä¸€èµ·åœ¨çƒˆæ—¥ä¸‹æš´æ™’</del></li>                        <li class="done"><del>æ‰‹æœºå±ä¿è®¾ç½®å¯¹æ–¹çš„ç…§ç‰‡</del></li>                        <li class="done"><del>ä¸€èµ·æ•·é¢è†œ </del></li>                        <li class="done"><del>ä¸€èµ·æå¯¹æ–¹çš„è„¸</del></li>                        <li class="done"><del>æ‰“èµŒå„ç§å„æ ·çš„äº‹</del></li>                        <li class="done"><del>ä¸€èµ·çœ‹çƒŸç«</del></li>                        <li class="">åœ¨æ ‘ä¸‹åŸ‹ä¸‹æˆ‘ä»¬çš„çº¦å®š</li>                        <li class="">å»æµ·è¾¹æ”¾æ¼‚æµç“¶</li>                        <li class="done"><del>æ‹ä¸€æ¬¡å©šçº±ç…§</del></li>                        <li class="done"><del>æ±‚å©š</del></li>                        <li class="">ç»“å©š</li>                        <li class="">å®Œæˆäººç”Ÿå„é¡¹å¤§äº‹</li>                        <li class="">ç™½å¤´å•è€</li>                    </ol>    </div></div><style>    @charset "UTF-8";a,abbr,address,article,aside,audio,b,blockquote,body,canvas,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,kbd,label,li,mark,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,u,ul,var,video {    margin: 0;    padding: 0;    border: 0;    vertical-align: baseline;    font: inherit;    font-size: 100%}.float_btns {display:none}.sidebar {display:none}body {    line-height: 1;    -webkit-text-size-adjust: none;    -ms-overflow-style: scrollbar}article,aside,details,figcaption,figure,footer,header,hgroup,nav,section {    display: block}button,input,select,textarea {    resize: none}ol,ul {    list-style: none}blockquote,q {    quotes: none}blockquote:after,blockquote:before,q:after,q:before {    content: '';    content: none}table {    border-collapse: collapse;    border-spacing: 0}*,:after,:before {    -webkit-box-sizing: border-box;    -moz-box-sizing: border-box;    box-sizing: border-box}body {    background: #FFF}html {    overflow-x: hidden;    -ms-text-size-adjust: 100%;    -webkit-text-size-adjust: 100%}::-moz-selection {    background-color: #EEE;    color: #000}::selection {    background-color: #EEE;    color: #000}body,input,select,textarea {    color: #444;    font-weight: 400;    font-size: .875rem;    font-family: -apple-system,BlinkMacSystemFont,Avenir,"Avenir Next","Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif;    line-height: 1.65;    text-rendering: geometricPrecision;    -webkit-font-smoothing: antialiased;    -moz-osx-font-smoothing: grayscale}a {    color: #f15bb5;    text-decoration: none}a:hover {    color: #f15bb5}blockquote,dl,ol,p,pre,table,ul {    margin: 10px 0}blockquote,dl,form,ol,p,pre,ul {    letter-spacing: 1px}b,strong {    color: #555;    font-weight: 700}em,i {    font-style: italic}h1,h2,h3,h4,h5,h6 {    margin-top: 0;    margin-bottom: .25em;    color: inherit;    font-weight: 500}h1 {    font-size: 2rem}h2 {    font-size: 1.6rem}h3 {    font-size: 1.4rem}h4 {    font-size: 1.2rem}h5 {    font-size: 1rem}h6 {    font-size: .8rem}sub {    position: relative;    top: .5em;    font-size: .8em}sup {    position: relative;    top: -.5em;    font-size: .8em}blockquote {    padding: 0 15px;    border-left: solid 4px #ddd}code {    margin: .5em .5em;    padding: .25em .65em;    border: solid 1px rgba(144,144,144,.25);    border-radius: 4px;    background: rgba(144,144,144,.075);    font-size: .9em}pre {    font-size: .9em;    -webkit-overflow-scrolling: touch}pre code {    display: block;    overflow-x: auto;    padding: 1em 1.5em;    line-height: 1.75}ol {    padding-left: 1.25em;    list-style: decimal}ol li {    padding-left: .25em}ul {    padding-left: 1em;    list-style: disc}ul li {    padding-left: .5em}dl dt {    display: block;    margin: 0 0 1em 0;    font-weight: 700}dl dd {    margin-left: 2em}hr {    margin: 1em 0;    border: 0;    border-bottom: solid 1px rgba(144,144,144,.25)}hr.major {    margin: 3em 0}label {    display: block;    margin: 0 0 1em 0;    color: #555;    font-weight: 700;    font-size: .9em}table {    overflow: auto;    width: 100%;    border-collapse: collapse;    word-wrap: normal;    font-size: 12px;    border-spacing: 0;    word-break: normal}table tbody,table thead {    background: #f8f8f8}table td,table th {    padding: 6px 13px;    border: 1px solid #ddd}table th {    font-weight: 700}table tbody tr:hover {    background: #efefef}mark {    padding: .05rem;    border-radius: .1rem;    background: #b9e5ff;    color: #555}::-webkit-input-placeholder {    color: #bbb!important;    opacity: 1}:-moz-placeholder {    color: #bbb!important;    opacity: 1}::-moz-placeholder {    color: #bbb!important;    opacity: 1}:-ms-input-placeholder {    color: #bbb!important;    opacity: 1}.button,button,input[type=button],input[type=email],input[type=password],input[type=reset],input[type=submit],input[type=tel],input[type=text],select,textarea {    outline: 0;    border: 0;    border-radius: 4px;    text-decoration: none;    -moz-appearance: none;    -webkit-appearance: none;    -ms-appearance: none;    appearance: none}input[type=email],input[type=password],input[type=tel],input[type=text],select,textarea {    display: block;    padding: 0 1em;    width: 100%;    border: solid 1px rgba(144,144,144,.25);    background: rgba(144,144,144,.075);    color: inherit}input[type=email],input[type=password],input[type=text],select {    height: 2.75em}textarea {    padding: .75em 1em}.select-wrapper {    position: relative;    display: block;    text-decoration: none}.select-wrapper:before {    content: "\e815";    text-transform: none!important;    font-weight: 400;    font-style: normal;    font-family: fontello;    -moz-osx-font-smoothing: grayscale;    -webkit-font-smoothing: antialiased}.select-wrapper:before {    position: absolute;    top: 0;    right: 0;    display: block;    width: 2.75em;    height: 2.75em;    color: rgba(144,144,144,.25);    text-align: center;    line-height: 2.75em;    pointer-events: none}.select-wrapper select::-ms-expand {    display: none}input[type=checkbox],input[type=radio] {    z-index: -1;    float: left;    display: block;    margin-right: -2em;    width: 1em;    opacity: 0;    -moz-appearance: none;    -webkit-appearance: none;    -ms-appearance: none;    appearance: none}input[type=checkbox]+label,input[type=radio]+label {    position: relative;    display: inline-block;    padding-right: .75em;    padding-left: 2.4em;    color: #444;    text-decoration: none;    font-weight: 400;    font-size: 1em;    cursor: pointer}input[type=checkbox]+label:before,input[type=radio]+label:before {    text-transform: none!important;    font-weight: 400;    font-style: normal;    font-family: fontello;    -moz-osx-font-smoothing: grayscale;    -webkit-font-smoothing: antialiased}input[type=checkbox]+label:before,input[type=radio]+label:before {    position: absolute;    top: 0;    left: 0;    display: inline-block;    width: 1.65em;    height: 1.65em;    border: solid 1px rgba(144,144,144,.25);    border-radius: 4px;    background: rgba(144,144,144,.075);    content: '';    text-align: center;    line-height: 1.58125em}input[type=checkbox]:checked+label:before,input[type=radio]:checked+label:before {    border-color: #5a5a5a;    background: #5a5a5a;    color: #fff;    content: '\2713'}input[type=checkbox]+label:before {    border-radius: 4px}input[type=radio]+label:before {    border-radius: 100%}select {    padding-right: 1.1rem;    background: rgba(144,144,144,.075) url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 4 5'%3E%3Cpath fill='%23667189' d='M2 0L0 2h4zm0 5L0 3h4z'/%3E%3C/svg%3E") no-repeat right .35rem center/.4rem .5rem}select::-ms-expand {    display: none}select[multiple] {    height: auto}.button,button,input[type=button],input[type=reset],input[type=submit] {    display: inline-block;    padding: 0 1.5em;    height: 2.85em;    background-color: #5a5a5a;    color: #fff!important;    text-align: center;    white-space: nowrap;    letter-spacing: 2px;    line-height: 2.95em;    cursor: pointer;    -webkit-transition: background-color .2s ease-in-out,color .2s ease-in-out;    -moz-transition: background-color .2s ease-in-out,color .2s ease-in-out;    transition: background-color .2s ease-in-out,color .2s ease-in-out;    -ms-transition: background-color .2s ease-in-out,color .2s ease-in-out}.button,button:hover,input[type=button]:hover,input[type=reset]:hover,input[type=submit]:hover {    background-color: #676767}.button,button:active,input[type=button]:active,input[type=reset]:active,input[type=submit]:active {    background-color: #4d4d4d}.button.alt,button.alt,input[type=button].alt,input[type=reset].alt,input[type=submit].alt {    background-color: transparent;    box-shadow: inset 0 0 0 2px rgba(144,144,144,.25);    color: #555!important}.button.alt:hover,button.alt:hover,input[type=button].alt:hover,input[type=reset].alt:hover,input[type=submit].alt:hover {    background-color: rgba(144,144,144,.075)}.button.alt:active,button.alt:active,input[type=button].alt:active,input[type=reset].alt:active,input[type=submit].alt:active {    background-color: rgba(144,144,144,.2)}.button.disabled,.button:disabled,button.disabled,button:disabled,input[type=button].disabled,input[type=button]:disabled,input[type=reset].disabled,input[type=reset]:disabled,input[type=submit].disabled,input[type=submit]:disabled {    background-color: #444!important;    box-shadow: inset 0 -.15em 0 0 rgba(0,0,0,.15);    color: #fff!important;    opacity: .25;    cursor: not-allowed}.container {    margin-right: auto;    margin-left: auto;    padding-right: .4rem;    padding-left: .4rem;    width: 100%}.container.grid-xl {    max-width: 1296px}.container.grid-lg {    max-width: 976px}.container.grid-md {    max-width: 856px}.container.grid-sm {    max-width: 680px}.container.grid-xs {    max-width: 496px}.show-lg,.show-md,.show-sm,.show-xl,.show-xs {    display: none!important}.columns {    display: flex;    display: -ms-flexbox;    margin-right: -.4rem;    margin-left: -.4rem;    -ms-flex-wrap: wrap;    flex-wrap: wrap}.columns.col-gapless {    margin-right: 0;    margin-left: 0}.columns.col-gapless>.column {    padding-right: 0;    padding-left: 0}.columns.col-oneline {    overflow-x: auto;    -ms-flex-wrap: nowrap;    flex-wrap: nowrap}.column {    padding-right: .4rem;    padding-left: .4rem;    max-width: 100%;    -ms-flex: 1;    flex: 1}.column.col-1,.column.col-10,.column.col-11,.column.col-12,.column.col-2,.column.col-3,.column.col-4,.column.col-5,.column.col-6,.column.col-7,.column.col-8,.column.col-9 {    -ms-flex: none;    flex: none}.s-content .column {    padding: .5rem}.col-12 {    width: 100%}.col-11 {    width: 91.66666667%}.col-10 {    width: 83.33333333%}.col-9 {    width: 75%}.col-8 {    width: 66.66666667%}.col-7 {    width: 58.33333333%}.col-6 {    width: 50%}.col-5 {    width: 41.66666667%}.col-4 {    width: 33.33333333%}.col-3 {    width: 25%}.col-2 {    width: 16.66666667%}.col-1 {    width: 8.33333333%}.col-auto {    width: auto;    max-width: none;    -ms-flex: 0 0 auto;    flex: 0 0 auto}.col-mx-auto {    margin-right: auto;    margin-left: auto}.col-ml-auto {    margin-left: auto}.col-mr-auto {    margin-right: auto}@media (max-width: 1280px) {    .col-xl-1,.col-xl-10,.col-xl-11,.col-xl-12,.col-xl-2,.col-xl-3,.col-xl-4,.col-xl-5,.col-xl-6,.col-xl-7,.col-xl-8,.col-xl-9 {        -ms-flex:none;        flex: none    }    .col-xl-12 {        width: 100%    }    .col-xl-11 {        width: 91.66666667%    }    .col-xl-10 {        width: 83.33333333%    }    .col-xl-9 {        width: 75%    }    .col-xl-8 {        width: 66.66666667%    }    .col-xl-7 {        width: 58.33333333%    }    .col-xl-6 {        width: 50%    }    .col-xl-5 {        width: 41.66666667%    }    .col-xl-4 {        width: 33.33333333%    }    .col-xl-3 {        width: 25%    }    .col-xl-2 {        width: 16.66666667%    }    .col-xl-1 {        width: 8.33333333%    }    .hide-xl {        display: none!important    }    .show-xl {        display: block!important    }}@media (max-width: 960px) {    .col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9 {        -ms-flex:none;        flex: none    }    .col-lg-12 {        width: 100%    }    .col-lg-11 {        width: 91.66666667%    }    .col-lg-10 {        width: 83.33333333%    }    .col-lg-9 {        width: 75%    }    .col-lg-8 {        width: 66.66666667%    }    .col-lg-7 {        width: 58.33333333%    }    .col-lg-6 {        width: 50%    }    .col-lg-5 {        width: 41.66666667%    }    .col-lg-4 {        width: 33.33333333%    }    .col-lg-3 {        width: 25%    }    .col-lg-2 {        width: 16.66666667%    }    .col-lg-1 {        width: 8.33333333%    }    .hide-lg {        display: none!important    }    .show-lg {        display: block!important    }}@media (max-width: 840px) {    .col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9 {        -ms-flex:none;        flex: none    }    .col-md-12 {        width: 100%    }    .col-md-11 {        width: 91.66666667%    }    .col-md-10 {        width: 83.33333333%    }    .col-md-9 {        width: 75%    }    .col-md-8 {        width: 66.66666667%    }    .col-md-7 {        width: 58.33333333%    }    .col-md-6 {        width: 50%    }    .col-md-5 {        width: 41.66666667%    }    .col-md-4 {        width: 33.33333333%    }    .col-md-3 {        width: 25%    }    .col-md-2 {        width: 16.66666667%    }    .col-md-1 {        width: 8.33333333%    }    .hide-md {        display: none!important    }    .show-md {        display: block!important    }}@media (max-width: 600px) {    .col-sm-1,.col-sm-10,.col-sm-11,.col-sm-12,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9 {        -ms-flex:none;        flex: none    }    .col-sm-12 {        width: 100%    }    .col-sm-11 {        width: 91.66666667%    }    .col-sm-10 {        width: 83.33333333%    }    .col-sm-9 {        width: 75%    }    .col-sm-8 {        width: 66.66666667%    }    .col-sm-7 {        width: 58.33333333%    }    .col-sm-6 {        width: 50%    }    .col-sm-5 {        width: 41.66666667%    }    .col-sm-4 {        width: 33.33333333%    }    .col-sm-3 {        width: 25%    }    .col-sm-2 {        width: 16.66666667%    }    .col-sm-1 {        width: 8.33333333%    }    .hide-sm {        display: none!important    }    .show-sm {        display: block!important    }}@media (max-width: 480px) {    .col-xs-1,.col-xs-10,.col-xs-11,.col-xs-12,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-5,.col-xs-6,.col-xs-7,.col-xs-8,.col-xs-9 {        -ms-flex:none;        flex: none    }    .col-xs-12 {        width: 100%    }    .col-xs-11 {        width: 91.66666667%    }    .col-xs-10 {        width: 83.33333333%    }    .col-xs-9 {        width: 75%    }    .col-xs-8 {        width: 66.66666667%    }    .col-xs-7 {        width: 58.33333333%    }    .col-xs-6 {        width: 50%    }    .col-xs-5 {        width: 41.66666667%    }    .col-xs-4 {        width: 33.33333333%    }    .col-xs-3 {        width: 25%    }    .col-xs-2 {        width: 16.66666667%    }    .col-xs-1 {        width: 8.33333333%    }    .hide-xs {        display: none!important    }    .show-xs {        display: block!important    }}.horizontal-align {    display: flex;    justify-content: center}.header {    padding: 50px 0 0}.header .column {    padding: 0}.logo {    display: inline-block;    margin: 0 20px 0 10px;    vertical-align: middle;    font-size: 72px}.logo .i-love {    position: relative;    top: -6px;    width: 69px;    height: 69px;    background: url(img/love.png) no-repeat 0 0;    vertical-align: middle}.ico {    display: inline-block;    width: 16px;    height: 16px;    vertical-align: middle}.logo a {    color: #383838;    font-weight: 700}.description {    display: inline-block;    vertical-align: middle;    letter-spacing: normal;    font-size: 14px}.description a {    border-bottom: 1px solid #f15bb5}.posts {    padding: 0}.posts ol {    margin-left: -30px;    padding-left: 30px}.posts li {    padding: 10px;    border-top: 1px solid #e5e5e5}.posts li p {    margin: 0}.posts li:hover {    background: #f4f4f4}.footer {    color: #999;    font-size: 12px}.footer p:first-child {    margin-top: 0;    padding-top: 1rem;    border-top: 1px solid #e6e6e6}.footer .column {    padding-right: 0;    padding-left: 0}.comments .column {    padding: 0}.comment-form input {    padding: 0 40px 0 18px;    width: 100%;    height: 2.75em;    outline: 0;    border: 1px solid rgba(184,197,214,.2);    background-color: #fff;    -webkit-box-shadow: 0 1px 4px rgba(0,0,0,.1);    box-shadow: 0 1px 4px rgba(0,0,0,.1);    -webkit-appearance: none}.comment-form textarea {    outline: 0;    border: 1px solid rgba(184,197,214,.2);    background-color: #fff;    -webkit-box-shadow: 0 1px 4px rgba(0,0,0,.1);    box-shadow: 0 1px 4px rgba(0,0,0,.1);    -webkit-appearance: none}.comment-form button {    margin-top: 16px;    background-color: #f36;    color: #fff!important}.comment-hr {    margin: 20px 0;    border-top: 2px solid #f15bb5}.comment-list {    margin: 0;    padding: 0;    list-style-type: none}.comment-header {    font-size: 12px}.comment-author {    color: #f15bb5}.comment-content {    margin-left: 60px;    border-radius: 5px;    color: #999;    font-size: 12px}.comment-content p {    margin: 0}.arrow {    position: absolute;    top: 4px;    left: -5px;    display: inline-block;    overflow: hidden;    width: 0;    height: 0;    border-width: 4px 4px 4px 0;    font: 0/0 arial;    border-right-color: #dcdcdc}.larr-in {    left: -4px;    border-right-color: #f8faff}.larr,.larr-in {    border-right-style: solid!important}.larr,.larr-in {    border-top-color: transparent!important;    border-bottom-color: transparent!important;    border-top-style: dashed!important;    border-bottom-style: dashed!important}.comment-header .avatar {    float: left;    display: inline-block;    width: 50px;    height: 50px;    border: 1px solid #eaeaea;    border-radius: 50%}.comment-reply {    float: right}#cancel-comment-reply-link {    margin-left: 16px}.comment-view {    padding: 4px 0;    min-height: 60px;    border-bottom: 1px dotted #e5e5e5}.comment-child {    padding-left: 60px}.lists-navigator {    margin: 20px 0}.lists-navigator ol {    padding: 0 10px;    list-style: none;    text-align: center}.lists-navigator ol li {    display: inline-block;    color: #999}.lists-navigator ol li a {    padding: 0 5px;    color: #999}.lists-navigator ol li.current a {    color: #f15bb5}.done {    color: #999;    font-style: italic}.comment-author-approve {    padding: .1rem .25rem;    border-radius: .25rem;    background-color: #f36;    color: #FFF}.top {    float: right}.comment-author-at {    float: left;    margin-right: 5px}.links {    border-top: 1px solid #e6e6e6}.links ul {    overflow: hidden;    margin: 0;    padding: 0;    margin-top: 16px;    list-style: none}.links ul li {    position: relative;    float: left;    width: 50%;    border-radius: 5px;    list-style: none}.links ul li:hover {    background: rgba(155,155,155,.1)}.links ul li a {    display: block;    padding: 0 10px 0 90px;    height: 90px;    color: #444}.links ul li a img {    position: absolute;    top: 15px;    left: 15px;    margin: 0;    width: 60px;    height: 60px;    border-radius: 50%;    cursor: pointer}.links ul li a h4 {    padding-top: 20px;    font-size: 13px}.links ul li a p {    font-size: 12px}.links ul li a h4,.links ul li a p {    overflow: hidden;    text-overflow: ellipsis;    white-space: nowrap}@media (max-width: 720px) {    .header .column {        padding:.5rem    }    .posts ol {        margin-left: 0;        padding: 0 40px    }    .comments .column {        padding: 0 15px    }    .footer .column {        padding: .5rem 15px    }    .links ul li {        width: 100%    }}@media (max-width: 636px) {    .header {        padding:0    }    .header .column {        text-align: center    }}</style><!-- nofound è½çŸ³è‡ªæˆ‘æ€€ç–‘0511  0803çˆ·çˆ·å¥¶å¥¶æ²¡æœ‰è¾“ç»™æˆ˜ç«ï¼Œçˆ¸çˆ¸å¦ˆå¦ˆæ²¡æœ‰è¾“ç»™è´«ç©·ï¼Œè€Œæˆ‘å´è¾“ç»™å’Œå¹³å¹´ä»£çš„ç”Ÿæ´»ã€‚ã€‚ã€‚ -->]]></content>
      
      
      <categories>
          
          <category> ç”Ÿæ´» </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
