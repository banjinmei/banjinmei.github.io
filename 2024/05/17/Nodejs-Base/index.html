<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="lm">
    
    <title>
        
            Nodejs base |
        
        m study log
    </title>
    
<link rel="stylesheet" href="/css/style.css">

    
        <link rel="shortcut icon" href="/images/logo.svg">
    
    
<link rel="stylesheet" href="/font/css/fontawesome.min.css">

    
<link rel="stylesheet" href="/font/css/regular.min.css">

    
<link rel="stylesheet" href="/font/css/solid.min.css">

    
<link rel="stylesheet" href="/font/css/brands.min.css">

    
    <script class="keep-theme-configurations">
    const KEEP = window.KEEP || {}
    KEEP.hexo_config = {"hostname":"banjinmei.github.io","root":"/","language":"en","path":"search1.xml"}
    KEEP.theme_config = {"base_info":{"primary_color":"#0066cc","title":"m study log","author":"lm","avatar":"/images/avatar.svg","logo":"/images/logo.svg","favicon":"/images/logo.svg"},"menu":{"home":"/","archives":"/archives"},"first_screen":{"enable":false,"background_img":"/images/bg.svg","background_img_dark":"/images/bg.svg","description":"Keep writing and Keep loving.","hitokoto":false},"social_contact":{"enable":false,"links":{"github":null,"weixin":null,"qq":null,"weibo":null,"zhihu":null,"twitter":null,"x":null,"facebook":null,"email":null}},"scroll":{"progress_bar":false,"percent":false,"hide_header":true},"home":{"announcement":null,"category":false,"tag":false,"post_datetime":"updated"},"post":{"author_badge":{"enable":true,"level_badge":true,"custom_badge":["One","Two","Three"]},"word_count":{"wordcount":false,"min2read":false},"datetime_format":"YYYY-MM-DD HH:mm:ss","copyright_info":false,"share":false,"reward":{"enable":false,"img_link":null,"text":null}},"code_block":{"tools":{"enable":false,"style":"default"},"highlight_theme":"default"},"toc":{"enable":false,"number":false,"expand_all":false,"init_open":true,"layout":"right"},"website_count":{"busuanzi_count":{"enable":false,"site_uv":false,"site_pv":false,"page_pv":false}},"local_search":{"enable":true,"preload":true},"comment":{"enable":false,"use":"valine","valine":{"appid":null,"appkey":null,"server_urls":null,"placeholder":null},"gitalk":{"github_id":null,"github_admins":null,"repository":null,"client_id":null,"client_secret":null,"proxy":null},"twikoo":{"env_id":null,"region":null,"version":"1.6.36"},"waline":{"server_url":null,"reaction":false,"version":"3.2.1"},"giscus":{"repo":null,"repo_id":null,"category":"Announcements","category_id":null,"reactions_enabled":false},"artalk":{"server":null},"disqus":{"shortname":null}},"rss":{"enable":false},"lazyload":{"enable":false},"cdn":{"enable":false,"provider":"cdnjs"},"pjax":{"enable":false},"footer":{"since":2020,"word_count":false,"site_deploy":{"enable":false,"provider":"github","url":null},"record":{"enable":false,"list":[{"code":null,"link":null}]}},"inject":{"enable":false,"css":[null],"js":[null]},"root":"","source_data":{},"version":"4.1.3"}
    KEEP.language_ago = {"second":"%s seconds ago","minute":"%s minutes ago","hour":"%s hours ago","day":"%s days ago","week":"%s weeks ago","month":"%s months ago","year":"%s years ago"}
    KEEP.language_code_block = {"copy":"Copy code","copied":"Copied","fold":"Fold code block","folded":"Folded"}
    KEEP.language_copy_copyright = {"copy":"Copy copyright info","copied":"Copied","title":"Original post title","author":"Original post author","link":"Original post link"}
  </script>
<meta name="generator" content="Hexo 7.2.0"><link rel="alternate" href="/atom.xml" title="M Study Log" type="application/atom+xml">
</head>


<body>
<div class="progress-bar-container">
    

    
</div>



<main class="page-container border-box">
    <!-- home first screen  -->
    

    <!-- page content -->
    <div class="page-main-content border-box">
        <div class="page-main-content-top">
            
<header class="header-wrapper">

    <div class="border-box header-content">
        <div class="left border-box">
            
                <a class="logo-image border-box" href="/">
                    <img src="/images/logo.svg">
                </a>
            
            <a class="site-name border-box" href="/">
               m study log
            </a>
        </div>

        <div class="right border-box">
            <div class="pc">
                <ul class="menu-list">
                    
                        
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                
                                HOME
                            </a>
                        </li>
                    
                        
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                
                                ARCHIVES
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas search fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/"
                    >HOME</a>
                </li>
            
                
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives"
                    >ARCHIVES</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle border-box">

            <div class="main-content border-box">
                

                    
<div class="fade-in-down-animation">
    <div class="post-page-container border-box">
        <div class="post-content-container border-box">
            

            <div class="post-content-bottom border-box">
                
                    <div class="post-title">
                        Nodejs base
                    </div>
                

                
                    <div class="post-header border-box">
                        
                            <div class="avatar-box border-box">
                                <img src="/images/face.png">
                            </div>
                        
                        <div class="info-box">
                            <div class="author border-box">
                                <span class="name">mu</span>
                                
                                    <span class="author-badge">Lv5</span>
                                
                            </div>
                            <div class="meta-info border-box">
                                

<div class="post-meta-info-container border-box post">
    <div class="post-meta-info border-box">
        

        
            <span class="meta-info-item post-create-date">
                <i class="icon fa-solid fa-calendar-plus"></i>&nbsp;
                <span class="datetime">2024-05-17 19:00:03</span>
            </span>

            <span class="meta-info-item post-update-date">
                <i class="icon fa-solid fa-file-pen"></i>&nbsp;
                <span class="datetime" data-updated="Sat Jun 01 2024 11:28:02 GMT+0800">2024-06-01 11:28:02</span>
            </span>
        

        
            <span class="meta-info-item post-category border-box"><i class="icon fas fa-folder"></i>&nbsp;
                <ul class="post-category-ul">
                    
                            <li class="category-item"><a href="/categories/%E6%8A%80%E6%9C%AF/">æŠ€æœ¯</a></li>
                        
                    
                </ul>
            </span>
        

        
            <span class="post-tag meta-info-item border-box">
                <ul class="post-tag-ul">
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/socket/">socket</a></li>
                        
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/mysql/">mysql</a></li>
                        
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/Node-js/">Node.js</a></li>
                        
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/helloworld/">helloworld</a></li>
                        
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/event/">event</a></li>
                        
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/buffer/">buffer</a></li>
                        
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/stream/">stream</a></li>
                        
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/c/">c++</a></li>
                        
                    
                            <li class="tag-item"><span class="tag-separator"><i class="icon fas fa-hashtag"></i></span><a href="/tags/router/">router</a></li>
                        
                    
                </ul>
            </span>
        

        
        
        
        
    </div>

    
</div>

                            </div>
                        </div>
                    </div>
                

                <div class="post-content keep-markdown-body ">
                    

                    <p>  ç®€å•çš„è¯´ Node.js å°±æ˜¯è¿è¡Œåœ¨æœåŠ¡ç«¯çš„ JavaScriptã€‚</p>
<p>  Node.js æ˜¯ä¸€ä¸ªåŸºäº Chrome JavaScript è¿è¡Œæ—¶å»ºç«‹çš„ä¸€ä¸ªå¹³å°ã€‚</p>
<p>  Node.js æ˜¯ä¸€ä¸ªäº‹ä»¶é©±åŠ¨ I&#x2F;O æœåŠ¡ç«¯ JavaScript ç¯å¢ƒï¼ŒåŸºäº Google çš„ V8 å¼•æ“ï¼ŒV8 å¼•æ“æ‰§è¡Œ Javascript çš„é€Ÿåº¦éå¸¸å¿«ï¼Œæ€§èƒ½éå¸¸å¥½ã€‚</p>
<h1 id="ğŸ› Node-jså®‰è£…"><a href="#ğŸ› Node-jså®‰è£…" class="headerlink" title="ğŸ› Node.jså®‰è£…"></a>ğŸ› Node.jså®‰è£…</h1><p>  Node.jså®‰è£…åœ¨ä¸Šä¸€ç¯‡æ–‡ç« Debian Node.js HEXO æœ‰è®²åˆ° </p>
<p>  æˆªè‡³ç›®å‰æœ€æ–°çš„ç‰ˆæœ¬æ˜¯20.12.2</p>
<p>  #æŸ¥çœ‹ç‰ˆæœ¬<br>  node -v<br>  v20.12.2</p>
<p>  winä¸‹å¯ä»¥åœ¨å®˜ç½‘ä¸‹è½½å®‰è£…<br>  <a class="link"   target="_blank" rel="noopener" href="https://nodejs.org/en/download" >https://nodejs.org/en/download<i class="fas fa-external-link-alt"></i></a></p>
<h1 id="ğŸ’¬helloworld"><a href="#ğŸ’¬helloworld" class="headerlink" title="ğŸ’¬helloworld"></a>ğŸ’¬helloworld</h1><p>  hi.js</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello world node.js &quot;</span>) <span class="comment">// like javascript~ </span></span><br></pre></td></tr></table></figure>

<p>  node hi.js<br>  [20240504n11]</p>
<h1 id="ğŸ‘©â€ğŸ«Node-js-åˆ›å»ºç¬¬ä¸€ä¸ªåº”ç”¨"><a href="#ğŸ‘©â€ğŸ«Node-js-åˆ›å»ºç¬¬ä¸€ä¸ªåº”ç”¨" class="headerlink" title="ğŸ‘©â€ğŸ«Node.js åˆ›å»ºç¬¬ä¸€ä¸ªåº”ç”¨"></a>ğŸ‘©â€ğŸ«Node.js åˆ›å»ºç¬¬ä¸€ä¸ªåº”ç”¨</h1><h2 id="require-æŒ‡ä»¤"><a href="#require-æŒ‡ä»¤" class="headerlink" title="require æŒ‡ä»¤"></a>require æŒ‡ä»¤</h2>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&quot;http&quot;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="åˆ›å»ºæœåŠ¡å™¨-æ¥æ”¶å“åº”è¯·æ±‚"><a href="#åˆ›å»ºæœåŠ¡å™¨-æ¥æ”¶å“åº”è¯·æ±‚" class="headerlink" title="åˆ›å»ºæœåŠ¡å™¨&#x2F;æ¥æ”¶å“åº”è¯·æ±‚"></a>åˆ›å»ºæœåŠ¡å™¨&#x2F;æ¥æ”¶å“åº”è¯·æ±‚</h2>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&#x27;http&#x27;</span>);</span><br><span class="line"></span><br><span class="line">http.<span class="title function_">createServer</span>(<span class="keyword">function</span> (<span class="params">request, response</span>) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‘é€ HTTP å¤´éƒ¨ </span></span><br><span class="line">    <span class="comment">// HTTP çŠ¶æ€å€¼: 200 : OK</span></span><br><span class="line">    <span class="comment">// å†…å®¹ç±»å‹: text/plain</span></span><br><span class="line">    response.<span class="title function_">writeHead</span>(<span class="number">200</span>, &#123;<span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/plain&#x27;</span>&#125;);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‘é€å“åº”æ•°æ® &quot;Hello World&quot;</span></span><br><span class="line">    response.<span class="title function_">end</span>(<span class="string">&#x27;Hello World\n&#x27;</span>);</span><br><span class="line">&#125;).<span class="title function_">listen</span>(<span class="number">8888</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»ˆç«¯æ‰“å°å¦‚ä¸‹ä¿¡æ¯</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Server running at http://127.0.0.1:1200/&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

  <!--
  node è¿è¡Œ 

  [20240504n12.jpg]
  -->

<h1 id="ğŸš€npmä½¿ç”¨"><a href="#ğŸš€npmä½¿ç”¨" class="headerlink" title="ğŸš€npmä½¿ç”¨"></a>ğŸš€npmä½¿ç”¨</h1><p>  npm æ˜¯åŒ…ç®¡ç†å·¥å…·<br>  å…è®¸ç”¨æˆ·ä»NPMæœåŠ¡å™¨ä¸‹è½½åˆ«äººç¼–å†™çš„ç¬¬ä¸‰æ–¹åŒ…åˆ°æœ¬åœ°ä½¿ç”¨ã€‚<br>  å…è®¸ç”¨æˆ·ä»NPMæœåŠ¡å™¨ä¸‹è½½å¹¶å®‰è£…åˆ«äººç¼–å†™çš„å‘½ä»¤è¡Œç¨‹åºåˆ°æœ¬åœ°ä½¿ç”¨ã€‚<br>  å…è®¸ç”¨æˆ·å°†è‡ªå·±ç¼–å†™çš„åŒ…æˆ–å‘½ä»¤è¡Œç¨‹åºä¸Šä¼ åˆ°NPMæœåŠ¡å™¨ä¾›åˆ«äººä½¿ç”¨ã€‚</p>
<p>  npm -v</p>
<p>  å¦‚æœä½ å®‰è£…çš„æ˜¯æ—§ç‰ˆæœ¬çš„ npmï¼Œå¯ä»¥å¾ˆå®¹æ˜“å¾—é€šè¿‡ npm å‘½ä»¤æ¥å‡çº§ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<p>  $ sudo npm install npm -g<br>  &#x2F;usr&#x2F;local&#x2F;bin&#x2F;npm -&gt; &#x2F;usr&#x2F;local&#x2F;lib&#x2F;node_modules&#x2F;npm&#x2F;bin&#x2F;npm-cli.js<br>  <a class="link"   href="mailto:&#x6e;&#x70;&#x6d;&#x40;&#x32;&#x2e;&#49;&#52;&#46;&#50;" >&#x6e;&#x70;&#x6d;&#x40;&#x32;&#x2e;&#49;&#52;&#46;&#50;<i class="fas fa-external-link-alt"></i></a> &#x2F;usr&#x2F;local&#x2F;lib&#x2F;node_modules&#x2F;npm<br>  å¦‚æœæ˜¯ Window ç³»ç»Ÿä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å³å¯ï¼š</p>
<p>  npm install npm -g<br>  ä½¿ç”¨æ·˜å®é•œåƒçš„å‘½ä»¤ï¼š</p>
<p>  npm install -g cnpm â€“registry&#x3D;<a class="link"   target="_blank" rel="noopener" href="https://registry.npmmirror.com/" >https://registry.npmmirror.com<i class="fas fa-external-link-alt"></i></a></p>
<h2 id="å…¨å±€å®‰è£…ä¸æœ¬åœ°å®‰è£…"><a href="#å…¨å±€å®‰è£…ä¸æœ¬åœ°å®‰è£…" class="headerlink" title="å…¨å±€å®‰è£…ä¸æœ¬åœ°å®‰è£…"></a>å…¨å±€å®‰è£…ä¸æœ¬åœ°å®‰è£…</h2><p>  npm çš„åŒ…å®‰è£…åˆ†ä¸ºæœ¬åœ°å®‰è£…ï¼ˆlocalï¼‰ã€å…¨å±€å®‰è£…ï¼ˆglobalï¼‰ä¸¤ç§ï¼Œä»æ•²çš„å‘½ä»¤è¡Œæ¥çœ‹ï¼Œå·®åˆ«åªæ˜¯æœ‰æ²¡æœ‰-gè€Œå·²ï¼Œæ¯”å¦‚</p>
<p>  npm install express          # æœ¬åœ°å®‰è£…<br>  npm install express -g   # å…¨å±€å®‰è£…<br>  å¦‚æœå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p>
<p>  npm err! Error: connect ECONNREFUSED 127.0.0.1:8087<br>  è§£å†³åŠæ³•ä¸ºï¼š</p>
<p>  $ npm config set proxy null</p>
<h2 id="æŸ¥çœ‹å®‰è£…ä¿¡æ¯"><a href="#æŸ¥çœ‹å®‰è£…ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹å®‰è£…ä¿¡æ¯"></a>æŸ¥çœ‹å®‰è£…ä¿¡æ¯</h2><p>  npm list </p>
<p>  â”€â”€ <a class="link"   href="mailto:&#x65;&#x78;&#112;&#x72;&#x65;&#x73;&#115;&#x40;&#x34;&#46;&#49;&#57;&#x2e;&#50;" >&#x65;&#x78;&#112;&#x72;&#x65;&#x73;&#115;&#x40;&#x34;&#46;&#49;&#57;&#x2e;&#50;<i class="fas fa-external-link-alt"></i></a></p>
<p>  npm list -g</p>
<p>  ä½¿ç”¨package.json<br>  -node_modules&#x2F;express&#x2F;package.json å†…å®¹ï¼š</p>
<p>  Package.json å±æ€§è¯´æ˜</p>
<p>  name - åŒ…åã€‚</p>
<p>  version - åŒ…çš„ç‰ˆæœ¬å·ã€‚</p>
<p>  description - åŒ…çš„æè¿°ã€‚</p>
<p>  homepage - åŒ…çš„å®˜ç½‘ url ã€‚</p>
<p>  author - åŒ…çš„ä½œè€…å§“åã€‚</p>
<p>  contributors - åŒ…çš„å…¶ä»–è´¡çŒ®è€…å§“åã€‚</p>
<p>  dependencies - ä¾èµ–åŒ…åˆ—è¡¨ã€‚å¦‚æœä¾èµ–åŒ…æ²¡æœ‰å®‰è£…ï¼Œnpm ä¼šè‡ªåŠ¨å°†ä¾èµ–åŒ…å®‰è£…åœ¨ node_module ç›®å½•ä¸‹ã€‚</p>
<p>  repository - åŒ…ä»£ç å­˜æ”¾çš„åœ°æ–¹çš„ç±»å‹ï¼Œå¯ä»¥æ˜¯ git æˆ– svnï¼Œgit å¯åœ¨ Github ä¸Šã€‚</p>
<p>  main - main å­—æ®µæŒ‡å®šäº†ç¨‹åºçš„ä¸»å…¥å£æ–‡ä»¶ï¼Œrequire(â€˜moduleNameâ€™) å°±ä¼šåŠ è½½è¿™ä¸ªæ–‡ä»¶ã€‚è¿™ä¸ªå­—æ®µçš„é»˜è®¤å€¼æ˜¯æ¨¡å—æ ¹ç›®å½•ä¸‹é¢çš„ index.jsã€‚</p>
<p>  keywords - å…³é”®å­—</p>
<p>  å¸è½½<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall express</span><br><span class="line">npm <span class="built_in">ls</span></span><br></pre></td></tr></table></figure><br>  æ›´æ–°<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm update express</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>  åˆ›å»º</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br></pre></td></tr></table></figure>
<p>  This utility will walk you through creating a package.json file.<br>  It only covers the most common items, and tries to guess sensible defaults.</p>
<p>  See <code>npm help json</code> for definitive documentation on these fields<br>  and exactly what they do.</p>
<p>  Use <code>npm install &lt;pkg&gt; --save</code> afterwards to install a package and<br>  save it as a dependency in the package.json file.</p>
<p>  Press ^C at any time to quit.<br>  name: (node_modules) runoob                   # æ¨¡å—å<br>  version: (1.0.0)<br>  description: Node.js æµ‹è¯•æ¨¡å—(<a class="link"   target="_blank" rel="noopener" href="http://www.runoob.com/" >www.runoob.com<i class="fas fa-external-link-alt"></i></a>)  # æè¿°<br>  entry point: (index.js)<br>  test command: make test<br>  git repository: <a class="link"   target="_blank" rel="noopener" href="https://github.com/runoob/runoob.git" >https://github.com/runoob/runoob.git<i class="fas fa-external-link-alt"></i></a>  # Github åœ°å€<br>  keywords:<br>  author:<br>  license: (ISC)<br>  About to write to â€¦â€¦&#x2F;node_modules&#x2F;package.json:      # ç”Ÿæˆåœ°å€</p>
<p>  {<br>    â€œnameâ€: â€œrunoobâ€,<br>    â€œversionâ€: â€œ1.0.0â€,<br>    â€œdescriptionâ€: â€œNode.js æµ‹è¯•æ¨¡å—(<a class="link"   target="_blank" rel="noopener" href="http://www.runoob.com/" >www.runoob.com<i class="fas fa-external-link-alt"></i></a>)â€,<br>    â€¦â€¦<br>  }</p>
<p>  Is this ok? (yes) yes</p>
<p>  yesåä¼šç”Ÿæˆ package.json<br>  npm adduser<br>  Username: mcmohd<br>  Password:<br>  Email: (this IS public) <a class="link"   href="mailto:&#109;&#x63;&#x6d;&#x6f;&#x68;&#x64;&#x40;&#x67;&#109;&#97;&#105;&#x6c;&#x2e;&#99;&#111;&#109;" >&#109;&#x63;&#x6d;&#x6f;&#x68;&#x64;&#x40;&#x67;&#109;&#97;&#105;&#x6c;&#x2e;&#99;&#111;&#109;<i class="fas fa-external-link-alt"></i></a></p>
<p>  å‘å¸ƒ<br>  npm publish</p>
<p>  å°±å¯ä»¥è·Ÿå…¶ä»–æ¨¡å—ä¸€æ ·ä½¿ç”¨ npm æ¥å®‰è£…</p>
<h1 id="ğŸ”­Node-js-å›è°ƒå‡½æ•°"><a href="#ğŸ”­Node-js-å›è°ƒå‡½æ•°" class="headerlink" title="ğŸ”­Node.js å›è°ƒå‡½æ•°"></a>ğŸ”­Node.js å›è°ƒå‡½æ•°</h1><p>  Node.js å¼‚æ­¥ç¼–ç¨‹çš„ç›´æ¥ä½“ç°å°±æ˜¯å›è°ƒã€‚</p>
<p>  å¼‚æ­¥ç¼–ç¨‹ä¾æ‰˜äºå›è°ƒæ¥å®ç°ï¼Œä½†ä¸èƒ½è¯´ä½¿ç”¨äº†å›è°ƒåç¨‹åºå°±å¼‚æ­¥åŒ–äº†ã€‚</p>
<p>  å›è°ƒå‡½æ•°åœ¨å®Œæˆä»»åŠ¡åå°±ä¼šè¢«è°ƒç”¨ï¼ŒNode ä½¿ç”¨äº†å¤§é‡çš„å›è°ƒå‡½æ•°ï¼ŒNode æ‰€æœ‰ API éƒ½æ”¯æŒå›è°ƒå‡½æ•°ã€‚</p>
<p>  ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€è¾¹è¯»å–æ–‡ä»¶ï¼Œä¸€è¾¹æ‰§è¡Œå…¶ä»–å‘½ä»¤ï¼Œåœ¨æ–‡ä»¶è¯»å–å®Œæˆåï¼Œæˆ‘ä»¬å°†æ–‡ä»¶å†…å®¹ä½œä¸ºå›è°ƒå‡½æ•°çš„å‚æ•°è¿”å›ã€‚è¿™æ ·åœ¨æ‰§è¡Œä»£ç æ—¶å°±æ²¡æœ‰é˜»å¡æˆ–ç­‰å¾…æ–‡ä»¶ I&#x2F;O æ“ä½œã€‚è¿™å°±å¤§å¤§æé«˜äº† Node.js çš„æ€§èƒ½ï¼Œå¯ä»¥å¤„ç†å¤§é‡çš„å¹¶å‘è¯·æ±‚ã€‚</p>
<p>  å›è°ƒå‡½æ•°ä¸€èˆ¬ä½œä¸ºå‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°å‡ºç°ï¼š</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">foo1</span>(<span class="params">name, age, callback</span>) &#123; &#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo2</span>(<span class="params">value, callback1, callback2</span>) &#123; &#125;</span><br></pre></td></tr></table></figure>

<h2 id="é˜»å¡ä»£ç å®ä¾‹"><a href="#é˜»å¡ä»£ç å®ä¾‹" class="headerlink" title="é˜»å¡ä»£ç å®ä¾‹"></a>é˜»å¡ä»£ç å®ä¾‹</h2><p>  åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ x.txt ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<p>  hi hi hi </p>
<p>  åˆ›å»º main.js æ–‡ä»¶, ä»£ç å¦‚ä¸‹ï¼š<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> data = fs.<span class="title function_">readFileSync</span>(<span class="string">&#x27;x.txt&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data.<span class="title function_">toString</span>());</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ç¨‹åºæ‰§è¡Œç»“æŸ!&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>  ä»¥ä¸Šä»£ç æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<p>  node main.js</p>
<p>  hi hi hi </p>
<p>  ç¨‹åºæ‰§è¡Œç»“æŸ!</p>
<h2 id="éé˜»å¡ä»£ç å®ä¾‹"><a href="#éé˜»å¡ä»£ç å®ä¾‹" class="headerlink" title="éé˜»å¡ä»£ç å®ä¾‹"></a>éé˜»å¡ä»£ç å®ä¾‹</h2><p>  åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ input.txt ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<p>  èœé¸Ÿæ•™ç¨‹å®˜ç½‘åœ°å€ï¼š<a class="link"   target="_blank" rel="noopener" href="http://www.runoob.com/" >www.runoob.com<i class="fas fa-external-link-alt"></i></a><br>  åˆ›å»º main.js æ–‡ä»¶, ä»£ç å¦‚ä¸‹ï¼š<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&#x27;input.txt&#x27;</span>, <span class="keyword">function</span> (<span class="params">err, data</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(err);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data.<span class="title function_">toString</span>());</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ç¨‹åºæ‰§è¡Œç»“æŸ!&quot;</span>);</span><br></pre></td></tr></table></figure><br>  ä»¥ä¸Šä»£ç æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<p>  node main.js</p>
<p>  ç¨‹åºæ‰§è¡Œç»“æŸ!<br>  hi hi hi<br>  ä»¥ä¸Šä¸¤ä¸ªå®ä¾‹æˆ‘ä»¬äº†è§£äº†é˜»å¡ä¸éé˜»å¡è°ƒç”¨çš„ä¸åŒã€‚ç¬¬ä¸€ä¸ªå®ä¾‹åœ¨æ–‡ä»¶è¯»å–å®Œåæ‰æ‰§è¡Œç¨‹åºã€‚ ç¬¬äºŒä¸ªå®ä¾‹æˆ‘ä»¬ä¸éœ€è¦ç­‰å¾…æ–‡ä»¶è¯»å–å®Œï¼Œè¿™æ ·å°±å¯ä»¥åœ¨è¯»å–æ–‡ä»¶æ—¶åŒæ—¶æ‰§è¡Œæ¥ä¸‹æ¥çš„ä»£ç ï¼Œå¤§å¤§æé«˜äº†ç¨‹åºçš„æ€§èƒ½ã€‚</p>
<p>  å› æ­¤ï¼Œé˜»å¡æ˜¯æŒ‰é¡ºåºæ‰§è¡Œçš„ï¼Œè€Œéé˜»å¡æ˜¯ä¸éœ€è¦æŒ‰é¡ºåºçš„ï¼Œæ‰€ä»¥å¦‚æœéœ€è¦å¤„ç†å›è°ƒå‡½æ•°çš„å‚æ•°ï¼Œæˆ‘ä»¬å°±éœ€è¦å†™åœ¨å›è°ƒå‡½æ•°å†…ã€‚</p>
<h1 id="ğŸNode-js-äº‹ä»¶å¾ªç¯"><a href="#ğŸNode-js-äº‹ä»¶å¾ªç¯" class="headerlink" title="ğŸNode.js äº‹ä»¶å¾ªç¯"></a>ğŸNode.js äº‹ä»¶å¾ªç¯</h1><p>  Node.js æ˜¯å•è¿›ç¨‹å•çº¿ç¨‹åº”ç”¨ç¨‹åºï¼Œä½†æ˜¯å› ä¸º V8 å¼•æ“æä¾›çš„å¼‚æ­¥æ‰§è¡Œå›è°ƒæ¥å£ï¼Œé€šè¿‡è¿™äº›æ¥å£å¯ä»¥å¤„ç†å¤§é‡çš„å¹¶å‘ï¼Œæ‰€ä»¥æ€§èƒ½éå¸¸é«˜ã€‚</p>
<p>  Node.js å‡ ä¹æ¯ä¸€ä¸ª API éƒ½æ˜¯æ”¯æŒå›è°ƒå‡½æ•°çš„ã€‚</p>
<p>  Node.js åŸºæœ¬ä¸Šæ‰€æœ‰çš„äº‹ä»¶æœºåˆ¶éƒ½æ˜¯ç”¨è®¾è®¡æ¨¡å¼ä¸­è§‚å¯Ÿè€…æ¨¡å¼å®ç°ã€‚</p>
<p>  Node.js å•çº¿ç¨‹ç±»ä¼¼è¿›å…¥ä¸€ä¸ªwhile(true)çš„äº‹ä»¶å¾ªç¯ï¼Œç›´åˆ°æ²¡æœ‰äº‹ä»¶è§‚å¯Ÿè€…é€€å‡ºï¼Œæ¯ä¸ªå¼‚æ­¥äº‹ä»¶éƒ½ç”Ÿæˆä¸€ä¸ªäº‹ä»¶è§‚å¯Ÿè€…ï¼Œå¦‚æœæœ‰äº‹ä»¶å‘ç”Ÿå°±è°ƒç”¨è¯¥å›è°ƒå‡½æ•°.</p>
<h2 id="äº‹ä»¶é©±åŠ¨ç¨‹åº"><a href="#äº‹ä»¶é©±åŠ¨ç¨‹åº" class="headerlink" title="äº‹ä»¶é©±åŠ¨ç¨‹åº"></a>äº‹ä»¶é©±åŠ¨ç¨‹åº</h2><p>  Node.js ä½¿ç”¨äº‹ä»¶é©±åŠ¨æ¨¡å‹ï¼Œå½“web serveræ¥æ”¶åˆ°è¯·æ±‚ï¼Œå°±æŠŠå®ƒå…³é—­ç„¶åè¿›è¡Œå¤„ç†ï¼Œç„¶åå»æœåŠ¡ä¸‹ä¸€ä¸ªwebè¯·æ±‚ã€‚</p>
<p>  å½“è¿™ä¸ªè¯·æ±‚å®Œæˆï¼Œå®ƒè¢«æ”¾å›å¤„ç†é˜Ÿåˆ—ï¼Œå½“åˆ°è¾¾é˜Ÿåˆ—å¼€å¤´ï¼Œè¿™ä¸ªç»“æœè¢«è¿”å›ç»™ç”¨æˆ·ã€‚</p>
<p>  è¿™ä¸ªæ¨¡å‹éå¸¸é«˜æ•ˆå¯æ‰©å±•æ€§éå¸¸å¼ºï¼Œå› ä¸º webserver ä¸€ç›´æ¥å—è¯·æ±‚è€Œä¸ç­‰å¾…ä»»ä½•è¯»å†™æ“ä½œã€‚ï¼ˆè¿™ä¹Ÿç§°ä¹‹ä¸ºéé˜»å¡å¼IOæˆ–è€…äº‹ä»¶é©±åŠ¨IOï¼‰</p>
<p>  åœ¨äº‹ä»¶é©±åŠ¨æ¨¡å‹ä¸­ï¼Œä¼šç”Ÿæˆä¸€ä¸ªä¸»å¾ªç¯æ¥ç›‘å¬äº‹ä»¶ï¼Œå½“æ£€æµ‹åˆ°äº‹ä»¶æ—¶è§¦å‘å›è°ƒå‡½æ•°ã€‚</p>
<p>  EventEmitters -&gt; Events &#x3D;&gt;&lt;&#x3D; EventLoop  -&gt; Event  Handlers</p>
<p>  æ•´ä¸ªäº‹ä»¶é©±åŠ¨çš„æµç¨‹å°±æ˜¯è¿™ä¹ˆå®ç°çš„ï¼Œéå¸¸ç®€æ´ã€‚æœ‰ç‚¹ç±»ä¼¼äºè§‚å¯Ÿè€…æ¨¡å¼ï¼Œäº‹ä»¶ç›¸å½“äºä¸€ä¸ªä¸»é¢˜(Subject)ï¼Œè€Œæ‰€æœ‰æ³¨å†Œåˆ°è¿™ä¸ªäº‹ä»¶ä¸Šçš„å¤„ç†å‡½æ•°ç›¸å½“äºè§‚å¯Ÿè€…(Observer)ã€‚</p>
<p>  Node.js æœ‰å¤šä¸ªå†…ç½®çš„äº‹ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•å…¥ events æ¨¡å—ï¼Œå¹¶é€šè¿‡å®ä¾‹åŒ– EventEmitter ç±»æ¥ç»‘å®šå’Œç›‘å¬äº‹ä»¶ï¼Œå¦‚ä¸‹å®ä¾‹ï¼š</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥ events æ¨¡å—</span></span><br><span class="line"><span class="keyword">var</span> events = <span class="built_in">require</span>(<span class="string">&#x27;events&#x27;</span>);</span><br><span class="line"><span class="comment">// åˆ›å»º eventEmitter å¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> eventEmitter = <span class="keyword">new</span> events.<span class="title class_">EventEmitter</span>();</span><br></pre></td></tr></table></figure>
<p>  ä»¥ä¸‹ç¨‹åºç»‘å®šäº‹ä»¶å¤„ç†ç¨‹åºï¼š</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç»‘å®šäº‹ä»¶åŠäº‹ä»¶çš„å¤„ç†ç¨‹åº</span></span><br><span class="line">eventEmitter.<span class="title function_">on</span>(<span class="string">&#x27;eventName&#x27;</span>, eventHandler);</span><br></pre></td></tr></table></figure>

<p>  æˆ‘ä»¬å¯ä»¥é€šè¿‡ç¨‹åºè§¦å‘äº‹ä»¶ï¼š</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è§¦å‘äº‹ä»¶</span></span><br><span class="line">eventEmitter.<span class="title function_">emit</span>(<span class="string">&#x27;eventName&#x27;</span>);</span><br></pre></td></tr></table></figure>



<p>  main.js</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼•å…¥ events æ¨¡å—</span></span><br><span class="line"><span class="keyword">var</span> events = <span class="built_in">require</span>(<span class="string">&#x27;events&#x27;</span>);</span><br><span class="line"><span class="comment">// åˆ›å»º eventEmitter å¯¹è±¡</span></span><br><span class="line"><span class="keyword">var</span> eventEmitter = <span class="keyword">new</span> events.<span class="title class_">EventEmitter</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºäº‹ä»¶å¤„ç†ç¨‹åº</span></span><br><span class="line"><span class="keyword">var</span> connectHandler = <span class="keyword">function</span> <span class="title function_">connected</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;è¿æ¥æˆåŠŸã€‚&#x27;</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">// è§¦å‘ data_received äº‹ä»¶ </span></span><br><span class="line">  eventEmitter.<span class="title function_">emit</span>(<span class="string">&#x27;data_received&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»‘å®š connection äº‹ä»¶å¤„ç†ç¨‹åº</span></span><br><span class="line">eventEmitter.<span class="title function_">on</span>(<span class="string">&#x27;connection&#x27;</span>, connectHandler);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨åŒ¿åå‡½æ•°ç»‘å®š data_received äº‹ä»¶</span></span><br><span class="line">eventEmitter.<span class="title function_">on</span>(<span class="string">&#x27;data_received&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æ•°æ®æ¥æ”¶æˆåŠŸã€‚&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§¦å‘ connection äº‹ä»¶ </span></span><br><span class="line">eventEmitter.<span class="title function_">emit</span>(<span class="string">&#x27;connection&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>  connection -&gt;  connectHandler -&gt; data_received</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">node main.js</span><br><span class="line">è¿æ¥æˆåŠŸã€‚</span><br><span class="line">æ•°æ®æ¥æ”¶æˆåŠŸã€‚</span><br><span class="line">ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="Node-åº”ç”¨ç¨‹åºæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ"><a href="#Node-åº”ç”¨ç¨‹åºæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ" class="headerlink" title="Node åº”ç”¨ç¨‹åºæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ"></a>Node åº”ç”¨ç¨‹åºæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h2><p>  åœ¨ Node åº”ç”¨ç¨‹åºä¸­ï¼Œæ‰§è¡Œå¼‚æ­¥æ“ä½œçš„å‡½æ•°å°†å›è°ƒå‡½æ•°ä½œä¸ºæœ€åä¸€ä¸ªå‚æ•°ï¼Œ å›è°ƒå‡½æ•°æ¥æ”¶é”™è¯¯å¯¹è±¡ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚</p>
<p>  æ¥ä¸‹æ¥è®©æˆ‘ä»¬æ¥é‡æ–°çœ‹ä¸‹å‰é¢çš„å®ä¾‹ï¼Œåˆ›å»ºä¸€ä¸ª x.txt ,æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.js</span></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&#x27;x.txt&#x27;</span>, <span class="keyword">function</span> (<span class="params">err, data</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (err)&#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">stack</span>);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(data.<span class="title function_">toString</span>());</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>  æ‰§è¡Œ åˆ™å¼‚æ­¥è¯»å–x.txtå†…å®¹<br>  æŠŠè·¯åŠ²æ”¹æˆ x1.txtè¯»å–é”™è¯¯åˆ™log é”™è¯¯å†…å®¹</p>
<h1 id="ğŸ“”Node-js-EventEmitter"><a href="#ğŸ“”Node-js-EventEmitter" class="headerlink" title="ğŸ“”Node.js EventEmitter"></a>ğŸ“”Node.js EventEmitter</h1><p>  Node.js æ‰€æœ‰çš„å¼‚æ­¥ I&#x2F;O æ“ä½œåœ¨å®Œæˆæ—¶éƒ½ä¼šå‘é€ä¸€ä¸ªäº‹ä»¶åˆ°äº‹ä»¶é˜Ÿåˆ—ã€‚</p>
<p>  Node.js é‡Œé¢çš„è®¸å¤šå¯¹è±¡éƒ½ä¼šåˆ†å‘äº‹ä»¶ï¼šä¸€ä¸ª net.Server å¯¹è±¡ä¼šåœ¨æ¯æ¬¡æœ‰æ–°è¿æ¥æ—¶è§¦å‘ä¸€ä¸ªäº‹ä»¶ï¼Œ ä¸€ä¸ª fs.readStream å¯¹è±¡ä¼šåœ¨æ–‡ä»¶è¢«æ‰“å¼€çš„æ—¶å€™è§¦å‘ä¸€ä¸ªäº‹ä»¶ã€‚ æ‰€æœ‰è¿™äº›äº§ç”Ÿäº‹ä»¶çš„å¯¹è±¡éƒ½æ˜¯ events.EventEmitter çš„å®ä¾‹ã€‚</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.js æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">EventEmitter</span> = <span class="built_in">require</span>(<span class="string">&#x27;events&#x27;</span>).<span class="property">EventEmitter</span>; </span><br><span class="line"><span class="keyword">var</span> event = <span class="keyword">new</span> <span class="title class_">EventEmitter</span>(); </span><br><span class="line">event.<span class="title function_">on</span>(<span class="string">&#x27;some_event&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123; </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;some_event äº‹ä»¶è§¦å‘&#x27;</span>); </span><br><span class="line">&#125;); </span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123; </span><br><span class="line">    event.<span class="title function_">emit</span>(<span class="string">&#x27;some_event&#x27;</span>); </span><br><span class="line">&#125;, <span class="number">10000</span>); </span><br></pre></td></tr></table></figure>
<p>  10såæ‰§è¡Œ some_event è¾“å‡º äº‹ä»¶è§¦å‘</p>
<p>  EventEmitter çš„æ¯ä¸ªäº‹ä»¶ç”±ä¸€ä¸ªäº‹ä»¶åå’Œè‹¥å¹²ä¸ªå‚æ•°ç»„æˆï¼Œäº‹ä»¶åæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé€šå¸¸è¡¨è¾¾ä¸€å®šçš„è¯­ä¹‰ã€‚å¯¹äºæ¯ä¸ªäº‹ä»¶ï¼ŒEventEmitter æ”¯æŒ è‹¥å¹²ä¸ªäº‹ä»¶ç›‘å¬å™¨ã€‚</p>
<p>  å½“äº‹ä»¶è§¦å‘æ—¶ï¼Œæ³¨å†Œåˆ°è¿™ä¸ªäº‹ä»¶çš„äº‹ä»¶ç›‘å¬å™¨è¢«ä¾æ¬¡è°ƒç”¨ï¼Œäº‹ä»¶å‚æ•°ä½œä¸ºå›è°ƒå‡½æ•°å‚æ•°ä¼ é€’ã€‚</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.js æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">var</span> events = <span class="built_in">require</span>(<span class="string">&#x27;events&#x27;</span>); </span><br><span class="line"><span class="keyword">var</span> emitter = <span class="keyword">new</span> events.<span class="title class_">EventEmitter</span>(); </span><br><span class="line">emitter.<span class="title function_">on</span>(<span class="string">&#x27;someEvent&#x27;</span>, <span class="keyword">function</span>(<span class="params">arg1, arg2</span>) &#123; </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;listener1&#x27;</span>, arg1, arg2); </span><br><span class="line">&#125;); </span><br><span class="line">emitter.<span class="title function_">on</span>(<span class="string">&#x27;someEvent&#x27;</span>, <span class="keyword">function</span>(<span class="params">arg1, arg2</span>) &#123; </span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;listener2&#x27;</span>, arg1, arg2); </span><br><span class="line">&#125;); </span><br><span class="line">emitter.<span class="title function_">emit</span>(<span class="string">&#x27;someEvent&#x27;</span>, <span class="string">&#x27;arg1 å‚æ•°&#x27;</span>, <span class="string">&#x27;arg2 å‚æ•°&#x27;</span>); </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>  emitter ä¸ºäº‹ä»¶ someEvent æ³¨å†Œäº†ä¸¤ä¸ªäº‹ä»¶ç›‘å¬å™¨ï¼Œç„¶åè§¦å‘äº† someEvent äº‹ä»¶ã€‚</p>
<p>  è¿è¡Œç»“æœä¸­å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªäº‹ä»¶ç›‘å¬å™¨å›è°ƒå‡½æ•°è¢«å…ˆåè°ƒç”¨ã€‚ è¿™å°±æ˜¯EventEmitteræœ€ç®€å•çš„ç”¨æ³•ã€‚</p>
<p>  EventEmitter æä¾›äº†å¤šä¸ªå±æ€§ï¼Œå¦‚ on å’Œ emitã€‚on å‡½æ•°ç”¨äºç»‘å®šäº‹ä»¶å‡½æ•°ï¼Œemit å±æ€§ç”¨äºè§¦å‘ä¸€ä¸ªäº‹ä»¶ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å…·ä½“çœ‹ä¸‹ EventEmitter çš„å±æ€§ä»‹ç»ã€‚</p>
<p>  .once ç›‘å¬å™¨æœ€å¤šåªä¼šè§¦å‘ä¸€æ¬¡ï¼Œè§¦å‘åç«‹åˆ»è§£é™¤è¯¥ç›‘å¬å™¨</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> events = <span class="built_in">require</span>(<span class="string">&#x27;events&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> eventEmitter = <span class="keyword">new</span> events.<span class="title class_">EventEmitter</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›‘å¬å™¨ #1</span></span><br><span class="line"><span class="keyword">var</span> listener1 = <span class="keyword">function</span> <span class="title function_">listener1</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ç›‘å¬å™¨ listener1 æ‰§è¡Œã€‚&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç›‘å¬å™¨ #2</span></span><br><span class="line"><span class="keyword">var</span> listener2 = <span class="keyword">function</span> <span class="title function_">listener2</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ç›‘å¬å™¨ listener2 æ‰§è¡Œã€‚&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»‘å®š connection äº‹ä»¶ï¼Œå¤„ç†å‡½æ•°ä¸º listener1 </span></span><br><span class="line">eventEmitter.<span class="title function_">addListener</span>(<span class="string">&#x27;connection&#x27;</span>, listener1);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»‘å®š connection äº‹ä»¶ï¼Œå¤„ç†å‡½æ•°ä¸º listener2</span></span><br><span class="line">eventEmitter.<span class="title function_">on</span>(<span class="string">&#x27;connection&#x27;</span>, listener2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> eventListeners = eventEmitter.<span class="title function_">listenerCount</span>(<span class="string">&#x27;connection&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(eventListeners + <span class="string">&quot; ä¸ªç›‘å¬å™¨ç›‘å¬è¿æ¥äº‹ä»¶ã€‚&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤„ç† connection äº‹ä»¶ </span></span><br><span class="line">eventEmitter.<span class="title function_">emit</span>(<span class="string">&#x27;connection&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç§»é™¤ç›‘ç»‘å®šçš„ listener1 å‡½æ•°</span></span><br><span class="line">eventEmitter.<span class="title function_">removeListener</span>(<span class="string">&#x27;connection&#x27;</span>, listener1);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;listener1 ä¸å†å—ç›‘å¬ã€‚&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§¦å‘è¿æ¥äº‹ä»¶</span></span><br><span class="line">eventEmitter.<span class="title function_">emit</span>(<span class="string">&#x27;connection&#x27;</span>);</span><br><span class="line"></span><br><span class="line">eventListeners = eventEmitter.<span class="title function_">listenerCount</span>(<span class="string">&#x27;connection&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(eventListeners + <span class="string">&quot; ä¸ªç›‘å¬å™¨ç›‘å¬è¿æ¥äº‹ä»¶ã€‚&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»‘å®š connection äº‹ä»¶ï¼Œå¤„ç†å‡½æ•°ä¸º listener2</span></span><br><span class="line">eventEmitter.<span class="title function_">on</span>(<span class="string">&#x27;connection&#x27;</span>, listener2);</span><br><span class="line"></span><br><span class="line">eventEmitter.<span class="title function_">emit</span>(<span class="string">&#x27;connection&#x27;</span>);</span><br><span class="line"></span><br><span class="line">eventListeners = eventEmitter.<span class="title function_">listenerCount</span>(<span class="string">&#x27;connection&#x27;</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(eventListeners + <span class="string">&quot; ä¸ªç›‘å¬å™¨ç›‘å¬è¿æ¥äº‹ä»¶ã€‚&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚&quot;</span>);</span><br></pre></td></tr></table></figure>



<p>  error äº‹ä»¶<br>  EventEmitter å®šä¹‰äº†ä¸€ä¸ªç‰¹æ®Šçš„äº‹ä»¶ errorï¼Œå®ƒåŒ…å«äº†é”™è¯¯çš„è¯­ä¹‰ï¼Œæˆ‘ä»¬åœ¨é‡åˆ° å¼‚å¸¸çš„æ—¶å€™é€šå¸¸ä¼šè§¦å‘ error äº‹ä»¶ã€‚</p>
<p>  å½“ error è¢«è§¦å‘æ—¶ï¼ŒEventEmitter è§„å®šå¦‚æœæ²¡æœ‰å“ åº”çš„ç›‘å¬å™¨ï¼ŒNode.js ä¼šæŠŠå®ƒå½“ä½œå¼‚å¸¸ï¼Œé€€å‡ºç¨‹åºå¹¶è¾“å‡ºé”™è¯¯ä¿¡æ¯ã€‚</p>
<p>  æˆ‘ä»¬ä¸€èˆ¬è¦ä¸ºä¼šè§¦å‘ error äº‹ä»¶çš„å¯¹è±¡è®¾ç½®ç›‘å¬å™¨ï¼Œé¿å…é‡åˆ°é”™è¯¯åæ•´ä¸ªç¨‹åºå´©æºƒã€‚ä¾‹å¦‚ï¼š</p>
<p>  ç»§æ‰¿ EventEmitter<br>  å¤§å¤šæ•°æ—¶å€™æˆ‘ä»¬ä¸ä¼šç›´æ¥ä½¿ç”¨ EventEmitterï¼Œè€Œæ˜¯åœ¨å¯¹è±¡ä¸­ç»§æ‰¿å®ƒã€‚åŒ…æ‹¬ fsã€netã€ http åœ¨å†…çš„ï¼Œåªè¦æ˜¯æ”¯æŒäº‹ä»¶å“åº”çš„æ ¸å¿ƒæ¨¡å—éƒ½æ˜¯ EventEmitter çš„å­ç±»ã€‚</p>
<p>  ä¸ºä»€ä¹ˆè¦è¿™æ ·åšå‘¢ï¼ŸåŸå› æœ‰ä¸¤ç‚¹ï¼š</p>
<p>  é¦–å…ˆï¼Œå…·æœ‰æŸä¸ªå®ä½“åŠŸèƒ½çš„å¯¹è±¡å®ç°äº‹ä»¶ç¬¦åˆè¯­ä¹‰ï¼Œ äº‹ä»¶çš„ç›‘å¬å’Œå‘ç”Ÿåº”è¯¥æ˜¯ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•ã€‚</p>
<p>  å…¶æ¬¡ JavaScript çš„å¯¹è±¡æœºåˆ¶æ˜¯åŸºäºåŸå‹çš„ï¼Œæ”¯æŒ éƒ¨åˆ†å¤šé‡ç»§æ‰¿ï¼Œç»§æ‰¿ EventEmitter ä¸ä¼šæ‰“ä¹±å¯¹è±¡åŸæœ‰çš„ç»§æ‰¿å…³ç³»ã€‚</p>
<h1 id="â›-Node-js-Buffer"><a href="#â›-Node-js-Buffer" class="headerlink" title="â› Node.js Buffer"></a>â› Node.js Buffer</h1>  <!-- STRINGBUFFER -->
<p>  JavaScript è¯­è¨€è‡ªèº«åªæœ‰å­—ç¬¦ä¸²æ•°æ®ç±»å‹ï¼Œæ²¡æœ‰äºŒè¿›åˆ¶æ•°æ®ç±»å‹ã€‚</p>
<p>  ä½†åœ¨å¤„ç†åƒTCPæµæˆ–æ–‡ä»¶æµæ—¶ï¼Œå¿…é¡»ä½¿ç”¨åˆ°äºŒè¿›åˆ¶æ•°æ®ã€‚å› æ­¤åœ¨ Node.jsä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸ª Buffer ç±»ï¼Œè¯¥ç±»ç”¨æ¥åˆ›å»ºä¸€ä¸ªä¸“é—¨å­˜æ”¾äºŒè¿›åˆ¶æ•°æ®çš„ç¼“å­˜åŒºã€‚</p>
<p>  åœ¨ Node.js ä¸­ï¼ŒBuffer ç±»æ˜¯éš Node å†…æ ¸ä¸€èµ·å‘å¸ƒçš„æ ¸å¿ƒåº“ã€‚Buffer åº“ä¸º Node.js å¸¦æ¥äº†ä¸€ç§å­˜å‚¨åŸå§‹æ•°æ®çš„æ–¹æ³•ï¼Œå¯ä»¥è®© Node.js å¤„ç†äºŒè¿›åˆ¶æ•°æ®ï¼Œæ¯å½“éœ€è¦åœ¨ Node.js ä¸­å¤„ç†I&#x2F;Oæ“ä½œä¸­ç§»åŠ¨çš„æ•°æ®æ—¶ï¼Œå°±æœ‰å¯èƒ½ä½¿ç”¨ Buffer åº“ã€‚åŸå§‹æ•°æ®å­˜å‚¨åœ¨ Buffer ç±»çš„å®ä¾‹ä¸­ã€‚ä¸€ä¸ª Buffer ç±»ä¼¼äºä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œä½†å®ƒå¯¹åº”äº V8 å †å†…å­˜ä¹‹å¤–çš„ä¸€å—åŸå§‹å†…å­˜ã€‚</p>
<p>  Buffer ä¸å­—ç¬¦ç¼–ç </p>
<p>  Buffer å®ä¾‹ä¸€èˆ¬ç”¨äºè¡¨ç¤ºç¼–ç å­—ç¬¦çš„åºåˆ—ï¼Œæ¯”å¦‚ UTF-8 ã€ UCS2 ã€ Base64 ã€æˆ–åå…­è¿›åˆ¶ç¼–ç çš„æ•°æ®ã€‚ é€šè¿‡ä½¿ç”¨æ˜¾å¼çš„å­—ç¬¦ç¼–ç ï¼Œå°±å¯ä»¥åœ¨ Buffer å®ä¾‹ä¸æ™®é€šçš„ JavaScript å­—ç¬¦ä¸²ä¹‹é—´è¿›è¡Œç›¸äº’è½¬æ¢ã€‚</p>
<p>  Buffer.from() åˆ›å»ºå¯¹è±¡</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> buf = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&#x27;test&#x27;</span>, <span class="string">&#x27;ascii&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º 72756e6f6f62</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf.<span class="title function_">toString</span>(<span class="string">&#x27;hex&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º cnVub29i</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf.<span class="title function_">toString</span>(<span class="string">&#x27;base64&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//UTF-8</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf.<span class="title function_">toString</span>(<span class="string">&#x27;UTF-8&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//ascii </span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(buf.<span class="title function_">toString</span>(<span class="string">&#x27;ascii&#x27;</span>));</span><br><span class="line">    <span class="comment">//utf16le</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(buf.<span class="title function_">toString</span>(<span class="string">&#x27;utf16le&#x27;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//latin1</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(buf.<span class="title function_">toString</span>(<span class="string">&#x27;latin1&#x27;</span>));</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>  Node.js ç›®å‰æ”¯æŒçš„å­—ç¬¦ç¼–ç åŒ…æ‹¬ï¼š</p>
<p>  ascii - ä»…æ”¯æŒ 7 ä½ ASCII æ•°æ®ã€‚å¦‚æœè®¾ç½®å»æ‰é«˜ä½çš„è¯ï¼Œè¿™ç§ç¼–ç æ˜¯éå¸¸å¿«çš„ã€‚</p>
<p>  utf8 - å¤šå­—èŠ‚ç¼–ç çš„ Unicode å­—ç¬¦ã€‚è®¸å¤šç½‘é¡µå’Œå…¶ä»–æ–‡æ¡£æ ¼å¼éƒ½ä½¿ç”¨ UTF-8 ã€‚</p>
<p>  utf16le - 2 æˆ– 4 ä¸ªå­—èŠ‚ï¼Œå°å­—èŠ‚åºç¼–ç çš„ Unicode å­—ç¬¦ã€‚æ”¯æŒä»£ç†å¯¹ï¼ˆU+10000 è‡³ U+10FFFFï¼‰ã€‚</p>
<p>  ucs2 - utf16le çš„åˆ«åã€‚</p>
<p>  base64 - Base64 ç¼–ç ã€‚</p>
<p>  latin1 - ä¸€ç§æŠŠ Buffer ç¼–ç æˆä¸€å­—èŠ‚ç¼–ç çš„å­—ç¬¦ä¸²çš„æ–¹å¼ã€‚</p>
<p>  binary - latin1 çš„åˆ«åã€‚</p>
<p>  hex - å°†æ¯ä¸ªå­—èŠ‚ç¼–ç ä¸ºä¸¤ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ã€‚</p>
<h2 id="åˆ›å»º-Buffer-ç±»"><a href="#åˆ›å»º-Buffer-ç±»" class="headerlink" title="åˆ›å»º Buffer ç±»"></a>åˆ›å»º Buffer ç±»</h2><p>  Buffer æä¾›äº†ä»¥ä¸‹ API æ¥åˆ›å»º Buffer ç±»ï¼š</p>
<p>  Buffer.alloc(size[, fill[, encoding]])ï¼š è¿”å›ä¸€ä¸ªæŒ‡å®šå¤§å°çš„ Buffer å®ä¾‹ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½® fillï¼Œåˆ™é»˜è®¤å¡«æ»¡ 0<br>  Buffer.allocUnsafe(size)ï¼š è¿”å›ä¸€ä¸ªæŒ‡å®šå¤§å°çš„ Buffer å®ä¾‹ï¼Œä½†æ˜¯å®ƒä¸ä¼šè¢«åˆå§‹åŒ–ï¼Œæ‰€ä»¥å®ƒå¯èƒ½åŒ…å«æ•æ„Ÿçš„æ•°æ®<br>  Buffer.allocUnsafeSlow(size)<br>  Buffer.from(array)ï¼š è¿”å›ä¸€ä¸ªè¢« array çš„å€¼åˆå§‹åŒ–çš„æ–°çš„ Buffer å®ä¾‹ï¼ˆä¼ å…¥çš„ array çš„å…ƒç´ åªèƒ½æ˜¯æ•°å­—ï¼Œä¸ç„¶å°±ä¼šè‡ªåŠ¨è¢« 0 è¦†ç›–ï¼‰<br>  Buffer.from(arrayBuffer[, byteOffset[, length]])ï¼š è¿”å›ä¸€ä¸ªæ–°å»ºçš„ä¸ç»™å®šçš„ ArrayBuffer å…±äº«åŒä¸€å†…å­˜çš„ Bufferã€‚<br>  Buffer.from(buffer)ï¼š å¤åˆ¶ä¼ å…¥çš„ Buffer å®ä¾‹çš„æ•°æ®ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„ Buffer å®ä¾‹<br>  Buffer.from(string[, encoding])ï¼š è¿”å›ä¸€ä¸ªè¢« string çš„å€¼åˆå§‹åŒ–çš„æ–°çš„ Buffer å®ä¾‹</p>
<h2 id="å†™å…¥ç¼“å†²åŒº"><a href="#å†™å…¥ç¼“å†²åŒº" class="headerlink" title="å†™å…¥ç¼“å†²åŒº"></a>å†™å…¥ç¼“å†²åŒº</h2><p>  è¯­æ³•<br>  å†™å…¥ Node ç¼“å†²åŒºçš„è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">buf.<span class="title function_">write</span>(string[, offset[, length]][, encoding])</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>  å‚æ•°<br>  å‚æ•°æè¿°å¦‚ä¸‹ï¼š</p>
<p>  string - å†™å…¥ç¼“å†²åŒºçš„å­—ç¬¦ä¸²ã€‚</p>
<p>  offset - ç¼“å†²åŒºå¼€å§‹å†™å…¥çš„ç´¢å¼•å€¼ï¼Œé»˜è®¤ä¸º 0 ã€‚</p>
<p>  length - å†™å…¥çš„å­—èŠ‚æ•°ï¼Œé»˜è®¤ä¸º buffer.length</p>
<p>  encoding - ä½¿ç”¨çš„ç¼–ç ã€‚é»˜è®¤ä¸º â€˜utf8â€™ ã€‚</p>
<p>  æ ¹æ® encoding çš„å­—ç¬¦ç¼–ç å†™å…¥ string åˆ° buf ä¸­çš„ offset ä½ç½®ã€‚ length å‚æ•°æ˜¯å†™å…¥çš„å­—èŠ‚æ•°ã€‚ å¦‚æœ buf æ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´ä¿å­˜æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œåˆ™åªä¼šå†™å…¥ string çš„ä¸€éƒ¨åˆ†ã€‚ åªéƒ¨åˆ†è§£ç çš„å­—ç¬¦ä¸ä¼šè¢«å†™å…¥ã€‚</p>
<p>  è¿”å›å€¼<br>  è¿”å›å®é™…å†™å…¥çš„å¤§å°ã€‚å¦‚æœ buffer ç©ºé—´ä¸è¶³ï¼Œ åˆ™åªä¼šå†™å…¥éƒ¨åˆ†å­—ç¬¦ä¸²ã€‚</p>
<p>  å®ä¾‹<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">buf = <span class="title class_">Buffer</span>.<span class="title function_">alloc</span>(<span class="number">256</span>);</span><br><span class="line">len = buf.<span class="title function_">write</span>(<span class="string">&quot;123123&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;å†™å…¥å­—èŠ‚æ•° : &quot;</span>+  len);</span><br></pre></td></tr></table></figure></p>
<h2 id="ä»ç¼“å†²åŒºè¯»å–æ•°æ®"><a href="#ä»ç¼“å†²åŒºè¯»å–æ•°æ®" class="headerlink" title="ä»ç¼“å†²åŒºè¯»å–æ•°æ®"></a>ä»ç¼“å†²åŒºè¯»å–æ•°æ®</h2><p>  è¯­æ³•<br>  è¯»å– Node ç¼“å†²åŒºæ•°æ®çš„è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">buf.<span class="title function_">toString</span>([encoding[, start[, end]]])</span><br></pre></td></tr></table></figure></p>
<p>  å‚æ•°<br>  å‚æ•°æè¿°å¦‚ä¸‹ï¼š</p>
<p>  encoding - ä½¿ç”¨çš„ç¼–ç ã€‚é»˜è®¤ä¸º â€˜utf8â€™ ã€‚</p>
<p>  start - æŒ‡å®šå¼€å§‹è¯»å–çš„ç´¢å¼•ä½ç½®ï¼Œé»˜è®¤ä¸º 0ã€‚</p>
<p>  end - ç»“æŸä½ç½®ï¼Œé»˜è®¤ä¸ºç¼“å†²åŒºçš„æœ«å°¾ã€‚</p>
<p>  è¿”å›å€¼<br>  è§£ç ç¼“å†²åŒºæ•°æ®å¹¶ä½¿ç”¨æŒ‡å®šçš„ç¼–ç è¿”å›å­—ç¬¦ä¸²ã€‚</p>
<p>  å®ä¾‹<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">buf = <span class="title class_">Buffer</span>.<span class="title function_">alloc</span>(<span class="number">26</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span> ; i &lt; <span class="number">26</span> ; i++) &#123;</span><br><span class="line">  buf[i] = i + <span class="number">97</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>( buf.<span class="title function_">toString</span>(<span class="string">&#x27;ascii&#x27;</span>));       <span class="comment">// è¾“å‡º: abcdefghijklmnopqrstuvwxyz</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>( buf.<span class="title function_">toString</span>(<span class="string">&#x27;ascii&#x27;</span>,<span class="number">0</span>,<span class="number">5</span>));   <span class="comment">//ä½¿ç”¨ &#x27;ascii&#x27; ç¼–ç , å¹¶è¾“å‡º: abcde</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>( buf.<span class="title function_">toString</span>(<span class="string">&#x27;utf8&#x27;</span>,<span class="number">0</span>,<span class="number">5</span>));    <span class="comment">// ä½¿ç”¨ &#x27;utf8&#x27; ç¼–ç , å¹¶è¾“å‡º: abcde</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>( buf.<span class="title function_">toString</span>(<span class="literal">undefined</span>,<span class="number">0</span>,<span class="number">5</span>)); <span class="comment">// ä½¿ç”¨é»˜è®¤çš„ &#x27;utf8&#x27; ç¼–ç , å¹¶è¾“å‡º: abcde</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>  å°† Buffer è½¬æ¢ä¸º JSON å¯¹è±¡<br>  è¯­æ³•<br>  å°† Node Buffer è½¬æ¢ä¸º JSON å¯¹è±¡çš„å‡½æ•°è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">buf.<span class="title function_">toJSON</span>()</span><br></pre></td></tr></table></figure>


  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> buf = <span class="title class_">Buffer</span>.<span class="title function_">from</span>([<span class="number">0x1</span>, <span class="number">0x2</span>, <span class="number">0x3</span>, <span class="number">0x4</span>, <span class="number">0x5</span>]);</span><br><span class="line"><span class="keyword">const</span> json = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(buf);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º: &#123;&quot;type&quot;:&quot;Buffer&quot;,&quot;data&quot;:[1,2,3,4,5]&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(json);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> copy = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(json, <span class="function">(<span class="params">key, value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> value &amp;&amp; value.<span class="property">type</span> === <span class="string">&#x27;Buffer&#x27;</span> ?</span><br><span class="line">    <span class="title class_">Buffer</span>.<span class="title function_">from</span>(value.<span class="property">data</span>) :</span><br><span class="line">    value;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¾“å‡º: &lt;Buffer 01 02 03 04 05&gt;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(copy);</span><br></pre></td></tr></table></figure>

<h2 id="ç¼“å†²åŒºåˆå¹¶"><a href="#ç¼“å†²åŒºåˆå¹¶" class="headerlink" title="ç¼“å†²åŒºåˆå¹¶"></a>ç¼“å†²åŒºåˆå¹¶</h2><p>  è¯­æ³•<br>  Node ç¼“å†²åŒºåˆå¹¶çš„è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Buffer</span>.<span class="title function_">concat</span>(list[, totalLength])</span><br></pre></td></tr></table></figure>

  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> buffer1 = <span class="title class_">Buffer</span>.<span class="title function_">from</span>((<span class="string">&#x27;123&#x27;</span>));</span><br><span class="line"><span class="keyword">var</span> buffer2 = <span class="title class_">Buffer</span>.<span class="title function_">from</span>((<span class="string">&#x27;test&#x27;</span>));</span><br><span class="line"><span class="keyword">var</span> buffer3 = <span class="title class_">Buffer</span>.<span class="title function_">concat</span>([buffer1,buffer2]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;buffer3 å†…å®¹: &quot;</span> + buffer3.<span class="title function_">toString</span>());</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="ç¼“å†²åŒºæ¯”è¾ƒ"><a href="#ç¼“å†²åŒºæ¯”è¾ƒ" class="headerlink" title="ç¼“å†²åŒºæ¯”è¾ƒ"></a>ç¼“å†²åŒºæ¯”è¾ƒ</h2><p>  è¯­æ³•<br>  Node Buffer æ¯”è¾ƒçš„å‡½æ•°è¯­æ³•å¦‚ä¸‹æ‰€ç¤º, è¯¥æ–¹æ³•åœ¨ Node.js v0.12.2 ç‰ˆæœ¬å¼•å…¥ï¼š<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">buf.<span class="title function_">compare</span>(otherBuffer);</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> buffer1 = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&#x27;ABC&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> buffer2 = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&#x27;ABCD&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> result = buffer1.<span class="title function_">compare</span>(buffer2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(result &lt; <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(buffer1 + <span class="string">&quot; åœ¨ &quot;</span> + buffer2 + <span class="string">&quot;ä¹‹å‰&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(result == <span class="number">0</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(buffer1 + <span class="string">&quot; ä¸ &quot;</span> + buffer2 + <span class="string">&quot;ç›¸åŒ&quot;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(buffer1 + <span class="string">&quot; åœ¨ &quot;</span> + buffer2 + <span class="string">&quot;ä¹‹å&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<h2 id="æ‹·è´ç¼“å†²åŒº"><a href="#æ‹·è´ç¼“å†²åŒº" class="headerlink" title="æ‹·è´ç¼“å†²åŒº"></a>æ‹·è´ç¼“å†²åŒº</h2><p>  è¯­æ³•<br>  Node ç¼“å†²åŒºæ‹·è´è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">buf.<span class="title function_">copy</span>(targetBuffer[, targetStart[, sourceStart[, sourceEnd]]])</span><br></pre></td></tr></table></figure></p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> buf1 = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&#x27;abcdefghijkl&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> buf2 = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&#x27;123&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å°† buf2 æ’å…¥åˆ° buf1 æŒ‡å®šä½ç½®ä¸Š</span></span><br><span class="line">buf2.<span class="title function_">copy</span>(buf1, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(buf1.<span class="title function_">toString</span>());</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="ç¼“å†²åŒºè£å‰ª"><a href="#ç¼“å†²åŒºè£å‰ª" class="headerlink" title="ç¼“å†²åŒºè£å‰ª"></a>ç¼“å†²åŒºè£å‰ª</h2><p>  Node ç¼“å†²åŒºè£å‰ªè¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">buf.<span class="title function_">slice</span>([start[, end]])</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> buffer1 = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&#x27;TEST123TEST&#x27;</span>);</span><br><span class="line"><span class="comment">// å‰ªåˆ‡ç¼“å†²åŒº</span></span><br><span class="line"><span class="keyword">var</span> buffer2 = buffer1.<span class="title function_">slice</span>(<span class="number">0</span>,<span class="number">2</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;buffer2 content: &quot;</span> + buffer2.<span class="title function_">toString</span>());</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="ç¼“å†²åŒºé•¿åº¦"><a href="#ç¼“å†²åŒºé•¿åº¦" class="headerlink" title="ç¼“å†²åŒºé•¿åº¦"></a>ç¼“å†²åŒºé•¿åº¦</h2><p>  è¯­æ³•<br>  Node ç¼“å†²åŒºé•¿åº¦è®¡ç®—è¯­æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">buf.<span class="property">length</span>;</span><br></pre></td></tr></table></figure></p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> buffer = <span class="title class_">Buffer</span>.<span class="title function_">from</span>(<span class="string">&#x27;123123123&#x27;</span>);</span><br><span class="line"><span class="comment">//  ç¼“å†²åŒºé•¿åº¦</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;buffer length: &quot;</span> + buffer.<span class="property">length</span>);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h1 id="ğŸ‘¨â€ğŸ’»Node-js-Stream"><a href="#ğŸ‘¨â€ğŸ’»Node-js-Stream" class="headerlink" title="ğŸ‘¨â€ğŸ’»Node.js Stream"></a>ğŸ‘¨â€ğŸ’»Node.js Stream</h1><p>  Node.js Stream(æµ)</p>
<p>  Stream æ˜¯ä¸€ä¸ªæŠ½è±¡æ¥å£ï¼ŒNode ä¸­æœ‰å¾ˆå¤šå¯¹è±¡å®ç°äº†è¿™ä¸ªæ¥å£ã€‚ä¾‹å¦‚ï¼Œå¯¹http æœåŠ¡å™¨å‘èµ·è¯·æ±‚çš„request å¯¹è±¡å°±æ˜¯ä¸€ä¸ª Streamï¼Œè¿˜æœ‰stdoutï¼ˆæ ‡å‡†è¾“å‡ºï¼‰ã€‚</p>
<p>  Node.jsï¼ŒStream æœ‰å››ç§æµç±»å‹ï¼š</p>
<p>  Readable - å¯è¯»æ“ä½œã€‚</p>
<p>  Writable - å¯å†™æ“ä½œã€‚</p>
<p>  Duplex - å¯è¯»å¯å†™æ“ä½œ.</p>
<p>  Transform - æ“ä½œè¢«å†™å…¥æ•°æ®ï¼Œç„¶åè¯»å‡ºç»“æœã€‚</p>
<p>  æ‰€æœ‰çš„ Stream å¯¹è±¡éƒ½æ˜¯ EventEmitter çš„å®ä¾‹ã€‚å¸¸ç”¨çš„äº‹ä»¶æœ‰ï¼š</p>
<p>  data - å½“æœ‰æ•°æ®å¯è¯»æ—¶è§¦å‘ã€‚</p>
<p>  end - æ²¡æœ‰æ›´å¤šçš„æ•°æ®å¯è¯»æ—¶è§¦å‘ã€‚</p>
<p>  error - åœ¨æ¥æ”¶å’Œå†™å…¥è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘ã€‚</p>
<p>  finish - æ‰€æœ‰æ•°æ®å·²è¢«å†™å…¥åˆ°åº•å±‚ç³»ç»Ÿæ—¶è§¦å‘ã€‚</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> data = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºå¯è¯»æµ</span></span><br><span class="line"><span class="keyword">var</span> readerStream = fs.<span class="title function_">createReadStream</span>(<span class="string">&#x27;x.txt&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¾ç½®ç¼–ç ä¸º utf8ã€‚</span></span><br><span class="line">readerStream.<span class="title function_">setEncoding</span>(<span class="string">&#x27;UTF8&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¤„ç†æµäº‹ä»¶ --&gt; data, end, and error</span></span><br><span class="line">readerStream.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="keyword">function</span>(<span class="params">chunk</span>) &#123;</span><br><span class="line">  data += chunk;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">readerStream.<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">readerStream.<span class="title function_">on</span>(<span class="string">&#x27;error&#x27;</span>, <span class="keyword">function</span>(<span class="params">err</span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">stack</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>  å†™å…¥æµ<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> data = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> dataw = <span class="string">&#x27;w123w&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> ws = fs.<span class="title function_">createWriteStream</span>(<span class="string">&#x27;x.txt&#x27;</span>);</span><br><span class="line">ws.<span class="title function_">write</span>(dataw);    </span><br><span class="line">ws.<span class="title function_">end</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ•°æ®å†™å…¥æˆåŠŸï¼&quot;</span>);  </span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>  ç®¡é“æµ<br>  ç®¡é“æä¾›äº†ä¸€ä¸ªè¾“å‡ºæµåˆ°è¾“å…¥æµçš„æœºåˆ¶ã€‚é€šå¸¸æˆ‘ä»¬ç”¨äºä»ä¸€ä¸ªæµä¸­è·å–æ•°æ®å¹¶å°†æ•°æ®ä¼ é€’åˆ°å¦å¤–ä¸€ä¸ªæµä¸­ã€‚</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªå¯è¯»æµ</span></span><br><span class="line"><span class="keyword">var</span> readerStream = fs.<span class="title function_">createReadStream</span>(<span class="string">&#x27;x.txt&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªå¯å†™æµ</span></span><br><span class="line"><span class="keyword">var</span> writerStream = fs.<span class="title function_">createWriteStream</span>(<span class="string">&#x27;output.txt&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç®¡é“è¯»å†™æ“ä½œ</span></span><br><span class="line"><span class="comment">// è¯»å– input.txt æ–‡ä»¶å†…å®¹ï¼Œå¹¶å°†å†…å®¹å†™å…¥åˆ° output.txt æ–‡ä»¶ä¸­</span></span><br><span class="line">readerStream.<span class="title function_">pipe</span>(writerStream);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>  é“¾å¼æµ<br>  é“¾å¼æ˜¯é€šè¿‡è¿æ¥è¾“å‡ºæµåˆ°å¦å¤–ä¸€ä¸ªæµå¹¶åˆ›å»ºå¤šä¸ªæµæ“ä½œé“¾çš„æœºåˆ¶ã€‚é“¾å¼æµä¸€èˆ¬ç”¨äºç®¡é“æ“ä½œã€‚</p>
<p>  æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ˜¯ç”¨ç®¡é“å’Œé“¾å¼æ¥å‹ç¼©å’Œè§£å‹æ–‡ä»¶ã€‚<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> zlib = <span class="built_in">require</span>(<span class="string">&#x27;zlib&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‹ç¼© input.txt æ–‡ä»¶ä¸º input.txt.gz</span></span><br><span class="line">fs.<span class="title function_">createReadStream</span>(<span class="string">&#x27;x.txt&#x27;</span>)</span><br><span class="line">  .<span class="title function_">pipe</span>(zlib.<span class="title function_">createGzip</span>())</span><br><span class="line">.<span class="title function_">pipe</span>(fs.<span class="title function_">createWriteStream</span>(<span class="string">&#x27;input.txt.gz&#x27;</span>));</span><br><span class="line">  </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ–‡ä»¶å‹ç¼©å®Œæˆã€‚&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> zlib = <span class="built_in">require</span>(<span class="string">&#x27;zlib&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§£å‹ input.txt.gz æ–‡ä»¶ä¸º input.txt</span></span><br><span class="line">fs.<span class="title function_">createReadStream</span>(<span class="string">&#x27;input.txt.gz&#x27;</span>)</span><br><span class="line">  .<span class="title function_">pipe</span>(zlib.<span class="title function_">createGunzip</span>())</span><br><span class="line">  .<span class="title function_">pipe</span>(fs.<span class="title function_">createWriteStream</span>(<span class="string">&#x27;input2.txt&#x27;</span>));</span><br><span class="line">  </span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;æ–‡ä»¶è§£å‹å®Œæˆã€‚&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<h1 id="ğŸ“Node-js-æ¨¡å—ç³»ç»Ÿ"><a href="#ğŸ“Node-js-æ¨¡å—ç³»ç»Ÿ" class="headerlink" title="ğŸ“Node.js æ¨¡å—ç³»ç»Ÿ"></a>ğŸ“Node.js æ¨¡å—ç³»ç»Ÿ</h1><p>  ~~</p>
<p>  ä¸ºäº†è®©Node.jsçš„æ–‡ä»¶å¯ä»¥ç›¸äº’è°ƒç”¨ï¼ŒNode.jsæä¾›äº†ä¸€ä¸ªç®€å•çš„æ¨¡å—ç³»ç»Ÿã€‚</p>
<p>  æ¨¡å—æ˜¯Node.js åº”ç”¨ç¨‹åºçš„åŸºæœ¬ç»„æˆéƒ¨åˆ†ï¼Œæ–‡ä»¶å’Œæ¨¡å—æ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚æ¢è¨€ä¹‹ï¼Œä¸€ä¸ª Node.js æ–‡ä»¶å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œè¿™ä¸ªæ–‡ä»¶å¯èƒ½æ˜¯JavaScript ä»£ç ã€JSON æˆ–è€…ç¼–è¯‘è¿‡çš„C&#x2F;C++ æ‰©å±•ã€‚</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//hello.js</span></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">world1</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello world node.js &quot;</span>) </span><br><span class="line"></span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//test.js</span></span><br><span class="line"><span class="keyword">var</span> hello = <span class="built_in">require</span>(<span class="string">&#x27;./hello&#x27;</span>);</span><br><span class="line">hello.<span class="title function_">world1</span>();</span><br></pre></td></tr></table></figure>
<p>  hello.js é€šè¿‡ exports å¯¹è±¡æŠŠ world1 ä½œä¸ºæ¨¡å—çš„è®¿é—®æ¥å£ï¼Œåœ¨ main.js ä¸­é€šè¿‡ require(â€˜.&#x2F;helloâ€™) åŠ è½½è¿™ä¸ªæ¨¡å—ï¼Œç„¶åå°±å¯ä»¥ç›´æ¥è®¿ é—® hello.js ä¸­ exports å¯¹è±¡çš„æˆå‘˜å‡½æ•°äº†ã€‚</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//hello.js </span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Hello</span>(<span class="params"></span>) &#123; </span><br><span class="line">    <span class="keyword">var</span> name; </span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">setName</span> = <span class="keyword">function</span>(<span class="params">thyName</span>) &#123; </span><br><span class="line">        name = thyName; </span><br><span class="line">    &#125;; </span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">sayHello</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123; </span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Hello &#x27;</span> + name); </span><br><span class="line">    &#125;; </span><br><span class="line">&#125;; </span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="title class_">Hello</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//test.js </span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Hello</span> = <span class="built_in">require</span>(<span class="string">&#x27;./hello&#x27;</span>); </span><br><span class="line">hello = <span class="keyword">new</span> <span class="title class_">Hello</span>(); </span><br><span class="line">hello.<span class="title function_">setName</span>(<span class="string">&#x27;vvv&#x27;</span>); </span><br><span class="line">hello.<span class="title function_">sayHello</span>(); </span><br></pre></td></tr></table></figure>
<p>  æ¨¡å—æ¥å£çš„å”¯ä¸€å˜åŒ–æ˜¯ä½¿ç”¨ module.exports &#x3D; Hello ä»£æ›¿äº†exports.world &#x3D; function(){}ã€‚ åœ¨å¤–éƒ¨å¼•ç”¨è¯¥æ¨¡å—æ—¶ï¼Œå…¶æ¥å£å¯¹è±¡å°±æ˜¯è¦è¾“å‡ºçš„ Hello å¯¹è±¡æœ¬èº«ï¼Œè€Œä¸æ˜¯åŸå…ˆçš„ exportsã€‚</p>
<p>  exports å’Œ module.exports çš„ä½¿ç”¨</p>
<p>  å¦‚æœè¦å¯¹å¤–æš´éœ²å±æ€§æˆ–æ–¹æ³•ï¼Œå°±ç”¨ exports å°±è¡Œï¼Œè¦æš´éœ²å¯¹è±¡(ç±»ä¼¼classï¼ŒåŒ…å«äº†å¾ˆå¤šå±æ€§å’Œæ–¹æ³•)ï¼Œå°±ç”¨ module.exportsã€‚</p>
<p>  PS æ¨¡å—åŠ è½½<br>  ä»æ–‡ä»¶æ¨¡å—ç¼“å­˜ä¸­åŠ è½½<br>  å°½ç®¡åŸç”Ÿæ¨¡å—ä¸æ–‡ä»¶æ¨¡å—çš„ä¼˜å…ˆçº§ä¸åŒï¼Œä½†æ˜¯éƒ½ä¼šä¼˜å…ˆä»æ–‡ä»¶æ¨¡å—çš„ç¼“å­˜ä¸­åŠ è½½å·²ç»å­˜åœ¨çš„æ¨¡å—ã€‚</p>
<p>  ä»åŸç”Ÿæ¨¡å—åŠ è½½<br>  åŸç”Ÿæ¨¡å—çš„ä¼˜å…ˆçº§ä»…æ¬¡äºæ–‡ä»¶æ¨¡å—ç¼“å­˜çš„ä¼˜å…ˆçº§ã€‚require æ–¹æ³•åœ¨è§£ææ–‡ä»¶åä¹‹åï¼Œä¼˜å…ˆæ£€æŸ¥æ¨¡å—æ˜¯å¦åœ¨åŸç”Ÿæ¨¡å—åˆ—è¡¨ä¸­ã€‚ä»¥httpæ¨¡å—ä¸ºä¾‹ï¼Œå°½ç®¡åœ¨ç›®å½•ä¸‹å­˜åœ¨ä¸€ä¸ª http&#x2F;http.js&#x2F;http.node&#x2F;http.json æ–‡ä»¶ï¼Œrequire(â€œhttpâ€) éƒ½ä¸ä¼šä»è¿™äº›æ–‡ä»¶ä¸­åŠ è½½ï¼Œè€Œæ˜¯ä»åŸç”Ÿæ¨¡å—ä¸­åŠ è½½ã€‚</p>
<p>  åŸç”Ÿæ¨¡å—ä¹Ÿæœ‰ä¸€ä¸ªç¼“å­˜åŒºï¼ŒåŒæ ·ä¹Ÿæ˜¯ä¼˜å…ˆä»ç¼“å­˜åŒºåŠ è½½ã€‚å¦‚æœç¼“å­˜åŒºæ²¡æœ‰è¢«åŠ è½½è¿‡ï¼Œåˆ™è°ƒç”¨åŸç”Ÿæ¨¡å—çš„åŠ è½½æ–¹å¼è¿›è¡ŒåŠ è½½å’Œæ‰§è¡Œã€‚</p>
<p>  ä»æ–‡ä»¶åŠ è½½<br>  å½“æ–‡ä»¶æ¨¡å—ç¼“å­˜ä¸­ä¸å­˜åœ¨ï¼Œè€Œä¸”ä¸æ˜¯åŸç”Ÿæ¨¡å—çš„æ—¶å€™ï¼ŒNode.js ä¼šè§£æ require æ–¹æ³•ä¼ å…¥çš„å‚æ•°ï¼Œå¹¶ä»æ–‡ä»¶ç³»ç»Ÿä¸­åŠ è½½å®é™…çš„æ–‡ä»¶ï¼ŒåŠ è½½è¿‡ç¨‹ä¸­çš„åŒ…è£…å’Œç¼–è¯‘ç»†èŠ‚åœ¨å‰ä¸€èŠ‚ä¸­å·²ç»ä»‹ç»è¿‡ï¼Œè¿™é‡Œæˆ‘ä»¬å°†è¯¦ç»†æè¿°æŸ¥æ‰¾æ–‡ä»¶æ¨¡å—çš„è¿‡ç¨‹ï¼Œå…¶ä¸­ï¼Œä¹Ÿæœ‰ä¸€äº›ç»†èŠ‚å€¼å¾—çŸ¥æ™“ã€‚</p>
<p>  requireæ–¹æ³•æ¥å—ä»¥ä¸‹å‡ ç§å‚æ•°çš„ä¼ é€’ï¼š</p>
<p>  httpã€fsã€pathç­‰ï¼ŒåŸç”Ÿæ¨¡å—ã€‚<br>  .&#x2F;modæˆ–..&#x2F;modï¼Œç›¸å¯¹è·¯å¾„çš„æ–‡ä»¶æ¨¡å—ã€‚<br>  &#x2F;pathtomodule&#x2F;modï¼Œç»å¯¹è·¯å¾„çš„æ–‡ä»¶æ¨¡å—ã€‚<br>  modï¼ŒéåŸç”Ÿæ¨¡å—çš„æ–‡ä»¶æ¨¡å—ã€‚</p>
<h1 id="ğŸ”„nodejs-åŠ è½½c"><a href="#ğŸ”„nodejs-åŠ è½½c" class="headerlink" title="ğŸ”„nodejs åŠ è½½c++"></a>ğŸ”„nodejs åŠ è½½c++</h1><p>  åœ¨Node.jsä¸­åŠ è½½C++ä»£ç ï¼Œé€šå¸¸æ˜¯é€šè¿‡ç¼–å†™ä¸€ä¸ªC++çš„æ‰©å±•æ¨¡å—ï¼Œç„¶åé€šè¿‡Node.jsçš„requireæ–¹æ³•åŠ è½½è¿™ä¸ªæ¨¡å—ã€‚è¿™å¯ä»¥é€šè¿‡Node.jsçš„åŸç”Ÿæ‰©å±•æ¨¡å—APIå®ç°ï¼Œä¹Ÿå¯ä»¥é€šè¿‡N-APIå®ç°ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸ºæ„å»ºå¯ä»¥åœ¨å¤šä¸ªNode.jsç‰ˆæœ¬ä¸Šå·¥ä½œçš„åŸç”Ÿæ‰©å±•æ¨¡å—è€Œè®¾è®¡çš„APIã€‚</p>
<p>  ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå±•ç¤ºå¦‚ä½•åˆ›å»ºä¸€ä¸ªC++æ‰©å±•æ¨¡å—å¹¶åœ¨Node.jsä¸­ä½¿ç”¨å®ƒã€‚</p>
<p>  é¦–å…ˆï¼Œä½ éœ€è¦å®‰è£…ä¸€ä¸ªåä¸ºnode-gypçš„å·¥å…·ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨æ¥ç¼–è¯‘C++æ‰©å±•æ¨¡å—çš„å·¥å…·ï¼š</p>
<p>  npm install -g node-gyp<br>  ç„¶åï¼Œåˆ›å»ºä¸€ä¸ªåä¸ºbinding.gypçš„æ–‡ä»¶ï¼Œå®ƒæè¿°äº†å¦‚ä½•æ„å»ºæ‰©å±•æ¨¡å—ï¼š</p>
  <figure class="highlight gyp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;targets&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">&quot;target_name&quot;</span>: <span class="string">&quot;addon&quot;</span>,</span><br><span class="line">      <span class="string">&quot;sources&quot;</span>: [ <span class="string">&quot;addon.cc&quot;</span> ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  æ¥ä¸‹æ¥ï¼Œåˆ›å»ºä¸€ä¸ªC++æºæ–‡ä»¶ï¼Œä¾‹å¦‚addon.ccï¼Œå®ƒåŒ…å«äº†ä½ çš„C++ä»£ç ï¼š</p>
  <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;node.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> demo &#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> v8::FunctionCallbackInfo;</span><br><span class="line"><span class="keyword">using</span> v8::Isolate;</span><br><span class="line"><span class="keyword">using</span> v8::Local;</span><br><span class="line"><span class="keyword">using</span> v8::NewStringType;</span><br><span class="line"><span class="keyword">using</span> v8::Object;</span><br><span class="line"><span class="keyword">using</span> v8::String;</span><br><span class="line"><span class="keyword">using</span> v8::Value;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Method</span><span class="params">(<span class="type">const</span> FunctionCallbackInfo&lt;Value&gt;&amp; args)</span> </span>&#123;</span><br><span class="line">  Isolate* isolate = args.<span class="built_in">GetIsolate</span>();</span><br><span class="line">  args.<span class="built_in">GetReturnValue</span>().<span class="built_in">Set</span>(String::<span class="built_in">NewFromUtf8</span>(isolate, <span class="string">&quot;world&quot;</span>, NewStringType::kNormal).<span class="built_in">ToLocalChecked</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">Initialize</span><span class="params">(Local&lt;Object&gt; exports)</span> </span>&#123;</span><br><span class="line">  <span class="built_in">NODE_SET_METHOD</span>(exports, <span class="string">&quot;hello&quot;</span>, Method);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">NODE_MODULE</span>(NODE_GYP_MODULE_NAME, Initialize)</span><br><span class="line"></span><br><span class="line">&#125;  <span class="comment">// namespace demo</span></span><br></pre></td></tr></table></figure>
<p>  ç¡®ä¿åœ¨binding.gypæ–‡ä»¶çš„åŒä¸€ç›®å½•ä¸‹ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ„å»ºæ‰©å±•æ¨¡å—ï¼š<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node-gyp configure build</span><br></pre></td></tr></table></figure><br>  è¿™å°†ç”Ÿæˆä¸€ä¸ªç¼–è¯‘å¥½çš„æ‰©å±•æ¨¡å—ï¼Œä½ å¯ä»¥åœ¨Node.jsä¸­é€šè¿‡requireæ¥åŠ è½½å¹¶ä½¿ç”¨å®ƒï¼š</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> addon = <span class="built_in">require</span>(<span class="string">&#x27;./build/Release/addon.node&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(addon.<span class="title function_">hello</span>());  <span class="comment">// è¾“å‡º: world</span></span><br></pre></td></tr></table></figure>
<p>  åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒC++æ¨¡å—å¯¼å‡ºäº†ä¸€ä¸ªåä¸ºhelloçš„æ–¹æ³•ï¼Œå½“åœ¨Node.jsä¸­è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ—¶ï¼Œå®ƒè¿”å›å­—ç¬¦ä¸²â€worldâ€ã€‚</p>
<h1 id="ğŸ™‹â€â™€ï¸Node-js-å‡½æ•°"><a href="#ğŸ™‹â€â™€ï¸Node-js-å‡½æ•°" class="headerlink" title="ğŸ™‹â€â™€ï¸Node.js å‡½æ•°"></a>ğŸ™‹â€â™€ï¸Node.js å‡½æ•°</h1><p>  åœ¨ JavaScriptä¸­ï¼Œä¸€ä¸ªå‡½æ•°å¯ä»¥ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°ã€‚æˆ‘ä»¬å¯ä»¥å…ˆå®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åä¼ é€’ï¼Œä¹Ÿå¯ä»¥åœ¨ä¼ é€’å‚æ•°çš„åœ°æ–¹ç›´æ¥å®šä¹‰å‡½æ•°ã€‚</p>
<p>  Node.js ä¸­å‡½æ•°çš„ä½¿ç”¨ä¸ JavaScript ç±»ä¼¼ï¼Œä¸¾ä¾‹æ¥è¯´ï¼Œä½ å¯ä»¥è¿™æ ·åšï¼š<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">say</span>(<span class="params">word</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(word);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">execute</span>(<span class="params">someFunction, value</span>) &#123;</span><br><span class="line">  <span class="title function_">someFunction</span>(value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">execute</span>(say, <span class="string">&quot;Hello&quot;</span>);</span><br></pre></td></tr></table></figure><br>  ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬æŠŠ say å‡½æ•°ä½œä¸º execute å‡½æ•°çš„ç¬¬ä¸€ä¸ªå˜é‡è¿›è¡Œäº†ä¼ é€’ã€‚è¿™é‡Œä¼ é€’çš„ä¸æ˜¯ say çš„è¿”å›å€¼ï¼Œè€Œæ˜¯ say æœ¬èº«ï¼</p>
<p>  è¿™æ ·ä¸€æ¥ï¼Œ say å°±å˜æˆäº†execute ä¸­çš„æœ¬åœ°å˜é‡ someFunction ï¼Œexecute å¯ä»¥é€šè¿‡è°ƒç”¨ someFunction() ï¼ˆå¸¦æ‹¬å·çš„å½¢å¼ï¼‰æ¥ä½¿ç”¨ say å‡½æ•°ã€‚</p>
<p>  å½“ç„¶ï¼Œå› ä¸º say æœ‰ä¸€ä¸ªå˜é‡ï¼Œ execute åœ¨è°ƒç”¨ someFunction æ—¶å¯ä»¥ä¼ é€’è¿™æ ·ä¸€ä¸ªå˜é‡ã€‚</p>
<h2 id="åŒ¿åå‡½æ•°"><a href="#åŒ¿åå‡½æ•°" class="headerlink" title="åŒ¿åå‡½æ•°"></a>åŒ¿åå‡½æ•°</h2>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">execute</span>(<span class="params">someFunction, value</span>) &#123;</span><br><span class="line">  <span class="title function_">someFunction</span>(value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">execute</span>(<span class="keyword">function</span>(<span class="params">word</span>)&#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(word) &#125;, <span class="string">&quot;Hello&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>  ä¼ é€’<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&quot;http&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">onRequest</span>(<span class="params">request, response</span>) &#123;</span><br><span class="line">  response.<span class="title function_">writeHead</span>(<span class="number">200</span>, &#123;<span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;text/plain&quot;</span>&#125;);</span><br><span class="line">  response.<span class="title function_">write</span>(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">  response.<span class="title function_">end</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http.<span class="title function_">createServer</span>(onRequest).<span class="title function_">listen</span>(<span class="number">8888</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>  &#x3D;&#x3D;&gt;<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&quot;http&quot;</span>);</span><br><span class="line"></span><br><span class="line">http.<span class="title function_">createServer</span>(<span class="keyword">function</span>(<span class="params">request, response</span>) &#123;</span><br><span class="line">  response.<span class="title function_">writeHead</span>(<span class="number">200</span>, &#123;<span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;text/plain&quot;</span>&#125;);</span><br><span class="line">  response.<span class="title function_">write</span>(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">  response.<span class="title function_">end</span>();</span><br><span class="line">&#125;).<span class="title function_">listen</span>(<span class="number">8888</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<h1 id="ğŸ™‹â€â™‚Node-js-ç®­å¤´å‡½æ•°"><a href="#ğŸ™‹â€â™‚Node-js-ç®­å¤´å‡½æ•°" class="headerlink" title="ğŸ™‹â€â™‚Node.js ç®­å¤´å‡½æ•°"></a>ğŸ™‹â€â™‚Node.js ç®­å¤´å‡½æ•°</h1><p>  åœ¨Node.jsä¸­ï¼Œç®­å¤´å‡½æ•°æ˜¯ä¸€ç§ç®€æ´å†™æ³•ï¼Œç”¨äºå£°æ˜åŒ¿åå‡½æ•°ã€‚å®ƒä»¬æœ€å¸¸ç”¨äºå›è°ƒå‡½æ•°å’Œäº‹ä»¶ç›‘å¬å™¨ç­‰åœºæ™¯ã€‚ç®­å¤´å‡½æ•°çš„è¯­æ³•å¾ˆç®€å•ï¼Œå®ƒçš„åŸºæœ¬æ ¼å¼å¦‚ä¸‹ï¼š<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(param1, param2, ...) =&gt; &#123;</span><br><span class="line">  <span class="comment">// å‡½æ•°ä½“</span></span><br><span class="line">  <span class="keyword">return</span> something;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">const</span> doubled = numbers.<span class="title function_">map</span>(<span class="function"><span class="params">number</span> =&gt;</span> number * <span class="number">2</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(doubled); <span class="comment">// è¾“å‡º: [2, 4, 6, 8, 10]</span></span><br></pre></td></tr></table></figure><br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;hihihi.&#x27;</span>);</span><br><span class="line">&#125;, <span class="number">2000</span>);</span><br></pre></td></tr></table></figure><br>  ä»¥ä¸Šå†³ç­–å›¾çœ‹èµ·æ¥æœ‰ç‚¹å¤æ‚ï¼Œæˆ‘è®¤ä¸ºæœ‰ä¸‰ç‚¹æ¯”è¾ƒé‡è¦ï¼š</p>
<p>  ç®­å¤´å‡½æ•°é€‚åˆäºæ— å¤æ‚é€»è¾‘æˆ–è€…æ— å‰¯ä½œç”¨çš„çº¯å‡½æ•°åœºæ™¯ä¸‹ï¼Œä¾‹å¦‚ç”¨åœ¨ map ã€ reduce ã€ filter çš„å›è°ƒå‡½æ•°å®šä¹‰ä¸­ï¼›<br>  ä¸è¦åœ¨æœ€å¤–å±‚å®šä¹‰ç®­å¤´å‡½æ•°ï¼Œå› ä¸ºåœ¨å‡½æ•°å†…éƒ¨æ“ä½œ this ä¼šå¾ˆå®¹æ˜“æ±¡æŸ“å…¨å±€ä½œç”¨åŸŸã€‚æœ€èµ·ç åœ¨ç®­å¤´å‡½æ•°å¤–éƒ¨åŒ…ä¸€å±‚æ™®é€šå‡½æ•°ï¼Œå°† this æ§åˆ¶åœ¨å¯è§çš„èŒƒå›´å†…ï¼›<br>  å¦‚å¼€å¤´æ‰€è¿°ï¼Œç®­å¤´å‡½æ•°æœ€å¸å¼•äººçš„åœ°æ–¹æ˜¯ç®€æ´ã€‚åœ¨æœ‰å¤šå±‚å‡½æ•°åµŒå¥—çš„æƒ…å†µä¸‹ï¼Œç®­å¤´å‡½æ•°çš„ç®€æ´æ€§å¹¶æ²¡æœ‰å¾ˆå¤§çš„æå‡ï¼Œåè€Œå½±å“äº†å‡½æ•°çš„ä½œç”¨èŒƒå›´çš„è¯†åˆ«åº¦ï¼Œè¿™ç§æƒ…å†µä¸å»ºè®®ä½¿ç”¨ç®­å¤´å‡½æ•°ã€‚</p>
<h1 id="ğŸ§ªNode-js-è·¯ç”±"><a href="#ğŸ§ªNode-js-è·¯ç”±" class="headerlink" title="ğŸ§ªNode.js è·¯ç”±"></a>ğŸ§ªNode.js è·¯ç”±</h1><p>  åœ¨ Node.js ä¸­ï¼Œè·¯ç”±ï¼ˆRoutingï¼‰æ˜¯æŒ‡ç¡®å®šå¦‚ä½•å“åº”å¯¹ç‰¹å®šç«¯ç‚¹ï¼ˆURL è·¯å¾„ï¼‰çš„ HTTP è¯·æ±‚çš„è¿‡ç¨‹ã€‚</p>
<p>  æˆ‘ä»¬è¦ä¸ºè·¯ç”±æä¾›è¯·æ±‚çš„ URL å’Œå…¶ä»–éœ€è¦çš„ GET åŠ POST å‚æ•°ï¼Œéšåè·¯ç”±éœ€è¦æ ¹æ®è¿™äº›æ•°æ®æ¥æ‰§è¡Œç›¸åº”çš„ä»£ç ã€‚</p>
<p>  å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦æŸ¥çœ‹ HTTP è¯·æ±‚ï¼Œä»ä¸­æå–å‡ºè¯·æ±‚çš„ URL ä»¥åŠ GET&#x2F;POST å‚æ•°ã€‚è¿™ä¸€åŠŸèƒ½åº”å½“å±äºè·¯ç”±è¿˜æ˜¯æœåŠ¡å™¨ï¼ˆç”šè‡³ä½œä¸ºä¸€ä¸ªæ¨¡å—è‡ªèº«çš„åŠŸèƒ½ï¼‰ç¡®å®å€¼å¾—æ¢è®¨ï¼Œä½†è¿™é‡Œæš‚å®šå…¶ä¸ºæˆ‘ä»¬çš„HTTPæœåŠ¡å™¨çš„åŠŸèƒ½ã€‚</p>
<p>  æˆ‘ä»¬éœ€è¦çš„æ‰€æœ‰æ•°æ®éƒ½ä¼šåŒ…å«åœ¨ request å¯¹è±¡ä¸­ï¼Œè¯¥å¯¹è±¡ä½œä¸º onRequest() å›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ã€‚ä½†æ˜¯ä¸ºäº†è§£æè¿™äº›æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦é¢å¤–çš„ Node.JS æ¨¡å—ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯ url å’Œ querystring æ¨¡å—ã€‚</p>
<pre><code>                url.parse(string).query
                                        |
        url.parse(string).pathname      |
                    |                   |
                    |                   |
                  ------ -------------------
</code></pre>
<p>  <a class="link"   target="_blank" rel="noopener" href="http://localhost:8888/start?foo=bar&hello=world" >http://localhost:8888/start?foo=bar&amp;hello=world<i class="fas fa-external-link-alt"></i></a><br>                                  â€”       â€”â€“<br>                                  |          |<br>                                  |          |<br>                querystring.parse(queryString)[â€œfooâ€]    |<br>                                              |<br>                            querystring.parse(queryString)[â€œhelloâ€]<br>  ç°åœ¨æˆ‘ä»¬æ¥ç»™ onRequest() å‡½æ•°åŠ ä¸Šä¸€äº›é€»è¾‘ï¼Œç”¨æ¥æ‰¾å‡ºæµè§ˆå™¨è¯·æ±‚çš„ URL è·¯å¾„ï¼š</p>
<p>  router.js<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">route</span>(<span class="params">pathname</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;About to route a request for &quot;</span> + pathname);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">route</span> = route;</span><br></pre></td></tr></table></figure><br>  server.js<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&quot;http&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> url = <span class="built_in">require</span>(<span class="string">&quot;url&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">start</span>(<span class="params">route</span>) &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">onRequest</span>(<span class="params">request, response</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> pathname = url.<span class="title function_">parse</span>(request.<span class="property">url</span>).<span class="property">pathname</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Request for &quot;</span> + pathname + <span class="string">&quot; received.&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">route</span>(pathname);</span><br><span class="line"></span><br><span class="line">    response.<span class="title function_">writeHead</span>(<span class="number">200</span>, &#123;<span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;text/plain&quot;</span>&#125;);</span><br><span class="line">    response.<span class="title function_">write</span>(<span class="string">&quot;Hello World&quot;</span>);</span><br><span class="line">    response.<span class="title function_">end</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  http.<span class="title function_">createServer</span>(onRequest).<span class="title function_">listen</span>(<span class="number">8888</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Server has started.&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">start</span> = start;</span><br></pre></td></tr></table></figure></p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//test.js</span></span><br><span class="line"><span class="keyword">var</span> server = <span class="built_in">require</span>(<span class="string">&quot;./server&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> router = <span class="built_in">require</span>(<span class="string">&quot;./router&quot;</span>);</span><br><span class="line"></span><br><span class="line">server.<span class="title function_">start</span>(router.<span class="property">route</span>);</span><br></pre></td></tr></table></figure>

  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node  test.js </span><br></pre></td></tr></table></figure>

<h1 id="ğŸ™Node-js-å…¨å±€å¯¹è±¡"><a href="#ğŸ™Node-js-å…¨å±€å¯¹è±¡" class="headerlink" title="ğŸ™Node.js å…¨å±€å¯¹è±¡"></a>ğŸ™Node.js å…¨å±€å¯¹è±¡</h1><p>  javaScript ä¸­æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼Œç§°ä¸ºå…¨å±€å¯¹è±¡ï¼ˆGlobal Objectï¼‰ï¼Œå®ƒåŠå…¶æ‰€æœ‰å±æ€§éƒ½å¯ä»¥åœ¨ç¨‹åºçš„ä»»ä½•åœ°æ–¹è®¿é—®ï¼Œå³å…¨å±€å˜é‡ã€‚</p>
<p>  åœ¨æµè§ˆå™¨ JavaScript ä¸­ï¼Œé€šå¸¸ window æ˜¯å…¨å±€å¯¹è±¡ï¼Œ è€Œ Node.js ä¸­çš„å…¨å±€å¯¹è±¡æ˜¯ globalï¼Œæ‰€æœ‰å…¨å±€å˜é‡ï¼ˆé™¤äº† global æœ¬èº«ä»¥å¤–ï¼‰éƒ½æ˜¯ global å¯¹è±¡çš„å±æ€§ã€‚</p>
<p>  åœ¨ Node.js æˆ‘ä»¬å¯ä»¥ç›´æ¥è®¿é—®åˆ° global çš„å±æ€§ï¼Œè€Œä¸éœ€è¦åœ¨åº”ç”¨ä¸­åŒ…å«å®ƒã€‚</p>
<p>  å…¨å±€å¯¹è±¡ä¸å…¨å±€å˜é‡<br>  global æœ€æ ¹æœ¬çš„ä½œç”¨æ˜¯ä½œä¸ºå…¨å±€å˜é‡çš„å®¿ä¸»ã€‚æŒ‰ç…§ ECMAScript çš„å®šä¹‰ï¼Œæ»¡è¶³ä»¥ä¸‹æ¡ ä»¶çš„å˜é‡æ˜¯å…¨å±€å˜é‡ï¼š</p>
<p>  åœ¨æœ€å¤–å±‚å®šä¹‰çš„å˜é‡ï¼›<br>  å…¨å±€å¯¹è±¡çš„å±æ€§ï¼›<br>  éšå¼å®šä¹‰çš„å˜é‡ï¼ˆæœªå®šä¹‰ç›´æ¥èµ‹å€¼çš„å˜é‡ï¼‰ã€‚<br>  å½“ä½ å®šä¹‰ä¸€ä¸ªå…¨å±€å˜é‡æ—¶ï¼Œè¿™ä¸ªå˜é‡åŒæ—¶ä¹Ÿä¼šæˆä¸ºå…¨å±€å¯¹è±¡çš„å±æ€§ï¼Œåä¹‹äº¦ç„¶ã€‚éœ€è¦æ³¨ æ„çš„æ˜¯ï¼Œåœ¨ Node.js ä¸­ä½ ä¸å¯èƒ½åœ¨æœ€å¤–å±‚å®šä¹‰å˜é‡ï¼Œå› ä¸ºæ‰€æœ‰ç”¨æˆ·ä»£ç éƒ½æ˜¯å±äºå½“å‰æ¨¡å—çš„ï¼Œ è€Œæ¨¡å—æœ¬èº«ä¸æ˜¯æœ€å¤–å±‚ä¸Šä¸‹æ–‡ã€‚</p>
<p>  æ³¨æ„ï¼š æœ€å¥½ä¸è¦ä½¿ç”¨ var å®šä¹‰å˜é‡ä»¥é¿å…å¼•å…¥å…¨å±€å˜é‡ï¼Œå› ä¸ºå…¨å±€å˜é‡ä¼šæ±¡æŸ“å‘½åç©ºé—´ï¼Œæé«˜ä»£ç çš„è€¦åˆé£é™©ã€‚</p>
<h2 id="filename"><a href="#filename" class="headerlink" title="__filename"></a>__filename</h2><p>  __filename è¡¨ç¤ºå½“å‰æ­£åœ¨æ‰§è¡Œçš„è„šæœ¬çš„æ–‡ä»¶åã€‚å®ƒå°†è¾“å‡ºæ–‡ä»¶æ‰€åœ¨ä½ç½®çš„ç»å¯¹è·¯å¾„ï¼Œä¸”å’Œå‘½ä»¤è¡Œå‚æ•°æ‰€æŒ‡å®šçš„æ–‡ä»¶åä¸ä¸€å®šç›¸åŒã€‚ å¦‚æœåœ¨æ¨¡å—ä¸­ï¼Œè¿”å›çš„å€¼æ˜¯æ¨¡å—æ–‡ä»¶çš„è·¯å¾„ã€‚</p>
<h2 id="dirname"><a href="#dirname" class="headerlink" title="__dirname"></a>__dirname</h2><p>  __dirname è¡¨ç¤ºå½“å‰æ‰§è¡Œè„šæœ¬æ‰€åœ¨çš„ç›®å½•ã€‚</p>
<h2 id="setTimeout-cb-ms"><a href="#setTimeout-cb-ms" class="headerlink" title="setTimeout(cb, ms)"></a>setTimeout(cb, ms)</h2><p>  setTimeout(cb, ms) å…¨å±€å‡½æ•°åœ¨æŒ‡å®šçš„æ¯«ç§’(ms)æ•°åæ‰§è¡ŒæŒ‡å®šå‡½æ•°(cb)ã€‚ï¼šsetTimeout() åªæ‰§è¡Œä¸€æ¬¡æŒ‡å®šå‡½æ•°ã€‚</p>
<h2 id="clearTimeout-t"><a href="#clearTimeout-t" class="headerlink" title="clearTimeout(t)"></a>clearTimeout(t)</h2><p>  clearTimeout( t ) å…¨å±€å‡½æ•°ç”¨äºåœæ­¢ä¸€ä¸ªä¹‹å‰é€šè¿‡ setTimeout() åˆ›å»ºçš„å®šæ—¶å™¨ã€‚ å‚æ•° t æ˜¯é€šè¿‡ setTimeout() å‡½æ•°åˆ›å»ºçš„å®šæ—¶å™¨ã€‚</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">printHello</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>( <span class="string">&quot;Hello, World!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸¤ç§’åæ‰§è¡Œä»¥ä¸Šå‡½æ•°</span></span><br><span class="line"><span class="keyword">var</span> t = <span class="built_in">setTimeout</span>(printHello, <span class="number">2000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¸…é™¤å®šæ—¶å™¨</span></span><br><span class="line"><span class="built_in">clearTimeout</span>(t);</span><br></pre></td></tr></table></figure>
<p>  æ‰§è¡Œ main.js æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤º:</p>
<h2 id="setInterval-cb-ms"><a href="#setInterval-cb-ms" class="headerlink" title="setInterval(cb, ms)"></a>setInterval(cb, ms)</h2><p>  setInterval(cb, ms) å…¨å±€å‡½æ•°åœ¨æŒ‡å®šçš„æ¯«ç§’(ms)æ•°åæ‰§è¡ŒæŒ‡å®šå‡½æ•°(cb)ã€‚</p>
<p>  è¿”å›ä¸€ä¸ªä»£è¡¨å®šæ—¶å™¨çš„å¥æŸ„å€¼ã€‚å¯ä»¥ä½¿ç”¨ clearInterval(t) å‡½æ•°æ¥æ¸…é™¤å®šæ—¶å™¨ã€‚</p>
<p>  setInterval() æ–¹æ³•ä¼šä¸åœåœ°è°ƒç”¨å‡½æ•°ï¼Œç›´åˆ° clearInterval() è¢«è°ƒç”¨æˆ–çª—å£è¢«å…³é—­ã€‚</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">printHello</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>( <span class="string">&quot;Hello, World!&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ä¸¤ç§’åæ‰§è¡Œä»¥ä¸Šå‡½æ•°</span></span><br><span class="line"><span class="built_in">setInterval</span>(printHello, <span class="number">2000</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="console"><a href="#console" class="headerlink" title="console"></a>console</h2><p>  console ç”¨äºæä¾›æ§åˆ¶å°æ ‡å‡†è¾“å‡ºï¼Œå®ƒæ˜¯ç”± Internet Explorer çš„ JScript å¼•æ“æä¾›çš„è°ƒè¯•å·¥å…·ï¼Œåæ¥é€æ¸æˆä¸ºæµè§ˆå™¨çš„å®æ–½æ ‡å‡†ã€‚</p>
<pre><code>console.log
console.info
console.error
console.warn
</code></pre>
<p>  console.time(label)<br>  è¾“å‡ºæ—¶é—´ï¼Œè¡¨ç¤ºè®¡æ—¶å¼€å§‹ã€‚<br>  console.timeEnd(label)<br>  ç»“æŸæ—¶é—´ï¼Œè¡¨ç¤ºè®¡æ—¶ç»“æŸã€‚<br>    console.trace</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;ç¨‹åºå¼€å§‹æ‰§è¡Œï¼š&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> counter = <span class="number">10</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è®¡æ•°: %d&quot;</span>, counter);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">time</span>(<span class="string">&quot;è·å–æ•°æ®&quot;</span>);</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++  )</span><br><span class="line">&#123;&#125;</span><br><span class="line"><span class="comment">// </span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">timeEnd</span>(<span class="string">&#x27;è·å–æ•°æ®&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">info</span>(<span class="string">&quot;ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚&quot;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="process"><a href="#process" class="headerlink" title="process"></a>process</h2><p>  process æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå³ global å¯¹è±¡çš„å±æ€§ã€‚<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">process.<span class="title function_">on</span>(<span class="string">&#x27;exit&#x27;</span>, <span class="keyword">function</span>(<span class="params">code</span>) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ä»¥ä¸‹ä»£ç æ°¸è¿œä¸ä¼šæ‰§è¡Œ</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;è¯¥ä»£ç ä¸ä¼šæ‰§è¡Œ&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">0</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;é€€å‡ºç ä¸º:&#x27;</span>, code);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;ç¨‹åºæ‰§è¡Œç»“æŸ&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<h2 id="Process-å±æ€§"><a href="#Process-å±æ€§" class="headerlink" title="Process å±æ€§"></a>Process å±æ€§</h2><p>  Process æä¾›äº†å¾ˆå¤šæœ‰ç”¨çš„å±æ€§ï¼Œä¾¿äºæˆ‘ä»¬æ›´å¥½çš„æ§åˆ¶ç³»ç»Ÿçš„äº¤äº’</p>
<pre><code>stdout
</code></pre>
<p>  æ ‡å‡†è¾“å‡ºæµ<br>    stderr<br>  æ ‡å‡†é”™è¯¯æµã€‚<br>    stdin<br>  æ ‡å‡†è¾“å…¥æµã€‚<br>    argv<br>  argv å±æ€§è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œç”±å‘½ä»¤è¡Œæ‰§è¡Œè„šæœ¬æ—¶çš„å„ä¸ªå‚æ•°ç»„æˆã€‚å®ƒçš„ç¬¬ä¸€ä¸ªæˆå‘˜æ€»æ˜¯nodeï¼Œç¬¬äºŒä¸ªæˆå‘˜æ˜¯è„šæœ¬æ–‡ä»¶åï¼Œå…¶ä½™æˆå‘˜æ˜¯è„šæœ¬æ–‡ä»¶çš„å‚æ•°ã€‚<br>    execPath<br>  è¿”å›æ‰§è¡Œå½“å‰è„šæœ¬çš„ Node äºŒè¿›åˆ¶æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ã€‚<br>    execArgv<br>  è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯å‘½ä»¤è¡Œä¸‹æ‰§è¡Œè„šæœ¬æ—¶ï¼Œåœ¨Nodeå¯æ‰§è¡Œæ–‡ä»¶ä¸è„šæœ¬æ–‡ä»¶ä¹‹é—´çš„å‘½ä»¤è¡Œå‚æ•°ã€‚<br>    env<br>  è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œæˆå‘˜ä¸ºå½“å‰ shell çš„ç¯å¢ƒå˜é‡<br>    exitCode<br>  è¿›ç¨‹é€€å‡ºæ—¶çš„ä»£ç ï¼Œå¦‚æœè¿›ç¨‹ä¼˜é€šè¿‡ process.exit() é€€å‡ºï¼Œä¸éœ€è¦æŒ‡å®šé€€å‡ºç ã€‚<br>    version<br>  Node çš„ç‰ˆæœ¬ï¼Œæ¯”å¦‚v0.10.18<br>    config<br>  ä¸€ä¸ªåŒ…å«ç”¨æ¥ç¼–è¯‘å½“å‰ node æ‰§è¡Œæ–‡ä»¶çš„ javascript é…ç½®é€‰é¡¹çš„å¯¹è±¡ã€‚å®ƒä¸è¿è¡Œ .&#x2F;configure è„šæœ¬ç”Ÿæˆçš„ â€œconfig.gypiâ€ æ–‡ä»¶ç›¸åŒã€‚<br>    pid<br>  å½“å‰è¿›ç¨‹çš„è¿›ç¨‹å·ã€‚<br>    title<br>  è¿›ç¨‹åï¼Œé»˜è®¤å€¼ä¸ºâ€nodeâ€ï¼Œå¯ä»¥è‡ªå®šä¹‰è¯¥å€¼ã€‚<br>    platform<br>  è¿è¡Œç¨‹åºæ‰€åœ¨çš„å¹³å°ç³»ç»Ÿ â€˜darwinâ€™, â€˜freebsdâ€™, â€˜linuxâ€™, â€˜sunosâ€™ æˆ– â€˜win32â€™<br>    arch<br>  å½“å‰ CPU çš„æ¶æ„ï¼šâ€™armâ€™ã€â€™ia32â€™ æˆ–è€… â€˜x64â€™ã€‚<br>    mainModule<br>  require.main çš„å¤‡é€‰æ–¹æ³•ã€‚ä¸åŒç‚¹ï¼Œå¦‚æœä¸»æ¨¡å—åœ¨è¿è¡Œæ—¶æ”¹å˜ï¼Œrequire.mainå¯èƒ½ä¼šç»§ç»­è¿”å›è€çš„æ¨¡å—ã€‚å¯ä»¥è®¤ä¸ºï¼Œè¿™ä¸¤è€…å¼•ç”¨äº†åŒä¸€ä¸ªæ¨¡å—ã€‚</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¾“å‡ºåˆ°ç»ˆç«¯</span></span><br><span class="line">process.<span class="property">stdout</span>.<span class="title function_">write</span>(<span class="string">&quot;Hello World!&quot;</span> + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line"><span class="comment">// é€šè¿‡å‚æ•°è¯»å–</span></span><br><span class="line">process.<span class="property">argv</span>.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">val, index, array</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(index + <span class="string">&#x27;: &#x27;</span> + val);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// è·å–æ‰§è¡Œè·¯å¾„</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(process.<span class="property">execPath</span>);</span><br><span class="line"><span class="comment">// å¹³å°ä¿¡æ¯</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(process.<span class="property">platform</span>);</span><br><span class="line"><span class="comment">// è¾“å‡ºå½“å‰ç›®å½•</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å½“å‰ç›®å½•: &#x27;</span> + process.<span class="title function_">cwd</span>());</span><br><span class="line"><span class="comment">// è¾“å‡ºå½“å‰ç‰ˆæœ¬</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å½“å‰ç‰ˆæœ¬: &#x27;</span> + process.<span class="property">version</span>);</span><br><span class="line"><span class="comment">// è¾“å‡ºå†…å­˜ä½¿ç”¨æƒ…å†µ</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(process.<span class="title function_">memoryUsage</span>());</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="ğŸ”­Node-js-MySQL"><a href="#ğŸ”­Node-js-MySQL" class="headerlink" title="ğŸ”­Node.js MySQL"></a>ğŸ”­Node.js MySQL</h1>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install mysql</span><br></pre></td></tr></table></figure>



<p>  select </p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">var</span> mysql  = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>);  </span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> connection = mysql.<span class="title function_">createConnection</span>(&#123;     </span><br><span class="line">  host     : <span class="string">&#x27;localhost&#x27;</span>,       </span><br><span class="line">  user     : <span class="string">&#x27;root&#x27;</span>,              </span><br><span class="line">  password : <span class="string">&#x27;123456789&#x27;</span>,   <span class="comment">//pwd  </span></span><br><span class="line">  <span class="attr">port</span>: <span class="string">&#x27;30306&#x27;</span>,                   </span><br><span class="line">  <span class="attr">database</span>: <span class="string">&#x27;IMDB&#x27;</span> </span><br><span class="line">&#125;); </span><br><span class="line"></span><br><span class="line">connection.<span class="title function_">connect</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span>  sql = <span class="string">&#x27;SELECT * FROM IMConfig;&#x27;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(sql);</span><br><span class="line"><span class="comment">//æŸ¥</span></span><br><span class="line">connection.<span class="title function_">query</span>(sql,<span class="keyword">function</span> (<span class="params">err, result</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[SELECT ERROR] - &#x27;</span>,err.<span class="property">message</span>);</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;--------------------------SELECT----------------------------&#x27;</span>);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(result);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;------------------------------------------------------------\n\n&#x27;</span>);  </span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">connection.<span class="title function_">end</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="ERROR-1045-28000-Access-denied-for-user-â€˜rootâ€˜-â€˜localhostâ€˜-using-password-YES"><a href="#ERROR-1045-28000-Access-denied-for-user-â€˜rootâ€˜-â€˜localhostâ€˜-using-password-YES" class="headerlink" title="ERROR 1045 (28000): Access denied for user â€˜rootâ€˜@â€˜localhostâ€˜ (using password: YES)"></a>ERROR 1045 (28000): Access denied for user â€˜rootâ€˜@â€˜localhostâ€˜ (using password: YES)</h2><p>  è¿™è¾¹æ˜¯é€šè¿‡dockerå®‰è£…çš„mysqlï¼Œç™»å½•æŠ¥é”™<br>  root@f4a3881e5f06:&#x2F;# mysql -uroot  -p<br>  Enter password: 123456<br>  ERROR 1045 (28000): Access denied for user â€˜rootâ€˜@â€™localhostâ€™ (using password: YES)</p>
<p>  å¦‚æœå¸¸è§„çš„å‘½ä»¤ mysql -uroot -pæ— æ³•ç™»å½•ï¼Œä½¿ç”¨å‘½ä»¤å°è¯•ï¼š</p>
<p>  mysql -u root -h 127.0.0.1 -p</p>
<h2 id="Error-ER-NOT-SUPPORTED-AUTH-MODE-Client-does-not-support-authentication-protocol-requested"><a href="#Error-ER-NOT-SUPPORTED-AUTH-MODE-Client-does-not-support-authentication-protocol-requested" class="headerlink" title="Error: ER_NOT_SUPPORTED_AUTH_MODE: Client does not support authentication protocol requested"></a>Error: ER_NOT_SUPPORTED_AUTH_MODE: Client does not support authentication protocol requested</h2><p>  mysql -u root -p<br>  ALTER USER â€˜rootâ€˜@â€™%â€™ IDENTIFIED WITH mysql_native_password BY â€˜123456789â€™;<br>  flush privileges;</p>
<p>  insert<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">connection.<span class="title function_">connect</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span>  addSql = <span class="string">&#x27;INSERT INTO IMConfig(ConfigID,UserID,ConfigName,ConfigCreateTime,ConfigType,ConfigSn) VALUES(0,?,?,?,?,?)&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span>  addSqlParams = [<span class="string">&#x27;1&#x27;</span>, <span class="string">&#x27;11&#x27;</span>,<span class="string">&#x27;2023-01-01&#x27;</span>, <span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;1&#x27;</span>];</span><br><span class="line"><span class="comment">//å¢</span></span><br><span class="line">connection.<span class="title function_">query</span>(addSql,addSqlParams,<span class="keyword">function</span> (<span class="params">err, result</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[INSERT ERROR] - &#x27;</span>,err.<span class="property">message</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">        &#125;        </span><br><span class="line"></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;--------------------------INSERT----------------------------&#x27;</span>);</span><br><span class="line">      <span class="comment">//console.log(&#x27;INSERT ID:&#x27;,result.insertId);        </span></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;INSERT ID:&#x27;</span>,result);        </span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;-----------------------------------------------------------------\n\n&#x27;</span>);  </span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">connection.<span class="title function_">end</span>();</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>  ER_NO_SUCH_TABLE: Table â€˜IMDB.IMCONFIGâ€™ doesnâ€™t exist<br>  ä¸­è‹±æ–‡é”™è¯¯<br>  ER_WRONG_VALUE_COUNT_ON_ROW: Column count doesnâ€™t match value count at row 1<br>  å­—æ®µé”™è¯¯<br>  ER_TRUNCATED_WRONG_VALUE: Incorrect datetime value: â€˜2023-01-01T16:00:00.000Zâ€™ for column â€˜ConfigCreateTimeâ€™ at row 1<br>  å­—æ®µç±»å‹</p>
<p>  update<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//update </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">connection.<span class="title function_">connect</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> modSql = <span class="string">&#x27;UPDATE IMConfig SET ConfigName = ?,ConfigType = ?,ConfigSn = ? WHERE ConfigId = ?&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> modSqlParams = [<span class="string">&#x27;lang&#x27;</span>, <span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;1&#x27;</span>,<span class="number">5</span>];</span><br><span class="line"><span class="comment">//æ”¹</span></span><br><span class="line">connection.<span class="title function_">query</span>(modSql,modSqlParams,<span class="keyword">function</span> (<span class="params">err, result</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span>(err)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[UPDATE ERROR] - &#x27;</span>,err.<span class="property">message</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">  &#125;        </span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;--------------------------UPDATE----------------------------&#x27;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;UPDATE affectedRows&#x27;</span>,result.<span class="property">affectedRows</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;-----------------------------------------------------------------\n\n&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">connection.<span class="title function_">end</span>();</span><br></pre></td></tr></table></figure><br>  delete<br>  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">connection.<span class="title function_">connect</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> delSql = <span class="string">&#x27;DELETE FROM IMConfig where ConfigID=5&#x27;</span>;</span><br><span class="line"><span class="comment">//åˆ </span></span><br><span class="line">connection.<span class="title function_">query</span>(delSql,<span class="keyword">function</span> (<span class="params">err, result</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">          <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;[DELETE ERROR] - &#x27;</span>,err.<span class="property">message</span>);</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">        &#125;        </span><br><span class="line"></span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;--------------------------DELETE----------------------------&#x27;</span>);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;DELETE affectedRows&#x27;</span>,result.<span class="property">affectedRows</span>);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;-----------------------------------------------------------------\n\n&#x27;</span>);  </span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">connection.<span class="title function_">end</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<h1 id="ğŸ§µNode-js-Socket"><a href="#ğŸ§µNode-js-Socket" class="headerlink" title="ğŸ§µNode.js Socket"></a>ğŸ§µNode.js Socket</h1><p>  socket client </p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//sk</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> net = <span class="built_in">require</span>(<span class="string">&#x27;net&#x27;</span>);</span><br><span class="line"><span class="keyword">var</span> client = net.<span class="title function_">connect</span>(<span class="string">&#x27;6001&#x27;</span>, <span class="string">&#x27;xxxx&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å·²ç»ä¸æœåŠ¡å™¨è¿æ¥&#x27;</span>);</span><br><span class="line">    client.<span class="title function_">write</span>(<span class="string">&#x27;Yes\r\n&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">client.<span class="title function_">on</span>(<span class="string">&#x27;data&#x27;</span>, <span class="keyword">function</span>(<span class="params">data</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data.<span class="title function_">toString</span>());</span><br><span class="line">    client.<span class="title function_">end</span>();<span class="comment">//one msg end</span></span><br><span class="line">&#125;);</span><br><span class="line">client.<span class="title function_">on</span>(<span class="string">&#x27;end&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;å®¢æˆ·ç«¯è¿æ¥ä¸­æ–­&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>






                </div>
                

                <div class="post-bottom-tags-and-share border-box">
                    <div>
                        
                            <ul class="post-tags-box border-box">
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/socket/">socket</a>
                                    </li>
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/mysql/">mysql</a>
                                    </li>
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/Node-js/">Node.js</a>
                                    </li>
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/helloworld/">helloworld</a>
                                    </li>
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/event/">event</a>
                                    </li>
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/buffer/">buffer</a>
                                    </li>
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/stream/">stream</a>
                                    </li>
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/c/">c++</a>
                                    </li>
                                
                                    <li class="tag-item border-box">
                                        <i class="icon fas fa-hashtag"></i>&nbsp;<a href="/tags/router/">router</a>
                                    </li>
                                
                            </ul>
                        
                    </div>
                    <div>
                        
                    </div>
                </div>

                

                
                    <div class="post-nav border-box">
                        
                            <div class="prev-post">
                                <a class="prev"
                                   rel="prev"
                                   href="/2024/05/17/Nodejs-Base2/"
                                   title="Nodejs2"
                                >
                                    <span class="left arrow-icon flex-center">
                                        <i class="fas fa-chevron-left"></i>
                                    </span>
                                    <span class="title flex-center">
                                        <span class="post-nav-title-item text-ellipsis">Nodejs2</span>
                                        <span class="post-nav-item">Prev posts</span>
                                    </span>
                                </a>
                            </div>
                        
                        
                            <div class="next-post">
                                <a class="next"
                                   rel="next"
                                   href="/2024/05/16/HarmonyOS-Photos/"
                                   title="HarmonyOS Photos Column Swiper Grid"
                                >
                                    <span class="title flex-center">
                                        <span class="post-nav-title-item text-ellipsis">HarmonyOS Photos Column Swiper Grid</span>
                                        <span class="post-nav-item">Next posts</span>
                                    </span>
                                    <span class="right arrow-icon flex-center">
                                        <i class="fas fa-chevron-right"></i>
                                    </span>
                                </a>
                            </div>
                        
                    </div>
                

                
                    






                
            </div>
        </div>

        
    </div>
</div>


                
            </div>
        </div>

        <div class="page-main-content-bottom border-box">
            
<footer class="footer border-box">
    <div class="copyright-info info-item">
        &copy;&nbsp;<span>2020</span>&nbsp;-&nbsp;2024
        
            &nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;&nbsp;<a href="/">lm</a>
        
    </div>

    <div class="theme-info info-item">
        Powered by&nbsp;Hexo <a target="_blank" href="https://hexo.io"></a>&nbsp;&&nbsp;Theme&nbsp; Keep 
    </div>

    

    

    
</footer>



<script type="text/javascript">

    function notfound(imgElement) {  
            var src = imgElement.src;  
            var parts = src.split('/'); // ä½¿ç”¨'/'åˆ†å‰²URL  
            var filename = parts[parts.length - 1]; // è·å–æœ€åä¸€éƒ¨åˆ†ï¼ˆæ–‡ä»¶åï¼‰  
            //console.log(filename); // è¾“å‡º: 20201124032511.png  
      
            imgElement.src = "https://47.115.223.75:8080/group1/v2/" + filename+"?timestamp=" + Date.now();
    
            imgElement.onerror = null; // è§£ç»‘onerroräº‹ä»¶  
        }  
    //     function notfound() {
    
    //         var img2 = document.getElementById(this);  
    // var src = img2.src;  
    // var parts = src.split('/'); // ä½¿ç”¨'/'åˆ†å‰²URL  
    // var filename = parts[parts.length - 1]; // è·å–æœ€åä¸€éƒ¨åˆ†ï¼ˆæ–‡ä»¶åï¼‰  
    // console.log(filename); // è¾“å‡º: image.jpg
    
    //         var img = event.srcElement;
    //         img.src = "https://img-home.csdnimg.cn/images/"+filename;
    //         img.onerror = null; //è§£ç»‘onerroräº‹ä»¶
    //     }
    </script>
        </div>
    </div>

    <!-- post tools -->
    
        <div class="post-tools right-toc">
            <div class="post-tools-container border-box">
    <ul class="tools-list border-box">
        <!-- PC TOC show toggle -->
        

        <!-- PC go comment -->
        

        <!-- PC full screen -->
        <li class="tools-item flex-center full-screen">
            <i class="fa-solid fa-expand"></i>
        </li>
    </ul>
</div>

        </div>
    

    <!-- side tools -->
    <div class="side-tools">
        <div class="side-tools-container border-box ">
    <ul class="side-tools-list side-tools-show-handle border-box">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-toggle-theme-mode flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list border-box">
        

        

        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>

        <li class="tools-item tool-scroll-to-top flex-center show-arrow">
            <i class="arrow fas fa-arrow-up"></i>
            <span class="percent"></span>
        </li>
    </ul>
</div>

    </div>

    <!-- image mask -->
    <div class="zoom-in-image-mask">
    <img class="zoom-in-image">
</div>


    <!-- local search -->
    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="Search..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="close-popup-btn">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

    <!-- tablet toc -->
    
</main>



<!-- common -->

<script src="/js/utils.js"></script>

<script src="/js/header-shrink.js"></script>

<script src="/js/back2top.js"></script>

<script src="/js/toggle-theme.js"></script>

<script src="/js/code-block.js"></script>

<script src="/js/main.js"></script>

<script src="/js/libs/anime.min.js"></script>


<!-- local-search -->

    
<script src="/js/local-search.js"></script>



<!-- lazyload -->


<div class="">
    
        <!-- post-helper -->
        
<script src="/js/post/post-helper.js"></script>


        <!-- toc -->
        

        <!-- copyright-info -->
        

        <!-- share -->
        
    

    <!-- categories page -->
    

    <!-- links page -->
    

    <!-- photos page -->
    

    <!-- tools page -->
    
</div>

<!-- mermaid -->


<!-- pjax -->



</body>
</html>
